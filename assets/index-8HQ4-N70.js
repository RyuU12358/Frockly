(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var Co=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yh(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zne(t){if(t.__esModule)return t;var s=t.default;if(typeof s=="function"){var r=function i(){return this instanceof i?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};r.prototype=s.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var l=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,l.get?l:{enumerable:!0,get:function(){return t[i]}})}),r}var oN={exports:{}},nT={},lN={exports:{}},_t={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kh=Symbol.for("react.element"),ww=Symbol.for("react.portal"),Mw=Symbol.for("react.fragment"),Dw=Symbol.for("react.strict_mode"),Pw=Symbol.for("react.profiler"),Fw=Symbol.for("react.provider"),Bw=Symbol.for("react.context"),Uw=Symbol.for("react.forward_ref"),Hw=Symbol.for("react.suspense"),Gw=Symbol.for("react.memo"),Vw=Symbol.for("react.lazy"),dv=Symbol.iterator;function Ww(t){return t===null||typeof t!="object"?null:(t=dv&&t[dv]||t["@@iterator"],typeof t=="function"?t:null)}var aN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},cN=Object.assign,uN={};function Oc(t,s,r){this.props=t,this.context=s,this.refs=uN,this.updater=r||aN}Oc.prototype.isReactComponent={};Oc.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Oc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function hN(){}hN.prototype=Oc.prototype;function _$(t,s,r){this.props=t,this.context=s,this.refs=uN,this.updater=r||aN}var T$=_$.prototype=new hN;T$.constructor=_$;cN(T$,Oc.prototype);T$.isPureReactComponent=!0;var fv=Array.isArray,dN=Object.prototype.hasOwnProperty,p$={current:null},fN={key:!0,ref:!0,__self:!0,__source:!0};function _N(t,s,r){var i,l={},c=null,u=null;if(s!=null)for(i in s.ref!==void 0&&(u=s.ref),s.key!==void 0&&(c=""+s.key),s)dN.call(s,i)&&!fN.hasOwnProperty(i)&&(l[i]=s[i]);var h=arguments.length-2;if(h===1)l.children=r;else if(1<h){for(var f=Array(h),_=0;_<h;_++)f[_]=arguments[_+2];l.children=f}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)l[i]===void 0&&(l[i]=h[i]);return{$$typeof:kh,type:t,key:c,ref:u,props:l,_owner:p$.current}}function Xw(t,s){return{$$typeof:kh,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function g$(t){return typeof t=="object"&&t!==null&&t.$$typeof===kh}function jw(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var _v=/\/+/g;function l0(t,s){return typeof t=="object"&&t!==null&&t.key!=null?jw(""+t.key):s.toString(36)}function l_(t,s,r,i,l){var c=typeof t;(c==="undefined"||c==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(c){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case kh:case ww:u=!0}}if(u)return u=t,l=l(u),t=i===""?"."+l0(u,0):i,fv(l)?(r="",t!=null&&(r=t.replace(_v,"$&/")+"/"),l_(l,s,r,"",function(_){return _})):l!=null&&(g$(l)&&(l=Xw(l,r+(!l.key||u&&u.key===l.key?"":(""+l.key).replace(_v,"$&/")+"/")+t)),s.push(l)),1;if(u=0,i=i===""?".":i+":",fv(t))for(var h=0;h<t.length;h++){c=t[h];var f=i+l0(c,h);u+=l_(c,s,r,f,l)}else if(f=Ww(t),typeof f=="function")for(t=f.call(t),h=0;!(c=t.next()).done;)c=c.value,f=i+l0(c,h++),u+=l_(c,s,r,f,l);else if(c==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return u}function kf(t,s,r){if(t==null)return t;var i=[],l=0;return l_(t,i,"","",function(c){return s.call(r,c,l++)}),i}function zw(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var Rn={current:null},a_={transition:null},Yw={ReactCurrentDispatcher:Rn,ReactCurrentBatchConfig:a_,ReactCurrentOwner:p$};function TN(){throw Error("act(...) is not supported in production builds of React.")}_t.Children={map:kf,forEach:function(t,s,r){kf(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return kf(t,function(){s++}),s},toArray:function(t){return kf(t,function(s){return s})||[]},only:function(t){if(!g$(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};_t.Component=Oc;_t.Fragment=Mw;_t.Profiler=Pw;_t.PureComponent=_$;_t.StrictMode=Dw;_t.Suspense=Hw;_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yw;_t.act=TN;_t.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=cN({},t.props),l=t.key,c=t.ref,u=t._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,u=p$.current),s.key!==void 0&&(l=""+s.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(f in s)dN.call(s,f)&&!fN.hasOwnProperty(f)&&(i[f]=s[f]===void 0&&h!==void 0?h[f]:s[f])}var f=arguments.length-2;if(f===1)i.children=r;else if(1<f){h=Array(f);for(var _=0;_<f;_++)h[_]=arguments[_+2];i.children=h}return{$$typeof:kh,type:t.type,key:l,ref:c,props:i,_owner:u}};_t.createContext=function(t){return t={$$typeof:Bw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Fw,_context:t},t.Consumer=t};_t.createElement=_N;_t.createFactory=function(t){var s=_N.bind(null,t);return s.type=t,s};_t.createRef=function(){return{current:null}};_t.forwardRef=function(t){return{$$typeof:Uw,render:t}};_t.isValidElement=g$;_t.lazy=function(t){return{$$typeof:Vw,_payload:{_status:-1,_result:t},_init:zw}};_t.memo=function(t,s){return{$$typeof:Gw,type:t,compare:s===void 0?null:s}};_t.startTransition=function(t){var s=a_.transition;a_.transition={};try{t()}finally{a_.transition=s}};_t.unstable_act=TN;_t.useCallback=function(t,s){return Rn.current.useCallback(t,s)};_t.useContext=function(t){return Rn.current.useContext(t)};_t.useDebugValue=function(){};_t.useDeferredValue=function(t){return Rn.current.useDeferredValue(t)};_t.useEffect=function(t,s){return Rn.current.useEffect(t,s)};_t.useId=function(){return Rn.current.useId()};_t.useImperativeHandle=function(t,s,r){return Rn.current.useImperativeHandle(t,s,r)};_t.useInsertionEffect=function(t,s){return Rn.current.useInsertionEffect(t,s)};_t.useLayoutEffect=function(t,s){return Rn.current.useLayoutEffect(t,s)};_t.useMemo=function(t,s){return Rn.current.useMemo(t,s)};_t.useReducer=function(t,s,r){return Rn.current.useReducer(t,s,r)};_t.useRef=function(t){return Rn.current.useRef(t)};_t.useState=function(t){return Rn.current.useState(t)};_t.useSyncExternalStore=function(t,s,r){return Rn.current.useSyncExternalStore(t,s,r)};_t.useTransition=function(){return Rn.current.useTransition()};_t.version="18.3.1";lN.exports=_t;var ve=lN.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kw=ve,Jw=Symbol.for("react.element"),qw=Symbol.for("react.fragment"),Zw=Object.prototype.hasOwnProperty,Qw=Kw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,eM={key:!0,ref:!0,__self:!0,__source:!0};function pN(t,s,r){var i,l={},c=null,u=null;r!==void 0&&(c=""+r),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(u=s.ref);for(i in s)Zw.call(s,i)&&!eM.hasOwnProperty(i)&&(l[i]=s[i]);if(t&&t.defaultProps)for(i in s=t.defaultProps,s)l[i]===void 0&&(l[i]=s[i]);return{$$typeof:Jw,type:t,key:c,ref:u,props:l,_owner:Qw.current}}nT.Fragment=qw;nT.jsx=pN;nT.jsxs=pN;oN.exports=nT;var V=oN.exports,gN={exports:{}},es={},EN={exports:{}},mN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(Re,K){var z=Re.length;Re.push(K);e:for(;0<z;){var oe=z-1>>>1,M=Re[oe];if(0<l(M,K))Re[oe]=K,Re[z]=M,z=oe;else break e}}function r(Re){return Re.length===0?null:Re[0]}function i(Re){if(Re.length===0)return null;var K=Re[0],z=Re.pop();if(z!==K){Re[0]=z;e:for(var oe=0,M=Re.length,Z=M>>>1;oe<Z;){var J=2*(oe+1)-1,q=Re[J],he=J+1,xe=Re[he];if(0>l(q,z))he<M&&0>l(xe,q)?(Re[oe]=xe,Re[he]=z,oe=he):(Re[oe]=q,Re[J]=z,oe=J);else if(he<M&&0>l(xe,z))Re[oe]=xe,Re[he]=z,oe=he;else break e}}return K}function l(Re,K){var z=Re.sortIndex-K.sortIndex;return z!==0?z:Re.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var f=[],_=[],T=1,g=null,E=3,S=!1,R=!1,L=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(Re){for(var K=r(_);K!==null;){if(K.callback===null)i(_);else if(K.startTime<=Re)i(_),K.sortIndex=K.expirationTime,s(f,K);else break;K=r(_)}}function y(Re){if(L=!1,m(Re),!R)if(r(f)!==null)R=!0,ke(H);else{var K=r(_);K!==null&&ye(y,K.startTime-Re)}}function H(Re,K){R=!1,L&&(L=!1,v(F),F=-1),S=!0;var z=E;try{for(m(K),g=r(f);g!==null&&(!(g.expirationTime>K)||Re&&!ne());){var oe=g.callback;if(typeof oe=="function"){g.callback=null,E=g.priorityLevel;var M=oe(g.expirationTime<=K);K=t.unstable_now(),typeof M=="function"?g.callback=M:g===r(f)&&i(f),m(K)}else i(f);g=r(f)}if(g!==null)var Z=!0;else{var J=r(_);J!==null&&ye(y,J.startTime-K),Z=!1}return Z}finally{g=null,E=z,S=!1}}var G=!1,k=null,F=-1,B=5,re=-1;function ne(){return!(t.unstable_now()-re<B)}function ee(){if(k!==null){var Re=t.unstable_now();re=Re;var K=!0;try{K=k(!0,Re)}finally{K?me():(G=!1,k=null)}}else G=!1}var me;if(typeof A=="function")me=function(){A(ee)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Oe=we.port2;we.port1.onmessage=ee,me=function(){Oe.postMessage(null)}}else me=function(){x(ee,0)};function ke(Re){k=Re,G||(G=!0,me())}function ye(Re,K){F=x(function(){Re(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Re){Re.callback=null},t.unstable_continueExecution=function(){R||S||(R=!0,ke(H))},t.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Re?Math.floor(1e3/Re):5},t.unstable_getCurrentPriorityLevel=function(){return E},t.unstable_getFirstCallbackNode=function(){return r(f)},t.unstable_next=function(Re){switch(E){case 1:case 2:case 3:var K=3;break;default:K=E}var z=E;E=K;try{return Re()}finally{E=z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Re,K){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var z=E;E=Re;try{return K()}finally{E=z}},t.unstable_scheduleCallback=function(Re,K,z){var oe=t.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?oe+z:oe):z=oe,Re){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=z+M,Re={id:T++,callback:K,priorityLevel:Re,startTime:z,expirationTime:M,sortIndex:-1},z>oe?(Re.sortIndex=z,s(_,Re),r(f)===null&&Re===r(_)&&(L?(v(F),F=-1):L=!0,ye(y,z-oe))):(Re.sortIndex=M,s(f,Re),R||S||(R=!0,ke(H))),Re},t.unstable_shouldYield=ne,t.unstable_wrapCallback=function(Re){var K=E;return function(){var z=E;E=K;try{return Re.apply(this,arguments)}finally{E=z}}}})(mN);EN.exports=mN;var tM=EN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM=ve,qn=tM;function Fe(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $N=new Set,sh={};function Bl(t,s){hc(t,s),hc(t+"Capture",s)}function hc(t,s){for(sh[t]=s,t=0;t<s.length;t++)$N.add(s[t])}var Wi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,nM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Tv={},pv={};function sM(t){return rm.call(pv,t)?!0:rm.call(Tv,t)?!1:nM.test(t)?pv[t]=!0:(Tv[t]=!0,!1)}function iM(t,s,r,i){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function oM(t,s,r,i){if(s===null||typeof s>"u"||iM(t,s,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Ln(t,s,r,i,l,c,u){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=i,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=c,this.removeEmptyString=u}var qr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){qr[t]=new Ln(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];qr[s]=new Ln(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){qr[t]=new Ln(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){qr[t]=new Ln(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){qr[t]=new Ln(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){qr[t]=new Ln(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){qr[t]=new Ln(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){qr[t]=new Ln(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){qr[t]=new Ln(t,5,!1,t.toLowerCase(),null,!1,!1)});var E$=/[\-:]([a-z])/g;function m$(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(E$,m$);qr[s]=new Ln(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(E$,m$);qr[s]=new Ln(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(E$,m$);qr[s]=new Ln(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){qr[t]=new Ln(t,1,!1,t.toLowerCase(),null,!1,!1)});qr.xlinkHref=new Ln("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){qr[t]=new Ln(t,1,!1,t.toLowerCase(),null,!0,!0)});function $$(t,s,r,i){var l=qr.hasOwnProperty(s)?qr[s]:null;(l!==null?l.type!==0:i||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(oM(s,r,l,i)&&(r=null),i||l===null?sM(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):l.mustUseProperty?t[l.propertyName]=r===null?l.type===3?!1:"":r:(s=l.attributeName,i=l.attributeNamespace,r===null?t.removeAttribute(s):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,i?t.setAttributeNS(i,s,r):t.setAttribute(s,r))))}var Yi=rM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wf=Symbol.for("react.element"),Fa=Symbol.for("react.portal"),Ba=Symbol.for("react.fragment"),I$=Symbol.for("react.strict_mode"),nm=Symbol.for("react.profiler"),IN=Symbol.for("react.provider"),ON=Symbol.for("react.context"),O$=Symbol.for("react.forward_ref"),sm=Symbol.for("react.suspense"),im=Symbol.for("react.suspense_list"),S$=Symbol.for("react.memo"),mo=Symbol.for("react.lazy"),SN=Symbol.for("react.offscreen"),gv=Symbol.iterator;function Iu(t){return t===null||typeof t!="object"?null:(t=gv&&t[gv]||t["@@iterator"],typeof t=="function"?t:null)}var er=Object.assign,a0;function Nu(t){if(a0===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);a0=s&&s[1]||""}return`
`+a0+t}var c0=!1;function u0(t,s){if(!t||c0)return"";c0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(_){var i=_}Reflect.construct(t,[],s)}else{try{s.call()}catch(_){i=_}t.call(s.prototype)}else{try{throw Error()}catch(_){i=_}t()}}catch(_){if(_&&i&&typeof _.stack=="string"){for(var l=_.stack.split(`
`),c=i.stack.split(`
`),u=l.length-1,h=c.length-1;1<=u&&0<=h&&l[u]!==c[h];)h--;for(;1<=u&&0<=h;u--,h--)if(l[u]!==c[h]){if(u!==1||h!==1)do if(u--,h--,0>h||l[u]!==c[h]){var f=`
`+l[u].replace(" at new "," at ");return t.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",t.displayName)),f}while(1<=u&&0<=h);break}}}finally{c0=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Nu(t):""}function lM(t){switch(t.tag){case 5:return Nu(t.type);case 16:return Nu("Lazy");case 13:return Nu("Suspense");case 19:return Nu("SuspenseList");case 0:case 2:case 15:return t=u0(t.type,!1),t;case 11:return t=u0(t.type.render,!1),t;case 1:return t=u0(t.type,!0),t;default:return""}}function om(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ba:return"Fragment";case Fa:return"Portal";case nm:return"Profiler";case I$:return"StrictMode";case sm:return"Suspense";case im:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case ON:return(t.displayName||"Context")+".Consumer";case IN:return(t._context.displayName||"Context")+".Provider";case O$:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case S$:return s=t.displayName||null,s!==null?s:om(t.type)||"Memo";case mo:s=t._payload,t=t._init;try{return om(t(s))}catch{}}return null}function aM(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return om(s);case 8:return s===I$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Fo(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function RN(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function cM(t){var s=RN(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),i=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,c=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return l.call(this)},set:function(u){i=""+u,c.call(this,u)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function Mf(t){t._valueTracker||(t._valueTracker=cM(t))}function LN(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),i="";return t&&(i=RN(t)?t.checked?"true":"false":t.value),t=i,t!==r?(s.setValue(t),!0):!1}function $_(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lm(t,s){var r=s.checked;return er({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ev(t,s){var r=s.defaultValue==null?"":s.defaultValue,i=s.checked!=null?s.checked:s.defaultChecked;r=Fo(s.value!=null?s.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function AN(t,s){s=s.checked,s!=null&&$$(t,"checked",s,!1)}function am(t,s){AN(t,s);var r=Fo(s.value),i=s.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?cm(t,s.type,r):s.hasOwnProperty("defaultValue")&&cm(t,s.type,Fo(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function mv(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var i=s.type;if(!(i!=="submit"&&i!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function cm(t,s,r){(s!=="number"||$_(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var bu=Array.isArray;function Qa(t,s,r,i){if(t=t.options,s){s={};for(var l=0;l<r.length;l++)s["$"+r[l]]=!0;for(r=0;r<t.length;r++)l=s.hasOwnProperty("$"+t[r].value),t[r].selected!==l&&(t[r].selected=l),l&&i&&(t[r].defaultSelected=!0)}else{for(r=""+Fo(r),s=null,l=0;l<t.length;l++){if(t[l].value===r){t[l].selected=!0,i&&(t[l].defaultSelected=!0);return}s!==null||t[l].disabled||(s=t[l])}s!==null&&(s.selected=!0)}}function um(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return er({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $v(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(Fe(92));if(bu(r)){if(1<r.length)throw Error(Fe(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Fo(r)}}function vN(t,s){var r=Fo(s.value),i=Fo(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function Iv(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function CN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function hm(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?CN(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Df,xN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,i,l){MSApp.execUnsafeLocalFunction(function(){return t(s,r,i,l)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(Df=Df||document.createElement("div"),Df.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=Df.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function ih(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Fu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uM=["Webkit","ms","Moz","O"];Object.keys(Fu).forEach(function(t){uM.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Fu[s]=Fu[t]})});function NN(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Fu.hasOwnProperty(t)&&Fu[t]?(""+s).trim():s+"px"}function bN(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var i=r.indexOf("--")===0,l=NN(r,s[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,l):t[r]=l}}var hM=er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dm(t,s){if(s){if(hM[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Fe(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Fe(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Fe(62))}}function fm(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _m=null;function R$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Tm=null,ec=null,tc=null;function Ov(t){if(t=Dh(t)){if(typeof Tm!="function")throw Error(Fe(280));var s=t.stateNode;s&&(s=aT(s),Tm(t.stateNode,t.type,s))}}function yN(t){ec?tc?tc.push(t):tc=[t]:ec=t}function kN(){if(ec){var t=ec,s=tc;if(tc=ec=null,Ov(t),s)for(t=0;t<s.length;t++)Ov(s[t])}}function wN(t,s){return t(s)}function MN(){}var h0=!1;function DN(t,s,r){if(h0)return t(s,r);h0=!0;try{return wN(t,s,r)}finally{h0=!1,(ec!==null||tc!==null)&&(MN(),kN())}}function oh(t,s){var r=t.stateNode;if(r===null)return null;var i=aT(r);if(i===null)return null;r=i[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Fe(231,s,typeof r));return r}var pm=!1;if(Wi)try{var Ou={};Object.defineProperty(Ou,"passive",{get:function(){pm=!0}}),window.addEventListener("test",Ou,Ou),window.removeEventListener("test",Ou,Ou)}catch{pm=!1}function dM(t,s,r,i,l,c,u,h,f){var _=Array.prototype.slice.call(arguments,3);try{s.apply(r,_)}catch(T){this.onError(T)}}var Bu=!1,I_=null,O_=!1,gm=null,fM={onError:function(t){Bu=!0,I_=t}};function _M(t,s,r,i,l,c,u,h,f){Bu=!1,I_=null,dM.apply(fM,arguments)}function TM(t,s,r,i,l,c,u,h,f){if(_M.apply(this,arguments),Bu){if(Bu){var _=I_;Bu=!1,I_=null}else throw Error(Fe(198));O_||(O_=!0,gm=_)}}function Ul(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function PN(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function Sv(t){if(Ul(t)!==t)throw Error(Fe(188))}function pM(t){var s=t.alternate;if(!s){if(s=Ul(t),s===null)throw Error(Fe(188));return s!==t?null:t}for(var r=t,i=s;;){var l=r.return;if(l===null)break;var c=l.alternate;if(c===null){if(i=l.return,i!==null){r=i;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===r)return Sv(l),t;if(c===i)return Sv(l),s;c=c.sibling}throw Error(Fe(188))}if(r.return!==i.return)r=l,i=c;else{for(var u=!1,h=l.child;h;){if(h===r){u=!0,r=l,i=c;break}if(h===i){u=!0,i=l,r=c;break}h=h.sibling}if(!u){for(h=c.child;h;){if(h===r){u=!0,r=c,i=l;break}if(h===i){u=!0,i=c,r=l;break}h=h.sibling}if(!u)throw Error(Fe(189))}}if(r.alternate!==i)throw Error(Fe(190))}if(r.tag!==3)throw Error(Fe(188));return r.stateNode.current===r?t:s}function FN(t){return t=pM(t),t!==null?BN(t):null}function BN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=BN(t);if(s!==null)return s;t=t.sibling}return null}var UN=qn.unstable_scheduleCallback,Rv=qn.unstable_cancelCallback,gM=qn.unstable_shouldYield,EM=qn.unstable_requestPaint,Tr=qn.unstable_now,mM=qn.unstable_getCurrentPriorityLevel,L$=qn.unstable_ImmediatePriority,HN=qn.unstable_UserBlockingPriority,S_=qn.unstable_NormalPriority,$M=qn.unstable_LowPriority,GN=qn.unstable_IdlePriority,sT=null,_i=null;function IM(t){if(_i&&typeof _i.onCommitFiberRoot=="function")try{_i.onCommitFiberRoot(sT,t,void 0,(t.current.flags&128)===128)}catch{}}var Bs=Math.clz32?Math.clz32:RM,OM=Math.log,SM=Math.LN2;function RM(t){return t>>>=0,t===0?32:31-(OM(t)/SM|0)|0}var Pf=64,Ff=4194304;function yu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function R_(t,s){var r=t.pendingLanes;if(r===0)return 0;var i=0,l=t.suspendedLanes,c=t.pingedLanes,u=r&268435455;if(u!==0){var h=u&~l;h!==0?i=yu(h):(c&=u,c!==0&&(i=yu(c)))}else u=r&~l,u!==0?i=yu(u):c!==0&&(i=yu(c));if(i===0)return 0;if(s!==0&&s!==i&&!(s&l)&&(l=i&-i,c=s&-s,l>=c||l===16&&(c&4194240)!==0))return s;if(i&4&&(i|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=i;0<s;)r=31-Bs(s),l=1<<r,i|=t[r],s&=~l;return i}function LM(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function AM(t,s){for(var r=t.suspendedLanes,i=t.pingedLanes,l=t.expirationTimes,c=t.pendingLanes;0<c;){var u=31-Bs(c),h=1<<u,f=l[u];f===-1?(!(h&r)||h&i)&&(l[u]=LM(h,s)):f<=s&&(t.expiredLanes|=h),c&=~h}}function Em(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function VN(){var t=Pf;return Pf<<=1,!(Pf&4194240)&&(Pf=64),t}function d0(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function wh(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Bs(s),t[s]=r}function vM(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var l=31-Bs(r),c=1<<l;s[l]=0,i[l]=-1,t[l]=-1,r&=~c}}function A$(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var i=31-Bs(r),l=1<<i;l&s|t[i]&s&&(t[i]|=s),r&=~l}}var Ct=0;function WN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var XN,v$,jN,zN,YN,mm=!1,Bf=[],xo=null,No=null,bo=null,lh=new Map,ah=new Map,Io=[],CM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lv(t,s){switch(t){case"focusin":case"focusout":xo=null;break;case"dragenter":case"dragleave":No=null;break;case"mouseover":case"mouseout":bo=null;break;case"pointerover":case"pointerout":lh.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":ah.delete(s.pointerId)}}function Su(t,s,r,i,l,c){return t===null||t.nativeEvent!==c?(t={blockedOn:s,domEventName:r,eventSystemFlags:i,nativeEvent:c,targetContainers:[l]},s!==null&&(s=Dh(s),s!==null&&v$(s)),t):(t.eventSystemFlags|=i,s=t.targetContainers,l!==null&&s.indexOf(l)===-1&&s.push(l),t)}function xM(t,s,r,i,l){switch(s){case"focusin":return xo=Su(xo,t,s,r,i,l),!0;case"dragenter":return No=Su(No,t,s,r,i,l),!0;case"mouseover":return bo=Su(bo,t,s,r,i,l),!0;case"pointerover":var c=l.pointerId;return lh.set(c,Su(lh.get(c)||null,t,s,r,i,l)),!0;case"gotpointercapture":return c=l.pointerId,ah.set(c,Su(ah.get(c)||null,t,s,r,i,l)),!0}return!1}function KN(t){var s=Il(t.target);if(s!==null){var r=Ul(s);if(r!==null){if(s=r.tag,s===13){if(s=PN(r),s!==null){t.blockedOn=s,YN(t.priority,function(){jN(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function c_(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=$m(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);_m=i,r.target.dispatchEvent(i),_m=null}else return s=Dh(r),s!==null&&v$(s),t.blockedOn=r,!1;s.shift()}return!0}function Av(t,s,r){c_(t)&&r.delete(s)}function NM(){mm=!1,xo!==null&&c_(xo)&&(xo=null),No!==null&&c_(No)&&(No=null),bo!==null&&c_(bo)&&(bo=null),lh.forEach(Av),ah.forEach(Av)}function Ru(t,s){t.blockedOn===s&&(t.blockedOn=null,mm||(mm=!0,qn.unstable_scheduleCallback(qn.unstable_NormalPriority,NM)))}function ch(t){function s(l){return Ru(l,t)}if(0<Bf.length){Ru(Bf[0],t);for(var r=1;r<Bf.length;r++){var i=Bf[r];i.blockedOn===t&&(i.blockedOn=null)}}for(xo!==null&&Ru(xo,t),No!==null&&Ru(No,t),bo!==null&&Ru(bo,t),lh.forEach(s),ah.forEach(s),r=0;r<Io.length;r++)i=Io[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<Io.length&&(r=Io[0],r.blockedOn===null);)KN(r),r.blockedOn===null&&Io.shift()}var rc=Yi.ReactCurrentBatchConfig,L_=!0;function bM(t,s,r,i){var l=Ct,c=rc.transition;rc.transition=null;try{Ct=1,C$(t,s,r,i)}finally{Ct=l,rc.transition=c}}function yM(t,s,r,i){var l=Ct,c=rc.transition;rc.transition=null;try{Ct=4,C$(t,s,r,i)}finally{Ct=l,rc.transition=c}}function C$(t,s,r,i){if(L_){var l=$m(t,s,r,i);if(l===null)O0(t,s,i,A_,r),Lv(t,i);else if(xM(l,t,s,r,i))i.stopPropagation();else if(Lv(t,i),s&4&&-1<CM.indexOf(t)){for(;l!==null;){var c=Dh(l);if(c!==null&&XN(c),c=$m(t,s,r,i),c===null&&O0(t,s,i,A_,r),c===l)break;l=c}l!==null&&i.stopPropagation()}else O0(t,s,i,null,r)}}var A_=null;function $m(t,s,r,i){if(A_=null,t=R$(i),t=Il(t),t!==null)if(s=Ul(t),s===null)t=null;else if(r=s.tag,r===13){if(t=PN(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return A_=t,null}function JN(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(mM()){case L$:return 1;case HN:return 4;case S_:case $M:return 16;case GN:return 536870912;default:return 16}default:return 16}}var Ro=null,x$=null,u_=null;function qN(){if(u_)return u_;var t,s=x$,r=s.length,i,l="value"in Ro?Ro.value:Ro.textContent,c=l.length;for(t=0;t<r&&s[t]===l[t];t++);var u=r-t;for(i=1;i<=u&&s[r-i]===l[c-i];i++);return u_=l.slice(t,1<i?1-i:void 0)}function h_(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function Uf(){return!0}function vv(){return!1}function ts(t){function s(r,i,l,c,u){this._reactName=r,this._targetInst=l,this.type=i,this.nativeEvent=c,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(r=t[h],this[h]=r?r(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?Uf:vv,this.isPropagationStopped=vv,this}return er(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Uf)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Uf)},persist:function(){},isPersistent:Uf}),s}var Sc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N$=ts(Sc),Mh=er({},Sc,{view:0,detail:0}),kM=ts(Mh),f0,_0,Lu,iT=er({},Mh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Lu&&(Lu&&t.type==="mousemove"?(f0=t.screenX-Lu.screenX,_0=t.screenY-Lu.screenY):_0=f0=0,Lu=t),f0)},movementY:function(t){return"movementY"in t?t.movementY:_0}}),Cv=ts(iT),wM=er({},iT,{dataTransfer:0}),MM=ts(wM),DM=er({},Mh,{relatedTarget:0}),T0=ts(DM),PM=er({},Sc,{animationName:0,elapsedTime:0,pseudoElement:0}),FM=ts(PM),BM=er({},Sc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),UM=ts(BM),HM=er({},Sc,{data:0}),xv=ts(HM),GM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},VM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},WM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function XM(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=WM[t])?!!s[t]:!1}function b$(){return XM}var jM=er({},Mh,{key:function(t){if(t.key){var s=GM[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=h_(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?VM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b$,charCode:function(t){return t.type==="keypress"?h_(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?h_(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zM=ts(jM),YM=er({},iT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Nv=ts(YM),KM=er({},Mh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b$}),JM=ts(KM),qM=er({},Sc,{propertyName:0,elapsedTime:0,pseudoElement:0}),ZM=ts(qM),QM=er({},iT,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),eD=ts(QM),tD=[9,13,27,32],y$=Wi&&"CompositionEvent"in window,Uu=null;Wi&&"documentMode"in document&&(Uu=document.documentMode);var rD=Wi&&"TextEvent"in window&&!Uu,ZN=Wi&&(!y$||Uu&&8<Uu&&11>=Uu),bv=" ",yv=!1;function QN(t,s){switch(t){case"keyup":return tD.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ua=!1;function nD(t,s){switch(t){case"compositionend":return eb(s);case"keypress":return s.which!==32?null:(yv=!0,bv);case"textInput":return t=s.data,t===bv&&yv?null:t;default:return null}}function sD(t,s){if(Ua)return t==="compositionend"||!y$&&QN(t,s)?(t=qN(),u_=x$=Ro=null,Ua=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ZN&&s.locale!=="ko"?null:s.data;default:return null}}var iD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kv(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!iD[t.type]:s==="textarea"}function tb(t,s,r,i){yN(i),s=v_(s,"onChange"),0<s.length&&(r=new N$("onChange","change",null,r,i),t.push({event:r,listeners:s}))}var Hu=null,uh=null;function oD(t){db(t,0)}function oT(t){var s=Va(t);if(LN(s))return t}function lD(t,s){if(t==="change")return s}var rb=!1;if(Wi){var p0;if(Wi){var g0="oninput"in document;if(!g0){var wv=document.createElement("div");wv.setAttribute("oninput","return;"),g0=typeof wv.oninput=="function"}p0=g0}else p0=!1;rb=p0&&(!document.documentMode||9<document.documentMode)}function Mv(){Hu&&(Hu.detachEvent("onpropertychange",nb),uh=Hu=null)}function nb(t){if(t.propertyName==="value"&&oT(uh)){var s=[];tb(s,uh,t,R$(t)),DN(oD,s)}}function aD(t,s,r){t==="focusin"?(Mv(),Hu=s,uh=r,Hu.attachEvent("onpropertychange",nb)):t==="focusout"&&Mv()}function cD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oT(uh)}function uD(t,s){if(t==="click")return oT(s)}function hD(t,s){if(t==="input"||t==="change")return oT(s)}function dD(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Hs=typeof Object.is=="function"?Object.is:dD;function hh(t,s){if(Hs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),i=Object.keys(s);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var l=r[i];if(!rm.call(s,l)||!Hs(t[l],s[l]))return!1}return!0}function Dv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Pv(t,s){var r=Dv(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=s&&i>=s)return{node:r,offset:s-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Dv(r)}}function sb(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?sb(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function ib(){for(var t=window,s=$_();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=$_(t.document)}return s}function k$(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function fD(t){var s=ib(),r=t.focusedElem,i=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&sb(r.ownerDocument.documentElement,r)){if(i!==null&&k$(r)){if(s=i.start,t=i.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var l=r.textContent.length,c=Math.min(i.start,l);i=i.end===void 0?c:Math.min(i.end,l),!t.extend&&c>i&&(l=i,i=c,c=l),l=Pv(r,c);var u=Pv(r,i);l&&u&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(s=s.createRange(),s.setStart(l.node,l.offset),t.removeAllRanges(),c>i?(t.addRange(s),t.extend(u.node,u.offset)):(s.setEnd(u.node,u.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var _D=Wi&&"documentMode"in document&&11>=document.documentMode,Ha=null,Im=null,Gu=null,Om=!1;function Fv(t,s,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Om||Ha==null||Ha!==$_(i)||(i=Ha,"selectionStart"in i&&k$(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Gu&&hh(Gu,i)||(Gu=i,i=v_(Im,"onSelect"),0<i.length&&(s=new N$("onSelect","select",null,s,r),t.push({event:s,listeners:i}),s.target=Ha)))}function Hf(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Ga={animationend:Hf("Animation","AnimationEnd"),animationiteration:Hf("Animation","AnimationIteration"),animationstart:Hf("Animation","AnimationStart"),transitionend:Hf("Transition","TransitionEnd")},E0={},ob={};Wi&&(ob=document.createElement("div").style,"AnimationEvent"in window||(delete Ga.animationend.animation,delete Ga.animationiteration.animation,delete Ga.animationstart.animation),"TransitionEvent"in window||delete Ga.transitionend.transition);function lT(t){if(E0[t])return E0[t];if(!Ga[t])return t;var s=Ga[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in ob)return E0[t]=s[r];return t}var lb=lT("animationend"),ab=lT("animationiteration"),cb=lT("animationstart"),ub=lT("transitionend"),hb=new Map,Bv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vo(t,s){hb.set(t,s),Bl(s,[t])}for(var m0=0;m0<Bv.length;m0++){var $0=Bv[m0],TD=$0.toLowerCase(),pD=$0[0].toUpperCase()+$0.slice(1);Vo(TD,"on"+pD)}Vo(lb,"onAnimationEnd");Vo(ab,"onAnimationIteration");Vo(cb,"onAnimationStart");Vo("dblclick","onDoubleClick");Vo("focusin","onFocus");Vo("focusout","onBlur");Vo(ub,"onTransitionEnd");hc("onMouseEnter",["mouseout","mouseover"]);hc("onMouseLeave",["mouseout","mouseover"]);hc("onPointerEnter",["pointerout","pointerover"]);hc("onPointerLeave",["pointerout","pointerover"]);Bl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Bl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Bl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Bl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Bl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Bl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),gD=new Set("cancel close invalid load scroll toggle".split(" ").concat(ku));function Uv(t,s,r){var i=t.type||"unknown-event";t.currentTarget=r,TM(i,s,void 0,t),t.currentTarget=null}function db(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],l=i.event;i=i.listeners;e:{var c=void 0;if(s)for(var u=i.length-1;0<=u;u--){var h=i[u],f=h.instance,_=h.currentTarget;if(h=h.listener,f!==c&&l.isPropagationStopped())break e;Uv(l,h,_),c=f}else for(u=0;u<i.length;u++){if(h=i[u],f=h.instance,_=h.currentTarget,h=h.listener,f!==c&&l.isPropagationStopped())break e;Uv(l,h,_),c=f}}}if(O_)throw t=gm,O_=!1,gm=null,t}function Gt(t,s){var r=s[vm];r===void 0&&(r=s[vm]=new Set);var i=t+"__bubble";r.has(i)||(fb(s,t,2,!1),r.add(i))}function I0(t,s,r){var i=0;s&&(i|=4),fb(r,t,i,s)}var Gf="_reactListening"+Math.random().toString(36).slice(2);function dh(t){if(!t[Gf]){t[Gf]=!0,$N.forEach(function(r){r!=="selectionchange"&&(gD.has(r)||I0(r,!1,t),I0(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Gf]||(s[Gf]=!0,I0("selectionchange",!1,s))}}function fb(t,s,r,i){switch(JN(s)){case 1:var l=bM;break;case 4:l=yM;break;default:l=C$}r=l.bind(null,s,r,t),l=void 0,!pm||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(l=!0),i?l!==void 0?t.addEventListener(s,r,{capture:!0,passive:l}):t.addEventListener(s,r,!0):l!==void 0?t.addEventListener(s,r,{passive:l}):t.addEventListener(s,r,!1)}function O0(t,s,r,i,l){var c=i;if(!(s&1)&&!(s&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var h=i.stateNode.containerInfo;if(h===l||h.nodeType===8&&h.parentNode===l)break;if(u===4)for(u=i.return;u!==null;){var f=u.tag;if((f===3||f===4)&&(f=u.stateNode.containerInfo,f===l||f.nodeType===8&&f.parentNode===l))return;u=u.return}for(;h!==null;){if(u=Il(h),u===null)return;if(f=u.tag,f===5||f===6){i=c=u;continue e}h=h.parentNode}}i=i.return}DN(function(){var _=c,T=R$(r),g=[];e:{var E=hb.get(t);if(E!==void 0){var S=N$,R=t;switch(t){case"keypress":if(h_(r)===0)break e;case"keydown":case"keyup":S=zM;break;case"focusin":R="focus",S=T0;break;case"focusout":R="blur",S=T0;break;case"beforeblur":case"afterblur":S=T0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=Cv;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=MM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=JM;break;case lb:case ab:case cb:S=FM;break;case ub:S=ZM;break;case"scroll":S=kM;break;case"wheel":S=eD;break;case"copy":case"cut":case"paste":S=UM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=Nv}var L=(s&4)!==0,x=!L&&t==="scroll",v=L?E!==null?E+"Capture":null:E;L=[];for(var A=_,m;A!==null;){m=A;var y=m.stateNode;if(m.tag===5&&y!==null&&(m=y,v!==null&&(y=oh(A,v),y!=null&&L.push(fh(A,y,m)))),x)break;A=A.return}0<L.length&&(E=new S(E,R,null,r,T),g.push({event:E,listeners:L}))}}if(!(s&7)){e:{if(E=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",E&&r!==_m&&(R=r.relatedTarget||r.fromElement)&&(Il(R)||R[Xi]))break e;if((S||E)&&(E=T.window===T?T:(E=T.ownerDocument)?E.defaultView||E.parentWindow:window,S?(R=r.relatedTarget||r.toElement,S=_,R=R?Il(R):null,R!==null&&(x=Ul(R),R!==x||R.tag!==5&&R.tag!==6)&&(R=null)):(S=null,R=_),S!==R)){if(L=Cv,y="onMouseLeave",v="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(L=Nv,y="onPointerLeave",v="onPointerEnter",A="pointer"),x=S==null?E:Va(S),m=R==null?E:Va(R),E=new L(y,A+"leave",S,r,T),E.target=x,E.relatedTarget=m,y=null,Il(T)===_&&(L=new L(v,A+"enter",R,r,T),L.target=m,L.relatedTarget=x,y=L),x=y,S&&R)t:{for(L=S,v=R,A=0,m=L;m;m=wa(m))A++;for(m=0,y=v;y;y=wa(y))m++;for(;0<A-m;)L=wa(L),A--;for(;0<m-A;)v=wa(v),m--;for(;A--;){if(L===v||v!==null&&L===v.alternate)break t;L=wa(L),v=wa(v)}L=null}else L=null;S!==null&&Hv(g,E,S,L,!1),R!==null&&x!==null&&Hv(g,x,R,L,!0)}}e:{if(E=_?Va(_):window,S=E.nodeName&&E.nodeName.toLowerCase(),S==="select"||S==="input"&&E.type==="file")var H=lD;else if(kv(E))if(rb)H=hD;else{H=cD;var G=aD}else(S=E.nodeName)&&S.toLowerCase()==="input"&&(E.type==="checkbox"||E.type==="radio")&&(H=uD);if(H&&(H=H(t,_))){tb(g,H,r,T);break e}G&&G(t,E,_),t==="focusout"&&(G=E._wrapperState)&&G.controlled&&E.type==="number"&&cm(E,"number",E.value)}switch(G=_?Va(_):window,t){case"focusin":(kv(G)||G.contentEditable==="true")&&(Ha=G,Im=_,Gu=null);break;case"focusout":Gu=Im=Ha=null;break;case"mousedown":Om=!0;break;case"contextmenu":case"mouseup":case"dragend":Om=!1,Fv(g,r,T);break;case"selectionchange":if(_D)break;case"keydown":case"keyup":Fv(g,r,T)}var k;if(y$)e:{switch(t){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else Ua?QN(t,r)&&(F="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(F="onCompositionStart");F&&(ZN&&r.locale!=="ko"&&(Ua||F!=="onCompositionStart"?F==="onCompositionEnd"&&Ua&&(k=qN()):(Ro=T,x$="value"in Ro?Ro.value:Ro.textContent,Ua=!0)),G=v_(_,F),0<G.length&&(F=new xv(F,t,null,r,T),g.push({event:F,listeners:G}),k?F.data=k:(k=eb(r),k!==null&&(F.data=k)))),(k=rD?nD(t,r):sD(t,r))&&(_=v_(_,"onBeforeInput"),0<_.length&&(T=new xv("onBeforeInput","beforeinput",null,r,T),g.push({event:T,listeners:_}),T.data=k))}db(g,s)})}function fh(t,s,r){return{instance:t,listener:s,currentTarget:r}}function v_(t,s){for(var r=s+"Capture",i=[];t!==null;){var l=t,c=l.stateNode;l.tag===5&&c!==null&&(l=c,c=oh(t,r),c!=null&&i.unshift(fh(t,c,l)),c=oh(t,s),c!=null&&i.push(fh(t,c,l))),t=t.return}return i}function wa(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hv(t,s,r,i,l){for(var c=s._reactName,u=[];r!==null&&r!==i;){var h=r,f=h.alternate,_=h.stateNode;if(f!==null&&f===i)break;h.tag===5&&_!==null&&(h=_,l?(f=oh(r,c),f!=null&&u.unshift(fh(r,f,h))):l||(f=oh(r,c),f!=null&&u.push(fh(r,f,h)))),r=r.return}u.length!==0&&t.push({event:s,listeners:u})}var ED=/\r\n?/g,mD=/\u0000|\uFFFD/g;function Gv(t){return(typeof t=="string"?t:""+t).replace(ED,`
`).replace(mD,"")}function Vf(t,s,r){if(s=Gv(s),Gv(t)!==s&&r)throw Error(Fe(425))}function C_(){}var Sm=null,Rm=null;function Lm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Am=typeof setTimeout=="function"?setTimeout:void 0,$D=typeof clearTimeout=="function"?clearTimeout:void 0,Vv=typeof Promise=="function"?Promise:void 0,ID=typeof queueMicrotask=="function"?queueMicrotask:typeof Vv<"u"?function(t){return Vv.resolve(null).then(t).catch(OD)}:Am;function OD(t){setTimeout(function(){throw t})}function S0(t,s){var r=s,i=0;do{var l=r.nextSibling;if(t.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(i===0){t.removeChild(l),ch(s);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=l}while(r);ch(s)}function yo(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function Wv(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var Rc=Math.random().toString(36).slice(2),fi="__reactFiber$"+Rc,_h="__reactProps$"+Rc,Xi="__reactContainer$"+Rc,vm="__reactEvents$"+Rc,SD="__reactListeners$"+Rc,RD="__reactHandles$"+Rc;function Il(t){var s=t[fi];if(s)return s;for(var r=t.parentNode;r;){if(s=r[Xi]||r[fi]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=Wv(t);t!==null;){if(r=t[fi])return r;t=Wv(t)}return s}t=r,r=t.parentNode}return null}function Dh(t){return t=t[fi]||t[Xi],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Va(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function aT(t){return t[_h]||null}var Cm=[],Wa=-1;function Wo(t){return{current:t}}function Vt(t){0>Wa||(t.current=Cm[Wa],Cm[Wa]=null,Wa--)}function Pt(t,s){Wa++,Cm[Wa]=t.current,t.current=s}var Bo={},dn=Wo(Bo),yn=Wo(!1),Nl=Bo;function dc(t,s){var r=t.type.contextTypes;if(!r)return Bo;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===s)return i.__reactInternalMemoizedMaskedChildContext;var l={},c;for(c in r)l[c]=s[c];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),l}function kn(t){return t=t.childContextTypes,t!=null}function x_(){Vt(yn),Vt(dn)}function Xv(t,s,r){if(dn.current!==Bo)throw Error(Fe(168));Pt(dn,s),Pt(yn,r)}function _b(t,s,r){var i=t.stateNode;if(s=s.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var l in i)if(!(l in s))throw Error(Fe(108,aM(t)||"Unknown",l));return er({},r,i)}function N_(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Bo,Nl=dn.current,Pt(dn,t),Pt(yn,yn.current),!0}function jv(t,s,r){var i=t.stateNode;if(!i)throw Error(Fe(169));r?(t=_b(t,s,Nl),i.__reactInternalMemoizedMergedChildContext=t,Vt(yn),Vt(dn),Pt(dn,t)):Vt(yn),Pt(yn,r)}var Di=null,cT=!1,R0=!1;function Tb(t){Di===null?Di=[t]:Di.push(t)}function LD(t){cT=!0,Tb(t)}function Xo(){if(!R0&&Di!==null){R0=!0;var t=0,s=Ct;try{var r=Di;for(Ct=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}Di=null,cT=!1}catch(l){throw Di!==null&&(Di=Di.slice(t+1)),UN(L$,Xo),l}finally{Ct=s,R0=!1}}return null}var Xa=[],ja=0,b_=null,y_=0,ds=[],fs=0,bl=null,Pi=1,Fi="";function El(t,s){Xa[ja++]=y_,Xa[ja++]=b_,b_=t,y_=s}function pb(t,s,r){ds[fs++]=Pi,ds[fs++]=Fi,ds[fs++]=bl,bl=t;var i=Pi;t=Fi;var l=32-Bs(i)-1;i&=~(1<<l),r+=1;var c=32-Bs(s)+l;if(30<c){var u=l-l%5;c=(i&(1<<u)-1).toString(32),i>>=u,l-=u,Pi=1<<32-Bs(s)+l|r<<l|i,Fi=c+t}else Pi=1<<c|r<<l|i,Fi=t}function w$(t){t.return!==null&&(El(t,1),pb(t,1,0))}function M$(t){for(;t===b_;)b_=Xa[--ja],Xa[ja]=null,y_=Xa[--ja],Xa[ja]=null;for(;t===bl;)bl=ds[--fs],ds[fs]=null,Fi=ds[--fs],ds[fs]=null,Pi=ds[--fs],ds[fs]=null}var Kn=null,Yn=null,Kt=!1,ks=null;function gb(t,s){var r=_s(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function zv(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Kn=t,Yn=yo(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Kn=t,Yn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=bl!==null?{id:Pi,overflow:Fi}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=_s(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,Kn=t,Yn=null,!0):!1;default:return!1}}function xm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nm(t){if(Kt){var s=Yn;if(s){var r=s;if(!zv(t,s)){if(xm(t))throw Error(Fe(418));s=yo(r.nextSibling);var i=Kn;s&&zv(t,s)?gb(i,r):(t.flags=t.flags&-4097|2,Kt=!1,Kn=t)}}else{if(xm(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,Kt=!1,Kn=t}}}function Yv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kn=t}function Wf(t){if(t!==Kn)return!1;if(!Kt)return Yv(t),Kt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!Lm(t.type,t.memoizedProps)),s&&(s=Yn)){if(xm(t))throw Eb(),Error(Fe(418));for(;s;)gb(t,s),s=yo(s.nextSibling)}if(Yv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){Yn=yo(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}Yn=null}}else Yn=Kn?yo(t.stateNode.nextSibling):null;return!0}function Eb(){for(var t=Yn;t;)t=yo(t.nextSibling)}function fc(){Yn=Kn=null,Kt=!1}function D$(t){ks===null?ks=[t]:ks.push(t)}var AD=Yi.ReactCurrentBatchConfig;function Au(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Fe(309));var i=r.stateNode}if(!i)throw Error(Fe(147,t));var l=i,c=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(u){var h=l.refs;u===null?delete h[c]:h[c]=u},s._stringRef=c,s)}if(typeof t!="string")throw Error(Fe(284));if(!r._owner)throw Error(Fe(290,t))}return t}function Xf(t,s){throw t=Object.prototype.toString.call(s),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function Kv(t){var s=t._init;return s(t._payload)}function mb(t){function s(v,A){if(t){var m=v.deletions;m===null?(v.deletions=[A],v.flags|=16):m.push(A)}}function r(v,A){if(!t)return null;for(;A!==null;)s(v,A),A=A.sibling;return null}function i(v,A){for(v=new Map;A!==null;)A.key!==null?v.set(A.key,A):v.set(A.index,A),A=A.sibling;return v}function l(v,A){return v=Do(v,A),v.index=0,v.sibling=null,v}function c(v,A,m){return v.index=m,t?(m=v.alternate,m!==null?(m=m.index,m<A?(v.flags|=2,A):m):(v.flags|=2,A)):(v.flags|=1048576,A)}function u(v){return t&&v.alternate===null&&(v.flags|=2),v}function h(v,A,m,y){return A===null||A.tag!==6?(A=b0(m,v.mode,y),A.return=v,A):(A=l(A,m),A.return=v,A)}function f(v,A,m,y){var H=m.type;return H===Ba?T(v,A,m.props.children,y,m.key):A!==null&&(A.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===mo&&Kv(H)===A.type)?(y=l(A,m.props),y.ref=Au(v,A,m),y.return=v,y):(y=E_(m.type,m.key,m.props,null,v.mode,y),y.ref=Au(v,A,m),y.return=v,y)}function _(v,A,m,y){return A===null||A.tag!==4||A.stateNode.containerInfo!==m.containerInfo||A.stateNode.implementation!==m.implementation?(A=y0(m,v.mode,y),A.return=v,A):(A=l(A,m.children||[]),A.return=v,A)}function T(v,A,m,y,H){return A===null||A.tag!==7?(A=vl(m,v.mode,y,H),A.return=v,A):(A=l(A,m),A.return=v,A)}function g(v,A,m){if(typeof A=="string"&&A!==""||typeof A=="number")return A=b0(""+A,v.mode,m),A.return=v,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case wf:return m=E_(A.type,A.key,A.props,null,v.mode,m),m.ref=Au(v,null,A),m.return=v,m;case Fa:return A=y0(A,v.mode,m),A.return=v,A;case mo:var y=A._init;return g(v,y(A._payload),m)}if(bu(A)||Iu(A))return A=vl(A,v.mode,m,null),A.return=v,A;Xf(v,A)}return null}function E(v,A,m,y){var H=A!==null?A.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return H!==null?null:h(v,A,""+m,y);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case wf:return m.key===H?f(v,A,m,y):null;case Fa:return m.key===H?_(v,A,m,y):null;case mo:return H=m._init,E(v,A,H(m._payload),y)}if(bu(m)||Iu(m))return H!==null?null:T(v,A,m,y,null);Xf(v,m)}return null}function S(v,A,m,y,H){if(typeof y=="string"&&y!==""||typeof y=="number")return v=v.get(m)||null,h(A,v,""+y,H);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wf:return v=v.get(y.key===null?m:y.key)||null,f(A,v,y,H);case Fa:return v=v.get(y.key===null?m:y.key)||null,_(A,v,y,H);case mo:var G=y._init;return S(v,A,m,G(y._payload),H)}if(bu(y)||Iu(y))return v=v.get(m)||null,T(A,v,y,H,null);Xf(A,y)}return null}function R(v,A,m,y){for(var H=null,G=null,k=A,F=A=0,B=null;k!==null&&F<m.length;F++){k.index>F?(B=k,k=null):B=k.sibling;var re=E(v,k,m[F],y);if(re===null){k===null&&(k=B);break}t&&k&&re.alternate===null&&s(v,k),A=c(re,A,F),G===null?H=re:G.sibling=re,G=re,k=B}if(F===m.length)return r(v,k),Kt&&El(v,F),H;if(k===null){for(;F<m.length;F++)k=g(v,m[F],y),k!==null&&(A=c(k,A,F),G===null?H=k:G.sibling=k,G=k);return Kt&&El(v,F),H}for(k=i(v,k);F<m.length;F++)B=S(k,v,F,m[F],y),B!==null&&(t&&B.alternate!==null&&k.delete(B.key===null?F:B.key),A=c(B,A,F),G===null?H=B:G.sibling=B,G=B);return t&&k.forEach(function(ne){return s(v,ne)}),Kt&&El(v,F),H}function L(v,A,m,y){var H=Iu(m);if(typeof H!="function")throw Error(Fe(150));if(m=H.call(m),m==null)throw Error(Fe(151));for(var G=H=null,k=A,F=A=0,B=null,re=m.next();k!==null&&!re.done;F++,re=m.next()){k.index>F?(B=k,k=null):B=k.sibling;var ne=E(v,k,re.value,y);if(ne===null){k===null&&(k=B);break}t&&k&&ne.alternate===null&&s(v,k),A=c(ne,A,F),G===null?H=ne:G.sibling=ne,G=ne,k=B}if(re.done)return r(v,k),Kt&&El(v,F),H;if(k===null){for(;!re.done;F++,re=m.next())re=g(v,re.value,y),re!==null&&(A=c(re,A,F),G===null?H=re:G.sibling=re,G=re);return Kt&&El(v,F),H}for(k=i(v,k);!re.done;F++,re=m.next())re=S(k,v,F,re.value,y),re!==null&&(t&&re.alternate!==null&&k.delete(re.key===null?F:re.key),A=c(re,A,F),G===null?H=re:G.sibling=re,G=re);return t&&k.forEach(function(ee){return s(v,ee)}),Kt&&El(v,F),H}function x(v,A,m,y){if(typeof m=="object"&&m!==null&&m.type===Ba&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case wf:e:{for(var H=m.key,G=A;G!==null;){if(G.key===H){if(H=m.type,H===Ba){if(G.tag===7){r(v,G.sibling),A=l(G,m.props.children),A.return=v,v=A;break e}}else if(G.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===mo&&Kv(H)===G.type){r(v,G.sibling),A=l(G,m.props),A.ref=Au(v,G,m),A.return=v,v=A;break e}r(v,G);break}else s(v,G);G=G.sibling}m.type===Ba?(A=vl(m.props.children,v.mode,y,m.key),A.return=v,v=A):(y=E_(m.type,m.key,m.props,null,v.mode,y),y.ref=Au(v,A,m),y.return=v,v=y)}return u(v);case Fa:e:{for(G=m.key;A!==null;){if(A.key===G)if(A.tag===4&&A.stateNode.containerInfo===m.containerInfo&&A.stateNode.implementation===m.implementation){r(v,A.sibling),A=l(A,m.children||[]),A.return=v,v=A;break e}else{r(v,A);break}else s(v,A);A=A.sibling}A=y0(m,v.mode,y),A.return=v,v=A}return u(v);case mo:return G=m._init,x(v,A,G(m._payload),y)}if(bu(m))return R(v,A,m,y);if(Iu(m))return L(v,A,m,y);Xf(v,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,A!==null&&A.tag===6?(r(v,A.sibling),A=l(A,m),A.return=v,v=A):(r(v,A),A=b0(m,v.mode,y),A.return=v,v=A),u(v)):r(v,A)}return x}var _c=mb(!0),$b=mb(!1),k_=Wo(null),w_=null,za=null,P$=null;function F$(){P$=za=w_=null}function B$(t){var s=k_.current;Vt(k_),t._currentValue=s}function bm(t,s,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,i!==null&&(i.childLanes|=s)):i!==null&&(i.childLanes&s)!==s&&(i.childLanes|=s),t===r)break;t=t.return}}function nc(t,s){w_=t,P$=za=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(bn=!0),t.firstContext=null)}function gs(t){var s=t._currentValue;if(P$!==t)if(t={context:t,memoizedValue:s,next:null},za===null){if(w_===null)throw Error(Fe(308));za=t,w_.dependencies={lanes:0,firstContext:t}}else za=za.next=t;return s}var Ol=null;function U$(t){Ol===null?Ol=[t]:Ol.push(t)}function Ib(t,s,r,i){var l=s.interleaved;return l===null?(r.next=r,U$(s)):(r.next=l.next,l.next=r),s.interleaved=r,ji(t,i)}function ji(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var $o=!1;function H$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ob(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ui(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function ko(t,s,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var l=i.pending;return l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s,ji(t,r)}return l=i.interleaved,l===null?(s.next=s,U$(i)):(s.next=l.next,l.next=s),i.interleaved=s,ji(t,r)}function d_(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var i=s.lanes;i&=t.pendingLanes,r|=i,s.lanes=r,A$(t,r)}}function Jv(t,s){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var l=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?l=c=u:c=c.next=u,r=r.next}while(r!==null);c===null?l=c=s:c=c.next=s}else l=c=s;r={baseState:i.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function M_(t,s,r,i){var l=t.updateQueue;$o=!1;var c=l.firstBaseUpdate,u=l.lastBaseUpdate,h=l.shared.pending;if(h!==null){l.shared.pending=null;var f=h,_=f.next;f.next=null,u===null?c=_:u.next=_,u=f;var T=t.alternate;T!==null&&(T=T.updateQueue,h=T.lastBaseUpdate,h!==u&&(h===null?T.firstBaseUpdate=_:h.next=_,T.lastBaseUpdate=f))}if(c!==null){var g=l.baseState;u=0,T=_=f=null,h=c;do{var E=h.lane,S=h.eventTime;if((i&E)===E){T!==null&&(T=T.next={eventTime:S,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var R=t,L=h;switch(E=s,S=r,L.tag){case 1:if(R=L.payload,typeof R=="function"){g=R.call(S,g,E);break e}g=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=L.payload,E=typeof R=="function"?R.call(S,g,E):R,E==null)break e;g=er({},g,E);break e;case 2:$o=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,E=l.effects,E===null?l.effects=[h]:E.push(h))}else S={eventTime:S,lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},T===null?(_=T=S,f=g):T=T.next=S,u|=E;if(h=h.next,h===null){if(h=l.shared.pending,h===null)break;E=h,h=E.next,E.next=null,l.lastBaseUpdate=E,l.shared.pending=null}}while(!0);if(T===null&&(f=g),l.baseState=f,l.firstBaseUpdate=_,l.lastBaseUpdate=T,s=l.shared.interleaved,s!==null){l=s;do u|=l.lane,l=l.next;while(l!==s)}else c===null&&(l.shared.lanes=0);kl|=u,t.lanes=u,t.memoizedState=g}}function qv(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var i=t[s],l=i.callback;if(l!==null){if(i.callback=null,i=r,typeof l!="function")throw Error(Fe(191,l));l.call(i)}}}var Ph={},Ti=Wo(Ph),Th=Wo(Ph),ph=Wo(Ph);function Sl(t){if(t===Ph)throw Error(Fe(174));return t}function G$(t,s){switch(Pt(ph,s),Pt(Th,t),Pt(Ti,Ph),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:hm(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=hm(s,t)}Vt(Ti),Pt(Ti,s)}function Tc(){Vt(Ti),Vt(Th),Vt(ph)}function Sb(t){Sl(ph.current);var s=Sl(Ti.current),r=hm(s,t.type);s!==r&&(Pt(Th,t),Pt(Ti,r))}function V$(t){Th.current===t&&(Vt(Ti),Vt(Th))}var Zt=Wo(0);function D_(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var L0=[];function W$(){for(var t=0;t<L0.length;t++)L0[t]._workInProgressVersionPrimary=null;L0.length=0}var f_=Yi.ReactCurrentDispatcher,A0=Yi.ReactCurrentBatchConfig,yl=0,Qt=null,vr=null,Br=null,P_=!1,Vu=!1,gh=0,vD=0;function nn(){throw Error(Fe(321))}function X$(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Hs(t[r],s[r]))return!1;return!0}function j$(t,s,r,i,l,c){if(yl=c,Qt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,f_.current=t===null||t.memoizedState===null?bD:yD,t=r(i,l),Vu){c=0;do{if(Vu=!1,gh=0,25<=c)throw Error(Fe(301));c+=1,Br=vr=null,s.updateQueue=null,f_.current=kD,t=r(i,l)}while(Vu)}if(f_.current=F_,s=vr!==null&&vr.next!==null,yl=0,Br=vr=Qt=null,P_=!1,s)throw Error(Fe(300));return t}function z$(){var t=gh!==0;return gh=0,t}function di(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Br===null?Qt.memoizedState=Br=t:Br=Br.next=t,Br}function Es(){if(vr===null){var t=Qt.alternate;t=t!==null?t.memoizedState:null}else t=vr.next;var s=Br===null?Qt.memoizedState:Br.next;if(s!==null)Br=s,vr=t;else{if(t===null)throw Error(Fe(310));vr=t,t={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Br===null?Qt.memoizedState=Br=t:Br=Br.next=t}return Br}function Eh(t,s){return typeof s=="function"?s(t):s}function v0(t){var s=Es(),r=s.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var i=vr,l=i.baseQueue,c=r.pending;if(c!==null){if(l!==null){var u=l.next;l.next=c.next,c.next=u}i.baseQueue=l=c,r.pending=null}if(l!==null){c=l.next,i=i.baseState;var h=u=null,f=null,_=c;do{var T=_.lane;if((yl&T)===T)f!==null&&(f=f.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),i=_.hasEagerState?_.eagerState:t(i,_.action);else{var g={lane:T,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};f===null?(h=f=g,u=i):f=f.next=g,Qt.lanes|=T,kl|=T}_=_.next}while(_!==null&&_!==c);f===null?u=i:f.next=h,Hs(i,s.memoizedState)||(bn=!0),s.memoizedState=i,s.baseState=u,s.baseQueue=f,r.lastRenderedState=i}if(t=r.interleaved,t!==null){l=t;do c=l.lane,Qt.lanes|=c,kl|=c,l=l.next;while(l!==t)}else l===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function C0(t){var s=Es(),r=s.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var i=r.dispatch,l=r.pending,c=s.memoizedState;if(l!==null){r.pending=null;var u=l=l.next;do c=t(c,u.action),u=u.next;while(u!==l);Hs(c,s.memoizedState)||(bn=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),r.lastRenderedState=c}return[c,i]}function Rb(){}function Lb(t,s){var r=Qt,i=Es(),l=s(),c=!Hs(i.memoizedState,l);if(c&&(i.memoizedState=l,bn=!0),i=i.queue,Y$(Cb.bind(null,r,i,t),[t]),i.getSnapshot!==s||c||Br!==null&&Br.memoizedState.tag&1){if(r.flags|=2048,mh(9,vb.bind(null,r,i,l,s),void 0,null),Ur===null)throw Error(Fe(349));yl&30||Ab(r,s,l)}return l}function Ab(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Qt.updateQueue,s===null?(s={lastEffect:null,stores:null},Qt.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function vb(t,s,r,i){s.value=r,s.getSnapshot=i,xb(s)&&Nb(t)}function Cb(t,s,r){return r(function(){xb(s)&&Nb(t)})}function xb(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Hs(t,r)}catch{return!0}}function Nb(t){var s=ji(t,1);s!==null&&Us(s,t,1,-1)}function Zv(t){var s=di();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eh,lastRenderedState:t},s.queue=t,t=t.dispatch=ND.bind(null,Qt,t),[s.memoizedState,t]}function mh(t,s,r,i){return t={tag:t,create:s,destroy:r,deps:i,next:null},s=Qt.updateQueue,s===null?(s={lastEffect:null,stores:null},Qt.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,s.lastEffect=t)),t}function bb(){return Es().memoizedState}function __(t,s,r,i){var l=di();Qt.flags|=t,l.memoizedState=mh(1|s,r,void 0,i===void 0?null:i)}function uT(t,s,r,i){var l=Es();i=i===void 0?null:i;var c=void 0;if(vr!==null){var u=vr.memoizedState;if(c=u.destroy,i!==null&&X$(i,u.deps)){l.memoizedState=mh(s,r,c,i);return}}Qt.flags|=t,l.memoizedState=mh(1|s,r,c,i)}function Qv(t,s){return __(8390656,8,t,s)}function Y$(t,s){return uT(2048,8,t,s)}function yb(t,s){return uT(4,2,t,s)}function kb(t,s){return uT(4,4,t,s)}function wb(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Mb(t,s,r){return r=r!=null?r.concat([t]):null,uT(4,4,wb.bind(null,s,t),r)}function K$(){}function Db(t,s){var r=Es();s=s===void 0?null:s;var i=r.memoizedState;return i!==null&&s!==null&&X$(s,i[1])?i[0]:(r.memoizedState=[t,s],t)}function Pb(t,s){var r=Es();s=s===void 0?null:s;var i=r.memoizedState;return i!==null&&s!==null&&X$(s,i[1])?i[0]:(t=t(),r.memoizedState=[t,s],t)}function Fb(t,s,r){return yl&21?(Hs(r,s)||(r=VN(),Qt.lanes|=r,kl|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,bn=!0),t.memoizedState=r)}function CD(t,s){var r=Ct;Ct=r!==0&&4>r?r:4,t(!0);var i=A0.transition;A0.transition={};try{t(!1),s()}finally{Ct=r,A0.transition=i}}function Bb(){return Es().memoizedState}function xD(t,s,r){var i=Mo(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Ub(t))Hb(s,r);else if(r=Ib(t,s,r,i),r!==null){var l=On();Us(r,t,i,l),Gb(r,s,i)}}function ND(t,s,r){var i=Mo(t),l={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Ub(t))Hb(s,l);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var u=s.lastRenderedState,h=c(u,r);if(l.hasEagerState=!0,l.eagerState=h,Hs(h,u)){var f=s.interleaved;f===null?(l.next=l,U$(s)):(l.next=f.next,f.next=l),s.interleaved=l;return}}catch{}finally{}r=Ib(t,s,l,i),r!==null&&(l=On(),Us(r,t,i,l),Gb(r,s,i))}}function Ub(t){var s=t.alternate;return t===Qt||s!==null&&s===Qt}function Hb(t,s){Vu=P_=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Gb(t,s,r){if(r&4194240){var i=s.lanes;i&=t.pendingLanes,r|=i,s.lanes=r,A$(t,r)}}var F_={readContext:gs,useCallback:nn,useContext:nn,useEffect:nn,useImperativeHandle:nn,useInsertionEffect:nn,useLayoutEffect:nn,useMemo:nn,useReducer:nn,useRef:nn,useState:nn,useDebugValue:nn,useDeferredValue:nn,useTransition:nn,useMutableSource:nn,useSyncExternalStore:nn,useId:nn,unstable_isNewReconciler:!1},bD={readContext:gs,useCallback:function(t,s){return di().memoizedState=[t,s===void 0?null:s],t},useContext:gs,useEffect:Qv,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,__(4194308,4,wb.bind(null,s,t),r)},useLayoutEffect:function(t,s){return __(4194308,4,t,s)},useInsertionEffect:function(t,s){return __(4,2,t,s)},useMemo:function(t,s){var r=di();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var i=di();return s=r!==void 0?r(s):s,i.memoizedState=i.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=xD.bind(null,Qt,t),[i.memoizedState,t]},useRef:function(t){var s=di();return t={current:t},s.memoizedState=t},useState:Zv,useDebugValue:K$,useDeferredValue:function(t){return di().memoizedState=t},useTransition:function(){var t=Zv(!1),s=t[0];return t=CD.bind(null,t[1]),di().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var i=Qt,l=di();if(Kt){if(r===void 0)throw Error(Fe(407));r=r()}else{if(r=s(),Ur===null)throw Error(Fe(349));yl&30||Ab(i,s,r)}l.memoizedState=r;var c={value:r,getSnapshot:s};return l.queue=c,Qv(Cb.bind(null,i,c,t),[t]),i.flags|=2048,mh(9,vb.bind(null,i,c,r,s),void 0,null),r},useId:function(){var t=di(),s=Ur.identifierPrefix;if(Kt){var r=Fi,i=Pi;r=(i&~(1<<32-Bs(i)-1)).toString(32)+r,s=":"+s+"R"+r,r=gh++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=vD++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},yD={readContext:gs,useCallback:Db,useContext:gs,useEffect:Y$,useImperativeHandle:Mb,useInsertionEffect:yb,useLayoutEffect:kb,useMemo:Pb,useReducer:v0,useRef:bb,useState:function(){return v0(Eh)},useDebugValue:K$,useDeferredValue:function(t){var s=Es();return Fb(s,vr.memoizedState,t)},useTransition:function(){var t=v0(Eh)[0],s=Es().memoizedState;return[t,s]},useMutableSource:Rb,useSyncExternalStore:Lb,useId:Bb,unstable_isNewReconciler:!1},kD={readContext:gs,useCallback:Db,useContext:gs,useEffect:Y$,useImperativeHandle:Mb,useInsertionEffect:yb,useLayoutEffect:kb,useMemo:Pb,useReducer:C0,useRef:bb,useState:function(){return C0(Eh)},useDebugValue:K$,useDeferredValue:function(t){var s=Es();return vr===null?s.memoizedState=t:Fb(s,vr.memoizedState,t)},useTransition:function(){var t=C0(Eh)[0],s=Es().memoizedState;return[t,s]},useMutableSource:Rb,useSyncExternalStore:Lb,useId:Bb,unstable_isNewReconciler:!1};function bs(t,s){if(t&&t.defaultProps){s=er({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function ym(t,s,r,i){s=t.memoizedState,r=r(i,s),r=r==null?s:er({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var hT={isMounted:function(t){return(t=t._reactInternals)?Ul(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var i=On(),l=Mo(t),c=Ui(i,l);c.payload=s,r!=null&&(c.callback=r),s=ko(t,c,l),s!==null&&(Us(s,t,l,i),d_(s,t,l))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var i=On(),l=Mo(t),c=Ui(i,l);c.tag=1,c.payload=s,r!=null&&(c.callback=r),s=ko(t,c,l),s!==null&&(Us(s,t,l,i),d_(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=On(),i=Mo(t),l=Ui(r,i);l.tag=2,s!=null&&(l.callback=s),s=ko(t,l,i),s!==null&&(Us(s,t,i,r),d_(s,t,i))}};function eC(t,s,r,i,l,c,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,c,u):s.prototype&&s.prototype.isPureReactComponent?!hh(r,i)||!hh(l,c):!0}function Vb(t,s,r){var i=!1,l=Bo,c=s.contextType;return typeof c=="object"&&c!==null?c=gs(c):(l=kn(s)?Nl:dn.current,i=s.contextTypes,c=(i=i!=null)?dc(t,l):Bo),s=new s(r,c),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=hT,t.stateNode=s,s._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=c),s}function tC(t,s,r,i){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,i),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,i),s.state!==t&&hT.enqueueReplaceState(s,s.state,null)}function km(t,s,r,i){var l=t.stateNode;l.props=r,l.state=t.memoizedState,l.refs={},H$(t);var c=s.contextType;typeof c=="object"&&c!==null?l.context=gs(c):(c=kn(s)?Nl:dn.current,l.context=dc(t,c)),l.state=t.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(ym(t,s,c,r),l.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(s=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),s!==l.state&&hT.enqueueReplaceState(l,l.state,null),M_(t,r,l,i),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function pc(t,s){try{var r="",i=s;do r+=lM(i),i=i.return;while(i);var l=r}catch(c){l=`
Error generating stack: `+c.message+`
`+c.stack}return{value:t,source:s,stack:l,digest:null}}function x0(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function wm(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var wD=typeof WeakMap=="function"?WeakMap:Map;function Wb(t,s,r){r=Ui(-1,r),r.tag=3,r.payload={element:null};var i=s.value;return r.callback=function(){U_||(U_=!0,Wm=i),wm(t,s)},r}function Xb(t,s,r){r=Ui(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var l=s.value;r.payload=function(){return i(l)},r.callback=function(){wm(t,s)}}var c=t.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){wm(t,s),typeof i!="function"&&(wo===null?wo=new Set([this]):wo.add(this));var u=s.stack;this.componentDidCatch(s.value,{componentStack:u!==null?u:""})}),r}function rC(t,s,r){var i=t.pingCache;if(i===null){i=t.pingCache=new wD;var l=new Set;i.set(s,l)}else l=i.get(s),l===void 0&&(l=new Set,i.set(s,l));l.has(r)||(l.add(r),t=YD.bind(null,t,s,r),s.then(t,t))}function nC(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function sC(t,s,r,i,l){return t.mode&1?(t.flags|=65536,t.lanes=l,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Ui(-1,1),s.tag=2,ko(r,s,1))),r.lanes|=1),t)}var MD=Yi.ReactCurrentOwner,bn=!1;function En(t,s,r,i){s.child=t===null?$b(s,null,r,i):_c(s,t.child,r,i)}function iC(t,s,r,i,l){r=r.render;var c=s.ref;return nc(s,l),i=j$(t,s,r,i,c,l),r=z$(),t!==null&&!bn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,zi(t,s,l)):(Kt&&r&&w$(s),s.flags|=1,En(t,s,i,l),s.child)}function oC(t,s,r,i,l){if(t===null){var c=r.type;return typeof c=="function"&&!nI(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=c,jb(t,s,c,i,l)):(t=E_(r.type,null,i,s,s.mode,l),t.ref=s.ref,t.return=s,s.child=t)}if(c=t.child,!(t.lanes&l)){var u=c.memoizedProps;if(r=r.compare,r=r!==null?r:hh,r(u,i)&&t.ref===s.ref)return zi(t,s,l)}return s.flags|=1,t=Do(c,i),t.ref=s.ref,t.return=s,s.child=t}function jb(t,s,r,i,l){if(t!==null){var c=t.memoizedProps;if(hh(c,i)&&t.ref===s.ref)if(bn=!1,s.pendingProps=i=c,(t.lanes&l)!==0)t.flags&131072&&(bn=!0);else return s.lanes=t.lanes,zi(t,s,l)}return Mm(t,s,r,i,l)}function zb(t,s,r){var i=s.pendingProps,l=i.children,c=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(Ka,Xn),Xn|=r;else{if(!(r&1073741824))return t=c!==null?c.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Pt(Ka,Xn),Xn|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:r,Pt(Ka,Xn),Xn|=i}else c!==null?(i=c.baseLanes|r,s.memoizedState=null):i=r,Pt(Ka,Xn),Xn|=i;return En(t,s,l,r),s.child}function Yb(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Mm(t,s,r,i,l){var c=kn(r)?Nl:dn.current;return c=dc(s,c),nc(s,l),r=j$(t,s,r,i,c,l),i=z$(),t!==null&&!bn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,zi(t,s,l)):(Kt&&i&&w$(s),s.flags|=1,En(t,s,r,l),s.child)}function lC(t,s,r,i,l){if(kn(r)){var c=!0;N_(s)}else c=!1;if(nc(s,l),s.stateNode===null)T_(t,s),Vb(s,r,i),km(s,r,i,l),i=!0;else if(t===null){var u=s.stateNode,h=s.memoizedProps;u.props=h;var f=u.context,_=r.contextType;typeof _=="object"&&_!==null?_=gs(_):(_=kn(r)?Nl:dn.current,_=dc(s,_));var T=r.getDerivedStateFromProps,g=typeof T=="function"||typeof u.getSnapshotBeforeUpdate=="function";g||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==i||f!==_)&&tC(s,u,i,_),$o=!1;var E=s.memoizedState;u.state=E,M_(s,i,u,l),f=s.memoizedState,h!==i||E!==f||yn.current||$o?(typeof T=="function"&&(ym(s,r,T,i),f=s.memoizedState),(h=$o||eC(s,r,h,i,E,f,_))?(g||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(s.flags|=4194308)):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=i,s.memoizedState=f),u.props=i,u.state=f,u.context=_,i=h):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),i=!1)}else{u=s.stateNode,Ob(t,s),h=s.memoizedProps,_=s.type===s.elementType?h:bs(s.type,h),u.props=_,g=s.pendingProps,E=u.context,f=r.contextType,typeof f=="object"&&f!==null?f=gs(f):(f=kn(r)?Nl:dn.current,f=dc(s,f));var S=r.getDerivedStateFromProps;(T=typeof S=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==g||E!==f)&&tC(s,u,i,f),$o=!1,E=s.memoizedState,u.state=E,M_(s,i,u,l);var R=s.memoizedState;h!==g||E!==R||yn.current||$o?(typeof S=="function"&&(ym(s,r,S,i),R=s.memoizedState),(_=$o||eC(s,r,_,i,E,R,f)||!1)?(T||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,R,f),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,R,f)),typeof u.componentDidUpdate=="function"&&(s.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(s.flags|=1024),s.memoizedProps=i,s.memoizedState=R),u.props=i,u.state=R,u.context=f,i=_):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&E===t.memoizedState||(s.flags|=1024),i=!1)}return Dm(t,s,r,i,c,l)}function Dm(t,s,r,i,l,c){Yb(t,s);var u=(s.flags&128)!==0;if(!i&&!u)return l&&jv(s,r,!1),zi(t,s,c);i=s.stateNode,MD.current=s;var h=u&&typeof r.getDerivedStateFromError!="function"?null:i.render();return s.flags|=1,t!==null&&u?(s.child=_c(s,t.child,null,c),s.child=_c(s,null,h,c)):En(t,s,h,c),s.memoizedState=i.state,l&&jv(s,r,!0),s.child}function Kb(t){var s=t.stateNode;s.pendingContext?Xv(t,s.pendingContext,s.pendingContext!==s.context):s.context&&Xv(t,s.context,!1),G$(t,s.containerInfo)}function aC(t,s,r,i,l){return fc(),D$(l),s.flags|=256,En(t,s,r,i),s.child}var Pm={dehydrated:null,treeContext:null,retryLane:0};function Fm(t){return{baseLanes:t,cachePool:null,transitions:null}}function Jb(t,s,r){var i=s.pendingProps,l=Zt.current,c=!1,u=(s.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(l&2)!==0),h?(c=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),Pt(Zt,l&1),t===null)return Nm(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(u=i.children,t=i.fallback,c?(i=s.mode,c=s.child,u={mode:"hidden",children:u},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=u):c=_T(u,i,0,null),t=vl(t,i,r,null),c.return=s,t.return=s,c.sibling=t,s.child=c,s.child.memoizedState=Fm(r),s.memoizedState=Pm,t):J$(s,u));if(l=t.memoizedState,l!==null&&(h=l.dehydrated,h!==null))return DD(t,s,u,i,h,l,r);if(c){c=i.fallback,u=s.mode,l=t.child,h=l.sibling;var f={mode:"hidden",children:i.children};return!(u&1)&&s.child!==l?(i=s.child,i.childLanes=0,i.pendingProps=f,s.deletions=null):(i=Do(l,f),i.subtreeFlags=l.subtreeFlags&14680064),h!==null?c=Do(h,c):(c=vl(c,u,r,null),c.flags|=2),c.return=s,i.return=s,i.sibling=c,s.child=i,i=c,c=s.child,u=t.child.memoizedState,u=u===null?Fm(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},c.memoizedState=u,c.childLanes=t.childLanes&~r,s.memoizedState=Pm,i}return c=t.child,t=c.sibling,i=Do(c,{mode:"visible",children:i.children}),!(s.mode&1)&&(i.lanes=r),i.return=s,i.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=i,s.memoizedState=null,i}function J$(t,s){return s=_T({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function jf(t,s,r,i){return i!==null&&D$(i),_c(s,t.child,null,r),t=J$(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function DD(t,s,r,i,l,c,u){if(r)return s.flags&256?(s.flags&=-257,i=x0(Error(Fe(422))),jf(t,s,u,i)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(c=i.fallback,l=s.mode,i=_T({mode:"visible",children:i.children},l,0,null),c=vl(c,l,u,null),c.flags|=2,i.return=s,c.return=s,i.sibling=c,s.child=i,s.mode&1&&_c(s,t.child,null,u),s.child.memoizedState=Fm(u),s.memoizedState=Pm,c);if(!(s.mode&1))return jf(t,s,u,null);if(l.data==="$!"){if(i=l.nextSibling&&l.nextSibling.dataset,i)var h=i.dgst;return i=h,c=Error(Fe(419)),i=x0(c,i,void 0),jf(t,s,u,i)}if(h=(u&t.childLanes)!==0,bn||h){if(i=Ur,i!==null){switch(u&-u){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(i.suspendedLanes|u)?0:l,l!==0&&l!==c.retryLane&&(c.retryLane=l,ji(t,l),Us(i,t,l,-1))}return rI(),i=x0(Error(Fe(421))),jf(t,s,u,i)}return l.data==="$?"?(s.flags|=128,s.child=t.child,s=KD.bind(null,t),l._reactRetry=s,null):(t=c.treeContext,Yn=yo(l.nextSibling),Kn=s,Kt=!0,ks=null,t!==null&&(ds[fs++]=Pi,ds[fs++]=Fi,ds[fs++]=bl,Pi=t.id,Fi=t.overflow,bl=s),s=J$(s,i.children),s.flags|=4096,s)}function cC(t,s,r){t.lanes|=s;var i=t.alternate;i!==null&&(i.lanes|=s),bm(t.return,s,r)}function N0(t,s,r,i,l){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:l}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=r,c.tailMode=l)}function qb(t,s,r){var i=s.pendingProps,l=i.revealOrder,c=i.tail;if(En(t,s,i.children,r),i=Zt.current,i&2)i=i&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cC(t,r,s);else if(t.tag===19)cC(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Pt(Zt,i),!(s.mode&1))s.memoizedState=null;else switch(l){case"forwards":for(r=s.child,l=null;r!==null;)t=r.alternate,t!==null&&D_(t)===null&&(l=r),r=r.sibling;r=l,r===null?(l=s.child,s.child=null):(l=r.sibling,r.sibling=null),N0(s,!1,l,r,c);break;case"backwards":for(r=null,l=s.child,s.child=null;l!==null;){if(t=l.alternate,t!==null&&D_(t)===null){s.child=l;break}t=l.sibling,l.sibling=r,r=l,l=t}N0(s,!0,r,null,c);break;case"together":N0(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function T_(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function zi(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),kl|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(Fe(153));if(s.child!==null){for(t=s.child,r=Do(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Do(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function PD(t,s,r){switch(s.tag){case 3:Kb(s),fc();break;case 5:Sb(s);break;case 1:kn(s.type)&&N_(s);break;case 4:G$(s,s.stateNode.containerInfo);break;case 10:var i=s.type._context,l=s.memoizedProps.value;Pt(k_,i._currentValue),i._currentValue=l;break;case 13:if(i=s.memoizedState,i!==null)return i.dehydrated!==null?(Pt(Zt,Zt.current&1),s.flags|=128,null):r&s.child.childLanes?Jb(t,s,r):(Pt(Zt,Zt.current&1),t=zi(t,s,r),t!==null?t.sibling:null);Pt(Zt,Zt.current&1);break;case 19:if(i=(r&s.childLanes)!==0,t.flags&128){if(i)return qb(t,s,r);s.flags|=128}if(l=s.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Pt(Zt,Zt.current),i)break;return null;case 22:case 23:return s.lanes=0,zb(t,s,r)}return zi(t,s,r)}var Zb,Bm,Qb,e1;Zb=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Bm=function(){};Qb=function(t,s,r,i){var l=t.memoizedProps;if(l!==i){t=s.stateNode,Sl(Ti.current);var c=null;switch(r){case"input":l=lm(t,l),i=lm(t,i),c=[];break;case"select":l=er({},l,{value:void 0}),i=er({},i,{value:void 0}),c=[];break;case"textarea":l=um(t,l),i=um(t,i),c=[];break;default:typeof l.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=C_)}dm(r,i);var u;r=null;for(_ in l)if(!i.hasOwnProperty(_)&&l.hasOwnProperty(_)&&l[_]!=null)if(_==="style"){var h=l[_];for(u in h)h.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(sh.hasOwnProperty(_)?c||(c=[]):(c=c||[]).push(_,null));for(_ in i){var f=i[_];if(h=l?.[_],i.hasOwnProperty(_)&&f!==h&&(f!=null||h!=null))if(_==="style")if(h){for(u in h)!h.hasOwnProperty(u)||f&&f.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in f)f.hasOwnProperty(u)&&h[u]!==f[u]&&(r||(r={}),r[u]=f[u])}else r||(c||(c=[]),c.push(_,r)),r=f;else _==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,h=h?h.__html:void 0,f!=null&&h!==f&&(c=c||[]).push(_,f)):_==="children"?typeof f!="string"&&typeof f!="number"||(c=c||[]).push(_,""+f):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(sh.hasOwnProperty(_)?(f!=null&&_==="onScroll"&&Gt("scroll",t),c||h===f||(c=[])):(c=c||[]).push(_,f))}r&&(c=c||[]).push("style",r);var _=c;(s.updateQueue=_)&&(s.flags|=4)}};e1=function(t,s,r,i){r!==i&&(s.flags|=4)};function vu(t,s){if(!Kt)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function sn(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(s)for(var l=t.child;l!==null;)r|=l.lanes|l.childLanes,i|=l.subtreeFlags&14680064,i|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)r|=l.lanes|l.childLanes,i|=l.subtreeFlags,i|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=i,t.childLanes=r,s}function FD(t,s,r){var i=s.pendingProps;switch(M$(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(s),null;case 1:return kn(s.type)&&x_(),sn(s),null;case 3:return i=s.stateNode,Tc(),Vt(yn),Vt(dn),W$(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Wf(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,ks!==null&&(zm(ks),ks=null))),Bm(t,s),sn(s),null;case 5:V$(s);var l=Sl(ph.current);if(r=s.type,t!==null&&s.stateNode!=null)Qb(t,s,r,i,l),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!i){if(s.stateNode===null)throw Error(Fe(166));return sn(s),null}if(t=Sl(Ti.current),Wf(s)){i=s.stateNode,r=s.type;var c=s.memoizedProps;switch(i[fi]=s,i[_h]=c,t=(s.mode&1)!==0,r){case"dialog":Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":case"embed":Gt("load",i);break;case"video":case"audio":for(l=0;l<ku.length;l++)Gt(ku[l],i);break;case"source":Gt("error",i);break;case"img":case"image":case"link":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"input":Ev(i,c),Gt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},Gt("invalid",i);break;case"textarea":$v(i,c),Gt("invalid",i)}dm(r,c),l=null;for(var u in c)if(c.hasOwnProperty(u)){var h=c[u];u==="children"?typeof h=="string"?i.textContent!==h&&(c.suppressHydrationWarning!==!0&&Vf(i.textContent,h,t),l=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&Vf(i.textContent,h,t),l=["children",""+h]):sh.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Gt("scroll",i)}switch(r){case"input":Mf(i),mv(i,c,!0);break;case"textarea":Mf(i),Iv(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=C_)}i=l,s.updateQueue=i,i!==null&&(s.flags|=4)}else{u=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=CN(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=u.createElement(r,{is:i.is}):(t=u.createElement(r),r==="select"&&(u=t,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):t=u.createElementNS(t,r),t[fi]=s,t[_h]=i,Zb(t,s,!1,!1),s.stateNode=t;e:{switch(u=fm(r,i),r){case"dialog":Gt("cancel",t),Gt("close",t),l=i;break;case"iframe":case"object":case"embed":Gt("load",t),l=i;break;case"video":case"audio":for(l=0;l<ku.length;l++)Gt(ku[l],t);l=i;break;case"source":Gt("error",t),l=i;break;case"img":case"image":case"link":Gt("error",t),Gt("load",t),l=i;break;case"details":Gt("toggle",t),l=i;break;case"input":Ev(t,i),l=lm(t,i),Gt("invalid",t);break;case"option":l=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},l=er({},i,{value:void 0}),Gt("invalid",t);break;case"textarea":$v(t,i),l=um(t,i),Gt("invalid",t);break;default:l=i}dm(r,l),h=l;for(c in h)if(h.hasOwnProperty(c)){var f=h[c];c==="style"?bN(t,f):c==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&xN(t,f)):c==="children"?typeof f=="string"?(r!=="textarea"||f!=="")&&ih(t,f):typeof f=="number"&&ih(t,""+f):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(sh.hasOwnProperty(c)?f!=null&&c==="onScroll"&&Gt("scroll",t):f!=null&&$$(t,c,f,u))}switch(r){case"input":Mf(t),mv(t,i,!1);break;case"textarea":Mf(t),Iv(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Fo(i.value));break;case"select":t.multiple=!!i.multiple,c=i.value,c!=null?Qa(t,!!i.multiple,c,!1):i.defaultValue!=null&&Qa(t,!!i.multiple,i.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=C_)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return sn(s),null;case 6:if(t&&s.stateNode!=null)e1(t,s,t.memoizedProps,i);else{if(typeof i!="string"&&s.stateNode===null)throw Error(Fe(166));if(r=Sl(ph.current),Sl(Ti.current),Wf(s)){if(i=s.stateNode,r=s.memoizedProps,i[fi]=s,(c=i.nodeValue!==r)&&(t=Kn,t!==null))switch(t.tag){case 3:Vf(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Vf(i.nodeValue,r,(t.mode&1)!==0)}c&&(s.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[fi]=s,s.stateNode=i}return sn(s),null;case 13:if(Vt(Zt),i=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Kt&&Yn!==null&&s.mode&1&&!(s.flags&128))Eb(),fc(),s.flags|=98560,c=!1;else if(c=Wf(s),i!==null&&i.dehydrated!==null){if(t===null){if(!c)throw Error(Fe(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Fe(317));c[fi]=s}else fc(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;sn(s),c=!1}else ks!==null&&(zm(ks),ks=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(s.child.flags|=8192,s.mode&1&&(t===null||Zt.current&1?Cr===0&&(Cr=3):rI())),s.updateQueue!==null&&(s.flags|=4),sn(s),null);case 4:return Tc(),Bm(t,s),t===null&&dh(s.stateNode.containerInfo),sn(s),null;case 10:return B$(s.type._context),sn(s),null;case 17:return kn(s.type)&&x_(),sn(s),null;case 19:if(Vt(Zt),c=s.memoizedState,c===null)return sn(s),null;if(i=(s.flags&128)!==0,u=c.rendering,u===null)if(i)vu(c,!1);else{if(Cr!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(u=D_(t),u!==null){for(s.flags|=128,vu(c,!1),i=u.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),s.subtreeFlags=0,i=r,r=s.child;r!==null;)c=r,t=i,c.flags&=14680066,u=c.alternate,u===null?(c.childLanes=0,c.lanes=t,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=u.childLanes,c.lanes=u.lanes,c.child=u.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=u.memoizedProps,c.memoizedState=u.memoizedState,c.updateQueue=u.updateQueue,c.type=u.type,t=u.dependencies,c.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Pt(Zt,Zt.current&1|2),s.child}t=t.sibling}c.tail!==null&&Tr()>gc&&(s.flags|=128,i=!0,vu(c,!1),s.lanes=4194304)}else{if(!i)if(t=D_(u),t!==null){if(s.flags|=128,i=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),vu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!u.alternate&&!Kt)return sn(s),null}else 2*Tr()-c.renderingStartTime>gc&&r!==1073741824&&(s.flags|=128,i=!0,vu(c,!1),s.lanes=4194304);c.isBackwards?(u.sibling=s.child,s.child=u):(r=c.last,r!==null?r.sibling=u:s.child=u,c.last=u)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Tr(),s.sibling=null,r=Zt.current,Pt(Zt,i?r&1|2:r&1),s):(sn(s),null);case 22:case 23:return tI(),i=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(s.flags|=8192),i&&s.mode&1?Xn&1073741824&&(sn(s),s.subtreeFlags&6&&(s.flags|=8192)):sn(s),null;case 24:return null;case 25:return null}throw Error(Fe(156,s.tag))}function BD(t,s){switch(M$(s),s.tag){case 1:return kn(s.type)&&x_(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return Tc(),Vt(yn),Vt(dn),W$(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return V$(s),null;case 13:if(Vt(Zt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(Fe(340));fc()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Vt(Zt),null;case 4:return Tc(),null;case 10:return B$(s.type._context),null;case 22:case 23:return tI(),null;case 24:return null;default:return null}}var zf=!1,an=!1,UD=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function Ya(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){cr(t,s,i)}else r.current=null}function Um(t,s,r){try{r()}catch(i){cr(t,s,i)}}var uC=!1;function HD(t,s){if(Sm=L_,t=ib(),k$(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var l=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var u=0,h=-1,f=-1,_=0,T=0,g=t,E=null;t:for(;;){for(var S;g!==r||l!==0&&g.nodeType!==3||(h=u+l),g!==c||i!==0&&g.nodeType!==3||(f=u+i),g.nodeType===3&&(u+=g.nodeValue.length),(S=g.firstChild)!==null;)E=g,g=S;for(;;){if(g===t)break t;if(E===r&&++_===l&&(h=u),E===c&&++T===i&&(f=u),(S=g.nextSibling)!==null)break;g=E,E=g.parentNode}g=S}r=h===-1||f===-1?null:{start:h,end:f}}else r=null}r=r||{start:0,end:0}}else r=null;for(Rm={focusedElem:t,selectionRange:r},L_=!1,Ye=s;Ye!==null;)if(s=Ye,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ye=t;else for(;Ye!==null;){s=Ye;try{var R=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var L=R.memoizedProps,x=R.memoizedState,v=s.stateNode,A=v.getSnapshotBeforeUpdate(s.elementType===s.type?L:bs(s.type,L),x);v.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var m=s.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(y){cr(s,s.return,y)}if(t=s.sibling,t!==null){t.return=s.return,Ye=t;break}Ye=s.return}return R=uC,uC=!1,R}function Wu(t,s,r){var i=s.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&t)===t){var c=l.destroy;l.destroy=void 0,c!==void 0&&Um(s,r,c)}l=l.next}while(l!==i)}}function dT(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==s)}}function Hm(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function t1(t){var s=t.alternate;s!==null&&(t.alternate=null,t1(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[fi],delete s[_h],delete s[vm],delete s[SD],delete s[RD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function r1(t){return t.tag===5||t.tag===3||t.tag===4}function hC(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||r1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Gm(t,s,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=C_));else if(i!==4&&(t=t.child,t!==null))for(Gm(t,s,r),t=t.sibling;t!==null;)Gm(t,s,r),t=t.sibling}function Vm(t,s,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Vm(t,s,r),t=t.sibling;t!==null;)Vm(t,s,r),t=t.sibling}var Xr=null,ys=!1;function _o(t,s,r){for(r=r.child;r!==null;)n1(t,s,r),r=r.sibling}function n1(t,s,r){if(_i&&typeof _i.onCommitFiberUnmount=="function")try{_i.onCommitFiberUnmount(sT,r)}catch{}switch(r.tag){case 5:an||Ya(r,s);case 6:var i=Xr,l=ys;Xr=null,_o(t,s,r),Xr=i,ys=l,Xr!==null&&(ys?(t=Xr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Xr.removeChild(r.stateNode));break;case 18:Xr!==null&&(ys?(t=Xr,r=r.stateNode,t.nodeType===8?S0(t.parentNode,r):t.nodeType===1&&S0(t,r),ch(t)):S0(Xr,r.stateNode));break;case 4:i=Xr,l=ys,Xr=r.stateNode.containerInfo,ys=!0,_o(t,s,r),Xr=i,ys=l;break;case 0:case 11:case 14:case 15:if(!an&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){l=i=i.next;do{var c=l,u=c.destroy;c=c.tag,u!==void 0&&(c&2||c&4)&&Um(r,s,u),l=l.next}while(l!==i)}_o(t,s,r);break;case 1:if(!an&&(Ya(r,s),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(h){cr(r,s,h)}_o(t,s,r);break;case 21:_o(t,s,r);break;case 22:r.mode&1?(an=(i=an)||r.memoizedState!==null,_o(t,s,r),an=i):_o(t,s,r);break;default:_o(t,s,r)}}function dC(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new UD),s.forEach(function(i){var l=JD.bind(null,t,i);r.has(i)||(r.add(i),i.then(l,l))})}}function Cs(t,s){var r=s.deletions;if(r!==null)for(var i=0;i<r.length;i++){var l=r[i];try{var c=t,u=s,h=u;e:for(;h!==null;){switch(h.tag){case 5:Xr=h.stateNode,ys=!1;break e;case 3:Xr=h.stateNode.containerInfo,ys=!0;break e;case 4:Xr=h.stateNode.containerInfo,ys=!0;break e}h=h.return}if(Xr===null)throw Error(Fe(160));n1(c,u,l),Xr=null,ys=!1;var f=l.alternate;f!==null&&(f.return=null),l.return=null}catch(_){cr(l,s,_)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)s1(s,t),s=s.sibling}function s1(t,s){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Cs(s,t),ai(t),i&4){try{Wu(3,t,t.return),dT(3,t)}catch(L){cr(t,t.return,L)}try{Wu(5,t,t.return)}catch(L){cr(t,t.return,L)}}break;case 1:Cs(s,t),ai(t),i&512&&r!==null&&Ya(r,r.return);break;case 5:if(Cs(s,t),ai(t),i&512&&r!==null&&Ya(r,r.return),t.flags&32){var l=t.stateNode;try{ih(l,"")}catch(L){cr(t,t.return,L)}}if(i&4&&(l=t.stateNode,l!=null)){var c=t.memoizedProps,u=r!==null?r.memoizedProps:c,h=t.type,f=t.updateQueue;if(t.updateQueue=null,f!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&AN(l,c),fm(h,u);var _=fm(h,c);for(u=0;u<f.length;u+=2){var T=f[u],g=f[u+1];T==="style"?bN(l,g):T==="dangerouslySetInnerHTML"?xN(l,g):T==="children"?ih(l,g):$$(l,T,g,_)}switch(h){case"input":am(l,c);break;case"textarea":vN(l,c);break;case"select":var E=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!c.multiple;var S=c.value;S!=null?Qa(l,!!c.multiple,S,!1):E!==!!c.multiple&&(c.defaultValue!=null?Qa(l,!!c.multiple,c.defaultValue,!0):Qa(l,!!c.multiple,c.multiple?[]:"",!1))}l[_h]=c}catch(L){cr(t,t.return,L)}}break;case 6:if(Cs(s,t),ai(t),i&4){if(t.stateNode===null)throw Error(Fe(162));l=t.stateNode,c=t.memoizedProps;try{l.nodeValue=c}catch(L){cr(t,t.return,L)}}break;case 3:if(Cs(s,t),ai(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{ch(s.containerInfo)}catch(L){cr(t,t.return,L)}break;case 4:Cs(s,t),ai(t);break;case 13:Cs(s,t),ai(t),l=t.child,l.flags&8192&&(c=l.memoizedState!==null,l.stateNode.isHidden=c,!c||l.alternate!==null&&l.alternate.memoizedState!==null||(Q$=Tr())),i&4&&dC(t);break;case 22:if(T=r!==null&&r.memoizedState!==null,t.mode&1?(an=(_=an)||T,Cs(s,t),an=_):Cs(s,t),ai(t),i&8192){if(_=t.memoizedState!==null,(t.stateNode.isHidden=_)&&!T&&t.mode&1)for(Ye=t,T=t.child;T!==null;){for(g=Ye=T;Ye!==null;){switch(E=Ye,S=E.child,E.tag){case 0:case 11:case 14:case 15:Wu(4,E,E.return);break;case 1:Ya(E,E.return);var R=E.stateNode;if(typeof R.componentWillUnmount=="function"){i=E,r=E.return;try{s=i,R.props=s.memoizedProps,R.state=s.memoizedState,R.componentWillUnmount()}catch(L){cr(i,r,L)}}break;case 5:Ya(E,E.return);break;case 22:if(E.memoizedState!==null){_C(g);continue}}S!==null?(S.return=E,Ye=S):_C(g)}T=T.sibling}e:for(T=null,g=t;;){if(g.tag===5){if(T===null){T=g;try{l=g.stateNode,_?(c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=g.stateNode,f=g.memoizedProps.style,u=f!=null&&f.hasOwnProperty("display")?f.display:null,h.style.display=NN("display",u))}catch(L){cr(t,t.return,L)}}}else if(g.tag===6){if(T===null)try{g.stateNode.nodeValue=_?"":g.memoizedProps}catch(L){cr(t,t.return,L)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;T===g&&(T=null),g=g.return}T===g&&(T=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Cs(s,t),ai(t),i&4&&dC(t);break;case 21:break;default:Cs(s,t),ai(t)}}function ai(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(r1(r)){var i=r;break e}r=r.return}throw Error(Fe(160))}switch(i.tag){case 5:var l=i.stateNode;i.flags&32&&(ih(l,""),i.flags&=-33);var c=hC(t);Vm(t,c,l);break;case 3:case 4:var u=i.stateNode.containerInfo,h=hC(t);Gm(t,h,u);break;default:throw Error(Fe(161))}}catch(f){cr(t,t.return,f)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function GD(t,s,r){Ye=t,i1(t)}function i1(t,s,r){for(var i=(t.mode&1)!==0;Ye!==null;){var l=Ye,c=l.child;if(l.tag===22&&i){var u=l.memoizedState!==null||zf;if(!u){var h=l.alternate,f=h!==null&&h.memoizedState!==null||an;h=zf;var _=an;if(zf=u,(an=f)&&!_)for(Ye=l;Ye!==null;)u=Ye,f=u.child,u.tag===22&&u.memoizedState!==null?TC(l):f!==null?(f.return=u,Ye=f):TC(l);for(;c!==null;)Ye=c,i1(c),c=c.sibling;Ye=l,zf=h,an=_}fC(t)}else l.subtreeFlags&8772&&c!==null?(c.return=l,Ye=c):fC(t)}}function fC(t){for(;Ye!==null;){var s=Ye;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:an||dT(5,s);break;case 1:var i=s.stateNode;if(s.flags&4&&!an)if(r===null)i.componentDidMount();else{var l=s.elementType===s.type?r.memoizedProps:bs(s.type,r.memoizedProps);i.componentDidUpdate(l,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&qv(s,c,i);break;case 3:var u=s.updateQueue;if(u!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}qv(s,u,r)}break;case 5:var h=s.stateNode;if(r===null&&s.flags&4){r=h;var f=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&r.focus();break;case"img":f.src&&(r.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var _=s.alternate;if(_!==null){var T=_.memoizedState;if(T!==null){var g=T.dehydrated;g!==null&&ch(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}an||s.flags&512&&Hm(s)}catch(E){cr(s,s.return,E)}}if(s===t){Ye=null;break}if(r=s.sibling,r!==null){r.return=s.return,Ye=r;break}Ye=s.return}}function _C(t){for(;Ye!==null;){var s=Ye;if(s===t){Ye=null;break}var r=s.sibling;if(r!==null){r.return=s.return,Ye=r;break}Ye=s.return}}function TC(t){for(;Ye!==null;){var s=Ye;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{dT(4,s)}catch(f){cr(s,r,f)}break;case 1:var i=s.stateNode;if(typeof i.componentDidMount=="function"){var l=s.return;try{i.componentDidMount()}catch(f){cr(s,l,f)}}var c=s.return;try{Hm(s)}catch(f){cr(s,c,f)}break;case 5:var u=s.return;try{Hm(s)}catch(f){cr(s,u,f)}}}catch(f){cr(s,s.return,f)}if(s===t){Ye=null;break}var h=s.sibling;if(h!==null){h.return=s.return,Ye=h;break}Ye=s.return}}var VD=Math.ceil,B_=Yi.ReactCurrentDispatcher,q$=Yi.ReactCurrentOwner,Ts=Yi.ReactCurrentBatchConfig,mt=0,Ur=null,Or=null,zr=0,Xn=0,Ka=Wo(0),Cr=0,$h=null,kl=0,fT=0,Z$=0,Xu=null,Nn=null,Q$=0,gc=1/0,wi=null,U_=!1,Wm=null,wo=null,Yf=!1,Lo=null,H_=0,ju=0,Xm=null,p_=-1,g_=0;function On(){return mt&6?Tr():p_!==-1?p_:p_=Tr()}function Mo(t){return t.mode&1?mt&2&&zr!==0?zr&-zr:AD.transition!==null?(g_===0&&(g_=VN()),g_):(t=Ct,t!==0||(t=window.event,t=t===void 0?16:JN(t.type)),t):1}function Us(t,s,r,i){if(50<ju)throw ju=0,Xm=null,Error(Fe(185));wh(t,r,i),(!(mt&2)||t!==Ur)&&(t===Ur&&(!(mt&2)&&(fT|=r),Cr===4&&Oo(t,zr)),wn(t,i),r===1&&mt===0&&!(s.mode&1)&&(gc=Tr()+500,cT&&Xo()))}function wn(t,s){var r=t.callbackNode;AM(t,s);var i=R_(t,t===Ur?zr:0);if(i===0)r!==null&&Rv(r),t.callbackNode=null,t.callbackPriority=0;else if(s=i&-i,t.callbackPriority!==s){if(r!=null&&Rv(r),s===1)t.tag===0?LD(pC.bind(null,t)):Tb(pC.bind(null,t)),ID(function(){!(mt&6)&&Xo()}),r=null;else{switch(WN(i)){case 1:r=L$;break;case 4:r=HN;break;case 16:r=S_;break;case 536870912:r=GN;break;default:r=S_}r=f1(r,o1.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function o1(t,s){if(p_=-1,g_=0,mt&6)throw Error(Fe(327));var r=t.callbackNode;if(sc()&&t.callbackNode!==r)return null;var i=R_(t,t===Ur?zr:0);if(i===0)return null;if(i&30||i&t.expiredLanes||s)s=G_(t,i);else{s=i;var l=mt;mt|=2;var c=a1();(Ur!==t||zr!==s)&&(wi=null,gc=Tr()+500,Al(t,s));do try{jD();break}catch(h){l1(t,h)}while(!0);F$(),B_.current=c,mt=l,Or!==null?s=0:(Ur=null,zr=0,s=Cr)}if(s!==0){if(s===2&&(l=Em(t),l!==0&&(i=l,s=jm(t,l))),s===1)throw r=$h,Al(t,0),Oo(t,i),wn(t,Tr()),r;if(s===6)Oo(t,i);else{if(l=t.current.alternate,!(i&30)&&!WD(l)&&(s=G_(t,i),s===2&&(c=Em(t),c!==0&&(i=c,s=jm(t,c))),s===1))throw r=$h,Al(t,0),Oo(t,i),wn(t,Tr()),r;switch(t.finishedWork=l,t.finishedLanes=i,s){case 0:case 1:throw Error(Fe(345));case 2:ml(t,Nn,wi);break;case 3:if(Oo(t,i),(i&130023424)===i&&(s=Q$+500-Tr(),10<s)){if(R_(t,0)!==0)break;if(l=t.suspendedLanes,(l&i)!==i){On(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=Am(ml.bind(null,t,Nn,wi),s);break}ml(t,Nn,wi);break;case 4:if(Oo(t,i),(i&4194240)===i)break;for(s=t.eventTimes,l=-1;0<i;){var u=31-Bs(i);c=1<<u,u=s[u],u>l&&(l=u),i&=~c}if(i=l,i=Tr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*VD(i/1960))-i,10<i){t.timeoutHandle=Am(ml.bind(null,t,Nn,wi),i);break}ml(t,Nn,wi);break;case 5:ml(t,Nn,wi);break;default:throw Error(Fe(329))}}}return wn(t,Tr()),t.callbackNode===r?o1.bind(null,t):null}function jm(t,s){var r=Xu;return t.current.memoizedState.isDehydrated&&(Al(t,s).flags|=256),t=G_(t,s),t!==2&&(s=Nn,Nn=r,s!==null&&zm(s)),t}function zm(t){Nn===null?Nn=t:Nn.push.apply(Nn,t)}function WD(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var l=r[i],c=l.getSnapshot;l=l.value;try{if(!Hs(c(),l))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Oo(t,s){for(s&=~Z$,s&=~fT,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Bs(s),i=1<<r;t[r]=-1,s&=~i}}function pC(t){if(mt&6)throw Error(Fe(327));sc();var s=R_(t,0);if(!(s&1))return wn(t,Tr()),null;var r=G_(t,s);if(t.tag!==0&&r===2){var i=Em(t);i!==0&&(s=i,r=jm(t,i))}if(r===1)throw r=$h,Al(t,0),Oo(t,s),wn(t,Tr()),r;if(r===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,ml(t,Nn,wi),wn(t,Tr()),null}function eI(t,s){var r=mt;mt|=1;try{return t(s)}finally{mt=r,mt===0&&(gc=Tr()+500,cT&&Xo())}}function wl(t){Lo!==null&&Lo.tag===0&&!(mt&6)&&sc();var s=mt;mt|=1;var r=Ts.transition,i=Ct;try{if(Ts.transition=null,Ct=1,t)return t()}finally{Ct=i,Ts.transition=r,mt=s,!(mt&6)&&Xo()}}function tI(){Xn=Ka.current,Vt(Ka)}function Al(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,$D(r)),Or!==null)for(r=Or.return;r!==null;){var i=r;switch(M$(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&x_();break;case 3:Tc(),Vt(yn),Vt(dn),W$();break;case 5:V$(i);break;case 4:Tc();break;case 13:Vt(Zt);break;case 19:Vt(Zt);break;case 10:B$(i.type._context);break;case 22:case 23:tI()}r=r.return}if(Ur=t,Or=t=Do(t.current,null),zr=Xn=s,Cr=0,$h=null,Z$=fT=kl=0,Nn=Xu=null,Ol!==null){for(s=0;s<Ol.length;s++)if(r=Ol[s],i=r.interleaved,i!==null){r.interleaved=null;var l=i.next,c=r.pending;if(c!==null){var u=c.next;c.next=l,i.next=u}r.pending=i}Ol=null}return t}function l1(t,s){do{var r=Or;try{if(F$(),f_.current=F_,P_){for(var i=Qt.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}P_=!1}if(yl=0,Br=vr=Qt=null,Vu=!1,gh=0,q$.current=null,r===null||r.return===null){Cr=1,$h=s,Or=null;break}e:{var c=t,u=r.return,h=r,f=s;if(s=zr,h.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var _=f,T=h,g=T.tag;if(!(T.mode&1)&&(g===0||g===11||g===15)){var E=T.alternate;E?(T.updateQueue=E.updateQueue,T.memoizedState=E.memoizedState,T.lanes=E.lanes):(T.updateQueue=null,T.memoizedState=null)}var S=nC(u);if(S!==null){S.flags&=-257,sC(S,u,h,c,s),S.mode&1&&rC(c,_,s),s=S,f=_;var R=s.updateQueue;if(R===null){var L=new Set;L.add(f),s.updateQueue=L}else R.add(f);break e}else{if(!(s&1)){rC(c,_,s),rI();break e}f=Error(Fe(426))}}else if(Kt&&h.mode&1){var x=nC(u);if(x!==null){!(x.flags&65536)&&(x.flags|=256),sC(x,u,h,c,s),D$(pc(f,h));break e}}c=f=pc(f,h),Cr!==4&&(Cr=2),Xu===null?Xu=[c]:Xu.push(c),c=u;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var v=Wb(c,f,s);Jv(c,v);break e;case 1:h=f;var A=c.type,m=c.stateNode;if(!(c.flags&128)&&(typeof A.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(wo===null||!wo.has(m)))){c.flags|=65536,s&=-s,c.lanes|=s;var y=Xb(c,h,s);Jv(c,y);break e}}c=c.return}while(c!==null)}u1(r)}catch(H){s=H,Or===r&&r!==null&&(Or=r=r.return);continue}break}while(!0)}function a1(){var t=B_.current;return B_.current=F_,t===null?F_:t}function rI(){(Cr===0||Cr===3||Cr===2)&&(Cr=4),Ur===null||!(kl&268435455)&&!(fT&268435455)||Oo(Ur,zr)}function G_(t,s){var r=mt;mt|=2;var i=a1();(Ur!==t||zr!==s)&&(wi=null,Al(t,s));do try{XD();break}catch(l){l1(t,l)}while(!0);if(F$(),mt=r,B_.current=i,Or!==null)throw Error(Fe(261));return Ur=null,zr=0,Cr}function XD(){for(;Or!==null;)c1(Or)}function jD(){for(;Or!==null&&!gM();)c1(Or)}function c1(t){var s=d1(t.alternate,t,Xn);t.memoizedProps=t.pendingProps,s===null?u1(t):Or=s,q$.current=null}function u1(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=BD(r,s),r!==null){r.flags&=32767,Or=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Cr=6,Or=null;return}}else if(r=FD(r,s,Xn),r!==null){Or=r;return}if(s=s.sibling,s!==null){Or=s;return}Or=s=t}while(s!==null);Cr===0&&(Cr=5)}function ml(t,s,r){var i=Ct,l=Ts.transition;try{Ts.transition=null,Ct=1,zD(t,s,r,i)}finally{Ts.transition=l,Ct=i}return null}function zD(t,s,r,i){do sc();while(Lo!==null);if(mt&6)throw Error(Fe(327));r=t.finishedWork;var l=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var c=r.lanes|r.childLanes;if(vM(t,c),t===Ur&&(Or=Ur=null,zr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Yf||(Yf=!0,f1(S_,function(){return sc(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=Ts.transition,Ts.transition=null;var u=Ct;Ct=1;var h=mt;mt|=4,q$.current=null,HD(t,r),s1(r,t),fD(Rm),L_=!!Sm,Rm=Sm=null,t.current=r,GD(r),EM(),mt=h,Ct=u,Ts.transition=c}else t.current=r;if(Yf&&(Yf=!1,Lo=t,H_=l),c=t.pendingLanes,c===0&&(wo=null),IM(r.stateNode),wn(t,Tr()),s!==null)for(i=t.onRecoverableError,r=0;r<s.length;r++)l=s[r],i(l.value,{componentStack:l.stack,digest:l.digest});if(U_)throw U_=!1,t=Wm,Wm=null,t;return H_&1&&t.tag!==0&&sc(),c=t.pendingLanes,c&1?t===Xm?ju++:(ju=0,Xm=t):ju=0,Xo(),null}function sc(){if(Lo!==null){var t=WN(H_),s=Ts.transition,r=Ct;try{if(Ts.transition=null,Ct=16>t?16:t,Lo===null)var i=!1;else{if(t=Lo,Lo=null,H_=0,mt&6)throw Error(Fe(331));var l=mt;for(mt|=4,Ye=t.current;Ye!==null;){var c=Ye,u=c.child;if(Ye.flags&16){var h=c.deletions;if(h!==null){for(var f=0;f<h.length;f++){var _=h[f];for(Ye=_;Ye!==null;){var T=Ye;switch(T.tag){case 0:case 11:case 15:Wu(8,T,c)}var g=T.child;if(g!==null)g.return=T,Ye=g;else for(;Ye!==null;){T=Ye;var E=T.sibling,S=T.return;if(t1(T),T===_){Ye=null;break}if(E!==null){E.return=S,Ye=E;break}Ye=S}}}var R=c.alternate;if(R!==null){var L=R.child;if(L!==null){R.child=null;do{var x=L.sibling;L.sibling=null,L=x}while(L!==null)}}Ye=c}}if(c.subtreeFlags&2064&&u!==null)u.return=c,Ye=u;else e:for(;Ye!==null;){if(c=Ye,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Wu(9,c,c.return)}var v=c.sibling;if(v!==null){v.return=c.return,Ye=v;break e}Ye=c.return}}var A=t.current;for(Ye=A;Ye!==null;){u=Ye;var m=u.child;if(u.subtreeFlags&2064&&m!==null)m.return=u,Ye=m;else e:for(u=A;Ye!==null;){if(h=Ye,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:dT(9,h)}}catch(H){cr(h,h.return,H)}if(h===u){Ye=null;break e}var y=h.sibling;if(y!==null){y.return=h.return,Ye=y;break e}Ye=h.return}}if(mt=l,Xo(),_i&&typeof _i.onPostCommitFiberRoot=="function")try{_i.onPostCommitFiberRoot(sT,t)}catch{}i=!0}return i}finally{Ct=r,Ts.transition=s}}return!1}function gC(t,s,r){s=pc(r,s),s=Wb(t,s,1),t=ko(t,s,1),s=On(),t!==null&&(wh(t,1,s),wn(t,s))}function cr(t,s,r){if(t.tag===3)gC(t,t,r);else for(;s!==null;){if(s.tag===3){gC(s,t,r);break}else if(s.tag===1){var i=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(wo===null||!wo.has(i))){t=pc(r,t),t=Xb(s,t,1),s=ko(s,t,1),t=On(),s!==null&&(wh(s,1,t),wn(s,t));break}}s=s.return}}function YD(t,s,r){var i=t.pingCache;i!==null&&i.delete(s),s=On(),t.pingedLanes|=t.suspendedLanes&r,Ur===t&&(zr&r)===r&&(Cr===4||Cr===3&&(zr&130023424)===zr&&500>Tr()-Q$?Al(t,0):Z$|=r),wn(t,s)}function h1(t,s){s===0&&(t.mode&1?(s=Ff,Ff<<=1,!(Ff&130023424)&&(Ff=4194304)):s=1);var r=On();t=ji(t,s),t!==null&&(wh(t,s,r),wn(t,r))}function KD(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),h1(t,r)}function JD(t,s){var r=0;switch(t.tag){case 13:var i=t.stateNode,l=t.memoizedState;l!==null&&(r=l.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Fe(314))}i!==null&&i.delete(s),h1(t,r)}var d1;d1=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||yn.current)bn=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return bn=!1,PD(t,s,r);bn=!!(t.flags&131072)}else bn=!1,Kt&&s.flags&1048576&&pb(s,y_,s.index);switch(s.lanes=0,s.tag){case 2:var i=s.type;T_(t,s),t=s.pendingProps;var l=dc(s,dn.current);nc(s,r),l=j$(null,s,i,t,l,r);var c=z$();return s.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,kn(i)?(c=!0,N_(s)):c=!1,s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,H$(s),l.updater=hT,s.stateNode=l,l._reactInternals=s,km(s,i,t,r),s=Dm(null,s,i,!0,c,r)):(s.tag=0,Kt&&c&&w$(s),En(null,s,l,r),s=s.child),s;case 16:i=s.elementType;e:{switch(T_(t,s),t=s.pendingProps,l=i._init,i=l(i._payload),s.type=i,l=s.tag=ZD(i),t=bs(i,t),l){case 0:s=Mm(null,s,i,t,r);break e;case 1:s=lC(null,s,i,t,r);break e;case 11:s=iC(null,s,i,t,r);break e;case 14:s=oC(null,s,i,bs(i.type,t),r);break e}throw Error(Fe(306,i,""))}return s;case 0:return i=s.type,l=s.pendingProps,l=s.elementType===i?l:bs(i,l),Mm(t,s,i,l,r);case 1:return i=s.type,l=s.pendingProps,l=s.elementType===i?l:bs(i,l),lC(t,s,i,l,r);case 3:e:{if(Kb(s),t===null)throw Error(Fe(387));i=s.pendingProps,c=s.memoizedState,l=c.element,Ob(t,s),M_(s,i,null,r);var u=s.memoizedState;if(i=u.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){l=pc(Error(Fe(423)),s),s=aC(t,s,i,r,l);break e}else if(i!==l){l=pc(Error(Fe(424)),s),s=aC(t,s,i,r,l);break e}else for(Yn=yo(s.stateNode.containerInfo.firstChild),Kn=s,Kt=!0,ks=null,r=$b(s,null,i,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(fc(),i===l){s=zi(t,s,r);break e}En(t,s,i,r)}s=s.child}return s;case 5:return Sb(s),t===null&&Nm(s),i=s.type,l=s.pendingProps,c=t!==null?t.memoizedProps:null,u=l.children,Lm(i,l)?u=null:c!==null&&Lm(i,c)&&(s.flags|=32),Yb(t,s),En(t,s,u,r),s.child;case 6:return t===null&&Nm(s),null;case 13:return Jb(t,s,r);case 4:return G$(s,s.stateNode.containerInfo),i=s.pendingProps,t===null?s.child=_c(s,null,i,r):En(t,s,i,r),s.child;case 11:return i=s.type,l=s.pendingProps,l=s.elementType===i?l:bs(i,l),iC(t,s,i,l,r);case 7:return En(t,s,s.pendingProps,r),s.child;case 8:return En(t,s,s.pendingProps.children,r),s.child;case 12:return En(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(i=s.type._context,l=s.pendingProps,c=s.memoizedProps,u=l.value,Pt(k_,i._currentValue),i._currentValue=u,c!==null)if(Hs(c.value,u)){if(c.children===l.children&&!yn.current){s=zi(t,s,r);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var h=c.dependencies;if(h!==null){u=c.child;for(var f=h.firstContext;f!==null;){if(f.context===i){if(c.tag===1){f=Ui(-1,r&-r),f.tag=2;var _=c.updateQueue;if(_!==null){_=_.shared;var T=_.pending;T===null?f.next=f:(f.next=T.next,T.next=f),_.pending=f}}c.lanes|=r,f=c.alternate,f!==null&&(f.lanes|=r),bm(c.return,r,s),h.lanes|=r;break}f=f.next}}else if(c.tag===10)u=c.type===s.type?null:c.child;else if(c.tag===18){if(u=c.return,u===null)throw Error(Fe(341));u.lanes|=r,h=u.alternate,h!==null&&(h.lanes|=r),bm(u,r,s),u=c.sibling}else u=c.child;if(u!==null)u.return=c;else for(u=c;u!==null;){if(u===s){u=null;break}if(c=u.sibling,c!==null){c.return=u.return,u=c;break}u=u.return}c=u}En(t,s,l.children,r),s=s.child}return s;case 9:return l=s.type,i=s.pendingProps.children,nc(s,r),l=gs(l),i=i(l),s.flags|=1,En(t,s,i,r),s.child;case 14:return i=s.type,l=bs(i,s.pendingProps),l=bs(i.type,l),oC(t,s,i,l,r);case 15:return jb(t,s,s.type,s.pendingProps,r);case 17:return i=s.type,l=s.pendingProps,l=s.elementType===i?l:bs(i,l),T_(t,s),s.tag=1,kn(i)?(t=!0,N_(s)):t=!1,nc(s,r),Vb(s,i,l),km(s,i,l,r),Dm(null,s,i,!0,t,r);case 19:return qb(t,s,r);case 22:return zb(t,s,r)}throw Error(Fe(156,s.tag))};function f1(t,s){return UN(t,s)}function qD(t,s,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _s(t,s,r,i){return new qD(t,s,r,i)}function nI(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ZD(t){if(typeof t=="function")return nI(t)?1:0;if(t!=null){if(t=t.$$typeof,t===O$)return 11;if(t===S$)return 14}return 2}function Do(t,s){var r=t.alternate;return r===null?(r=_s(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function E_(t,s,r,i,l,c){var u=2;if(i=t,typeof t=="function")nI(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case Ba:return vl(r.children,l,c,s);case I$:u=8,l|=8;break;case nm:return t=_s(12,r,s,l|2),t.elementType=nm,t.lanes=c,t;case sm:return t=_s(13,r,s,l),t.elementType=sm,t.lanes=c,t;case im:return t=_s(19,r,s,l),t.elementType=im,t.lanes=c,t;case SN:return _T(r,l,c,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case IN:u=10;break e;case ON:u=9;break e;case O$:u=11;break e;case S$:u=14;break e;case mo:u=16,i=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return s=_s(u,r,s,l),s.elementType=t,s.type=i,s.lanes=c,s}function vl(t,s,r,i){return t=_s(7,t,i,s),t.lanes=r,t}function _T(t,s,r,i){return t=_s(22,t,i,s),t.elementType=SN,t.lanes=r,t.stateNode={isHidden:!1},t}function b0(t,s,r){return t=_s(6,t,null,s),t.lanes=r,t}function y0(t,s,r){return s=_s(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function QD(t,s,r,i,l){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=d0(0),this.expirationTimes=d0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=d0(0),this.identifierPrefix=i,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function sI(t,s,r,i,l,c,u,h,f){return t=new QD(t,s,r,h,f),s===1?(s=1,c===!0&&(s|=8)):s=0,c=_s(3,null,null,s),t.current=c,c.stateNode=t,c.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},H$(c),t}function eP(t,s,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fa,key:i==null?null:""+i,children:t,containerInfo:s,implementation:r}}function _1(t){if(!t)return Bo;t=t._reactInternals;e:{if(Ul(t)!==t||t.tag!==1)throw Error(Fe(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(kn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Fe(171))}if(t.tag===1){var r=t.type;if(kn(r))return _b(t,r,s)}return s}function T1(t,s,r,i,l,c,u,h,f){return t=sI(r,i,!0,t,l,c,u,h,f),t.context=_1(null),r=t.current,i=On(),l=Mo(r),c=Ui(i,l),c.callback=s??null,ko(r,c,l),t.current.lanes=l,wh(t,l,i),wn(t,i),t}function TT(t,s,r,i){var l=s.current,c=On(),u=Mo(l);return r=_1(r),s.context===null?s.context=r:s.pendingContext=r,s=Ui(c,u),s.payload={element:t},i=i===void 0?null:i,i!==null&&(s.callback=i),t=ko(l,s,u),t!==null&&(Us(t,l,u,c),d_(t,l,u)),u}function V_(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function EC(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function iI(t,s){EC(t,s),(t=t.alternate)&&EC(t,s)}function tP(){return null}var p1=typeof reportError=="function"?reportError:function(t){console.error(t)};function oI(t){this._internalRoot=t}pT.prototype.render=oI.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(Fe(409));TT(t,s,null,null)};pT.prototype.unmount=oI.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;wl(function(){TT(null,t,null,null)}),s[Xi]=null}};function pT(t){this._internalRoot=t}pT.prototype.unstable_scheduleHydration=function(t){if(t){var s=zN();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Io.length&&s!==0&&s<Io[r].priority;r++);Io.splice(r,0,t),r===0&&KN(t)}};function lI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function gT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mC(){}function rP(t,s,r,i,l){if(l){if(typeof i=="function"){var c=i;i=function(){var _=V_(u);c.call(_)}}var u=T1(s,i,t,0,null,!1,!1,"",mC);return t._reactRootContainer=u,t[Xi]=u.current,dh(t.nodeType===8?t.parentNode:t),wl(),u}for(;l=t.lastChild;)t.removeChild(l);if(typeof i=="function"){var h=i;i=function(){var _=V_(f);h.call(_)}}var f=sI(t,0,!1,null,null,!1,!1,"",mC);return t._reactRootContainer=f,t[Xi]=f.current,dh(t.nodeType===8?t.parentNode:t),wl(function(){TT(s,f,r,i)}),f}function ET(t,s,r,i,l){var c=r._reactRootContainer;if(c){var u=c;if(typeof l=="function"){var h=l;l=function(){var f=V_(u);h.call(f)}}TT(s,u,t,l)}else u=rP(r,s,t,l,i);return V_(u)}XN=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=yu(s.pendingLanes);r!==0&&(A$(s,r|1),wn(s,Tr()),!(mt&6)&&(gc=Tr()+500,Xo()))}break;case 13:wl(function(){var i=ji(t,1);if(i!==null){var l=On();Us(i,t,1,l)}}),iI(t,1)}};v$=function(t){if(t.tag===13){var s=ji(t,134217728);if(s!==null){var r=On();Us(s,t,134217728,r)}iI(t,134217728)}};jN=function(t){if(t.tag===13){var s=Mo(t),r=ji(t,s);if(r!==null){var i=On();Us(r,t,s,i)}iI(t,s)}};zN=function(){return Ct};YN=function(t,s){var r=Ct;try{return Ct=t,s()}finally{Ct=r}};Tm=function(t,s,r){switch(s){case"input":if(am(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var i=r[s];if(i!==t&&i.form===t.form){var l=aT(i);if(!l)throw Error(Fe(90));LN(i),am(i,l)}}}break;case"textarea":vN(t,r);break;case"select":s=r.value,s!=null&&Qa(t,!!r.multiple,s,!1)}};wN=eI;MN=wl;var nP={usingClientEntryPoint:!1,Events:[Dh,Va,aT,yN,kN,eI]},Cu={findFiberByHostInstance:Il,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},sP={bundleType:Cu.bundleType,version:Cu.version,rendererPackageName:Cu.rendererPackageName,rendererConfig:Cu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FN(t),t===null?null:t.stateNode},findFiberByHostInstance:Cu.findFiberByHostInstance||tP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kf.isDisabled&&Kf.supportsFiber)try{sT=Kf.inject(sP),_i=Kf}catch{}}es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nP;es.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lI(s))throw Error(Fe(200));return eP(t,s,null,r)};es.createRoot=function(t,s){if(!lI(t))throw Error(Fe(299));var r=!1,i="",l=p1;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),s=sI(t,1,!1,null,null,r,!1,i,l),t[Xi]=s.current,dh(t.nodeType===8?t.parentNode:t),new oI(s)};es.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=FN(s),t=t===null?null:t.stateNode,t};es.flushSync=function(t){return wl(t)};es.hydrate=function(t,s,r){if(!gT(s))throw Error(Fe(200));return ET(null,t,s,!0,r)};es.hydrateRoot=function(t,s,r){if(!lI(t))throw Error(Fe(405));var i=r!=null&&r.hydratedSources||null,l=!1,c="",u=p1;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),s=T1(s,null,t,1,r??null,l,!1,c,u),t[Xi]=s.current,dh(t),i)for(t=0;t<i.length;t++)r=i[t],l=r._getVersion,l=l(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,l]:s.mutableSourceEagerHydrationData.push(r,l);return new pT(s)};es.render=function(t,s,r){if(!gT(s))throw Error(Fe(200));return ET(null,t,s,!1,r)};es.unmountComponentAtNode=function(t){if(!gT(t))throw Error(Fe(40));return t._reactRootContainer?(wl(function(){ET(null,null,t,!1,function(){t._reactRootContainer=null,t[Xi]=null})}),!0):!1};es.unstable_batchedUpdates=eI;es.unstable_renderSubtreeIntoContainer=function(t,s,r,i){if(!gT(r))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return ET(t,s,r,!1,i)};es.version="18.3.1-next-f1338f8080-20240426";function g1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g1)}catch(t){console.error(t)}}g1(),gN.exports=es;var E1=gN.exports,m1,$C=E1;m1=$C.createRoot,$C.hydrateRoot;/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),oP=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,i)=>i?i.toUpperCase():r.toLowerCase()),IC=t=>{const s=oP(t);return s.charAt(0).toUpperCase()+s.slice(1)},$1=(...t)=>t.filter((s,r,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=ve.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:u,...h},f)=>ve.createElement("svg",{ref:f,...lP,width:s,height:s,stroke:t,strokeWidth:i?Number(r)*24/Number(s):r,className:$1("lucide",l),...h},[...u.map(([_,T])=>ve.createElement(_,T)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hl=(t,s)=>{const r=ve.forwardRef(({className:i,...l},c)=>ve.createElement(aP,{ref:c,iconNode:s,className:$1(`lucide-${iP(IC(t))}`,`lucide-${t}`,i),...l}));return r.displayName=IC(t),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],uP=Hl("check",cP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],dP=Hl("copy",hP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fP=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],I1=Hl("eye",fP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],O1=Hl("file-spreadsheet",_P);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],S1=Hl("search",TP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]],R1=Hl("square-function",pP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],L1=Hl("wand-sparkles",gP),EP={FUNCTIONS:{en:"Functions",ja:""},SEARCH:{en:"Search",ja:""},NUMBER:{en:"Number",ja:""},TEXT:{en:"Text",ja:""},CELL:{en:"Cell",ja:""},CELL_REF:{en:"Cell reference",ja:""},RANGE:{en:"Range",ja:""},ARITH:{en:"Arithmetic",ja:""},CMP:{en:"Compare",ja:""},PAREN:{en:"Parentheses",ja:""},NAME:{en:"var",ja:""},CANCEL:{en:"Cancel",ja:""}},mP={LOADING_FUNCS:{en:"Loading function list",ja:""},LOAD_FAILED:{en:"Failed to load function list",ja:""},NO_BLOCKS_FOUND:{en:"No blocks found",ja:""},GENERATED_FORMULA:{en:"Generated Formula",ja:""},COPY_DONE:{en:"Copied",ja:""},BASIC:{en:"Basic",ja:""},HISTORY:{en:"History",ja:""},NO_HISTORY:{en:"No history",ja:""},FORMULA_PLACEHOLDER:{en:"=SUM(A1,B1*2)",ja:"=SUM(A1,B1*2)"},STATUS_READY:{en:"Ready",ja:""},STATUS_WORKING:{en:"Working",ja:""},STATUS_SAVED:{en:"Saved",ja:""},STATUS_LOADED:{en:"Loaded",ja:""},NO_SEARCH_RESULTS:{en:"No results found",ja:""}},$P={TOOLTIP_START:{en:"Start of Excel formula (prepend =)",ja:"Excel = "},TOOLTIP_NUMBER:{en:"Number literal",ja:""},TOOLTIP_STRING:{en:'String literal (output as "...")',ja:'"..." '},TOOLTIP_CELL:{en:"Cell reference (e.g., A1, $B$2, Sheet1!C3)",ja:": A1, $B$2, Sheet1!C3"},TOOLTIP_RANGE:{en:"Range reference (e.g., A1:B2, Sheet1!A:A)",ja:": A1:B2, Sheet1!A:A"},TOOLTIP_ARITH:{en:"Arithmetic operations",ja:""},TOOLTIP_CMP:{en:"Comparison operators",ja:""},TOOLTIP_PAREN:{en:"Grouping with parentheses",ja:""},TOOLTIP_BOOL:{en:"TRUE / FALSE",ja:"TRUE / FALSE"}},IP={COPY:{en:"Copy",ja:""},PASTE:{en:"Paste",ja:""},BLOCKIFY:{en:"Blockify",ja:""},IMPORT_FROM_FORMULA:{en:"From formula",ja:""},PASTE_FORMULA:{en:"Paste a formula",ja:""}},OP={SELECT_BLOCK_PROMPT:{en:"Select a block to see the formula here",ja:""},IMPORT_API_NOT_READY:{en:"Workspace is not ready yet.",ja:""},IMPORT_FAILED:{en:"Failed to import formula. Check console.",ja:"console"}},SP={COPY_REF:{en:"Copy reference",ja:""},COPY_VALUE:{en:"Copy value",ja:""},COPY_TSV:{en:"Copy range (TSV)",ja:"TSV"},PASTE:{en:"Paste",ja:""},ADD_REF_BLOCK:{en:"Add reference block",ja:""},CLEAR_VALUE:{en:"Clear value",ja:""},CLEAR_STYLE:{en:"Clear formatting",ja:""},CLEAR_ALL:{en:"Clear all",ja:""}},RP={UNDO:{en:"Undo",ja:""},REDO:{en:"Redo",ja:""},UNDO_LONG:{en:"Undo",ja:""},REDO_LONG:{en:"Redo",ja:""},DUPLICATE:{en:"Duplicate",ja:""},DELETE:{en:"Delete",ja:""},SELECT_ALL:{en:"Select all",ja:""},ADD_COMMENT:{en:"Add comment",ja:""},REMOVE_COMMENT:{en:"Remove comment",ja:""},COLLAPSE_BLOCK:{en:"Collapse block",ja:""},EXPAND_BLOCK:{en:"Expand block",ja:""}},LP={EXPAND_ALL:{en:"Expand all",ja:""},COLLAPSE_ALL:{en:"Collapse all",ja:""},COLLAPSE_LEVEL:{en:"Collapse this level",ja:""},EXPAND_LEVEL:{en:"Expand this level",ja:""},COLLAPSE_DEEPEST:{en:"Collapse deepest level",ja:""},EXPAND_DEEPEST:{en:"Expand deepest level",ja:""},COLLAPSE_UPPER:{en:"Collapse upper level",ja:""},EXPAND_UPPER:{en:"Expand upper level",ja:""},COLLAPSE_SELECTED:{en:"Collapse selected",ja:""},EXPAND_SELECTED:{en:"Expand selected",ja:""},COLLAPSE_EXCEPT_SELECTED:{en:"Collapse except selected",ja:""},EXPAND_EXCEPT_SELECTED:{en:"Expand except selected",ja:""},COLLAPSE_BY_DEPTH:{en:"Collapse by depth",ja:""},EXPAND_BY_DEPTH:{en:"Expand by depth",ja:""},COLLAPSE_TO_LEVEL:{en:"Collapse to level",ja:""},EXPAND_TO_LEVEL:{en:"Expand to level",ja:""},COLLAPSE_TEMP:{en:"Collapse temporarily",ja:""},EXPAND_TEMP:{en:"Expand temporarily",ja:""}},AP={TAB_FILE:{en:"File",ja:""},TAB_FUNCTIONS:{en:"Functions",ja:""},TAB_NAMED_FUNCTIONS:{en:"Named functions",ja:""},TAB_CHECK:{en:"Check",ja:""},TOOLTIP_FILE:{en:"File actions",ja:""},TOOLTIP_FUNCTIONS:{en:"Function actions",ja:""},TOOLTIP_NAMED_FUNCTIONS:{en:"Named function actions",ja:""},TOOLTIP_CHECK:{en:"Check actions",ja:""}},vP={IMPORT:{en:"Import",ja:""},EXPORT:{en:"Export",ja:""},SAVE:{en:"Save",ja:""},LOAD:{en:"Load",ja:""},CONFIRM_OVERWRITE:{en:"Overwrite?",ja:""},CONFIRM_IMPORT:{en:"Import?",ja:""},ALERT_NO_FILE:{en:"No file selected",ja:""},ALERT_IMPORT_FAILED:{en:"Import failed",ja:""},ALERT_EXPORT_FAILED:{en:"Export failed",ja:""}},CP={CREATE_NEW:{en:"Create new",ja:""},RENAME:{en:"Rename",ja:""},SAVE:{en:"Save",ja:""},OPEN:{en:"Open",ja:""},WORKSPACE_ACTIVE_TOOLTIP:{en:"Workspace active tooltip",ja:""},INSERT_TO_MAIN:{en:"Insert to main",ja:""},INSERT:{en:"Insert",ja:""},INSERT_FUNCTION:{en:"Insert function",ja:""},INSERT_CURRENT_PARAM:{en:"Insert current param",ja:""},NAMED_MANAGE:{en:"Manage",ja:""},NAMED_ADD_PARAM:{en:"+param",ja:"param"},NAMED_TOOLTIP_INSERT_PARAM_BLOCK:{en:"Insert param block into current workspace",ja:"param WS"},NAMED_TOOLTIP_INSERT_TO_CURRENT_WS:{en:"Insert into current workspace",ja:"WS"}},xP={WORKSPACE_MANAGER:{en:"Workspace manager",ja:""},CLOSE:{en:"Close",ja:""},WORKSPACE_MAIN:{en:"Main",ja:""},WORKSPACE_FUNCTION:{en:"Function",ja:""},WORKSPACE_LIST:{en:"Workspaces",ja:""},TOOLTIP_CREATE_NAMED_FN:{en:"Create a new named function",ja:""},MAIN_WORKSPACE:{en:"Main workspace",ja:""},ERROR_MAIN_WORKSPACE_NOT_FOUND:{en:"Main workspace not found (unexpected)",ja:""},NO_NAMED_FUNCTIONS:{en:"No named functions yet",ja:""},CONFIRM_DELETE_NAMED_FN:{en:`Delete "{name}"?
Call blocks will become undefined.`,ja:`{name}
`},EDIT:{en:"Edit",ja:""},UNSAVED:{en:"Unsaved",ja:""},MAIN_WORKSPACE_HELP:{en:'Main is not edited here. Switch workspace with "Open" to edit.',ja:""},LABEL_FUNCTION_NAME:{en:"Function name",ja:""},PLACEHOLDER_FUNCTION_NAME:{en:"Function name",ja:""},LABEL_DESCRIPTION:{en:"Description",ja:""},PLACEHOLDER_DESCRIPTION:{en:"Description (shown in search/hover)",ja:""},SAVE:{en:"Save",ja:""},WARN_ON_UPDATE_META_MISSING_TITLE:{en:"onUpdateFnMeta is not connected",ja:"onUpdateFnMeta "},WARN_ON_UPDATE_META_MISSING_NOTE:{en:"onUpdateFnMeta is not connected, so saving is currently unavailable.",ja:" onUpdateFnMeta "},HOW_TO_EDIT_TITLE:{en:"How to edit",ja:""},HOW_TO_EDIT_BODY:{en:'Select a function on the left and press "Edit" to show the form here.',ja:""}},NP={CONFIRM_DISCARD_CHANGES:{en:"Discard changes?",ja:""},CONFIRM_OK:{en:"Yes",ja:""},CONFIRM_CANCEL:{en:"No",ja:""},ALERT_NO_SELECTION:{en:"Nothing selected",ja:""},ALERT_INVALID_OPERATION:{en:"Invalid operation",ja:""},STATUS_READY:{en:"Ready",ja:""},STATUS_WORKING:{en:"Working",ja:""},STATUS_SAVED:{en:"Saved",ja:""},STATUS_LOADED:{en:"Loaded",ja:""},STATUS_IMPORTED:{en:"Imported",ja:""},STATUS_EXPORTED:{en:"Exported",ja:""},ERROR_WS_API_NOT_READY:{en:"Workspace API not ready",ja:" API "},ERROR_INIT_FAILED:{en:"Initialization failed",ja:""},ERROR_CODEGEN_FAILED:{en:"Code generation failed",ja:""}},bP={ERROR_UNSUPPORTED_FORMAT:{en:"Unsupported format",ja:""},ERROR_SHEET_NOT_FOUND:{en:"Sheet not found",ja:""},ERROR_EMPTY_BOOK:{en:"Workbook is empty",ja:""},ERROR_INVALID_CELL:{en:"Invalid cell",ja:""},ERROR_INVALID_RANGE:{en:"Invalid range",ja:""},ERROR_PARSE_FAILED:{en:"Failed to parse",ja:""},ERROR_TOO_LARGE:{en:"Too large",ja:""},ERROR_UNSUPPORTED_CELL:{en:"Unsupported cell",ja:""}},yP={ERROR_WORKSPACE_NOT_FOUND:{en:"Workspace not found",ja:""},ERROR_INVALID_WORKSPACE_KIND:{en:"Invalid workspace kind",ja:""},ERROR_UNSUPPORTED_SCHEMA_VERSION:{en:"Unsupported schemaVersion",ja:" schemaVersion "},ALERT_SAVE_FAILED:{en:"Save failed",ja:""},ALERT_LOAD_FAILED:{en:"Load failed",ja:""},STATUS_UPDATED:{en:"Updated",ja:""}},kP={BLOCK_COUNT_SUFFIX:{en:"blocks",ja:""},TEMP_DISPLAY:{en:"Temporary",ja:""},ALL:{en:"All",ja:""},NONE:{en:"None",ja:""},UNKNOWN:{en:"Unknown",ja:""}},wP={VIEW:{en:"View",ja:""},EXPAND:{en:"Expand",ja:""},COLLAPSE:{en:"Collapse",ja:""},FOCUS:{en:"Focus",ja:""},PATH:{en:"Path",ja:""},ON:{en:"ON",ja:"ON"},OFF:{en:"OFF",ja:"OFF"}},MP={MOBILE_TAB_WORKSPACE:{en:"Workspace",ja:""},MOBILE_TAB_CELLS:{en:"Cells",ja:""},MOBILE_TAB_FORMULA:{en:"Formula",ja:""}},DP={IMPORT_XLSX:{en:"Import .xlsx",ja:"xlsx"},IMPORT_NAMED_FNS:{en:"Import named functions",ja:" "},EXPORT_NAMED_FNS:{en:"Export named functions",ja:" "},SHEET_SWITCH:{en:"Sheet",ja:""},TOOLTIP_IMPORT_XLSX:{en:"Import Excel (.xlsx)",ja:"Excel (.xlsx) "},TOOLTIP_SHEET_SWITCH:{en:"Switch sheet",ja:""},TOOLTIP_IMPORT_NAMED_FNS:{en:"Import named functions JSON",ja:" JSON "},TOOLTIP_EXPORT_NAMED_FNS:{en:"Export named functions JSON",ja:" JSON "}},tt={...EP,...mP,...$P,...IP,...OP,...SP,...RP,...LP,...AP,...vP,...CP,...xP,...NP,...bP,...yP,...kP,...wP,...MP,...DP};function Yr(t){return s=>typeof s=="string"?tt[s][t]:s[t]}async function PP(t){const s=await fetch(t);if(!s.ok){const r=await s.text();throw new Error(`[HTTP ${s.status}] ${t}
${r.slice(0,200)}`)}return await s.json()}async function FP(t){const s=await fetch(t);if(!s.ok){const r=await s.text();throw new Error(`[HTTP ${s.status}] ${t}
${r.slice(0,200)}`)}return await s.arrayBuffer()}async function BP(t){const r=`${"/Frockly/".replace(/\/?$/,"/")}embed/en`,i=`${r}/fn_embed.meta.json`,l=`${r}/fn_embed.f32`,c=await PP(i),u=await FP(l),h=new Float32Array(u);if(h.length!==c.count*c.dim)throw new Error(`embed size mismatch: vecs=${h.length}, expected=${c.count*c.dim}`);return{meta:c,vecs:h}}const UP="modulepreload",HP=function(t){return"/Frockly/"+t},OC={},A1=function(s,r,i){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");l=Promise.allSettled(r.map(f=>{if(f=HP(f),f in OC)return;OC[f]=!0;const _=f.endsWith(".css"),T=_?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${T}`))return;const g=document.createElement("link");if(g.rel=_?"stylesheet":UP,_||(g.as="script"),g.crossOrigin="",g.href=f,h&&g.setAttribute("nonce",h),document.head.appendChild(g),_)return new Promise((E,S)=>{g.addEventListener("load",E),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function c(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return l.then(u=>{for(const h of u||[])h.status==="rejected"&&c(h.reason);return s().catch(c)})},SC=globalThis.fetch?.bind(globalThis);SC&&(globalThis.fetch=async(t,s)=>(typeof t=="string"||t?.url,await SC(t,s)));const RC=globalThis.XMLHttpRequest;if(RC){class t extends RC{open(r,i,l,c,u){return this.__url=i,super.open(r,i,l??!0,c??null,u??null)}send(r){return this.__url,this.addEventListener("loadend",()=>{}),super.send(r??null)}}globalThis.XMLHttpRequest=t}let k0=null;async function GP(t){return k0||(k0=(async()=>{const i=await A1(()=>import("./transformers-CNV193q1.js"),[]),{pipeline:l,env:c}=i;return c.allowLocalModels=!1,c.allowRemoteModels=!0,c.remoteHost="https://huggingface.co/",c.remotePathTemplate="{model}/resolve/{revision}/",c.useBrowserCache=!0,l("feature-extraction","Xenova/all-MiniLM-L6-v2")})()),(await(await k0)(t,{pooling:"mean"})).data}function VP(t,s,r){let i=0;for(let l=0;l<r.length;l++)i+=t[s+l]*r[l];return i}function v1(t,s,r,i=7){const{dim:l,count:c,fns:u}=t,h=new Array(c);for(let f=0;f<c;f++){const _=VP(s,f*l,r);h[f]={fn:u[f],score:_}}return h.sort((f,_)=>_.score-f.score),h.slice(0,i)}const WP=BP();async function XP(t,s=7){const{meta:r,vecs:i}=await WP,l=await GP(t);if(l.length!==r.dim)throw new Error(`dim mismatch: query=${l.length}, index=${r.dim}`);return v1(r,i,l,s)}async function jP(t){const s=await fetch(t);if(!s.ok){const r=await s.text();throw new Error(`[HTTP ${s.status}] ${t}
${r.slice(0,200)}`)}return await s.json()}async function zP(t){const s=await fetch(t);if(!s.ok){const r=await s.text();throw new Error(`[HTTP ${s.status}] ${t}
${r.slice(0,200)}`)}return await s.arrayBuffer()}async function YP(t){const r=`${"/Frockly/".replace(/\/?$/,"/")}embed/jp`,i=`${r}/fn_embed.meta.json`,l=`${r}/fn_embed.f32`,c=await jP(i),u=await zP(l),h=new Float32Array(u);if(h.length!==c.count*c.dim)throw new Error(`embed size mismatch: vecs=${h.length}, expected=${c.count*c.dim}`);return{meta:c,vecs:h}}let w0=null;const KP="sirasagi62/ruri-v3-30m-ONNX",JP="main",qP="fp32";async function ZP(t){w0||(w0=(async()=>{const i=await A1(()=>import("./transformers-CNV193q1.js"),[]),{pipeline:l,env:c}=i;return c.allowLocalModels=!1,c.allowRemoteModels=!0,c.remoteHost="https://huggingface.co/",c.remotePathTemplate="{model}/resolve/{revision}/",c.useBrowserCache=!0,l("feature-extraction",KP,{revision:JP,dtype:qP})})());const r=await(await w0)(t,{pooling:"mean",normalize:!0});return r.data??r}const QP=YP();async function eF(t,s=7){const{meta:r,vecs:i}=await QP,l=await ZP(t);if(l.length!==r.dim)throw new Error(`dim mismatch: query=${l.length}, index=${r.dim}`);return v1(r,i,l,s)}const tF="/Frockly/assets/fn_list-DNOQxSfy.txt";async function C1(){const s=await(await fetch(tF)).text();return rF(s)}function rF(t){const s=[];for(const r of t.split(/\r?\n/)){let i=r.trim();if(!i||(i=i.replace(/^\uFEFF/,""),!i.startsWith("(")||!i.endsWith(")")))continue;const c=i.slice(1,-1).split(",").map(g=>g.trim());if(c.length<3)continue;const u=c[0].toUpperCase(),h=Number(c[1]),f=c[2]==="1";if(!Number.isFinite(h))continue;if(!f){s.push({name:u,min:h,variadic:!1});continue}const _=Number(c[3]??"1"),T=Number(c[4]??"0");s.push({name:u,min:h,variadic:!0,step:Number.isFinite(_)?_:1,max:Number.isFinite(T)?T:0})}return s}function Pr({className:t="",children:s,...r}){return V.jsx("button",{type:"button",...r,className:["border px-3 py-1 text-xs leading-none whitespace-nowrap","border-emerald-300 bg-emerald-50 text-emerald-800","hover:bg-emerald-100","disabled:opacity-40 disabled:cursor-not-allowed",t].join(" "),children:s})}function Ih(){return V.jsx("div",{className:"mx-3 self-stretch w-px bg-emerald-400"})}function nF(t){return/^[\x00-\x7F]*$/.test(t)}const sF=["SUM","AVERAGE","MIN","MAX","IF","AND","OR","COUNT","COUNTIF","COUNTIFS","SUMIF","SUMIFS","VLOOKUP","XLOOKUP"],To=7,iF=10,oF=.35,lF=.75;function aF(t){return`frockly_${t.toUpperCase()}`}function x1({search:t="",uiLang:s,onBlockClick:r,onHoverFn:i,onSelectFn:l}){const c=ve.useMemo(()=>Yr(s),[s]);ve.useEffect(()=>{},[s]);const u=ve.useMemo(()=>[{type:"basic_start",label:"=",haystack:"= start"},{type:"basic_number",label:c(tt.NUMBER),haystack:"number "},{type:"basic_string",label:c(tt.TEXT),haystack:"text "},{type:"basic_cell",label:c(tt.CELL_REF),haystack:"cell ref "},{type:"basic_range",label:c(tt.RANGE),haystack:"range "},{type:"basic_arith",label:c(tt.ARITH),haystack:"arith  + - * /"},{type:"basic_cmp",label:c(tt.CMP),haystack:"compare  = <> < <= > >="},{type:"basic_paren",label:c(tt.PAREN),haystack:"paren  ()"},{type:"basic_name",label:c(tt.NAME),haystack:"name "}],[c]),h=t.trim().toLowerCase(),[f,_]=ve.useState([]),[T,g]=ve.useState(!1),[E,S]=ve.useState(""),[R,L]=ve.useState(null),[,x]=ve.useState(""),[,v]=ve.useState(!1),A=ve.useMemo(()=>s==="en"||nF(h)?"en":"ja",[s,h]);ve.useEffect(()=>{let F=!1;if(L(null),x(""),v(!1),!T||E||!h||h.length<2)return;v(!0);const B=window.setTimeout(()=>{(async()=>{try{const re=A==="en"?await XP(h,To):await eF(h,To);F||L(re)}catch(re){F||(L(null),x(String(re?.message??re??"semantic search error")))}finally{F||v(!1)}})()},200);return()=>{F=!0,window.clearTimeout(B)}},[h,T,E,A]),ve.useEffect(()=>{let F=!1;return(async()=>{try{S("");const B=await C1();if(F)return;_(B),g(!0)}catch(B){if(F)return;S(String(B?.message??B??"load error")),g(!0)}})(),()=>{F=!0}},[]);const m=ve.useMemo(()=>f.map(F=>{const B=F.name.toUpperCase(),re=F.variadic?"variadic":"fixed",ne=F.variadic?`min=${F.min} step=${F.step??1} max=${F.max??0} ${re}`:`args=${F.min} ${re}`;return{type:aF(B),label:B,haystack:`${B} ${ne}`.toLowerCase()}}),[f]),y=ve.useMemo(()=>{const F=new Map;for(const B of m)F.set(B.label.toUpperCase(),B);return F},[m]),H=ve.useMemo(()=>{if(!R)return[];const F=R[0]?.score??0,B=[];for(const re of R){if(re.score<oF||F>0&&re.score<F*lF)continue;const ne=y.get(re.fn.toUpperCase());if(ne&&B.push(ne),B.length>=To)break}return B},[R,y]),G=ve.useMemo(()=>{const F=new Map(m.map(ne=>[ne.label,ne])),B=[];for(const ne of sF){const ee=F.get(ne.toUpperCase());ee&&B.push(ee)}const re=new Set;return B.filter(ne=>re.has(ne.type)?!1:(re.add(ne.type),!0)).slice(0,iF)},[m]),k=ve.useMemo(()=>{if(!T||E)return[];if(h.length===0)return G;const F=h.toUpperCase(),B=new Set,re=[],ne=m.find(ee=>ee.label===F);ne&&(re.push(ne),B.add(ne.type));for(const ee of m)if(ee.label.startsWith(F)&&!B.has(ee.type)&&(re.push(ee),B.add(ee.type)),re.length>=To)break;for(const ee of H)if(B.has(ee.type)||(re.push(ee),B.add(ee.type)),re.length>=To)break;for(const ee of m)if(re.length<To&&!B.has(ee.type)&&(ee.label.toLowerCase().includes(h)||ee.haystack?.includes(h))&&(re.push(ee),B.add(ee.type)),re.length>=To)break;return re.slice(0,To)},[h,T,E,m,G,H]);return V.jsxs("div",{className:"py-1",children:[!T&&V.jsx("div",{className:"text-xs text-gray-500 py-1",children:c(tt.LOADING_FUNCS)}),T&&E&&V.jsxs("div",{className:"text-xs text-red-600 py-1",children:[c(tt.LOAD_FAILED),": ",E]}),V.jsxs("div",{className:"h-[36px] flex items-stretch px-2 overflow-hidden",children:[V.jsx("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:u.map(F=>V.jsx(Pr,{title:F.label,onClick:()=>r?.(F.type),children:F.label},F.type))}),k.length>0&&V.jsx(Ih,{}),k.length>0&&V.jsx("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:k.map(F=>V.jsx(Pr,{title:F.label,onClick:()=>{r?.(F.type),l?.(F.label.toUpperCase())},onMouseEnter:()=>i?.(`excel:${F.label.toUpperCase()}`),onMouseLeave:()=>i?.(null),children:F.label},F.type))})]}),T&&!E&&h.length>0&&k.length===0&&V.jsx("div",{className:"text-xs text-gray-500 py-1",children:c(tt.NO_BLOCKS_FOUND)})]})}function cF(t){const s={};for(const r of t.split(/\r?\n/)){const i=r.trim();if(!i)continue;const l=i.match(/^\(\s*([A-Za-z0-9_.]+)\s*,\s*"[^"]*"\s*,\s*"([^"]*)"\s*\)\s*$/);if(!l)continue;const c=l[1].toUpperCase(),u=l[2].trim();c&&u&&(s[c]=u)}return s}async function uF(t){const s="/Frockly/",r=t==="en"?`${s}meta/en/fn_text_en.txt`:`${s}meta/jp/fn_text_jp.txt`,i=await fetch(r);if(!i.ok)throw new Error(`fn_text fetch failed: ${i.status} ${r}`);const l=await i.text();return cF(l)}function LC(t,s=80){const r=(t??"").replace(/\s+/g," ").trim();return r?r.length>s?r.slice(0,s-1)+"ELLIPSIS":r:""}function AC(t){return!t||t.length===0?"()":`(${t.join(", ")})`}function vC(t){const s=Yr(t.uiLang),r=t.selected?"border-slate-500":"border-slate-200",i=t.selected?"bg-slate-50":"bg-white",l=t.active?"":" ";return V.jsxs("div",{className:`flex items-center gap-2 border ${r} ${i} px-2 py-2`,onClick:t.onClick,children:[V.jsx("div",{className:"w-[12px] text-[10px] text-slate-500",title:s("WORKSPACE_ACTIVE_TOOLTIP"),children:l}),V.jsxs("div",{className:"min-w-0 flex-1",children:[V.jsx("div",{className:"truncate text-sm font-semibold text-slate-800",children:t.title}),t.subtitle?V.jsx("div",{className:"truncate text-[11px] text-slate-500",children:t.subtitle}):null]}),V.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[V.jsx(xu,{disabled:!t.onOpen,onClick:t.onOpen,title:s("OPEN"),children:s("OPEN")}),V.jsx(xu,{disabled:!t.onInsert,onClick:t.onInsert,title:s("INSERT_TO_MAIN"),children:s("INSERT")}),V.jsx(xu,{disabled:!t.onEdit,onClick:t.onEdit,title:s("EDIT"),children:s("EDIT")}),V.jsx(xu,{disabled:!t.onDuplicate,onClick:t.onDuplicate,title:s("DUPLICATE"),children:s("DUPLICATE")}),V.jsx(xu,{disabled:!t.onDelete,onClick:t.onDelete,title:s("DELETE"),children:s("DELETE")})]})]})}function xu(t){return V.jsx("button",{className:"h-[24px] border border-slate-300 bg-white px-2 text-[11px] hover:bg-slate-100 active:bg-slate-200 disabled:opacity-40",disabled:t.disabled||!t.onClick,title:t.title,onClick:s=>{s.preventDefault(),s.stopPropagation(),t.onClick?.()},children:t.children})}function hF(t){const{main:s,fnWorkspaces:r}=t,i=Yr(t.uiLang??"en"),[l,c]=ve.useState(t.activeWorkspaceId),[u,h]=ve.useState(null),[f,_]=ve.useState(null),[T,g]=ve.useState(!1);ve.useEffect(()=>{const m=y=>{y.key==="Escape"&&t.onClose()};return window.addEventListener("keydown",m),()=>window.removeEventListener("keydown",m)},[t]);const E=ve.useMemo(()=>{const m=r.find(y=>y.id===l);if(m)return t.fnByWsId.get(m.id)},[r,t.fnByWsId,l]),S=l===(s?.id??""),R=m=>{m&&(h(m.id),_({fnId:m.id,name:m.name??"",description:m.description??"",params:(m.params??[]).join(", ")}),g(!1))},L=()=>{h(null),_(null),g(!1)},x=()=>{if(!f)return;const m=f.name.trim(),y=f.description.trim(),H=f.params.split(",").map(G=>G.trim()).filter(Boolean);m&&(t.onUpdateFnMeta?.(f.fnId,{name:m,description:y||void 0,params:H.length?H:[]}),t.onRenameFn?.(f.fnId,m),g(!1),console.log("[NAMED] save meta",f.fnId,{name:m,description:y,params:H}))},v=()=>{const m=t.onCreateFn();c(m.wsId),h(m.fnId),_({fnId:m.fnId,name:"",description:"",params:""}),g(!1)},A=!!f?.name.trim()&&!!t.onUpdateFnMeta;return V.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-black/20 p-4",onMouseDown:m=>{m.target===m.currentTarget&&t.onClose()},children:V.jsxs("div",{className:"w-full max-w-5xl border border-slate-300 bg-white",onMouseDown:m=>m.stopPropagation(),children:[V.jsxs("div",{className:"flex h-[40px] items-center border-b border-emerald-700 bg-emerald-600 px-3",children:[V.jsx("div",{className:"text-sm font-semibold text-white",children:i("WORKSPACE_MANAGER")}),V.jsx("div",{className:"ml-auto flex items-center gap-2",children:V.jsx("button",{className:"h-[28px] border border-emerald-200 bg-emerald-50 px-3 text-xs text-emerald-900 hover:bg-white active:bg-emerald-100",onClick:t.onClose,children:i("CLOSE")})})]}),V.jsxs("div",{className:"grid grid-cols-12 gap-0",children:[V.jsxs("div",{className:"col-span-7 border-r border-slate-200",children:[V.jsxs("div",{className:"flex items-center gap-2 px-3 py-2",children:[V.jsx("div",{className:"text-xs font-semibold text-slate-600",children:i("WORKSPACE_LIST")}),V.jsx("div",{className:"ml-auto flex items-center gap-2",children:V.jsxs("button",{className:"h-[28px] border border-slate-300 bg-white px-3 text-xs hover:bg-slate-100 active:bg-slate-200",onClick:m=>{m.preventDefault(),m.stopPropagation(),v()},title:i("TOOLTIP_CREATE_NAMED_FN"),children:[" ",i("CREATE_NEW")]})})]}),V.jsxs("div",{className:"max-h-[70vh] overflow-y-auto px-2 pb-2",children:[V.jsxs("div",{className:"mb-2",children:[V.jsx("div",{className:"px-1 py-1 text-[11px] font-semibold text-slate-500",children:i("WORKSPACE_MAIN")}),s?V.jsx(vC,{uiLang:t.uiLang,selected:l===s.id,active:t.activeWorkspaceId===s.id,title:s.title??i("MAIN_WORKSPACE"),subtitle:"",onClick:()=>c(s.id),onOpen:()=>t.onSwitchWorkspace(s.id),onInsert:null,onEdit:null,onDuplicate:null,onDelete:null}):V.jsx("div",{className:"px-2 py-2 text-xs text-slate-500",children:i("ERROR_MAIN_WORKSPACE_NOT_FOUND")})]}),V.jsxs("div",{children:[V.jsx("div",{className:"px-1 py-1 text-[11px] font-semibold text-slate-500",children:i("TAB_NAMED_FUNCTIONS")}),r.length===0&&V.jsx("div",{className:"px-2 py-2 text-xs text-slate-500",children:i("NO_NAMED_FUNCTIONS")}),V.jsx("div",{className:"flex flex-col gap-1",children:r.map(m=>{const y=t.fnByWsId.get(m.id),H=y?.id??m.fnId??"",G=!!H,k=AC(y?.params),F=LC(y?.description??"",80),B=F?`${k}  ${F}`:k;return V.jsx(vC,{uiLang:t.uiLang,selected:l===m.id,active:t.activeWorkspaceId===m.id,title:y?.name??m.title??"???",subtitle:B,onClick:()=>c(m.id),onOpen:()=>t.onSwitchWorkspace(m.id),onInsert:G?()=>t.onInsertToMain(H):null,onEdit:G?()=>R(y):null,onDuplicate:G?()=>t.onDuplicateFn(H):null,onDelete:G?()=>{window.confirm(i("CONFIRM_DELETE_NAMED_FN").replace("{name}",y?.name??m.title??"???"))&&(t.onDeleteFn(H),u===H&&L())}:null},m.id)})})]})]})]}),V.jsxs("div",{className:"col-span-5",children:[V.jsxs("div",{className:"flex items-center border-b border-slate-200 bg-white px-3 py-2",children:[V.jsx("div",{className:"text-xs font-semibold text-slate-600",children:i("EDIT")}),V.jsx("div",{className:"ml-auto",children:T&&V.jsx("div",{className:"text-[11px] text-slate-500",children:i("UNSAVED")})})]}),V.jsx("div",{className:"max-h-[70vh] overflow-y-auto p-3",children:S?V.jsxs("div",{className:"text-sm text-slate-700",children:[V.jsx("div",{className:"mb-2 font-semibold",children:i("MAIN_WORKSPACE")}),V.jsx("div",{className:"text-xs text-slate-500",children:i("MAIN_WORKSPACE_HELP")})]}):u&&f?V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"mb-3",children:[V.jsx("div",{className:"mb-1 text-[11px] font-semibold text-slate-600",children:i("LABEL_FUNCTION_NAME")}),V.jsx("input",{autoFocus:!0,className:"w-full border border-slate-300 bg-white px-2 py-1 text-sm outline-none focus:border-slate-500",value:f.name,onChange:m=>{_(y=>y&&{...y,name:m.target.value}),g(!0)},placeholder:i("PLACEHOLDER_FUNCTION_NAME")})]}),V.jsxs("div",{className:"mb-3",children:[V.jsx("div",{className:"mb-1 text-[11px] font-semibold text-slate-600",children:i("LABEL_DESCRIPTION")}),V.jsx("textarea",{className:"w-full border border-slate-300 bg-white px-2 py-1 text-sm outline-none focus:border-slate-500",rows:5,value:f.description,onChange:m=>{_(y=>y&&{...y,description:m.target.value}),g(!0)},placeholder:i("PLACEHOLDER_DESCRIPTION")})]}),V.jsxs("div",{className:"flex gap-2",children:[V.jsx("button",{className:"h-[30px] border border-slate-300 bg-white px-3 text-xs hover:bg-slate-100 active:bg-slate-200",onClick:L,children:i("CANCEL")}),V.jsx("button",{className:"h-[30px] border border-slate-300 bg-white px-3 text-xs hover:bg-slate-100 active:bg-slate-200 disabled:opacity-40",disabled:!A,onClick:x,title:t.onUpdateFnMeta?"":i("WARN_ON_UPDATE_META_MISSING_TITLE"),children:i("SAVE")})]}),!t.onUpdateFnMeta&&V.jsx("div",{className:"mt-2 text-xs text-slate-500",children:i("WARN_ON_UPDATE_META_MISSING_NOTE")})]}):V.jsxs("div",{className:"text-sm text-slate-700",children:[V.jsx("div",{className:"mb-2 font-semibold",children:i("HOW_TO_EDIT_TITLE")}),V.jsx("div",{className:"text-xs text-slate-500",children:i("HOW_TO_EDIT_BODY")}),E&&V.jsxs("div",{className:"mt-4 border border-slate-200 bg-slate-50 p-2 text-xs text-slate-600",children:[V.jsx("div",{className:"font-semibold",children:E.name}),V.jsx("div",{className:"mt-1",children:AC(E.params)}),E.description&&V.jsx("div",{className:"mt-1",children:LC(E.description,200)})]})]})})]})]})]})})}function dF(t,s){const r=(t.name??"").toLowerCase(),i=(t.description??"").toLowerCase();return r===s?400:r.startsWith(s)?300:r.includes(s)?200:i.includes(s)?100:0}function N1(t){const s=Yr(t.uiLang),r=(t.search??"").trim().toLowerCase(),i=ve.useMemo(()=>r?t.fns.map(h=>({fn:h,s:dF(h,r)})).filter(h=>h.s>0).sort((h,f)=>f.s-h.s||h.fn.name.localeCompare(f.fn.name)).map(h=>h.fn):t.fns,[t.fns,r]),[l,c]=ve.useState(!1),u=h=>`${h.name}(${h.params.join(", ")})`;return V.jsxs("div",{className:"py-1",children:[V.jsxs("div",{className:"h-[36px] flex items-stretch px-2 overflow-hidden",children:[V.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:[i.map(h=>V.jsx(Pr,{title:[s("NAMED_TOOLTIP_INSERT_TO_CURRENT_WS").replace("{sig}",u(h)),h.description?`
${h.description}`:""].join(""),onClick:()=>t.onInsertCurrent(h.id),className:"shrink-0",onMouseEnter:()=>t.onHoverNamed?.(`named:${h.id}`),onMouseLeave:()=>t.onHoverNamed?.(null),onFocus:()=>t.onHoverNamed?.(`named:${h.id}`),onBlur:()=>t.onHoverNamed?.(null),children:V.jsx("span",{className:"max-w-[160px] truncate inline-block align-bottom",children:h.name})},h.id)),i.length===0&&V.jsx("div",{className:"text-xs opacity-60 py-1",children:s("NO_SEARCH_RESULTS")})]}),V.jsx(Ih,{}),V.jsxs("div",{className:"flex items-center gap-2",children:[t.onInsertCurrentParam&&V.jsx(Pr,{title:s("NAMED_TOOLTIP_INSERT_PARAM_BLOCK"),onClick:()=>t.onInsertCurrentParam?.(),children:"param"}),V.jsx(Pr,{onClick:()=>c(!0),children:s("NAMED_MANAGE")})]})]}),l&&V.jsx(fF,{uiLang:t.uiLang,workspaces:t.workspaces,activeWorkspaceId:t.activeWorkspaceId,fns:t.fns,onClose:()=>c(!1),onSwitchWorkspace:h=>{t.onSwitchWorkspace(h)},onCreateFn:()=>t.onCreateFn(),onDuplicateFn:t.onDuplicateFn,onDeleteFn:t.onDeleteFn,onRenameFn:t.onRenameFn,onInsertToMain:h=>{t.onInsertToMain(h),c(!1)},onUpdateFnMeta:t.onUpdateFnMeta})]})}function fF(t){const s=t.workspaces.find(c=>c.kind==="main"),r=t.workspaces.filter(c=>c.kind==="fn");ve.useEffect(()=>{const c=u=>{u.key==="Escape"&&t.onClose()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[t.onClose]);const i=ve.useMemo(()=>{const c=new Map;for(const u of t.fns)c.set(u.workspaceId,u);return c},[t.fns]),l=ve.useRef(null);return ve.useEffect(()=>{const c=l.current;if(!c)return;const u=r.find(h=>h.fnId===c);u&&(t.onSwitchWorkspace(u.id),l.current=null)},[r,t.activeWorkspaceId,t.onSwitchWorkspace]),V.jsx(hF,{uiLang:t.uiLang,onClose:t.onClose,main:s?{id:s.id,title:s.title,fnId:s.fnId}:null,fnWorkspaces:r.map(c=>({id:c.id,title:c.title,fnId:c.fnId})),activeWorkspaceId:t.activeWorkspaceId,fnByWsId:i,onSwitchWorkspace:t.onSwitchWorkspace,onInsertToMain:t.onInsertToMain,onDuplicateFn:t.onDuplicateFn,onDeleteFn:t.onDeleteFn,onCreateFn:t.onCreateFn,onUpdateFnMeta:t.onUpdateFnMeta,onRenameFn:t.onRenameFn})}let W_=null;const Ym=new Set;function Ec(){if(!W_)throw new Error("[projectStore] state is not initialized yet");return W_}function b1(t){W_=t;for(const s of Ym)s()}function Ki(t){const s=Ec();b1(t(s))}function _F(t){return Ym.add(t),()=>Ym.delete(t)}function y1(){return ve.useSyncExternalStore(_F,Ec,Ec)}function TF(t){W_||b1(t)}const aI=(t,s)=>`
<xml xmlns="https://developers.google.com/blockly/xml">
  <block type="fn_root" x="40" y="40">
    <field name="FN_ID">${t}</field>
    <field name="FN_NAME">${k1(s)}</field>
  </block>
</xml>
`.trim();function CC(t){Ki(s=>({...s,activeWorkspaceId:t}))}function xC(t,s){Ki(r=>{const i=Fh(r,t);if(!i)return r;const l=s.name??i.name,c=s.description!==void 0?s.description:i.description;return{...r,functions:r.functions.map(u=>u.id===t?{...u,name:l,description:c}:u),workspaces:s.name!==void 0?r.workspaces.map(u=>u.id===i.workspaceId?{...u,title:l,xml:w1(u.xml,l)}:u):r.workspaces}})}function k1(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function w1(t,s){if(!t)return t;const r=k1(s);return t.replace(/<field name="FN_NAME">[\s\S]*?<\/field>/,`<field name="FN_NAME">${r}</field>`)}function pF(t,s){Ki(r=>({...r,workspaces:r.workspaces.map(i=>i.id===t?{...i,xml:s}:i)}))}function gF(t){const s=Ec();pF(s.activeWorkspaceId,t)}function mc(t){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function EF(){try{Ec();return}catch{}const t="ws_main";TF({version:1,activeWorkspaceId:t,workspaces:[{id:t,kind:"main",title:"main",xml:""}],functions:[]})}function mF(t){const s=t.workspaces.find(r=>r.kind==="main");if(!s)throw new Error("main workspace missing");return s.id}function $F(t,s){return t.workspaces.find(r=>r.id===s)}function Fh(t,s){return t.functions.find(r=>r.id===s)}function Km(t="A",s=[]){const r=mc("fn"),i=mc("ws_fn");return Ki(l=>{const c={id:r,name:t,params:s,workspaceId:i,description:""},u={id:i,kind:"fn",title:t,fnId:r,xml:aI(r,t)};return{...l,functions:[...l.functions,c],workspaces:[...l.workspaces,u],activeWorkspaceId:i}}),{fnId:r,wsId:i}}function NC(t,s){Ki(r=>{const i=Fh(r,t);return i?{...r,functions:r.functions.map(l=>l.id===t?{...l,name:s}:l),workspaces:r.workspaces.map(l=>l.id===i.workspaceId?{...l,title:s,xml:w1(l.xml,s)}:l)}:r})}function bC(t){Ki(s=>{const r=Fh(s,t);if(!r)return s;const i=mc("fn"),l=mc("ws_fn"),c=`${r.name} (copy)`,u={...r,id:i,name:c,workspaceId:l,description:r.description??""},h={id:l,kind:"fn",title:c,fnId:i,xml:aI(i,c)};return{...s,functions:[...s.functions,u],workspaces:[...s.workspaces,h],activeWorkspaceId:l}})}function yC(t){Ki(s=>{const r=Fh(s,t);if(!r)return s;const i=s.functions.filter(u=>u.id!==t),l=s.workspaces.filter(u=>u.id!==r.workspaceId);let c=s.activeWorkspaceId;return c===r.workspaceId&&(c=mF(s)),{...s,functions:i,workspaces:l,activeWorkspaceId:c}})}function IF(t,s){Ki(r=>{const i=Fh(r,t);return!i||i.params.length===s.length&&i.params.every((c,u)=>c===s[u])?r:{...r,functions:r.functions.map(c=>c.id===t?{...c,params:s}:c)}})}function OF(t,s){Ki(r=>{if(!t.length)return r;const i=new Set(r.functions.map(h=>h.name)),l=[...r.functions],c=[...r.workspaces];let u=null;for(const h of t){const f=mc("fn"),_=mc("ws_fn");let T=h.name||"Unnamed";if(i.has(T)){let R=2;for(;i.has(`${T} (${R})`);)R++;T=`${T} (${R})`}i.add(T);const g={id:f,name:T,params:h.params??[],workspaceId:_,description:h.description??""},E=(h.workspaceXml??"").trim()||aI(f,T),S={id:_,kind:"fn",title:T,fnId:f,xml:E};l.push(g),c.push(S),u||(u=_)}return{...r,functions:l,workspaces:c,activeWorkspaceId:u??r.activeWorkspaceId}})}function M1({uiLang:t="en",onImportXlsx:s,sheets:r,activeSheet:i,onChangeSheet:l,onImportNamedFns:c,onExportNamedFns:u}){const h=ve.useMemo(()=>Yr(t),[t]),f=ve.useRef(null),_=ve.useRef(null);return V.jsx("div",{className:"py-1",children:V.jsxs("div",{className:"h-[36px] flex items-stretch px-2 overflow-hidden",children:[V.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:[V.jsx("input",{ref:f,type:"file",accept:".xlsx",onChange:T=>{const g=T.target.files?.[0];g&&(s?.(g),T.currentTarget.value="")},className:"hidden"}),V.jsx(Pr,{onClick:()=>f.current?.click(),title:h("TOOLTIP_IMPORT_XLSX"),className:"shrink-0",children:h("IMPORT_XLSX")}),r&&r.length>0&&V.jsx("select",{value:i??0,onChange:T=>l?.(Number(T.target.value)),className:"h-[28px] px-2 text-sm rounded border bg-white shrink-0",title:h("TOOLTIP_SHEET_SWITCH"),children:r.map((T,g)=>V.jsx("option",{value:g,children:T},T+g))})]}),V.jsx(Ih,{}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("input",{ref:_,type:"file",accept:".json,application/json",className:"hidden",onChange:T=>{const g=T.target.files?.[0];g&&(c?.(g),T.currentTarget.value="")}}),V.jsx(Pr,{onClick:()=>_.current?.click(),disabled:!c,title:h("TOOLTIP_IMPORT_NAMED_FNS"),children:h("IMPORT_NAMED_FNS")}),V.jsx(Pr,{onClick:u,disabled:!u,title:h("TOOLTIP_EXPORT_NAMED_FNS"),children:h("EXPORT_NAMED_FNS")})]})]})})}function D1(t){const s=t.size??28;return V.jsxs("svg",{width:s,height:s,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t.className,children:[V.jsx("rect",{x:"6",y:"12",width:"20",height:"14",rx:"2",fill:"#4ade80",stroke:"#16a34a",strokeWidth:"1.5"}),V.jsx("rect",{x:"8",y:"6",width:"16",height:"10",rx:"2",fill:"#4ade80",stroke:"#16a34a",strokeWidth:"1.5"}),V.jsx("circle",{cx:"13",cy:"10",r:"2.5",fill:"white",stroke:"#16a34a",strokeWidth:"1"}),V.jsx("circle",{cx:"19",cy:"10",r:"2.5",fill:"white",stroke:"#16a34a",strokeWidth:"1"}),V.jsx("circle",{cx:"13",cy:"10",r:"1",fill:"#16a34a"}),V.jsx("circle",{cx:"19",cy:"10",r:"1",fill:"#16a34a"}),V.jsx("path",{d:"M 14 14 Q 16 15 18 14",stroke:"#16a34a",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),V.jsx("rect",{x:"8",y:"24",width:"5",height:"4",rx:"1",fill:"#4ade80",stroke:"#16a34a",strokeWidth:"1"}),V.jsx("rect",{x:"19",y:"24",width:"5",height:"4",rx:"1",fill:"#4ade80",stroke:"#16a34a",strokeWidth:"1"})]})}function P1(t){const s=Yr(t.uiLang);return t.open?V.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[9999]",children:V.jsxs("div",{className:"bg-white rounded-xl w-[640px] max-w-[90vw] p-4",children:[V.jsx("div",{className:"text-lg font-semibold mb-2",children:s(tt.PASTE_FORMULA)}),V.jsx("textarea",{className:"w-full h-32 border rounded p-2 font-mono",value:t.text,onChange:r=>t.setText(r.target.value),placeholder:s(tt.FORMULA_PLACEHOLDER)}),V.jsxs("div",{className:"flex gap-2 justify-end mt-3",children:[V.jsx("button",{className:"px-3 py-1 rounded border",onClick:t.onClose,children:s(tt.CANCEL)}),V.jsx("button",{className:"px-3 py-1 rounded bg-emerald-600 text-white",onClick:()=>{const r=t.text.trim();r&&t.onSubmit(r)},children:s(tt.BLOCKIFY)})]})]})}):null}function SF({selectedTab:t,onTabChange:s,onBlockClick:r,uiLang:i,onUiLangChange:l,onWorkspaceApi:c,focusOn:u,pathOn:h,onToggleFocus:f,onTogglePath:_,namedFns:T=[],workspaces:g=[],activeWorkspaceId:E="ws_main",onCreateNamedFn:S,onDuplicateNamedFn:R,onDeleteNamedFn:L,onRenameNamedFn:x,onUpdateNamedFnMeta:v,onImportXlsx:A,sheets:m,activeSheet:y,onChangeSheet:H,onImportNamedFns:G,onExportNamedFns:k}){const F=c?.current,B=()=>c&&typeof c=="object"&&"current"in c?c.current:c,[re,ne]=ve.useState(""),ee=ve.useRef(null),me=Yr(i),we=ve.useMemo(()=>{const fe=[{id:"file",label:me("TAB_FILE"),icon:O1},{id:"functions",label:me(tt.FUNCTIONS),icon:L1},{id:"named",label:i==="ja"?me("TAB_NAMED_FUNCTIONS"):"Named",icon:R1},{id:"view",label:me("VIEW"),icon:I1}];return(T?.length??0)>0||!!S||!!B()?.insertFnCall?fe:fe.filter(Me=>Me.id!=="named")},[i,T,S]),[Oe,ke]=ve.useState(!1),[ye,Re]=ve.useState(""),K=ve.useRef(!1);ve.useState(null);const[,z]=ve.useState(null),[oe,M]=ve.useState({}),[Z,J]=ve.useState("");ve.useEffect(()=>{let fe=!1;return J(""),(async()=>{try{const He=await uF(i);fe||M(He)}catch(He){fe||M({}),fe||J(String(He?.message??He??"fn_text load error"))}})(),()=>{fe=!0}},[i]),ve.useEffect(()=>{const fe=()=>{K.current=!0},He=()=>{K.current=!1};return window.addEventListener("compositionstart",fe,!0),window.addEventListener("compositionend",He,!0),()=>{window.removeEventListener("compositionstart",fe,!0),window.removeEventListener("compositionend",He,!0)}},[]),ve.useEffect(()=>{const fe=Me=>{const Ze=ee.current;Ze&&(Me?.clear&&ne(""),Ze.focus(),Me?.selectAll&&requestAnimationFrame(()=>Ze.select()))},He=Me=>{if((Me.ctrlKey||Me.metaKey)&&!Me.altKey){const Bt=Me.key.toLowerCase();if(Bt==="k"){Me.preventDefault(),fe({clear:!0,selectAll:!0});return}if(Bt==="f"){Me.preventDefault(),fe({clear:!1,selectAll:!0});return}}const Ze=Me.target,Ce=Ze?.tagName?.toLowerCase();if(!(Ce==="input"||Ce==="textarea"||Ce==="select"||Ze?.isContentEditable)){if(Me.key==="Escape"){ne("");return}if(!Me.ctrlKey&&!Me.metaKey&&!Me.altKey&&Me.key.length===1){ee.current?.focus(),Me.preventDefault();return}if(Me.key==="/"){ee.current?.focus(),Me.preventDefault();return}}};return window.addEventListener("keydown",He,{capture:!0}),()=>window.removeEventListener("keydown",He,{capture:!0})},[]);const[q,he]=ve.useState(null),xe=ve.useMemo(()=>{const fe=new Map;for(const He of T)fe.set(He.id,He.description??"");return fe},[T]),Pe=ve.useMemo(()=>{if(!q)return null;const[fe,He]=q.split(":");if(fe==="excel"){const Me=He.toUpperCase();return oe[Me]??(i==="ja"?"":"(description coming soon)")}return fe==="named"?(xe.get(He)??"")||(i==="ja"?"":"(no description)"):null},[q,oe,i,xe]);ve.useEffect(()=>{const fe=He=>{if(He.ctrlKey||He.metaKey||He.altKey)return;const Me=He.target,Ze=Me?.tagName?.toLowerCase();if(!(Ze==="input"||Ze==="textarea"||Ze==="select"||Me?.isContentEditable)){if(He.key==="Escape"){ne("");return}if(He.key.length===1){ee.current?.focus(),He.preventDefault();return}}};return window.addEventListener("keydown",fe,{capture:!0}),()=>window.removeEventListener("keydown",fe,{capture:!0})},[]);const be="rounded border text-sm font-medium transition select-none",ce=`${be} px-3 py-1
   bg-emerald-50 text-emerald-700 border-emerald-200
   hover:bg-emerald-100`,et=`${be} px-2 py-1
   bg-emerald-50 text-emerald-700 border-emerald-200
   hover:bg-emerald-100`,N=fe=>[be,"px-3 py-1",fe?"bg-emerald-500 text-white border-emerald-600 hover:bg-emerald-600":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100"].join(" ");return V.jsxs("div",{className:"bg-gradient-to-b from-emerald-600 to-emerald-700 border-b shadow-md",children:[V.jsxs("div",{className:"px-4 py-3 border-b border-emerald-800 flex items-center gap-3",children:[V.jsx(D1,{}),V.jsxs("div",{children:[V.jsx("h1",{className:"text-white text-xl",children:"Frockly"}),V.jsx("p",{className:"text-emerald-100 text-xs",children:"Formula Renderer with Blockly"})]}),V.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[V.jsxs("select",{className:`\r
              text-xs\r
              border border-emerald-300/40\r
              bg-emerald-700\r
              text-white\r
              rounded\r
              px-2 py-1\r
              focus:text-emerald-900\r
              focus:bg-white\r
            `,value:i,onChange:fe=>l(fe.target.value),children:[V.jsx("option",{value:"ja",children:"JP"}),V.jsx("option",{value:"en",children:"EN"})]}),V.jsxs("div",{className:"flex items-center gap-1 bg-white rounded px-2 py-1 shadow-sm",children:[V.jsx(S1,{className:"w-4 h-4 text-gray-500"}),V.jsx("input",{ref:ee,type:"text",value:re,onChange:fe=>ne(fe.target.value),onKeyDown:fe=>{fe.key==="Enter"&&fe.preventDefault()},placeholder:me(tt.SEARCH),className:"text-xs outline-none w-64"})]})]})]}),V.jsx("div",{className:"flex gap-1 px-2 py-2",children:we.map(fe=>{const He=fe.icon,Me=t===fe.id;return V.jsxs("button",{onClick:()=>s(fe.id),className:`flex items-center gap-2 px-4 py-2 rounded-t transition-colors
                ${Me?"bg-white text-emerald-700 shadow-md":"bg-emerald-500 text-white hover:bg-emerald-400"}`,children:[V.jsx(He,{className:"w-4 h-4"}),fe.label]},fe.id)})}),V.jsxs("div",{className:"px-4 pb-2 flex items-center gap-3",children:[V.jsx("button",{className:`\r
            flex items-center gap-2\r
            px-4 py-1.5\r
            rounded-lg\r
            bg-emerald-100\r
            border-2 border-emerald-400\r
            text-emerald-800\r
            shadow-sm\r
            hover:bg-emerald-200\r
            transition\r
          `,onClick:()=>{Re(""),ke(!0)},children:me(tt.IMPORT_FROM_FORMULA)}),V.jsx("div",{className:`\r
            flex-1 min-w-0\r
            rounded-lg\r
            border border-emerald-200\r
            bg-emerald-50\r
            px-3 py-1.5\r
            text-xs text-emerald-900\r
            overflow-hidden whitespace-nowrap text-ellipsis\r
          `,children:Z?"fn_text load failed":Pe||(i==="ja"?"":"Hover a function to see a short description.")})]}),V.jsx(P1,{open:Oe,uiLang:i,text:ye,setText:Re,onClose:()=>ke(!1),onSubmit:fe=>{const He=B()?.insertFromFormula;if(!He){alert(me(tt.IMPORT_API_NOT_READY));return}try{He(fe),ke(!1)}catch(Me){console.error("[IMPORT] insertFromFormula crashed",Me),alert(me(tt.IMPORT_FAILED))}}}),V.jsx("div",{className:"bg-white px-4 py-2 border-b border-gray-200",children:V.jsx("div",{className:"mt-2",children:t==="file"?V.jsx(M1,{onImportXlsx:A,onImportNamedFns:G,onExportNamedFns:k,sheets:m,activeSheet:y,onChangeSheet:H}):t==="functions"?V.jsx(x1,{search:re,uiLang:i,onBlockClick:r,onHoverFn:he,onSelectFn:fe=>z(fe)}):t==="named"?V.jsx(N1,{uiLang:i,search:re,onUpdateFnMeta:v,onHoverNamed:he,onInsertCurrentParam:()=>F?.insertBlock?.("fn_param"),fns:T,workspaces:g,activeWorkspaceId:E,onCreateFn:()=>{const{fnId:fe,wsId:He}=Km("A",[]);return{fnId:fe,wsId:He}},onDuplicateFn:fe=>R?.(fe),onDeleteFn:fe=>L?.(fe),onRenameFn:(fe,He)=>x?.(fe,He),onSwitchWorkspace:fe=>{const He=B()?.switchWorkspace;if(!He){alert("switchWorkspace API not ready");return}He(fe)},onInsertCurrent:fe=>{const He=B()?.insertFnCall;if(!He){alert("insertFnCall API not ready");return}He(fe)},onInsertToMain:fe=>{const He=B()?.insertFnToMain;if(!He){alert("insertFnToMain API not ready");return}He(fe)}}):V.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[V.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[V.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:me("EXPAND")}),V.jsx("button",{className:ce,onClick:()=>F?.view?.collapseAll?.(),children:me("COLLAPSE")}),V.jsx("button",{className:ce,onClick:()=>F?.view?.expandAll?.(),children:i==="ja"?"":me("EXPAND")}),V.jsx("button",{className:et,onClick:()=>F?.view?.expandStep?.(-1),children:""}),V.jsx("button",{className:et,onClick:()=>F?.view?.expandStep?.(1),children:""})]}),V.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[V.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:me("FOCUS")}),V.jsx("button",{className:N(u),onClick:f,children:me(u?"ON":"OFF")}),V.jsx("button",{className:ce,onClick:()=>F?.view?.focusStep?.(-1),children:""}),V.jsx("button",{className:ce,onClick:()=>F?.view?.focusStep?.(1),children:""})]}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:me("PATH")}),V.jsx("button",{className:N(h),onClick:_,children:me(h?"ON":"OFF")}),V.jsx("button",{className:ce,onClick:()=>F?.view?.pathStep?.(-1),children:""}),V.jsx("button",{className:ce,onClick:()=>F?.view?.pathStep?.(1),children:""})]})]})})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var F1=1252,RF=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],cI={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},uI=function(t){RF.indexOf(t)!=-1&&(F1=cI[0]=t)};function LF(){uI(1252)}var Ds=function(t){uI(t)};function B1(){Ds(1200),LF()}function kC(t){for(var s=[],r=0,i=t.length;r<i;++r)s[r]=t.charCodeAt(r);return s}function AF(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return s.join("")}function U1(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return s.join("")}var wu=function(t){var s=t.charCodeAt(0),r=t.charCodeAt(1);return s==255&&r==254?AF(t.slice(2)):s==254&&r==255?U1(t.slice(2)):s==65279?t.slice(1):t},Jf=function(s){return String.fromCharCode(s)},wC=function(s){return String.fromCharCode(s)},Oh,Ao="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function MC(t){for(var s="",r=0,i=0,l=0,c=0,u=0,h=0,f=0,_=0;_<t.length;)r=t.charCodeAt(_++),c=r>>2,i=t.charCodeAt(_++),u=(r&3)<<4|i>>4,l=t.charCodeAt(_++),h=(i&15)<<2|l>>6,f=l&63,isNaN(i)?h=f=64:isNaN(l)&&(f=64),s+=Ao.charAt(c)+Ao.charAt(u)+Ao.charAt(h)+Ao.charAt(f);return s}function Zn(t){var s="",r=0,i=0,l=0,c=0,u=0,h=0,f=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var _=0;_<t.length;)c=Ao.indexOf(t.charAt(_++)),u=Ao.indexOf(t.charAt(_++)),r=c<<2|u>>4,s+=String.fromCharCode(r),h=Ao.indexOf(t.charAt(_++)),i=(u&15)<<4|h>>2,h!==64&&(s+=String.fromCharCode(i)),f=Ao.indexOf(t.charAt(_++)),l=(h&3)<<6|f,f!==64&&(s+=String.fromCharCode(l));return s}var pt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Gl=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,r){return r?new Buffer(s,r):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}}();function Uo(t){return pt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function DC(t){return pt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var ws=function(s){return pt?Gl(s,"binary"):s.split("").map(function(r){return r.charCodeAt(0)&255})};function Vl(t){if(Array.isArray(t))return t.map(function(i){return String.fromCharCode(i)}).join("");for(var s=[],r=0;r<t.length;++r)s[r]=String.fromCharCode(t[r]);return s.join("")}function hI(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return hI(new Uint8Array(t));for(var s=new Array(t.length),r=0;r<t.length;++r)s[r]=t[r];return s}var So=pt?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:Gl(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,r=0;for(s=0;s<t.length;++s)r+=t[s].length;var i=new Uint8Array(r),l=0;for(s=0,r=0;s<t.length;r+=l,++s)if(l=t[s].length,t[s]instanceof Uint8Array)i.set(t[s],r);else{if(typeof t[s]=="string")throw"wtf";i.set(new Uint8Array(t[s]),r)}return i}return[].concat.apply([],t.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function vF(t){for(var s=[],r=0,i=t.length+250,l=Uo(t.length+255),c=0;c<t.length;++c){var u=t.charCodeAt(c);if(u<128)l[r++]=u;else if(u<2048)l[r++]=192|u>>6&31,l[r++]=128|u&63;else if(u>=55296&&u<57344){u=(u&1023)+64;var h=t.charCodeAt(++c)&1023;l[r++]=240|u>>8&7,l[r++]=128|u>>2&63,l[r++]=128|h>>6&15|(u&3)<<4,l[r++]=128|h&63}else l[r++]=224|u>>12&15,l[r++]=128|u>>6&63,l[r++]=128|u&63;r>i&&(s.push(l.slice(0,r)),r=0,l=Uo(65535),i=65530)}return s.push(l.slice(0,r)),So(s)}var Sn=/\u0000/g,Mu=/[\u0001-\u0006]/g;function ic(t){for(var s="",r=t.length-1;r>=0;)s+=t.charAt(r--);return s}function Ps(t,s){var r=""+t;return r.length>=s?r:ur("0",s-r.length)+r}function dI(t,s){var r=""+t;return r.length>=s?r:ur(" ",s-r.length)+r}function X_(t,s){var r=""+t;return r.length>=s?r:r+ur(" ",s-r.length)}function CF(t,s){var r=""+Math.round(t);return r.length>=s?r:ur("0",s-r.length)+r}function xF(t,s){var r=""+t;return r.length>=s?r:ur("0",s-r.length)+r}var PC=Math.pow(2,32);function Ma(t,s){if(t>PC||t<-PC)return CF(t,s);var r=Math.round(t);return xF(r,s)}function j_(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var FC=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],M0=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function NF(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var dt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},BC={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},bF={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function z_(t,s,r){for(var i=t<0?-1:1,l=t*i,c=0,u=1,h=0,f=1,_=0,T=0,g=Math.floor(l);_<s&&(g=Math.floor(l),h=g*u+c,T=g*_+f,!(l-g<5e-8));)l=1/(l-g),c=u,u=h,f=_,_=T;if(T>s&&(_>s?(T=f,h=c):(T=_,h=u)),!r)return[0,i*h,T];var E=Math.floor(i*h/T);return[E,i*h-E*T,T]}function Rl(t,s,r){if(t>2958465||t<0)return null;var i=t|0,l=Math.floor(86400*(t-i)),c=0,u=[],h={D:i,T:l,u:86400*(t-i)-l,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(h.u)<1e-6&&(h.u=0),s&&s.date1904&&(i+=1462),h.u>.9999&&(h.u=0,++l==86400&&(h.T=l=0,++i,++h.D)),i===60)u=r?[1317,10,29]:[1900,2,29],c=3;else if(i===0)u=r?[1317,8,29]:[1900,1,0],c=6;else{i>60&&--i;var f=new Date(1900,0,1);f.setDate(f.getDate()+i-1),u=[f.getFullYear(),f.getMonth()+1,f.getDate()],c=f.getDay(),i<60&&(c=(c+6)%7),r&&(c=PF(f,u))}return h.y=u[0],h.m=u[1],h.d=u[2],h.S=l%60,l=Math.floor(l/60),h.M=l%60,l=Math.floor(l/60),h.H=l,h.q=c,h}var H1=new Date(1899,11,31,0,0,0),yF=H1.getTime(),kF=new Date(1900,2,1,0,0,0);function G1(t,s){var r=t.getTime();return s?r-=1461*24*60*60*1e3:t>=kF&&(r+=24*60*60*1e3),(r-(yF+(t.getTimezoneOffset()-H1.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function fI(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function wF(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function MF(t){var s=t<0?12:11,r=fI(t.toFixed(12));return r.length<=s||(r=t.toPrecision(10),r.length<=s)?r:t.toExponential(5)}function DF(t){var s=fI(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function Sh(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return s>=-4&&s<=-1?r=t.toPrecision(10+s):Math.abs(s)<=9?r=MF(t):s===10?r=t.toFixed(10).substr(0,12):r=DF(t),fI(wF(r.toUpperCase()))}function Ml(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):Sh(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return ms(14,G1(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function PF(t,s){s[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function FF(t,s,r,i){var l="",c=0,u=0,h=r.y,f,_=0;switch(t){case 98:h=r.y+543;case 121:switch(s.length){case 1:case 2:f=h%100,_=2;break;default:f=h%1e4,_=4;break}break;case 109:switch(s.length){case 1:case 2:f=r.m,_=s.length;break;case 3:return M0[r.m-1][1];case 5:return M0[r.m-1][0];default:return M0[r.m-1][2]}break;case 100:switch(s.length){case 1:case 2:f=r.d,_=s.length;break;case 3:return FC[r.q][0];default:return FC[r.q][1]}break;case 104:switch(s.length){case 1:case 2:f=1+(r.H+11)%12,_=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:f=r.H,_=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:f=r.M,_=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return r.u===0&&(s=="s"||s=="ss")?Ps(r.S,s.length):(i>=2?u=i===3?1e3:100:u=i===1?10:1,c=Math.round(u*(r.S+r.u)),c>=60*u&&(c=0),s==="s"?c===0?"0":""+c/u:(l=Ps(c,2+i),s==="ss"?l.substr(0,2):"."+l.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":f=r.D*24+r.H;break;case"[m]":case"[mm]":f=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":f=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+s}_=s.length===3?1:2;break;case 101:f=h,_=1;break}var T=_>0?Ps(f,_):"";return T}function vo(t){var s=3;if(t.length<=s)return t;for(var r=t.length%s,i=t.substr(0,r);r!=t.length;r+=s)i+=(i.length>0?",":"")+t.substr(r,s);return i}var V1=/%/g;function BF(t,s,r){var i=s.replace(V1,""),l=s.length-i.length;return Hi(t,i,r*Math.pow(10,2*l))+ur("%",l)}function UF(t,s,r){for(var i=s.length-1;s.charCodeAt(i-1)===44;)--i;return Hi(t,s.substr(0,i),r/Math.pow(10,3*(s.length-i)))}function W1(t,s){var r,i=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+W1(t,-s);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var c=Math.floor(Math.log(s)*Math.LOG10E)%l;if(c<0&&(c+=l),r=(s/Math.pow(10,c)).toPrecision(i+1+(l+c)%l),r.indexOf("e")===-1){var u=Math.floor(Math.log(s)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(u-r.length+c):r+="E+"+(u-c);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,l)+"."+r.substr(2+l),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,f,_,T){return f+_+T.substr(0,(l+c)%l)+"."+T.substr(c)+"E"})}else r=s.toExponential(i);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var X1=/# (\?+)( ?)\/( ?)(\d+)/;function HF(t,s,r){var i=parseInt(t[4],10),l=Math.round(s*i),c=Math.floor(l/i),u=l-c*i,h=i;return r+(c===0?"":""+c)+" "+(u===0?ur(" ",t[1].length+1+t[4].length):dI(u,t[1].length)+t[2]+"/"+t[3]+Ps(h,t[4].length))}function GF(t,s,r){return r+(s===0?"":""+s)+ur(" ",t[1].length+2+t[4].length)}var j1=/^#*0*\.([0#]+)/,z1=/\).*[0#]/,Y1=/\(###\) ###\\?-####/;function mn(t){for(var s="",r,i=0;i!=t.length;++i)switch(r=t.charCodeAt(i)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(r)}return s}function UC(t,s){var r=Math.pow(10,s);return""+Math.round(t*r)/r}function HC(t,s){var r=t-Math.floor(t),i=Math.pow(10,s);return s<(""+Math.round(r*i)).length?0:Math.round(r*i)}function VF(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function WF(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function us(t,s,r){if(t.charCodeAt(0)===40&&!s.match(z1)){var i=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?us("n",i,r):"("+us("n",i,-r)+")"}if(s.charCodeAt(s.length-1)===44)return UF(t,s,r);if(s.indexOf("%")!==-1)return BF(t,s,r);if(s.indexOf("E")!==-1)return W1(s,r);if(s.charCodeAt(0)===36)return"$"+us(t,s.substr(s.charAt(1)==" "?2:1),r);var l,c,u,h,f=Math.abs(r),_=r<0?"-":"";if(s.match(/^00+$/))return _+Ma(f,s.length);if(s.match(/^[#?]+$/))return l=Ma(r,0),l==="0"&&(l=""),l.length>s.length?l:mn(s.substr(0,s.length-l.length))+l;if(c=s.match(X1))return HF(c,f,_);if(s.match(/^#+0+$/))return _+Ma(f,s.length-s.indexOf("0"));if(c=s.match(j1))return l=UC(r,c[1].length).replace(/^([^\.]+)$/,"$1."+mn(c[1])).replace(/\.$/,"."+mn(c[1])).replace(/\.(\d*)$/,function(R,L){return"."+L+ur("0",mn(c[1]).length-L.length)}),s.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),c=s.match(/^(0*)\.(#*)$/))return _+UC(f,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=s.match(/^#{1,3},##0(\.?)$/))return _+vo(Ma(f,0));if(c=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+us(t,s,-r):vo(""+(Math.floor(r)+VF(r,c[1].length)))+"."+Ps(HC(r,c[1].length),c[1].length);if(c=s.match(/^#,#*,#0/))return us(t,s.replace(/^#,#*,/,""),r);if(c=s.match(/^([0#]+)(\\?-([0#]+))+$/))return l=ic(us(t,s.replace(/[\\-]/g,""),r)),u=0,ic(ic(s.replace(/\\/g,"")).replace(/[0#]/g,function(R){return u<l.length?l.charAt(u++):R==="0"?"0":""}));if(s.match(Y1))return l=us(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var T="";if(c=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(c[4].length,7),h=z_(f,Math.pow(10,u)-1,!1),l=""+_,T=Hi("n",c[1],h[1]),T.charAt(T.length-1)==" "&&(T=T.substr(0,T.length-1)+"0"),l+=T+c[2]+"/"+c[3],T=X_(h[2],u),T.length<c[4].length&&(T=mn(c[4].substr(c[4].length-T.length))+T),l+=T,l;if(c=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(c[1].length,c[4].length),7),h=z_(f,Math.pow(10,u)-1,!0),_+(h[0]||(h[1]?"":"0"))+" "+(h[1]?dI(h[1],u)+c[2]+"/"+c[3]+X_(h[2],u):ur(" ",2*u+1+c[2].length+c[3].length));if(c=s.match(/^[#0?]+$/))return l=Ma(r,0),s.length<=l.length?l:mn(s.substr(0,s.length-l.length))+l;if(c=s.match(/^([#0?]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),u=l.indexOf(".");var g=s.indexOf(".")-u,E=s.length-l.length-g;return mn(s.substr(0,g)+l+s.substr(s.length-E))}if(c=s.match(/^00,000\.([#0]*0)$/))return u=HC(r,c[1].length),r<0?"-"+us(t,s,-r):vo(WF(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?Ps(0,3-R.length):"")+R})+"."+Ps(u,c[1].length);switch(s){case"###,##0.00":return us(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var S=vo(Ma(f,0));return S!=="0"?_+S:"";case"###,###.00":return us(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return us(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function XF(t,s,r){for(var i=s.length-1;s.charCodeAt(i-1)===44;)--i;return Hi(t,s.substr(0,i),r/Math.pow(10,3*(s.length-i)))}function jF(t,s,r){var i=s.replace(V1,""),l=s.length-i.length;return Hi(t,i,r*Math.pow(10,2*l))+ur("%",l)}function K1(t,s){var r,i=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+K1(t,-s);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var c=Math.floor(Math.log(s)*Math.LOG10E)%l;if(c<0&&(c+=l),r=(s/Math.pow(10,c)).toPrecision(i+1+(l+c)%l),!r.match(/[Ee]/)){var u=Math.floor(Math.log(s)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(u-r.length+c):r+="E+"+(u-c),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,f,_,T){return f+_+T.substr(0,(l+c)%l)+"."+T.substr(c)+"E"})}else r=s.toExponential(i);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function hi(t,s,r){if(t.charCodeAt(0)===40&&!s.match(z1)){var i=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?hi("n",i,r):"("+hi("n",i,-r)+")"}if(s.charCodeAt(s.length-1)===44)return XF(t,s,r);if(s.indexOf("%")!==-1)return jF(t,s,r);if(s.indexOf("E")!==-1)return K1(s,r);if(s.charCodeAt(0)===36)return"$"+hi(t,s.substr(s.charAt(1)==" "?2:1),r);var l,c,u,h,f=Math.abs(r),_=r<0?"-":"";if(s.match(/^00+$/))return _+Ps(f,s.length);if(s.match(/^[#?]+$/))return l=""+r,r===0&&(l=""),l.length>s.length?l:mn(s.substr(0,s.length-l.length))+l;if(c=s.match(X1))return GF(c,f,_);if(s.match(/^#+0+$/))return _+Ps(f,s.length-s.indexOf("0"));if(c=s.match(j1))return l=(""+r).replace(/^([^\.]+)$/,"$1."+mn(c[1])).replace(/\.$/,"."+mn(c[1])),l=l.replace(/\.(\d*)$/,function(R,L){return"."+L+ur("0",mn(c[1]).length-L.length)}),s.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),c=s.match(/^(0*)\.(#*)$/))return _+(""+f).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=s.match(/^#{1,3},##0(\.?)$/))return _+vo(""+f);if(c=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+hi(t,s,-r):vo(""+r)+"."+ur("0",c[1].length);if(c=s.match(/^#,#*,#0/))return hi(t,s.replace(/^#,#*,/,""),r);if(c=s.match(/^([0#]+)(\\?-([0#]+))+$/))return l=ic(hi(t,s.replace(/[\\-]/g,""),r)),u=0,ic(ic(s.replace(/\\/g,"")).replace(/[0#]/g,function(R){return u<l.length?l.charAt(u++):R==="0"?"0":""}));if(s.match(Y1))return l=hi(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var T="";if(c=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(c[4].length,7),h=z_(f,Math.pow(10,u)-1,!1),l=""+_,T=Hi("n",c[1],h[1]),T.charAt(T.length-1)==" "&&(T=T.substr(0,T.length-1)+"0"),l+=T+c[2]+"/"+c[3],T=X_(h[2],u),T.length<c[4].length&&(T=mn(c[4].substr(c[4].length-T.length))+T),l+=T,l;if(c=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(c[1].length,c[4].length),7),h=z_(f,Math.pow(10,u)-1,!0),_+(h[0]||(h[1]?"":"0"))+" "+(h[1]?dI(h[1],u)+c[2]+"/"+c[3]+X_(h[2],u):ur(" ",2*u+1+c[2].length+c[3].length));if(c=s.match(/^[#0?]+$/))return l=""+r,s.length<=l.length?l:mn(s.substr(0,s.length-l.length))+l;if(c=s.match(/^([#0]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),u=l.indexOf(".");var g=s.indexOf(".")-u,E=s.length-l.length-g;return mn(s.substr(0,g)+l+s.substr(s.length-E))}if(c=s.match(/^00,000\.([#0]*0)$/))return r<0?"-"+hi(t,s,-r):vo(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?Ps(0,3-R.length):"")+R})+"."+Ps(0,c[1].length);switch(s){case"###,###":case"##,###":case"#,###":var S=vo(""+f);return S!=="0"?_+S:"";default:if(s.match(/\.[0#?]*$/))return hi(t,s.slice(0,s.lastIndexOf(".")),r)+mn(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Hi(t,s,r){return(r|0)===r?hi(t,s,r):us(t,s,r)}function zF(t){for(var s=[],r=!1,i=0,l=0;i<t.length;++i)switch(t.charCodeAt(i)){case 34:r=!r;break;case 95:case 42:case 92:++i;break;case 59:s[s.length]=t.substr(l,i-l),l=i+1}if(s[s.length]=t.substr(l),r===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var J1=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Lc(t){for(var s=0,r="",i="";s<t.length;)switch(r=t.charAt(s)){case"G":j_(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(i=r;t.charAt(s++)!=="]"&&s<t.length;)i+=t.charAt(s);if(i.match(J1))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++s))>-1||r=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===r;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function YF(t,s,r,i){for(var l=[],c="",u=0,h="",f="t",_,T,g,E="H";u<t.length;)switch(h=t.charAt(u)){case"G":if(!j_(t,u))throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"G",v:"General"},u+=7;break;case'"':for(c="";(g=t.charCodeAt(++u))!==34&&u<t.length;)c+=String.fromCharCode(g);l[l.length]={t:"t",v:c},++u;break;case"\\":var S=t.charAt(++u),R=S==="("||S===")"?S:"t";l[l.length]={t:R,v:S},++u;break;case"_":l[l.length]={t:"t",v:" "},u+=2;break;case"@":l[l.length]={t:"T",v:s},++u;break;case"B":case"b":if(t.charAt(u+1)==="1"||t.charAt(u+1)==="2"){if(_==null&&(_=Rl(s,r,t.charAt(u+1)==="2"),_==null))return"";l[l.length]={t:"X",v:t.substr(u,2)},f=h,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||_==null&&(_=Rl(s,r),_==null))return"";for(c=h;++u<t.length&&t.charAt(u).toLowerCase()===h;)c+=h;h==="m"&&f.toLowerCase()==="h"&&(h="M"),h==="h"&&(h=E),l[l.length]={t:h,v:c},f=h;break;case"A":case"a":case"":var L={t:h,v:h};if(_==null&&(_=Rl(s,r)),t.substr(u,3).toUpperCase()==="A/P"?(_!=null&&(L.v=_.H>=12?"P":"A"),L.t="T",E="h",u+=3):t.substr(u,5).toUpperCase()==="AM/PM"?(_!=null&&(L.v=_.H>=12?"PM":"AM"),L.t="T",u+=5,E="h"):t.substr(u,5).toUpperCase()==="/"?(_!=null&&(L.v=_.H>=12?"":""),L.t="T",u+=5,E="h"):(L.t="t",++u),_==null&&L.t==="T")return"";l[l.length]=L,f=h;break;case"[":for(c=h;t.charAt(u++)!=="]"&&u<t.length;)c+=t.charAt(u);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(J1)){if(_==null&&(_=Rl(s,r),_==null))return"";l[l.length]={t:"Z",v:c.toLowerCase()},f=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",Lc(t)||(l[l.length]={t:"t",v:c}));break;case".":if(_!=null){for(c=h;++u<t.length&&(h=t.charAt(u))==="0";)c+=h;l[l.length]={t:"s",v:c};break}case"0":case"#":for(c=h;++u<t.length&&"0#?.,E+-%".indexOf(h=t.charAt(u))>-1;)c+=h;l[l.length]={t:"n",v:c};break;case"?":for(c=h;t.charAt(++u)===h;)c+=h;l[l.length]={t:h,v:c},f=h;break;case"*":++u,(t.charAt(u)==" "||t.charAt(u)=="*")&&++u;break;case"(":case")":l[l.length]={t:i===1?"t":h,v:h},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=h;u<t.length&&"0123456789".indexOf(t.charAt(++u))>-1;)c+=t.charAt(u);l[l.length]={t:"D",v:c};break;case" ":l[l.length]={t:h,v:h},++u;break;case"$":l[l.length]={t:"t",v:"$"},++u;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(h)===-1)throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"t",v:h},++u;break}var x=0,v=0,A;for(u=l.length-1,f="t";u>=0;--u)switch(l[u].t){case"h":case"H":l[u].t=E,f="h",x<1&&(x=1);break;case"s":(A=l[u].v.match(/\.0+$/))&&(v=Math.max(v,A[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":f=l[u].t;break;case"m":f==="s"&&(l[u].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&l[u].v.match(/[Hh]/)&&(x=1),x<2&&l[u].v.match(/[Mm]/)&&(x=2),x<3&&l[u].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:_.u>=.5&&(_.u=0,++_.S),_.S>=60&&(_.S=0,++_.M),_.M>=60&&(_.M=0,++_.H);break;case 2:_.u>=.5&&(_.u=0,++_.S),_.S>=60&&(_.S=0,++_.M);break}var m="",y;for(u=0;u<l.length;++u)switch(l[u].t){case"t":case"T":case" ":case"D":break;case"X":l[u].v="",l[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":l[u].v=FF(l[u].t.charCodeAt(0),l[u].v,_,v),l[u].t="t";break;case"n":case"?":for(y=u+1;l[y]!=null&&((h=l[y].t)==="?"||h==="D"||(h===" "||h==="t")&&l[y+1]!=null&&(l[y+1].t==="?"||l[y+1].t==="t"&&l[y+1].v==="/")||l[u].t==="("&&(h===" "||h==="n"||h===")")||h==="t"&&(l[y].v==="/"||l[y].v===" "&&l[y+1]!=null&&l[y+1].t=="?"));)l[u].v+=l[y].v,l[y]={v:"",t:";"},++y;m+=l[u].v,u=y-1;break;case"G":l[u].t="t",l[u].v=Ml(s,r);break}var H="",G,k;if(m.length>0){m.charCodeAt(0)==40?(G=s<0&&m.charCodeAt(0)===45?-s:s,k=Hi("n",m,G)):(G=s<0&&i>1?-s:s,k=Hi("n",m,G),G<0&&l[0]&&l[0].t=="t"&&(k=k.substr(1),l[0].v="-"+l[0].v)),y=k.length-1;var F=l.length;for(u=0;u<l.length;++u)if(l[u]!=null&&l[u].t!="t"&&l[u].v.indexOf(".")>-1){F=u;break}var B=l.length;if(F===l.length&&k.indexOf("E")===-1){for(u=l.length-1;u>=0;--u)l[u]==null||"n?".indexOf(l[u].t)===-1||(y>=l[u].v.length-1?(y-=l[u].v.length,l[u].v=k.substr(y+1,l[u].v.length)):y<0?l[u].v="":(l[u].v=k.substr(0,y+1),y=-1),l[u].t="t",B=u);y>=0&&B<l.length&&(l[B].v=k.substr(0,y+1)+l[B].v)}else if(F!==l.length&&k.indexOf("E")===-1){for(y=k.indexOf(".")-1,u=F;u>=0;--u)if(!(l[u]==null||"n?".indexOf(l[u].t)===-1)){for(T=l[u].v.indexOf(".")>-1&&u===F?l[u].v.indexOf(".")-1:l[u].v.length-1,H=l[u].v.substr(T+1);T>=0;--T)y>=0&&(l[u].v.charAt(T)==="0"||l[u].v.charAt(T)==="#")&&(H=k.charAt(y--)+H);l[u].v=H,l[u].t="t",B=u}for(y>=0&&B<l.length&&(l[B].v=k.substr(0,y+1)+l[B].v),y=k.indexOf(".")+1,u=F;u<l.length;++u)if(!(l[u]==null||"n?(".indexOf(l[u].t)===-1&&u!==F)){for(T=l[u].v.indexOf(".")>-1&&u===F?l[u].v.indexOf(".")+1:0,H=l[u].v.substr(0,T);T<l[u].v.length;++T)y<k.length&&(H+=k.charAt(y++));l[u].v=H,l[u].t="t",B=u}}}for(u=0;u<l.length;++u)l[u]!=null&&"n?".indexOf(l[u].t)>-1&&(G=i>1&&s<0&&u>0&&l[u-1].v==="-"?-s:s,l[u].v=Hi(l[u].t,l[u].v,G),l[u].t="t");var re="";for(u=0;u!==l.length;++u)l[u]!=null&&(re+=l[u].v);return re}var GC=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function VC(t,s){if(s==null)return!1;var r=parseFloat(s[2]);switch(s[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function KF(t,s){var r=zF(t),i=r.length,l=r[i-1].indexOf("@");if(i<4&&l>-1&&--i,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof s!="number")return[4,r.length===4||l>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=l>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=l>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=l>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var c=s>0?r[0]:s<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[i,c];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var u=r[0].match(GC),h=r[1].match(GC);return VC(s,u)?[i,r[0]]:VC(s,h)?[i,r[1]]:[i,r[u!=null&&h!=null?2:1]]}return[i,c]}function ms(t,s,r){r==null&&(r={});var i="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?i=r.dateNF:i=t;break;case"number":t==14&&r.dateNF?i=r.dateNF:i=(r.table!=null?r.table:dt)[t],i==null&&(i=r.table&&r.table[BC[t]]||dt[BC[t]]),i==null&&(i=bF[t]||"General");break}if(j_(i,0))return Ml(s,r);s instanceof Date&&(s=G1(s,r.date1904));var l=KF(i,s);if(j_(l[1]))return Ml(s,r);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return YF(l[1],s,r,l[0])}function Cl(t,s){if(typeof s!="number"){s=+s||-1;for(var r=0;r<392;++r){if(dt[r]==null){s<0&&(s=r);continue}if(dt[r]==t){s=r;break}}s<0&&(s=391)}return dt[s]=t,s}function q1(){dt=NF()}var JF={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},Z1=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function qF(t){var s=typeof t=="number"?dt[t]:t;return s=s.replace(Z1,"(\\d+)"),new RegExp("^"+s+"$")}function ZF(t,s,r){var i=-1,l=-1,c=-1,u=-1,h=-1,f=-1;(s.match(Z1)||[]).forEach(function(g,E){var S=parseInt(r[E+1],10);switch(g.toLowerCase().charAt(0)){case"y":i=S;break;case"d":c=S;break;case"h":u=S;break;case"s":f=S;break;case"m":u>=0?h=S:l=S;break}}),f>=0&&h==-1&&l>=0&&(h=l,l=-1);var _=(""+(i>=0?i:new Date().getFullYear())).slice(-4)+"-"+("00"+(l>=1?l:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);_.length==7&&(_="0"+_),_.length==8&&(_="20"+_);var T=("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2)+":"+("00"+(f>=0?f:0)).slice(-2);return u==-1&&h==-1&&f==-1?_:i==-1&&l==-1&&c==-1?T:_+"T"+T}var QF=function(){var t={};t.version="1.2.0";function s(){for(var k=0,F=new Array(256),B=0;B!=256;++B)k=B,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,k=k&1?-306674912^k>>>1:k>>>1,F[B]=k;return typeof Int32Array<"u"?new Int32Array(F):F}var r=s();function i(k){var F=0,B=0,re=0,ne=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(re=0;re!=256;++re)ne[re]=k[re];for(re=0;re!=256;++re)for(B=k[re],F=256+re;F<4096;F+=256)B=ne[F]=B>>>8^k[B&255];var ee=[];for(re=1;re!=16;++re)ee[re-1]=typeof Int32Array<"u"?ne.subarray(re*256,re*256+256):ne.slice(re*256,re*256+256);return ee}var l=i(r),c=l[0],u=l[1],h=l[2],f=l[3],_=l[4],T=l[5],g=l[6],E=l[7],S=l[8],R=l[9],L=l[10],x=l[11],v=l[12],A=l[13],m=l[14];function y(k,F){for(var B=F^-1,re=0,ne=k.length;re<ne;)B=B>>>8^r[(B^k.charCodeAt(re++))&255];return~B}function H(k,F){for(var B=F^-1,re=k.length-15,ne=0;ne<re;)B=m[k[ne++]^B&255]^A[k[ne++]^B>>8&255]^v[k[ne++]^B>>16&255]^x[k[ne++]^B>>>24]^L[k[ne++]]^R[k[ne++]]^S[k[ne++]]^E[k[ne++]]^g[k[ne++]]^T[k[ne++]]^_[k[ne++]]^f[k[ne++]]^h[k[ne++]]^u[k[ne++]]^c[k[ne++]]^r[k[ne++]];for(re+=15;ne<re;)B=B>>>8^r[(B^k[ne++])&255];return~B}function G(k,F){for(var B=F^-1,re=0,ne=k.length,ee=0,me=0;re<ne;)ee=k.charCodeAt(re++),ee<128?B=B>>>8^r[(B^ee)&255]:ee<2048?(B=B>>>8^r[(B^(192|ee>>6&31))&255],B=B>>>8^r[(B^(128|ee&63))&255]):ee>=55296&&ee<57344?(ee=(ee&1023)+64,me=k.charCodeAt(re++)&1023,B=B>>>8^r[(B^(240|ee>>8&7))&255],B=B>>>8^r[(B^(128|ee>>2&63))&255],B=B>>>8^r[(B^(128|me>>6&15|(ee&3)<<4))&255],B=B>>>8^r[(B^(128|me&63))&255]):(B=B>>>8^r[(B^(224|ee>>12&15))&255],B=B>>>8^r[(B^(128|ee>>6&63))&255],B=B>>>8^r[(B^(128|ee&63))&255]);return~B}return t.table=r,t.bstr=y,t.buf=H,t.str=G,t}(),gt=function(){var s={};s.version="1.2.1";function r(b,W){for(var P=b.split("/"),U=W.split("/"),j=0,Y=0,Te=Math.min(P.length,U.length);j<Te;++j){if(Y=P[j].length-U[j].length)return Y;if(P[j]!=U[j])return P[j]<U[j]?-1:1}return P.length-U.length}function i(b){if(b.charAt(b.length-1)=="/")return b.slice(0,-1).indexOf("/")===-1?b:i(b.slice(0,-1));var W=b.lastIndexOf("/");return W===-1?b:b.slice(0,W+1)}function l(b){if(b.charAt(b.length-1)=="/")return l(b.slice(0,-1));var W=b.lastIndexOf("/");return W===-1?b:b.slice(W+1)}function c(b,W){typeof W=="string"&&(W=new Date(W));var P=W.getHours();P=P<<6|W.getMinutes(),P=P<<5|W.getSeconds()>>>1,b.write_shift(2,P);var U=W.getFullYear()-1980;U=U<<4|W.getMonth()+1,U=U<<5|W.getDate(),b.write_shift(2,U)}function u(b){var W=b.read_shift(2)&65535,P=b.read_shift(2)&65535,U=new Date,j=P&31;P>>>=5;var Y=P&15;P>>>=4,U.setMilliseconds(0),U.setFullYear(P+1980),U.setMonth(Y-1),U.setDate(j);var Te=W&31;W>>>=5;var Se=W&63;return W>>>=6,U.setHours(W),U.setMinutes(Se),U.setSeconds(Te<<1),U}function h(b){jr(b,0);for(var W={},P=0;b.l<=b.length-4;){var U=b.read_shift(2),j=b.read_shift(2),Y=b.l+j,Te={};switch(U){case 21589:P=b.read_shift(1),P&1&&(Te.mtime=b.read_shift(4)),j>5&&(P&2&&(Te.atime=b.read_shift(4)),P&4&&(Te.ctime=b.read_shift(4))),Te.mtime&&(Te.mt=new Date(Te.mtime*1e3));break}b.l=Y,W[U]=Te}return W}var f;function _(){return f||(f={})}function T(b,W){if(b[0]==80&&b[1]==75)return Mn(b,W);if((b[0]|32)==109&&(b[1]|32)==105)return Nr(b,W);if(b.length<512)throw new Error("CFB file size "+b.length+" < 512");var P=3,U=512,j=0,Y=0,Te=0,Se=0,pe=0,ge=[],$e=b.slice(0,512);jr($e,0);var De=g($e);switch(P=De[0],P){case 3:U=512;break;case 4:U=4096;break;case 0:if(De[1]==0)return Mn(b,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+P)}U!==512&&($e=b.slice(0,U),jr($e,28));var Ge=b.slice(0,U);E($e,P);var je=$e.read_shift(4,"i");if(P===3&&je!==0)throw new Error("# Directory Sectors: Expected 0 saw "+je);$e.l+=4,Te=$e.read_shift(4,"i"),$e.l+=4,$e.chk("00100000","Mini Stream Cutoff Size: "),Se=$e.read_shift(4,"i"),j=$e.read_shift(4,"i"),pe=$e.read_shift(4,"i"),Y=$e.read_shift(4,"i");for(var Ue=-1,We=0;We<109&&(Ue=$e.read_shift(4,"i"),!(Ue<0));++We)ge[We]=Ue;var nt=S(b,U);x(pe,Y,nt,U,ge);var Dt=A(nt,Te,ge,U);Dt[Te].name="!Directory",j>0&&Se!==me&&(Dt[Se].name="!MiniFAT"),Dt[ge[0]].name="!FAT",Dt.fat_addrs=ge,Dt.ssz=U;var xt={},pr=[],mi=[],Vs=[];m(Te,Dt,nt,pr,j,xt,mi,Se),R(mi,Vs,pr),pr.shift();var Ws={FileIndex:mi,FullPaths:Vs};return W&&W.raw&&(Ws.raw={header:Ge,sectors:nt}),Ws}function g(b){if(b[b.l]==80&&b[b.l+1]==75)return[0,0];b.chk(we,"Header Signature: "),b.l+=16;var W=b.read_shift(2,"u");return[b.read_shift(2,"u"),W]}function E(b,W){var P=9;switch(b.l+=2,P=b.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+P);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+P);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+P)}b.chk("0600","Mini Sector Shift: "),b.chk("000000000000","Reserved: ")}function S(b,W){for(var P=Math.ceil(b.length/W)-1,U=[],j=1;j<P;++j)U[j-1]=b.slice(j*W,(j+1)*W);return U[P-1]=b.slice(P*W),U}function R(b,W,P){for(var U=0,j=0,Y=0,Te=0,Se=0,pe=P.length,ge=[],$e=[];U<pe;++U)ge[U]=$e[U]=U,W[U]=P[U];for(;Se<$e.length;++Se)U=$e[Se],j=b[U].L,Y=b[U].R,Te=b[U].C,ge[U]===U&&(j!==-1&&ge[j]!==j&&(ge[U]=ge[j]),Y!==-1&&ge[Y]!==Y&&(ge[U]=ge[Y])),Te!==-1&&(ge[Te]=U),j!==-1&&U!=ge[U]&&(ge[j]=ge[U],$e.lastIndexOf(j)<Se&&$e.push(j)),Y!==-1&&U!=ge[U]&&(ge[Y]=ge[U],$e.lastIndexOf(Y)<Se&&$e.push(Y));for(U=1;U<pe;++U)ge[U]===U&&(Y!==-1&&ge[Y]!==Y?ge[U]=ge[Y]:j!==-1&&ge[j]!==j&&(ge[U]=ge[j]));for(U=1;U<pe;++U)if(b[U].type!==0){if(Se=U,Se!=ge[Se])do Se=ge[Se],W[U]=W[Se]+"/"+W[U];while(Se!==0&&ge[Se]!==-1&&Se!=ge[Se]);ge[U]=-1}for(W[0]+="/",U=1;U<pe;++U)b[U].type!==2&&(W[U]+="/")}function L(b,W,P){for(var U=b.start,j=b.size,Y=[],Te=U;P&&j>0&&Te>=0;)Y.push(W.slice(Te*ee,Te*ee+ee)),j-=ee,Te=$l(P,Te*4);return Y.length===0?Ar(0):So(Y).slice(0,b.size)}function x(b,W,P,U,j){var Y=me;if(b===me){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(b!==-1){var Te=P[b],Se=(U>>>2)-1;if(!Te)return;for(var pe=0;pe<Se&&(Y=$l(Te,pe*4))!==me;++pe)j.push(Y);x($l(Te,U-4),W-1,P,U,j)}}function v(b,W,P,U,j){var Y=[],Te=[];j||(j=[]);var Se=U-1,pe=0,ge=0;for(pe=W;pe>=0;){j[pe]=!0,Y[Y.length]=pe,Te.push(b[pe]);var $e=P[Math.floor(pe*4/U)];if(ge=pe*4&Se,U<4+ge)throw new Error("FAT boundary crossed: "+pe+" 4 "+U);if(!b[$e])break;pe=$l(b[$e],ge)}return{nodes:Y,data:QC([Te])}}function A(b,W,P,U){var j=b.length,Y=[],Te=[],Se=[],pe=[],ge=U-1,$e=0,De=0,Ge=0,je=0;for($e=0;$e<j;++$e)if(Se=[],Ge=$e+W,Ge>=j&&(Ge-=j),!Te[Ge]){pe=[];var Ue=[];for(De=Ge;De>=0;){Ue[De]=!0,Te[De]=!0,Se[Se.length]=De,pe.push(b[De]);var We=P[Math.floor(De*4/U)];if(je=De*4&ge,U<4+je)throw new Error("FAT boundary crossed: "+De+" 4 "+U);if(!b[We]||(De=$l(b[We],je),Ue[De]))break}Y[Ge]={nodes:Se,data:QC([pe])}}return Y}function m(b,W,P,U,j,Y,Te,Se){for(var pe=0,ge=U.length?2:0,$e=W[b].data,De=0,Ge=0,je;De<$e.length;De+=128){var Ue=$e.slice(De,De+128);jr(Ue,64),Ge=Ue.read_shift(2),je=gI(Ue,0,Ge-ge),U.push(je);var We={name:je,type:Ue.read_shift(1),color:Ue.read_shift(1),L:Ue.read_shift(4,"i"),R:Ue.read_shift(4,"i"),C:Ue.read_shift(4,"i"),clsid:Ue.read_shift(16),state:Ue.read_shift(4,"i"),start:0,size:0},nt=Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2);nt!==0&&(We.ct=y(Ue,Ue.l-8));var Dt=Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2);Dt!==0&&(We.mt=y(Ue,Ue.l-8)),We.start=Ue.read_shift(4,"i"),We.size=Ue.read_shift(4,"i"),We.size<0&&We.start<0&&(We.size=We.type=0,We.start=me,We.name=""),We.type===5?(pe=We.start,j>0&&pe!==me&&(W[pe].name="!StreamData")):We.size>=4096?(We.storage="fat",W[We.start]===void 0&&(W[We.start]=v(P,We.start,W.fat_addrs,W.ssz)),W[We.start].name=We.name,We.content=W[We.start].data.slice(0,We.size)):(We.storage="minifat",We.size<0?We.size=0:pe!==me&&We.start!==me&&W[pe]&&(We.content=L(We,W[pe].data,(W[Se]||{}).data))),We.content&&jr(We.content,0),Y[je]=We,Te.push(We)}}function y(b,W){return new Date((jn(b,W+4)/1e7*Math.pow(2,32)+jn(b,W)/1e7-11644473600)*1e3)}function H(b,W){return _(),T(f.readFileSync(b),W)}function G(b,W){var P=W&&W.type;switch(P||pt&&Buffer.isBuffer(b)&&(P="buffer"),P||"base64"){case"file":return H(b,W);case"base64":return T(ws(Zn(b)),W);case"binary":return T(ws(b),W)}return T(b,W)}function k(b,W){var P=W||{},U=P.root||"Root Entry";if(b.FullPaths||(b.FullPaths=[]),b.FileIndex||(b.FileIndex=[]),b.FullPaths.length!==b.FileIndex.length)throw new Error("inconsistent CFB structure");b.FullPaths.length===0&&(b.FullPaths[0]=U+"/",b.FileIndex[0]={name:U,type:5}),P.CLSID&&(b.FileIndex[0].clsid=P.CLSID),F(b)}function F(b){var W="Sh33tJ5";if(!gt.find(b,"/"+W)){var P=Ar(4);P[0]=55,P[1]=P[3]=50,P[2]=54,b.FileIndex.push({name:W,type:2,content:P,size:4,L:69,R:69,C:69}),b.FullPaths.push(b.FullPaths[0]+W),B(b)}}function B(b,W){k(b);for(var P=!1,U=!1,j=b.FullPaths.length-1;j>=0;--j){var Y=b.FileIndex[j];switch(Y.type){case 0:U?P=!0:(b.FileIndex.pop(),b.FullPaths.pop());break;case 1:case 2:case 5:U=!0,isNaN(Y.R*Y.L*Y.C)&&(P=!0),Y.R>-1&&Y.L>-1&&Y.R==Y.L&&(P=!0);break;default:P=!0;break}}if(!(!P&&!W)){var Te=new Date(1987,1,19),Se=0,pe=Object.create?Object.create(null):{},ge=[];for(j=0;j<b.FullPaths.length;++j)pe[b.FullPaths[j]]=!0,b.FileIndex[j].type!==0&&ge.push([b.FullPaths[j],b.FileIndex[j]]);for(j=0;j<ge.length;++j){var $e=i(ge[j][0]);U=pe[$e],U||(ge.push([$e,{name:l($e).replace("/",""),type:1,clsid:ke,ct:Te,mt:Te,content:null}]),pe[$e]=!0)}for(ge.sort(function(je,Ue){return r(je[0],Ue[0])}),b.FullPaths=[],b.FileIndex=[],j=0;j<ge.length;++j)b.FullPaths[j]=ge[j][0],b.FileIndex[j]=ge[j][1];for(j=0;j<ge.length;++j){var De=b.FileIndex[j],Ge=b.FullPaths[j];if(De.name=l(Ge).replace("/",""),De.L=De.R=De.C=-(De.color=1),De.size=De.content?De.content.length:0,De.start=0,De.clsid=De.clsid||ke,j===0)De.C=ge.length>1?1:-1,De.size=0,De.type=5;else if(Ge.slice(-1)=="/"){for(Se=j+1;Se<ge.length&&i(b.FullPaths[Se])!=Ge;++Se);for(De.C=Se>=ge.length?-1:Se,Se=j+1;Se<ge.length&&i(b.FullPaths[Se])!=i(Ge);++Se);De.R=Se>=ge.length?-1:Se,De.type=1}else i(b.FullPaths[j+1]||"")==i(Ge)&&(De.R=j+1),De.type=2}}}function re(b,W){var P=W||{};if(P.fileType=="mad")return Ei(b,P);switch(B(b),P.fileType){case"zip":return O(b,P)}var U=function(je){for(var Ue=0,We=0,nt=0;nt<je.FileIndex.length;++nt){var Dt=je.FileIndex[nt];if(Dt.content){var xt=Dt.content.length;xt>0&&(xt<4096?Ue+=xt+63>>6:We+=xt+511>>9)}}for(var pr=je.FullPaths.length+3>>2,mi=Ue+7>>3,Vs=Ue+127>>7,Ws=mi+We+pr+Vs,rs=Ws+127>>7,$i=rs<=109?0:Math.ceil((rs-109)/127);Ws+rs+$i+127>>7>rs;)$i=++rs<=109?0:Math.ceil((rs-109)/127);var ns=[1,$i,rs,Vs,pr,We,Ue,0];return je.FileIndex[0].size=Ue<<6,ns[7]=(je.FileIndex[0].start=ns[0]+ns[1]+ns[2]+ns[3]+ns[4]+ns[5])+(ns[6]+7>>3),ns}(b),j=Ar(U[7]<<9),Y=0,Te=0;{for(Y=0;Y<8;++Y)j.write_shift(1,Oe[Y]);for(Y=0;Y<8;++Y)j.write_shift(2,0);for(j.write_shift(2,62),j.write_shift(2,3),j.write_shift(2,65534),j.write_shift(2,9),j.write_shift(2,6),Y=0;Y<3;++Y)j.write_shift(2,0);for(j.write_shift(4,0),j.write_shift(4,U[2]),j.write_shift(4,U[0]+U[1]+U[2]+U[3]-1),j.write_shift(4,0),j.write_shift(4,4096),j.write_shift(4,U[3]?U[0]+U[1]+U[2]-1:me),j.write_shift(4,U[3]),j.write_shift(-4,U[1]?U[0]-1:me),j.write_shift(4,U[1]),Y=0;Y<109;++Y)j.write_shift(-4,Y<U[2]?U[1]+Y:-1)}if(U[1])for(Te=0;Te<U[1];++Te){for(;Y<236+Te*127;++Y)j.write_shift(-4,Y<U[2]?U[1]+Y:-1);j.write_shift(-4,Te===U[1]-1?me:Te+1)}var Se=function(je){for(Te+=je;Y<Te-1;++Y)j.write_shift(-4,Y+1);je&&(++Y,j.write_shift(-4,me))};for(Te=Y=0,Te+=U[1];Y<Te;++Y)j.write_shift(-4,ye.DIFSECT);for(Te+=U[2];Y<Te;++Y)j.write_shift(-4,ye.FATSECT);Se(U[3]),Se(U[4]);for(var pe=0,ge=0,$e=b.FileIndex[0];pe<b.FileIndex.length;++pe)$e=b.FileIndex[pe],$e.content&&(ge=$e.content.length,!(ge<4096)&&($e.start=Te,Se(ge+511>>9)));for(Se(U[6]+7>>3);j.l&511;)j.write_shift(-4,ye.ENDOFCHAIN);for(Te=Y=0,pe=0;pe<b.FileIndex.length;++pe)$e=b.FileIndex[pe],$e.content&&(ge=$e.content.length,!(!ge||ge>=4096)&&($e.start=Te,Se(ge+63>>6)));for(;j.l&511;)j.write_shift(-4,ye.ENDOFCHAIN);for(Y=0;Y<U[4]<<2;++Y){var De=b.FullPaths[Y];if(!De||De.length===0){for(pe=0;pe<17;++pe)j.write_shift(4,0);for(pe=0;pe<3;++pe)j.write_shift(4,-1);for(pe=0;pe<12;++pe)j.write_shift(4,0);continue}$e=b.FileIndex[Y],Y===0&&($e.start=$e.size?$e.start-1:me);var Ge=Y===0&&P.root||$e.name;if(ge=2*(Ge.length+1),j.write_shift(64,Ge,"utf16le"),j.write_shift(2,ge),j.write_shift(1,$e.type),j.write_shift(1,$e.color),j.write_shift(-4,$e.L),j.write_shift(-4,$e.R),j.write_shift(-4,$e.C),$e.clsid)j.write_shift(16,$e.clsid,"hex");else for(pe=0;pe<4;++pe)j.write_shift(4,0);j.write_shift(4,$e.state||0),j.write_shift(4,0),j.write_shift(4,0),j.write_shift(4,0),j.write_shift(4,0),j.write_shift(4,$e.start),j.write_shift(4,$e.size),j.write_shift(4,0)}for(Y=1;Y<b.FileIndex.length;++Y)if($e=b.FileIndex[Y],$e.size>=4096)if(j.l=$e.start+1<<9,pt&&Buffer.isBuffer($e.content))$e.content.copy(j,j.l,0,$e.size),j.l+=$e.size+511&-512;else{for(pe=0;pe<$e.size;++pe)j.write_shift(1,$e.content[pe]);for(;pe&511;++pe)j.write_shift(1,0)}for(Y=1;Y<b.FileIndex.length;++Y)if($e=b.FileIndex[Y],$e.size>0&&$e.size<4096)if(pt&&Buffer.isBuffer($e.content))$e.content.copy(j,j.l,0,$e.size),j.l+=$e.size+63&-64;else{for(pe=0;pe<$e.size;++pe)j.write_shift(1,$e.content[pe]);for(;pe&63;++pe)j.write_shift(1,0)}if(pt)j.l=j.length;else for(;j.l<j.length;)j.write_shift(1,0);return j}function ne(b,W){var P=b.FullPaths.map(function(pe){return pe.toUpperCase()}),U=P.map(function(pe){var ge=pe.split("/");return ge[ge.length-(pe.slice(-1)=="/"?2:1)]}),j=!1;W.charCodeAt(0)===47?(j=!0,W=P[0].slice(0,-1)+W):j=W.indexOf("/")!==-1;var Y=W.toUpperCase(),Te=j===!0?P.indexOf(Y):U.indexOf(Y);if(Te!==-1)return b.FileIndex[Te];var Se=!Y.match(Mu);for(Y=Y.replace(Sn,""),Se&&(Y=Y.replace(Mu,"!")),Te=0;Te<P.length;++Te)if((Se?P[Te].replace(Mu,"!"):P[Te]).replace(Sn,"")==Y||(Se?U[Te].replace(Mu,"!"):U[Te]).replace(Sn,"")==Y)return b.FileIndex[Te];return null}var ee=64,me=-2,we="d0cf11e0a1b11ae1",Oe=[208,207,17,224,161,177,26,225],ke="00000000000000000000000000000000",ye={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:me,FREESECT:-1,HEADER_SIGNATURE:we,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:ke,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Re(b,W,P){_();var U=re(b,P);f.writeFileSync(W,U)}function K(b){for(var W=new Array(b.length),P=0;P<b.length;++P)W[P]=String.fromCharCode(b[P]);return W.join("")}function z(b,W){var P=re(b,W);switch(W&&W.type||"buffer"){case"file":return _(),f.writeFileSync(W.filename,P),P;case"binary":return typeof P=="string"?P:K(P);case"base64":return MC(typeof P=="string"?P:K(P));case"buffer":if(pt)return Buffer.isBuffer(P)?P:Gl(P);case"array":return typeof P=="string"?ws(P):P}return P}var oe;function M(b){try{var W=b.InflateRaw,P=new W;if(P._processChunk(new Uint8Array([3,0]),P._finishFlushFlag),P.bytesRead)oe=b;else throw new Error("zlib does not expose bytesRead")}catch(U){console.error("cannot use native zlib: "+(U.message||U))}}function Z(b,W){if(!oe)return Et(b,W);var P=oe.InflateRaw,U=new P,j=U._processChunk(b.slice(b.l),U._finishFlushFlag);return b.l+=U.bytesRead,j}function J(b){return oe?oe.deflateRawSync(b):Qe(b)}var q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],xe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Pe(b){var W=(b<<1|b<<11)&139536|(b<<5|b<<15)&558144;return(W>>16|W>>8|W)&255}for(var be=typeof Uint8Array<"u",ce=be?new Uint8Array(256):[],et=0;et<256;++et)ce[et]=Pe(et);function N(b,W){var P=ce[b&255];return W<=8?P>>>8-W:(P=P<<8|ce[b>>8&255],W<=16?P>>>16-W:(P=P<<8|ce[b>>16&255],P>>>24-W))}function fe(b,W){var P=W&7,U=W>>>3;return(b[U]|(P<=6?0:b[U+1]<<8))>>>P&3}function He(b,W){var P=W&7,U=W>>>3;return(b[U]|(P<=5?0:b[U+1]<<8))>>>P&7}function Me(b,W){var P=W&7,U=W>>>3;return(b[U]|(P<=4?0:b[U+1]<<8))>>>P&15}function Ze(b,W){var P=W&7,U=W>>>3;return(b[U]|(P<=3?0:b[U+1]<<8))>>>P&31}function Ce(b,W){var P=W&7,U=W>>>3;return(b[U]|(P<=1?0:b[U+1]<<8))>>>P&127}function ut(b,W,P){var U=W&7,j=W>>>3,Y=(1<<P)-1,Te=b[j]>>>U;return P<8-U||(Te|=b[j+1]<<8-U,P<16-U)||(Te|=b[j+2]<<16-U,P<24-U)||(Te|=b[j+3]<<24-U),Te&Y}function Bt(b,W,P){var U=W&7,j=W>>>3;return U<=5?b[j]|=(P&7)<<U:(b[j]|=P<<U&255,b[j+1]=(P&7)>>8-U),W+3}function tr(b,W,P){var U=W&7,j=W>>>3;return P=(P&1)<<U,b[j]|=P,W+1}function hr(b,W,P){var U=W&7,j=W>>>3;return P<<=U,b[j]|=P&255,P>>>=8,b[j+1]=P,W+8}function wt(b,W,P){var U=W&7,j=W>>>3;return P<<=U,b[j]|=P&255,P>>>=8,b[j+1]=P&255,b[j+2]=P>>>8,W+16}function Zr(b,W){var P=b.length,U=2*P>W?2*P:W+5,j=0;if(P>=W)return b;if(pt){var Y=DC(U);if(b.copy)b.copy(Y);else for(;j<b.length;++j)Y[j]=b[j];return Y}else if(be){var Te=new Uint8Array(U);if(Te.set)Te.set(b);else for(;j<P;++j)Te[j]=b[j];return Te}return b.length=U,b}function Wt(b){for(var W=new Array(b),P=0;P<b;++P)W[P]=0;return W}function te(b,W,P){var U=1,j=0,Y=0,Te=0,Se=0,pe=b.length,ge=be?new Uint16Array(32):Wt(32);for(Y=0;Y<32;++Y)ge[Y]=0;for(Y=pe;Y<P;++Y)b[Y]=0;pe=b.length;var $e=be?new Uint16Array(pe):Wt(pe);for(Y=0;Y<pe;++Y)ge[j=b[Y]]++,U<j&&(U=j),$e[Y]=0;for(ge[0]=0,Y=1;Y<=U;++Y)ge[Y+16]=Se=Se+ge[Y-1]<<1;for(Y=0;Y<pe;++Y)Se=b[Y],Se!=0&&($e[Y]=ge[Se+16]++);var De=0;for(Y=0;Y<pe;++Y)if(De=b[Y],De!=0)for(Se=N($e[Y],U)>>U-De,Te=(1<<U+4-De)-1;Te>=0;--Te)W[Se|Te<<De]=De&15|Y<<4;return U}var dr=be?new Uint16Array(512):Wt(512),Tn=be?new Uint16Array(32):Wt(32);if(!be){for(var ct=0;ct<512;++ct)dr[ct]=0;for(ct=0;ct<32;++ct)Tn[ct]=0}(function(){for(var b=[],W=0;W<32;W++)b.push(5);te(b,Tn,32);var P=[];for(W=0;W<=143;W++)P.push(8);for(;W<=255;W++)P.push(9);for(;W<=279;W++)P.push(7);for(;W<=287;W++)P.push(8);te(P,dr,288)})();var Ot=function(){for(var W=be?new Uint8Array(32768):[],P=0,U=0;P<xe.length-1;++P)for(;U<xe[P+1];++U)W[U]=P;for(;U<32768;++U)W[U]=29;var j=be?new Uint8Array(259):[];for(P=0,U=0;P<he.length-1;++P)for(;U<he[P+1];++U)j[U]=P;function Y(Se,pe){for(var ge=0;ge<Se.length;){var $e=Math.min(65535,Se.length-ge),De=ge+$e==Se.length;for(pe.write_shift(1,+De),pe.write_shift(2,$e),pe.write_shift(2,~$e&65535);$e-- >0;)pe[pe.l++]=Se[ge++]}return pe.l}function Te(Se,pe){for(var ge=0,$e=0,De=be?new Uint16Array(32768):[];$e<Se.length;){var Ge=Math.min(65535,Se.length-$e);if(Ge<10){for(ge=Bt(pe,ge,+($e+Ge==Se.length)),ge&7&&(ge+=8-(ge&7)),pe.l=ge/8|0,pe.write_shift(2,Ge),pe.write_shift(2,~Ge&65535);Ge-- >0;)pe[pe.l++]=Se[$e++];ge=pe.l*8;continue}ge=Bt(pe,ge,+($e+Ge==Se.length)+2);for(var je=0;Ge-- >0;){var Ue=Se[$e];je=(je<<5^Ue)&32767;var We=-1,nt=0;if((We=De[je])&&(We|=$e&-32768,We>$e&&(We-=32768),We<$e))for(;Se[We+nt]==Se[$e+nt]&&nt<250;)++nt;if(nt>2){Ue=j[nt],Ue<=22?ge=hr(pe,ge,ce[Ue+1]>>1)-1:(hr(pe,ge,3),ge+=5,hr(pe,ge,ce[Ue-23]>>5),ge+=3);var Dt=Ue<8?0:Ue-4>>2;Dt>0&&(wt(pe,ge,nt-he[Ue]),ge+=Dt),Ue=W[$e-We],ge=hr(pe,ge,ce[Ue]>>3),ge-=3;var xt=Ue<4?0:Ue-2>>1;xt>0&&(wt(pe,ge,$e-We-xe[Ue]),ge+=xt);for(var pr=0;pr<nt;++pr)De[je]=$e&32767,je=(je<<5^Se[$e])&32767,++$e;Ge-=nt-1}else Ue<=143?Ue=Ue+48:ge=tr(pe,ge,1),ge=hr(pe,ge,ce[Ue]),De[je]=$e&32767,++$e}ge=hr(pe,ge,0)-1}return pe.l=(ge+7)/8|0,pe.l}return function(pe,ge){return pe.length<8?Y(pe,ge):Te(pe,ge)}}();function Qe(b){var W=Ar(50+Math.floor(b.length*1.1)),P=Ot(b,W);return W.slice(0,P)}var ot=be?new Uint16Array(32768):Wt(32768),Mt=be?new Uint16Array(32768):Wt(32768),I=be?new Uint16Array(128):Wt(128),D=1,ie=1;function le(b,W){var P=Ze(b,W)+257;W+=5;var U=Ze(b,W)+1;W+=5;var j=Me(b,W)+4;W+=4;for(var Y=0,Te=be?new Uint8Array(19):Wt(19),Se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],pe=1,ge=be?new Uint8Array(8):Wt(8),$e=be?new Uint8Array(8):Wt(8),De=Te.length,Ge=0;Ge<j;++Ge)Te[q[Ge]]=Y=He(b,W),pe<Y&&(pe=Y),ge[Y]++,W+=3;var je=0;for(ge[0]=0,Ge=1;Ge<=pe;++Ge)$e[Ge]=je=je+ge[Ge-1]<<1;for(Ge=0;Ge<De;++Ge)(je=Te[Ge])!=0&&(Se[Ge]=$e[je]++);var Ue=0;for(Ge=0;Ge<De;++Ge)if(Ue=Te[Ge],Ue!=0){je=ce[Se[Ge]]>>8-Ue;for(var We=(1<<7-Ue)-1;We>=0;--We)I[je|We<<Ue]=Ue&7|Ge<<3}var nt=[];for(pe=1;nt.length<P+U;)switch(je=I[Ce(b,W)],W+=je&7,je>>>=3){case 16:for(Y=3+fe(b,W),W+=2,je=nt[nt.length-1];Y-- >0;)nt.push(je);break;case 17:for(Y=3+He(b,W),W+=3;Y-- >0;)nt.push(0);break;case 18:for(Y=11+Ce(b,W),W+=7;Y-- >0;)nt.push(0);break;default:nt.push(je),pe<je&&(pe=je);break}var Dt=nt.slice(0,P),xt=nt.slice(P);for(Ge=P;Ge<286;++Ge)Dt[Ge]=0;for(Ge=U;Ge<30;++Ge)xt[Ge]=0;return D=te(Dt,ot,286),ie=te(xt,Mt,30),W}function Be(b,W){if(b[0]==3&&!(b[1]&3))return[Uo(W),2];for(var P=0,U=0,j=DC(W||1<<18),Y=0,Te=j.length>>>0,Se=0,pe=0;!(U&1);){if(U=He(b,P),P+=3,U>>>1)U>>1==1?(Se=9,pe=5):(P=le(b,P),Se=D,pe=ie);else{P&7&&(P+=8-(P&7));var ge=b[P>>>3]|b[(P>>>3)+1]<<8;if(P+=32,ge>0)for(!W&&Te<Y+ge&&(j=Zr(j,Y+ge),Te=j.length);ge-- >0;)j[Y++]=b[P>>>3],P+=8;continue}for(;;){!W&&Te<Y+32767&&(j=Zr(j,Y+32767),Te=j.length);var $e=ut(b,P,Se),De=U>>>1==1?dr[$e]:ot[$e];if(P+=De&15,De>>>=4,!(De>>>8&255))j[Y++]=De;else{if(De==256)break;De-=257;var Ge=De<8?0:De-4>>2;Ge>5&&(Ge=0);var je=Y+he[De];Ge>0&&(je+=ut(b,P,Ge),P+=Ge),$e=ut(b,P,pe),De=U>>>1==1?Tn[$e]:Mt[$e],P+=De&15,De>>>=4;var Ue=De<4?0:De-2>>1,We=xe[De];for(Ue>0&&(We+=ut(b,P,Ue),P+=Ue),!W&&Te<je&&(j=Zr(j,je+100),Te=j.length);Y<je;)j[Y]=j[Y-We],++Y}}}return W?[j,P+7>>>3]:[j.slice(0,Y),P+7>>>3]}function Et(b,W){var P=b.slice(b.l||0),U=Be(P,W);return b.l+=U[1],U[0]}function An(b,W){if(b)typeof console<"u"&&console.error(W);else throw new Error(W)}function Mn(b,W){var P=b;jr(P,0);var U=[],j=[],Y={FileIndex:U,FullPaths:j};k(Y,{root:W.root});for(var Te=P.length-4;(P[Te]!=80||P[Te+1]!=75||P[Te+2]!=5||P[Te+3]!=6)&&Te>=0;)--Te;P.l=Te+4,P.l+=4;var Se=P.read_shift(2);P.l+=6;var pe=P.read_shift(4);for(P.l=pe,Te=0;Te<Se;++Te){P.l+=20;var ge=P.read_shift(4),$e=P.read_shift(4),De=P.read_shift(2),Ge=P.read_shift(2),je=P.read_shift(2);P.l+=8;var Ue=P.read_shift(4),We=h(P.slice(P.l+De,P.l+De+Ge));P.l+=De+Ge+je;var nt=P.l;P.l=Ue+4,Dn(P,ge,$e,Y,We),P.l=nt}return Y}function Dn(b,W,P,U,j){b.l+=2;var Y=b.read_shift(2),Te=b.read_shift(2),Se=u(b);if(Y&8257)throw new Error("Unsupported ZIP encryption");for(var pe=b.read_shift(4),ge=b.read_shift(4),$e=b.read_shift(4),De=b.read_shift(2),Ge=b.read_shift(2),je="",Ue=0;Ue<De;++Ue)je+=String.fromCharCode(b[b.l++]);if(Ge){var We=h(b.slice(b.l,b.l+Ge));(We[21589]||{}).mt&&(Se=We[21589].mt),((j||{})[21589]||{}).mt&&(Se=j[21589].mt)}b.l+=Ge;var nt=b.slice(b.l,b.l+ge);switch(Te){case 8:nt=Z(b,$e);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Te)}var Dt=!1;Y&8&&(pe=b.read_shift(4),pe==134695760&&(pe=b.read_shift(4),Dt=!0),ge=b.read_shift(4),$e=b.read_shift(4)),ge!=W&&An(Dt,"Bad compressed size: "+W+" != "+ge),$e!=P&&An(Dt,"Bad uncompressed size: "+P+" != "+$e),Sr(U,je,nt,{unsafe:!0,mt:Se})}function O(b,W){var P=W||{},U=[],j=[],Y=Ar(1),Te=P.compression?8:0,Se=0,pe=0,ge=0,$e=0,De=0,Ge=b.FullPaths[0],je=Ge,Ue=b.FileIndex[0],We=[],nt=0;for(pe=1;pe<b.FullPaths.length;++pe)if(je=b.FullPaths[pe].slice(Ge.length),Ue=b.FileIndex[pe],!(!Ue.size||!Ue.content||je=="Sh33tJ5")){var Dt=$e,xt=Ar(je.length);for(ge=0;ge<je.length;++ge)xt.write_shift(1,je.charCodeAt(ge)&127);xt=xt.slice(0,xt.l),We[De]=QF.buf(Ue.content,0);var pr=Ue.content;Te==8&&(pr=J(pr)),Y=Ar(30),Y.write_shift(4,67324752),Y.write_shift(2,20),Y.write_shift(2,Se),Y.write_shift(2,Te),Ue.mt?c(Y,Ue.mt):Y.write_shift(4,0),Y.write_shift(-4,We[De]),Y.write_shift(4,pr.length),Y.write_shift(4,Ue.content.length),Y.write_shift(2,xt.length),Y.write_shift(2,0),$e+=Y.length,U.push(Y),$e+=xt.length,U.push(xt),$e+=pr.length,U.push(pr),Y=Ar(46),Y.write_shift(4,33639248),Y.write_shift(2,0),Y.write_shift(2,20),Y.write_shift(2,Se),Y.write_shift(2,Te),Y.write_shift(4,0),Y.write_shift(-4,We[De]),Y.write_shift(4,pr.length),Y.write_shift(4,Ue.content.length),Y.write_shift(2,xt.length),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(4,0),Y.write_shift(4,Dt),nt+=Y.l,j.push(Y),nt+=xt.length,j.push(xt),++De}return Y=Ar(22),Y.write_shift(4,101010256),Y.write_shift(2,0),Y.write_shift(2,0),Y.write_shift(2,De),Y.write_shift(2,De),Y.write_shift(4,nt),Y.write_shift(4,$e),Y.write_shift(2,0),So([So(U),So(j),Y])}var w={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Q(b,W){if(b.ctype)return b.ctype;var P=b.name||"",U=P.match(/\.([^\.]+)$/);return U&&w[U[1]]||W&&(U=(P=W).match(/[\.\\]([^\.\\])+$/),U&&w[U[1]])?w[U[1]]:"application/octet-stream"}function ae(b){for(var W=MC(b),P=[],U=0;U<W.length;U+=76)P.push(W.slice(U,U+76));return P.join(`\r
`)+`\r
`}function Ae(b){var W=b.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ge){var $e=ge.charCodeAt(0).toString(16).toUpperCase();return"="+($e.length==1?"0"+$e:$e)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var P=[],U=W.split(`\r
`),j=0;j<U.length;++j){var Y=U[j];if(Y.length==0){P.push("");continue}for(var Te=0;Te<Y.length;){var Se=76,pe=Y.slice(Te,Te+Se);pe.charAt(Se-1)=="="?Se--:pe.charAt(Se-2)=="="?Se-=2:pe.charAt(Se-3)=="="&&(Se-=3),pe=Y.slice(Te,Te+Se),Te+=Se,Te<Y.length&&(pe+="="),P.push(pe)}}return P.join(`\r
`)}function Xe(b){for(var W=[],P=0;P<b.length;++P){for(var U=b[P];P<=b.length&&U.charAt(U.length-1)=="=";)U=U.slice(0,U.length-1)+b[++P];W.push(U)}for(var j=0;j<W.length;++j)W[j]=W[j].replace(/[=][0-9A-Fa-f]{2}/g,function(Y){return String.fromCharCode(parseInt(Y.slice(1),16))});return ws(W.join(`\r
`))}function rt(b,W,P){for(var U="",j="",Y="",Te,Se=0;Se<10;++Se){var pe=W[Se];if(!pe||pe.match(/^\s*$/))break;var ge=pe.match(/^(.*?):\s*([^\s].*)$/);if(ge)switch(ge[1].toLowerCase()){case"content-location":U=ge[2].trim();break;case"content-type":Y=ge[2].trim();break;case"content-transfer-encoding":j=ge[2].trim();break}}switch(++Se,j.toLowerCase()){case"base64":Te=ws(Zn(W.slice(Se).join("")));break;case"quoted-printable":Te=Xe(W.slice(Se));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+j)}var $e=Sr(b,U.slice(P.length),Te,{unsafe:!0});Y&&($e.ctype=Y)}function Nr(b,W){if(K(b.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var P=W&&W.root||"",U=(pt&&Buffer.isBuffer(b)?b.toString("binary"):K(b)).split(`\r
`),j=0,Y="";for(j=0;j<U.length;++j)if(Y=U[j],!!/^Content-Location:/i.test(Y)&&(Y=Y.slice(Y.indexOf("file")),P||(P=Y.slice(0,Y.lastIndexOf("/")+1)),Y.slice(0,P.length)!=P))for(;P.length>0&&(P=P.slice(0,P.length-1),P=P.slice(0,P.lastIndexOf("/")+1),Y.slice(0,P.length)!=P););var Te=(U[1]||"").match(/boundary="(.*?)"/);if(!Te)throw new Error("MAD cannot find boundary");var Se="--"+(Te[1]||""),pe=[],ge=[],$e={FileIndex:pe,FullPaths:ge};k($e);var De,Ge=0;for(j=0;j<U.length;++j){var je=U[j];je!==Se&&je!==Se+"--"||(Ge++&&rt($e,U.slice(De,j),P),De=j)}return $e}function Ei(b,W){var P=W||{},U=P.boundary||"SheetJS";U="------="+U;for(var j=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+U.slice(2)+'"',"","",""],Y=b.FullPaths[0],Te=Y,Se=b.FileIndex[0],pe=1;pe<b.FullPaths.length;++pe)if(Te=b.FullPaths[pe].slice(Y.length),Se=b.FileIndex[pe],!(!Se.size||!Se.content||Te=="Sh33tJ5")){Te=Te.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(nt){return"_x"+nt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(nt){return"_u"+nt.charCodeAt(0).toString(16)+"_"});for(var ge=Se.content,$e=pt&&Buffer.isBuffer(ge)?ge.toString("binary"):K(ge),De=0,Ge=Math.min(1024,$e.length),je=0,Ue=0;Ue<=Ge;++Ue)(je=$e.charCodeAt(Ue))>=32&&je<128&&++De;var We=De>=Ge*4/5;j.push(U),j.push("Content-Location: "+(P.root||"file:///C:/SheetJS/")+Te),j.push("Content-Transfer-Encoding: "+(We?"quoted-printable":"base64")),j.push("Content-Type: "+Q(Se,Te)),j.push(""),j.push(We?Ae($e):ae($e))}return j.push(U+`--\r
`),j.join(`\r
`)}function qi(b){var W={};return k(W,b),W}function Sr(b,W,P,U){var j=U&&U.unsafe;j||k(b);var Y=!j&&gt.find(b,W);if(!Y){var Te=b.FullPaths[0];W.slice(0,Te.length)==Te?Te=W:(Te.slice(-1)!="/"&&(Te+="/"),Te=(Te+W).replace("//","/")),Y={name:l(W),type:2},b.FileIndex.push(Y),b.FullPaths.push(Te),j||gt.utils.cfb_gc(b)}return Y.content=P,Y.size=P?P.length:0,U&&(U.CLSID&&(Y.clsid=U.CLSID),U.mt&&(Y.mt=U.mt),U.ct&&(Y.ct=U.ct)),Y}function Gs(b,W){k(b);var P=gt.find(b,W);if(P){for(var U=0;U<b.FileIndex.length;++U)if(b.FileIndex[U]==P)return b.FileIndex.splice(U,1),b.FullPaths.splice(U,1),!0}return!1}function Ac(b,W,P){k(b);var U=gt.find(b,W);if(U){for(var j=0;j<b.FileIndex.length;++j)if(b.FileIndex[j]==U)return b.FileIndex[j].name=l(P),b.FullPaths[j]=P,!0}return!1}function vc(b){B(b,!0)}return s.find=ne,s.read=G,s.parse=T,s.write=z,s.writeFile=Re,s.utils={cfb_new:qi,cfb_add:Sr,cfb_del:Gs,cfb_mov:Ac,cfb_gc:vc,ReadShift:zu,CheckField:$y,prep_blob:jr,bconcat:So,use_zlib:M,_deflateRaw:Qe,_inflateRaw:Et,consts:ye},s}();function eB(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(t);s.open("r"),s.encoding="binary";var r=s.read();return s.close(),r}catch(i){if(!i.message||!i.message.match(/onstruct/))throw i}throw new Error("Cannot access file "+t)}function Ho(t){for(var s=Object.keys(t),r=[],i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(t,s[i])&&r.push(s[i]);return r}function _I(t){for(var s=[],r=Ho(t),i=0;i!==r.length;++i)s[t[r[i]]]=r[i];return s}var Y_=new Date(1899,11,30,0,0,0);function Qn(t,s){var r=t.getTime(),i=Y_.getTime()+(t.getTimezoneOffset()-Y_.getTimezoneOffset())*6e4;return(r-i)/(24*60*60*1e3)}var Q1=new Date,tB=Y_.getTime()+(Q1.getTimezoneOffset()-Y_.getTimezoneOffset())*6e4,WC=Q1.getTimezoneOffset();function mT(t){var s=new Date;return s.setTime(t*24*60*60*1e3+tB),s.getTimezoneOffset()!==WC&&s.setTime(s.getTime()+(s.getTimezoneOffset()-WC)*6e4),s}function rB(t){var s=0,r=0,i=!1,l=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!l)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var c=1;c!=l.length;++c)if(l[c]){switch(r=1,c>3&&(i=!0),l[c].slice(l[c].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+l[c].slice(l[c].length-1));case"D":r*=24;case"H":r*=60;case"M":if(i)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}s+=r*parseInt(l[c],10)}return s}var XC=new Date("2017-02-19T19:06:09.000Z"),ey=isNaN(XC.getFullYear())?new Date("2/19/17"):XC,nB=ey.getFullYear()==2017;function Kr(t,s){var r=new Date(t);if(nB)return s>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):s<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(ey.getFullYear()==1917&&!isNaN(r.getFullYear())){var i=r.getFullYear();return t.indexOf(""+i)>-1||r.setFullYear(r.getFullYear()+100),r}var l=t.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+l[0],+l[1]-1,+l[2],+l[3]||0,+l[4]||0,+l[5]||0);return t.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function Dl(t,s){if(pt&&Buffer.isBuffer(t)){if(s){if(t[0]==255&&t[1]==254)return Pu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Pu(U1(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(s){if(t[0]==255&&t[1]==254)return Pu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Pu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(c){return r[c]||c})}catch{}for(var i=[],l=0;l!=t.length;++l)i.push(String.fromCharCode(t[l]));return i.join("")}function Jr(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=Jr(t[r]));return s}function ur(t,s){for(var r="";r.length<s;)r+=t;return r}function Gi(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var r=1,i=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(s=Number(i))||(i=i.replace(/[(](.*)[)]/,function(l,c){return r=-r,c}),!isNaN(s=Number(i)))?s/r:s}var sB=["january","february","march","april","may","june","july","august","september","october","november","december"];function Rh(t){var s=new Date(t),r=new Date(NaN),i=s.getYear(),l=s.getMonth(),c=s.getDate();if(isNaN(c))return r;var u=t.toLowerCase();if(u.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(u=u.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),u.length>3&&sB.indexOf(u)==-1)return r}else if(u.match(/[a-z]/))return r;return i<0||i>8099?r:(l>0||c>1)&&i!=101?s:t.match(/[^-0-9:,\/\\]/)?r:s}var iB=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,i,l){if(t||typeof i=="string")return r.split(i);for(var c=r.split(i),u=[c[0]],h=1;h<c.length;++h)u.push(l),u.push(c[h]);return u}}();function ty(t){return t?t.content&&t.type?Dl(t.content,!0):t.data?wu(t.data):t.asNodeBuffer&&pt?wu(t.asNodeBuffer().toString("binary")):t.asBinary?wu(t.asBinary()):t._data&&t._data.getContent?wu(Dl(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function ry(t){if(!t)return null;if(t.data)return kC(t.data);if(t.asNodeBuffer&&pt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var s=t._data.getContent();return typeof s=="string"?kC(s):Array.prototype.slice.call(s)}return t.content&&t.type?t.content:null}function oB(t){return t&&t.name.slice(-4)===".bin"?ry(t):ty(t)}function hs(t,s){for(var r=t.FullPaths||Ho(t.files),i=s.toLowerCase().replace(/[\/]/g,"\\"),l=i.replace(/\\/g,"/"),c=0;c<r.length;++c){var u=r[c].replace(/^Root Entry[\/]/,"").toLowerCase();if(i==u||l==u)return t.files?t.files[r[c]]:t.FileIndex[c]}return null}function TI(t,s){var r=hs(t,s);if(r==null)throw new Error("Cannot find file "+s+" in zip");return r}function $r(t,s,r){if(!r)return oB(TI(t,s));if(!s)return null;try{return $r(t,s)}catch{return null}}function zn(t,s,r){if(!r)return ty(TI(t,s));if(!s)return null;try{return zn(t,s)}catch{return null}}function lB(t,s,r){return ry(TI(t,s))}function jC(t){for(var s=t.FullPaths||Ho(t.files),r=[],i=0;i<s.length;++i)s[i].slice(-1)!="/"&&r.push(s[i].replace(/^Root Entry[\/]/,""));return r.sort()}function aB(t,s,r){if(t.FullPaths){if(typeof r=="string"){var i;return pt?i=Gl(r):i=vF(r),gt.utils.cfb_add(t,s,i)}gt.utils.cfb_add(t,s,r)}else t.file(s,r)}function ny(t,s){switch(s.type){case"base64":return gt.read(t,{type:"base64"});case"binary":return gt.read(t,{type:"binary"});case"buffer":case"array":return gt.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+s.type)}function Du(t,s){if(t.charAt(0)=="/")return t.slice(1);var r=s.split("/");s.slice(-1)!="/"&&r.pop();for(var i=t.split("/");i.length!==0;){var l=i.shift();l===".."?r.pop():l!=="."&&r.push(l)}return r.join("/")}var sy=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,cB=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,zC=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,uB=/<[^>]*>/g,_n=sy.match(zC)?zC:uB,hB=/<\w*:/,dB=/<(\/?)\w+:/;function st(t,s,r){for(var i={},l=0,c=0;l!==t.length&&!((c=t.charCodeAt(l))===32||c===10||c===13);++l);if(s||(i[0]=t.slice(0,l)),l===t.length)return i;var u=t.match(cB),h=0,f="",_=0,T="",g="",E=1;if(u)for(_=0;_!=u.length;++_){for(g=u[_],c=0;c!=g.length&&g.charCodeAt(c)!==61;++c);for(T=g.slice(0,c).trim();g.charCodeAt(c+1)==32;)++c;for(E=(l=g.charCodeAt(c+1))==34||l==39?1:0,f=g.slice(c+1+E,g.length-E),h=0;h!=T.length&&T.charCodeAt(h)!==58;++h);if(h===T.length)T.indexOf("_")>0&&(T=T.slice(0,T.indexOf("_"))),i[T]=f,i[T.toLowerCase()]=f;else{var S=(h===5&&T.slice(0,5)==="xmlns"?"xmlns":"")+T.slice(h+1);if(i[S]&&T.slice(h-3,h)=="ext")continue;i[S]=f,i[S.toLowerCase()]=f}}return i}function pi(t){return t.replace(dB,"<$1")}var iy={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},fB=_I(iy),$t=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,s=/_x([\da-fA-F]{4})_/ig;return function r(i){var l=i+"",c=l.indexOf("<![CDATA[");if(c==-1)return l.replace(t,function(h,f){return iy[h]||String.fromCharCode(parseInt(f,h.indexOf("x")>-1?16:10))||h}).replace(s,function(h,f){return String.fromCharCode(parseInt(f,16))});var u=l.indexOf("]]>");return r(l.slice(0,c))+l.slice(c+9,u)+r(l.slice(u+3))}}(),_B=/[&<>'"]/g,TB=/[\u0000-\u001f]/g;function oy(t){var s=t+"";return s.replace(_B,function(r){return fB[r]}).replace(/\n/g,"<br/>").replace(TB,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var YC=function(){var t=/&#(\d+);/g;function s(r,i){return String.fromCharCode(parseInt(i,10))}return function(i){return i.replace(t,s)}}();function Yt(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function D0(t){for(var s="",r=0,i=0,l=0,c=0,u=0,h=0;r<t.length;){if(i=t.charCodeAt(r++),i<128){s+=String.fromCharCode(i);continue}if(l=t.charCodeAt(r++),i>191&&i<224){u=(i&31)<<6,u|=l&63,s+=String.fromCharCode(u);continue}if(c=t.charCodeAt(r++),i<240){s+=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63);continue}u=t.charCodeAt(r++),h=((i&7)<<18|(l&63)<<12|(c&63)<<6|u&63)-65536,s+=String.fromCharCode(55296+(h>>>10&1023)),s+=String.fromCharCode(56320+(h&1023))}return s}function KC(t){var s=Uo(2*t.length),r,i,l=1,c=0,u=0,h;for(i=0;i<t.length;i+=l)l=1,(h=t.charCodeAt(i))<128?r=h:h<224?(r=(h&31)*64+(t.charCodeAt(i+1)&63),l=2):h<240?(r=(h&15)*4096+(t.charCodeAt(i+1)&63)*64+(t.charCodeAt(i+2)&63),l=3):(l=4,r=(h&7)*262144+(t.charCodeAt(i+1)&63)*4096+(t.charCodeAt(i+2)&63)*64+(t.charCodeAt(i+3)&63),r-=65536,u=55296+(r>>>10&1023),r=56320+(r&1023)),u!==0&&(s[c++]=u&255,s[c++]=u>>>8,u=0),s[c++]=r%256,s[c++]=r>>>8;return s.slice(0,c).toString("ucs2")}function JC(t){return Gl(t,"binary").toString("utf8")}var qf="foo bar baz",Ft=pt&&(JC(qf)==D0(qf)&&JC||KC(qf)==D0(qf)&&KC)||D0,Pu=pt?function(t){return Gl(t,"utf8").toString("binary")}:function(t){for(var s=[],r=0,i=0,l=0;r<t.length;)switch(i=t.charCodeAt(r++),!0){case i<128:s.push(String.fromCharCode(i));break;case i<2048:s.push(String.fromCharCode(192+(i>>6))),s.push(String.fromCharCode(128+(i&63)));break;case(i>=55296&&i<57344):i-=55296,l=t.charCodeAt(r++)-56320+(i<<10),s.push(String.fromCharCode(240+(l>>18&7))),s.push(String.fromCharCode(144+(l>>12&63))),s.push(String.fromCharCode(128+(l>>6&63))),s.push(String.fromCharCode(128+(l&63)));break;default:s.push(String.fromCharCode(224+(i>>12))),s.push(String.fromCharCode(128+(i>>6&63))),s.push(String.fromCharCode(128+(i&63)))}return s.join("")},Lh=function(){var t={};return function(r,i){var l=r+"|"+(i||"");return t[l]?t[l]:t[l]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",i||"")}}(),pB=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(r){for(var i=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),l=0;l<t.length;++l)i=i.replace(t[l][0],t[l][1]);return i}}(),gB=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),EB=/<\/?(?:vt:)?variant>/g,mB=/<(?:vt:)([^>]*)>([\s\S]*)</;function qC(t,s){var r=st(t),i=t.match(gB(r.baseType))||[],l=[];if(i.length!=r.size){if(s.WTF)throw new Error("unexpected vector length "+i.length+" != "+r.size);return l}return i.forEach(function(c){var u=c.replace(EB,"").match(mB);u&&l.push({v:Ft(u[2]),t:u[1]})}),l}function pI(t){if(pt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ft(Vl(hI(t)));throw new Error("Bad input format: expected Buffer or string")}var Ah=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,$B={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},IB=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function OB(t,s){for(var r=1-2*(t[s+7]>>>7),i=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),l=t[s+6]&15,c=5;c>=0;--c)l=l*256+t[s+c];return i==2047?l==0?r*(1/0):NaN:(i==0?i=-1022:(i-=1023,l+=Math.pow(2,52)),r*Math.pow(2,i-52)*l)}function SB(t,s,r){var i=(s<0||1/s==-1/0?1:0)<<7,l=0,c=0,u=i?-s:s;isFinite(u)?u==0?l=c=0:(l=Math.floor(Math.log(u)/Math.LN2),c=u*Math.pow(2,52-l),l<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?l=-1022:(c-=Math.pow(2,52),l+=1023)):(l=2047,c=isNaN(s)?26985:0);for(var h=0;h<=5;++h,c/=256)t[r+h]=c&255;t[r+6]=(l&15)<<4|c&15,t[r+7]=l>>4|i}var ZC=function(t){for(var s=[],r=10240,i=0;i<t[0].length;++i)if(t[0][i])for(var l=0,c=t[0][i].length;l<c;l+=r)s.push.apply(s,t[0][i].slice(l,l+r));return s},QC=pt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:Gl(s)})):ZC(t)}:ZC,ex=function(t,s,r){for(var i=[],l=s;l<r;l+=2)i.push(String.fromCharCode(Bi(t,l)));return i.join("").replace(Sn,"")},gI=pt?function(t,s,r){return Buffer.isBuffer(t)?t.toString("utf16le",s,r).replace(Sn,""):ex(t,s,r)}:ex,tx=function(t,s,r){for(var i=[],l=s;l<s+r;++l)i.push(("0"+t[l].toString(16)).slice(-2));return i.join("")},ly=pt?function(t,s,r){return Buffer.isBuffer(t)?t.toString("hex",s,s+r):tx(t,s,r)}:tx,rx=function(t,s,r){for(var i=[],l=s;l<r;l++)i.push(String.fromCharCode(Pa(t,l)));return i.join("")},Bh=pt?function(s,r,i){return Buffer.isBuffer(s)?s.toString("utf8",r,i):rx(s,r,i)}:rx,ay=function(t,s){var r=jn(t,s);return r>0?Bh(t,s+4,s+4+r-1):""},cy=ay,uy=function(t,s){var r=jn(t,s);return r>0?Bh(t,s+4,s+4+r-1):""},hy=uy,dy=function(t,s){var r=2*jn(t,s);return r>0?Bh(t,s+4,s+4+r-1):""},fy=dy,_y=function(s,r){var i=jn(s,r);return i>0?gI(s,r+4,r+4+i):""},Ty=_y,py=function(t,s){var r=jn(t,s);return r>0?Bh(t,s+4,s+4+r):""},gy=py,Ey=function(t,s){return OB(t,s)},K_=Ey,my=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};pt&&(cy=function(s,r){if(!Buffer.isBuffer(s))return ay(s,r);var i=s.readUInt32LE(r);return i>0?s.toString("utf8",r+4,r+4+i-1):""},hy=function(s,r){if(!Buffer.isBuffer(s))return uy(s,r);var i=s.readUInt32LE(r);return i>0?s.toString("utf8",r+4,r+4+i-1):""},fy=function(s,r){if(!Buffer.isBuffer(s))return dy(s,r);var i=2*s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+i-1)},Ty=function(s,r){if(!Buffer.isBuffer(s))return _y(s,r);var i=s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+i)},gy=function(s,r){if(!Buffer.isBuffer(s))return py(s,r);var i=s.readUInt32LE(r);return s.toString("utf8",r+4,r+4+i)},K_=function(s,r){return Buffer.isBuffer(s)?s.readDoubleLE(r):Ey(s,r)},my=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var Pa=function(t,s){return t[s]},Bi=function(t,s){return t[s+1]*256+t[s]},RB=function(t,s){var r=t[s+1]*256+t[s];return r<32768?r:(65535-r+1)*-1},jn=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},$l=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},LB=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function zu(t,s){var r="",i,l,c=[],u,h,f,_;switch(s){case"dbcs":if(_=this.l,pt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(f=0;f<t;++f)r+=String.fromCharCode(Bi(this,_)),_+=2;t*=2;break;case"utf8":r=Bh(this,this.l,this.l+t);break;case"utf16le":t*=2,r=gI(this,this.l,this.l+t);break;case"wstr":return zu.call(this,t,"dbcs");case"lpstr-ansi":r=cy(this,this.l),t=4+jn(this,this.l);break;case"lpstr-cp":r=hy(this,this.l),t=4+jn(this,this.l);break;case"lpwstr":r=fy(this,this.l),t=4+2*jn(this,this.l);break;case"lpp4":t=4+jn(this,this.l),r=Ty(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+jn(this,this.l),r=gy(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(u=Pa(this,this.l+t++))!==0;)c.push(Jf(u));r=c.join("");break;case"_wstr":for(t=0,r="";(u=Bi(this,this.l+t))!==0;)c.push(Jf(u)),t+=2;t+=2,r=c.join("");break;case"dbcs-cont":for(r="",_=this.l,f=0;f<t;++f){if(this.lens&&this.lens.indexOf(_)!==-1)return u=Pa(this,_),this.l=_+1,h=zu.call(this,t-f,u?"dbcs-cont":"sbcs-cont"),c.join("")+h;c.push(Jf(Bi(this,_))),_+=2}r=c.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",_=this.l,f=0;f!=t;++f){if(this.lens&&this.lens.indexOf(_)!==-1)return u=Pa(this,_),this.l=_+1,h=zu.call(this,t-f,u?"dbcs-cont":"sbcs-cont"),c.join("")+h;c.push(Jf(Pa(this,_))),_+=1}r=c.join("");break;default:switch(t){case 1:return i=Pa(this,this.l),this.l++,i;case 2:return i=(s==="i"?RB:Bi)(this,this.l),this.l+=2,i;case 4:case-4:return s==="i"||!(this[this.l+3]&128)?(i=(t>0?$l:LB)(this,this.l),this.l+=4,i):(l=jn(this,this.l),this.l+=4,l);case 8:case-8:if(s==="f")return t==8?l=K_(this,this.l):l=K_([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,l;t=8;case 16:r=ly(this,this.l,t);break}}return this.l+=t,r}var AB=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255,t[r+2]=s>>>16&255,t[r+3]=s>>>24&255},vB=function(t,s,r){t[r]=s&255,t[r+1]=s>>8&255,t[r+2]=s>>16&255,t[r+3]=s>>24&255},CB=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255};function xB(t,s,r){var i=0,l=0;if(r==="dbcs"){for(l=0;l!=s.length;++l)CB(this,s.charCodeAt(l),this.l+2*l);i=2*s.length}else if(r==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),l=0;l!=s.length;++l)this[this.l+l]=s.charCodeAt(l)&255;i=s.length}else if(r==="hex"){for(;l<t;++l)this[this.l++]=parseInt(s.slice(2*l,2*l+2),16)||0;return this}else if(r==="utf16le"){var c=Math.min(this.l+t,this.length);for(l=0;l<Math.min(s.length,t);++l){var u=s.charCodeAt(l);this[this.l++]=u&255,this[this.l++]=u>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(t){case 1:i=1,this[this.l]=s&255;break;case 2:i=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:i=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:i=4,AB(this,s,this.l);break;case 8:if(i=8,r==="f"){SB(this,s,this.l);break}case 16:break;case-4:i=4,vB(this,s,this.l);break}return this.l+=i,this}function $y(t,s){var r=ly(this,this.l,t.length>>1);if(r!==t)throw new Error(s+"Expected "+t+" saw "+r);this.l+=t.length>>1}function jr(t,s){t.l=s,t.read_shift=zu,t.chk=$y,t.write_shift=xB}function fn(t,s){t.l+=s}function Ar(t){var s=Uo(t);return jr(s,0),s}function Ji(t,s,r){if(t){var i,l,c;jr(t,t.l||0);for(var u=t.length,h=0,f=0;t.l<u;){h=t.read_shift(1),h&128&&(h=(h&127)+((t.read_shift(1)&127)<<7));var _=tT[h]||tT[65535];for(i=t.read_shift(1),c=i&127,l=1;l<4&&i&128;++l)c+=((i=t.read_shift(1))&127)<<7*l;f=t.l+c;var T=_.f&&_.f(t,c,r);if(t.l=f,s(T,_,h))return}}}function Jm(){var t=[],s=pt?256:2048,r=function(_){var T=Ar(_);return jr(T,0),T},i=r(s),l=function(){i&&(i.length>i.l&&(i=i.slice(0,i.l),i.l=i.length),i.length>0&&t.push(i),i=null)},c=function(_){return i&&_<i.length-i.l?i:(l(),i=r(Math.max(_+1,s)))},u=function(){return l(),So(t)},h=function(_){l(),i=_,i.l==null&&(i.l=i.length),c(s)};return{next:c,push:h,end:u,_bufs:t}}function Yu(t,s,r){var i=Jr(t);if(s.s?(i.cRel&&(i.c+=s.s.c),i.rRel&&(i.r+=s.s.r)):(i.cRel&&(i.c+=s.c),i.rRel&&(i.r+=s.r)),!r||r.biff<12){for(;i.c>=256;)i.c-=256;for(;i.r>=65536;)i.r-=65536}return i}function nx(t,s,r){var i=Jr(t);return i.s=Yu(i.s,s.s,r),i.e=Yu(i.e,s.s,r),i}function Ku(t,s){if(t.cRel&&t.c<0)for(t=Jr(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=Jr(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var r=ft(t);return!t.cRel&&t.cRel!=null&&(r=yB(r)),!t.rRel&&t.rRel!=null&&(r=NB(r)),r}function P0(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+In(t.s.c)+":"+(t.e.cRel?"":"$")+In(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+Jn(t.s.r)+":"+(t.e.rRel?"":"$")+Jn(t.e.r):Ku(t.s,s.biff)+":"+Ku(t.e,s.biff)}function Iy(t){return parseInt(bB(t),10)-1}function Jn(t){return""+(t+1)}function NB(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function bB(t){return t.replace(/\$(\d+)$/,"$1")}function Oy(t){for(var s=kB(t),r=0,i=0;i!==s.length;++i)r=26*r+s.charCodeAt(i)-64;return r-1}function In(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function yB(t){return t.replace(/^([A-Z])/,"$$$1")}function kB(t){return t.replace(/^\$([A-Z])/,"$1")}function Fs(t){for(var s=0,r=0,i=0;i<t.length;++i){var l=t.charCodeAt(i);l>=48&&l<=57?s=10*s+(l-48):l>=65&&l<=90&&(r=26*r+(l-64))}return{c:r-1,r:s-1}}function ft(t){for(var s=t.c+1,r="";s;s=(s-1)/26|0)r=String.fromCharCode((s-1)%26+65)+r;return r+(t.r+1)}function EI(t){var s=t.indexOf(":");return s==-1?{s:Fs(t),e:Fs(t)}:{s:Fs(t.slice(0,s)),e:Fs(t.slice(s+1))}}function vt(t,s){return typeof s>"u"||typeof s=="number"?vt(t.s,t.e):(typeof t!="string"&&(t=ft(t)),typeof s!="string"&&(s=ft(s)),t==s?t:t+":"+s)}function Hr(t){var s={s:{c:0,r:0},e:{c:0,r:0}},r=0,i=0,l=0,c=t.length;for(r=0;i<c&&!((l=t.charCodeAt(i)-64)<1||l>26);++i)r=26*r+l;for(s.s.c=--r,r=0;i<c&&!((l=t.charCodeAt(i)-48)<0||l>9);++i)r=10*r+l;if(s.s.r=--r,i===c||l!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++i,r=0;i!=c&&!((l=t.charCodeAt(i)-64)<1||l>26);++i)r=26*r+l;for(s.e.c=--r,r=0;i!=c&&!((l=t.charCodeAt(i)-48)<0||l>9);++i)r=10*r+l;return s.e.r=--r,s}function sx(t,s){var r=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=ms(t.z,r?Qn(s):s)}catch{}try{return t.w=ms((t.XF||{}).numFmtId||(r?14:0),r?Qn(s):s)}catch{return""+s}}function $c(t,s,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?zl[t.v]||t.v:s==null?sx(t,t.v):sx(t,s))}function Wl(t,s){var r=s&&s.sheet?s.sheet:"Sheet1",i={};return i[r]=t,{SheetNames:[r],Sheets:i}}function wB(t,s,r){var i=r||{},l=t?Array.isArray(t):i.dense,c=t||(l?[]:{}),u=0,h=0;if(c&&i.origin!=null){if(typeof i.origin=="number")u=i.origin;else{var f=typeof i.origin=="string"?Fs(i.origin):i.origin;u=f.r,h=f.c}c["!ref"]||(c["!ref"]="A1:A1")}var _={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var T=Hr(c["!ref"]);_.s.c=T.s.c,_.s.r=T.s.r,_.e.c=Math.max(_.e.c,T.e.c),_.e.r=Math.max(_.e.r,T.e.r),u==-1&&(_.e.r=u=T.e.r+1)}for(var g=0;g!=s.length;++g)if(s[g]){if(!Array.isArray(s[g]))throw new Error("aoa_to_sheet expects an array of arrays");for(var E=0;E!=s[g].length;++E)if(!(typeof s[g][E]>"u")){var S={v:s[g][E]},R=u+g,L=h+E;if(_.s.r>R&&(_.s.r=R),_.s.c>L&&(_.s.c=L),_.e.r<R&&(_.e.r=R),_.e.c<L&&(_.e.c=L),s[g][E]&&typeof s[g][E]=="object"&&!Array.isArray(s[g][E])&&!(s[g][E]instanceof Date))S=s[g][E];else if(Array.isArray(S.v)&&(S.f=s[g][E][1],S.v=S.v[0]),S.v===null)if(S.f)S.t="n";else if(i.nullError)S.t="e",S.v=0;else if(i.sheetStubs)S.t="z";else continue;else typeof S.v=="number"?S.t="n":typeof S.v=="boolean"?S.t="b":S.v instanceof Date?(S.z=i.dateNF||dt[14],i.cellDates?(S.t="d",S.w=ms(S.z,Qn(S.v))):(S.t="n",S.v=Qn(S.v),S.w=ms(S.z,S.v))):S.t="s";if(l)c[R]||(c[R]=[]),c[R][L]&&c[R][L].z&&(S.z=c[R][L].z),c[R][L]=S;else{var x=ft({c:L,r:R});c[x]&&c[x].z&&(S.z=c[x].z),c[x]=S}}}return _.s.c<1e7&&(c["!ref"]=vt(_)),c}function Uh(t,s){return wB(null,t,s)}function MB(t){return t.read_shift(4,"i")}function hn(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function DB(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function mI(t,s){var r=t.l,i=t.read_shift(1),l=hn(t),c=[],u={t:l,h:l};if(i&1){for(var h=t.read_shift(4),f=0;f!=h;++f)c.push(DB(t));u.r=c}else u.r=[{ich:0,ifnt:0}];return t.l=r+s,u}var PB=mI;function $s(t){var s=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:r}}function Xl(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}var FB=hn;function $I(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}var BB=hn,qm=$I;function II(t){var s=t.slice(t.l,t.l+4),r=s[0]&1,i=s[0]&2;t.l+=4;var l=i===0?K_([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):$l(s,0)>>2;return r?l/100:l}function Sy(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}var jl=Sy;function cn(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function UB(t){var s={},r=t.read_shift(1),i=r>>>1,l=t.read_shift(1),c=t.read_shift(2,"i"),u=t.read_shift(1),h=t.read_shift(1),f=t.read_shift(1);switch(t.l++,i){case 0:s.auto=1;break;case 1:s.index=l;var _=xl[l];_&&(s.rgb=Ch(_));break;case 2:s.rgb=Ch([u,h,f]);break;case 3:s.theme=l;break}return c!=0&&(s.tint=c>0?c/32767:c/32768),s}function HB(t){var s=t.read_shift(1);t.l++;var r={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return r}function Ry(t,s){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},i=t.read_shift(4);switch(i){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(i>400)throw new Error("Unsupported Clipboard: "+i.toString(16));return t.l-=4,t.read_shift(0,s==1?"lpstr":"lpwstr")}function GB(t){return Ry(t,1)}function VB(t){return Ry(t,2)}var OI=2,xn=3,Zf=11,ix=12,J_=19,Qf=64,WB=65,XB=71,jB=4108,zB=4126,Fr=80,Ly=81,YB=[Fr,Ly],KB={1:{n:"CodePage",t:OI},2:{n:"Category",t:Fr},3:{n:"PresentationFormat",t:Fr},4:{n:"ByteCount",t:xn},5:{n:"LineCount",t:xn},6:{n:"ParagraphCount",t:xn},7:{n:"SlideCount",t:xn},8:{n:"NoteCount",t:xn},9:{n:"HiddenCount",t:xn},10:{n:"MultimediaClipCount",t:xn},11:{n:"ScaleCrop",t:Zf},12:{n:"HeadingPairs",t:jB},13:{n:"TitlesOfParts",t:zB},14:{n:"Manager",t:Fr},15:{n:"Company",t:Fr},16:{n:"LinksUpToDate",t:Zf},17:{n:"CharacterCount",t:xn},19:{n:"SharedDoc",t:Zf},22:{n:"HyperlinksChanged",t:Zf},23:{n:"AppVersion",t:xn,p:"version"},24:{n:"DigSig",t:WB},26:{n:"ContentType",t:Fr},27:{n:"ContentStatus",t:Fr},28:{n:"Language",t:Fr},29:{n:"Version",t:Fr},255:{},2147483648:{n:"Locale",t:J_},2147483651:{n:"Behavior",t:J_},1919054434:{}},JB={1:{n:"CodePage",t:OI},2:{n:"Title",t:Fr},3:{n:"Subject",t:Fr},4:{n:"Author",t:Fr},5:{n:"Keywords",t:Fr},6:{n:"Comments",t:Fr},7:{n:"Template",t:Fr},8:{n:"LastAuthor",t:Fr},9:{n:"RevNumber",t:Fr},10:{n:"EditTime",t:Qf},11:{n:"LastPrinted",t:Qf},12:{n:"CreatedDate",t:Qf},13:{n:"ModifiedDate",t:Qf},14:{n:"PageCount",t:xn},15:{n:"WordCount",t:xn},16:{n:"CharCount",t:xn},17:{n:"Thumbnail",t:XB},18:{n:"Application",t:Fr},19:{n:"DocSecurity",t:xn},255:{},2147483648:{n:"Locale",t:J_},2147483651:{n:"Behavior",t:J_},1919054434:{}},ox={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},qB=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function ZB(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var QB=ZB([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),xl=Jr(QB),zl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},Ay={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},lx={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function e2(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function t2(t){var s=e2();if(!t||!t.match)return s;var r={};if((t.match(_n)||[]).forEach(function(i){var l=st(i);switch(l[0].replace(hB,"<")){case"<?xml":break;case"<Types":s.xmlns=l["xmlns"+(l[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[l.Extension]=l.ContentType;break;case"<Override":s[lx[l.ContentType]]!==void 0&&s[lx[l.ContentType]].push(l.PartName);break}}),s.xmlns!==$B.CT)throw new Error("Unknown Namespace: "+s.xmlns);return s.calcchain=s.calcchains.length>0?s.calcchains[0]:"",s.sst=s.strs.length>0?s.strs[0]:"",s.style=s.styles.length>0?s.styles[0]:"",s.defaults=r,delete s.calcchains,s}var Ja={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Zm(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function Ju(t,s){var r={"!id":{}};if(!t)return r;s.charAt(0)!=="/"&&(s="/"+s);var i={};return(t.match(_n)||[]).forEach(function(l){var c=st(l);if(c[0]==="<Relationship"){var u={};u.Type=c.Type,u.Target=c.Target,u.Id=c.Id,c.TargetMode&&(u.TargetMode=c.TargetMode);var h=c.TargetMode==="External"?c.Target:Du(c.Target,s);r[h]=u,i[c.Id]=u}}),r["!id"]=i,r}var r2="application/vnd.oasis.opendocument.spreadsheet";function n2(t,s){for(var r=pI(t),i,l;i=Ah.exec(r);)switch(i[3]){case"manifest":break;case"file-entry":if(l=st(i[0],!1),l.path=="/"&&l.type!==r2)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(s&&s.WTF)throw i}}var qu=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],s2=function(){for(var t=new Array(qu.length),s=0;s<qu.length;++s){var r=qu[s],i="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[s]=new RegExp("<"+i+"[^>]*>([\\s\\S]*?)</"+i+">")}return t}();function vy(t){var s={};t=Ft(t);for(var r=0;r<qu.length;++r){var i=qu[r],l=t.match(s2[r]);l!=null&&l.length>0&&(s[i[1]]=$t(l[1])),i[2]==="date"&&s[i[1]]&&(s[i[1]]=Kr(s[i[1]]))}return s}var i2=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function Cy(t,s,r,i){var l=[];if(typeof t=="string")l=qC(t,i);else for(var c=0;c<t.length;++c)l=l.concat(t[c].map(function(T){return{v:T}}));var u=typeof s=="string"?qC(s,i).map(function(T){return T.v}):s,h=0,f=0;if(u.length>0)for(var _=0;_!==l.length;_+=2){switch(f=+l[_+1].v,l[_].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=f,r.SheetNames=u.slice(h,h+f);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=f,r.DefinedNames=u.slice(h,h+f);break;case"Charts":case"Diagramme":r.Chartsheets=f,r.ChartNames=u.slice(h,h+f);break}h+=f}}function o2(t,s,r){var i={};return s||(s={}),t=Ft(t),i2.forEach(function(l){var c=(t.match(Lh(l[0]))||[])[1];switch(l[2]){case"string":c&&(s[l[1]]=$t(c));break;case"bool":s[l[1]]=c==="true";break;case"raw":var u=t.match(new RegExp("<"+l[0]+"[^>]*>([\\s\\S]*?)</"+l[0]+">"));u&&u.length>0&&(i[l[1]]=u[1]);break}}),i.HeadingPairs&&i.TitlesOfParts&&Cy(i.HeadingPairs,i.TitlesOfParts,s,r),s}var l2=/<[^>]+>[^<]*/g;function a2(t,s){var r={},i="",l=t.match(l2);if(l)for(var c=0;c!=l.length;++c){var u=l[c],h=st(u);switch(h[0]){case"<?xml":break;case"<Properties":break;case"<property":i=$t(h.name);break;case"</property>":i=null;break;default:if(u.indexOf("<vt:")===0){var f=u.split(">"),_=f[0].slice(4),T=f[1];switch(_){case"lpstr":case"bstr":case"lpwstr":r[i]=$t(T);break;case"bool":r[i]=Yt(T);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[i]=parseInt(T,10);break;case"r4":case"r8":case"decimal":r[i]=parseFloat(T);break;case"filetime":case"date":r[i]=Kr(T);break;case"cy":case"error":r[i]=$t(T);break;default:if(_.slice(-1)=="/")break;s.WTF&&typeof console<"u"&&console.warn("Unexpected",u,_,f)}}else if(u.slice(0,2)!=="</"){if(s.WTF)throw new Error(u)}}}return r}var c2={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},F0;function u2(t,s,r){F0||(F0=_I(c2)),s=F0[s]||s,t[s]=r}function SI(t){var s=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+s/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function xy(t,s,r){var i=t.l,l=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-i&3;)++t.l;return l}function Ny(t,s,r){var i=t.read_shift(0,"lpwstr");return i}function by(t,s,r){return s===31?Ny(t):xy(t,s,r)}function Qm(t,s,r){return by(t,s,r===!1?0:4)}function h2(t,s){if(!s)throw new Error("VtUnalignedString must have positive length");return by(t,s,0)}function d2(t){for(var s=t.read_shift(4),r=[],i=0;i!=s;++i){var l=t.l;r[i]=t.read_shift(0,"lpwstr").replace(Sn,""),t.l-l&2&&(t.l+=2)}return r}function f2(t){for(var s=t.read_shift(4),r=[],i=0;i!=s;++i)r[i]=t.read_shift(0,"lpstr-cp").replace(Sn,"");return r}function _2(t){var s=t.l,r=q_(t,Ly);t[t.l]==0&&t[t.l+1]==0&&t.l-s&2&&(t.l+=2);var i=q_(t,xn);return[r,i]}function T2(t){for(var s=t.read_shift(4),r=[],i=0;i<s/2;++i)r.push(_2(t));return r}function ax(t,s){for(var r=t.read_shift(4),i={},l=0;l!=r;++l){var c=t.read_shift(4),u=t.read_shift(4);i[c]=t.read_shift(u,s===1200?"utf16le":"utf8").replace(Sn,"").replace(Mu,"!"),s===1200&&u%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),i}function yy(t){var s=t.read_shift(4),r=t.slice(t.l,t.l+s);return t.l+=s,(s&3)>0&&(t.l+=4-(s&3)&3),r}function p2(t){var s={};return s.Size=t.read_shift(4),t.l+=s.Size+3-(s.Size-1)%4,s}function q_(t,s,r){var i=t.read_shift(2),l,c=r||{};if(t.l+=2,s!==ix&&i!==s&&YB.indexOf(s)===-1&&!((s&65534)==4126&&(i&65534)==4126))throw new Error("Expected type "+s+" saw "+i);switch(s===ix?i:s){case 2:return l=t.read_shift(2,"i"),c.raw||(t.l+=2),l;case 3:return l=t.read_shift(4,"i"),l;case 11:return t.read_shift(4)!==0;case 19:return l=t.read_shift(4),l;case 30:return xy(t,i,4).replace(Sn,"");case 31:return Ny(t);case 64:return SI(t);case 65:return yy(t);case 71:return p2(t);case 80:return Qm(t,i,!c.raw).replace(Sn,"");case 81:return h2(t,i).replace(Sn,"");case 4108:return T2(t);case 4126:case 4127:return i==4127?d2(t):f2(t);default:throw new Error("TypedPropertyValue unrecognized type "+s+" "+i)}}function cx(t,s){var r=t.l,i=t.read_shift(4),l=t.read_shift(4),c=[],u=0,h=0,f=-1,_={};for(u=0;u!=l;++u){var T=t.read_shift(4),g=t.read_shift(4);c[u]=[T,g+r]}c.sort(function(A,m){return A[1]-m[1]});var E={};for(u=0;u!=l;++u){if(t.l!==c[u][1]){var S=!0;if(u>0&&s)switch(s[c[u-1][0]].t){case 2:t.l+2===c[u][1]&&(t.l+=2,S=!1);break;case 80:t.l<=c[u][1]&&(t.l=c[u][1],S=!1);break;case 4108:t.l<=c[u][1]&&(t.l=c[u][1],S=!1);break}if((!s||u==0)&&t.l<=c[u][1]&&(S=!1,t.l=c[u][1]),S)throw new Error("Read Error: Expected address "+c[u][1]+" at "+t.l+" :"+u)}if(s){var R=s[c[u][0]];if(E[R.n]=q_(t,R.t,{raw:!0}),R.p==="version"&&(E[R.n]=String(E[R.n]>>16)+"."+("0000"+String(E[R.n]&65535)).slice(-4)),R.n=="CodePage")switch(E[R.n]){case 0:E[R.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Ds(h=E[R.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+E[R.n])}}else if(c[u][0]===1){if(h=E.CodePage=q_(t,OI),Ds(h),f!==-1){var L=t.l;t.l=c[f][1],_=ax(t,h),t.l=L}}else if(c[u][0]===0){if(h===0){f=u,t.l=c[u+1][1];continue}_=ax(t,h)}else{var x=_[c[u][0]],v;switch(t[t.l]){case 65:t.l+=4,v=yy(t);break;case 30:t.l+=4,v=Qm(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,v=Qm(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,v=t.read_shift(4,"i");break;case 19:t.l+=4,v=t.read_shift(4);break;case 5:t.l+=4,v=t.read_shift(8,"f");break;case 11:t.l+=4,v=_r(t,4);break;case 64:t.l+=4,v=Kr(SI(t));break;default:throw new Error("unparsed value: "+t[t.l])}E[x]=v}}return t.l=r+i,E}function ux(t,s,r){var i=t.content;if(!i)return{};jr(i,0);var l,c,u,h,f=0;i.chk("feff","Byte Order: "),i.read_shift(2);var _=i.read_shift(4),T=i.read_shift(16);if(T!==gt.utils.consts.HEADER_CLSID&&T!==r)throw new Error("Bad PropertySet CLSID "+T);if(l=i.read_shift(4),l!==1&&l!==2)throw new Error("Unrecognized #Sets: "+l);if(c=i.read_shift(16),h=i.read_shift(4),l===1&&h!==i.l)throw new Error("Length mismatch: "+h+" !== "+i.l);l===2&&(u=i.read_shift(16),f=i.read_shift(4));var g=cx(i,s),E={SystemIdentifier:_};for(var S in g)E[S]=g[S];if(E.FMTID=c,l===1)return E;if(f-i.l==2&&(i.l+=2),i.l!==f)throw new Error("Length mismatch 2: "+i.l+" !== "+f);var R;try{R=cx(i,null)}catch{}for(S in R)E[S]=R[S];return E.FMTID=[c,u],E}function po(t,s){return t.read_shift(s),null}function g2(t,s,r){for(var i=[],l=t.l+s;t.l<l;)i.push(r(t,l-t.l));if(l!==t.l)throw new Error("Slurp error");return i}function _r(t,s){return t.read_shift(s)===1}function Ir(t){return t.read_shift(2,"u")}function ky(t,s){return g2(t,s,Ir)}function E2(t){var s=t.read_shift(1),r=t.read_shift(1);return r===1?s:s===1}function Hh(t,s,r){var i=t.read_shift(r&&r.biff>=12?2:1),l="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var c=t.read_shift(1);c&&(l="dbcs-cont")}else r.biff==12&&(l="wstr");r.biff>=2&&r.biff<=5&&(l="cpstr");var u=i?t.read_shift(i,l):"";return u}function m2(t){var s=t.read_shift(2),r=t.read_shift(1),i=r&4,l=r&8,c=1+(r&1),u=0,h,f={};l&&(u=t.read_shift(2)),i&&(h=t.read_shift(4));var _=c==2?"dbcs-cont":"sbcs-cont",T=s===0?"":t.read_shift(s,_);return l&&(t.l+=4*u),i&&(t.l+=h),f.t=T,l||(f.raw="<t>"+f.t+"</t>",f.r=f.t),f}function Pl(t,s,r){var i;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(s,"cpstr");if(r.biff>=12)return t.read_shift(s,"dbcs-cont")}var l=t.read_shift(1);return l===0?i=t.read_shift(s,"sbcs-cont"):i=t.read_shift(s,"dbcs-cont"),i}function Gh(t,s,r){var i=t.read_shift(r&&r.biff==2?1:2);return i===0?(t.l++,""):Pl(t,i,r)}function Yl(t,s,r){if(r.biff>5)return Gh(t,s,r);var i=t.read_shift(1);return i===0?(t.l++,""):t.read_shift(i,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function $2(t){var s=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[s,r]}function I2(t){var s=t.read_shift(4),r=t.l,i=!1;s>24&&(t.l+=s-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(i=!0),t.l=r);var l=t.read_shift((i?s-24:s)>>1,"utf16le").replace(Sn,"");return i&&(t.l+=24),l}function O2(t){for(var s=t.read_shift(2),r="";s-- >0;)r+="../";var i=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var l=t.read_shift(4);if(l===0)return r+i.replace(/\\/g,"/");var c=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var u=t.read_shift(c>>1,"utf16le").replace(Sn,"");return r+u}function S2(t,s){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return I2(t);case"0303000000000000c000000000000046":return O2(t);default:throw new Error("Unsupported Moniker "+r)}}function e_(t){var s=t.read_shift(4),r=s>0?t.read_shift(s,"utf16le").replace(Sn,""):"";return r}function R2(t,s){var r=t.l+s,i=t.read_shift(4);if(i!==2)throw new Error("Unrecognized streamVersion: "+i);var l=t.read_shift(2);t.l+=2;var c,u,h,f,_="",T,g;l&16&&(c=e_(t,r-t.l)),l&128&&(u=e_(t,r-t.l)),(l&257)===257&&(h=e_(t,r-t.l)),(l&257)===1&&(f=S2(t,r-t.l)),l&8&&(_=e_(t,r-t.l)),l&32&&(T=t.read_shift(16)),l&64&&(g=SI(t)),t.l=r;var E=u||h||f||"";E&&_&&(E+="#"+_),E||(E="#"+_),l&2&&E.charAt(0)=="/"&&E.charAt(1)!="/"&&(E="file://"+E);var S={Target:E};return T&&(S.guid=T),g&&(S.time=g),c&&(S.Tooltip=c),S}function wy(t){var s=t.read_shift(1),r=t.read_shift(1),i=t.read_shift(1),l=t.read_shift(1);return[s,r,i,l]}function My(t,s){var r=wy(t);return r[3]=0,r}function gi(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{r:s,c:r,ixfe:i}}function L2(t){var s=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:s,flags:r}}function A2(t,s,r){return s===0?"":Yl(t,s,r)}function v2(t,s,r){var i=r.biff>8?4:2,l=t.read_shift(i),c=t.read_shift(i,"i"),u=t.read_shift(i,"i");return[l,c,u]}function Dy(t){var s=t.read_shift(2),r=II(t);return[s,r]}function C2(t,s,r){t.l+=4,s-=4;var i=t.l+s,l=Hh(t,s,r),c=t.read_shift(2);if(i-=t.l,c!==i)throw new Error("Malformed AddinUdf: padding = "+i+" != "+c);return t.l+=c,l}function $T(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2);return{s:{c:i,r:s},e:{c:l,r}}}function Py(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(1),l=t.read_shift(1);return{s:{c:i,r:s},e:{c:l,r}}}var x2=Py;function Fy(t){t.l+=4;var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return t.l+=12,[r,s,i]}function N2(t){var s={};return t.l+=4,t.l+=16,s.fSharedNote=t.read_shift(2),t.l+=4,s}function b2(t){var s={};return t.l+=4,t.cf=t.read_shift(2),s}function on(t){t.l+=2,t.l+=t.read_shift(2)}var y2={0:on,4:on,5:on,6:on,7:b2,8:on,9:on,10:on,11:on,12:on,13:N2,14:on,15:on,16:on,17:on,18:on,19:on,20:on,21:Fy};function k2(t,s){for(var r=t.l+s,i=[];t.l<r;){var l=t.read_shift(2);t.l-=2;try{i.push(y2[l](t,r-t.l))}catch{return t.l=r,i}}return t.l!=r&&(t.l=r),i}function t_(t,s){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),s-=2,s>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(s>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(s),r}function w2(t,s){return s===0||t.read_shift(2),1200}function M2(t,s,r){if(r.enc)return t.l+=s,"";var i=t.l,l=Yl(t,0,r);return t.read_shift(s+i-t.l),l}function D2(t,s,r){var i=r&&r.biff==8||s==2?t.read_shift(2):(t.l+=s,0);return{fDialog:i&16,fBelow:i&64,fRight:i&128}}function P2(t,s,r){var i=t.read_shift(4),l=t.read_shift(1)&3,c=t.read_shift(1);switch(c){case 0:c="Worksheet";break;case 1:c="Macrosheet";break;case 2:c="Chartsheet";break;case 6:c="VBAModule";break}var u=Hh(t,0,r);return u.length===0&&(u="Sheet1"),{pos:i,hs:l,dt:c,name:u}}function F2(t,s){for(var r=t.l+s,i=t.read_shift(4),l=t.read_shift(4),c=[],u=0;u!=l&&t.l<r;++u)c.push(m2(t));return c.Count=i,c.Unique=l,c}function B2(t,s){var r={};return r.dsst=t.read_shift(2),t.l+=s-2,r}function U2(t){var s={};s.r=t.read_shift(2),s.c=t.read_shift(2),s.cnt=t.read_shift(2)-s.c;var r=t.read_shift(2);t.l+=4;var i=t.read_shift(1);return t.l+=3,i&7&&(s.level=i&7),i&32&&(s.hidden=!0),i&64&&(s.hpt=r/20),s}function H2(t){var s=L2(t);if(s.type!=2211)throw new Error("Invalid Future Record "+s.type);var r=t.read_shift(4);return r!==0}function G2(t){return t.read_shift(2),t.read_shift(4)}function hx(t,s,r){var i=0;r&&r.biff==2||(i=t.read_shift(2));var l=t.read_shift(2);r&&r.biff==2&&(i=1-(l>>15),l&=32767);var c={Unsynced:i&1,DyZero:(i&2)>>1,ExAsc:(i&4)>>2,ExDsc:(i&8)>>3};return[c,l]}function V2(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2),h=t.read_shift(2),f=t.read_shift(2),_=t.read_shift(2);return{Pos:[s,r],Dim:[i,l],Flags:c,CurTab:u,FirstTab:h,Selected:f,TabRatio:_}}function W2(t,s,r){if(r&&r.biff>=2&&r.biff<5)return{};var i=t.read_shift(2);return{RTL:i&64}}function X2(){}function j2(t,s,r){var i={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return i.name=Hh(t,0,r),i}function z2(t){var s=gi(t);return s.isst=t.read_shift(4),s}function Y2(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=t.l+s,l=gi(t);r.biff==2&&t.l++;var c=Gh(t,i-t.l,r);return l.val=c,l}function K2(t,s,r){var i=t.read_shift(2),l=Yl(t,0,r);return[i,l]}var J2=Yl;function dx(t,s,r){var i=t.l+s,l=r.biff==8||!r.biff?4:2,c=t.read_shift(l),u=t.read_shift(l),h=t.read_shift(2),f=t.read_shift(2);return t.l=i,{s:{r:c,c:h},e:{r:u,c:f}}}function q2(t){var s=t.read_shift(2),r=t.read_shift(2),i=Dy(t);return{r:s,c:r,ixfe:i[0],rknum:i[1]}}function Z2(t,s){for(var r=t.l+s-2,i=t.read_shift(2),l=t.read_shift(2),c=[];t.l<r;)c.push(Dy(t));if(t.l!==r)throw new Error("MulRK read error");var u=t.read_shift(2);if(c.length!=u-l+1)throw new Error("MulRK length mismatch");return{r:i,c:l,C:u,rkrec:c}}function Q2(t,s){for(var r=t.l+s-2,i=t.read_shift(2),l=t.read_shift(2),c=[];t.l<r;)c.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var u=t.read_shift(2);if(c.length!=u-l+1)throw new Error("MulBlank length mismatch");return{r:i,c:l,C:u,ixfe:c}}function eU(t,s,r,i){var l={},c=t.read_shift(4),u=t.read_shift(4),h=t.read_shift(4),f=t.read_shift(2);return l.patternType=qB[h>>26],i.cellStyles&&(l.alc=c&7,l.fWrap=c>>3&1,l.alcV=c>>4&7,l.fJustLast=c>>7&1,l.trot=c>>8&255,l.cIndent=c>>16&15,l.fShrinkToFit=c>>20&1,l.iReadOrder=c>>22&2,l.fAtrNum=c>>26&1,l.fAtrFnt=c>>27&1,l.fAtrAlc=c>>28&1,l.fAtrBdr=c>>29&1,l.fAtrPat=c>>30&1,l.fAtrProt=c>>31&1,l.dgLeft=u&15,l.dgRight=u>>4&15,l.dgTop=u>>8&15,l.dgBottom=u>>12&15,l.icvLeft=u>>16&127,l.icvRight=u>>23&127,l.grbitDiag=u>>30&3,l.icvTop=h&127,l.icvBottom=h>>7&127,l.icvDiag=h>>14&127,l.dgDiag=h>>21&15,l.icvFore=f&127,l.icvBack=f>>7&127,l.fsxButton=f>>14&1),l}function tU(t,s,r){var i={};return i.ifnt=t.read_shift(2),i.numFmtId=t.read_shift(2),i.flags=t.read_shift(2),i.fStyle=i.flags>>2&1,s-=6,i.data=eU(t,s,i.fStyle,r),i}function rU(t){t.l+=4;var s=[t.read_shift(2),t.read_shift(2)];if(s[0]!==0&&s[0]--,s[1]!==0&&s[1]--,s[0]>7||s[1]>7)throw new Error("Bad Gutters: "+s.join("|"));return s}function fx(t,s,r){var i=gi(t);(r.biff==2||s==9)&&++t.l;var l=E2(t);return i.val=l,i.t=l===!0||l===!1?"b":"e",i}function nU(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=gi(t),l=cn(t);return i.val=l,i}var _x=A2;function sU(t,s,r){var i=t.l+s,l=t.read_shift(2),c=t.read_shift(2);if(r.sbcch=c,c==1025||c==14849)return[c,l];if(c<1||c>255)throw new Error("Unexpected SupBook type: "+c);for(var u=Pl(t,c),h=[];i>t.l;)h.push(Gh(t));return[c,l,u,h]}function Tx(t,s,r){var i=t.read_shift(2),l,c={fBuiltIn:i&1,fWantAdvise:i>>>1&1,fWantPict:i>>>2&1,fOle:i>>>3&1,fOleLink:i>>>4&1,cf:i>>>5&1023,fIcon:i>>>15&1};return r.sbcch===14849&&(l=C2(t,s-2,r)),c.body=l||t.read_shift(s-2),typeof l=="string"&&(c.Name=l),c}var iU=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function px(t,s,r){var i=t.l+s,l=t.read_shift(2),c=t.read_shift(1),u=t.read_shift(1),h=t.read_shift(r&&r.biff==2?1:2),f=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),f=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var _=Pl(t,u,r);l&32&&(_=iU[_.charCodeAt(0)]);var T=i-t.l;r&&r.biff==2&&--T;var g=i==t.l||h===0||!(T>0)?[]:U4(t,T,r,h);return{chKey:c,Name:_,itab:f,rgce:g}}function By(t,s,r){if(r.biff<8)return oU(t,s,r);for(var i=[],l=t.l+s,c=t.read_shift(r.biff>8?4:2);c--!==0;)i.push(v2(t,r.biff>8?12:6,r));if(t.l!=l)throw new Error("Bad ExternSheet: "+t.l+" != "+l);return i}function oU(t,s,r){t[t.l+1]==3&&t[t.l]++;var i=Hh(t,s,r);return i.charCodeAt(0)==3?i.slice(1):i}function lU(t,s,r){if(r.biff<8){t.l+=s;return}var i=t.read_shift(2),l=t.read_shift(2),c=Pl(t,i,r),u=Pl(t,l,r);return[c,u]}function aU(t,s,r){var i=Py(t);t.l++;var l=t.read_shift(1);return s-=8,[H4(t,s,r),l,i]}function gx(t,s,r){var i=x2(t);switch(r.biff){case 2:t.l++,s-=7;break;case 3:case 4:t.l+=2,s-=8;break;default:t.l+=6,s-=12}return[i,F4(t,s,r)]}function cU(t){var s=t.read_shift(4)!==0,r=t.read_shift(4)!==0,i=t.read_shift(4);return[s,r,i]}function uU(t,s,r){if(!(r.biff<8)){var i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2),h=Yl(t,0,r);return r.biff<8&&t.read_shift(1),[{r:i,c:l},h,u,c]}}function hU(t,s,r){return uU(t,s,r)}function dU(t,s){for(var r=[],i=t.read_shift(2);i--;)r.push($T(t));return r}function fU(t,s,r){if(r&&r.biff<8)return TU(t,s,r);var i=Fy(t),l=k2(t,s-22,i[1]);return{cmo:i,ft:l}}var _U={8:function(t,s){var r=t.l+s;t.l+=10;var i=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var l=t.read_shift(1);return t.l+=l,t.l=r,{fmt:i}}};function TU(t,s,r){t.l+=4;var i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,s-=36;var u=[];return u.push((_U[i]||fn)(t,s,r)),{cmo:[l,i,c],ft:u}}function pU(t,s,r){var i=t.l,l="";try{t.l+=4;var c=(r.lastobj||{cmo:[0,0]}).cmo[1],u;[0,5,7,11,12,14].indexOf(c)==-1?t.l+=6:u=$2(t,6,r);var h=t.read_shift(2);t.read_shift(2),Ir(t,2);var f=t.read_shift(2);t.l+=f;for(var _=1;_<t.lens.length-1;++_){if(t.l-i!=t.lens[_])throw new Error("TxO: bad continue record");var T=t[t.l],g=Pl(t,t.lens[_+1]-t.lens[_]-1);if(l+=g,l.length>=(T?h:2*h))break}if(l.length!==h&&l.length!==h*2)throw new Error("cchText: "+h+" != "+l.length);return t.l=i+s,{t:l}}catch{return t.l=i+s,{t:l}}}function gU(t,s){var r=$T(t);t.l+=16;var i=R2(t,s-24);return[r,i]}function EU(t,s){t.read_shift(2);var r=$T(t),i=t.read_shift((s-10)/2,"dbcs-cont");return i=i.replace(Sn,""),[r,i]}function mU(t){var s=[0,0],r;return r=t.read_shift(2),s[0]=ox[r]||r,r=t.read_shift(2),s[1]=ox[r]||r,s}function $U(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(My(t));return r}function IU(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(My(t));return r}function OU(t){t.l+=2;var s={cxfs:0,crc:0};return s.cxfs=t.read_shift(2),s.crc=t.read_shift(4),s}function Uy(t,s,r){if(!r.cellStyles)return fn(t,s);var i=r&&r.biff>=12?4:2,l=t.read_shift(i),c=t.read_shift(i),u=t.read_shift(i),h=t.read_shift(i),f=t.read_shift(2);i==2&&(t.l+=2);var _={s:l,e:c,w:u,ixfe:h,flags:f};return(r.biff>=5||!r.biff)&&(_.level=f>>8&7),_}function SU(t,s){var r={};return s<32||(t.l+=16,r.header=cn(t),r.footer=cn(t),t.l+=2),r}function RU(t,s,r){var i={area:!1};if(r.biff!=5)return t.l+=s,i;var l=t.read_shift(1);return t.l+=3,l&16&&(i.area=!0),i}var LU=gi,AU=ky,vU=Gh;function CU(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(4),l={fmt:s,env:r,len:i,data:t.slice(t.l,t.l+i)};return t.l+=i,l}function xU(t,s,r){r.biffguess&&r.biff==5&&(r.biff=2);var i=gi(t);++t.l;var l=Yl(t,s-7,r);return i.t="str",i.val=l,i}function NU(t){var s=gi(t);++t.l;var r=cn(t);return s.t="n",s.val=r,s}function bU(t){var s=gi(t);++t.l;var r=t.read_shift(2);return s.t="n",s.val=r,s}function yU(t){var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,"sbcs-cont")}function kU(t,s){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=s-13}function wU(t,s,r){var i=t.l+s,l=gi(t),c=t.read_shift(2),u=Pl(t,c,r);return t.l=i,l.t="str",l.val=u,l}var MU=[2,3,48,49,131,139,140,245],Ex=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=_I({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(h,f){var _=[],T=Uo(1);switch(f.type){case"base64":T=ws(Zn(h));break;case"binary":T=ws(h);break;case"buffer":case"array":T=h;break}jr(T,0);var g=T.read_shift(1),E=!!(g&136),S=!1,R=!1;switch(g){case 2:break;case 3:break;case 48:S=!0,E=!0;break;case 49:S=!0,E=!0;break;case 131:break;case 139:break;case 140:R=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+g.toString(16))}var L=0,x=521;g==2&&(L=T.read_shift(2)),T.l+=3,g!=2&&(L=T.read_shift(4)),L>1048576&&(L=1e6),g!=2&&(x=T.read_shift(2));var v=T.read_shift(2),A=f.codepage||1252;g!=2&&(T.l+=16,T.read_shift(1),T[T.l]!==0&&(A=t[T[T.l]]),T.l+=1,T.l+=2),R&&(T.l+=36);for(var m=[],y={},H=Math.min(T.length,g==2?521:x-10-(S?264:0)),G=R?32:11;T.l<H&&T[T.l]!=13;)switch(y={},y.name=Oh.utils.decode(A,T.slice(T.l,T.l+G)).replace(/[\u0000\r\n].*$/g,""),T.l+=G,y.type=String.fromCharCode(T.read_shift(1)),g!=2&&!R&&(y.offset=T.read_shift(4)),y.len=T.read_shift(1),g==2&&(y.offset=T.read_shift(2)),y.dec=T.read_shift(1),y.name.length&&m.push(y),g!=2&&(T.l+=R?13:14),y.type){case"B":(!S||y.len!=8)&&f.WTF&&console.log("Skipping "+y.name+":"+y.type);break;case"G":case"P":f.WTF&&console.log("Skipping "+y.name+":"+y.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+y.type)}if(T[T.l]!==13&&(T.l=x-1),T.read_shift(1)!==13)throw new Error("DBF Terminator not found "+T.l+" "+T[T.l]);T.l=x;var k=0,F=0;for(_[0]=[],F=0;F!=m.length;++F)_[0][F]=m[F].name;for(;L-- >0;){if(T[T.l]===42){T.l+=v;continue}for(++T.l,_[++k]=[],F=0,F=0;F!=m.length;++F){var B=T.slice(T.l,T.l+m[F].len);T.l+=m[F].len,jr(B,0);var re=Oh.utils.decode(A,B);switch(m[F].type){case"C":re.trim().length&&(_[k][F]=re.replace(/\s+$/,""));break;case"D":re.length===8?_[k][F]=new Date(+re.slice(0,4),+re.slice(4,6)-1,+re.slice(6,8)):_[k][F]=re;break;case"F":_[k][F]=parseFloat(re.trim());break;case"+":case"I":_[k][F]=R?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(re.trim().toUpperCase()){case"Y":case"T":_[k][F]=!0;break;case"N":case"F":_[k][F]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+re+"|")}break;case"M":if(!E)throw new Error("DBF Unexpected MEMO for type "+g.toString(16));_[k][F]="##MEMO##"+(R?parseInt(re.trim(),10):B.read_shift(4));break;case"N":re=re.replace(/\u0000/g,"").trim(),re&&re!="."&&(_[k][F]=+re||0);break;case"@":_[k][F]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":_[k][F]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":_[k][F]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":_[k][F]=-B.read_shift(-8,"f");break;case"B":if(S&&m[F].len==8){_[k][F]=B.read_shift(8,"f");break}case"G":case"P":B.l+=m[F].len;break;case"0":if(m[F].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+m[F].type)}}}if(g!=2&&T.l<T.length&&T[T.l++]!=26)throw new Error("DBF EOF Marker missing "+(T.l-1)+" of "+T.length+" "+T[T.l-1].toString(16));return f&&f.sheetRows&&(_=_.slice(0,f.sheetRows)),f.DBF=m,_}function i(h,f){var _=f||{};_.dateNF||(_.dateNF="yyyymmdd");var T=Uh(r(h,_),_);return T["!cols"]=_.DBF.map(function(g){return{wch:g.len,DBF:g}}),delete _.DBF,T}function l(h,f){try{return Wl(i(h,f),f)}catch(_){if(f&&f.WTF)throw _}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function u(h,f){var _=f||{};if(+_.codepage>=0&&Ds(+_.codepage),_.type=="string")throw new Error("Cannot write DBF to JS string");var T=Jm(),g=oW(h,{header:1,raw:!0,cellDates:!0}),E=g[0],S=g.slice(1),R=h["!cols"]||[],L=0,x=0,v=0,A=1;for(L=0;L<E.length;++L){if(((R[L]||{}).DBF||{}).name){E[L]=R[L].DBF.name,++v;continue}if(E[L]!=null){if(++v,typeof E[L]=="number"&&(E[L]=E[L].toString(10)),typeof E[L]!="string")throw new Error("DBF Invalid column name "+E[L]+" |"+typeof E[L]+"|");if(E.indexOf(E[L])!==L){for(x=0;x<1024;++x)if(E.indexOf(E[L]+"_"+x)==-1){E[L]+="_"+x;break}}}}var m=Hr(h["!ref"]),y=[],H=[],G=[];for(L=0;L<=m.e.c-m.s.c;++L){var k="",F="",B=0,re=[];for(x=0;x<S.length;++x)S[x][L]!=null&&re.push(S[x][L]);if(re.length==0||E[L]==null){y[L]="?";continue}for(x=0;x<re.length;++x){switch(typeof re[x]){case"number":F="B";break;case"string":F="C";break;case"boolean":F="L";break;case"object":F=re[x]instanceof Date?"D":"C";break;default:F="C"}B=Math.max(B,String(re[x]).length),k=k&&k!=F?"C":F}B>250&&(B=250),F=((R[L]||{}).DBF||{}).type,F=="C"&&R[L].DBF.len>B&&(B=R[L].DBF.len),k=="B"&&F=="N"&&(k="N",G[L]=R[L].DBF.dec,B=R[L].DBF.len),H[L]=k=="C"||F=="N"?B:c[k]||0,A+=H[L],y[L]=k}var ne=T.next(32);for(ne.write_shift(4,318902576),ne.write_shift(4,S.length),ne.write_shift(2,296+32*v),ne.write_shift(2,A),L=0;L<4;++L)ne.write_shift(4,0);for(ne.write_shift(4,0|(+s[F1]||3)<<8),L=0,x=0;L<E.length;++L)if(E[L]!=null){var ee=T.next(32),me=(E[L].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);ee.write_shift(1,me,"sbcs"),ee.write_shift(1,y[L]=="?"?"C":y[L],"sbcs"),ee.write_shift(4,x),ee.write_shift(1,H[L]||c[y[L]]||0),ee.write_shift(1,G[L]||0),ee.write_shift(1,2),ee.write_shift(4,0),ee.write_shift(1,0),ee.write_shift(4,0),ee.write_shift(4,0),x+=H[L]||c[y[L]]||0}var we=T.next(264);for(we.write_shift(4,13),L=0;L<65;++L)we.write_shift(4,0);for(L=0;L<S.length;++L){var Oe=T.next(A);for(Oe.write_shift(1,0),x=0;x<E.length;++x)if(E[x]!=null)switch(y[x]){case"L":Oe.write_shift(1,S[L][x]==null?63:S[L][x]?84:70);break;case"B":Oe.write_shift(8,S[L][x]||0,"f");break;case"N":var ke="0";for(typeof S[L][x]=="number"&&(ke=S[L][x].toFixed(G[x]||0)),v=0;v<H[x]-ke.length;++v)Oe.write_shift(1,32);Oe.write_shift(1,ke,"sbcs");break;case"D":S[L][x]?(Oe.write_shift(4,("0000"+S[L][x].getFullYear()).slice(-4),"sbcs"),Oe.write_shift(2,("00"+(S[L][x].getMonth()+1)).slice(-2),"sbcs"),Oe.write_shift(2,("00"+S[L][x].getDate()).slice(-2),"sbcs")):Oe.write_shift(8,"00000000","sbcs");break;case"C":var ye=String(S[L][x]!=null?S[L][x]:"").slice(0,H[x]);for(Oe.write_shift(1,ye,"sbcs"),v=0;v<H[x]-ye.length;++v)Oe.write_shift(1,32);break}}return T.next(1).write_shift(1,26),T.end()}return{to_workbook:l,to_sheet:i,from_sheet:u}}(),DU=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+Ho(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(E,S){var R=t[S];return typeof R=="number"?wC(R):R},i=function(E,S,R){var L=S.charCodeAt(0)-32<<4|R.charCodeAt(0)-48;return L==59?E:wC(L)};t["|"]=254;function l(E,S){switch(S.type){case"base64":return c(Zn(E),S);case"binary":return c(E,S);case"buffer":return c(pt&&Buffer.isBuffer(E)?E.toString("binary"):Vl(E),S);case"array":return c(Dl(E),S)}throw new Error("Unrecognized type "+S.type)}function c(E,S){var R=E.split(/[\n\r]+/),L=-1,x=-1,v=0,A=0,m=[],y=[],H=null,G={},k=[],F=[],B=[],re=0,ne;for(+S.codepage>=0&&Ds(+S.codepage);v!==R.length;++v){re=0;var ee=R[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,i).replace(s,r),me=ee.replace(/;;/g,"\0").split(";").map(function(q){return q.replace(/\u0000/g,";")}),we=me[0],Oe;if(ee.length>0)switch(we){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":me[1].charAt(0)=="P"&&y.push(ee.slice(3).replace(/;;/g,";"));break;case"C":var ke=!1,ye=!1,Re=!1,K=!1,z=-1,oe=-1;for(A=1;A<me.length;++A)switch(me[A].charAt(0)){case"A":break;case"X":x=parseInt(me[A].slice(1))-1,ye=!0;break;case"Y":for(L=parseInt(me[A].slice(1))-1,ye||(x=0),ne=m.length;ne<=L;++ne)m[ne]=[];break;case"K":Oe=me[A].slice(1),Oe.charAt(0)==='"'?Oe=Oe.slice(1,Oe.length-1):Oe==="TRUE"?Oe=!0:Oe==="FALSE"?Oe=!1:isNaN(Gi(Oe))?isNaN(Rh(Oe).getDate())||(Oe=Kr(Oe)):(Oe=Gi(Oe),H!==null&&Lc(H)&&(Oe=mT(Oe))),ke=!0;break;case"E":K=!0;var M=oc(me[A].slice(1),{r:L,c:x});m[L][x]=[m[L][x],M];break;case"S":Re=!0,m[L][x]=[m[L][x],"S5S"];break;case"G":break;case"R":z=parseInt(me[A].slice(1))-1;break;case"C":oe=parseInt(me[A].slice(1))-1;break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+ee)}if(ke&&(m[L][x]&&m[L][x].length==2?m[L][x][0]=Oe:m[L][x]=Oe,H=null),Re){if(K)throw new Error("SYLK shared formula cannot have own formula");var Z=z>-1&&m[z][oe];if(!Z||!Z[1])throw new Error("SYLK shared formula cannot find base");m[L][x][1]=Jy(Z[1],{r:L-z,c:x-oe})}break;case"F":var J=0;for(A=1;A<me.length;++A)switch(me[A].charAt(0)){case"X":x=parseInt(me[A].slice(1))-1,++J;break;case"Y":for(L=parseInt(me[A].slice(1))-1,ne=m.length;ne<=L;++ne)m[ne]=[];break;case"M":re=parseInt(me[A].slice(1))/20;break;case"F":break;case"G":break;case"P":H=y[parseInt(me[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=me[A].slice(1).split(" "),ne=parseInt(B[0],10);ne<=parseInt(B[1],10);++ne)re=parseInt(B[2],10),F[ne-1]=re===0?{hidden:!0}:{wch:re},Ic(F[ne-1]);break;case"C":x=parseInt(me[A].slice(1))-1,F[x]||(F[x]={});break;case"R":L=parseInt(me[A].slice(1))-1,k[L]||(k[L]={}),re>0?(k[L].hpt=re,k[L].hpx=xh(re)):re===0&&(k[L].hidden=!0);break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+ee)}J<1&&(H=null);break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+ee)}}return k.length>0&&(G["!rows"]=k),F.length>0&&(G["!cols"]=F),S&&S.sheetRows&&(m=m.slice(0,S.sheetRows)),[m,G]}function u(E,S){var R=l(E,S),L=R[0],x=R[1],v=Uh(L,S);return Ho(x).forEach(function(A){v[A]=x[A]}),v}function h(E,S){return Wl(u(E,S),S)}function f(E,S,R,L){var x="C;Y"+(R+1)+";X"+(L+1)+";K";switch(E.t){case"n":x+=E.v||0,E.f&&!E.F&&(x+=";E"+OG(E.f,{r:R,c:L}));break;case"b":x+=E.v?"TRUE":"FALSE";break;case"e":x+=E.w||E.v;break;case"d":x+='"'+(E.w||E.v)+'"';break;case"s":x+='"'+E.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function _(E,S){S.forEach(function(R,L){var x="F;W"+(L+1)+" "+(L+1)+" ";R.hidden?x+="0":(typeof R.width=="number"&&!R.wpx&&(R.wpx=Q_(R.width)),typeof R.wpx=="number"&&!R.wch&&(R.wch=eT(R.wpx)),typeof R.wch=="number"&&(x+=Math.round(R.wch))),x.charAt(x.length-1)!=" "&&E.push(x)})}function T(E,S){S.forEach(function(R,L){var x="F;";R.hidden?x+="M0;":R.hpt?x+="M"+20*R.hpt+";":R.hpx&&(x+="M"+20*zy(R.hpx)+";"),x.length>2&&E.push(x+"R"+(L+1))})}function g(E,S){var R=["ID;PWXL;N;E"],L=[],x=Hr(E["!ref"]),v,A=Array.isArray(E),m=`\r
`;R.push("P;PGeneral"),R.push("F;P0;DG0G8;M255"),E["!cols"]&&_(R,E["!cols"]),E["!rows"]&&T(R,E["!rows"]),R.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var y=x.s.r;y<=x.e.r;++y)for(var H=x.s.c;H<=x.e.c;++H){var G=ft({r:y,c:H});v=A?(E[y]||[])[H]:E[G],!(!v||v.v==null&&(!v.f||v.F))&&L.push(f(v,E,y,H))}return R.join(m)+m+L.join(m)+m+"E"+m}return{to_workbook:h,to_sheet:u,from_sheet:g}}(),PU=function(){function t(c,u){switch(u.type){case"base64":return s(Zn(c),u);case"binary":return s(c,u);case"buffer":return s(pt&&Buffer.isBuffer(c)?c.toString("binary"):Vl(c),u);case"array":return s(Dl(c),u)}throw new Error("Unrecognized type "+u.type)}function s(c,u){for(var h=c.split(`
`),f=-1,_=-1,T=0,g=[];T!==h.length;++T){if(h[T].trim()==="BOT"){g[++f]=[],_=0;continue}if(!(f<0)){var E=h[T].trim().split(","),S=E[0],R=E[1];++T;for(var L=h[T]||"";(L.match(/["]/g)||[]).length&1&&T<h.length-1;)L+=`
`+h[++T];switch(L=L.trim(),+S){case-1:if(L==="BOT"){g[++f]=[],_=0;continue}else if(L!=="EOD")throw new Error("Unrecognized DIF special command "+L);break;case 0:L==="TRUE"?g[f][_]=!0:L==="FALSE"?g[f][_]=!1:isNaN(Gi(R))?isNaN(Rh(R).getDate())?g[f][_]=R:g[f][_]=Kr(R):g[f][_]=Gi(R),++_;break;case 1:L=L.slice(1,L.length-1),L=L.replace(/""/g,'"'),L&&L.match(/^=".*"$/)&&(L=L.slice(2,-1)),g[f][_++]=L!==""?L:null;break}if(L==="EOD")break}}return u&&u.sheetRows&&(g=g.slice(0,u.sheetRows)),g}function r(c,u){return Uh(t(c,u),u)}function i(c,u){return Wl(r(c,u),u)}var l=function(){var c=function(f,_,T,g,E){f.push(_),f.push(T+","+g),f.push('"'+E.replace(/"/g,'""')+'"')},u=function(f,_,T,g){f.push(_+","+T),f.push(_==1?'"'+g.replace(/"/g,'""')+'"':g)};return function(f){var _=[],T=Hr(f["!ref"]),g,E=Array.isArray(f);c(_,"TABLE",0,1,"sheetjs"),c(_,"VECTORS",0,T.e.r-T.s.r+1,""),c(_,"TUPLES",0,T.e.c-T.s.c+1,""),c(_,"DATA",0,0,"");for(var S=T.s.r;S<=T.e.r;++S){u(_,-1,0,"BOT");for(var R=T.s.c;R<=T.e.c;++R){var L=ft({r:S,c:R});if(g=E?(f[S]||[])[R]:f[L],!g){u(_,1,0,"");continue}switch(g.t){case"n":var x=g.w;!x&&g.v!=null&&(x=g.v),x==null?g.f&&!g.F?u(_,1,0,"="+g.f):u(_,1,0,""):u(_,0,x,"V");break;case"b":u(_,0,g.v?1:0,g.v?"TRUE":"FALSE");break;case"s":u(_,1,0,isNaN(g.v)?g.v:'="'+g.v+'"');break;case"d":g.w||(g.w=ms(g.z||dt[14],Qn(Kr(g.v)))),u(_,0,g.w,"V");break;default:u(_,1,0,"")}}}u(_,-1,0,"EOD");var v=`\r
`,A=_.join(v);return A}}();return{to_workbook:i,to_sheet:r,from_sheet:l}}(),FU=function(){function t(g){return g.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(g){return g.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(g,E){for(var S=g.split(`
`),R=-1,L=-1,x=0,v=[];x!==S.length;++x){var A=S[x].trim().split(":");if(A[0]==="cell"){var m=Fs(A[1]);if(v.length<=m.r)for(R=v.length;R<=m.r;++R)v[R]||(v[R]=[]);switch(R=m.r,L=m.c,A[2]){case"t":v[R][L]=t(A[3]);break;case"v":v[R][L]=+A[3];break;case"vtf":var y=A[A.length-1];case"vtc":switch(A[3]){case"nl":v[R][L]=!!+A[4];break;default:v[R][L]=+A[4];break}A[2]=="vtf"&&(v[R][L]=[v[R][L],y])}}}return E&&E.sheetRows&&(v=v.slice(0,E.sheetRows)),v}function i(g,E){return Uh(r(g,E),E)}function l(g,E){return Wl(i(g,E),E)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),u=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,h=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),f="--SocialCalcSpreadsheetControlSave--";function _(g){if(!g||!g["!ref"])return"";for(var E=[],S=[],R,L="",x=EI(g["!ref"]),v=Array.isArray(g),A=x.s.r;A<=x.e.r;++A)for(var m=x.s.c;m<=x.e.c;++m)if(L=ft({r:A,c:m}),R=v?(g[A]||[])[m]:g[L],!(!R||R.v==null||R.t==="z")){switch(S=["cell",L,"t"],R.t){case"s":case"str":S.push(s(R.v));break;case"n":R.f?(S[2]="vtf",S[3]="n",S[4]=R.v,S[5]=s(R.f)):(S[2]="v",S[3]=R.v);break;case"b":S[2]="vt"+(R.f?"f":"c"),S[3]="nl",S[4]=R.v?"1":"0",S[5]=s(R.f||(R.v?"TRUE":"FALSE"));break;case"d":var y=Qn(Kr(R.v));S[2]="vtc",S[3]="nd",S[4]=""+y,S[5]=R.w||ms(R.z||dt[14],y);break;case"e":continue}E.push(S.join(":"))}return E.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),E.push("valueformat:1:text-wiki"),E.join(`
`)}function T(g){return[c,u,h,u,_(g),f].join(`
`)}return{to_workbook:l,to_sheet:i,from_sheet:T}}(),vh=function(){function t(T,g,E,S,R){R.raw?g[E][S]=T:T===""||(T==="TRUE"?g[E][S]=!0:T==="FALSE"?g[E][S]=!1:isNaN(Gi(T))?isNaN(Rh(T).getDate())?g[E][S]=T:g[E][S]=Kr(T):g[E][S]=Gi(T))}function s(T,g){var E=g||{},S=[];if(!T||T.length===0)return S;for(var R=T.split(/[\r\n]/),L=R.length-1;L>=0&&R[L].length===0;)--L;for(var x=10,v=0,A=0;A<=L;++A)v=R[A].indexOf(" "),v==-1?v=R[A].length:v++,x=Math.max(x,v);for(A=0;A<=L;++A){S[A]=[];var m=0;for(t(R[A].slice(0,x).trim(),S,A,m,E),m=1;m<=(R[A].length-x)/10+1;++m)t(R[A].slice(x+(m-1)*10,x+m*10).trim(),S,A,m,E)}return E.sheetRows&&(S=S.slice(0,E.sheetRows)),S}var r={44:",",9:"	",59:";",124:"|"},i={44:3,9:2,59:1,124:0};function l(T){for(var g={},E=!1,S=0,R=0;S<T.length;++S)(R=T.charCodeAt(S))==34?E=!E:!E&&R in r&&(g[R]=(g[R]||0)+1);R=[];for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&R.push([g[S],S]);if(!R.length){g=i;for(S in g)Object.prototype.hasOwnProperty.call(g,S)&&R.push([g[S],S])}return R.sort(function(L,x){return L[0]-x[0]||i[L[1]]-i[x[1]]}),r[R.pop()[1]]||44}function c(T,g){var E=g||{},S="",R=E.dense?[]:{},L={s:{c:0,r:0},e:{c:0,r:0}};T.slice(0,4)=="sep="?T.charCodeAt(5)==13&&T.charCodeAt(6)==10?(S=T.charAt(4),T=T.slice(7)):T.charCodeAt(5)==13||T.charCodeAt(5)==10?(S=T.charAt(4),T=T.slice(6)):S=l(T.slice(0,1024)):E&&E.FS?S=E.FS:S=l(T.slice(0,1024));var x=0,v=0,A=0,m=0,y=0,H=S.charCodeAt(0),G=!1,k=0,F=T.charCodeAt(0);T=T.replace(/\r\n/mg,`
`);var B=E.dateNF!=null?qF(E.dateNF):null;function re(){var ne=T.slice(m,y),ee={};if(ne.charAt(0)=='"'&&ne.charAt(ne.length-1)=='"'&&(ne=ne.slice(1,-1).replace(/""/g,'"')),ne.length===0)ee.t="z";else if(E.raw)ee.t="s",ee.v=ne;else if(ne.trim().length===0)ee.t="s",ee.v=ne;else if(ne.charCodeAt(0)==61)ne.charCodeAt(1)==34&&ne.charCodeAt(ne.length-1)==34?(ee.t="s",ee.v=ne.slice(2,-1).replace(/""/g,'"')):RG(ne)?(ee.t="n",ee.f=ne.slice(1)):(ee.t="s",ee.v=ne);else if(ne=="TRUE")ee.t="b",ee.v=!0;else if(ne=="FALSE")ee.t="b",ee.v=!1;else if(!isNaN(A=Gi(ne)))ee.t="n",E.cellText!==!1&&(ee.w=ne),ee.v=A;else if(!isNaN(Rh(ne).getDate())||B&&ne.match(B)){ee.z=E.dateNF||dt[14];var me=0;B&&ne.match(B)&&(ne=ZF(ne,E.dateNF,ne.match(B)||[]),me=1),E.cellDates?(ee.t="d",ee.v=Kr(ne,me)):(ee.t="n",ee.v=Qn(Kr(ne,me))),E.cellText!==!1&&(ee.w=ms(ee.z,ee.v instanceof Date?Qn(ee.v):ee.v)),E.cellNF||delete ee.z}else ee.t="s",ee.v=ne;if(ee.t=="z"||(E.dense?(R[x]||(R[x]=[]),R[x][v]=ee):R[ft({c:v,r:x})]=ee),m=y+1,F=T.charCodeAt(m),L.e.c<v&&(L.e.c=v),L.e.r<x&&(L.e.r=x),k==H)++v;else if(v=0,++x,E.sheetRows&&E.sheetRows<=x)return!0}e:for(;y<T.length;++y)switch(k=T.charCodeAt(y)){case 34:F===34&&(G=!G);break;case H:case 10:case 13:if(!G&&re())break e;break}return y-m>0&&re(),R["!ref"]=vt(L),R}function u(T,g){return!(g&&g.PRN)||g.FS||T.slice(0,4)=="sep="||T.indexOf("	")>=0||T.indexOf(",")>=0||T.indexOf(";")>=0?c(T,g):Uh(s(T,g),g)}function h(T,g){var E="",S=g.type=="string"?[0,0,0,0]:bI(T,g);switch(g.type){case"base64":E=Zn(T);break;case"binary":E=T;break;case"buffer":g.codepage==65001?E=T.toString("utf8"):g.codepage&&typeof Oh<"u"||(E=pt&&Buffer.isBuffer(T)?T.toString("binary"):Vl(T));break;case"array":E=Dl(T);break;case"string":E=T;break;default:throw new Error("Unrecognized type "+g.type)}return S[0]==239&&S[1]==187&&S[2]==191?E=Ft(E.slice(3)):g.type!="string"&&g.type!="buffer"&&g.codepage==65001?E=Ft(E):g.type=="binary"&&typeof Oh<"u",E.slice(0,19)=="socialcalc:version:"?FU.to_sheet(g.type=="string"?E:Ft(E),g):u(E,g)}function f(T,g){return Wl(h(T,g),g)}function _(T){for(var g=[],E=Hr(T["!ref"]),S,R=Array.isArray(T),L=E.s.r;L<=E.e.r;++L){for(var x=[],v=E.s.c;v<=E.e.c;++v){var A=ft({r:L,c:v});if(S=R?(T[L]||[])[v]:T[A],!S||S.v==null){x.push("          ");continue}for(var m=(S.w||($c(S),S.w)||"").slice(0,10);m.length<10;)m+=" ";x.push(m+(v===0?" ":""))}g.push(x.join(""))}return g.join(`
`)}return{to_workbook:f,to_sheet:h,from_sheet:_}}();function BU(t,s){var r=s||{},i=!!r.WTF;r.WTF=!0;try{var l=DU.to_workbook(t,r);return r.WTF=i,l}catch(c){if(r.WTF=i,!c.message.match(/SYLK bad record ID/)&&i)throw c;return vh.to_workbook(t,s)}}var Zu=function(){function t(M,Z,J){if(M){jr(M,M.l||0);for(var q=J.Enum||z;M.l<M.length;){var he=M.read_shift(2),xe=q[he]||q[65535],Pe=M.read_shift(2),be=M.l+Pe,ce=xe.f&&xe.f(M,Pe,J);if(M.l=be,Z(ce,xe,he))return}}}function s(M,Z){switch(Z.type){case"base64":return r(ws(Zn(M)),Z);case"binary":return r(ws(M),Z);case"buffer":case"array":return r(M,Z)}throw"Unsupported type "+Z.type}function r(M,Z){if(!M)return M;var J=Z||{},q=J.dense?[]:{},he="Sheet1",xe="",Pe=0,be={},ce=[],et=[],N={s:{r:0,c:0},e:{r:0,c:0}},fe=J.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)J.Enum=z,t(M,function(Ce,ut,Bt){switch(Bt){case 0:J.vers=Ce,Ce>=4096&&(J.qpro=!0);break;case 6:N=Ce;break;case 204:Ce&&(xe=Ce);break;case 222:xe=Ce;break;case 15:case 51:J.qpro||(Ce[1].v=Ce[1].v.slice(1));case 13:case 14:case 16:Bt==14&&(Ce[2]&112)==112&&(Ce[2]&15)>1&&(Ce[2]&15)<15&&(Ce[1].z=J.dateNF||dt[14],J.cellDates&&(Ce[1].t="d",Ce[1].v=mT(Ce[1].v))),J.qpro&&Ce[3]>Pe&&(q["!ref"]=vt(N),be[he]=q,ce.push(he),q=J.dense?[]:{},N={s:{r:0,c:0},e:{r:0,c:0}},Pe=Ce[3],he=xe||"Sheet"+(Pe+1),xe="");var tr=J.dense?(q[Ce[0].r]||[])[Ce[0].c]:q[ft(Ce[0])];if(tr){tr.t=Ce[1].t,tr.v=Ce[1].v,Ce[1].z!=null&&(tr.z=Ce[1].z),Ce[1].f!=null&&(tr.f=Ce[1].f);break}J.dense?(q[Ce[0].r]||(q[Ce[0].r]=[]),q[Ce[0].r][Ce[0].c]=Ce[1]):q[ft(Ce[0])]=Ce[1];break}},J);else if(M[2]==26||M[2]==14)J.Enum=oe,M[2]==14&&(J.qpro=!0,M.l=0),t(M,function(Ce,ut,Bt){switch(Bt){case 204:he=Ce;break;case 22:Ce[1].v=Ce[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ce[3]>Pe&&(q["!ref"]=vt(N),be[he]=q,ce.push(he),q=J.dense?[]:{},N={s:{r:0,c:0},e:{r:0,c:0}},Pe=Ce[3],he="Sheet"+(Pe+1)),fe>0&&Ce[0].r>=fe)break;J.dense?(q[Ce[0].r]||(q[Ce[0].r]=[]),q[Ce[0].r][Ce[0].c]=Ce[1]):q[ft(Ce[0])]=Ce[1],N.e.c<Ce[0].c&&(N.e.c=Ce[0].c),N.e.r<Ce[0].r&&(N.e.r=Ce[0].r);break;case 27:Ce[14e3]&&(et[Ce[14e3][0]]=Ce[14e3][1]);break;case 1537:et[Ce[0]]=Ce[1],Ce[0]==Pe&&(he=Ce[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(q["!ref"]=vt(N),be[xe||he]=q,ce.push(xe||he),!et.length)return{SheetNames:ce,Sheets:be};for(var He={},Me=[],Ze=0;Ze<et.length;++Ze)be[ce[Ze]]?(Me.push(et[Ze]||ce[Ze]),He[et[Ze]]=be[et[Ze]]||be[ce[Ze]]):(Me.push(et[Ze]),He[et[Ze]]={"!ref":"A1"});return{SheetNames:Me,Sheets:He}}function i(M,Z){var J=Z||{};if(+J.codepage>=0&&Ds(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var q=Jm(),he=Hr(M["!ref"]),xe=Array.isArray(M),Pe=[];Ns(q,0,c(1030)),Ns(q,6,f(he));for(var be=Math.min(he.e.r,8191),ce=he.s.r;ce<=be;++ce)for(var et=Jn(ce),N=he.s.c;N<=he.e.c;++N){ce===he.s.r&&(Pe[N]=In(N));var fe=Pe[N]+et,He=xe?(M[ce]||[])[N]:M[fe];if(!(!He||He.t=="z"))if(He.t=="n")(He.v|0)==He.v&&He.v>=-32768&&He.v<=32767?Ns(q,13,S(ce,N,He.v)):Ns(q,14,L(ce,N,He.v));else{var Me=$c(He);Ns(q,15,g(ce,N,Me.slice(0,239)))}}return Ns(q,1),q.end()}function l(M,Z){var J=Z||{};if(+J.codepage>=0&&Ds(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var q=Jm();Ns(q,0,u(M));for(var he=0,xe=0;he<M.SheetNames.length;++he)(M.Sheets[M.SheetNames[he]]||{})["!ref"]&&Ns(q,27,K(M.SheetNames[he],xe++));var Pe=0;for(he=0;he<M.SheetNames.length;++he){var be=M.Sheets[M.SheetNames[he]];if(!(!be||!be["!ref"])){for(var ce=Hr(be["!ref"]),et=Array.isArray(be),N=[],fe=Math.min(ce.e.r,8191),He=ce.s.r;He<=fe;++He)for(var Me=Jn(He),Ze=ce.s.c;Ze<=ce.e.c;++Ze){He===ce.s.r&&(N[Ze]=In(Ze));var Ce=N[Ze]+Me,ut=et?(be[He]||[])[Ze]:be[Ce];if(!(!ut||ut.t=="z"))if(ut.t=="n")Ns(q,23,re(He,Ze,Pe,ut.v));else{var Bt=$c(ut);Ns(q,22,k(He,Ze,Pe,Bt.slice(0,239)))}}++Pe}}return Ns(q,1),q.end()}function c(M){var Z=Ar(2);return Z.write_shift(2,M),Z}function u(M){var Z=Ar(26);Z.write_shift(2,4096),Z.write_shift(2,4),Z.write_shift(4,0);for(var J=0,q=0,he=0,xe=0;xe<M.SheetNames.length;++xe){var Pe=M.SheetNames[xe],be=M.Sheets[Pe];if(!(!be||!be["!ref"])){++he;var ce=EI(be["!ref"]);J<ce.e.r&&(J=ce.e.r),q<ce.e.c&&(q=ce.e.c)}}return J>8191&&(J=8191),Z.write_shift(2,J),Z.write_shift(1,he),Z.write_shift(1,q),Z.write_shift(2,0),Z.write_shift(2,0),Z.write_shift(1,1),Z.write_shift(1,2),Z.write_shift(4,0),Z.write_shift(4,0),Z}function h(M,Z,J){var q={s:{c:0,r:0},e:{c:0,r:0}};return Z==8&&J.qpro?(q.s.c=M.read_shift(1),M.l++,q.s.r=M.read_shift(2),q.e.c=M.read_shift(1),M.l++,q.e.r=M.read_shift(2),q):(q.s.c=M.read_shift(2),q.s.r=M.read_shift(2),Z==12&&J.qpro&&(M.l+=2),q.e.c=M.read_shift(2),q.e.r=M.read_shift(2),Z==12&&J.qpro&&(M.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function f(M){var Z=Ar(8);return Z.write_shift(2,M.s.c),Z.write_shift(2,M.s.r),Z.write_shift(2,M.e.c),Z.write_shift(2,M.e.r),Z}function _(M,Z,J){var q=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(q[0].c=M.read_shift(1),q[3]=M.read_shift(1),q[0].r=M.read_shift(2),M.l+=2):(q[2]=M.read_shift(1),q[0].c=M.read_shift(2),q[0].r=M.read_shift(2)),q}function T(M,Z,J){var q=M.l+Z,he=_(M,Z,J);if(he[1].t="s",J.vers==20768){M.l++;var xe=M.read_shift(1);return he[1].v=M.read_shift(xe,"utf8"),he}return J.qpro&&M.l++,he[1].v=M.read_shift(q-M.l,"cstr"),he}function g(M,Z,J){var q=Ar(7+J.length);q.write_shift(1,255),q.write_shift(2,Z),q.write_shift(2,M),q.write_shift(1,39);for(var he=0;he<q.length;++he){var xe=J.charCodeAt(he);q.write_shift(1,xe>=128?95:xe)}return q.write_shift(1,0),q}function E(M,Z,J){var q=_(M,Z,J);return q[1].v=M.read_shift(2,"i"),q}function S(M,Z,J){var q=Ar(7);return q.write_shift(1,255),q.write_shift(2,Z),q.write_shift(2,M),q.write_shift(2,J,"i"),q}function R(M,Z,J){var q=_(M,Z,J);return q[1].v=M.read_shift(8,"f"),q}function L(M,Z,J){var q=Ar(13);return q.write_shift(1,255),q.write_shift(2,Z),q.write_shift(2,M),q.write_shift(8,J,"f"),q}function x(M,Z,J){var q=M.l+Z,he=_(M,Z,J);if(he[1].v=M.read_shift(8,"f"),J.qpro)M.l=q;else{var xe=M.read_shift(2);y(M.slice(M.l,M.l+xe),he),M.l+=xe}return he}function v(M,Z,J){var q=Z&32768;return Z&=-32769,Z=(q?M:0)+(Z>=8192?Z-16384:Z),(q?"":"$")+(J?In(Z):Jn(Z))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},m=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function y(M,Z){jr(M,0);for(var J=[],q=0,he="",xe="",Pe="",be="";M.l<M.length;){var ce=M[M.l++];switch(ce){case 0:J.push(M.read_shift(8,"f"));break;case 1:xe=v(Z[0].c,M.read_shift(2),!0),he=v(Z[0].r,M.read_shift(2),!1),J.push(xe+he);break;case 2:{var et=v(Z[0].c,M.read_shift(2),!0),N=v(Z[0].r,M.read_shift(2),!1);xe=v(Z[0].c,M.read_shift(2),!0),he=v(Z[0].r,M.read_shift(2),!1),J.push(et+N+":"+xe+he)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(M.read_shift(2));break;case 6:{for(var fe="";ce=M[M.l++];)fe+=String.fromCharCode(ce);J.push('"'+fe.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:be=J.pop(),Pe=J.pop(),J.push(["AND","OR"][ce-20]+"("+Pe+","+be+")");break;default:if(ce<32&&m[ce])be=J.pop(),Pe=J.pop(),J.push(Pe+m[ce]+be);else if(A[ce]){if(q=A[ce][1],q==69&&(q=M[M.l++]),q>J.length){console.error("WK1 bad formula parse 0x"+ce.toString(16)+":|"+J.join("|")+"|");return}var He=J.slice(-q);J.length-=q,J.push(A[ce][0]+"("+He.join(",")+")")}else return ce<=7?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=24?console.error("WK1 unsupported op "+ce.toString(16)):ce<=30?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=115?console.error("WK1 unsupported function opcode "+ce.toString(16)):console.error("WK1 unrecognized opcode "+ce.toString(16))}}J.length==1?Z[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function H(M){var Z=[{c:0,r:0},{t:"n",v:0},0];return Z[0].r=M.read_shift(2),Z[3]=M[M.l++],Z[0].c=M[M.l++],Z}function G(M,Z){var J=H(M);return J[1].t="s",J[1].v=M.read_shift(Z-4,"cstr"),J}function k(M,Z,J,q){var he=Ar(6+q.length);he.write_shift(2,M),he.write_shift(1,J),he.write_shift(1,Z),he.write_shift(1,39);for(var xe=0;xe<q.length;++xe){var Pe=q.charCodeAt(xe);he.write_shift(1,Pe>=128?95:Pe)}return he.write_shift(1,0),he}function F(M,Z){var J=H(M);J[1].v=M.read_shift(2);var q=J[1].v>>1;if(J[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return J[1].v=q,J}function B(M,Z){var J=H(M),q=M.read_shift(4),he=M.read_shift(4),xe=M.read_shift(2);if(xe==65535)return q===0&&he===3221225472?(J[1].t="e",J[1].v=15):q===0&&he===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var Pe=xe&32768;return xe=(xe&32767)-16446,J[1].v=(1-Pe*2)*(he*Math.pow(2,xe+32)+q*Math.pow(2,xe)),J}function re(M,Z,J,q){var he=Ar(14);if(he.write_shift(2,M),he.write_shift(1,J),he.write_shift(1,Z),q==0)return he.write_shift(4,0),he.write_shift(4,0),he.write_shift(2,65535),he;var xe=0,Pe=0,be=0,ce=0;return q<0&&(xe=1,q=-q),Pe=Math.log2(q)|0,q/=Math.pow(2,Pe-31),ce=q>>>0,ce&2147483648||(q/=2,++Pe,ce=q>>>0),q-=ce,ce|=2147483648,ce>>>=0,q*=Math.pow(2,32),be=q>>>0,he.write_shift(4,be),he.write_shift(4,ce),Pe+=16383+(xe?32768:0),he.write_shift(2,Pe),he}function ne(M,Z){var J=B(M);return M.l+=Z-14,J}function ee(M,Z){var J=H(M),q=M.read_shift(4);return J[1].v=q>>6,J}function me(M,Z){var J=H(M),q=M.read_shift(8,"f");return J[1].v=q,J}function we(M,Z){var J=me(M);return M.l+=Z-10,J}function Oe(M,Z){return M[M.l+Z-1]==0?M.read_shift(Z,"cstr"):""}function ke(M,Z){var J=M[M.l++];J>Z-1&&(J=Z-1);for(var q="";q.length<J;)q+=String.fromCharCode(M[M.l++]);return q}function ye(M,Z,J){if(!(!J.qpro||Z<21)){var q=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var he=M.read_shift(Z-21,"cstr");return[q,he]}}function Re(M,Z){for(var J={},q=M.l+Z;M.l<q;){var he=M.read_shift(2);if(he==14e3){for(J[he]=[0,""],J[he][0]=M.read_shift(2);M[M.l];)J[he][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return J}function K(M,Z){var J=Ar(5+M.length);J.write_shift(2,14e3),J.write_shift(2,Z);for(var q=0;q<M.length;++q){var he=M.charCodeAt(q);J[J.l++]=he>127?95:he}return J[J.l++]=0,J}var z={0:{n:"BOF",f:Ir},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:h},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:E},14:{n:"NUMBER",f:R},15:{n:"LABEL",f:T},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:T},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Oe},222:{n:"SHEETNAMELP",f:ke},65535:{n:""}},oe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:G},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:F},25:{n:"FORMULA19",f:ne},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Re},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:ee},38:{n:"??"},39:{n:"NUMBER27",f:me},40:{n:"FORMULA28",f:we},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Oe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ye},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:i,book_to_wk3:l,to_workbook:s}}();function UU(t){var s={},r=t.match(_n),i=0,l=!1;if(r)for(;i!=r.length;++i){var c=st(r[i]);switch(c[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!c.val)break;case"<shadow>":case"<shadow/>":s.shadow=1;break;case"</shadow>":break;case"<charset":if(c.val=="1")break;s.cp=cI[parseInt(c.val,10)];break;case"<outline":if(!c.val)break;case"<outline>":case"<outline/>":s.outline=1;break;case"</outline>":break;case"<rFont":s.name=c.val;break;case"<sz":s.sz=c.val;break;case"<strike":if(!c.val)break;case"<strike>":case"<strike/>":s.strike=1;break;case"</strike>":break;case"<u":if(!c.val)break;switch(c.val){case"double":s.uval="double";break;case"singleAccounting":s.uval="single-accounting";break;case"doubleAccounting":s.uval="double-accounting";break}case"<u>":case"<u/>":s.u=1;break;case"</u>":break;case"<b":if(c.val=="0")break;case"<b>":case"<b/>":s.b=1;break;case"</b>":break;case"<i":if(c.val=="0")break;case"<i>":case"<i/>":s.i=1;break;case"</i>":break;case"<color":c.rgb&&(s.color=c.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":s.family=c.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":s.valign=c.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(c[0].charCodeAt(1)!==47&&!l)throw new Error("Unrecognized rich format "+c[0])}}return s}var HU=function(){var t=Lh("t"),s=Lh("rPr");function r(c){var u=c.match(t);if(!u)return{t:"s",v:""};var h={t:"s",v:$t(u[1])},f=c.match(s);return f&&(h.s=UU(f[1])),h}var i=/<(?:\w+:)?r>/g,l=/<\/(?:\w+:)?r>/;return function(u){return u.replace(i,"").split(l).map(r).filter(function(h){return h.v})}}(),GU=function(){var s=/(\r\n|\n)/g;function r(l,c,u){var h=[];l.u&&h.push("text-decoration: underline;"),l.uval&&h.push("text-underline-style:"+l.uval+";"),l.sz&&h.push("font-size:"+l.sz+"pt;"),l.outline&&h.push("text-effect: outline;"),l.shadow&&h.push("text-shadow: auto;"),c.push('<span style="'+h.join("")+'">'),l.b&&(c.push("<b>"),u.push("</b>")),l.i&&(c.push("<i>"),u.push("</i>")),l.strike&&(c.push("<s>"),u.push("</s>"));var f=l.valign||"";return f=="superscript"||f=="super"?f="sup":f=="subscript"&&(f="sub"),f!=""&&(c.push("<"+f+">"),u.push("</"+f+">")),u.push("</span>"),l}function i(l){var c=[[],l.v,[]];return l.v?(l.s&&r(l.s,c[0],c[2]),c[0].join("")+c[1].replace(s,"<br/>")+c[2].join("")):""}return function(c){return c.map(i).join("")}}(),VU=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,WU=/<(?:\w+:)?r>/,XU=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function RI(t,s){var r=s?s.cellHTML:!0,i={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(i.t=$t(Ft(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),i.r=Ft(t),r&&(i.h=oy(i.t))):t.match(WU)&&(i.r=Ft(t),i.t=$t(Ft((t.replace(XU,"").match(VU)||[]).join("").replace(_n,""))),r&&(i.h=GU(HU(i.r)))),i):{t:""}}var jU=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,zU=/<(?:\w+:)?(?:si|sstItem)>/g,YU=/<\/(?:\w+:)?(?:si|sstItem)>/;function KU(t,s){var r=[],i="";if(!t)return r;var l=t.match(jU);if(l){i=l[2].replace(zU,"").split(YU);for(var c=0;c!=i.length;++c){var u=RI(i[c].trim(),s);u!=null&&(r[r.length]=u)}l=st(l[1]),r.Count=l.count,r.Unique=l.uniqueCount}return r}function JU(t){return[t.read_shift(4),t.read_shift(4)]}function qU(t,s){var r=[],i=!1;return Ji(t,function(c,u,h){switch(h){case 159:r.Count=c[0],r.Unique=c[1];break;case 19:r.push(c);break;case 160:return!0;case 35:i=!0;break;case 36:i=!1;break;default:if(u.T,!i||s.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}),r}function Hy(t){for(var s=[],r=t.split(""),i=0;i<r.length;++i)s[i]=r[i].charCodeAt(0);return s}function Vi(t,s){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),s>=4&&(t.l+=s-4),r}function ZU(t){var s={};return s.id=t.read_shift(0,"lpp4"),s.R=Vi(t,4),s.U=Vi(t,4),s.W=Vi(t,4),s}function QU(t){for(var s=t.read_shift(4),r=t.l+s-4,i={},l=t.read_shift(4),c=[];l-- >0;)c.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(i.name=t.read_shift(0,"lpp4"),i.comps=c,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return i}function eH(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(QU(t));return s}function tH(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(t.read_shift(0,"lpp4"));return s}function rH(t){var s={};return t.read_shift(4),t.l+=4,s.id=t.read_shift(0,"lpp4"),s.name=t.read_shift(0,"lpp4"),s.R=Vi(t,4),s.U=Vi(t,4),s.W=Vi(t,4),s}function nH(t){var s=rH(t);if(s.ename=t.read_shift(0,"8lpp4"),s.blksz=t.read_shift(4),s.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return s}function Gy(t,s){var r=t.l+s,i={};i.Flags=t.read_shift(4)&63,t.l+=4,i.AlgID=t.read_shift(4);var l=!1;switch(i.AlgID){case 26126:case 26127:case 26128:l=i.Flags==36;break;case 26625:l=i.Flags==4;break;case 0:l=i.Flags==16||i.Flags==4||i.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+i.AlgID}if(!l)throw new Error("Encryption Flags/AlgID mismatch");return i.AlgIDHash=t.read_shift(4),i.KeySize=t.read_shift(4),i.ProviderType=t.read_shift(4),t.l+=8,i.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,i}function Vy(t,s){var r={},i=t.l+s;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,i),t.l=i,r}function sH(t){var s=Vi(t);switch(s.Minor){case 2:return[s.Minor,iH(t)];case 3:return[s.Minor,oH()];case 4:return[s.Minor,lH(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+s.Minor)}function iH(t){var s=t.read_shift(4);if((s&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),i=Gy(t,r),l=Vy(t,t.length-t.l);return{t:"Std",h:i,v:l}}function oH(){throw new Error("File is password-protected: ECMA-376 Extensible")}function lH(t){var s=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),i={};return r.replace(_n,function(c){var u=st(c);switch(pi(u[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":s.forEach(function(h){i[h]=u[h]});break;case"<dataIntegrity":i.encryptedHmacKey=u.encryptedHmacKey,i.encryptedHmacValue=u.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":i.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":i.uri=u.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":i.encs.push(u);break;default:throw u[0]}}),i}function aH(t,s){var r={},i=r.EncryptionVersionInfo=Vi(t,4);if(s-=4,i.Minor!=2)throw new Error("unrecognized minor version code: "+i.Minor);if(i.Major>4||i.Major<2)throw new Error("unrecognized major version code: "+i.Major);r.Flags=t.read_shift(4),s-=4;var l=t.read_shift(4);return s-=4,r.EncryptionHeader=Gy(t,l),s-=l,r.EncryptionVerifier=Vy(t,s),r}function cH(t){var s={},r=s.EncryptionVersionInfo=Vi(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return s.Salt=t.read_shift(16),s.EncryptedVerifier=t.read_shift(16),s.EncryptedVerifierHash=t.read_shift(16),s}function uH(t){var s=0,r,i=Hy(t),l=i.length+1,c,u,h,f,_;for(r=Uo(l),r[0]=i.length,c=1;c!=l;++c)r[c]=i[c-1];for(c=l-1;c>=0;--c)u=r[c],h=s&16384?1:0,f=s<<1&32767,_=h|f,s=_^u;return s^52811}var Wy=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],s=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],i=function(u){return(u/2|u*128)&255},l=function(u,h){return i(u^h)},c=function(u){for(var h=s[u.length-1],f=104,_=u.length-1;_>=0;--_)for(var T=u[_],g=0;g!=7;++g)T&64&&(h^=r[f]),T*=2,--f;return h};return function(u){for(var h=Hy(u),f=c(h),_=h.length,T=Uo(16),g=0;g!=16;++g)T[g]=0;var E,S,R;for((_&1)===1&&(E=f>>8,T[_]=l(t[0],E),--_,E=f&255,S=h[h.length-1],T[_]=l(S,E));_>0;)--_,E=f>>8,T[_]=l(h[_],E),--_,E=f&255,T[_]=l(h[_],E);for(_=15,R=15-h.length;R>0;)E=f>>8,T[_]=l(t[R],E),--_,--R,E=f&255,T[_]=l(h[_],E),--_,--R;return T}}(),hH=function(t,s,r,i,l){l||(l=s),i||(i=Wy(t));var c,u;for(c=0;c!=s.length;++c)u=s[c],u^=i[r],u=(u>>5|u<<3)&255,l[c]=u,++r;return[l,r,i]},dH=function(t){var s=0,r=Wy(t);return function(i){var l=hH("",i,s,r);return s=l[1],l[0]}};function fH(t,s,r,i){var l={key:Ir(t),verificationBytes:Ir(t)};return r.password&&(l.verifier=uH(r.password)),i.valid=l.verificationBytes===l.verifier,i.valid&&(i.insitu=dH(r.password)),l}function _H(t,s,r){var i=r||{};return i.Info=t.read_shift(2),t.l-=2,i.Info===1?i.Data=cH(t):i.Data=aH(t,s),i}function TH(t,s,r){var i={Type:r.biff>=8?t.read_shift(2):0};return i.Type?_H(t,s-2,i):fH(t,r.biff>=8?s:s-2,r,i),i}var pH=function(){function t(l,c){switch(c.type){case"base64":return s(Zn(l),c);case"binary":return s(l,c);case"buffer":return s(pt&&Buffer.isBuffer(l)?l.toString("binary"):Vl(l),c);case"array":return s(Dl(l),c)}throw new Error("Unrecognized type "+c.type)}function s(l,c){var u=c||{},h=u.dense?[]:{},f=l.match(/\\trowd.*?\\row\b/g);if(!f.length)throw new Error("RTF missing table");var _={s:{c:0,r:0},e:{c:0,r:f.length-1}};return f.forEach(function(T,g){Array.isArray(h)&&(h[g]=[]);for(var E=/\\\w+\b/g,S=0,R,L=-1;R=E.exec(T);){switch(R[0]){case"\\cell":var x=T.slice(S,E.lastIndex-R[0].length);if(x[0]==" "&&(x=x.slice(1)),++L,x.length){var v={v:x,t:"s"};Array.isArray(h)?h[g][L]=v:h[ft({r:g,c:L})]=v}break}S=E.lastIndex}L>_.e.c&&(_.e.c=L)}),h["!ref"]=vt(_),h}function r(l,c){return Wl(t(l,c),c)}function i(l){for(var c=["{\\rtf1\\ansi"],u=Hr(l["!ref"]),h,f=Array.isArray(l),_=u.s.r;_<=u.e.r;++_){c.push("\\trowd\\trautofit1");for(var T=u.s.c;T<=u.e.c;++T)c.push("\\cellx"+(T+1));for(c.push("\\pard\\intbl"),T=u.s.c;T<=u.e.c;++T){var g=ft({r:_,c:T});h=f?(l[_]||[])[T]:l[g],!(!h||h.v==null&&(!h.f||h.F))&&(c.push(" "+(h.w||($c(h),h.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:i}}();function gH(t){var s=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(s.slice(0,2),16),parseInt(s.slice(2,4),16),parseInt(s.slice(4,6),16)]}function Ch(t){for(var s=0,r=1;s!=3;++s)r=r*256+(t[s]>255?255:t[s]<0?0:t[s]);return r.toString(16).toUpperCase().slice(1)}function EH(t){var s=t[0]/255,r=t[1]/255,i=t[2]/255,l=Math.max(s,r,i),c=Math.min(s,r,i),u=l-c;if(u===0)return[0,0,s];var h=0,f=0,_=l+c;switch(f=u/(_>1?2-_:_),l){case s:h=((r-i)/u+6)%6;break;case r:h=(i-s)/u+2;break;case i:h=(s-r)/u+4;break}return[h/6,f,_/2]}function mH(t){var s=t[0],r=t[1],i=t[2],l=r*2*(i<.5?i:1-i),c=i-l/2,u=[c,c,c],h=6*s,f;if(r!==0)switch(h|0){case 0:case 6:f=l*h,u[0]+=l,u[1]+=f;break;case 1:f=l*(2-h),u[0]+=f,u[1]+=l;break;case 2:f=l*(h-2),u[1]+=l,u[2]+=f;break;case 3:f=l*(4-h),u[1]+=f,u[2]+=l;break;case 4:f=l*(h-4),u[2]+=l,u[0]+=f;break;case 5:f=l*(6-h),u[2]+=f,u[0]+=l;break}for(var _=0;_!=3;++_)u[_]=Math.round(u[_]*255);return u}function Z_(t,s){if(s===0)return t;var r=EH(gH(t));return s<0?r[2]=r[2]*(1+s):r[2]=1-(1-r[2])*(1-s),Ch(mH(r))}var Xy=6,$H=15,IH=1,$n=Xy;function Q_(t){return Math.floor((t+Math.round(128/$n)/256)*$n)}function eT(t){return Math.floor((t-5)/$n*100+.5)/100}function e$(t){return Math.round((t*$n+5)/$n*256)/256}function B0(t){return e$(eT(Q_(t)))}function LI(t){var s=Math.abs(t-B0(t)),r=$n;if(s>.005)for($n=IH;$n<$H;++$n)Math.abs(t-B0(t))<=s&&(s=Math.abs(t-B0(t)),r=$n);$n=r}function Ic(t){t.width?(t.wpx=Q_(t.width),t.wch=eT(t.wpx),t.MDW=$n):t.wpx?(t.wch=eT(t.wpx),t.width=e$(t.wch),t.MDW=$n):typeof t.wch=="number"&&(t.width=e$(t.wch),t.wpx=Q_(t.width),t.MDW=$n),t.customWidth&&delete t.customWidth}var OH=96,jy=OH;function zy(t){return t*96/jy}function xh(t){return t*jy/96}var SH={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function RH(t,s,r,i){s.Borders=[];var l={},c=!1;(t[0].match(_n)||[]).forEach(function(u){var h=st(u);switch(pi(h[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":l={},h.diagonalUp&&(l.diagonalUp=Yt(h.diagonalUp)),h.diagonalDown&&(l.diagonalDown=Yt(h.diagonalDown)),s.Borders.push(l);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":c=!0;break;case"</ext>":c=!1;break;default:if(i&&i.WTF&&!c)throw new Error("unrecognized "+h[0]+" in borders")}})}function LH(t,s,r,i){s.Fills=[];var l={},c=!1;(t[0].match(_n)||[]).forEach(function(u){var h=st(u);switch(pi(h[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":l={},s.Fills.push(l);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":s.Fills.push(l),l={};break;case"<patternFill":case"<patternFill>":h.patternType&&(l.patternType=h.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":l.bgColor||(l.bgColor={}),h.indexed&&(l.bgColor.indexed=parseInt(h.indexed,10)),h.theme&&(l.bgColor.theme=parseInt(h.theme,10)),h.tint&&(l.bgColor.tint=parseFloat(h.tint)),h.rgb&&(l.bgColor.rgb=h.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":l.fgColor||(l.fgColor={}),h.theme&&(l.fgColor.theme=parseInt(h.theme,10)),h.tint&&(l.fgColor.tint=parseFloat(h.tint)),h.rgb!=null&&(l.fgColor.rgb=h.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":c=!0;break;case"</ext>":c=!1;break;default:if(i&&i.WTF&&!c)throw new Error("unrecognized "+h[0]+" in fills")}})}function AH(t,s,r,i){s.Fonts=[];var l={},c=!1;(t[0].match(_n)||[]).forEach(function(u){var h=st(u);switch(pi(h[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":s.Fonts.push(l),l={};break;case"<name":h.val&&(l.name=Ft(h.val));break;case"<name/>":case"</name>":break;case"<b":l.bold=h.val?Yt(h.val):1;break;case"<b/>":l.bold=1;break;case"<i":l.italic=h.val?Yt(h.val):1;break;case"<i/>":l.italic=1;break;case"<u":switch(h.val){case"none":l.underline=0;break;case"single":l.underline=1;break;case"double":l.underline=2;break;case"singleAccounting":l.underline=33;break;case"doubleAccounting":l.underline=34;break}break;case"<u/>":l.underline=1;break;case"<strike":l.strike=h.val?Yt(h.val):1;break;case"<strike/>":l.strike=1;break;case"<outline":l.outline=h.val?Yt(h.val):1;break;case"<outline/>":l.outline=1;break;case"<shadow":l.shadow=h.val?Yt(h.val):1;break;case"<shadow/>":l.shadow=1;break;case"<condense":l.condense=h.val?Yt(h.val):1;break;case"<condense/>":l.condense=1;break;case"<extend":l.extend=h.val?Yt(h.val):1;break;case"<extend/>":l.extend=1;break;case"<sz":h.val&&(l.sz=+h.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":h.val&&(l.vertAlign=h.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":h.val&&(l.family=parseInt(h.val,10));break;case"<family/>":case"</family>":break;case"<scheme":h.val&&(l.scheme=h.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(h.val=="1")break;h.codepage=cI[parseInt(h.val,10)];break;case"<color":if(l.color||(l.color={}),h.auto&&(l.color.auto=Yt(h.auto)),h.rgb)l.color.rgb=h.rgb.slice(-6);else if(h.indexed){l.color.index=parseInt(h.indexed,10);var f=xl[l.color.index];l.color.index==81&&(f=xl[1]),f||(f=xl[1]),l.color.rgb=f[0].toString(16)+f[1].toString(16)+f[2].toString(16)}else h.theme&&(l.color.theme=parseInt(h.theme,10),h.tint&&(l.color.tint=parseFloat(h.tint)),h.theme&&r.themeElements&&r.themeElements.clrScheme&&(l.color.rgb=Z_(r.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":c=!0;break;case"</AlternateContent>":c=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":c=!0;break;case"</ext>":c=!1;break;default:if(i&&i.WTF&&!c)throw new Error("unrecognized "+h[0]+" in fonts")}})}function vH(t,s,r){s.NumberFmt=[];for(var i=Ho(dt),l=0;l<i.length;++l)s.NumberFmt[i[l]]=dt[i[l]];var c=t[0].match(_n);if(c)for(l=0;l<c.length;++l){var u=st(c[l]);switch(pi(u[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var h=$t(Ft(u.formatCode)),f=parseInt(u.numFmtId,10);if(s.NumberFmt[f]=h,f>0){if(f>392){for(f=392;f>60&&s.NumberFmt[f]!=null;--f);s.NumberFmt[f]=h}Cl(h,f)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+u[0]+" in numFmts")}}}var r_=["numFmtId","fillId","fontId","borderId","xfId"],n_=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function CH(t,s,r){s.CellXf=[];var i,l=!1;(t[0].match(_n)||[]).forEach(function(c){var u=st(c),h=0;switch(pi(u[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(i=u,delete i[0],h=0;h<r_.length;++h)i[r_[h]]&&(i[r_[h]]=parseInt(i[r_[h]],10));for(h=0;h<n_.length;++h)i[n_[h]]&&(i[n_[h]]=Yt(i[n_[h]]));if(s.NumberFmt&&i.numFmtId>392){for(h=392;h>60;--h)if(s.NumberFmt[i.numFmtId]==s.NumberFmt[h]){i.numFmtId=h;break}}s.CellXf.push(i);break;case"</xf>":break;case"<alignment":case"<alignment/>":var f={};u.vertical&&(f.vertical=u.vertical),u.horizontal&&(f.horizontal=u.horizontal),u.textRotation!=null&&(f.textRotation=u.textRotation),u.indent&&(f.indent=u.indent),u.wrapText&&(f.wrapText=Yt(u.wrapText)),i.alignment=f;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":l=!0;break;case"</AlternateContent>":l=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(r&&r.WTF&&!l)throw new Error("unrecognized "+u[0]+" in cellXfs")}})}var xH=function(){var s=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,i=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,l=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,c=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(h,f,_){var T={};if(!h)return T;h=h.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var g;return(g=h.match(s))&&vH(g,T,_),(g=h.match(l))&&AH(g,T,f,_),(g=h.match(i))&&LH(g,T,f,_),(g=h.match(c))&&RH(g,T,f,_),(g=h.match(r))&&CH(g,T,_),T}}();function NH(t,s){var r=t.read_shift(2),i=hn(t);return[r,i]}function bH(t,s,r){var i={};i.sz=t.read_shift(2)/20;var l=HB(t);l.fItalic&&(i.italic=1),l.fCondense&&(i.condense=1),l.fExtend&&(i.extend=1),l.fShadow&&(i.shadow=1),l.fOutline&&(i.outline=1),l.fStrikeout&&(i.strike=1);var c=t.read_shift(2);switch(c===700&&(i.bold=1),t.read_shift(2)){case 1:i.vertAlign="superscript";break;case 2:i.vertAlign="subscript";break}var u=t.read_shift(1);u!=0&&(i.underline=u);var h=t.read_shift(1);h>0&&(i.family=h);var f=t.read_shift(1);switch(f>0&&(i.charset=f),t.l++,i.color=UB(t),t.read_shift(1)){case 1:i.scheme="major";break;case 2:i.scheme="minor";break}return i.name=hn(t),i}var yH=fn;function kH(t,s){var r=t.l+s,i=t.read_shift(2),l=t.read_shift(2);return t.l=r,{ixfe:i,numFmtId:l}}var wH=fn;function MH(t,s,r){var i={};i.NumberFmt=[];for(var l in dt)i.NumberFmt[l]=dt[l];i.CellXf=[],i.Fonts=[];var c=[],u=!1;return Ji(t,function(f,_,T){switch(T){case 44:i.NumberFmt[f[0]]=f[1],Cl(f[1],f[0]);break;case 43:i.Fonts.push(f),f.color.theme!=null&&s&&s.themeElements&&s.themeElements.clrScheme&&(f.color.rgb=Z_(s.themeElements.clrScheme[f.color.theme].rgb,f.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:c[c.length-1]==617&&i.CellXf.push(f);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:u=!0;break;case 36:u=!1;break;case 37:c.push(T),u=!0;break;case 38:c.pop(),u=!1;break;default:if(_.T>0)c.push(T);else if(_.T<0)c.pop();else if(!u||r.WTF&&c[c.length-1]!=37)throw new Error("Unexpected record 0x"+T.toString(16))}}),i}var DH=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function PH(t,s,r){s.themeElements.clrScheme=[];var i={};(t[0].match(_n)||[]).forEach(function(l){var c=st(l);switch(c[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":i.rgb=c.val;break;case"<a:sysClr":i.rgb=c.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":c[0].charAt(1)==="/"?(s.themeElements.clrScheme[DH.indexOf(c[0])]=i,i={}):i.name=c[0].slice(3,c[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+c[0]+" in clrScheme")}})}function FH(){}function BH(){}var UH=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,HH=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,GH=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function VH(t,s,r){s.themeElements={};var i;[["clrScheme",UH,PH],["fontScheme",HH,FH],["fmtScheme",GH,BH]].forEach(function(l){if(!(i=t.match(l[1])))throw new Error(l[0]+" not found in themeElements");l[2](i,s,r)})}var WH=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function Yy(t,s){(!t||t.length===0)&&(t=XH());var r,i={};if(!(r=t.match(WH)))throw new Error("themeElements not found in theme");return VH(r[0],i,s),i.raw=t,i}function XH(t,s){var r=[sy];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function jH(t,s,r){var i=t.l+s,l=t.read_shift(4);if(l!==124226){if(!r.cellStyles){t.l=i;return}var c=t.slice(t.l);t.l=i;var u;try{u=ny(c,{type:"array"})}catch{return}var h=zn(u,"theme/theme/theme1.xml",!0);if(h)return Yy(h,r)}}function zH(t){return t.read_shift(4)}function YH(t){var s={};switch(s.xclrType=t.read_shift(2),s.nTintShade=t.read_shift(2),s.xclrType){case 0:t.l+=4;break;case 1:s.xclrValue=KH(t,4);break;case 2:s.xclrValue=wy(t);break;case 3:s.xclrValue=zH(t);break;case 4:t.l+=4;break}return t.l+=8,s}function KH(t,s){return fn(t,s)}function JH(t,s){return fn(t,s)}function qH(t){var s=t.read_shift(2),r=t.read_shift(2)-4,i=[s];switch(s){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:i[1]=YH(t);break;case 6:i[1]=JH(t,r);break;case 14:case 15:i[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+s+" "+r)}return i}function ZH(t,s){var r=t.l+s;t.l+=2;var i=t.read_shift(2);t.l+=2;for(var l=t.read_shift(2),c=[];l-- >0;)c.push(qH(t,r-t.l));return{ixfe:i,ext:c}}function QH(t,s){s.forEach(function(r){switch(r[0]){}})}function eG(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:hn(t)}}function tG(t){for(var s=[],r=t.read_shift(4);r-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function rG(t){return t.l+=4,t.read_shift(4)!=0}function nG(t,s,r){var i={Types:[],Cell:[],Value:[]},l=r||{},c=[],u=!1,h=2;return Ji(t,function(f,_,T){switch(T){case 335:i.Types.push({name:f.name});break;case 51:f.forEach(function(g){h==1?i.Cell.push({type:i.Types[g[0]-1].name,index:g[1]}):h==0&&i.Value.push({type:i.Types[g[0]-1].name,index:g[1]})});break;case 337:h=f?1:0;break;case 338:h=2;break;case 35:c.push(T),u=!0;break;case 36:c.pop(),u=!1;break;default:if(!_.T){if(!u||l.WTF&&c[c.length-1]!=35)throw new Error("Unexpected record 0x"+T.toString(16))}}}),i}function sG(t,s,r){var i={Types:[],Cell:[],Value:[]};if(!t)return i;var l=!1,c=2,u;return t.replace(_n,function(h){var f=st(h);switch(pi(f[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":i.Types.push({name:f.name});break;case"</metadataType>":break;case"<futureMetadata":for(var _=0;_<i.Types.length;++_)i.Types[_].name==f.name&&(u=i.Types[_]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":c==1?i.Cell.push({type:i.Types[f.t-1].name,index:+f.v}):c==0&&i.Value.push({type:i.Types[f.t-1].name,index:+f.v});break;case"</rc>":break;case"<cellMetadata":c=1;break;case"</cellMetadata>":c=2;break;case"<valueMetadata":c=0;break;case"</valueMetadata>":c=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;case"<rvb":if(!u)break;u.offsets||(u.offsets=[]),u.offsets.push(+f.i);break;default:if(!l&&r.WTF)throw new Error("unrecognized "+f[0]+" in metadata")}return h}),i}function iG(t){var s=[];if(!t)return s;var r=1;return(t.match(_n)||[]).forEach(function(i){var l=st(i);switch(l[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete l[0],l.i?r=l.i:l.i=r,s.push(l);break}}),s}function oG(t){var s={};s.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),s.r=ft(r);var i=t.read_shift(1);return i&2&&(s.l="1"),i&8&&(s.a="1"),s}function lG(t,s,r){var i=[];return Ji(t,function(c,u,h){switch(h){case 63:i.push(c);break;default:if(!u.T)throw new Error("Unexpected record 0x"+h.toString(16))}}),i}function aG(t,s,r,i){if(!t)return t;var l=i||{},c=!1;Ji(t,function(h,f,_){switch(_){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:c=!0;break;case 36:c=!1;break;default:if(!f.T){if(!c||l.WTF)throw new Error("Unexpected record 0x"+_.toString(16))}}},l)}function cG(t,s){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return s["!id"][r].Target}function mx(t,s,r,i){var l=Array.isArray(t),c;s.forEach(function(u){var h=Fs(u.ref);if(l?(t[h.r]||(t[h.r]=[]),c=t[h.r][h.c]):c=t[u.ref],!c){c={t:"z"},l?t[h.r][h.c]=c:t[u.ref]=c;var f=Hr(t["!ref"]||"BDWGO1000001:A1");f.s.r>h.r&&(f.s.r=h.r),f.e.r<h.r&&(f.e.r=h.r),f.s.c>h.c&&(f.s.c=h.c),f.e.c<h.c&&(f.e.c=h.c);var _=vt(f);_!==t["!ref"]&&(t["!ref"]=_)}c.c||(c.c=[]);var T={a:u.author,t:u.t,r:u.r,T:r};u.h&&(T.h=u.h);for(var g=c.c.length-1;g>=0;--g){if(!r&&c.c[g].T)return;r&&!c.c[g].T&&c.c.splice(g,1)}if(r&&i){for(g=0;g<i.length;++g)if(T.a==i[g].id){T.a=i[g].name||T.a;break}}c.c.push(T)})}function uG(t,s){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],i=[],l=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);l&&l[1]&&l[1].split(/<\/\w*:?author>/).forEach(function(u){if(!(u===""||u.trim()==="")){var h=u.match(/<(?:\w+:)?author[^>]*>(.*)/);h&&r.push(h[1])}});var c=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return c&&c[1]&&c[1].split(/<\/\w*:?comment>/).forEach(function(u){if(!(u===""||u.trim()==="")){var h=u.match(/<(?:\w+:)?comment[^>]*>/);if(h){var f=st(h[0]),_={author:f.authorId&&r[f.authorId]||"sheetjsghost",ref:f.ref,guid:f.guid},T=Fs(f.ref);if(!(s.sheetRows&&s.sheetRows<=T.r)){var g=u.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),E=!!g&&!!g[1]&&RI(g[1])||{r:"",t:"",h:""};_.r=E.r,E.r=="<t></t>"&&(E.t=E.h=""),_.t=(E.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.cellHTML&&(_.h=E.h),i.push(_)}}}}),i}function hG(t,s){var r=[],i=!1,l={},c=0;return t.replace(_n,function(h,f){var _=st(h);switch(pi(_[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":l={author:_.personId,guid:_.id,ref:_.ref,T:1};break;case"</threadedComment>":l.t!=null&&r.push(l);break;case"<text>":case"<text":c=f+h.length;break;case"</text>":l.t=t.slice(c,f).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":i=!0;break;case"</mentions>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&s.WTF)throw new Error("unrecognized "+_[0]+" in threaded comments")}return h}),r}function dG(t,s){var r=[],i=!1;return t.replace(_n,function(c){var u=st(c);switch(pi(u[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:u.displayname,id:u.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&s.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return c}),r}function fG(t){var s={};s.iauthor=t.read_shift(4);var r=jl(t);return s.rfx=r.s,s.ref=ft(r.s),t.l+=16,s}var _G=hn;function TG(t,s){var r=[],i=[],l={},c=!1;return Ji(t,function(h,f,_){switch(_){case 632:i.push(h);break;case 635:l=h;break;case 637:l.t=h.t,l.h=h.h,l.r=h.r;break;case 636:if(l.author=i[l.iauthor],delete l.iauthor,s.sheetRows&&l.rfx&&s.sheetRows<=l.rfx.r)break;l.t||(l.t=""),delete l.rfx,r.push(l);break;case 3072:break;case 35:c=!0;break;case 36:c=!1;break;case 37:break;case 38:break;default:if(!f.T){if(!c||s.WTF)throw new Error("Unexpected record 0x"+_.toString(16))}}}),r}var pG="application/vnd.ms-office.vbaProject";function gG(t){var s=gt.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,i){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var l=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");gt.utils.cfb_add(s,l,t.FileIndex[i].content)}}),gt.write(s)}function EG(){return{"!type":"dialog"}}function mG(){return{"!type":"dialog"}}function $G(){return{"!type":"macro"}}function IG(){return{"!type":"macro"}}var oc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function r(i,l,c,u){var h=!1,f=!1;c.length==0?f=!0:c.charAt(0)=="["&&(f=!0,c=c.slice(1,-1)),u.length==0?h=!0:u.charAt(0)=="["&&(h=!0,u=u.slice(1,-1));var _=c.length>0?parseInt(c,10)|0:0,T=u.length>0?parseInt(u,10)|0:0;return h?T+=s.c:--T,f?_+=s.r:--_,l+(h?"":"$")+In(T)+(f?"":"$")+Jn(_)}return function(l,c){return s=c,l.replace(t,r)}}(),Ky=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,OG=function(){return function(s,r){return s.replace(Ky,function(i,l,c,u,h,f){var _=Oy(u)-(c?0:r.c),T=Iy(f)-(h?0:r.r),g=T==0?"":h?T+1:"["+T+"]",E=_==0?"":c?_+1:"["+_+"]";return l+"R"+g+"C"+E})}}();function Jy(t,s){return t.replace(Ky,function(r,i,l,c,u,h){return i+(l=="$"?l+c:In(Oy(c)+s.c))+(u=="$"?u+h:Jn(Iy(h)+s.r))})}function SG(t,s,r){var i=EI(s),l=i.s,c=Fs(r),u={r:c.r-l.r,c:c.c-l.c};return Jy(t,u)}function RG(t){return t.length!=1}function $x(t){return t.replace(/_xlfn\./g,"")}function mr(t){t.l+=1}function Go(t,s){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function qy(t,s,r){var i=2;if(r){if(r.biff>=2&&r.biff<=5)return Zy(t);r.biff==12&&(i=4)}var l=t.read_shift(i),c=t.read_shift(i),u=Go(t),h=Go(t);return{s:{r:l,c:u[0],cRel:u[1],rRel:u[2]},e:{r:c,c:h[0],cRel:h[1],rRel:h[2]}}}function Zy(t){var s=Go(t),r=Go(t),i=t.read_shift(1),l=t.read_shift(1);return{s:{r:s[0],c:i,cRel:s[1],rRel:s[2]},e:{r:r[0],c:l,cRel:r[1],rRel:r[2]}}}function LG(t,s,r){if(r.biff<8)return Zy(t);var i=t.read_shift(r.biff==12?4:2),l=t.read_shift(r.biff==12?4:2),c=Go(t),u=Go(t);return{s:{r:i,c:c[0],cRel:c[1],rRel:c[2]},e:{r:l,c:u[0],cRel:u[1],rRel:u[2]}}}function Qy(t,s,r){if(r&&r.biff>=2&&r.biff<=5)return AG(t);var i=t.read_shift(r&&r.biff==12?4:2),l=Go(t);return{r:i,c:l[0],cRel:l[1],rRel:l[2]}}function AG(t){var s=Go(t),r=t.read_shift(1);return{r:s[0],c:r,cRel:s[1],rRel:s[2]}}function vG(t){var s=t.read_shift(2),r=t.read_shift(2);return{r:s,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function CG(t,s,r){var i=r&&r.biff?r.biff:8;if(i>=2&&i<=5)return xG(t);var l=t.read_shift(i>=12?4:2),c=t.read_shift(2),u=(c&16384)>>14,h=(c&32768)>>15;if(c&=16383,h==1)for(;l>524287;)l-=1048576;if(u==1)for(;c>8191;)c=c-16384;return{r:l,c,cRel:u,rRel:h}}function xG(t){var s=t.read_shift(2),r=t.read_shift(1),i=(s&32768)>>15,l=(s&16384)>>14;return s&=16383,i==1&&s>=8192&&(s=s-16384),l==1&&r>=128&&(r=r-256),{r:s,c:r,cRel:l,rRel:i}}function NG(t,s,r){var i=(t[t.l++]&96)>>5,l=qy(t,r.biff>=2&&r.biff<=5?6:8,r);return[i,l]}function bG(t,s,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2,"i"),c=8;if(r)switch(r.biff){case 5:t.l+=12,c=6;break;case 12:c=12;break}var u=qy(t,c,r);return[i,l,u]}function yG(t,s,r){var i=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[i]}function kG(t,s,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2),c=8;if(r)switch(r.biff){case 5:t.l+=12,c=6;break;case 12:c=12;break}return t.l+=c,[i,l]}function wG(t,s,r){var i=(t[t.l++]&96)>>5,l=LG(t,s-1,r);return[i,l]}function MG(t,s,r){var i=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[i]}function Ix(t){var s=t[t.l+1]&1,r=1;return t.l+=4,[s,r]}function DG(t,s,r){t.l+=2;for(var i=t.read_shift(r&&r.biff==2?1:2),l=[],c=0;c<=i;++c)l.push(t.read_shift(r&&r.biff==2?1:2));return l}function PG(t,s,r){var i=t[t.l+1]&255?1:0;return t.l+=2,[i,t.read_shift(r&&r.biff==2?1:2)]}function FG(t,s,r){var i=t[t.l+1]&255?1:0;return t.l+=2,[i,t.read_shift(r&&r.biff==2?1:2)]}function BG(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function UG(t,s,r){var i=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[i]}function ek(t){var s=t.read_shift(1),r=t.read_shift(1);return[s,r]}function HG(t){return t.read_shift(2),ek(t)}function GG(t){return t.read_shift(2),ek(t)}function VG(t,s,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=Qy(t,0,r);return[i,l]}function WG(t,s,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=CG(t,0,r);return[i,l]}function XG(t,s,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var c=Qy(t,0,r);return[i,l,c]}function jG(t,s,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(r&&r.biff<=3?1:2);return[z4[l],nk[l],i]}function zG(t,s,r){var i=t[t.l++],l=t.read_shift(1),c=r&&r.biff<=3?[i==88?-1:0,t.read_shift(1)]:YG(t);return[l,(c[0]===0?nk:j4)[c[1]]]}function YG(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function KG(t,s,r){t.l+=r&&r.biff==2?3:4}function JG(t,s,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var i=t.read_shift(2),l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function qG(t){return t.l++,zl[t.read_shift(1)]}function ZG(t){return t.l++,t.read_shift(2)}function QG(t){return t.l++,t.read_shift(1)!==0}function e4(t){return t.l++,cn(t)}function t4(t,s,r){return t.l++,Hh(t,s-1,r)}function r4(t,s){var r=[t.read_shift(1)];if(s==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=_r(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:r[1]=zl[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=cn(t);break;case 2:r[1]=Yl(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function n4(t,s,r){for(var i=t.read_shift(r.biff==12?4:2),l=[],c=0;c!=i;++c)l.push((r.biff==12?jl:$T)(t));return l}function s4(t,s,r){var i=0,l=0;r.biff==12?(i=t.read_shift(4),l=t.read_shift(4)):(l=1+t.read_shift(1),i=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--i,--l==0&&(l=256));for(var c=0,u=[];c!=i&&(u[c]=[]);++c)for(var h=0;h!=l;++h)u[c][h]=r4(t,r.biff);return u}function i4(t,s,r){var i=t.read_shift(1)>>>5&3,l=!r||r.biff>=8?4:2,c=t.read_shift(l);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[i,0,c]}function o4(t,s,r){if(r.biff==5)return l4(t);var i=t.read_shift(1)>>>5&3,l=t.read_shift(2),c=t.read_shift(4);return[i,l,c]}function l4(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var i=t.read_shift(2);return t.l+=12,[s,r,i]}function a4(t,s,r){var i=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function c4(t,s,r){var i=t.read_shift(1)>>>5&3,l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function u4(t,s,r){var i=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[i]}function h4(t,s,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2),c=4;if(r)switch(r.biff){case 5:c=15;break;case 12:c=6;break}return t.l+=c,[i,l]}var d4=fn,f4=fn,_4=fn;function Vh(t,s,r){return t.l+=2,[vG(t)]}function AI(t){return t.l+=6,[]}var T4=Vh,p4=AI,g4=AI,E4=Vh;function tk(t){return t.l+=2,[Ir(t),t.read_shift(2)&1]}var m4=Vh,$4=tk,I4=AI,O4=Vh,S4=Vh,R4=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function L4(t){t.l+=2;var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(4),l=t.read_shift(2),c=t.read_shift(2),u=R4[r>>2&31];return{ixti:s,coltype:r&3,rt:u,idx:i,c:l,C:c}}function A4(t){return t.l+=2,[t.read_shift(4)]}function v4(t,s,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function C4(t,s,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function x4(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function N4(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function b4(t){return t.l+=4,[0,0]}var Ox={1:{n:"PtgExp",f:JG},2:{n:"PtgTbl",f:_4},3:{n:"PtgAdd",f:mr},4:{n:"PtgSub",f:mr},5:{n:"PtgMul",f:mr},6:{n:"PtgDiv",f:mr},7:{n:"PtgPower",f:mr},8:{n:"PtgConcat",f:mr},9:{n:"PtgLt",f:mr},10:{n:"PtgLe",f:mr},11:{n:"PtgEq",f:mr},12:{n:"PtgGe",f:mr},13:{n:"PtgGt",f:mr},14:{n:"PtgNe",f:mr},15:{n:"PtgIsect",f:mr},16:{n:"PtgUnion",f:mr},17:{n:"PtgRange",f:mr},18:{n:"PtgUplus",f:mr},19:{n:"PtgUminus",f:mr},20:{n:"PtgPercent",f:mr},21:{n:"PtgParen",f:mr},22:{n:"PtgMissArg",f:mr},23:{n:"PtgStr",f:t4},26:{n:"PtgSheet",f:v4},27:{n:"PtgEndSheet",f:C4},28:{n:"PtgErr",f:qG},29:{n:"PtgBool",f:QG},30:{n:"PtgInt",f:ZG},31:{n:"PtgNum",f:e4},32:{n:"PtgArray",f:MG},33:{n:"PtgFunc",f:jG},34:{n:"PtgFuncVar",f:zG},35:{n:"PtgName",f:i4},36:{n:"PtgRef",f:VG},37:{n:"PtgArea",f:NG},38:{n:"PtgMemArea",f:a4},39:{n:"PtgMemErr",f:d4},40:{n:"PtgMemNoMem",f:f4},41:{n:"PtgMemFunc",f:c4},42:{n:"PtgRefErr",f:u4},43:{n:"PtgAreaErr",f:yG},44:{n:"PtgRefN",f:WG},45:{n:"PtgAreaN",f:wG},46:{n:"PtgMemAreaN",f:x4},47:{n:"PtgMemNoMemN",f:N4},57:{n:"PtgNameX",f:o4},58:{n:"PtgRef3d",f:XG},59:{n:"PtgArea3d",f:bG},60:{n:"PtgRefErr3d",f:h4},61:{n:"PtgAreaErr3d",f:kG},255:{}},y4={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},k4={1:{n:"PtgElfLel",f:tk},2:{n:"PtgElfRw",f:O4},3:{n:"PtgElfCol",f:T4},6:{n:"PtgElfRwV",f:S4},7:{n:"PtgElfColV",f:E4},10:{n:"PtgElfRadical",f:m4},11:{n:"PtgElfRadicalS",f:I4},13:{n:"PtgElfColS",f:p4},15:{n:"PtgElfColSV",f:g4},16:{n:"PtgElfRadicalLel",f:$4},25:{n:"PtgList",f:L4},29:{n:"PtgSxName",f:A4},255:{}},w4={0:{n:"PtgAttrNoop",f:b4},1:{n:"PtgAttrSemi",f:UG},2:{n:"PtgAttrIf",f:FG},4:{n:"PtgAttrChoose",f:DG},8:{n:"PtgAttrGoto",f:PG},16:{n:"PtgAttrSum",f:KG},32:{n:"PtgAttrBaxcel",f:Ix},33:{n:"PtgAttrBaxcel",f:Ix},64:{n:"PtgAttrSpace",f:HG},65:{n:"PtgAttrSpaceSemi",f:GG},128:{n:"PtgAttrIfError",f:BG},255:{}};function Wh(t,s,r,i){if(i.biff<8)return fn(t,s);for(var l=t.l+s,c=[],u=0;u!==r.length;++u)switch(r[u][0]){case"PtgArray":r[u][1]=s4(t,0,i),c.push(r[u][1]);break;case"PtgMemArea":r[u][2]=n4(t,r[u][1],i),c.push(r[u][2]);break;case"PtgExp":i&&i.biff==12&&(r[u][1][1]=t.read_shift(4),c.push(r[u][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[u][0]}return s=l-t.l,s!==0&&c.push(fn(t,s)),c}function Xh(t,s,r){for(var i=t.l+s,l,c,u=[];i!=t.l;)s=i-t.l,c=t[t.l],l=Ox[c]||Ox[y4[c]],(c===24||c===25)&&(l=(c===24?k4:w4)[t[t.l+1]]),!l||!l.f?fn(t,s):u.push([l.n,l.f(t,s,r)]);return u}function M4(t){for(var s=[],r=0;r<t.length;++r){for(var i=t[r],l=[],c=0;c<i.length;++c){var u=i[c];if(u)switch(u[0]){case 2:l.push('"'+u[1].replace(/"/g,'""')+'"');break;default:l.push(u[1])}else l.push("")}s.push(l.join(","))}return s.join(";")}var D4={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function P4(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function rk(t,s,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var i=t.XTI[s];if(r.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!i)return"SH33TJSERR1";var l="";if(r.biff>8)switch(t[i[0]][0]){case 357:return l=i[1]==-1?"#REF":t.SheetNames[i[1]],i[1]==i[2]?l:l+":"+t.SheetNames[i[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[i[0]][0];case 355:default:return"SH33TJSSRC"+t[i[0]][0]}switch(t[i[0]][0][0]){case 1025:return l=i[1]==-1?"#REF":t.SheetNames[i[1]]||"SH33TJSERR3",i[1]==i[2]?l:l+":"+t.SheetNames[i[2]];case 14849:return t[i[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return t[i[0]][0][3]?(l=i[1]==-1?"#REF":t[i[0]][0][3][i[1]]||"SH33TJSERR4",i[1]==i[2]?l:l+":"+t[i[0]][0][3][i[2]]):"SH33TJSERR2"}}function Sx(t,s,r){var i=rk(t,s,r);return i=="#REF"?i:P4(i,r)}function ln(t,s,r,i,l){var c=l&&l.biff||8,u={s:{c:0,r:0}},h=[],f,_,T,g=0,E=0,S,R="";if(!t[0]||!t[0][0])return"";for(var L=-1,x="",v=0,A=t[0].length;v<A;++v){var m=t[0][v];switch(m[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(f=h.pop(),_=h.pop(),L>=0){switch(t[0][L][1][0]){case 0:x=ur(" ",t[0][L][1][1]);break;case 1:x=ur("\r",t[0][L][1][1]);break;default:if(x="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][L][1][0])}_=_+x,L=-1}h.push(_+D4[m[0]]+f);break;case"PtgIsect":f=h.pop(),_=h.pop(),h.push(_+" "+f);break;case"PtgUnion":f=h.pop(),_=h.pop(),h.push(_+","+f);break;case"PtgRange":f=h.pop(),_=h.pop(),h.push(_+":"+f);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":T=Yu(m[1][1],u,l),h.push(Ku(T,c));break;case"PtgRefN":T=r?Yu(m[1][1],r,l):m[1][1],h.push(Ku(T,c));break;case"PtgRef3d":g=m[1][1],T=Yu(m[1][2],u,l),R=Sx(i,g,l),h.push(R+"!"+Ku(T,c));break;case"PtgFunc":case"PtgFuncVar":var y=m[1][0],H=m[1][1];y||(y=0),y&=127;var G=y==0?[]:h.slice(-y);h.length-=y,H==="User"&&(H=G.shift()),h.push(H+"("+G.join(",")+")");break;case"PtgBool":h.push(m[1]?"TRUE":"FALSE");break;case"PtgInt":h.push(m[1]);break;case"PtgNum":h.push(String(m[1]));break;case"PtgStr":h.push('"'+m[1].replace(/"/g,'""')+'"');break;case"PtgErr":h.push(m[1]);break;case"PtgAreaN":S=nx(m[1][1],r?{s:r}:u,l),h.push(P0(S,l));break;case"PtgArea":S=nx(m[1][1],u,l),h.push(P0(S,l));break;case"PtgArea3d":g=m[1][1],S=m[1][2],R=Sx(i,g,l),h.push(R+"!"+P0(S,l));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":E=m[1][2];var k=(i.names||[])[E-1]||(i[0]||[])[E],F=k?k.Name:"SH33TJSNAME"+String(E);F&&F.slice(0,6)=="_xlfn."&&!l.xlfn&&(F=F.slice(6)),h.push(F);break;case"PtgNameX":var B=m[1][1];E=m[1][2];var re;if(l.biff<=5)B<0&&(B=-B),i[B]&&(re=i[B][E]);else{var ne="";if(((i[B]||[])[0]||[])[0]==14849||(((i[B]||[])[0]||[])[0]==1025?i[B][E]&&i[B][E].itab>0&&(ne=i.SheetNames[i[B][E].itab-1]+"!"):ne=i.SheetNames[E-1]+"!"),i[B]&&i[B][E])ne+=i[B][E].Name;else if(i[0]&&i[0][E])ne+=i[0][E].Name;else{var ee=(rk(i,B,l)||"").split(";;");ee[E-1]?ne=ee[E-1]:ne+="SH33TJSERRX"}h.push(ne);break}re||(re={Name:"SH33TJSERRY"}),h.push(re.Name);break;case"PtgParen":var me="(",we=")";if(L>=0){switch(x="",t[0][L][1][0]){case 2:me=ur(" ",t[0][L][1][1])+me;break;case 3:me=ur("\r",t[0][L][1][1])+me;break;case 4:we=ur(" ",t[0][L][1][1])+we;break;case 5:we=ur("\r",t[0][L][1][1])+we;break;default:if(l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][L][1][0])}L=-1}h.push(me+h.pop()+we);break;case"PtgRefErr":h.push("#REF!");break;case"PtgRefErr3d":h.push("#REF!");break;case"PtgExp":T={c:m[1][1],r:m[1][0]};var Oe={c:r.c,r:r.r};if(i.sharedf[ft(T)]){var ke=i.sharedf[ft(T)];h.push(ln(ke,u,Oe,i,l))}else{var ye=!1;for(f=0;f!=i.arrayf.length;++f)if(_=i.arrayf[f],!(T.c<_[0].s.c||T.c>_[0].e.c)&&!(T.r<_[0].s.r||T.r>_[0].e.r)){h.push(ln(_[1],u,Oe,i,l)),ye=!0;break}ye||h.push(m[1])}break;case"PtgArray":h.push("{"+M4(m[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":L=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":h.push("");break;case"PtgAreaErr":h.push("#REF!");break;case"PtgAreaErr3d":h.push("#REF!");break;case"PtgList":h.push("Table"+m[1].idx+"[#"+m[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(m));default:throw new Error("Unrecognized Formula Token: "+String(m))}var Re=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(l.biff!=3&&L>=0&&Re.indexOf(t[0][v][0])==-1){m=t[0][L];var K=!0;switch(m[1][0]){case 4:K=!1;case 0:x=ur(" ",m[1][1]);break;case 5:K=!1;case 1:x=ur("\r",m[1][1]);break;default:if(x="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+m[1][0])}h.push((K?x:"")+h.pop()+(K?"":x)),L=-1}}if(h.length>1&&l.WTF)throw new Error("bad formula stack");return h[0]}function F4(t,s,r){var i=t.l+s,l=r.biff==2?1:2,c,u=t.read_shift(l);if(u==65535)return[[],fn(t,s-2)];var h=Xh(t,u,r);return s!==u+l&&(c=Wh(t,s-u-l,h,r)),t.l=i,[h,c]}function B4(t,s,r){var i=t.l+s,l=r.biff==2?1:2,c,u=t.read_shift(l);if(u==65535)return[[],fn(t,s-2)];var h=Xh(t,u,r);return s!==u+l&&(c=Wh(t,s-u-l,h,r)),t.l=i,[h,c]}function U4(t,s,r,i){var l=t.l+s,c=Xh(t,i,r),u;return l!==t.l&&(u=Wh(t,l-t.l,c,r)),[c,u]}function H4(t,s,r){var i=t.l+s,l,c=t.read_shift(2),u=Xh(t,c,r);return c==65535?[[],fn(t,s-2)]:(s!==c+2&&(l=Wh(t,i-c-2,u,r)),[u,l])}function G4(t){var s;if(Bi(t,t.l+6)!==65535)return[cn(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return s=t[t.l+2]===1,t.l+=8,[s,"b"];case 2:return s=t[t.l+2],t.l+=8,[s,"e"];case 3:return t.l+=8,["","s"]}return[]}function U0(t,s,r){var i=t.l+s,l=gi(t);r.biff==2&&++t.l;var c=G4(t),u=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var h=B4(t,i-t.l,r);return{cell:l,val:c[0],formula:h,shared:u>>3&1,tt:c[1]}}function IT(t,s,r){var i=t.read_shift(4),l=Xh(t,i,r),c=t.read_shift(4),u=c>0?Wh(t,c,l,r):null;return[l,u]}var V4=IT,OT=IT,W4=IT,X4=IT,j4={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},nk={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},z4={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function Rx(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(s,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function H0(t){var s=t.split(":"),r=s[0].split(".")[0];return[r,s[0].split(".")[1]+(s.length>1?":"+(s[1].split(".")[1]||s[1].split(".")[0]):"")]}var Qu={},lc={};function eh(t,s){if(t){var r=[.7,.7,.75,.75,.3,.3];s=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function sk(t,s,r,i,l,c){try{i.cellNF&&(t.z=dt[s])}catch(h){if(i.WTF)throw h}if(!(t.t==="z"&&!i.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Kr(t.v)),(!i||i.cellText!==!1)&&t.t!=="z")try{if(dt[s]==null&&Cl(JF[s]||"General",s),t.t==="e")t.w=t.w||zl[t.v];else if(s===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Sh(t.v);else if(t.t==="d"){var u=Qn(t.v);(u|0)===u?t.w=u.toString(10):t.w=Sh(u)}else{if(t.v===void 0)return"";t.w=Ml(t.v,lc)}else t.t==="d"?t.w=ms(s,Qn(t.v),lc):t.w=ms(s,t.v,lc)}catch(h){if(i.WTF)throw h}if(i.cellStyles&&r!=null)try{t.s=c.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=Z_(l.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),i.WTF&&(t.s.fgColor.raw_rgb=l.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=Z_(l.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),i.WTF&&(t.s.bgColor.raw_rgb=l.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(h){if(i.WTF&&c.Fills)throw h}}}function Y4(t,s){var r=Hr(s);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=vt(r))}var K4=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,J4=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,q4=/<(?:\w:)?hyperlink [^>]*>/mg,Z4=/"(\w*:\w*)"/,Q4=/<(?:\w:)?col\b[^>]*[\/]?>/g,eV=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,tV=/<(?:\w:)?pageMargins[^>]*\/>/g,ik=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,rV=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,nV=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function sV(t,s,r,i,l,c,u){if(!t)return t;i||(i={"!id":{}});var h=s.dense?[]:{},f={s:{r:2e6,c:2e6},e:{r:0,c:0}},_="",T="",g=t.match(J4);g?(_=t.slice(0,g.index),T=t.slice(g.index+g[0].length)):_=T=t;var E=_.match(ik);E?vI(E[0],h,l,r):(E=_.match(rV))&&iV(E[0],E[1]||"",h,l,r);var S=(_.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(S>0){var R=_.slice(S,S+50).match(Z4);R&&Y4(h,R[1])}var L=_.match(nV);L&&L[1]&&hV(L[1],l);var x=[];if(s.cellStyles){var v=_.match(Q4);v&&aV(x,v)}g&&dV(g[1],h,s,f,c,u);var A=T.match(eV);A&&(h["!autofilter"]=cV(A[0]));var m=[],y=T.match(K4);if(y)for(S=0;S!=y.length;++S)m[S]=Hr(y[S].slice(y[S].indexOf('"')+1));var H=T.match(q4);H&&oV(h,H,i);var G=T.match(tV);if(G&&(h["!margins"]=lV(st(G[0]))),!h["!ref"]&&f.e.c>=f.s.c&&f.e.r>=f.s.r&&(h["!ref"]=vt(f)),s.sheetRows>0&&h["!ref"]){var k=Hr(h["!ref"]);s.sheetRows<=+k.e.r&&(k.e.r=s.sheetRows-1,k.e.r>f.e.r&&(k.e.r=f.e.r),k.e.r<k.s.r&&(k.s.r=k.e.r),k.e.c>f.e.c&&(k.e.c=f.e.c),k.e.c<k.s.c&&(k.s.c=k.e.c),h["!fullref"]=h["!ref"],h["!ref"]=vt(k))}return x.length>0&&(h["!cols"]=x),m.length>0&&(h["!merges"]=m),h}function vI(t,s,r,i){var l=st(t);r.Sheets[i]||(r.Sheets[i]={}),l.codeName&&(r.Sheets[i].CodeName=$t(Ft(l.codeName)))}function iV(t,s,r,i,l){vI(t.slice(0,t.indexOf(">")),r,i,l)}function oV(t,s,r){for(var i=Array.isArray(t),l=0;l!=s.length;++l){var c=st(Ft(s[l]),!0);if(!c.ref)return;var u=((r||{})["!id"]||[])[c.id];u?(c.Target=u.Target,c.location&&(c.Target+="#"+$t(c.location))):(c.Target="#"+$t(c.location),u={Target:c.Target,TargetMode:"Internal"}),c.Rel=u,c.tooltip&&(c.Tooltip=c.tooltip,delete c.tooltip);for(var h=Hr(c.ref),f=h.s.r;f<=h.e.r;++f)for(var _=h.s.c;_<=h.e.c;++_){var T=ft({c:_,r:f});i?(t[f]||(t[f]=[]),t[f][_]||(t[f][_]={t:"z",v:void 0}),t[f][_].l=c):(t[T]||(t[T]={t:"z",v:void 0}),t[T].l=c)}}}function lV(t){var s={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(s[r]=parseFloat(t[r]))}),s}function aV(t,s){for(var r=!1,i=0;i!=s.length;++i){var l=st(s[i],!0);l.hidden&&(l.hidden=Yt(l.hidden));var c=parseInt(l.min,10)-1,u=parseInt(l.max,10)-1;for(l.outlineLevel&&(l.level=+l.outlineLevel||0),delete l.min,delete l.max,l.width=+l.width,!r&&l.width&&(r=!0,LI(l.width)),Ic(l);c<=u;)t[c++]=Jr(l)}}function cV(t){var s={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return s}var uV=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function hV(t,s){s.Views||(s.Views=[{}]),(t.match(uV)||[]).forEach(function(r,i){var l=st(r);s.Views[i]||(s.Views[i]={}),+l.zoomScale&&(s.Views[i].zoom=+l.zoomScale),Yt(l.rightToLeft)&&(s.Views[i].RTL=!0)})}var dV=function(){var t=/<(?:\w+:)?c[ \/>]/,s=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,i=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,l=/ref=["']([^"']*)["']/,c=Lh("v"),u=Lh("f");return function(f,_,T,g,E,S){for(var R=0,L="",x=[],v=[],A=0,m=0,y=0,H="",G,k,F=0,B=0,re,ne,ee=0,me=0,we=Array.isArray(S.CellXf),Oe,ke=[],ye=[],Re=Array.isArray(_),K=[],z={},oe=!1,M=!!T.sheetStubs,Z=f.split(s),J=0,q=Z.length;J!=q;++J){L=Z[J].trim();var he=L.length;if(he!==0){var xe=0;e:for(R=0;R<he;++R)switch(L[R]){case">":if(L[R-1]!="/"){++R;break e}if(T&&T.cellStyles){if(k=st(L.slice(xe,R),!0),F=k.r!=null?parseInt(k.r,10):F+1,B=-1,T.sheetRows&&T.sheetRows<F)continue;z={},oe=!1,k.ht&&(oe=!0,z.hpt=parseFloat(k.ht),z.hpx=xh(z.hpt)),k.hidden=="1"&&(oe=!0,z.hidden=!0),k.outlineLevel!=null&&(oe=!0,z.level=+k.outlineLevel),oe&&(K[F-1]=z)}break;case"<":xe=R;break}if(xe>=R)break;if(k=st(L.slice(xe,R),!0),F=k.r!=null?parseInt(k.r,10):F+1,B=-1,!(T.sheetRows&&T.sheetRows<F)){g.s.r>F-1&&(g.s.r=F-1),g.e.r<F-1&&(g.e.r=F-1),T&&T.cellStyles&&(z={},oe=!1,k.ht&&(oe=!0,z.hpt=parseFloat(k.ht),z.hpx=xh(z.hpt)),k.hidden=="1"&&(oe=!0,z.hidden=!0),k.outlineLevel!=null&&(oe=!0,z.level=+k.outlineLevel),oe&&(K[F-1]=z)),x=L.slice(R).split(t);for(var Pe=0;Pe!=x.length&&x[Pe].trim().charAt(0)=="<";++Pe);for(x=x.slice(Pe),R=0;R!=x.length;++R)if(L=x[R].trim(),L.length!==0){if(v=L.match(r),A=R,m=0,y=0,L="<c "+(L.slice(0,1)=="<"?">":"")+L,v!=null&&v.length===2){for(A=0,H=v[1],m=0;m!=H.length&&!((y=H.charCodeAt(m)-64)<1||y>26);++m)A=26*A+y;--A,B=A}else++B;for(m=0;m!=L.length&&L.charCodeAt(m)!==62;++m);if(++m,k=st(L.slice(0,m),!0),k.r||(k.r=ft({r:F-1,c:B})),H=L.slice(m),G={t:""},(v=H.match(c))!=null&&v[1]!==""&&(G.v=$t(v[1])),T.cellFormula){if((v=H.match(u))!=null&&v[1]!==""){if(G.f=$t(Ft(v[1])).replace(/\r\n/g,`
`),T.xlfn||(G.f=$x(G.f)),v[0].indexOf('t="array"')>-1)G.F=(H.match(l)||[])[1],G.F.indexOf(":")>-1&&ke.push([Hr(G.F),G.F]);else if(v[0].indexOf('t="shared"')>-1){ne=st(v[0]);var be=$t(Ft(v[1]));T.xlfn||(be=$x(be)),ye[parseInt(ne.si,10)]=[ne,be,k.r]}}else(v=H.match(/<f[^>]*\/>/))&&(ne=st(v[0]),ye[ne.si]&&(G.f=SG(ye[ne.si][1],ye[ne.si][2],k.r)));var ce=Fs(k.r);for(m=0;m<ke.length;++m)ce.r>=ke[m][0].s.r&&ce.r<=ke[m][0].e.r&&ce.c>=ke[m][0].s.c&&ce.c<=ke[m][0].e.c&&(G.F=ke[m][1])}if(k.t==null&&G.v===void 0)if(G.f||G.F)G.v=0,G.t="n";else if(M)G.t="z";else continue;else G.t=k.t||"n";switch(g.s.c>B&&(g.s.c=B),g.e.c<B&&(g.e.c=B),G.t){case"n":if(G.v==""||G.v==null){if(!M)continue;G.t="z"}else G.v=parseFloat(G.v);break;case"s":if(typeof G.v>"u"){if(!M)continue;G.t="z"}else re=Qu[parseInt(G.v,10)],G.v=re.t,G.r=re.r,T.cellHTML&&(G.h=re.h);break;case"str":G.t="s",G.v=G.v!=null?Ft(G.v):"",T.cellHTML&&(G.h=oy(G.v));break;case"inlineStr":v=H.match(i),G.t="s",v!=null&&(re=RI(v[1]))?(G.v=re.t,T.cellHTML&&(G.h=re.h)):G.v="";break;case"b":G.v=Yt(G.v);break;case"d":T.cellDates?G.v=Kr(G.v,1):(G.v=Qn(Kr(G.v,1)),G.t="n");break;case"e":(!T||T.cellText!==!1)&&(G.w=G.v),G.v=Ay[G.v];break}if(ee=me=0,Oe=null,we&&k.s!==void 0&&(Oe=S.CellXf[k.s],Oe!=null&&(Oe.numFmtId!=null&&(ee=Oe.numFmtId),T.cellStyles&&Oe.fillId!=null&&(me=Oe.fillId))),sk(G,ee,me,T,E,S),T.cellDates&&we&&G.t=="n"&&Lc(dt[ee])&&(G.t="d",G.v=mT(G.v)),k.cm&&T.xlmeta){var et=(T.xlmeta.Cell||[])[+k.cm-1];et&&et.type=="XLDAPR"&&(G.D=!0)}if(Re){var N=Fs(k.r);_[N.r]||(_[N.r]=[]),_[N.r][N.c]=G}else _[k.r]=G}}}}K.length>0&&(_["!rows"]=K)}}();function fV(t,s){var r={},i=t.l+s;r.r=t.read_shift(4),t.l+=4;var l=t.read_shift(2);t.l+=1;var c=t.read_shift(1);return t.l=i,c&7&&(r.level=c&7),c&16&&(r.hidden=!0),c&32&&(r.hpt=l/20),r}var _V=jl;function TV(){}function pV(t,s){var r={},i=t[t.l];return++t.l,r.above=!(i&64),r.left=!(i&128),t.l+=18,r.name=FB(t),r}function gV(t){var s=$s(t);return[s]}function EV(t){var s=Xl(t);return[s]}function mV(t){var s=$s(t),r=t.read_shift(1);return[s,r,"b"]}function $V(t){var s=Xl(t),r=t.read_shift(1);return[s,r,"b"]}function IV(t){var s=$s(t),r=t.read_shift(1);return[s,r,"e"]}function OV(t){var s=Xl(t),r=t.read_shift(1);return[s,r,"e"]}function SV(t){var s=$s(t),r=t.read_shift(4);return[s,r,"s"]}function RV(t){var s=Xl(t),r=t.read_shift(4);return[s,r,"s"]}function LV(t){var s=$s(t),r=cn(t);return[s,r,"n"]}function ok(t){var s=Xl(t),r=cn(t);return[s,r,"n"]}function AV(t){var s=$s(t),r=II(t);return[s,r,"n"]}function vV(t){var s=Xl(t),r=II(t);return[s,r,"n"]}function CV(t){var s=$s(t),r=mI(t);return[s,r,"is"]}function xV(t){var s=$s(t),r=hn(t);return[s,r,"str"]}function NV(t){var s=Xl(t),r=hn(t);return[s,r,"str"]}function bV(t,s,r){var i=t.l+s,l=$s(t);l.r=r["!row"];var c=t.read_shift(1),u=[l,c,"b"];if(r.cellFormula){t.l+=2;var h=OT(t,i-t.l,r);u[3]=ln(h,null,l,r.supbooks,r)}else t.l=i;return u}function yV(t,s,r){var i=t.l+s,l=$s(t);l.r=r["!row"];var c=t.read_shift(1),u=[l,c,"e"];if(r.cellFormula){t.l+=2;var h=OT(t,i-t.l,r);u[3]=ln(h,null,l,r.supbooks,r)}else t.l=i;return u}function kV(t,s,r){var i=t.l+s,l=$s(t);l.r=r["!row"];var c=cn(t),u=[l,c,"n"];if(r.cellFormula){t.l+=2;var h=OT(t,i-t.l,r);u[3]=ln(h,null,l,r.supbooks,r)}else t.l=i;return u}function wV(t,s,r){var i=t.l+s,l=$s(t);l.r=r["!row"];var c=hn(t),u=[l,c,"str"];if(r.cellFormula){t.l+=2;var h=OT(t,i-t.l,r);u[3]=ln(h,null,l,r.supbooks,r)}else t.l=i;return u}var MV=jl;function DV(t,s){var r=t.l+s,i=jl(t),l=$I(t),c=hn(t),u=hn(t),h=hn(t);t.l=r;var f={rfx:i,relId:l,loc:c,display:h};return u&&(f.Tooltip=u),f}function PV(){}function FV(t,s,r){var i=t.l+s,l=Sy(t),c=t.read_shift(1),u=[l];if(u[2]=c,r.cellFormula){var h=V4(t,i-t.l,r);u[1]=h}else t.l=i;return u}function BV(t,s,r){var i=t.l+s,l=jl(t),c=[l];if(r.cellFormula){var u=X4(t,i-t.l,r);c[1]=u,t.l=i}else t.l=i;return c}var UV=["left","right","top","bottom","header","footer"];function HV(t){var s={};return UV.forEach(function(r){s[r]=cn(t)}),s}function GV(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function VV(){}function WV(){}function XV(t,s,r,i,l,c,u){if(!t)return t;var h=s||{};i||(i={"!id":{}});var f=h.dense?[]:{},_,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},g=!1,E=!1,S,R,L,x,v,A,m,y,H,G=[];h.biff=12,h["!row"]=0;var k=0,F=!1,B=[],re={},ne=h.supbooks||l.supbooks||[[]];if(ne.sharedf=re,ne.arrayf=B,ne.SheetNames=l.SheetNames||l.Sheets.map(function(Re){return Re.name}),!h.supbooks&&(h.supbooks=ne,l.Names))for(var ee=0;ee<l.Names.length;++ee)ne[0][ee+1]=l.Names[ee];var me=[],we=[],Oe=!1;tT[16]={n:"BrtShortReal",f:ok};var ke;if(Ji(t,function(K,z,oe){if(!E)switch(oe){case 148:_=K;break;case 0:S=K,h.sheetRows&&h.sheetRows<=S.r&&(E=!0),y=Jn(x=S.r),h["!row"]=S.r,(K.hidden||K.hpt||K.level!=null)&&(K.hpt&&(K.hpx=xh(K.hpt)),we[K.r]=K);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(R={t:K[2]},K[2]){case"n":R.v=K[1];break;case"s":m=Qu[K[1]],R.v=m.t,R.r=m.r;break;case"b":R.v=!!K[1];break;case"e":R.v=K[1],h.cellText!==!1&&(R.w=zl[R.v]);break;case"str":R.t="s",R.v=K[1];break;case"is":R.t="s",R.v=K[1].t;break}if((L=u.CellXf[K[0].iStyleRef])&&sk(R,L.numFmtId,null,h,c,u),v=K[0].c==-1?v+1:K[0].c,h.dense?(f[x]||(f[x]=[]),f[x][v]=R):f[In(v)+y]=R,h.cellFormula){for(F=!1,k=0;k<B.length;++k){var M=B[k];S.r>=M[0].s.r&&S.r<=M[0].e.r&&v>=M[0].s.c&&v<=M[0].e.c&&(R.F=vt(M[0]),F=!0)}!F&&K.length>3&&(R.f=K[3])}if(T.s.r>S.r&&(T.s.r=S.r),T.s.c>v&&(T.s.c=v),T.e.r<S.r&&(T.e.r=S.r),T.e.c<v&&(T.e.c=v),h.cellDates&&L&&R.t=="n"&&Lc(dt[L.numFmtId])){var Z=Rl(R.v);Z&&(R.t="d",R.v=new Date(Z.y,Z.m-1,Z.d,Z.H,Z.M,Z.S,Z.u))}ke&&(ke.type=="XLDAPR"&&(R.D=!0),ke=void 0);break;case 1:case 12:if(!h.sheetStubs||g)break;R={t:"z",v:void 0},v=K[0].c==-1?v+1:K[0].c,h.dense?(f[x]||(f[x]=[]),f[x][v]=R):f[In(v)+y]=R,T.s.r>S.r&&(T.s.r=S.r),T.s.c>v&&(T.s.c=v),T.e.r<S.r&&(T.e.r=S.r),T.e.c<v&&(T.e.c=v),ke&&(ke.type=="XLDAPR"&&(R.D=!0),ke=void 0);break;case 176:G.push(K);break;case 49:ke=((h.xlmeta||{}).Cell||[])[K-1];break;case 494:var J=i["!id"][K.relId];for(J?(K.Target=J.Target,K.loc&&(K.Target+="#"+K.loc),K.Rel=J):K.relId==""&&(K.Target="#"+K.loc),x=K.rfx.s.r;x<=K.rfx.e.r;++x)for(v=K.rfx.s.c;v<=K.rfx.e.c;++v)h.dense?(f[x]||(f[x]=[]),f[x][v]||(f[x][v]={t:"z",v:void 0}),f[x][v].l=K):(A=ft({c:v,r:x}),f[A]||(f[A]={t:"z",v:void 0}),f[A].l=K);break;case 426:if(!h.cellFormula)break;B.push(K),H=h.dense?f[x][v]:f[In(v)+y],H.f=ln(K[1],T,{r:S.r,c:v},ne,h),H.F=vt(K[0]);break;case 427:if(!h.cellFormula)break;re[ft(K[0].s)]=K[1],H=h.dense?f[x][v]:f[In(v)+y],H.f=ln(K[1],T,{r:S.r,c:v},ne,h);break;case 60:if(!h.cellStyles)break;for(;K.e>=K.s;)me[K.e--]={width:K.w/256,hidden:!!(K.flags&1),level:K.level},Oe||(Oe=!0,LI(K.w/256)),Ic(me[K.e+1]);break;case 161:f["!autofilter"]={ref:vt(K)};break;case 476:f["!margins"]=K;break;case 147:l.Sheets[r]||(l.Sheets[r]={}),K.name&&(l.Sheets[r].CodeName=K.name),(K.above||K.left)&&(f["!outline"]={above:K.above,left:K.left});break;case 137:l.Views||(l.Views=[{}]),l.Views[0]||(l.Views[0]={}),K.RTL&&(l.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:g=!0;break;case 36:g=!1;break;case 37:g=!0;break;case 38:g=!1;break;default:if(!z.T){if(!g||h.WTF)throw new Error("Unexpected record 0x"+oe.toString(16))}}},h),delete h.supbooks,delete h["!row"],!f["!ref"]&&(T.s.r<2e6||_&&(_.e.r>0||_.e.c>0||_.s.r>0||_.s.c>0))&&(f["!ref"]=vt(_||T)),h.sheetRows&&f["!ref"]){var ye=Hr(f["!ref"]);h.sheetRows<=+ye.e.r&&(ye.e.r=h.sheetRows-1,ye.e.r>T.e.r&&(ye.e.r=T.e.r),ye.e.r<ye.s.r&&(ye.s.r=ye.e.r),ye.e.c>T.e.c&&(ye.e.c=T.e.c),ye.e.c<ye.s.c&&(ye.s.c=ye.e.c),f["!fullref"]=f["!ref"],f["!ref"]=vt(ye))}return G.length>0&&(f["!merges"]=G),me.length>0&&(f["!cols"]=me),we.length>0&&(f["!rows"]=we),f}function jV(t){var s=[],r=t.match(/^<c:numCache>/),i;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(c){var u=c.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);u&&(s[+u[1]]=r?+u[2]:u[2])});var l=$t((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(c){i=c.replace(/<.*?>/g,"")}),[s,l,i]}function zV(t,s,r,i,l,c){var u=c||{"!type":"chart"};if(!t)return c;var h=0,f=0,_="A",T={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(g){var E=jV(g);T.s.r=T.s.c=0,T.e.c=h,_=In(h),E[0].forEach(function(S,R){u[_+Jn(R)]={t:"n",v:S,z:E[1]},f=R}),T.e.r<f&&(T.e.r=f),++h}),h>0&&(u["!ref"]=vt(T)),u}function YV(t,s,r,i,l){if(!t)return t;i||(i={"!id":{}});var c={"!type":"chart","!drawel":null,"!rel":""},u,h=t.match(ik);return h&&vI(h[0],c,l,r),(u=t.match(/drawing r:id="(.*?)"/))&&(c["!rel"]=u[1]),i["!id"][c["!rel"]]&&(c["!drawel"]=i["!id"][c["!rel"]]),c}function KV(t,s){t.l+=10;var r=hn(t);return{name:r}}function JV(t,s,r,i,l){if(!t)return t;i||(i={"!id":{}});var c={"!type":"chart","!drawel":null,"!rel":""},u=!1;return Ji(t,function(f,_,T){switch(T){case 550:c["!rel"]=f;break;case 651:l.Sheets[r]||(l.Sheets[r]={}),f.name&&(l.Sheets[r].CodeName=f.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:u=!0;break;case 36:u=!1;break;case 37:break;case 38:break;default:if(!(_.T>0)){if(!(_.T<0)){if(!u||s.WTF)throw new Error("Unexpected record 0x"+T.toString(16))}}}},s),i["!id"][c["!rel"]]&&(c["!drawel"]=i["!id"][c["!rel"]]),c}var lk=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],qV=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],ZV=[],QV=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function Lx(t,s){for(var r=0;r!=t.length;++r)for(var i=t[r],l=0;l!=s.length;++l){var c=s[l];if(i[c[0]]==null)i[c[0]]=c[1];else switch(c[2]){case"bool":typeof i[c[0]]=="string"&&(i[c[0]]=Yt(i[c[0]]));break;case"int":typeof i[c[0]]=="string"&&(i[c[0]]=parseInt(i[c[0]],10));break}}}function Ax(t,s){for(var r=0;r!=s.length;++r){var i=s[r];if(t[i[0]]==null)t[i[0]]=i[1];else switch(i[2]){case"bool":typeof t[i[0]]=="string"&&(t[i[0]]=Yt(t[i[0]]));break;case"int":typeof t[i[0]]=="string"&&(t[i[0]]=parseInt(t[i[0]],10));break}}}function ak(t){Ax(t.WBProps,lk),Ax(t.CalcPr,QV),Lx(t.WBView,qV),Lx(t.Sheets,ZV),lc.date1904=Yt(t.WBProps.date1904)}var e3="][*?/\\".split("");function t3(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return e3.forEach(function(i){if(t.indexOf(i)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var r3=/<\w+:workbook/;function n3(t,s){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},i=!1,l="xmlns",c={},u=0;if(t.replace(_n,function(f,_){var T=st(f);switch(pi(T[0])){case"<?xml":break;case"<workbook":f.match(r3)&&(l="xmlns"+f.match(/<(\w+):/)[1]),r.xmlns=T[l];break;case"</workbook>":break;case"<fileVersion":delete T[0],r.AppVersion=T;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":lk.forEach(function(g){if(T[g[0]]!=null)switch(g[2]){case"bool":r.WBProps[g[0]]=Yt(T[g[0]]);break;case"int":r.WBProps[g[0]]=parseInt(T[g[0]],10);break;default:r.WBProps[g[0]]=T[g[0]]}}),T.codeName&&(r.WBProps.CodeName=Ft(T.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete T[0],r.WBView.push(T);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(T.state){case"hidden":T.Hidden=1;break;case"veryHidden":T.Hidden=2;break;default:T.Hidden=0}delete T.state,T.name=$t(Ft(T.name)),delete T[0],r.Sheets.push(T);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":i=!0;break;case"</definedNames>":i=!1;break;case"<definedName":c={},c.Name=Ft(T.name),T.comment&&(c.Comment=T.comment),T.localSheetId&&(c.Sheet=+T.localSheetId),Yt(T.hidden||"0")&&(c.Hidden=!0),u=_+f.length;break;case"</definedName>":c.Ref=$t(Ft(t.slice(u,_))),r.Names.push(c);break;case"<definedName/>":break;case"<calcPr":delete T[0],r.CalcPr=T;break;case"<calcPr/>":delete T[0],r.CalcPr=T;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":i=!0;break;case"</AlternateContent>":i=!1;break;case"<revisionPtr":break;default:if(!i&&s.WTF)throw new Error("unrecognized "+T[0]+" in workbook")}return f}),IB.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return ak(r),r}function s3(t,s){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=qm(t),r.name=hn(t),r}function i3(t,s){var r={},i=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var l=s>8?hn(t):"";return l.length>0&&(r.CodeName=l),r.autoCompressPictures=!!(i&65536),r.backupFile=!!(i&64),r.checkCompatibility=!!(i&4096),r.date1904=!!(i&1),r.filterPrivacy=!!(i&8),r.hidePivotFieldList=!!(i&1024),r.promptedSolutions=!!(i&16),r.publishItems=!!(i&2048),r.refreshAllConnections=!!(i&262144),r.saveExternalLinkValues=!!(i&128),r.showBorderUnselectedTables=!!(i&4),r.showInkAnnotation=!!(i&32),r.showObjects=["all","placeholders","none"][i>>13&3],r.showPivotChartFilter=!!(i&32768),r.updateLinks=["userSet","never","always"][i>>8&3],r}function o3(t,s){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=s-8,r}function l3(t,s,r){var i=t.l+s;t.l+=4,t.l+=1;var l=t.read_shift(4),c=BB(t),u=W4(t,0,r),h=$I(t);t.l=i;var f={Name:c,Ptg:u};return l<268435455&&(f.Sheet=l),h&&(f.Comment=h),f}function a3(t,s){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},i=[],l=!1;s||(s={}),s.biff=12;var c=[],u=[[]];return u.SheetNames=[],u.XTI=[],tT[16]={n:"BrtFRTArchID$",f:o3},Ji(t,function(f,_,T){switch(T){case 156:u.SheetNames.push(f.name),r.Sheets.push(f);break;case 153:r.WBProps=f;break;case 39:f.Sheet!=null&&(s.SID=f.Sheet),f.Ref=ln(f.Ptg,null,null,u,s),delete s.SID,delete f.Ptg,c.push(f);break;case 1036:break;case 357:case 358:case 355:case 667:u[0].length?u.push([T,f]):u[0]=[T,f],u[u.length-1].XTI=[];break;case 362:u.length===0&&(u[0]=[],u[0].XTI=[]),u[u.length-1].XTI=u[u.length-1].XTI.concat(f),u.XTI=u.XTI.concat(f);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:i.push(T),l=!0;break;case 36:i.pop(),l=!1;break;case 37:i.push(T),l=!0;break;case 38:i.pop(),l=!1;break;case 16:break;default:if(!_.T){if(!l||s.WTF&&i[i.length-1]!=37&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+T.toString(16))}}},s),ak(r),r.Names=c,r.supbooks=u,r}function c3(t,s,r){return s.slice(-4)===".bin"?a3(t,r):n3(t,r)}function u3(t,s,r,i,l,c,u,h){return s.slice(-4)===".bin"?XV(t,i,r,l,c,u,h):sV(t,i,r,l,c,u,h)}function h3(t,s,r,i,l,c,u,h){return s.slice(-4)===".bin"?JV(t,i,r,l,c):YV(t,i,r,l,c)}function d3(t,s,r,i,l,c,u,h){return s.slice(-4)===".bin"?$G():IG()}function f3(t,s,r,i,l,c,u,h){return s.slice(-4)===".bin"?EG():mG()}function _3(t,s,r,i){return s.slice(-4)===".bin"?MH(t,r,i):xH(t,r,i)}function T3(t,s,r){return Yy(t,r)}function p3(t,s,r){return s.slice(-4)===".bin"?qU(t,r):KU(t,r)}function g3(t,s,r){return s.slice(-4)===".bin"?TG(t,r):uG(t,r)}function E3(t,s,r){return s.slice(-4)===".bin"?lG(t):iG(t)}function m3(t,s,r,i){return r.slice(-4)===".bin"?aG(t,s,r,i):void 0}function $3(t,s,r){return s.slice(-4)===".bin"?nG(t,s,r):sG(t,s,r)}var ck=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,uk=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function xs(t,s){var r=t.split(/\s+/),i=[];if(i[0]=r[0],r.length===1)return i;var l=t.match(ck),c,u,h,f;if(l)for(f=0;f!=l.length;++f)c=l[f].match(uk),(u=c[1].indexOf(":"))===-1?i[c[1]]=c[2].slice(1,c[2].length-1):(c[1].slice(0,6)==="xmlns:"?h="xmlns"+c[1].slice(6):h=c[1].slice(u+1),i[h]=c[2].slice(1,c[2].length-1));return i}function I3(t){var s=t.split(/\s+/),r={};if(s.length===1)return r;var i=t.match(ck),l,c,u,h;if(i)for(h=0;h!=i.length;++h)l=i[h].match(uk),(c=l[1].indexOf(":"))===-1?r[l[1]]=l[2].slice(1,l[2].length-1):(l[1].slice(0,6)==="xmlns:"?u="xmlns"+l[1].slice(6):u=l[1].slice(c+1),r[u]=l[2].slice(1,l[2].length-1));return r}var th;function O3(t,s){var r=th[t]||$t(t);return r==="General"?Ml(s):ms(r,s)}function S3(t,s,r,i){var l=i;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":l=Yt(i);break;case"i2":case"int":l=parseInt(i,10);break;case"r4":case"float":l=parseFloat(i);break;case"date":case"dateTime.tz":l=Kr(i);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[$t(s)]=l}function R3(t,s,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||zl[t.v]:s==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Sh(t.v):t.w=Ml(t.v):t.w=O3(s||"General",t.v)}catch(c){if(r.WTF)throw c}try{var i=th[s]||s||"General";if(r.cellNF&&(t.z=i),r.cellDates&&t.t=="n"&&Lc(i)){var l=Rl(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}catch(c){if(r.WTF)throw c}}}function L3(t,s,r){if(r.cellStyles&&s.Interior){var i=s.Interior;i.Pattern&&(i.patternType=SH[i.Pattern]||i.Pattern)}t[s.ID]=s}function A3(t,s,r,i,l,c,u,h,f,_){var T="General",g=i.StyleID,E={};_=_||{};var S=[],R=0;for(g===void 0&&h&&(g=h.StyleID),g===void 0&&u&&(g=u.StyleID);c[g]!==void 0&&(c[g].nf&&(T=c[g].nf),c[g].Interior&&S.push(c[g].Interior),!!c[g].Parent);)g=c[g].Parent;switch(r.Type){case"Boolean":i.t="b",i.v=Yt(t);break;case"String":i.t="s",i.r=YC($t(t)),i.v=t.indexOf("<")>-1?$t(s||t).replace(/<.*?>/g,""):i.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),i.v=(Kr(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),i.v!==i.v?i.v=$t(t):i.v<60&&(i.v=i.v-1),(!T||T=="General")&&(T="yyyy-mm-dd");case"Number":i.v===void 0&&(i.v=+t),i.t||(i.t="n");break;case"Error":i.t="e",i.v=Ay[t],_.cellText!==!1&&(i.w=t);break;default:t==""&&s==""?i.t="z":(i.t="s",i.v=YC(s||t));break}if(R3(i,T,_),_.cellFormula!==!1)if(i.Formula){var L=$t(i.Formula);L.charCodeAt(0)==61&&(L=L.slice(1)),i.f=oc(L,l),delete i.Formula,i.ArrayRange=="RC"?i.F=oc("RC:RC",l):i.ArrayRange&&(i.F=oc(i.ArrayRange,l),f.push([Hr(i.F),i.F]))}else for(R=0;R<f.length;++R)l.r>=f[R][0].s.r&&l.r<=f[R][0].e.r&&l.c>=f[R][0].s.c&&l.c<=f[R][0].e.c&&(i.F=f[R][1]);_.cellStyles&&(S.forEach(function(x){!E.patternType&&x.patternType&&(E.patternType=x.patternType)}),i.s=E),i.StyleID!==void 0&&(i.ixfe=i.StyleID)}function v3(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function G0(t,s){var r=s||{};q1();var i=wu(pI(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(i=Ft(i));var l=i.slice(0,1024).toLowerCase(),c=!1;if(l=l.replace(/".*?"/g,""),(l.indexOf(">")&1023)>Math.min(l.indexOf(",")&1023,l.indexOf(";")&1023)){var u=Jr(r);return u.type="string",vh.to_workbook(i,u)}if(l.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ut){l.indexOf("<"+ut)>=0&&(c=!0)}),c)return k3(i,r);th={"General Number":"General","General Date":dt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":dt[15],"Short Date":dt[14],"Long Time":dt[19],"Medium Time":dt[18],"Short Time":dt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:dt[2],Standard:dt[4],Percent:dt[10],Scientific:dt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var h,f=[],_,T={},g=[],E=r.dense?[]:{},S="",R={},L={},x=xs('<Data ss:Type="String">'),v=0,A=0,m=0,y={s:{r:2e6,c:2e6},e:{r:0,c:0}},H={},G={},k="",F=0,B=[],re={},ne={},ee=0,me=[],we=[],Oe={},ke=[],ye,Re=!1,K=[],z=[],oe={},M=0,Z=0,J={Sheets:[],WBProps:{date1904:!1}},q={};Ah.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"");for(var he="";h=Ah.exec(i);)switch(h[3]=(he=h[3]).toLowerCase()){case"data":if(he=="data"){if(h[1]==="/"){if((_=f.pop())[0]!==h[3])throw new Error("Bad state: "+_.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&f.push([h[3],!0]);break}if(f[f.length-1][1])break;h[1]==="/"?A3(i.slice(v,h.index),k,x,f[f.length-1][0]=="comment"?Oe:R,{c:A,r:m},H,ke[A],L,K,r):(k="",x=xs(h[0]),v=h.index+h[0].length);break;case"cell":if(h[1]==="/")if(we.length>0&&(R.c=we),(!r.sheetRows||r.sheetRows>m)&&R.v!==void 0&&(r.dense?(E[m]||(E[m]=[]),E[m][A]=R):E[In(A)+Jn(m)]=R),R.HRef&&(R.l={Target:$t(R.HRef)},R.HRefScreenTip&&(R.l.Tooltip=R.HRefScreenTip),delete R.HRef,delete R.HRefScreenTip),(R.MergeAcross||R.MergeDown)&&(M=A+(parseInt(R.MergeAcross,10)|0),Z=m+(parseInt(R.MergeDown,10)|0),B.push({s:{c:A,r:m},e:{c:M,r:Z}})),!r.sheetStubs)R.MergeAcross?A=M+1:++A;else if(R.MergeAcross||R.MergeDown){for(var xe=A;xe<=M;++xe)for(var Pe=m;Pe<=Z;++Pe)(xe>A||Pe>m)&&(r.dense?(E[Pe]||(E[Pe]=[]),E[Pe][xe]={t:"z"}):E[In(xe)+Jn(Pe)]={t:"z"});A=M+1}else++A;else R=I3(h[0]),R.Index&&(A=+R.Index-1),A<y.s.c&&(y.s.c=A),A>y.e.c&&(y.e.c=A),h[0].slice(-2)==="/>"&&++A,we=[];break;case"row":h[1]==="/"||h[0].slice(-2)==="/>"?(m<y.s.r&&(y.s.r=m),m>y.e.r&&(y.e.r=m),h[0].slice(-2)==="/>"&&(L=xs(h[0]),L.Index&&(m=+L.Index-1)),A=0,++m):(L=xs(h[0]),L.Index&&(m=+L.Index-1),oe={},(L.AutoFitHeight=="0"||L.Height)&&(oe.hpx=parseInt(L.Height,10),oe.hpt=zy(oe.hpx),z[m]=oe),L.Hidden=="1"&&(oe.hidden=!0,z[m]=oe));break;case"worksheet":if(h[1]==="/"){if((_=f.pop())[0]!==h[3])throw new Error("Bad state: "+_.join("|"));g.push(S),y.s.r<=y.e.r&&y.s.c<=y.e.c&&(E["!ref"]=vt(y),r.sheetRows&&r.sheetRows<=y.e.r&&(E["!fullref"]=E["!ref"],y.e.r=r.sheetRows-1,E["!ref"]=vt(y))),B.length&&(E["!merges"]=B),ke.length>0&&(E["!cols"]=ke),z.length>0&&(E["!rows"]=z),T[S]=E}else y={s:{r:2e6,c:2e6},e:{r:0,c:0}},m=A=0,f.push([h[3],!1]),_=xs(h[0]),S=$t(_.Name),E=r.dense?[]:{},B=[],K=[],z=[],q={name:S,Hidden:0},J.Sheets.push(q);break;case"table":if(h[1]==="/"){if((_=f.pop())[0]!==h[3])throw new Error("Bad state: "+_.join("|"))}else{if(h[0].slice(-2)=="/>")break;f.push([h[3],!1]),ke=[],Re=!1}break;case"style":h[1]==="/"?L3(H,G,r):G=xs(h[0]);break;case"numberformat":G.nf=$t(xs(h[0]).Format||"General"),th[G.nf]&&(G.nf=th[G.nf]);for(var be=0;be!=392&&dt[be]!=G.nf;++be);if(be==392){for(be=57;be!=392;++be)if(dt[be]==null){Cl(G.nf,be);break}}break;case"column":if(f[f.length-1][0]!=="table")break;if(ye=xs(h[0]),ye.Hidden&&(ye.hidden=!0,delete ye.Hidden),ye.Width&&(ye.wpx=parseInt(ye.Width,10)),!Re&&ye.wpx>10){Re=!0,$n=Xy;for(var ce=0;ce<ke.length;++ce)ke[ce]&&Ic(ke[ce])}Re&&Ic(ye),ke[ye.Index-1||ke.length]=ye;for(var et=0;et<+ye.Span;++et)ke[ke.length]=Jr(ye);break;case"namedrange":if(h[1]==="/")break;J.Names||(J.Names=[]);var N=st(h[0]),fe={Name:N.Name,Ref:oc(N.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(fe.Sheet=J.Sheets.length-1),J.Names.push(fe);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(h[0].slice(-2)==="/>")break;h[1]==="/"?k+=i.slice(F,h.index):F=h.index+h[0].length;break;case"interior":if(!r.cellStyles)break;G.Interior=xs(h[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(h[0].slice(-2)==="/>")break;h[1]==="/"?u2(re,he,i.slice(ee,h.index)):ee=h.index+h[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(h[1]==="/"){if((_=f.pop())[0]!==h[3])throw new Error("Bad state: "+_.join("|"))}else f.push([h[3],!1]);break;case"comment":if(h[1]==="/"){if((_=f.pop())[0]!==h[3])throw new Error("Bad state: "+_.join("|"));v3(Oe),we.push(Oe)}else f.push([h[3],!1]),_=xs(h[0]),Oe={a:_.Author};break;case"autofilter":if(h[1]==="/"){if((_=f.pop())[0]!==h[3])throw new Error("Bad state: "+_.join("|"))}else if(h[0].charAt(h[0].length-2)!=="/"){var He=xs(h[0]);E["!autofilter"]={ref:oc(He.Range).replace(/\$/g,"")},f.push([h[3],!0])}break;case"name":break;case"datavalidation":if(h[1]==="/"){if((_=f.pop())[0]!==h[3])throw new Error("Bad state: "+_.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&f.push([h[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(h[1]==="/"){if((_=f.pop())[0]!==h[3])throw new Error("Bad state: "+_.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&f.push([h[3],!0]);break;case"null":break;default:if(f.length==0&&h[3]=="document"||f.length==0&&h[3]=="uof")return bx(i,r);var Me=!0;switch(f[f.length-1][0]){case"officedocumentsettings":switch(h[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:Me=!1}break;case"componentoptions":switch(h[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:Me=!1}break;case"excelworkbook":switch(h[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:Me=!1}break;case"workbookoptions":switch(h[3]){case"owcversion":break;case"height":break;case"width":break;default:Me=!1}break;case"worksheetoptions":switch(h[3]){case"visible":if(h[0].slice(-2)!=="/>")if(h[1]==="/")switch(i.slice(ee,h.index)){case"SheetHidden":q.Hidden=1;break;case"SheetVeryHidden":q.Hidden=2;break}else ee=h.index+h[0].length;break;case"header":E["!margins"]||eh(E["!margins"]={},"xlml"),isNaN(+st(h[0]).Margin)||(E["!margins"].header=+st(h[0]).Margin);break;case"footer":E["!margins"]||eh(E["!margins"]={},"xlml"),isNaN(+st(h[0]).Margin)||(E["!margins"].footer=+st(h[0]).Margin);break;case"pagemargins":var Ze=st(h[0]);E["!margins"]||eh(E["!margins"]={},"xlml"),isNaN(+Ze.Top)||(E["!margins"].top=+Ze.Top),isNaN(+Ze.Left)||(E["!margins"].left=+Ze.Left),isNaN(+Ze.Right)||(E["!margins"].right=+Ze.Right),isNaN(+Ze.Bottom)||(E["!margins"].bottom=+Ze.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":E["!outline"]||(E["!outline"]={}),E["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":E["!outline"]||(E["!outline"]={}),E["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:Me=!1}break;case"pivottable":case"pivotcache":switch(h[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:Me=!1}break;case"pagebreaks":switch(h[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:Me=!1}break;case"autofilter":switch(h[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:Me=!1}break;case"querytable":switch(h[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:Me=!1}break;case"datavalidation":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:Me=!1}break;case"sorting":case"conditionalformatting":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:Me=!1}break;case"mapinfo":case"schema":case"data":switch(h[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:Me=!1}break;case"smarttags":break;default:Me=!1;break}if(Me||h[3].match(/!\[CDATA/))break;if(!f[f.length-1][1])throw"Unrecognized tag: "+h[3]+"|"+f.join("|");if(f[f.length-1][0]==="customdocumentproperties"){if(h[0].slice(-2)==="/>")break;h[1]==="/"?S3(ne,he,me,i.slice(ee,h.index)):(me=h,ee=h.index+h[0].length);break}if(r.WTF)throw"Unrecognized tag: "+h[3]+"|"+f.join("|")}var Ce={};return!r.bookSheets&&!r.bookProps&&(Ce.Sheets=T),Ce.SheetNames=g,Ce.Workbook=J,Ce.SSF=Jr(dt),Ce.Props=re,Ce.Custprops=ne,Ce}function t$(t,s){switch(NI(s=s||{}),s.type||"base64"){case"base64":return G0(Zn(t),s);case"binary":case"buffer":case"file":return G0(t,s);case"array":return G0(Vl(t),s)}}function C3(t){var s={},r=t.content;if(r.l=28,s.AnsiUserType=r.read_shift(0,"lpstr-ansi"),s.AnsiClipboardFormat=GB(r),r.length-r.l<=4)return s;var i=r.read_shift(4);if(i==0||i>40||(r.l-=4,s.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(i=r.read_shift(4),i!==1907505652)||(s.UnicodeClipboardFormat=VB(r),i=r.read_shift(4),i==0||i>40))return s;r.l-=4,s.Reserved2=r.read_shift(0,"lpwstr")}var x3=[60,1084,2066,2165,2175];function N3(t,s,r,i,l){var c=i,u=[],h=r.slice(r.l,r.l+c);if(l&&l.enc&&l.enc.insitu&&h.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:l.enc.insitu(h)}u.push(h),r.l+=c;for(var f=Bi(r,r.l),_=r$[f],T=0;_!=null&&x3.indexOf(f)>-1;)c=Bi(r,r.l+2),T=r.l+4,f==2066?T+=4:(f==2165||f==2175)&&(T+=12),h=r.slice(T,r.l+4+c),u.push(h),r.l+=4+c,_=r$[f=Bi(r,r.l)];var g=So(u);jr(g,0);var E=0;g.lens=[];for(var S=0;S<u.length;++S)g.lens.push(E),E+=u[S].length;if(g.length<i)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+g.length+" < "+i;return s.f(g,g.length,l)}function ci(t,s,r){if(t.t!=="z"&&t.XF){var i=0;try{i=t.z||t.XF.numFmtId||0,s.cellNF&&(t.z=dt[i])}catch(c){if(s.WTF)throw c}if(!s||s.cellText!==!1)try{t.t==="e"?t.w=t.w||zl[t.v]:i===0||i=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=Sh(t.v):t.w=Ml(t.v):t.w=ms(i,t.v,{date1904:!!r,dateNF:s&&s.dateNF})}catch(c){if(s.WTF)throw c}if(s.cellDates&&i&&t.t=="n"&&Lc(dt[i]||String(i))){var l=Rl(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}}function s_(t,s,r){return{v:t,ixfe:s,t:r}}function b3(t,s){var r={opts:{}},i={},l=s.dense?[]:{},c={},u={},h=null,f=[],_="",T={},g,E="",S,R,L,x,v={},A=[],m,y,H=[],G=[],k={Sheets:[],WBProps:{date1904:!1},Views:[{}]},F={},B=function(Qe){return Qe<8?xl[Qe]:Qe<64&&G[Qe-8]||xl[Qe]},re=function(Qe,ot,Mt){var I=ot.XF.data;if(!(!I||!I.patternType||!Mt||!Mt.cellStyles)){ot.s={},ot.s.patternType=I.patternType;var D;(D=Ch(B(I.icvFore)))&&(ot.s.fgColor={rgb:D}),(D=Ch(B(I.icvBack)))&&(ot.s.bgColor={rgb:D})}},ne=function(Qe,ot,Mt){if(!(oe>1)&&!(Mt.sheetRows&&Qe.r>=Mt.sheetRows)){if(Mt.cellStyles&&ot.XF&&ot.XF.data&&re(Qe,ot,Mt),delete ot.ixfe,delete ot.XF,g=Qe,E=ft(Qe),(!u||!u.s||!u.e)&&(u={s:{r:0,c:0},e:{r:0,c:0}}),Qe.r<u.s.r&&(u.s.r=Qe.r),Qe.c<u.s.c&&(u.s.c=Qe.c),Qe.r+1>u.e.r&&(u.e.r=Qe.r+1),Qe.c+1>u.e.c&&(u.e.c=Qe.c+1),Mt.cellFormula&&ot.f){for(var I=0;I<A.length;++I)if(!(A[I][0].s.c>Qe.c||A[I][0].s.r>Qe.r)&&!(A[I][0].e.c<Qe.c||A[I][0].e.r<Qe.r)){ot.F=vt(A[I][0]),(A[I][0].s.c!=Qe.c||A[I][0].s.r!=Qe.r)&&delete ot.f,ot.f&&(ot.f=""+ln(A[I][1],u,Qe,K,ee));break}}Mt.dense?(l[Qe.r]||(l[Qe.r]=[]),l[Qe.r][Qe.c]=ot):l[E]=ot}},ee={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:A,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!s&&!!s.cellStyles,WTF:!!s&&!!s.wtf};s.password&&(ee.password=s.password);var me,we=[],Oe=[],ke=[],ye=[],Re=!1,K=[];K.SheetNames=ee.snames,K.sharedf=ee.sharedf,K.arrayf=ee.arrayf,K.names=[],K.XTI=[];var z=0,oe=0,M=0,Z=[],J=[],q;ee.codepage=1200,Ds(1200);for(var he=!1;t.l<t.length-1;){var xe=t.l,Pe=t.read_shift(2);if(Pe===0&&z===10)break;var be=t.l===t.length?0:t.read_shift(2),ce=r$[Pe];if(ce&&ce.f){if(s.bookSheets&&z===133&&Pe!==133)break;if(z=Pe,ce.r===2||ce.r==12){var et=t.read_shift(2);if(be-=2,!ee.enc&&et!==Pe&&((et&255)<<8|et>>8)!==Pe)throw new Error("rt mismatch: "+et+"!="+Pe);ce.r==12&&(t.l+=10,be-=10)}var N={};if(Pe===10?N=ce.f(t,be,ee):N=N3(Pe,ce,t,be,ee),oe==0&&[9,521,1033,2057].indexOf(z)===-1)continue;switch(Pe){case 34:r.opts.Date1904=k.WBProps.date1904=N;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(ee.enc||(t.l=0),ee.enc=N,!s.password)throw new Error("File is password-protected");if(N.valid==null)throw new Error("Encryption scheme unsupported");if(!N.valid)throw new Error("Password is incorrect");break;case 92:ee.lastuser=N;break;case 66:var fe=Number(N);switch(fe){case 21010:fe=1200;break;case 32768:fe=1e4;break;case 32769:fe=1252;break}Ds(ee.codepage=fe),he=!0;break;case 317:ee.rrtabid=N;break;case 25:ee.winlocked=N;break;case 439:r.opts.RefreshAll=N;break;case 12:r.opts.CalcCount=N;break;case 16:r.opts.CalcDelta=N;break;case 17:r.opts.CalcIter=N;break;case 13:r.opts.CalcMode=N;break;case 14:r.opts.CalcPrecision=N;break;case 95:r.opts.CalcSaveRecalc=N;break;case 15:ee.CalcRefMode=N;break;case 2211:r.opts.FullCalc=N;break;case 129:N.fDialog&&(l["!type"]="dialog"),N.fBelow||((l["!outline"]||(l["!outline"]={})).above=!0),N.fRight||((l["!outline"]||(l["!outline"]={})).left=!0);break;case 224:H.push(N);break;case 430:K.push([N]),K[K.length-1].XTI=[];break;case 35:case 547:K[K.length-1].push(N);break;case 24:case 536:q={Name:N.Name,Ref:ln(N.rgce,u,null,K,ee)},N.itab>0&&(q.Sheet=N.itab-1),K.names.push(q),K[0]||(K[0]=[],K[0].XTI=[]),K[K.length-1].push(N),N.Name=="_xlnm._FilterDatabase"&&N.itab>0&&N.rgce&&N.rgce[0]&&N.rgce[0][0]&&N.rgce[0][0][0]=="PtgArea3d"&&(J[N.itab-1]={ref:vt(N.rgce[0][0][1][2])});break;case 22:ee.ExternCount=N;break;case 23:K.length==0&&(K[0]=[],K[0].XTI=[]),K[K.length-1].XTI=K[K.length-1].XTI.concat(N),K.XTI=K.XTI.concat(N);break;case 2196:if(ee.biff<8)break;q!=null&&(q.Comment=N[1]);break;case 18:l["!protect"]=N;break;case 19:N!==0&&ee.WTF&&console.error("Password verifier: "+N);break;case 133:c[N.pos]=N,ee.snames.push(N.name);break;case 10:{if(--oe)break;if(u.e){if(u.e.r>0&&u.e.c>0){if(u.e.r--,u.e.c--,l["!ref"]=vt(u),s.sheetRows&&s.sheetRows<=u.e.r){var He=u.e.r;u.e.r=s.sheetRows-1,l["!fullref"]=l["!ref"],l["!ref"]=vt(u),u.e.r=He}u.e.r++,u.e.c++}we.length>0&&(l["!merges"]=we),Oe.length>0&&(l["!objects"]=Oe),ke.length>0&&(l["!cols"]=ke),ye.length>0&&(l["!rows"]=ye),k.Sheets.push(F)}_===""?T=l:i[_]=l,l=s.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(ee.biff===8&&(ee.biff={9:2,521:3,1033:4}[Pe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[N.BIFFVer]||8),ee.biffguess=N.BIFFVer==0,N.BIFFVer==0&&N.dt==4096&&(ee.biff=5,he=!0,Ds(ee.codepage=28591)),ee.biff==8&&N.BIFFVer==0&&N.dt==16&&(ee.biff=2),oe++)break;if(l=s.dense?[]:{},ee.biff<8&&!he&&(he=!0,Ds(ee.codepage=s.codepage||1252)),ee.biff<5||N.BIFFVer==0&&N.dt==4096){_===""&&(_="Sheet1"),u={s:{r:0,c:0},e:{r:0,c:0}};var Me={pos:t.l-be,name:_};c[Me.pos]=Me,ee.snames.push(_)}else _=(c[xe]||{name:""}).name;N.dt==32&&(l["!type"]="chart"),N.dt==64&&(l["!type"]="macro"),we=[],Oe=[],ee.arrayf=A=[],ke=[],ye=[],Re=!1,F={Hidden:(c[xe]||{hs:0}).hs,name:_}}break;case 515:case 3:case 2:l["!type"]=="chart"&&(s.dense?(l[N.r]||[])[N.c]:l[ft({c:N.c,r:N.r})])&&++N.c,m={ixfe:N.ixfe,XF:H[N.ixfe]||{},v:N.val,t:"n"},M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne({c:N.c,r:N.r},m,s);break;case 5:case 517:m={ixfe:N.ixfe,XF:H[N.ixfe],v:N.val,t:N.t},M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne({c:N.c,r:N.r},m,s);break;case 638:m={ixfe:N.ixfe,XF:H[N.ixfe],v:N.rknum,t:"n"},M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne({c:N.c,r:N.r},m,s);break;case 189:for(var Ze=N.c;Ze<=N.C;++Ze){var Ce=N.rkrec[Ze-N.c][0];m={ixfe:Ce,XF:H[Ce],v:N.rkrec[Ze-N.c][1],t:"n"},M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne({c:Ze,r:N.r},m,s)}break;case 6:case 518:case 1030:{if(N.val=="String"){h=N;break}if(m=s_(N.val,N.cell.ixfe,N.tt),m.XF=H[m.ixfe],s.cellFormula){var ut=N.formula;if(ut&&ut[0]&&ut[0][0]&&ut[0][0][0]=="PtgExp"){var Bt=ut[0][0][1][0],tr=ut[0][0][1][1],hr=ft({r:Bt,c:tr});v[hr]?m.f=""+ln(N.formula,u,N.cell,K,ee):m.F=((s.dense?(l[Bt]||[])[tr]:l[hr])||{}).F}else m.f=""+ln(N.formula,u,N.cell,K,ee)}M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne(N.cell,m,s),h=N}break;case 7:case 519:if(h)h.val=N,m=s_(N,h.cell.ixfe,"s"),m.XF=H[m.ixfe],s.cellFormula&&(m.f=""+ln(h.formula,u,h.cell,K,ee)),M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne(h.cell,m,s),h=null;else throw new Error("String record expects Formula");break;case 33:case 545:{A.push(N);var wt=ft(N[0].s);if(S=s.dense?(l[N[0].s.r]||[])[N[0].s.c]:l[wt],s.cellFormula&&S){if(!h||!wt||!S)break;S.f=""+ln(N[1],u,N[0],K,ee),S.F=vt(N[0])}}break;case 1212:{if(!s.cellFormula)break;if(E){if(!h)break;v[ft(h.cell)]=N[0],S=s.dense?(l[h.cell.r]||[])[h.cell.c]:l[ft(h.cell)],(S||{}).f=""+ln(N[0],u,g,K,ee)}}break;case 253:m=s_(f[N.isst].t,N.ixfe,"s"),f[N.isst].h&&(m.h=f[N.isst].h),m.XF=H[m.ixfe],M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne({c:N.c,r:N.r},m,s);break;case 513:s.sheetStubs&&(m={ixfe:N.ixfe,XF:H[N.ixfe],t:"z"},M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne({c:N.c,r:N.r},m,s));break;case 190:if(s.sheetStubs)for(var Zr=N.c;Zr<=N.C;++Zr){var Wt=N.ixfe[Zr-N.c];m={ixfe:Wt,XF:H[Wt],t:"z"},M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne({c:Zr,r:N.r},m,s)}break;case 214:case 516:case 4:m=s_(N.val,N.ixfe,"s"),m.XF=H[m.ixfe],M>0&&(m.z=Z[m.ixfe>>8&63]),ci(m,s,r.opts.Date1904),ne({c:N.c,r:N.r},m,s);break;case 0:case 512:oe===1&&(u=N);break;case 252:f=N;break;case 1054:if(ee.biff==4){Z[M++]=N[1];for(var te=0;te<M+163&&dt[te]!=N[1];++te);te>=163&&Cl(N[1],M+163)}else Cl(N[1],N[0]);break;case 30:{Z[M++]=N;for(var dr=0;dr<M+163&&dt[dr]!=N;++dr);dr>=163&&Cl(N,M+163)}break;case 229:we=we.concat(N);break;case 93:Oe[N.cmo[0]]=ee.lastobj=N;break;case 438:ee.lastobj.TxO=N;break;case 127:ee.lastobj.ImData=N;break;case 440:for(x=N[0].s.r;x<=N[0].e.r;++x)for(L=N[0].s.c;L<=N[0].e.c;++L)S=s.dense?(l[x]||[])[L]:l[ft({c:L,r:x})],S&&(S.l=N[1]);break;case 2048:for(x=N[0].s.r;x<=N[0].e.r;++x)for(L=N[0].s.c;L<=N[0].e.c;++L)S=s.dense?(l[x]||[])[L]:l[ft({c:L,r:x})],S&&S.l&&(S.l.Tooltip=N[1]);break;case 28:{if(ee.biff<=5&&ee.biff>=2)break;S=s.dense?(l[N[0].r]||[])[N[0].c]:l[ft(N[0])];var Tn=Oe[N[2]];S||(s.dense?(l[N[0].r]||(l[N[0].r]=[]),S=l[N[0].r][N[0].c]={t:"z"}):S=l[ft(N[0])]={t:"z"},u.e.r=Math.max(u.e.r,N[0].r),u.s.r=Math.min(u.s.r,N[0].r),u.e.c=Math.max(u.e.c,N[0].c),u.s.c=Math.min(u.s.c,N[0].c)),S.c||(S.c=[]),R={a:N[1],t:Tn.TxO.t},S.c.push(R)}break;case 2173:QH(H[N.ixfe],N.ext);break;case 125:{if(!ee.cellStyles)break;for(;N.e>=N.s;)ke[N.e--]={width:N.w/256,level:N.level||0,hidden:!!(N.flags&1)},Re||(Re=!0,LI(N.w/256)),Ic(ke[N.e+1])}break;case 520:{var ct={};N.level!=null&&(ye[N.r]=ct,ct.level=N.level),N.hidden&&(ye[N.r]=ct,ct.hidden=!0),N.hpt&&(ye[N.r]=ct,ct.hpt=N.hpt,ct.hpx=xh(N.hpt))}break;case 38:case 39:case 40:case 41:l["!margins"]||eh(l["!margins"]={}),l["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Pe]]=N;break;case 161:l["!margins"]||eh(l["!margins"]={}),l["!margins"].header=N.header,l["!margins"].footer=N.footer;break;case 574:N.RTL&&(k.Views[0].RTL=!0);break;case 146:G=N;break;case 2198:me=N;break;case 140:y=N;break;case 442:_?F.CodeName=N||F.name:k.WBProps.CodeName=N||"ThisWorkbook";break}}else ce||console.error("Missing Info for XLS Record 0x"+Pe.toString(16)),t.l+=be}return r.SheetNames=Ho(c).sort(function(Ot,Qe){return Number(Ot)-Number(Qe)}).map(function(Ot){return c[Ot].name}),s.bookSheets||(r.Sheets=i),!r.SheetNames.length&&T["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=T)):r.Preamble=T,r.Sheets&&J.forEach(function(Ot,Qe){r.Sheets[r.SheetNames[Qe]]["!autofilter"]=Ot}),r.Strings=f,r.SSF=Jr(dt),ee.enc&&(r.Encryption=ee.enc),me&&(r.Themes=me),r.Metadata={},y!==void 0&&(r.Metadata.Country=y),K.names.length>0&&(k.Names=K.names),r.Workbook=k,r}var vx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function y3(t,s,r){var i=gt.find(t,"/!DocumentSummaryInformation");if(i&&i.size>0)try{var l=ux(i,KB,vx.DSI);for(var c in l)s[c]=l[c]}catch(_){if(r.WTF)throw _}var u=gt.find(t,"/!SummaryInformation");if(u&&u.size>0)try{var h=ux(u,JB,vx.SI);for(var f in h)s[f]==null&&(s[f]=h[f])}catch(_){if(r.WTF)throw _}s.HeadingPairs&&s.TitlesOfParts&&(Cy(s.HeadingPairs,s.TitlesOfParts,s,r),delete s.HeadingPairs,delete s.TitlesOfParts)}function hk(t,s){s||(s={}),NI(s),B1(),s.codepage&&uI(s.codepage);var r,i;if(t.FullPaths){if(gt.find(t,"/encryption"))throw new Error("File is password-protected");r=gt.find(t,"!CompObj"),i=gt.find(t,"/Workbook")||gt.find(t,"/Book")}else{switch(s.type){case"base64":t=ws(Zn(t));break;case"binary":t=ws(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}jr(t,0),i={content:t}}var l,c;if(r&&C3(r),s.bookProps&&!s.bookSheets)l={};else{var u=pt?"buffer":"array";if(i&&i.content)l=b3(i.content,s);else if((c=gt.find(t,"PerfectOffice_MAIN"))&&c.content)l=Zu.to_workbook(c.content,(s.type=u,s));else if((c=gt.find(t,"NativeContent_MAIN"))&&c.content)l=Zu.to_workbook(c.content,(s.type=u,s));else throw(c=gt.find(t,"MN0"))&&c.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s.bookVBA&&t.FullPaths&&gt.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(l.vbaraw=gG(t))}var h={};return t.FullPaths&&y3(t,h,s),l.Props=l.Custprops=h,s.bookFiles&&(l.cfb=t),l}var tT={0:{f:fV},1:{f:gV},2:{f:AV},3:{f:IV},4:{f:mV},5:{f:LV},6:{f:xV},7:{f:SV},8:{f:wV},9:{f:kV},10:{f:bV},11:{f:yV},12:{f:EV},13:{f:vV},14:{f:OV},15:{f:$V},16:{f:ok},17:{f:NV},18:{f:RV},19:{f:mI},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:l3},40:{},42:{},43:{f:bH},44:{f:NH},45:{f:yH},46:{f:wH},47:{f:kH},48:{},49:{f:MB},50:{},51:{f:tG},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Uy},62:{f:CV},63:{f:oG},64:{f:VV},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:fn,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:GV},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:pV},148:{f:_V,p:16},151:{f:PV},152:{},153:{f:i3},154:{},155:{},156:{f:s3},157:{},158:{},159:{T:1,f:JU},160:{T:-1},161:{T:1,f:jl},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:MV},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:eG},336:{T:-1},337:{f:rG,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:qm},357:{},358:{},359:{},360:{T:1},361:{},362:{f:By},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:FV},427:{f:BV},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:HV},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:TV},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:DV},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:qm},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:_G},633:{T:1},634:{T:-1},635:{T:1,f:fG},636:{T:-1},637:{f:PB},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:KV},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:WV},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},r$={6:{f:U0},10:{f:po},12:{f:Ir},13:{f:Ir},14:{f:_r},15:{f:_r},16:{f:cn},17:{f:_r},18:{f:_r},19:{f:Ir},20:{f:_x},21:{f:_x},23:{f:By},24:{f:px},25:{f:_r},26:{},27:{},28:{f:hU},29:{},34:{f:_r},35:{f:Tx},38:{f:cn},39:{f:cn},40:{f:cn},41:{f:cn},42:{f:_r},43:{f:_r},47:{f:TH},49:{f:j2},51:{f:Ir},60:{},61:{f:V2},64:{f:_r},65:{f:X2},66:{f:Ir},77:{},80:{},81:{},82:{},85:{f:Ir},89:{},90:{},91:{},92:{f:M2},93:{f:fU},94:{},95:{f:_r},96:{},97:{},99:{f:_r},125:{f:Uy},128:{f:rU},129:{f:D2},130:{f:Ir},131:{f:_r},132:{f:_r},133:{f:P2},134:{},140:{f:mU},141:{f:Ir},144:{},146:{f:IU},151:{},152:{},153:{},154:{},155:{},156:{f:Ir},157:{},158:{},160:{f:AU},161:{f:SU},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:Z2},190:{f:Q2},193:{f:po},197:{},198:{},199:{},200:{},201:{},202:{f:_r},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ir},220:{},221:{f:_r},222:{},224:{f:tU},225:{f:w2},226:{f:po},227:{},229:{f:dU},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:F2},253:{f:z2},255:{f:B2},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:ky},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:_r},353:{f:po},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:sU},431:{f:_r},432:{},433:{},434:{},437:{},438:{f:pU},439:{f:_r},440:{f:gU},441:{},442:{f:Gh},443:{},444:{f:Ir},445:{},446:{},448:{f:po},449:{f:G2,r:2},450:{f:po},512:{f:dx},513:{f:LU},515:{f:nU},516:{f:Y2},517:{f:fx},519:{f:vU},520:{f:U2},523:{},545:{f:gx},549:{f:hx},566:{},574:{f:W2},638:{f:q2},659:{},1048:{},1054:{f:K2},1084:{},1212:{f:aU},2048:{f:EU},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:t_},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:po},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:OU,r:12},2173:{f:ZH,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:_r,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:lU,r:12},2197:{},2198:{f:jH,r:12},2199:{},2200:{},2201:{},2202:{f:cU,r:12},2203:{f:po},2204:{},2205:{},2206:{},2207:{},2211:{f:H2},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ir},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:RU},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:$U},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:dx},1:{},2:{f:bU},3:{f:NU},4:{f:xU},5:{f:fx},7:{f:yU},8:{},9:{f:t_},11:{},22:{f:Ir},30:{f:J2},31:{},32:{},33:{f:gx},36:{},37:{f:hx},50:{f:kU},62:{},52:{},67:{},68:{f:Ir},69:{},86:{},126:{},127:{f:CU},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:wU},223:{},234:{},354:{},421:{},518:{f:U0},521:{f:t_},536:{f:px},547:{f:Tx},561:{},579:{},1030:{f:U0},1033:{f:t_},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function Ns(t,s,r,i){var l=s;if(!isNaN(l)){var c=(r||[]).length||0,u=t.next(4);u.write_shift(2,l),u.write_shift(2,c),c>0&&my(r)&&t.push(r)}}function Cx(t,s){var r=s||{},i=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var l=t.match(/<table/i);if(!l)throw new Error("Invalid HTML: could not find <table>");var c=t.match(/<\/table/i),u=l.index,h=c&&c.index||t.length,f=iB(t.slice(u,h),/(:?<tr[^>]*>)/i,"<tr>"),_=-1,T=0,g=0,E=0,S={s:{r:1e7,c:1e7},e:{r:0,c:0}},R=[];for(u=0;u<f.length;++u){var L=f[u].trim(),x=L.slice(0,3).toLowerCase();if(x=="<tr"){if(++_,r.sheetRows&&r.sheetRows<=_){--_;break}T=0;continue}if(!(x!="<td"&&x!="<th")){var v=L.split(/<\/t[dh]>/i);for(h=0;h<v.length;++h){var A=v[h].trim();if(A.match(/<t[dh]/i)){for(var m=A,y=0;m.charAt(0)=="<"&&(y=m.indexOf(">"))>-1;)m=m.slice(y+1);for(var H=0;H<R.length;++H){var G=R[H];G.s.c==T&&G.s.r<_&&_<=G.e.r&&(T=G.e.c+1,H=-1)}var k=st(A.slice(0,A.indexOf(">")));E=k.colspan?+k.colspan:1,((g=+k.rowspan)>1||E>1)&&R.push({s:{r:_,c:T},e:{r:_+(g||1)-1,c:T+E-1}});var F=k.t||k["data-t"]||"";if(!m.length){T+=E;continue}if(m=pB(m),S.s.r>_&&(S.s.r=_),S.e.r<_&&(S.e.r=_),S.s.c>T&&(S.s.c=T),S.e.c<T&&(S.e.c=T),!m.length){T+=E;continue}var B={t:"s",v:m};r.raw||!m.trim().length||F=="s"||(m==="TRUE"?B={t:"b",v:!0}:m==="FALSE"?B={t:"b",v:!1}:isNaN(Gi(m))?isNaN(Rh(m).getDate())||(B={t:"d",v:Kr(m)},r.cellDates||(B={t:"n",v:Qn(B.v)}),B.z=r.dateNF||dt[14]):B={t:"n",v:Gi(m)}),r.dense?(i[_]||(i[_]=[]),i[_][T]=B):i[ft({r:_,c:T})]=B,T+=E}}}}return i["!ref"]=vt(S),R.length&&(i["!merges"]=R),i}function k3(t,s){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return Wl(Cx(r[0],s),s);var i=_k();return r.forEach(function(l,c){Tk(i,Cx(l,s),"Sheet"+(c+1))}),i}function w3(t){var s=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(i,l){return Array(parseInt(l,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=$t(s.replace(/<[^>]*>/g,""));return[r]}var xx={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function dk(t,s){var r=s||{},i=pI(t),l=[],c,u,h={name:""},f="",_=0,T,g,E={},S=[],R=r.dense?[]:{},L,x,v={value:""},A="",m=0,y=[],H=-1,G=-1,k={s:{r:1e6,c:1e7},e:{r:0,c:0}},F=0,B={},re=[],ne={},ee=0,me=0,we=[],Oe=1,ke=1,ye=[],Re={Names:[]},K={},z=["",""],oe=[],M={},Z="",J=0,q=!1,he=!1,xe=0;for(Ah.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");L=Ah.exec(i);)switch(L[3]=L[3].replace(/_.*$/,"")){case"table":case"":L[1]==="/"?(k.e.c>=k.s.c&&k.e.r>=k.s.r?R["!ref"]=vt(k):R["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=k.e.r&&(R["!fullref"]=R["!ref"],k.e.r=r.sheetRows-1,R["!ref"]=vt(k)),re.length&&(R["!merges"]=re),we.length&&(R["!rows"]=we),T.name=T.||T.name,typeof JSON<"u"&&JSON.stringify(T),S.push(T.name),E[T.name]=R,he=!1):L[0].charAt(L[0].length-2)!=="/"&&(T=st(L[0],!1),H=G=-1,k.s.r=k.s.c=1e7,k.e.r=k.e.c=0,R=r.dense?[]:{},re=[],we=[],he=!0);break;case"table-row-group":L[1]==="/"?--F:++F;break;case"table-row":case"":if(L[1]==="/"){H+=Oe,Oe=1;break}if(g=st(L[0],!1),g.?H=g.-1:H==-1&&(H=0),Oe=+g["number-rows-repeated"]||1,Oe<10)for(xe=0;xe<Oe;++xe)F>0&&(we[H+xe]={level:F});G=-1;break;case"covered-table-cell":L[1]!=="/"&&++G,r.sheetStubs&&(r.dense?(R[H]||(R[H]=[]),R[H][G]={t:"z"}):R[ft({r:H,c:G})]={t:"z"}),A="",y=[];break;case"table-cell":case"":if(L[0].charAt(L[0].length-2)==="/")++G,v=st(L[0],!1),ke=parseInt(v["number-columns-repeated"]||"1",10),x={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(x.f=Rx($t(v.formula))),(v.||v["value-type"])=="string"&&(x.t="s",x.v=$t(v["string-value"]||""),r.dense?(R[H]||(R[H]=[]),R[H][G]=x):R[ft({r:H,c:G})]=x),G+=ke-1;else if(L[1]!=="/"){++G,A="",m=0,y=[],ke=1;var Pe=Oe?H+Oe-1:H;if(G>k.e.c&&(k.e.c=G),G<k.s.c&&(k.s.c=G),H<k.s.r&&(k.s.r=H),Pe>k.e.r&&(k.e.r=Pe),v=st(L[0],!1),oe=[],M={},x={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=$t(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(ee=parseInt(v["number-matrix-rows-spanned"],10)||0,me=parseInt(v["number-matrix-columns-spanned"],10)||0,ne={s:{r:H,c:G},e:{r:H+ee-1,c:G+me-1}},x.F=vt(ne),ye.push([ne,x.F])),v.formula)x.f=Rx(v.formula);else for(xe=0;xe<ye.length;++xe)H>=ye[xe][0].s.r&&H<=ye[xe][0].e.r&&G>=ye[xe][0].s.c&&G<=ye[xe][0].e.c&&(x.F=ye[xe][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(ee=parseInt(v["number-rows-spanned"],10)||0,me=parseInt(v["number-columns-spanned"],10)||0,ne={s:{r:H,c:G},e:{r:H+ee-1,c:G+me-1}},re.push(ne)),v["number-columns-repeated"]&&(ke=parseInt(v["number-columns-repeated"],10)),x.t){case"boolean":x.t="b",x.v=Yt(v["boolean-value"]);break;case"float":x.t="n",x.v=parseFloat(v.value);break;case"percentage":x.t="n",x.v=parseFloat(v.value);break;case"currency":x.t="n",x.v=parseFloat(v.value);break;case"date":x.t="d",x.v=Kr(v["date-value"]),r.cellDates||(x.t="n",x.v=Qn(x.v)),x.z="m/d/yy";break;case"time":x.t="n",x.v=rB(v["time-value"])/86400,r.cellDates&&(x.t="d",x.v=mT(x.v)),x.z="HH:MM:SS";break;case"number":x.t="n",x.v=parseFloat(v.);break;default:if(x.t==="string"||x.t==="text"||!x.t)x.t="s",v["string-value"]!=null&&(A=$t(v["string-value"]),y=[]);else throw new Error("Unsupported value type "+x.t)}}else{if(q=!1,x.t==="s"&&(x.v=A||"",y.length&&(x.R=y),q=m==0),K.Target&&(x.l=K),oe.length>0&&(x.c=oe,oe=[]),A&&r.cellText!==!1&&(x.w=A),q&&(x.t="z",delete x.v),(!q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=H))for(var be=0;be<Oe;++be){if(ke=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(R[H+be]||(R[H+be]=[]),R[H+be][G]=be==0?x:Jr(x);--ke>0;)R[H+be][G+ke]=Jr(x);else for(R[ft({r:H+be,c:G})]=x;--ke>0;)R[ft({r:H+be,c:G+ke})]=Jr(x);k.e.c<=G&&(k.e.c=G)}ke=parseInt(v["number-columns-repeated"]||"1",10),G+=ke-1,ke=0,x={},A="",y=[]}K={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(L[1]==="/"){if((c=l.pop())[0]!==L[3])throw"Bad state: "+c}else L[0].charAt(L[0].length-2)!=="/"&&l.push([L[3],!0]);break;case"annotation":if(L[1]==="/"){if((c=l.pop())[0]!==L[3])throw"Bad state: "+c;M.t=A,y.length&&(M.R=y),M.a=Z,oe.push(M)}else L[0].charAt(L[0].length-2)!=="/"&&l.push([L[3],!1]);Z="",J=0,A="",m=0,y=[];break;case"creator":L[1]==="/"?Z=i.slice(J,L.index):J=L.index+L[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(L[1]==="/"){if((c=l.pop())[0]!==L[3])throw"Bad state: "+c}else L[0].charAt(L[0].length-2)!=="/"&&l.push([L[3],!1]);A="",m=0,y=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(L[1]==="/"){if(B[h.name]=f,(c=l.pop())[0]!==L[3])throw"Bad state: "+c}else L[0].charAt(L[0].length-2)!=="/"&&(f="",h=st(L[0],!1),l.push([L[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(l[l.length-1][0]){case"time-style":case"date-style":u=st(L[0],!1),f+=xx[L[3]][u.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(l[l.length-1][0]){case"time-style":case"date-style":u=st(L[0],!1),f+=xx[L[3]][u.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(L[0].slice(-2)==="/>")break;if(L[1]==="/")switch(l[l.length-1][0]){case"number-style":case"date-style":case"time-style":f+=i.slice(_,L.index);break}else _=L.index+L[0].length;break;case"named-range":u=st(L[0],!1),z=H0(u["cell-range-address"]);var ce={Name:u.name,Ref:z[0]+"!"+z[1]};he&&(ce.Sheet=S.length),Re.Names.push(ce);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(l[l.length-1][0])>-1)break;if(L[1]==="/"&&(!v||!v["string-value"])){var et=w3(i.slice(m,L.index));A=(A.length>0?A+`
`:"")+et[0]}else st(L[0],!1),m=L.index+L[0].length;break;case"s":break;case"database-range":if(L[1]==="/")break;try{z=H0(st(L[0])["target-range-address"]),E[z[0]]["!autofilter"]={ref:z[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(L[1]!=="/"){if(K=st(L[0],!1),!K.href)break;K.Target=$t(K.href),delete K.href,K.Target.charAt(0)=="#"&&K.Target.indexOf(".")>-1?(z=H0(K.Target.slice(1)),K.Target="#"+z[0]+"!"+z[1]):K.Target.match(/^\.\.[\\\/]/)&&(K.Target=K.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(L[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(L)}}var N={Sheets:E,SheetNames:S,Workbook:Re};return r.bookSheets&&delete N.Sheets,N}function Nx(t,s){s=s||{},hs(t,"META-INF/manifest.xml")&&n2($r(t,"META-INF/manifest.xml"),s);var r=zn(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var i=dk(Ft(r),s);return hs(t,"meta.xml")&&(i.Props=vy($r(t,"meta.xml"))),i}function bx(t,s){return dk(t,s)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function CI(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function n$(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ft(Vl(t))}function s$(t){var s=t.reduce(function(l,c){return l+c.length},0),r=new Uint8Array(s),i=0;return t.forEach(function(l){r.set(l,i),i+=l.length}),r}function yx(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function M3(t,s){for(var r=(t[s+15]&127)<<7|t[s+14]>>1,i=t[s+14]&1,l=s+13;l>=s;--l)i=i*256+t[l];return(t[s+15]&128?-i:i)*Math.pow(10,r-6176)}function Nh(t,s){var r=s?s[0]:0,i=t[r]&127;e:if(t[r++]>=128&&(i|=(t[r]&127)<<7,t[r++]<128||(i|=(t[r]&127)<<14,t[r++]<128)||(i|=(t[r]&127)<<21,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return s&&(s[0]=r),i}function xr(t){var s=0,r=t[s]&127;e:if(t[s++]>=128){if(r|=(t[s]&127)<<7,t[s++]<128||(r|=(t[s]&127)<<14,t[s++]<128)||(r|=(t[s]&127)<<21,t[s++]<128))break e;r|=(t[s]&127)<<28}return r}function un(t){for(var s=[],r=[0];r[0]<t.length;){var i=r[0],l=Nh(t,r),c=l&7;l=Math.floor(l/8);var u=0,h;if(l==0)break;switch(c){case 0:{for(var f=r[0];t[r[0]++]>=128;);h=t.slice(f,r[0])}break;case 5:u=4,h=t.slice(r[0],r[0]+u),r[0]+=u;break;case 1:u=8,h=t.slice(r[0],r[0]+u),r[0]+=u;break;case 2:u=Nh(t,r),h=t.slice(r[0],r[0]+u),r[0]+=u;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(l," at offset ").concat(i))}var _={data:h,type:c};s[l]==null?s[l]=[_]:s[l].push(_)}return s}function xI(t,s){return t?.map(function(r){return s(r.data)})||[]}function D3(t){for(var s,r=[],i=[0];i[0]<t.length;){var l=Nh(t,i),c=un(t.slice(i[0],i[0]+l));i[0]+=l;var u={id:xr(c[1][0].data),messages:[]};c[2].forEach(function(h){var f=un(h.data),_=xr(f[3][0].data);u.messages.push({meta:f,data:t.slice(i[0],i[0]+_)}),i[0]+=_}),(s=c[3])!=null&&s[0]&&(u.merge=xr(c[3][0].data)>>>0>0),r.push(u)}return r}function P3(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],i=Nh(s,r),l=[];r[0]<s.length;){var c=s[r[0]]&3;if(c==0){var u=s[r[0]++]>>2;if(u<60)++u;else{var h=u-59;u=s[r[0]],h>1&&(u|=s[r[0]+1]<<8),h>2&&(u|=s[r[0]+2]<<16),h>3&&(u|=s[r[0]+3]<<24),u>>>=0,u++,r[0]+=h}l.push(s.slice(r[0],r[0]+u)),r[0]+=u;continue}else{var f=0,_=0;if(c==1?(_=(s[r[0]]>>2&7)+4,f=(s[r[0]++]&224)<<3,f|=s[r[0]++]):(_=(s[r[0]++]>>2)+1,c==2?(f=s[r[0]]|s[r[0]+1]<<8,r[0]+=2):(f=(s[r[0]]|s[r[0]+1]<<8|s[r[0]+2]<<16|s[r[0]+3]<<24)>>>0,r[0]+=4)),l=[s$(l)],f==0)throw new Error("Invalid offset 0");if(f>l[0].length)throw new Error("Invalid offset beyond length");if(_>=f)for(l.push(l[0].slice(-f)),_-=f;_>=l[l.length-1].length;)l.push(l[l.length-1]),_-=l[l.length-1].length;l.push(l[0].slice(-f,-f+_))}}var T=s$(l);if(T.length!=i)throw new Error("Unexpected length: ".concat(T.length," != ").concat(i));return T}function F3(t){for(var s=[],r=0;r<t.length;){var i=t[r++],l=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,s.push(P3(i,t.slice(r,r+l))),r+=l}if(r!==t.length)throw new Error("data is not a valid framed stream!");return s$(s)}function B3(t,s,r,i){var l=CI(t),c=l.getUint32(4,!0),u=(i>1?12:8)+yx(c&(i>1?3470:398))*4,h=-1,f=-1,_=NaN,T=new Date(2001,0,1);c&512&&(h=l.getUint32(u,!0),u+=4),u+=yx(c&(i>1?12288:4096))*4,c&16&&(f=l.getUint32(u,!0),u+=4),c&32&&(_=l.getFloat64(u,!0),u+=8),c&64&&(T.setTime(T.getTime()+l.getFloat64(u,!0)*1e3),u+=8);var g;switch(t[2]){case 0:break;case 2:g={t:"n",v:_};break;case 3:g={t:"s",v:s[f]};break;case 5:g={t:"d",v:T};break;case 6:g={t:"b",v:_>0};break;case 7:g={t:"n",v:_/86400};break;case 8:g={t:"e",v:0};break;case 9:if(h>-1)g={t:"s",v:r[h]};else if(f>-1)g={t:"s",v:s[f]};else if(!isNaN(_))g={t:"n",v:_};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return g}function U3(t,s,r){var i=CI(t),l=i.getUint32(8,!0),c=12,u=-1,h=-1,f=NaN,_=NaN,T=new Date(2001,0,1);l&1&&(f=M3(t,c),c+=16),l&2&&(_=i.getFloat64(c,!0),c+=8),l&4&&(T.setTime(T.getTime()+i.getFloat64(c,!0)*1e3),c+=8),l&8&&(h=i.getUint32(c,!0),c+=4),l&16&&(u=i.getUint32(c,!0),c+=4);var g;switch(t[1]){case 0:break;case 2:g={t:"n",v:f};break;case 3:g={t:"s",v:s[h]};break;case 5:g={t:"d",v:T};break;case 6:g={t:"b",v:_>0};break;case 7:g={t:"n",v:_/86400};break;case 8:g={t:"e",v:0};break;case 9:if(u>-1)g={t:"s",v:r[u]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)));break;case 10:g={t:"n",v:f};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)))}return g}function H3(t,s,r){switch(t[0]){case 0:case 1:case 2:case 3:return B3(t,s,r,t[0]);case 5:return U3(t,s,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Po(t){var s=un(t);return Nh(s[1][0].data)}function kx(t,s){var r=un(s.data),i=xr(r[1][0].data),l=r[3],c=[];return(l||[]).forEach(function(u){var h=un(u.data),f=xr(h[1][0].data)>>>0;switch(i){case 1:c[f]=n$(h[3][0].data);break;case 8:{var _=t[Po(h[9][0].data)][0],T=un(_.data),g=t[Po(T[1][0].data)][0],E=xr(g.meta[1][0].data);if(E!=2001)throw new Error("2000 unexpected reference to ".concat(E));var S=un(g.data);c[f]=S[3].map(function(R){return n$(R.data)}).join("")}break}}),c}function G3(t,s){var r,i,l,c,u,h,f,_,T,g,E,S,R,L,x=un(t),v=xr(x[1][0].data)>>>0,A=xr(x[2][0].data)>>>0,m=((i=(r=x[8])==null?void 0:r[0])==null?void 0:i.data)&&xr(x[8][0].data)>0||!1,y,H;if((c=(l=x[7])==null?void 0:l[0])!=null&&c.data&&s!=0)y=(h=(u=x[7])==null?void 0:u[0])==null?void 0:h.data,H=(_=(f=x[6])==null?void 0:f[0])==null?void 0:_.data;else if((g=(T=x[4])==null?void 0:T[0])!=null&&g.data&&s!=1)y=(S=(E=x[4])==null?void 0:E[0])==null?void 0:S.data,H=(L=(R=x[3])==null?void 0:R[0])==null?void 0:L.data;else throw"NUMBERS Tile missing ".concat(s," cell storage");for(var G=m?4:1,k=CI(y),F=[],B=0;B<y.length/2;++B){var re=k.getUint16(B*2,!0);re<65535&&F.push([B,re])}if(F.length!=A)throw"Expected ".concat(A," cells, found ").concat(F.length);var ne=[];for(B=0;B<F.length-1;++B)ne[F[B][0]]=H.subarray(F[B][1]*G,F[B+1][1]*G);return F.length>=1&&(ne[F[F.length-1][0]]=H.subarray(F[F.length-1][1]*G)),{R:v,cells:ne}}function V3(t,s){var r,i=un(s.data),l=(r=i?.[7])!=null&&r[0]?xr(i[7][0].data)>>>0>0?1:0:-1,c=xI(i[5],function(u){return G3(u,l)});return{nrows:xr(i[4][0].data)>>>0,data:c.reduce(function(u,h){return u[h.R]||(u[h.R]=[]),h.cells.forEach(function(f,_){if(u[h.R][_])throw new Error("Duplicate cell r=".concat(h.R," c=").concat(_));u[h.R][_]=f}),u},[])}}function W3(t,s,r){var i,l=un(s.data),c={s:{r:0,c:0},e:{r:0,c:0}};if(c.e.r=(xr(l[6][0].data)>>>0)-1,c.e.r<0)throw new Error("Invalid row varint ".concat(l[6][0].data));if(c.e.c=(xr(l[7][0].data)>>>0)-1,c.e.c<0)throw new Error("Invalid col varint ".concat(l[7][0].data));r["!ref"]=vt(c);var u=un(l[4][0].data),h=kx(t,t[Po(u[4][0].data)][0]),f=(i=u[17])!=null&&i[0]?kx(t,t[Po(u[17][0].data)][0]):[],_=un(u[3][0].data),T=0;_[1].forEach(function(g){var E=un(g.data),S=t[Po(E[2][0].data)][0],R=xr(S.meta[1][0].data);if(R!=6002)throw new Error("6001 unexpected reference to ".concat(R));var L=V3(t,S);L.data.forEach(function(x,v){x.forEach(function(A,m){var y=ft({r:T+v,c:m}),H=H3(A,h,f);H&&(r[y]=H)})}),T+=L.nrows})}function X3(t,s){var r=un(s.data),i={"!ref":"A1"},l=t[Po(r[2][0].data)],c=xr(l[0].meta[1][0].data);if(c!=6001)throw new Error("6000 unexpected reference to ".concat(c));return W3(t,l[0],i),i}function j3(t,s){var r,i=un(s.data),l={name:(r=i[1])!=null&&r[0]?n$(i[1][0].data):"",sheets:[]},c=xI(i[2],Po);return c.forEach(function(u){t[u].forEach(function(h){var f=xr(h.meta[1][0].data);f==6e3&&l.sheets.push(X3(t,h))})}),l}function z3(t,s){var r=_k(),i=un(s.data),l=xI(i[1],Po);if(l.forEach(function(c){t[c].forEach(function(u){var h=xr(u.meta[1][0].data);if(h==2){var f=j3(t,u);f.sheets.forEach(function(_,T){Tk(r,_,T==0?f.name:f.name+"_"+T,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function V0(t){var s,r,i,l,c={},u=[];if(t.FullPaths.forEach(function(f){if(f.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(f){if(f.name.match(/\.iwa$/)){var _;try{_=F3(f.content)}catch(g){return console.log("?? "+f.content.length+" "+(g.message||g))}var T;try{T=D3(_)}catch(g){return console.log("## "+(g.message||g))}T.forEach(function(g){c[g.id]=g.messages,u.push(g.id)})}}),!u.length)throw new Error("File has no messages");var h=((l=(i=(r=(s=c?.[1])==null?void 0:s[0])==null?void 0:r.meta)==null?void 0:i[1])==null?void 0:l[0].data)&&xr(c[1][0].meta[1][0].data)==1&&c[1][0];if(h||u.forEach(function(f){c[f].forEach(function(_){var T=xr(_.meta[1][0].data)>>>0;if(T==1)if(!h)h=_;else throw new Error("Document has multiple roots")})}),!h)throw new Error("Cannot find Document root");return z3(c,h)}function Y3(t){return function(r){for(var i=0;i!=t.length;++i){var l=t[i];r[l[0]]===void 0&&(r[l[0]]=l[1]),l[2]==="n"&&(r[l[0]]=Number(r[l[0]]))}}}function NI(t){Y3([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function K3(t){return Ja.WS.indexOf(t)>-1?"sheet":t==Ja.CS?"chart":t==Ja.DS?"dialog":t==Ja.MS?"macro":t&&t.length?t:"sheet"}function J3(t,s){if(!t)return 0;try{t=s.map(function(i){return i.id||(i.id=i.strRelID),[i.name,t["!id"][i.id].Target,K3(t["!id"][i.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function q3(t,s,r,i,l,c,u,h,f,_,T,g){try{c[i]=Ju(zn(t,r,!0),s);var E=$r(t,s),S;switch(h){case"sheet":S=u3(E,s,l,f,c[i],_,T,g);break;case"chart":if(S=h3(E,s,l,f,c[i],_,T,g),!S||!S["!drawel"])break;var R=Du(S["!drawel"].Target,s),L=Zm(R),x=cG(zn(t,R,!0),Ju(zn(t,L,!0),R)),v=Du(x,R),A=Zm(v);S=zV(zn(t,v,!0),v,f,Ju(zn(t,A,!0),v),_,S);break;case"macro":S=d3(E,s,l,f,c[i],_,T,g);break;case"dialog":S=f3(E,s,l,f,c[i],_,T,g);break;default:throw new Error("Unrecognized sheet type "+h)}u[i]=S;var m=[];c&&c[i]&&Ho(c[i]).forEach(function(y){var H="";if(c[i][y].Type==Ja.CMNT){H=Du(c[i][y].Target,s);var G=g3($r(t,H,!0),H,f);if(!G||!G.length)return;mx(S,G,!1)}c[i][y].Type==Ja.TCMNT&&(H=Du(c[i][y].Target,s),m=m.concat(hG($r(t,H,!0),f)))}),m&&m.length&&mx(S,m,!0,f.people||[])}catch(y){if(f.WTF)throw y}}function cs(t){return t.charAt(0)=="/"?t.slice(1):t}function Z3(t,s){if(q1(),s=s||{},NI(s),hs(t,"META-INF/manifest.xml")||hs(t,"objectdata.xml"))return Nx(t,s);if(hs(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof V0<"u"){if(t.FileIndex)return V0(t);var r=gt.utils.cfb_new();return jC(t).forEach(function(we){aB(r,we,lB(t,we))}),V0(r)}throw new Error("Unsupported NUMBERS file")}if(!hs(t,"[Content_Types].xml"))throw hs(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):hs(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var i=jC(t),l=t2(zn(t,"[Content_Types].xml")),c=!1,u,h;if(l.workbooks.length===0&&(h="xl/workbook.xml",$r(t,h,!0)&&l.workbooks.push(h)),l.workbooks.length===0){if(h="xl/workbook.bin",!$r(t,h,!0))throw new Error("Could not find workbook");l.workbooks.push(h),c=!0}l.workbooks[0].slice(-3)=="bin"&&(c=!0);var f={},_={};if(!s.bookSheets&&!s.bookProps){if(Qu=[],l.sst)try{Qu=p3($r(t,cs(l.sst)),l.sst,s)}catch(we){if(s.WTF)throw we}s.cellStyles&&l.themes.length&&(f=T3(zn(t,l.themes[0].replace(/^\//,""),!0)||"",l.themes[0],s)),l.style&&(_=_3($r(t,cs(l.style)),l.style,f,s))}l.links.map(function(we){try{var Oe=Ju(zn(t,Zm(cs(we))),we);return m3($r(t,cs(we)),Oe,we,s)}catch{}});var T=c3($r(t,cs(l.workbooks[0])),l.workbooks[0],s),g={},E="";l.coreprops.length&&(E=$r(t,cs(l.coreprops[0]),!0),E&&(g=vy(E)),l.extprops.length!==0&&(E=$r(t,cs(l.extprops[0]),!0),E&&o2(E,g,s)));var S={};(!s.bookSheets||s.bookProps)&&l.custprops.length!==0&&(E=zn(t,cs(l.custprops[0]),!0),E&&(S=a2(E,s)));var R={};if((s.bookSheets||s.bookProps)&&(T.Sheets?u=T.Sheets.map(function(Oe){return Oe.name}):g.Worksheets&&g.SheetNames.length>0&&(u=g.SheetNames),s.bookProps&&(R.Props=g,R.Custprops=S),s.bookSheets&&typeof u<"u"&&(R.SheetNames=u),s.bookSheets?R.SheetNames:s.bookProps))return R;u={};var L={};s.bookDeps&&l.calcchain&&(L=E3($r(t,cs(l.calcchain)),l.calcchain));var x=0,v={},A,m;{var y=T.Sheets;g.Worksheets=y.length,g.SheetNames=[];for(var H=0;H!=y.length;++H)g.SheetNames[H]=y[H].name}var G=c?"bin":"xml",k=l.workbooks[0].lastIndexOf("/"),F=(l.workbooks[0].slice(0,k+1)+"_rels/"+l.workbooks[0].slice(k+1)+".rels").replace(/^\//,"");hs(t,F)||(F="xl/_rels/workbook."+G+".rels");var B=Ju(zn(t,F,!0),F.replace(/_rels.*/,"s5s"));(l.metadata||[]).length>=1&&(s.xlmeta=$3($r(t,cs(l.metadata[0])),l.metadata[0],s)),(l.people||[]).length>=1&&(s.people=dG($r(t,cs(l.people[0])),s)),B&&(B=J3(B,T.Sheets));var re=$r(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(x=0;x!=g.Worksheets;++x){var ne="sheet";if(B&&B[x]?(A="xl/"+B[x][1].replace(/[\/]?xl\//,""),hs(t,A)||(A=B[x][1]),hs(t,A)||(A=F.replace(/_rels\/.*$/,"")+B[x][1]),ne=B[x][2]):(A="xl/worksheets/sheet"+(x+1-re)+"."+G,A=A.replace(/sheet0\./,"sheet.")),m=A.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),s&&s.sheets!=null)switch(typeof s.sheets){case"number":if(x!=s.sheets)continue e;break;case"string":if(g.SheetNames[x].toLowerCase()!=s.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(s.sheets)){for(var ee=!1,me=0;me!=s.sheets.length;++me)typeof s.sheets[me]=="number"&&s.sheets[me]==x&&(ee=1),typeof s.sheets[me]=="string"&&s.sheets[me].toLowerCase()==g.SheetNames[x].toLowerCase()&&(ee=1);if(!ee)continue e}}q3(t,A,m,g.SheetNames[x],x,v,u,ne,s,T,f,_)}return R={Directory:l,Workbook:T,Props:g,Custprops:S,Deps:L,Sheets:u,SheetNames:g.SheetNames,Strings:Qu,Styles:_,Themes:f,SSF:Jr(dt)},s&&s.bookFiles&&(t.files?(R.keys=i,R.files=t.files):(R.keys=[],R.files={},t.FullPaths.forEach(function(we,Oe){we=we.replace(/^Root Entry[\/]/,""),R.keys.push(we),R.files[we]=t.FileIndex[Oe]}))),s&&s.bookVBA&&(l.vba.length>0?R.vbaraw=$r(t,cs(l.vba[0]),!0):l.defaults&&l.defaults.bin===pG&&(R.vbaraw=$r(t,"xl/vbaProject.bin",!0))),R}function Q3(t,s){var r=s||{},i="Workbook",l=gt.find(t,i);try{if(i="/!DataSpaces/Version",l=gt.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(ZU(l.content),i="/!DataSpaces/DataSpaceMap",l=gt.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var c=eH(l.content);if(c.length!==1||c[0].comps.length!==1||c[0].comps[0].t!==0||c[0].name!=="StrongEncryptionDataSpace"||c[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",l=gt.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var u=tH(l.content);if(u.length!=1||u[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",l=gt.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);nH(l.content)}catch{}if(i="/EncryptionInfo",l=gt.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var h=sH(l.content);if(i="/EncryptedPackage",l=gt.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(h[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(h[1],l.content,r.password||"",r);if(h[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(h[1],l.content,r.password||"",r);throw new Error("File is password-protected")}function bI(t,s){var r="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=Zn(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function eW(t,s){return gt.find(t,"EncryptedPackage")?Q3(t,s):hk(t,s)}function tW(t,s){var r,i=t,l=s||{};return l.type||(l.type=pt&&Buffer.isBuffer(t)?"buffer":"base64"),r=ny(i,l),Z3(r,l)}function fk(t,s){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return t$(t.slice(r),s);default:break e}return vh.to_workbook(t,s)}function rW(t,s){var r="",i=bI(t,s);switch(s.type){case"base64":r=Zn(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Dl(t);break;default:throw new Error("Unrecognized type "+s.type)}return i[0]==239&&i[1]==187&&i[2]==191&&(r=Ft(r)),s.type="binary",fk(r,s)}function nW(t,s){var r=t;return s.type=="base64"&&(r=Zn(r)),r=Oh.utils.decode(1200,r.slice(2),"str"),s.type="binary",fk(r,s)}function sW(t){return t.match(/[^\x00-\x7F]/)?Pu(t):t}function W0(t,s,r,i){return i?(r.type="string",vh.to_workbook(t,r)):vh.to_workbook(s,r)}function i$(t,s){B1();var r=s||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return i$(new Uint8Array(t),(r=Jr(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var i=t,l=[0,0,0,0],c=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),lc={},r.dateNF&&(lc.dateNF=r.dateNF),r.type||(r.type=pt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=pt?"buffer":"binary",i=eB(t),typeof Uint8Array<"u"&&!pt&&(r.type="array")),r.type=="string"&&(c=!0,r.type="binary",r.codepage=65001,i=sW(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var u=new ArrayBuffer(3),h=new Uint8Array(u);if(h.foo="bar",!h.foo)return r=Jr(r),r.type="array",i$(hI(i),r)}switch((l=bI(i,r))[0]){case 208:if(l[1]===207&&l[2]===17&&l[3]===224&&l[4]===161&&l[5]===177&&l[6]===26&&l[7]===225)return eW(gt.read(i,r),r);break;case 9:if(l[1]<=8)return hk(i,r);break;case 60:return t$(i,r);case 73:if(l[1]===73&&l[2]===42&&l[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(l[1]===68)return BU(i,r);break;case 84:if(l[1]===65&&l[2]===66&&l[3]===76)return PU.to_workbook(i,r);break;case 80:return l[1]===75&&l[2]<9&&l[3]<9?tW(i,r):W0(t,i,r,c);case 239:return l[3]===60?t$(i,r):W0(t,i,r,c);case 255:if(l[1]===254)return nW(i,r);if(l[1]===0&&l[2]===2&&l[3]===0)return Zu.to_workbook(i,r);break;case 0:if(l[1]===0&&(l[2]>=2&&l[3]===0||l[2]===0&&(l[3]===8||l[3]===9)))return Zu.to_workbook(i,r);break;case 3:case 131:case 139:case 140:return Ex.to_workbook(i,r);case 123:if(l[1]===92&&l[2]===114&&l[3]===116)return pH.to_workbook(i,r);break;case 10:case 13:case 32:return rW(i,r);case 137:if(l[1]===80&&l[2]===78&&l[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return MU.indexOf(l[0])>-1&&l[2]<=12&&l[3]<=31?Ex.to_workbook(i,r):W0(t,i,r,c)}function iW(t,s,r,i,l,c,u,h){var f=Jn(r),_=h.defval,T=h.raw||!Object.prototype.hasOwnProperty.call(h,"raw"),g=!0,E=l===1?[]:{};if(l!==1)if(Object.defineProperty)try{Object.defineProperty(E,"__rowNum__",{value:r,enumerable:!1})}catch{E.__rowNum__=r}else E.__rowNum__=r;if(!u||t[r])for(var S=s.s.c;S<=s.e.c;++S){var R=u?t[r][S]:t[i[S]+f];if(R===void 0||R.t===void 0){if(_===void 0)continue;c[S]!=null&&(E[c[S]]=_);continue}var L=R.v;switch(R.t){case"z":if(L==null)break;continue;case"e":L=L==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+R.t)}if(c[S]!=null){if(L==null)if(R.t=="e"&&L===null)E[c[S]]=null;else if(_!==void 0)E[c[S]]=_;else if(T&&L===null)E[c[S]]=null;else continue;else E[c[S]]=T&&(R.t!=="n"||R.t==="n"&&h.rawNumbers!==!1)?L:$c(R,L,h);L!=null&&(g=!1)}}return{row:E,isempty:g}}function oW(t,s){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},i=0,l=1,c=[],u=0,h="",f={s:{r:0,c:0},e:{r:0,c:0}},_=s||{},T=_.range!=null?_.range:t["!ref"];switch(_.header===1?i=1:_.header==="A"?i=2:Array.isArray(_.header)?i=3:_.header==null&&(i=0),typeof T){case"string":f=Hr(T);break;case"number":f=Hr(t["!ref"]),f.s.r=T;break;default:f=T}i>0&&(l=0);var g=Jn(f.s.r),E=[],S=[],R=0,L=0,x=Array.isArray(t),v=f.s.r,A=0,m={};x&&!t[v]&&(t[v]=[]);var y=_.skipHidden&&t["!cols"]||[],H=_.skipHidden&&t["!rows"]||[];for(A=f.s.c;A<=f.e.c;++A)if(!(y[A]||{}).hidden)switch(E[A]=In(A),r=x?t[v][A]:t[E[A]+g],i){case 1:c[A]=A-f.s.c;break;case 2:c[A]=E[A];break;case 3:c[A]=_.header[A-f.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),h=u=$c(r,null,_),L=m[u]||0,!L)m[u]=1;else{do h=u+"_"+L++;while(m[h]);m[u]=L,m[h]=1}c[A]=h}for(v=f.s.r+l;v<=f.e.r;++v)if(!(H[v]||{}).hidden){var G=iW(t,f,v,E,i,c,x,_);(G.isempty===!1||(i===1?_.blankrows!==!1:_.blankrows))&&(S[R++]=G.row)}return S.length=R,S}function _k(){return{SheetNames:[],Sheets:{}}}function Tk(t,s,r,i){var l=1;if(!r)for(;l<=65535&&t.SheetNames.indexOf(r="Sheet"+l)!=-1;++l,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&t.SheetNames.indexOf(r)>=0){var c=r.match(/(^.*?)(\d+)$/);l=c&&+c[2]||0;var u=c&&c[1]||r;for(++l;l<=65535&&t.SheetNames.indexOf(r=u+l)!=-1;++l);}if(t3(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=s,r}function lW(t){const s=i$(t,{type:"array",cellFormula:!0,cellText:!0,cellNF:!1}),r=[];for(const i of s.SheetNames){const l=s.Sheets[i];if(!l)continue;const c={};for(const u of Object.keys(l)){if(u.startsWith("!"))continue;const h=l[u],f=h.f,_=f?f.startsWith("=")?f:`=${f}`:void 0;c[u]={displayText:h.w??String(h.v??""),rawValue:h.v,formula:_}}r.push({name:i,cells:c})}return{sheets:r}}function aW(t){return{schemaVersion:1,exportedAt:new Date().toISOString(),fns:t.functions.map(s=>{const r=t.workspaces.find(i=>i.id===s.workspaceId);return{name:s.name,params:s.params??[],description:s.description??"",workspaceXml:r?.xml??""}})}}function cW(t,s){const r=t?.schemaVersion??t?.version;if(r!==1)throw new Error(`Unsupported schemaVersion: ${r}`);const i=t?.fns??t?.functions??[];if(!Array.isArray(i))throw new Error("Invalid named function JSON: fns/functions is not array");const l=new Set,c=[];for(const u of i){let h=String(u?.name??"Unnamed");{let T=2;for(;l.has(h);)h=`${String(u?.name??"Unnamed")} (${T++})`}l.add(h);const f=crypto.randomUUID(),_=crypto.randomUUID();c.push({fn:{id:f,name:h,params:Array.isArray(u?.params)?u.params:[],description:u?.description??"",workspaceId:_},workspaceXml:String(u?.workspaceXml??"")})}return c}const uW=8,hW=20,wx=80,Mx=22,dW=11;function fW(t=uW){const s=[];for(let i=0;i<t;i++)s.push(r(i));return s;function r(i){let l=i,c="";for(;l>=0;)c=String.fromCharCode(65+l%26)+c,l=Math.floor(l/26)-1;return c}}function _W(t=hW){return Array.from({length:t},(s,r)=>r+1)}function TW({selectedRefText:t,selectedCell:s,cells:r,uiLang:i="en"}){const l=r[s],c=l?.displayText??"",u=l?.formula??"",h=async()=>{if(u)try{await navigator.clipboard.writeText(u)}catch{const f=document.createElement("textarea");f.value=u,document.body.appendChild(f),f.select(),document.execCommand("copy"),document.body.removeChild(f)}};return V.jsx("div",{className:"bg-gray-100 border-b border-gray-300 px-3 py-2",children:V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("div",{className:"bg-white border border-emerald-300 px-3 py-1 text-sm text-emerald-700 shrink-0",children:t}),V.jsx("div",{className:"flex-1 min-w-[120px] bg-white border border-gray-300 px-2 py-1 text-xs text-gray-800 overflow-hidden whitespace-nowrap text-ellipsis",title:c,children:c}),V.jsx("span",{className:"text-xs text-gray-500 shrink-0",children:"fx"}),V.jsx("div",{className:"flex-[2] min-w-[200px] bg-white border border-gray-300 px-2 py-1 text-xs text-gray-700 overflow-hidden whitespace-nowrap text-ellipsis",title:u,children:u}),V.jsx("button",{className:"px-2 py-1 text-xs border border-gray-300 bg-white hover:bg-gray-50",onClick:h,disabled:!u,title:i==="ja"?"":"Copy formula",children:""})]})})}function ps(t){const s=yI(t);return s?{colIndex:ST(s.col),row:s.row}:null}function rT(t){return`${pk(t.colIndex)}${t.row}`}function ac(t,s){const r=ps(t),i=ps(s);if(!r||!i)return null;const l=Math.min(r.colIndex,i.colIndex),c=Math.max(r.colIndex,i.colIndex),u=Math.min(r.row,i.row),h=Math.max(r.row,i.row);return{a:rT({colIndex:l,row:u}),b:rT({colIndex:c,row:h})}}function m_(t){return t.a===t.b?t.a:`${t.a}:${t.b}`}function o$(t,s){const r=ps(t),i=ps(s.a),l=ps(s.b);if(!r||!i||!l)return!1;const c=Math.min(i.colIndex,l.colIndex),u=Math.max(i.colIndex,l.colIndex),h=Math.min(i.row,l.row),f=Math.max(i.row,l.row);return c<=r.colIndex&&r.colIndex<=u&&h<=r.row&&r.row<=f}function Dx(t,s){const r=ps(t),i=ps(s.a),l=ps(s.b);if(!r||!i||!l)return{top:!1,bottom:!1,left:!1,right:!1};const c=Math.min(i.colIndex,l.colIndex),u=Math.max(i.colIndex,l.colIndex),h=Math.min(i.row,l.row),f=Math.max(i.row,l.row);return c<=r.colIndex&&r.colIndex<=u&&h<=r.row&&r.row<=f?{top:r.row===h,bottom:r.row===f,left:r.colIndex===c,right:r.colIndex===u}:{top:!1,bottom:!1,left:!1,right:!1}}function pW(t,s){return`${t}${s}`}function ST(t){let s=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<65||i>90)throw new Error(`Invalid column: ${t}`);s=s*26+(i-64)}return s-1}function pk(t){if(t<0)throw new Error(`Invalid col index: ${t}`);let s=t,r="";for(;s>=0;)r=String.fromCharCode(65+s%26)+r,s=Math.floor(s/26)-1;return r}function yI(t){const s=/^([A-Z]+)(\d+)$/.exec(t);if(!s)return null;const r=s[1],i=Number(s[2]);return!Number.isFinite(i)||i<=0?null:{col:r,row:i}}function kI(t,s,r){const i=yI(t);if(!i)return null;const l=ST(i.col)+s,c=i.row+r;return l<0||c<=0?null:`${pk(l)}${c}`}function gW(t){const s=new Set;for(const[r,i]of Object.entries(t)){const l=i.merge;if(!l)continue;const c=Math.max(1,l.rowspan),u=Math.max(1,l.colspan);if(!(c===1&&u===1))for(let h=0;h<c;h++)for(let f=0;f<u;f++){if(h===0&&f===0)continue;const _=kI(r,f,h);_&&s.add(_)}}return s}function EW({columns:t,rows:s,selectedCell:r,cells:i,onCellClick:l,onScrollNearEdge:c,range:u,highlightRange:h,dragging:f,onCellMouseDown:_,onCellMouseEnter:T,onMouseUpAnywhere:g,usedRange:E,onCellContextMenu:S}){const R=ve.useMemo(()=>gW(i),[i]),L=m=>{if(!c)return;const y=m.currentTarget,H=200,G=y.scrollTop+y.clientHeight>=y.scrollHeight-H,k=y.scrollLeft+y.clientWidth>=y.scrollWidth-H;(G||k)&&c({bottom:G,right:k})},x="2px solid rgba(16,185,129,0.8)",v="2px solid rgba(59,130,246,0.55)",A="1px solid rgba(0,0,0,0.25)";return V.jsx("div",{className:"flex-1 overflow-auto",tabIndex:0,onMouseEnter:m=>m.currentTarget.focus(),onScroll:L,onMouseUp:g,onMouseLeave:g,children:V.jsxs("table",{className:"w-full border-collapse",style:{fontSize:dW},children:[V.jsx("thead",{className:"sticky top-0 bg-gray-100 z-10",children:V.jsxs("tr",{children:[V.jsx("th",{className:"w-12 border border-gray-300 bg-gray-200 text-xs p-1"}),t.map(m=>V.jsx("th",{className:"border border-gray-300 bg-gray-200 text-xs p-1",style:{minWidth:wx},children:m},m))]})}),V.jsx("tbody",{children:s.map(m=>V.jsxs("tr",{style:{height:Mx},children:[V.jsx("td",{className:"border border-gray-300 bg-gray-200 text-xs text-center p-1",children:m}),t.map(y=>{const H=pW(y,m);if(R.has(H))return null;const G=H===r,k=i[H],F=k?.displayText??"",B=k?.merge?.rowspan??1,re=k?.merge?.colspan??1,ne=k?.style?.bg,ee=k?.style?.fg,me=k?.style?.bold?"700":"400",we=k?.style?.italic?"italic":"normal",Oe=k?.style?.underline?"underline":"none",ke=k?.style?.borderTop,ye=k?.style?.borderRight,Re=k?.style?.borderBottom,K=k?.style?.borderLeft,z=u?o$(H,u):!1,oe=u?Dx(H,u):{top:!1,bottom:!1,left:!1,right:!1},M=h?o$(H,h):!1,Z=h?Dx(H,h):{top:!1,bottom:!1,left:!1,right:!1},J=z&&!G?"rgba(16,185,129,0.12)":void 0,q=M&&!G&&!z?"rgba(59,130,246,0.08)":void 0,he=ST(y),xe=E,Pe=!!xe&&m<=xe.maxRow&&he<=xe.maxColIndex,be=!!xe&&m===1&&he<=xe.maxColIndex,ce=!!xe&&he===0&&m<=xe.maxRow,et=!!xe&&m===xe.maxRow&&he<=xe.maxColIndex,N=!!xe&&he===xe.maxColIndex&&m<=xe.maxRow,fe=Pe&&!G&&!z&&!M?"rgba(0,0,0,0.02)":void 0,He=G?void 0:oe.top?x:Z.top?v:ke??(be?A:void 0),Me=G?void 0:oe.bottom?x:Z.bottom?v:Re??(et?A:void 0),Ze=G?void 0:oe.left?x:Z.left?v:K??(ce?A:void 0),Ce=G?void 0:oe.right?x:Z.right?v:ye??(N?A:void 0);return V.jsx("td",{onContextMenu:ut=>{ut.preventDefault(),S?.(H,ut.clientX,ut.clientY)},rowSpan:B>1?B:void 0,colSpan:re>1?re:void 0,onClick:()=>l(H),onMouseDown:ut=>{ut.preventDefault(),_?.(H)},onMouseEnter:()=>{f&&T?.(H)},className:["border border-gray-300 px-1 cursor-pointer","transition-colors",G?"bg-emerald-100 border-emerald-500 border-2":"bg-white hover:bg-gray-50"].join(" "),style:{height:Mx,minWidth:wx,backgroundColor:G?void 0:J??q??fe??ne,color:ee,fontWeight:me,fontStyle:we,textDecoration:Oe,borderTop:He,borderRight:Ce,borderBottom:Me,borderLeft:Ze,verticalAlign:"middle",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:F,children:F},H)})]},m))})]})})}function Px(t,s,r="A1"){const i=mW(s);if(i.length===0)return t;const l={...t};for(let c=0;c<i.length;c++){const u=i[c];for(let h=0;h<u.length;h++){const f=kI(r,h,c);if(!f)continue;const _=u[h]??"",T=l[f],g=T?{...T,displayText:_}:{displayText:_};l[f]=g}}return l}function mW(t){const s=t.replace(/\s+$/g,"");return s?s.split(/\r?\n/).map(r=>r.split("	")):[]}function $W(t,s,r="A1"){const i=IW(s);if(!i)return t;const{table:l}=i,c={...t},u=new Set,h=(_,T)=>`${_},${T}`,f=Array.from(l.querySelectorAll("tr"));for(let _=0;_<f.length;_++){const T=f[_],g=Array.from(T.querySelectorAll("td,th"));let E=0;for(const S of g){for(;u.has(h(_,E));)E++;const R=Math.max(1,parseInt(S.getAttribute("colspan")??"1",10)||1),L=Math.max(1,parseInt(S.getAttribute("rowspan")??"1",10)||1),x=kI(r,E,_);if(x){const v=OW(S.textContent??""),A=RW(S.getAttribute("style")??""),m=c[x],y=m?{...m,displayText:v,style:SW(m.style,A),merge:L>1||R>1?{rowspan:L,colspan:R}:m.merge}:{displayText:v,style:A,merge:L>1||R>1?{rowspan:L,colspan:R}:void 0};c[x]=y}for(let v=0;v<L;v++)for(let A=0;A<R;A++)u.add(h(_+v,E+A));E+=R}}return c}function IW(t){const r=new DOMParser().parseFromString(t,"text/html"),i=r.querySelector("table");return i?{doc:r,table:i}:null}function OW(t){return t.replace(/\u00a0/g," ").trim()}function SW(t,s){return t?s?{...t,...s}:t:s}function RW(t){const s=LW(t);if(Object.keys(s).length===0)return;const r={},i=ui(s,["background-color","background"]);i&&(r.bg=i);const l=ui(s,["color"]);l&&(r.fg=l);const c=ui(s,["font-weight"]);c&&(r.bold=AW(c));const u=ui(s,["font-style"]);u&&(r.italic=u.toLowerCase().includes("italic"));const h=ui(s,["text-decoration","text-decoration-line"]);h&&(r.underline=h.toLowerCase().includes("underline"));const f=ui(s,["border"]),_=ui(s,["border-top"])??f,T=ui(s,["border-right"])??f,g=ui(s,["border-bottom"])??f,E=ui(s,["border-left"])??f;return _&&(r.borderTop=_),T&&(r.borderRight=T),g&&(r.borderBottom=g),E&&(r.borderLeft=E),Object.keys(r).length?r:void 0}function LW(t){const s={};return t.split(";").map(r=>r.trim()).filter(Boolean).forEach(r=>{const i=r.indexOf(":");if(i<0)return;const l=r.slice(0,i).trim().toLowerCase(),c=r.slice(i+1).trim();!l||!c||(s[l]=c)}),s}function ui(t,s){for(const r of s){const i=t[r];if(i)return i}}function AW(t){const s=t.trim().toLowerCase();if(s==="bold"||s==="bolder")return!0;const r=Number(s);return Number.isFinite(r)&&r>=600}function Fx(t){let s=1,r=0;for(const[i,l]of Object.entries(t)){if((l?.displayText??"").trim()==="")continue;const u=yI(i);u&&(s=Math.max(s,u.row),r=Math.max(r,ST(u.col)))}return{maxRow:s,maxColIndex:r}}function vW(t){const{open:s,x:r,y:i,actions:l,onClose:c,onAction:u}=t,h=ve.useRef(null),f=ve.useMemo(()=>{const T=Math.min(360,l.length*34+16),g=Math.min(r,window.innerWidth-220-8),E=Math.min(i,window.innerHeight-T-8);return{left:Math.max(8,g),top:Math.max(8,E),width:220}},[r,i,l.length]);return ve.useEffect(()=>{if(!s)return;let _=!1;const T=window.setTimeout(()=>_=!0,0),g=S=>{if(!_)return;const R=h.current;R&&R.contains(S.target)||c()},E=S=>{S.key==="Escape"&&c()};return window.addEventListener("pointerdown",g,!0),window.addEventListener("keydown",E),()=>{window.clearTimeout(T),window.removeEventListener("pointerdown",g,!0),window.removeEventListener("keydown",E)}},[s,c]),s?E1.createPortal(V.jsx("div",{ref:h,style:{position:"fixed",left:f.left,top:f.top,width:260,minHeight:120,zIndex:99999,background:"white",border:"1px solid #d1d5db",borderRadius:8,boxShadow:"0 8px 24px rgba(0,0,0,0.15)",padding:8},children:l.map(_=>{const T=_.enabled!==!1;return V.jsx("button",{disabled:!T,onClick:()=>{T&&(u(_.id),c())},className:["w-full text-left px-3 py-2 text-sm",T?"hover:bg-gray-100":"text-gray-400 cursor-not-allowed"].join(" "),children:_.label},_.id)})}),document.body):null}async function X0(t){try{await navigator.clipboard.writeText(t)}catch{CW(t)}}function CW(t){const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.left="-9999px",s.style.top="-9999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}finally{document.body.removeChild(s)}}function xW(t,s){const r=ac(s.a,s.b);if(!r)return"";const i=ps(r.a),l=ps(r.b),c=[];for(let u=i.row;u<=l.row;u++){const h=[];for(let f=i.colIndex;f<=l.colIndex;f++){const _=rT({colIndex:f,row:u}),T=t[_]?.displayText??"";h.push(T)}c.push(h.join("	"))}return c.join(`
`)}function NW(t,s){return wI(t,s,r=>({...r,displayText:""}))}function bW(t,s){return wI(t,s,r=>({...r,style:void 0,merge:void 0}))}function yW(t,s){return wI(t,s,r=>({...r,displayText:"",style:void 0,merge:void 0,formula:void 0}))}function wI(t,s,r){const i=ac(s.a,s.b);if(!i)return t;const l=ps(i.a),c=ps(i.b),u={...t};for(let h=l.row;h<=c.row;h++)for(let f=l.colIndex;f<=c.colIndex;f++){const _=rT({colIndex:f,row:h}),T=u[_]??{displayText:""},g=r(T),E=(g.displayText??"").trim(),S=!!g.style,R=!!g.merge,L=!!g.formula;!E&&!S&&!R&&!L?delete u[_]:u[_]=g}return u}function kW(t){const s=Yr(t.uiLang??"en"),r=!!t.range&&t.inRangeContext;return[{id:"copy_ref",label:s(tt.COPY_REF)},{id:"copy_value",label:s(tt.COPY_VALUE),enabled:!r},{id:"copy_tsv",label:s(tt.COPY_TSV),enabled:r},{id:"paste",label:s(tt.PASTE)},{id:"add_ref_block",label:s(tt.ADD_REF_BLOCK)},{id:"clear_value",label:s(tt.CLEAR_VALUE)},{id:"clear_style",label:s(tt.CLEAR_STYLE)},{id:"clear_all",label:s(tt.CLEAR_ALL)}]}async function wW(t){const s=!!t.range&&t.inRangeContext,r=(()=>{if(s&&t.range){const i=ac(t.range.a,t.range.b);return i?m_(i):t.range.a}return t.selectedCell})();switch(t.action){case"copy_ref":await X0(r);return;case"copy_value":if(s)return;await X0(t.cells[t.selectedCell]?.displayText??"");return;case"copy_tsv":if(!s||!t.range)return;await X0(xW(t.cells,t.range));return;case"paste":t.onPasteRequest?.();return;case"add_ref_block":t.onAddRefBlock?.(r);return;case"clear_value":t.setCells(i=>{const l=s&&t.range?t.range:{a:t.selectedCell,b:t.selectedCell};return NW(i,l)});return;case"clear_style":t.setCells(i=>{const l=s&&t.range?t.range:{a:t.selectedCell,b:t.selectedCell};return bW(i,l)});return;case"clear_all":t.setCells(i=>{const l=s&&t.range?t.range:{a:t.selectedCell,b:t.selectedCell};return yW(i,l)});return}}const Bx=8,Ux=20,MW=10,DW=30,PW=10,FW=50,Hx=200,Gx=2e3;function gk({selectedCell:t,onCellSelect:s,cells:r,onCellsChange:i,onRangeSelect:l,onAddRefBlock:c,uiLang:u,highlightRange:h}){const[f,_]=ve.useState(Bx),[T,g]=ve.useState(Ux),[E,S]=ve.useState(null),R=ve.useRef(null),L=ve.useMemo(()=>fW(f),[f]),x=ve.useMemo(()=>_W(T),[T]),[v,A]=ve.useState(!1),[m,y]=ve.useState(null),[H,G]=ve.useState(null),k=ve.useMemo(()=>Fx(r),[r]),F=ve.useMemo(()=>{if(m){const z=ac(m.a,m.b);return z?m_(z):m.a}return t},[m,t]),B=ve.useCallback((z,oe,M)=>{const Z=!!m&&o$(z,m);Z||(y(null),s(z)),S({open:!0,x:oe,y:M,cell:z,inRange:Z})},[m,s]),re=ve.useMemo(()=>E?.open?kW({range:m,inRangeContext:E.inRange,uiLang:u}):[],[E,t,m,u]),ne=ve.useCallback(z=>{const oe=Fx(z),M=Math.min(Hx,Math.max(Bx,oe.maxColIndex+1+MW)),Z=Math.min(Gx,Math.max(Ux,oe.maxRow+DW));_(J=>Math.max(J,M)),g(J=>Math.max(J,Z))},[]),ee=ve.useCallback(async z=>{await wW({action:z,cells:r,selectedCell:t,range:m,inRangeContext:!!E?.inRange,setCells:oe=>i(M=>oe(M)),onAddRefBlock:oe=>{c?.(oe)},onPasteRequest:async()=>{try{const oe=await navigator.clipboard.readText();i(M=>{const Z=Px(M,oe,"A1");return ne(Z),Z})}catch{console.warn("clipboard.readText failed")}}})},[r,t,m,E,ne]),me=ve.useCallback(z=>{const oe=z.clipboardData.getData("text/html"),M=z.clipboardData.getData("text/plain"),Z=!!oe&&oe.toLowerCase().includes("<table");!Z&&!M||(z.preventDefault(),i(J=>{const q=Z?$W(J,oe,"A1"):Px(J,M,"A1");return ne(q),q}))},[ne]),we=ve.useCallback(z=>{z.bottom&&g(oe=>Math.min(Gx,oe+FW)),z.right&&_(oe=>Math.min(Hx,oe+PW))},[]),Oe=ve.useCallback(z=>{s(z),y({a:z,b:z}),l?.(z)},[s,l]),ke=ve.useCallback(z=>{A(!0),G(z),y({a:z,b:z}),s(z)},[s]),ye=ve.useCallback(z=>{y(oe=>H?{a:H,b:z}:oe)},[H]),Re=ve.useCallback(()=>{v&&(A(!1),G(null),y(z=>{if(!z)return z;const oe=ac(z.a,z.b);return oe?(l?.(m_(oe)),oe):(l?.(z.a),z)}))},[v,l]),K=ve.useCallback(z=>{if((navigator.platform.toLowerCase().includes("mac")?z.metaKey:z.ctrlKey)&&z.key.toLowerCase()==="c"){const Z=(()=>{if(m){const q=ac(m.a,m.b);return q?m_(q):m.a}return F})();z.preventDefault(),(async()=>{try{await navigator.clipboard.writeText(Z)}catch{BW(Z)}})()}},[m,t]);return ve.useEffect(()=>{ne(r)},[r,ne]),V.jsxs("div",{ref:R,className:"h-full flex flex-col",tabIndex:0,onClick:()=>R.current?.focus(),onPaste:me,onKeyDown:K,children:[V.jsx(vW,{open:!!E?.open,x:E?.x??0,y:E?.y??0,actions:re,onClose:()=>S(null),onAction:ee}),V.jsx(TW,{selectedRefText:F,selectedCell:t,cells:r,uiLang:u}),V.jsx(EW,{columns:L,rows:x,selectedCell:t,cells:r,onCellClick:Oe,onScrollNearEdge:we,range:m,dragging:v,onCellMouseDown:ke,onCellMouseEnter:ye,onMouseUpAnywhere:Re,usedRange:k,onCellContextMenu:B,highlightRange:h??m})]})}function BW(t){const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.left="-9999px",s.style.top="-9999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}finally{document.body.removeChild(s)}}var Ek={exports:{}},j0={exports:{}},Vx;function MI(){return Vx||(Vx=1,function(t,s){(function(r,i){t.exports=i()})(Co,function(){var r={},i,l,c,u,h,f,_,T,g,E,S,R,L,x,v,A,m,y,H,G,k,F,B,re,ne,ee,me,we,Oe,ke,ye,Re,K,z,oe,M,Z,J,q,he,xe,Pe,be,ce,et,N,fe,He,Me,Ze,Ce,ut,Bt,tr,hr,wt,Zr,Wt,te,dr,Tn,ct,Ot,Qe,ot,Mt,I,D,ie,le,Be,Et,An,Mn,Dn,O,w,Q,ae,Ae,Xe,rt,Nr,Ei,qi,Sr,Gs,Ac,vc,b,W,P,U,j,Y,Te,Se,pe,ge,$e,De,Ge,je,Ue,We,nt,Dt,xt,pr,mi,Vs,Ws,rs,$i,ns,Kl,Cc,jh,BI,UI,HI,Xs,fr,xc,LT,js,Zi,GI,AT,zh,vT,VI,CT,Nc,WI,Yh,XI,Kh,jI,zI,YI,Jl,KI,xT,br,Jh,NT,qh,Zh,JI,bT,yT,qI,Qh,jo,ed,ZI,kT,wT,QI,eO,zo,tO,bc,ql,Zl,ss,rO,nO,sO,iO,oO,lO,aO,MT,Qi,Ql,DT,cO,uO,hO,dO,fO,_O,TO,pO,gO,PT,EO,Yo,td,mO,ea,rd,FT,BT,nd,sd,UT,$O,HT,GT,VT,WT,XT,jT,zT,IO,yc,YT,id,od,zs,KT,JT,kc,qT,ZT,OO,ld,QT,SO,RO,LO,AO,vO,ta,ep,tp,wc,rp,CO,xO,np,sp,Ii,ip,op,NO,bO,yO,kO,lp,wO,ap,MO,Ko,Mc,ad,cd,Jo,cp,ud,up,rr,DO,ra,na,PO,hp,hd,sa,dp,qo,Dc,fp,_p,FO,BO,UO,Tp,HO,pp,ia,GO,VO,WO,XO,Pc,gp,Ep,dd,fd,jO,Fc,mp,Bc,zO,YO,eo,$p,Ys,KO,JO,Ip,qO,Zo,Op,ZO,QO,eS,tS,rS,Sp,nS,sS,_d,iS,oS,Rp,Ks,lS,aS,oa,cS,Lp,Td,uS,hS,dS,Ap,pd,vp,gd,fS,_S,TS,pS,Je,vn,yr,Jt,Js,la,qe,nr,gS,ES,mS,Cp,$S,Ed,xp,Np,bp,yp,aa,IS,OS,SS,ca,kp,RS,md,is,wp,ua,Is,Mp,LS,ha,AS,to,$d,Uc,Dp,vS,Pp,CS,Id,Fp,Bp,Up,xS,Hp,NS,Od,bS,yS,Hc,kS,Gp,Sd,Rd,Ld,Ad,Vp,wS,Wp,vd,Cd,MS,xd,DS,Xp,PS,ro,jp,Gc,zp,Yp,Nd,Kp,Jp,qp,Zp,Qp,eg,tg,rg,ng,FS,BS,US,HS,GS,VS,WS,XS,jS,sg,ig,og,lg,ag,cg,ug,bd,Vc,hg,zS,dg,fg,_g,Tg,pg,gg,Eg,mg,$g,Ig,YS,KS,Og,JS,qS,ZS,QS,Ee;i=function(e,n,o,a){if(!(e instanceof Le)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof n!="string"||n.trim()==="")throw Error('Invalid name "'+n+'". The name must be a non-empty string.');const d=n.toLowerCase();if(!o)throw Error("Can not register a null value");let p=no[e],C=yd[e];if(p||(p=no[e]=Object.create(null),C=yd[e]=Object.create(null)),l(e,o),!a&&p[d]&&p[d]!==o)throw Error('Name "'+d+'" with type "'+e+'" already registered.');p[d]=o,C[d]=n},l=function(e,n){switch(e){case String(Le.FIELD):if(typeof n.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},c=function(e,n){e=`${e}`.toLowerCase(),n=n.toLowerCase();const o=no[e];o&&o[n]?(delete no[e][n],delete yd[e][n]):console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},u=function(e,n,o){e=`${e}`.toLowerCase(),n=n.toLowerCase();const a=no[e];if(!a||!a[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",o)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return a[n]},h=function(e,n){return e=`${e}`.toLowerCase(),n=n.toLowerCase(),(e=no[e])?!!e[n]:!1},f=function(e,n,o){return u(e,n,o)},_=function(e,n,o){return u(e,n,o)},T=function(e,n,o){e=`${e}`.toLowerCase();var a=no[e];if(!a){if(a=`Unable to find [${e}] in the registry.`,o)throw Error(`${a} You must require or register a ${e} plugin.`);return console.warn(a),null}if(!n)return a;e=yd[e],o=Object.create(null);for(const d of Object.keys(a))o[e[d]]=a[d];return o},g=function(e,n,o){return n=n.plugins[String(e)]||Pn,typeof n=="function"?n:f(e,n,o)},E=function(e,n){S(),wd=setTimeout(function(){n&&n.handleRightClick(e)},Fk)},S=function(){wd&&(clearTimeout(wd),wd=0)},R=function(){kd=null},L=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&v(e)},x=function(e){return`${e.pointerId}`},v=function(e){const n=x(e);return kd?kd===n:e.type==="pointerdown"?(kd=n,!0):!1},A=function(e,n,o,a,d){function p(X){(d||L(X))&&(o?a.call(o,X):a(X))}const C=[];if(n in Qo)for(let X=0;X<Qo[n].length;X++){const Ie=Qo[n][X];e.addEventListener(Ie,p,!1),C.push([e,Ie,p])}else e.addEventListener(n,p,!1),C.push([e,n,p]);return C},m=function(e,n,o,a){function d(C){o?a.call(o,C):a(C)}const p=[];if(n in Qo)for(let C=0;C<Qo[n].length;C++){const X=Qo[n][C];e.addEventListener(X,d,!1),p.push([e,X,d])}else e.addEventListener(n,d,!1),p.push([e,n,d]);return p},y=function(e){const n=e[e.length-1][2];for(;e.length;){const[o,a,d]=e.pop();o.removeEventListener(a,d,!1)}return n},H=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},G=function(e){return e.ctrlKey&&Ag?!0:e.button===2},k=function(e,n,o){const a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,o||(o=n.getScreenCTM().inverse()),a.matrixTransform(o)},F=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*hR,y:e.deltaY*hR};case 2:return{x:e.deltaX*dR,y:e.deltaY*dR}}},B=function(){return"blockly-"+(Hk++).toString(36)},re=function(){return TR.genUid()},ne=function(e){return e.type===de.BLOCK_CREATE},ee=function(e){return e.type===de.BLOCK_DELETE},me=function(e){return e.type===de.BLOCK_CHANGE},we=function(e){return e.type===de.BLOCK_FIELD_INTERMEDIATE_CHANGE},Oe=function(e){return e.type===de.BLOCK_MOVE},ke=function(e){return e.type===de.CLICK},ye=function(e){return e.type===de.BUBBLE_OPEN},Re=function(e){return e.type===de.VIEWPORT_CHANGE},r.setRecordUndo$$module$build$src$core$events$utils=function(e){Wc=e},K=function(){return Wc},z=function(e){gR.fireInternal(e)},oe=function(e){if(he()){if(!Ri.length)try{requestAnimationFrame(()=>{setTimeout(M,0)})}catch{setTimeout(M,0)}Z(e)}},M=function(){const e=J(Ri);Ri.length=0;for(const n of e){if(!n.workspaceId)continue;let o;(o=Ot(n.workspaceId))==null||o.fireChangeListener(n)}},Z=function(e){if(me(e)&&e.element==="mutation"){let n;for(n=Ri.length;n>0;n--){const o=Ri[n-1];if(o.group!==e.group||o.workspaceId!==e.workspaceId||!Oe(o)||o.newParentId!==e.blockId)break}Ri.splice(n,0,e)}else Ri.push(e)},J=function(e){const n=[];for(const o of e)if(e=n[n.length-1],!o.isNull())if(e&&e.workspaceId===o.workspaceId&&e.group===o.group)if(Oe(o)&&Oe(e)&&o.blockId===e.blockId){if(e.newParentId=o.newParentId,e.newInputName=o.newInputName,e.newCoordinate=o.newCoordinate,e.reason||o.reason){let a,d;e.reason=Array.from(new Set(((a=e.reason)!=null?a:[]).concat((d=o.reason)!=null?d:[])))}}else me(o)&&me(e)&&o.blockId===e.blockId&&o.element===e.element&&o.name===e.name?e.newValue=o.newValue:Re(o)&&Re(e)?(e.viewTop=o.viewTop,e.viewLeft=o.viewLeft,e.scale=o.scale,e.oldScale=o.oldScale):ke(o)&&ye(e)||n.push(o);else n.push(o);return e=n.filter(o=>!o.isNull())},q=function(){for(let e=0,n;n=Ri[e];e++)n.recordUndo=!1},r.disable$$module$build$src$core$events$utils=function(){Cg++},r.enable$$module$build$src$core$events$utils=function(){Cg--},he=function(){return Cg===0},r.getGroup$$module$build$src$core$events$utils=function(){return pR},r.setGroup$$module$build$src$core$events$utils=function(e){gR.setGroupInternal(e)},xe=function(e){pR=typeof e=="boolean"?e?re():"":e},Pe=function(e){const n=[];e=e.getDescendants(!1);for(let o=0,a;a=e[o];o++)n[o]=a.id;return n},be=function(e,n){const o=ce(e.type);if(!o)throw Error("Unknown event type.");return o.fromJson(e,n)},ce=function(e){const n=f(Le.EVENT,e);if(!n)throw Error(`Event type ${e} not found in registry.`);return n},et=function(e){if((Oe(e)||ne(e))&&e.workspaceId){var n=Ot(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=n.getBlockById(e.blockId)){const o=Wc;try{Wc=!1;const a=e.getParent();if(a&&!a.hasDisabledReason(xg)){const d=e.getDescendants(!1);for(let p=0,C;C=d[p];p++)C.setDisabledReason(!1,xg)}else if((e.outputConnection||e.previousConnection)&&!n.isDragging())do e.setDisabledReason(!0,xg),e=e.getNextBlock();while(e)}finally{Wc=o}}}},N=function(e,n,o){e=document.createElementNS(Xc,`${e}`);for(const a in n)e.setAttribute(a,`${n[a]}`);return o&&o.appendChild(e),e},fe=function(e,n){return n=n.split(" "),n.every(o=>e.classList.contains(o))?!1:(e.classList.add(...n),!0)},He=function(e,n){e.classList.remove(...n.split(" "))},Me=function(e,n){return n=n.split(" "),n.every(o=>!e.classList.contains(o))?!1:(e.classList.remove(...n),!0)},Ze=function(e,n){return e.classList.contains(n)},Ce=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},ut=function(e,n){const o=n.nextSibling;if(n=n.parentNode,!n)throw Error("Reference node has no parent.");o?n.insertBefore(e,o):n.appendChild(e)},Bt=function(e,n){e.style.transform=n,e.style["-webkit-transform"]=n},tr=function(){Ng++,Os||(Os=Object.create(null))},hr=function(){Ng--,Ng||(Os=null)},wt=function(e){const n=e.textContent+`
`+e.className.baseVal;var o;return Os&&(o=Os[n])||(o=window.getComputedStyle(e),o=Wt(e,o.fontSize,o.fontWeight,o.fontFamily),Os&&(Os[n]=o)),o},Zr=function(e,n,o,a){return Wt(e,n+"pt",o,a)},Wt=function(e,n,o,a){const d=e.textContent;e=d+`
`+e.className.baseVal;var p;return Os&&(p=Os[e])||(jc||(p=document.createElement("canvas"),p.className="blocklyComputeCanvas",document.body.appendChild(p),jc=p.getContext("2d")),d&&jc?(jc.font=o+" "+n+" "+a,p=jc.measureText(d).width):p=0,Os&&(Os[e]=p)),p},te=function(e,n,o,a){const d=document.createElement("span");d.style.font=o+" "+n+" "+a,d.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",n=document.createElement("div"),n.style.display="flex",n.style.position="fixed",n.style.top="0",n.style.left="0",n.appendChild(d),n.appendChild(e),document.body.appendChild(n),o={height:0,baseline:0};try{n.style.alignItems="baseline",o.baseline=e.offsetTop-d.offsetTop,n.style.alignItems="flex-end",o.height=e.offsetTop-d.offsetTop}finally{document.body.removeChild(n)}return o},r.getFocusManager$$module$build$src$core$focus_manager=function(){return Gr.getFocusManager()},dr=function(e){return e&&typeof e.getFocusableElement=="function"&&typeof e.getFocusableTree=="function"&&typeof e.onNodeFocus=="function"&&typeof e.onNodeBlur=="function"&&typeof e.canBeFocused=="function"},Tn=function(e){return dr(e)&&typeof e.id=="string"&&typeof e.workspace=="object"&&typeof e.select=="function"&&typeof e.unselect=="function"},ct=function(e,n){for(const o in n)n[o]!==null&&Array.isArray(n[o])?e[o]=ct(e[o]||[],n[o]):e[o]=n[o]!==null&&typeof n[o]=="object"?ct(e[o]||Object.create(null),n[o]):n[o];return e},Ot=function(e){return zc[e]||null},Qe=function(){const e=[];for(const n in zc)e.push(zc[n]);return e},ot=function(e){zc[e.id]=e},Mt=function(e){delete zc[e.id]},I=function(){return mR},D=function(e){mR=e},ie=function(){const e=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();return e&&Tn(e)?e:null},le=function(e){r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)},Be=function(e){const n=ie();let o,a,d,p;const C=new(ce(de.SELECTED))((o=n?.id)!=null?o:null,(a=e?.id)!=null?a:null,(p=(d=e?.workspace.id)!=null?d:n?.workspace.id)!=null?p:"");z(C)},Et=function(){return $R},An=function(e){$R=e},Mn=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const n=e.getParentSvg(),o=e.getCachedParentSvgSize();var a=n.parentElement;if(a instanceof HTMLElement){var d=a.offsetWidth;a=a.offsetHeight,o.width!==d&&(n.setAttribute("width",d+"px"),e.setCachedParentSvgSize(d,null)),o.height!==a&&(n.setAttribute("height",a+"px"),e.setCachedParentSvgSize(null,a)),e.resize()}},Dn=function(e,n){const o=Object.create(null),a=e.getDescendants(!0);n&&(e=e.getNextBlock())&&(e=a.indexOf(e),a.splice(e,a.length-e));for(let d=0,p;p=a[d];d++)o[p.type]?o[p.type]++:o[p.type]=1;return o},O=function(e){return function(){this.jsonInit(e)}},w=function(e){IR.defineBlocksWithJsonArrayInternal(e)},Q=function(e){r.defineBlocks$$module$build$src$core$common(r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const n={};for(let o=0;o<e.length;o++){const a=e[o];if(!a){console.warn(`Block definition #${o} in JSON array is ${a}. Skipping`);continue}const d=a.type;d?n[d]={init:O(a)}:console.warn(`Block definition #${o} in JSON array is missing a type attribute. Skipping.`)}return n},r.defineBlocks$$module$build$src$core$common=function(e){for(const n of Object.keys(e)){const o=e[n];n in Ut&&console.warn(`Block definition "${n}" overwrites previous definition.`),Ut[n]=o}},ae=function(e){let n=I();const o=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedTree();for(const a of Qe())if(o===a){n=a;break}!H(e)&&n&&(!n.rendered||n.isFlyout||n.isVisible())&&Nt.registry.onKeyDown(n,e)},Ae=function(e,n){return n=e.indexOf(n),n===-1?!1:(e.splice(n,1),!0)},Xe=function(e){if(kg)throw Error("CSS already injected");wg+=`
`+e},rt=function(e,n){kg||(kg=!0,e&&(e=n.replace(/[\\/]$/,""),n=wg.replace(/<<<PATH>>>/g,e),wg="",e=document.createElement("style"),e.id="blockly-common-style",n=document.createTextNode(n),e.appendChild(n),document.head.insertBefore(e,document.head.firstChild)))},Nr=function(e){return SR.getSizeInternal(e)},Ei=function(e){if(Sr(e,"display")!=="none")return qi(e);const n=e.style,o=n.display,a=n.visibility,d=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";const p=e.offsetWidth;return e=e.offsetHeight,n.display=o,n.position=d,n.visibility=a,new lt(p,e)},qi=function(e){return new lt(e.offsetWidth,e.offsetHeight)},Sr=function(e,n){return e=window.getComputedStyle(e),e[n]||e.getPropertyValue(n)},Gs=function(e){const n=new Ne(0,0);e=e.getBoundingClientRect();var o=document.documentElement;return o=new Ne(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=e.left+o.x,n.y=e.top+o.y,n},Ac=function(){const e=document.body,n=document.documentElement;return new Ne(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},vc=function(e){const n=parseFloat(Sr(e,"borderLeftWidth")),o=parseFloat(Sr(e,"borderRightWidth")),a=parseFloat(Sr(e,"borderTopWidth"));return e=parseFloat(Sr(e,"borderBottomWidth")),new it(a,e,n,o)},b=function(e,n,o){e=W(e,n,o),n.scrollLeft=e.x,n.scrollTop=e.y},W=function(e,n,o){var a=Gs(e),d=Gs(n),p=vc(n);const C=a.x-d.x-p.left;return a=a.y-d.y-p.top,d=qi(e),e=n.clientWidth-d.width,d=n.clientHeight-d.height,p=n.scrollLeft,n=n.scrollTop,o?(p+=C-e/2,n+=a-d/2):(p+=Math.min(C,Math.max(C-e,0)),n+=Math.min(a,Math.max(a-d,0))),new Ne(p,n)},P=function(e){const n=new Ne(0,0);var o=e.x&&e.getAttribute("x");const a=e.y&&e.getAttribute("y");return o&&(n.x=parseInt(o)),a&&(n.y=parseInt(a)),(o=(o=e.getAttribute("transform"))&&o.match(RR))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(LR))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},U=function(e){let n=0,o=0;for(;e;){const a=P(e);if(n+=a.x,o+=a.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new Ne(n,o)},j=function(){const e=Ac();return new it(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},Y=function(){const e=document.documentElement,n=window;return new Ne(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},Te=function(e,n){var o=n.x;n=n.y;const a=e.getInjectionDiv().getBoundingClientRect();return o=new Ne(o-a.left,n-a.top),n=e.getOriginOffsetInPixels(),Ne.difference(o,n).scale(1/e.scale)},Se=function(e,n){var o=n.scale(e.scale);n=o.x,o=o.y;const a=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new Ne(n+a.left+e.x,o+a.top+e.y)},pe=function(e){({document:Bd=Bd,DOMParser:Kc=Kc,XMLSerializer:Jc=Jc}=e),Fd=new Kc,Dg=new Jc},r.createElement$$module$build$src$core$utils$xml=function(e){return Bd.createElementNS(AR,e)},r.createTextNode$$module$build$src$core$utils$xml=function(e){return Bd.createTextNode(e)},r.textToDom$$module$build$src$core$utils$xml=function(e){let n=Fd.parseFromString(e,"text/xml");if(n&&n.documentElement&&!n.getElementsByTagName("parsererror").length)return n.documentElement;if((n=Fd.parseFromString(e,"text/html"))&&n.body.firstChild&&n.body.firstChild.nodeName.toLowerCase()==="xml")return n.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},ge=function(e){return $e(Dg.serializeToString(e))},$e=function(e){return e.replace(Wk,n=>`&#${n.charCodeAt(0)};`)},De=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=mi(e),e=Dt(e)),Ge(e),e):null},Ge=function(e){const n=e.kind;if(e=e.contents,n&&n!==vR&&n!==Pg)throw Error("Invalid toolbox kind "+n+". Please supply either "+vR+" or "+Pg);if(!e)throw Error("Toolbox must have a contents attribute.")},je=function(e){return e?e.contents?e.contents:Array.isArray(e)&&e.length>0&&!e[0].nodeType?e:xt(e):[]},Ue=function(e){return CR.hasCategoriesInternal(e)},We=function(e){if(!e)return!1;const n=e.kind;return n?n===Pg:!!e.contents.filter(o=>o.kind.toUpperCase()==="CATEGORY").length},nt=function(e){return e&&e.contents?!!e.contents.filter(function(n){return n.kind.toUpperCase()==="CATEGORY"}).length:!1},Dt=function(e){const n={contents:xt(e)};return e instanceof Node&&pr(e,n),n},xt=function(e){const n=[];let o=e.childNodes;o||(o=e);for(let a=0,d;d=o[a];a++){if(!d.tagName)continue;e={};const p=d.tagName.toUpperCase();e.kind=p,p==="BLOCK"?e.blockxml=d:d.childNodes&&d.childNodes.length>0&&(e.contents=xt(d)),pr(d,e),n.push(e)}return n},pr=function(e,n){for(let o=0;o<e.attributes.length;o++){const a=e.attributes[o];a.nodeName.includes("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[a.nodeName.replace("css-","")]=a.value):n[a.nodeName]=a.value}},mi=function(e){let n=null;if(e)if(typeof e=="string"){if(n=r.textToDom$$module$build$src$core$utils$xml(e),n.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(n=e);return n},Vs=function(e,n,o,a,d,p){const C=p.scrollbar&&p.scrollbar.canScrollVertically();return e.horizontal===_a.LEFT?(o=d.absoluteMetrics.left+o,C&&p.RTL&&(o+=sr.scrollbarThickness)):(o=d.absoluteMetrics.left+d.viewMetrics.width-n.width-o,C&&!p.RTL&&(o-=sr.scrollbarThickness)),e.vertical===vi.TOP?e=d.absoluteMetrics.top+a:(e=d.absoluteMetrics.top+d.viewMetrics.height-n.height-a,p.scrollbar&&p.scrollbar.canScrollHorizontally()&&(e-=sr.scrollbarThickness)),new it(e,e+n.height,o,o+n.width)},Ws=function(e,n){return{horizontal:n.toolboxMetrics.position===at.LEFT||e.horizontalLayout&&!e.RTL?_a.RIGHT:_a.LEFT,vertical:n.toolboxMetrics.position===at.BOTTOM?vi.TOP:vi.BOTTOM}},rs=function(e,n,o,a){const d=e.left,p=e.right-e.left,C=e.bottom-e.top;for(let X=0;X<a.length;X++){const Ie=a[X];e.intersects(Ie)&&(e=o===oo.UP?Ie.top-C-n:Ie.bottom+n,e=new it(e,e+C,d,d+p),X=-1)}return e},$i=function(e,n){i(Le.SERIALIZER,e,n)},ns=function(e){c(Le.SERIALIZER,e)},Kl=function(e,{addCoordinates:n=!1,saveIds:o=!0}={}){const a=e.workspace,d=Object.create(null);return d.height=e.getSize().height,d.width=e.getSize().width,o&&(d.id=e.id),n&&(n=e.getRelativeToSurfaceXY(),d.x=a.RTL?a.getWidth()-n.x:n.x,d.y=n.y),e.getText()&&(d.text=e.getText()),e.isCollapsed()&&(d.collapsed=!0),e.isOwnEditable()||(d.editable=!1),e.isOwnMovable()||(d.movable=!1),e.isOwnDeletable()||(d.deletable=!1),d},Cc=function(e,n,{recordUndo:o=!1}={}){const a=K();if(r.setRecordUndo$$module$build$src$core$events$utils(o),o=n.newComment(e.id),e.text!==void 0&&o.setText(e.text),e.x!==void 0||e.y!==void 0){const p=o.getRelativeToSurfaceXY();let C,X=(C=e.x)!=null?C:p.x;X=n.RTL?n.getWidth()-X:X;var d;n=(d=e.y)!=null?d:p.y,o.moveTo(new Ne(X,n))}if(e.width!==void 0||e.height){d=o.getSize();let p,C;o.setSize(new lt((p=e.width)!=null?p:d.width,(C=e.height)!=null?C:d.height))}return e.collapsed!==void 0&&o.setCollapsed(e.collapsed),e.editable!==void 0&&o.setEditable(e.editable),e.movable!==void 0&&o.setMovable(e.movable),e.deletable!==void 0&&o.setDeletable(e.deletable),r.setRecordUndo$$module$build$src$core$events$utils(a),o},jh=function(e,n){i(Le.PASTER,e,n)},BI=function(e){c(Le.PASTER,e)},UI=function(e){const n=e.workspace,o=e.getRelativeToSurfaceXY(),a=new Ne(0,0),d=n.getTopComments(!1).filter(p=>p.id!==e.id).map(p=>p.getRelativeToSurfaceXY());for(;HI(Ne.sum(o,a),d);)a.translate(n.RTL?-30:30,30);e.moveTo(Ne.sum(o,a))},HI=function(e,n){return n.some(o=>Math.abs(o.x-e.x)<=1&&Math.abs(o.y-e.y)<=1)},Xs=function(e,n){e.setAttribute(zk,n)},fr=function(e,n,o){Array.isArray(o)&&(o=o.join(" ")),e.setAttribute(jk+n,`${o}`)},xc=function(e){return e&&typeof e.saveState=="function"&&typeof e.loadState=="function"},LT=function(e){return AT(e),GI()?(zh(),Promise.resolve()):(Ta||(Ta=new Promise(n=>{Wg=n,DR=window.requestAnimationFrame(()=>{zh(),n()})})),Ta)},js=function(){return Ta||Promise.resolve()},Zi=function(e){e||window.cancelAnimationFrame(DR),zh(e),!e&&Wg&&Wg()},GI=function(){return lR},AT=function(e){Gg.add(e),Vg.set(e,r.getGroup$$module$build$src$core$events$utils());const n=e.getParent();n?AT(n):Wd.add(e)},zh=function(e){const n=e?new Set([e]):new Set([...Wd].map(p=>p.workspace)),o=[...Wd].filter(VI).filter(p=>n.has(p.workspace));for(var a of o)CT(a);for(const p of n)p.resizeContents();for(var d of o)a=d.getRelativeToSurfaceXY(),d.updateComponentLocations(a);for(const p of o)d=r.getGroup$$module$build$src$core$events$utils(),(a=Vg.get(p))&&r.setGroup$$module$build$src$core$events$utils(a),p.bumpNeighbours(),r.setGroup$$module$build$src$core$events$utils(d);for(const p of o)vT(p);e||(Ta=null)},vT=function(e){Wd.delete(e),Gg.delete(e),Vg.delete(e);for(const n of e.getChildren(!1))vT(n)},VI=function(e){return!e.isDisposed()&&!e.getParent()},CT=function(e){if(Gg.has(e)&&e.initialized){for(const n of e.getChildren(!1))CT(n);e.renderEfficiently()}},Nc=function(e,n){HR(e,n)},WI=function(e=UR){HR=e},Yh=function(e,n){VR(e,n)},XI=function(e=GR){VR=e},Kh=function(e,n,o){XR(e,n,o)},jI=function(e=WR){XR=e},zI=function(e,n){zR(e,n)},YI=function(e=jR){zR=e},Jl=function(e){return e&&typeof e.getProcedureDef=="function"},KI=function(e){return e&&typeof e.getProcedureCall=="function"&&typeof e.renameProcedure=="function"},xT=function(e){return e.getVariableModel!==void 0},br=function(e,n,o,a){e=e+" was deprecated in "+n+" and will be deleted in "+o+".",a&&(e+=`
Use `+a+" instead."),YR.has(e)||(YR.add(e),console.warn(e))},r.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let o=0;o<e.length;o++){const a=e[o].getVarModels();if(a)for(let d=0;d<a.length;d++){const p=a[d];p.getId()&&n.add(p)}}return Array.from(n.values())},r.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let a=0,d;d=e[a];a++){var o=d.getDeveloperVariables;if(o){o=o();for(let p=0;p<o.length;p++)n.add(o[p])}}return Array.from(n.values())},Jh=function(e){return NT(e,!1)},NT=function(e,n=!0){return Ut.variables_set||Ut.variables_get||console.warn("There are no variable blocks, but there is a variable category."),n?(br("The XML return value of Blockly.Variables.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),JI(e)):(e.registerButtonCallback("CREATE_VARIABLE",function(o){jo(o.getTargetWorkspace())}),[{kind:"button",text:"%{BKY_NEW_VARIABLE}",callbackkey:"CREATE_VARIABLE"},...Zh(e,e.getVariableMap().getVariablesOfType(""),!0)])},qh=function(e){return{VAR:{name:e.getName(),type:e.getType()}}},Zh=function(e,n,o,a="variables_get",d="variables_set"){o&&(o=Ut.math_change),e=[];const p=n.slice(-1)[0];return p&&(Ut[d]&&e.push({kind:"block",type:d,gap:o?8:24,fields:qh(p)}),o&&e.push({kind:"block",type:"math_change",gap:Ut[a]?20:8,fields:qh(p),inputs:{DELTA:{shadow:{type:"math_number",fields:{NUM:1}}}}})),Ut[a]&&e.push(...n.sort(ql).map(C=>({kind:"block",type:a,gap:8,fields:qh(C)}))),e},JI=function(e){let n=[];const o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(a){jo(a.getTargetWorkspace())}),n.push(o),e=bT(e),n=n.concat(e)},bT=function(e){e=e.getVariableMap().getVariablesOfType("");const n=[];if(e.length>0){var o=e[e.length-1];if(Ut.variables_set){var a=r.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","variables_set"),a.setAttribute("gap",Ut.math_change?"8":"24"),a.appendChild(zo(o)),n.push(a)}if(Ut.math_change&&(a=r.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","math_change"),a.setAttribute("gap",Ut.variables_get?"20":"8"),a.appendChild(zo(o)),o=r.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),a.appendChild(o),n.push(a)),Ut.variables_get){e.sort(ql);for(let d=0,p;p=e[d];d++)o=r.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","variables_get"),o.setAttribute("gap","8"),o.appendChild(zo(p)),n.push(o)}}return n},yT=function(e){return JR.generateUniqueNameInternal(e)},qI=function(e){return Qh(zg.charAt(0),e.getVariableMap().getAllVariables().map(n=>n.getName()))},Qh=function(e,n){if(!n.length)return e;const o=zg;let a="",d=o.indexOf(e);for(;;){let p=!1;for(let C=0;C<n.length;C++)if(n[C].toLowerCase()===e){p=!0;break}if(!p)break;d++,d===o.length&&(d=0,a=`${Number(a)+1}`),e=o.charAt(d)+a}return e},jo=function(e,n,o){function a(p){ed(r.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,p,function(C){if(C){var X=kT(C,e);if(X){if(X.getType()===d)var Ie=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",X.getName());else Ie=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Ie=Ie.replace("%1",X.getName()).replace("%2",X.getType());Nc(Ie,function(){a(C)})}else e.getVariableMap().createVariable(C,d),n&&n(C)}else n&&n(null)})}const d=o||"";a("")},r.renameVariable$$module$build$src$core$variables=function(e,n,o){function a(d){const p=r.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",n.getName());ed(p,d,function(C){if(C){var X=ZI(C,n.getType(),e),Ie=wT(n.getName(),C,e);if(X||Ie){var Ke="";X?Ke=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",X.getName()).replace("%2",X.getType()):Ie&&(Ke=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",C).replace("%2",Ie)),Nc(Ke,function(){a(C)})}else e.getVariableMap().renameVariable(n,C),o&&o(C)}else o&&o(null)})}a("")},ed=function(e,n,o){Kh(e,n,function(a){a&&(a=a.replace(/[\s\xa0]+/g," ").trim(),a===r.Msg$$module$build$src$core$msg.RENAME_VARIABLE||a===r.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(a=null),o(a)})},ZI=function(e,n,o){o=o.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let a=0,d;d=o[a];a++)if(d.getName().toLowerCase()===e&&d.getType()!==n)return d;return null},kT=function(e,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let o=0,a;a=n[o];o++)if(a.getName().toLowerCase()===e)return a;return null},wT=function(e,n,o){return o.getProcedureMap().getProcedures().length?QI(e,n,o):eO(e,n,o)},QI=function(e,n,o){e=e.toLowerCase(),n=n.toLowerCase(),o=o.getProcedureMap().getProcedures();for(const d of o){var a=d.getParameters().filter(xT).map(p=>p.getVariableModel().getName());if(a&&(o=a.some(p=>p.toLowerCase()===e),a=a.some(p=>p.toLowerCase()===n),o&&a))return d.getName()}return null},eO=function(e,n,o){e=e.toLowerCase(),n=n.toLowerCase(),o=o.getAllBlocks(!1);for(const d of o){if(!Jl(d))continue;o=d.getProcedureDef();var a=o[1];const p=a.some(C=>C.toLowerCase()===e);if(a=a.some(C=>C.toLowerCase()===n),p&&a)return o[0]}return null},zo=function(e){const n=r.createElement$$module$build$src$core$utils$xml("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.getType()),e=r.createTextNode$$module$build$src$core$utils$xml(e.getName()),n.appendChild(e),n},r.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,n,o,a){let d=r.getVariable$$module$build$src$core$variables(e,n,o,a);return d||(d=tO(e,n,o,a)),d},r.getVariable$$module$build$src$core$variables=function(e,n,o,a){const d=e.getPotentialVariableMap();let p=null;if(n&&(p=e.getVariableById(n),!p&&d&&(p=d.getVariableById(n)),p))return p;if(o){if(a===void 0)throw Error("Tried to look up a variable by name without a type");p=e.getVariable(o,a),!p&&d&&(p=d.getVariable(o,a))}return p},tO=function(e,n,o,a){const d=e.getVariableMap(),p=e.getPotentialVariableMap();return o||(o=yT(e.isFlyout?e.targetWorkspace:e)),p?p.createVariable(o,a,n??void 0):d.createVariable(o,a,n)},bc=function(e,n){e=e.getAllVariables();const o=[];if(n.length!==e.length)for(let a=0;a<e.length;a++){const d=e[a];n.includes(d)||o.push(d)}return o},ql=function(e,n){return e.getName().localeCompare(n.getName(),void 0,{sensitivity:"base"})},Zl=function(e,n){const o=[];e=e.getAllBlocks(!1);for(let a=0;a<e.length;a++){const d=e[a].getVarModels();if(d)for(let p=0;p<d.length;p++)d[p].getId()===n&&o.push(e[a])}return o},r.deleteVariable$$module$build$src$core$variables=function(e,n,o){var a=n.getName();const d=Zl(e,n.getId());for(let p=d.length-1;p>=0;p--){const C=d[p];if(C.type==="procedures_defnoreturn"||C.type==="procedures_defreturn"){o=String(C.getFieldValue("NAME")),a=r.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",a).replace("%2",o),Nc(a);return}C===o&&d.splice(p,1)}o&&d.length||d.length>1?(a=r.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length+(o&&!o.workspace.isFlyout?1:0))).replace("%2",a),Yh(a,p=>{p&&n&&e.getVariableMap().deleteVariable(n)})):e.getVariableMap().deleteVariable(n)},ss=function(e,{addCoordinates:n=!1,addInputBlocks:o=!0,addNextBlocks:a=!0,doFullSerialization:d=!0,saveIds:p=!0}={}){if(e.isInsertionMarker())return null;const C={type:e.type,id:p?e.id:void 0};return n&&nO(e,C),rO(e,C),sO(e,C,d),iO(e,C,d),oO(e,C,d),o&&lO(e,C,d,p),a&&aO(e,C,d,p),C},rO=function(e,n){e.isCollapsed()&&(n.collapsed=!0),e.isEnabled()||(n.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(n.deletable=!1),e.isOwnMovable()||(n.movable=!1),e.isOwnEditable()||(n.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(n.inline=e.inputsInline),e.data&&(n.data=e.data)},nO=function(e,n){const o=e.workspace;e=e.getRelativeToSurfaceXY(),n.x=Math.round(o.RTL?o.getWidth()-e.x:e.x),n.y=Math.round(e.y)},sO=function(e,n,o){e.saveExtraState?(e=e.saveExtraState(o),e!==null&&(n.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(n.extraState=Ys(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},iO=function(e,n,o){const a=Object.create(null);for(const d of e.getIcons())xc(d)&&(e=d.saveState(o))&&(a[d.getType().toString()]=e);Object.keys(a).length&&(n.icons=a)},oO=function(e,n,o){const a=Object.create(null);for(const d of e.getFields())d.isSerializable()&&(a[d.name]=d.saveState(o));Object.keys(a).length&&(n.fields=a)},lO=function(e,n,o,a){const d=Object.create(null);for(let p=0;p<e.inputList.length;p++){const C=e.inputList[p];if(!C.connection)continue;const X=MT(C.connection,o,a);X&&(d[C.name]=X)}Object.keys(d).length&&(n.inputs=d)},aO=function(e,n,o,a){e.nextConnection&&(e=MT(e.nextConnection,o,a))&&(n.next=e)},MT=function(e,n,o){const a=e.getShadowState(!0);if(e=e.targetBlock(),!a&&!e)return null;const d=Object.create(null);return a&&(d.shadow=a),e&&!e.isShadow()&&(d.block=ss(e,{doFullSerialization:n,saveIds:o})),d},Qi=function(e,n,{recordUndo:o=!1}={}){return e=Ql(e,n,{recordUndo:o}),n.rendered&&Zi(),e},Ql=function(e,n,{parentConnection:o,isShadow:a=!1,recordUndo:d=!1}={}){const p=K();r.setRecordUndo$$module$build$src$core$events$utils(d),(d=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0),r.disable$$module$build$src$core$events$utils();const C=n.getAllVariables();let X;try{X=DT(e,n,{parentConnection:o,isShadow:a})}finally{r.enable$$module$build$src$core$events$utils()}if(cO(n,C),he()&&z(new(ce(de.BLOCK_CREATE))(X)),r.setGroup$$module$build$src$core$events$utils(d),r.setRecordUndo$$module$build$src$core$events$utils(p),n.rendered){const Ie=X;setTimeout(()=>{Ie.disposed||Ie.setConnectionTracking(!0)},1)}return X},DT=function(e,n,{parentConnection:o,isShadow:a=!1}={}){if(!e.type)throw new qR(e);const d=n.newBlock(e.type,e.id);return d.setShadow(a),uO(d,e),hO(d,e),dO(d,e),fO(o,d,e),_O(d,e),TO(d,e),pO(d,e),gO(d,e),EO(d,n.rendered),d},cO=function(e,n){if(he())for(e=bc(e,n),n=0;n<e.length;n++){const o=e[n];z(new(ce(de.VAR_CREATE))(o))}},uO=function(e,n){let o=n.x===void 0?0:n.x;n=n.y===void 0?0:n.y;const a=e.workspace;o=a.RTL?a.getWidth()-o:o,e.moveBy(o,n)},hO=function(e,n){if(n.collapsed&&e.setCollapsed(!0),n.deletable===!1&&e.setDeletable(!1),n.movable===!1&&e.setMovable(!1),n.editable===!1&&e.setEditable(!1),n.enabled===!1&&e.setDisabledReason(!0,os),Array.isArray(n.disabledReasons))for(const o of n.disabledReasons)e.setDisabledReason(!0,o);n.inline!==void 0&&e.setInputsInline(n.inline),n.data!==void 0&&(e.data=n.data)},dO=function(e,n){n.extraState&&(e.loadExtraState?e.loadExtraState(n.extraState):e.domToMutation&&e.domToMutation(r.textToDom$$module$build$src$core$utils$xml(n.extraState)))},fO=function(e,n,o){if(e){if(e.getSourceBlock().isShadow()&&!n.isShadow())throw new QR(o);if(e.type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var a=n.outputConnection;if(!a)throw new eu("output",n,o)}else if(a=n.previousConnection,!a)throw new eu("previous",n,o);if(!e.connect(a)){const d=n.workspace.connectionChecker;throw new ZR(d.getErrorMessage(d.canConnectWithReason(a,e,!1),a,e),e.type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",n,o)}}},_O=function(e,n){if(n.icons){var o=Object.keys(n.icons);for(const d of o){o=n.icons[d];var a=e.getIcon(d);if(!a){if(a=f(Le.ICON,d,!1),!a)throw new eL(d,e,n);a=new a(e),e.addIcon(a)}xc(a)&&a.loadState(o)}}},TO=function(e,n){if(n.fields){var o=Object.keys(n.fields);for(let a=0;a<o.length;a++){const d=o[a],p=n.fields[d],C=e.getField(d);C?C.loadState(p):console.warn(`Ignoring non-existant field ${d} in block ${e.type}`)}}},pO=function(e,n){if(n.inputs){var o=Object.keys(n.inputs);for(let a=0;a<o.length;a++){const d=o[a],p=e.getInput(d);if(!p||!p.connection)throw new eu(d,e,n);PT(p.connection,n.inputs[d])}}},gO=function(e,n){if(n.next){if(!e.nextConnection)throw new eu("next",e,n);PT(e.nextConnection,n.next)}},PT=function(e,n){n.shadow&&e.setShadowState(n.shadow),n.block&&DT(n.block,e.getSourceBlock().workspace,{parentConnection:e})},EO=function(e,n){if(n){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const o of e.getIcons())o.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},Yo=function(e){return typeof e.bubbleIsVisible=="function"&&typeof e.setBubbleVisible=="function"&&typeof e.getBubble=="function"},td=function(e){return e*Math.PI/180},mO=function(e){return e*180/Math.PI},ea=function(e,n,o){if(o<e){const a=o;o=e,e=a}return Math.max(e,Math.min(n,o))},rd=function(){document.querySelector(".blocklyDropDownDiv")||(qt=document.createElement("div"),qt.className="blocklyDropDownDiv",qt.tabIndex=-1,(Et()||document.body).appendChild(qt),ru=document.createElement("div"),ru.className="blocklyDropDownContent",qt.appendChild(ru),Jd=A(ru,"keydown",null,ae),cl=document.createElement("div"),cl.className="blocklyDropDownArrow",qt.appendChild(cl),qt.style.opacity="0",qt.style.transition="transform "+Yd+"s, opacity "+Yd+"s")},FT=function(e){Jg=e},BT=function(){return lo},nd=function(){return ru},sd=function(){Jd&&(y(Jd),Jd=null),qt.remove(),rd()},UT=function(e,n){qt.style.backgroundColor=e,qt.style.borderColor=n},$O=function(e,n,o,a,d=!0){return WT(GT(n),e,d,o,a)},HT=function(e,n,o,a=!0){return oL=!0,WT(VT(e),e,a,n,o)},GT=function(e){var n=e.getSvgRoot();const o=e.workspace.scale,a=e.height*o;return e=e.width*o,n=Gs(n),new it(n.y,n.y+a,n.x,n.x+e)},VT=function(e){return e=e.getScaledBBox(),new it(e.top,e.bottom,e.left,e.right)},WT=function(e,n,o,a,d){const p=e.left+(e.right-e.left)/2,C=e.bottom;e=e.top,d&&(e+=d),d=n.getSourceBlock();let X=d.workspace;for(;X.options.parentWorkspace;)X=X.options.parentWorkspace;return FT(X.getParentSvg().parentNode),XT(n,d.RTL,p,C,p,e,o,a)},XT=function(e,n,o,a,d,p,C,X){return lo=e,al=X||null,qt.style.direction=n?"rtl":"ltr",e=I(),sL=e.getRenderer().getClassName(),iL=e.getTheme().getClassName(),fe(qt,sL),fe(qt,iL),o=KT(o,a,d,p),C&&(Kd=r.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(qt)),o},jT=function(e,n,o,a){return e=yc(e,o.left,o.right,a.width),{initialX:e.divX,initialY:n,finalX:e.divX,finalY:n+Yg,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},zT=function(e,n,o,a){return e=yc(e,o.left,o.right,a.width),{initialX:e.divX,initialY:n-a.height,finalX:e.divX,finalY:n-a.height-Yg,arrowX:e.arrowX,arrowY:a.height-rL*2-zd/2,arrowAtTop:!1,arrowVisible:!0}},IO=function(e,n,o){return e=yc(e,n.left,n.right,o.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},yc=function(e,n,o,a){return n=ea(n,e-a/2,o-a),e=e-zd/2-n,o=nL,e=ea(o,e,a-o-zd),{arrowX:e,divX:n}},YT=function(){return!!lo},id=function(e,n){return lo===e?(n?zs():od(),!0):!1},od=function(){qt.style.transform="translate(0, 0)",qt.style.opacity="0",Kg=setTimeout(function(){zs()},Yd*1e3),al&&(al(),al=null)},zs=function(){YT()&&(Kg&&clearTimeout(Kg),al&&(al(),al=null),sd(),lo=null,I().markFocused(),Kd&&(Kd(),Kd=null))},KT=function(e,n,o,a){e=qg.getPositionMetrics(e,n,o,a),e.arrowVisible?(n=e.arrowX,o=e.arrowY,a=e.arrowAtTop?45:225,cl.style.display="",cl.style.transform=`translate(${n}px, ${o}px) rotate(${a}deg)`,cl.setAttribute("class","blocklyDropDownArrow")):cl.style.display="none",n=Math.floor(e.initialX),o=Math.floor(e.initialY),a=Math.floor(e.finalX);const d=Math.floor(e.finalY);return qt.style.left=n+"px",qt.style.top=o+"px",qt.style.display="block",qt.style.opacity="1",qt.style.transform="translate("+(a-n)+"px,"+(d-o)+"px)",!!e.arrowAtTop},JT=function(){if(lo){var e=lo.getSourceBlock();e=oL?VT(lo):GT(e);const n=e.left+(e.right-e.left)/2;KT(n,e.bottom,n,e.top)}else od()},kc=function(e){return e.length?e.reduce(function(n,o){return n.length<o.length?n:o}).length:0},qT=function(e,n){if(!e.length)return 0;if(e.length===1)return e[0].length;let o=0;n=n||kc(e);let a;for(a=0;a<n;a++){for(var d=e[0][a],p=1;p<e.length;p++)if(d!==e[p][a])return o;d===" "&&(o=a+1)}for(d=1;d<e.length;d++)if((p=e[d][a])&&p!==" ")return o;return n},ZT=function(e,n){if(!e.length)return 0;if(e.length===1)return e[0].length;let o=0;n=n||kc(e);let a;for(a=0;a<n;a++){for(var d=e[0].substr(-a-1,1),p=1;p<e.length;p++)if(d!==e[p].substr(-a-1,1))return o;d===" "&&(o=a+1)}for(d=1;d<e.length;d++)if((p=e[d].charAt(e[d].length-a-1))&&p!==" ")return o;return n},r.wrap$$module$build$src$core$utils$string=function(e,n){e=e.split(`
`);for(let o=0;o<e.length;o++)e[o]=OO(e[o],n);return e.join(`
`)},OO=function(e,n){if(e.length<=n)return e;const o=e.trim().split(/\s+/);for(var a=0;a<o.length;a++)o[a].length>n&&(n=o[a].length);var d=-1/0;let p,C=1;do{a=d,p=e,e=[],d=o.length/C;let X=1;for(let Ie=0;Ie<o.length-1;Ie++)X<(Ie+1.5)/d?(X++,e[Ie]=!0):e[Ie]=!1;e=QT(o,e,n),d=ld(o,e,n),e=SO(o,e),C++}while(d>a);return p},ld=function(e,n,o){const a=[0],d=[];for(var p=0;p<e.length;p++)a[a.length-1]+=e[p].length,n[p]===!0?(a.push(0),d.push(e[p].charAt(e[p].length-1))):n[p]===!1&&a[a.length-1]++;for(e=Math.max(...a),n=0,p=0;p<a.length;p++)n-=Math.pow(Math.abs(o-a[p]),1.5)*2,n-=Math.pow(e-a[p],1.5),".?!".includes(d[p])?n+=o/3:",;)]}".includes(d[p])&&(n+=o/4);return a.length>1&&a[a.length-1]<=a[a.length-2]&&(n+=.5),n},QT=function(e,n,o){let a=ld(e,n,o),d;for(let p=0;p<n.length-1;p++){if(n[p]===n[p+1])continue;const C=[].concat(n);C[p]=!C[p],C[p+1]=!C[p+1];const X=ld(e,C,o);X>a&&(a=X,d=C)}return d?QT(e,d,o):n},SO=function(e,n){const o=[];for(let a=0;a<e.length;a++)o.push(e[a]),n[a]!==void 0&&o.push(n[a]?`
`:" ");return o.join("")},r.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},RO=function(e){qd=e},LO=function(){return qd},AO=function(){return nu},vO=function(){return Er},ta=function(e){if(e=ep(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},ep=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},tp=function(){document.querySelector(".blocklyTooltipDiv")||(Er=document.createElement("div"),Er.className="blocklyTooltipDiv",(Et()||document.body).appendChild(Er))},wc=function(e){e.mouseOverWrapper_=m(e,"pointerover",null,CO),e.mouseOutWrapper_=m(e,"pointerout",null,xO),e.addEventListener("pointermove",np,!1)},rp=function(e){e&&(y(e.mouseOverWrapper_),y(e.mouseOutWrapper_),e.removeEventListener("pointermove",np))},CO=function(e){Ea||(e=ep(e.currentTarget),ls!==e&&(Ii(),su=null,ls=e),clearTimeout(aL))},xO=function(e){Ea||(aL=setTimeout(function(){su=ls=null,Ii()},1),clearTimeout(ul),ul=0)},np=function(e){if(ls&&ls.tooltip&&!Ea)if(nu){const n=Zg-e.pageX;e=Qg-e.pageY,Math.sqrt(n*n+e*e)>cL&&Ii()}else su!==ls&&(clearTimeout(ul),Zg=e.pageX,Qg=e.pageY,ul=setTimeout(kO,uL))},sp=function(){su=ls=null,Ii()},Ii=function(){nu&&(nu=!1,Er&&(Er.style.display="none")),ul&&(clearTimeout(ul),ul=0)},ip=function(){Ii(),Ea=!0},op=function(){Ea=!1},NO=function(){Er&&ls&&(typeof qd=="function"?qd(Er,ls):bO())},bO=function(){var e=ta(ls);e=r.wrap$$module$build$src$core$utils$string(e,lL),e=e.split(`
`);for(let n=0;n<e.length;n++){const o=document.createElement("div");o.appendChild(document.createTextNode(e[n])),Er.appendChild(o)}},yO=function(e){const n=document.documentElement.clientWidth,o=document.documentElement.clientHeight;let a=Zg;a=e?a-(eE+Er.offsetWidth):a+eE;let d=Qg+tE;return d+Er.offsetHeight>o+window.scrollY&&(d-=Er.offsetHeight+2*tE),e?a=Math.max(Zd-window.scrollX,a):a+Er.offsetWidth>n+window.scrollX-2*Zd&&(a=n-Er.offsetWidth-2*Zd),{x:a,y:d}},kO=function(){if(!Ea&&(su=ls,Er)){Er.textContent="",NO();var e=ls.RTL;Er.style.direction=e?"rtl":"ltr",Er.style.display="block",nu=!0;var{x:n,y:o}=yO(e);Er.style.left=n+"px",Er.style.top=o+"px"}},lp=function(){return rE},wO=function(e){rE=e},ap=function(){return nE},MO=function(e){nE=e},Ko=function(e){e=`${e}`.toLowerCase().trim();var n=hL[e];if(n||(n=e.substring(0,2)==="0x"?"#"+e.substring(2):e,n=n[0]==="#"?n:"#"+n,/^#[0-9a-f]{6}$/.test(n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(e=Number(o[1]),n=Number(o[2]),o=Number(o[3]),e>=0&&e<256&&n>=0&&n<256&&o>=0&&o<256)?Mc(e,n,o):null},Mc=function(e,n,o){return n=e<<16|n<<8|o,e<16?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},ad=function(e){return e=Ko(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},cd=function(e,n,o){let a=0,d=0,p=0;if(n===0)p=d=a=o;else{const C=Math.floor(e/60),X=e/60-C;e=o*(1-n);const Ie=o*(1-n*X);switch(n=o*(1-n*(1-X)),C){case 1:a=Ie,d=o,p=e;break;case 2:a=e,d=o,p=n;break;case 3:a=e,d=Ie,p=o;break;case 4:a=n,d=e,p=o;break;case 5:a=o,d=e,p=Ie;break;case 6:case 0:a=o,d=n,p=e}}return Mc(Math.floor(a),Math.floor(d),Math.floor(p))},Jo=function(e,n,o){return e=Ko(e),!e||(n=Ko(n),!n)?null:(e=ad(e),n=ad(n),Mc(Math.round(n[0]+o*(e[0]-n[0])),Math.round(n[1]+o*(e[1]-n[1])),Math.round(n[2]+o*(e[2]-n[2]))))},cp=function(e){return cd(e,rE,nE*255)},ud=function(e,n,o){const a=[];var d=e.split("");d.push("");var p=0;e=[];let C=null;for(let Ke=0;Ke<d.length;Ke++){var X=d[Ke];if(p===0)if(X==="%")(p=e.join(""))&&a.push(p),e.length=0,p=1;else if(o&&X===`
`){const jt=e.join("");jt&&a.push(jt),e.length=0,a.push(X)}else e.push(X);else if(p===1)X==="%"?(e.push(X),p=0):n&&"0"<=X&&X<="9"?(p=2,C=X,(X=e.join(""))&&a.push(X),e.length=0):X==="{"?p=3:(e.push("%",X),p=0);else if(p===2)if("0"<=X&&X<="9")C+=X;else{var Ie=void 0;a.push(parseInt((Ie=C)!=null?Ie:"",10)),Ke--,p=0}else p===3&&(X===""?(e.splice(0,0,"%{"),Ke--,p=0):X!=="}"?e.push(X):(p=e.join(""),/[A-Z]\w*/i.test(p)?(X=p.toUpperCase(),(X=X.startsWith("BKY_")?X.substring(4):null)&&X in r.Msg$$module$build$src$core$msg?(p=r.Msg$$module$build$src$core$msg[X],typeof p=="string"?Array.prototype.push.apply(a,ud(p,n,o)):n?a.push(`${p}`):a.push(p)):a.push("%{"+p+"}")):a.push("%{"+p+"}"),p=e.length=0))}for((n=e.join(""))&&a.push(n),Ie=[],e.length=0,d=0;d<a.length;d++)typeof a[d]!="string"||o&&a[d]===`
`?((n=e.join(""))&&Ie.push(n),e.length=0,Ie.push(a[d])):e.push(a[d]);return(n=e.join(""))&&Ie.push(n),e.length=0,Ie},up=function(e){return ud(e,!0,!0)},rr=function(e){return typeof e!="string"?e:(e=ud(e,!1,!1),e.length?String(e[0]):"")},DO=function(e){let n=!0;const o=r.Msg$$module$build$src$core$msg,a=e.match(/%{BKY_[A-Z]\w*}/gi);if(a)for(let d=0;d<a.length;d++){const p=a[d].toUpperCase();o[p.slice(6,-1)]===void 0&&(console.warn("No message string for "+a[d]+" in "+e),n=!1)}return n},ra=function(e){const n=typeof e=="string"?rr(e):e;var o=Number(n);if(!isNaN(o)&&0<=o&&o<=360)return{hue:o,hex:cd(o,lp(),ap()*255)};if(o=Ko(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',e!==n&&(o+=' (from "'+e+'")'),Error(o)},na=function(){return Hn},PO=function(e){if(Hn=e,e===null){let n;(n=document.querySelector("."+sE))==null||n.remove()}},hp=function(){const e=Et()||document.body,n=document.querySelector("div."+sE);n?Hn=n:(Hn=document.createElement("div"),Hn.className=sE,Hn.tabIndex=-1),A(Hn,"keydown",null,ae),e.appendChild(Hn)},hd=function(e,n,o,a,d=!0){if(sa(),ma=e,Qd=o,o=Hn){if(o.style.direction=n?"rtl":"ltr",o.style.display="block",!a&&e instanceof Lt){let X;a=(X=e.getSourceBlock())==null?void 0:X.workspace}var p;dL=(p=a)!=null?p:null;var C;e=(C=a)!=null?C:I(),$a=e.getRenderer().getClassName(),Ia=e.getTheme().getClassName(),$a&&fe(o,$a),Ia&&fe(o,Ia),d&&(ef=r.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(o))}},sa=function(){if(dp()){ma=null;var e=Hn;e&&(e.style.display="none",e.style.left="",e.style.top="",Qd&&(Qd(),Qd=null),e.textContent="",$a&&(Me(e,$a),$a=""),Ia&&(Me(e,Ia),Ia=""),I().markFocused(),ef&&(ef(),ef=null))}},dp=function(){return!!ma},qo=function(e){ma===e&&sa()},Dc=function(e){let n=dL===null,o=e;for(;!n&&o;){if(o===e){n=!0;break}o=e.options.parentWorkspace}n&&sa()},fp=function(e,n,o){Hn.style.left=e+"px",Hn.style.top=n+"px",Hn.style.height=o+"px"},_p=function(e,n,o,a){const d=BO(e,n,o);e=FO(e,n,o,a),d<0?fp(e,0,o.height+d):fp(e,d,o.height)},FO=function(e,n,o,a){return a?Math.min(Math.max(n.right-o.width,e.left),e.right-o.width):Math.max(Math.min(n.left,e.right-o.width),e.left)},BO=function(e,n,o){return n.bottom+o.height>=e.bottom?n.top-o.height:n.bottom},UO=function(e){return!(e==null||!e.repositionForWindowResize)},Tp=function(){UO(ma)&&ma.repositionForWindowResize()||sa()},HO=function(){return tf},pp=function(e){tf=e},ia=function(e,n,o,a,d){if(hd(fL,o,gp,a),n.length){d||(e instanceof PointerEvent?d=new Ne(e.clientX,e.clientY):(console.warn("Context menu opened with keyboard but no location given"),d=new Ne(0,0)));var p=GO(n,o,e,d);rf=p,VO(p,o,d),setTimeout(function(){p.focus()},1),tf=null}else Pc()},GO=function(e,n,o,a){const d=new Hg;d.setRole(Bn.MENU);for(let p=0;p<e.length;p++){const C=e[p];if(C.separator){d.addChild(new MR);continue}const X=new Gd(C.text);X.setRightToLeft(n),X.setRole(Bn.MENUITEM),d.addChild(X),X.setEnabled(C.enabled),C.enabled&&X.onAction(function(Ie,Ke){Pc(),requestAnimationFrame(()=>{setTimeout(()=>{C.callback(C.scope,o,Ke,a)},0)})},{})}return d},VO=function(e,n,o){const a=j();o=new it(o.y+a.top,o.y+a.top,o.x+a.left,o.x+a.left),WO(e);const d=e.getSize();n&&(o.left+=d.width,o.right+=d.width,a.left+=d.width,a.right+=d.width),_p(a,o,d,n),e.focus()},WO=function(e){var n=na();if(!n)throw Error("Attempting to create a context menu when widget div is null");n=e.render(n),fe(n,"blocklyContextMenu"),A(n,"contextmenu",null,XO),e.focus()},XO=function(e){e.preventDefault(),e.stopPropagation()},Pc=function(){qo(fL),tf=null},gp=function(){rf&&(rf.dispose(),rf=null)},r.callbackFactory$$module$build$src$core$contextmenu=function(e,n){return()=>{r.disable$$module$build$src$core$events$utils();let o;try{o=n instanceof Element?Zo(n,e.workspace):Ql(n,e.workspace);const a=e.getRelativeToSurfaceXY();a.x=e.RTL?a.x-r.config$$module$build$src$core$config.snapRadius:a.x+r.config$$module$build$src$core$config.snapRadius,a.y+=r.config$$module$build$src$core$config.snapRadius*2,o.moveBy(a.x,a.y)}finally{r.enable$$module$build$src$core$events$utils()}return he()&&!o.isShadow()&&z(new(ce(de.BLOCK_CREATE))(o)),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(o),o}},Ep=function(e,n){return n=k(n,e.getParentSvg(),e.getInverseScreenCTM()),n.x/=e.scale,n.y/=e.scale,n},dd=function(e,n,o){n=Ep(e,n),TL.set(e,Ne.difference(o,n))},fd=function(e,n){if(n=Ep(e,n),e=TL.get(e),!e)throw Error("Drag not initialized");return Ne.sum(e,n)},jO=function(e,n=!1){const o=r.createElement$$module$build$src$core$utils$xml("xml");var a=mp(r.allUsedVarModels$$module$build$src$core$variables(e));a.hasChildNodes()&&o.appendChild(a);for(const d of e.getTopComments())o.appendChild(Fc(d,n));for(e=e.getTopBlocks(!0),a=0;a<e.length;a++)o.appendChild(Bc(e[a],n));return o},Fc=function(e,n=!1){const o=r.createElement$$module$build$src$core$utils$xml("comment");n||o.setAttribute("id",e.id),n=e.workspace;const a=e.getRelativeToSurfaceXY().clone();return a.x=n.RTL?n.getWidth()-a.x:a.x,o.setAttribute("x",`${a.x}`),o.setAttribute("y",`${a.y}`),o.setAttribute("w",`${e.getSize().width}`),o.setAttribute("h",`${e.getSize().height}`),e.getText()&&(o.textContent=e.getText()),e.isCollapsed()&&o.setAttribute("collapsed","true"),e.isOwnEditable()||o.setAttribute("editable","false"),e.isOwnMovable()||o.setAttribute("movable","false"),e.isOwnDeletable()||o.setAttribute("deletable","false"),o},mp=function(e){const n=r.createElement$$module$build$src$core$utils$xml("variables");for(let o=0;o<e.length;o++){const a=e[o],d=r.createElement$$module$build$src$core$utils$xml("variable");d.appendChild(r.createTextNode$$module$build$src$core$utils$xml(a.getName())),a.getType()&&d.setAttribute("type",a.getType()),d.id=a.getId(),n.appendChild(d)}return n},Bc=function(e,n){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let o=0;if(e.workspace.RTL&&(o=e.workspace.getWidth()),n=eo(e,n),Rp(n)){const a=e.getRelativeToSurfaceXY();n.setAttribute("x",String(Math.round(e.workspace.RTL?o-a.x:a.x))),n.setAttribute("y",String(Math.round(a.y)))}return n},zO=function(e){if(e.isSerializable()){const n=r.createElement$$module$build$src$core$utils$xml("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},YO=function(e,n){for(const o of e.getFields())(e=zO(o))&&n.appendChild(e)},eo=function(e,n){if(e.isInsertionMarker())return(n=e.getChildren(!1)[0])?eo(n):new DocumentFragment;const o=r.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(o.setAttribute("type",e.type),n||(o.id=e.id),e.mutationToDom){var a=e.mutationToDom();a&&(a.hasChildNodes()||a.hasAttributes())&&o.appendChild(a)}if(YO(e,o),a=e.getCommentText()){var d=e.getIcon(gr.COMMENT),p=d.getBubbleSize(),C=d.bubbleIsVisible();d=d.getBubbleLocation();var X=r.createElement$$module$build$src$core$utils$xml("comment");X.appendChild(r.createTextNode$$module$build$src$core$utils$xml(a)),X.setAttribute("pinned",`${C}`),X.setAttribute("h",`${p.height}`),X.setAttribute("w",`${p.width}`),d&&(X.setAttribute("x",`${e.workspace.RTL?e.workspace.getWidth()-(d.x+p.width):d.x}`),X.setAttribute("y",`${d.y}`)),o.appendChild(X)}for(e.data&&(a=r.createElement$$module$build$src$core$utils$xml("data"),a.appendChild(r.createTextNode$$module$build$src$core$utils$xml(e.data)),o.appendChild(a)),a=0;a<e.inputList.length;a++){p=e.inputList[a];var Ie=void 0;C=!0,p.type!==r.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&p.type!==r.inputTypes$$module$build$src$core$inputs$input_types.END_ROW&&(d=p.connection.targetBlock(),p.type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE?Ie=r.createElement$$module$build$src$core$utils$xml("value"):p.type===r.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(Ie=r.createElement$$module$build$src$core$utils$xml("statement")),X=p.connection.getShadowDom(),!X||d&&d.isShadow()||Ie.appendChild($p(X,n)),d&&(d=eo(d,n),d.nodeType===Li.ELEMENT_NODE&&(Ie.appendChild(d),C=!1)),Ie.setAttribute("name",p.name),C||o.appendChild(Ie))}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&o.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&o.setAttribute("collapsed","true"),e.isEnabled()||o.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||o.setAttribute("deletable","false"),e.isOwnMovable()||o.setAttribute("movable","false"),e.isOwnEditable()||o.setAttribute("editable","false"),Ie=e.getNextBlock();let Ke;return Ie&&(a=eo(Ie,n),a.nodeType===Li.ELEMENT_NODE&&(Ke=r.createElement$$module$build$src$core$utils$xml("next"),Ke.appendChild(a),o.appendChild(Ke))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||Ie&&Ie.isShadow()||Ke.appendChild($p(e,n)),o},$p=function(e,n){let o=e=e.cloneNode(!0),a;for(;o;)if(n&&o.nodeName==="shadow"&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;){a=o,o=o.parentNode;let d;a.nodeType===Li.TEXT_NODE&&a.data.trim()===""&&((d=o)==null?void 0:d.firstChild)!==a&&Ce(a)}o&&(a=o,o=o.nextSibling,a.nodeType===Li.TEXT_NODE&&a.data.trim()===""&&Ce(a))}return e},Ys=function(e){return ge(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},KO=function(e){e=Ys(e).split("<");let n="";for(let o=1;o<e.length;o++){const a=e[o];a[0]==="/"&&(n=n.substring(2)),e[o]=n+"<"+a,a[0]!=="/"&&a.slice(-2)!=="/>"&&(n+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},JO=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=r.domToWorkspace$$module$build$src$core$xml(e,n),n.setResizesEnabled(!0),e},r.domToWorkspace$$module$build$src$core$xml=function(e,n){let o=0;n.RTL&&(o=n.getWidth());const a=[];tr();const d=r.getGroup$$module$build$src$core$events$utils();d||r.setGroup$$module$build$src$core$events$utils(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);let p=!0;try{for(let C=0,X;X=e.childNodes[C];C++){const Ie=X.nodeName.toLowerCase(),Ke=X;if(Ie==="block"||Ie==="shadow"&&!K()){const jt=Zo(Ke,n);a.push(jt.id);let yt;const Wr=parseInt((yt=Ke.getAttribute("x"))!=null?yt:"10",10);let ki;const li=parseInt((ki=Ke.getAttribute("y"))!=null?ki:"10",10);isNaN(Wr)||isNaN(li)||jt.moveBy(n.RTL?o-Wr:Wr,li,["create"]),p=!1}else{if(Ie==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Ie==="comment")Ip(Ke,n);else if(Ie==="variables"){if(p)Op(Ke,n);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");p=!1}}}}finally{r.setGroup$$module$build$src$core$events$utils(d),n.setResizesEnabled&&n.setResizesEnabled(!0),n.rendered&&Zi(),hr()}return z(new(ce(de.FINISHED_LOADING))(n)),a},Ip=function(e,n){var o;const a=(o=e.getAttribute("id"))!=null?o:void 0;o=n.rendered?new xi(n,a):new lf(n,a);var d;o.setText((d=e.textContent)!=null?d:"");var p;d=parseInt((p=e.getAttribute("x"))!=null?p:"",10);let C;p=parseInt((C=e.getAttribute("y"))!=null?C:"",10),isNaN(d)||isNaN(p)||(d=n.RTL?n.getWidth()-d:d,o.moveTo(new Ne(d,p)));var X;n=parseInt((X=e.getAttribute("w"))!=null?X:"",10);let Ie;return X=parseInt((Ie=e.getAttribute("h"))!=null?Ie:"",10),isNaN(n)||isNaN(X)||o.setSize(new lt(n,X)),e.getAttribute("collapsed")==="true"&&o.setCollapsed(!0),e.getAttribute("editable")==="false"&&o.setEditable(!1),e.getAttribute("movable")==="false"&&o.setMovable(!1),e.getAttribute("deletable")==="false"&&o.setDeletable(!1),o},qO=function(e,n){if(!n.getBlocksBoundingBox)return r.domToWorkspace$$module$build$src$core$xml(e,n);var o=n.getBlocksBoundingBox();if(e=r.domToWorkspace$$module$build$src$core$xml(e,n),o&&o.top!==o.bottom){var a=o.bottom;o=n.RTL?o.right:o.left;var d=1/0;let p=-1/0,C=1/0;for(let X=0;X<e.length;X++){const Ie=n.getBlockById(e[X]).getRelativeToSurfaceXY();Ie.y<C&&(C=Ie.y),Ie.x<d&&(d=Ie.x),Ie.x>p&&(p=Ie.x)}for(a=a-C+10,o=n.RTL?o-p:o-d,d=0;d<e.length;d++)n.getBlockById(e[d]).moveBy(o,a,["create"])}return e},r.domToBlock$$module$build$src$core$xml=function(e,n){return e=Zo(e,n),n.rendered&&Zi(),e},Zo=function(e,n){r.disable$$module$build$src$core$events$utils();var o=n.getAllVariables();let a;try{if(a=_d(e,n),n.rendered){const d=a,p=a.getDescendants(!1);d.setConnectionTracking(!1);for(let C=p.length-1;C>=0;C--)p[C].initSvg();for(let C=p.length-1;C>=0;C--)p[C].queueRender();setTimeout(function(){d.disposed||d.setConnectionTracking(!0)},1),n.resizeContents()}else{const d=a.getDescendants(!1);for(let p=d.length-1;p>=0;p--)d[p].initModel()}}finally{r.enable$$module$build$src$core$events$utils()}if(he()){for(e=bc(n,o),n=0;n<e.length;n++)o=e[n],z(new(ce(de.VAR_CREATE))(o));z(new(ce(de.BLOCK_CREATE))(a))}return a},Op=function(e,n){for(let a=0;a<e.children.length;a++){var o=e.children[a];const d=o.getAttribute("type"),p=o.getAttribute("id");if(o=o.textContent,!o)break;let C;n.getVariableMap().createVariable(o,(C=d)!=null?C:void 0,p)}},ZO=function(e){const n={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let o=0;o<e.children.length;o++){const a=e.children[o];if(a.nodeType!==Li.TEXT_NODE)switch(a.nodeName.toLowerCase()){case"mutation":n.mutation.push(a);break;case"comment":n.comment.push(a);break;case"data":n.data.push(a);break;case"title":case"field":n.field.push(a);break;case"value":case"statement":n.input.push(a);break;case"next":n.next.push(a);break;default:console.warn("Ignoring unknown tag: "+a.nodeName)}}return n},QO=function(e,n){let o=!1;for(let a=0;a<e.length;a++){const d=e[a];n.domToMutation&&(n.domToMutation(d),n.initSvg&&(o=!0))}return o},eS=function(e,n){for(let o=0;o<e.length;o++){const a=e[o],d=a.textContent,p=a.getAttribute("pinned")==="true";let C;const X=parseInt((C=a.getAttribute("w"))!=null?C:"50",10);let Ie;const Ke=parseInt((Ie=a.getAttribute("h"))!=null?Ie:"50",10);let jt,yt=parseInt((jt=a.getAttribute("x"))!=null?jt:"",10),Wr;const ki=parseInt((Wr=a.getAttribute("y"))!=null?Wr:"",10);n.setCommentText(d);const li=n.getIcon(gr.COMMENT);isNaN(X)||isNaN(Ke)||li.setBubbleSize(new lt(X,Ke)),li.setBubbleVisible(p),setTimeout(()=>{isNaN(yt)||isNaN(ki)||(yt=n.workspace.RTL?n.workspace.getWidth()-(yt+X):yt,li.setBubbleLocation(new Ne(yt,ki))),li.setBubbleVisible(p)},1)}},tS=function(e,n){for(let o=0;o<e.length;o++)n.data=e[o].textContent},rS=function(e,n){for(let o=0;o<e.length;o++){const a=e[o],d=a.getAttribute("name");d?iS(n,d,a):console.warn(`Ignoring unnamed field in block ${n.type}`)}},Sp=function(e){let n=null,o=null;for(let a=0;a<e.childNodes.length;a++){const d=e.childNodes[a];Rp(d)&&(d.nodeName.toLowerCase()==="block"?n=d:d.nodeName.toLowerCase()==="shadow"&&(o=d))}return{childBlockElement:n,childShadowElement:o}},nS=function(e,n,o,a){for(let p=0;p<e.length;p++){var d=e[p];const C=d.getAttribute("name"),X=C?o.getInput(C):null;if(!X){console.warn("Ignoring non-existent input "+C+" in block "+a);break}if(d=Sp(d),d.childBlockElement){if(!X.connection)throw TypeError("Input connection does not exist.");_d(d.childBlockElement,n,X.connection,!1)}if(d.childShadowElement){let Ie;(Ie=X.connection)==null||Ie.setShadowDom(d.childShadowElement)}}},sS=function(e,n,o){for(let a=0;a<e.length;a++){const d=Sp(e[a]);if(d.childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");_d(d.childBlockElement,n,o.nextConnection,!0)}d.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(d.childShadowElement)}},_d=function(e,n,o,a){var d;const p=e.getAttribute("type");if(!p)throw TypeError("Block type unspecified: "+e.outerHTML);var C=(d=e.getAttribute("id"))!=null?d:void 0;d=n.newBlock(p,C),C=ZO(e);const X=QO(C.mutation,d);if(eS(C.comment,d),tS(C.data,d),o)if(a)if(d.previousConnection)o.connect(d.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(d.outputConnection)o.connect(d.outputConnection);else if(d.previousConnection)o.connect(d.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(rS(C.field,d),nS(C.input,n,d,p),sS(C.next,n,d),X&&d.initSvg(),(n=e.getAttribute("inline"))&&d.setInputsInline(n==="true"),(n=e.getAttribute("disabled"))&&d.setDisabledReason(n==="true"||n==="disabled",os),n=e.getAttribute("disabled-reasons"),n!==null)for(var Ie of n.split(","))d.setDisabledReason(!0,decodeURIComponent(Ie));if((Ie=e.getAttribute("deletable"))&&d.setDeletable(Ie==="true"),(Ie=e.getAttribute("movable"))&&d.setMovable(Ie==="true"),(Ie=e.getAttribute("editable"))&&d.setEditable(Ie==="true"),(Ie=e.getAttribute("collapsed"))&&d.setCollapsed(Ie==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=d.getChildren(!1),Ie=0;Ie<e.length;Ie++)if(!e[Ie].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");d.setShadow(!0)}return d},iS=function(e,n,o){const a=e.getField(n);a?a.fromXml(o):console.warn("Ignoring non-existent field "+n+" in block "+e.type)},oS=function(e){for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(o.nodeName.toLowerCase()==="next"){e.removeChild(o);break}}},Rp=function(e){return e.nodeType===Li.ELEMENT_NODE},Ks=function(e,n){i(Le.FIELD,e,n,!0)},lS=function(e){c(Le.FIELD,e)},r.fromJson$$module$build$src$core$field_registry=function(e){return $L.fromJsonInternal(e)},aS=function(e){const n=_(Le.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},oa=function(e){return e&&typeof e=="object"&&"src"in e&&typeof e.src=="string"&&"alt"in e&&typeof e.alt=="string"&&"width"in e&&typeof e.width=="number"&&"height"in e&&typeof e.height=="number"},r.register$$module$build$src$core$extensions=function(e,n){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(Oa[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof n!="function")throw Error('Error: Extension "'+e+'" must be a function');Oa[e]=n},r.registerMixin$$module$build$src$core$extensions=function(e,n){if(!n||typeof n!="object")throw Error('Error: Mixin "'+e+'" must be a object');r.register$$module$build$src$core$extensions(e,function(){this.mixin(n)})},r.registerMutator$$module$build$src$core$extensions=function(e,n,o,a){const d='Error when registering mutator "'+e+'": ';vp(d,n);const p=Ap(n,d);if(o&&typeof o!="function")throw Error(d+'Extension "'+e+'" is not a function');r.register$$module$build$src$core$extensions(e,function(){p&&this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(a||[],this)),this.mixin(n),o&&o.apply(this)})},cS=function(e){Lp(e)?delete Oa[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},Lp=function(e){return!!Oa[e]},Td=function(e,n,o){const a=Oa[e];if(typeof a!="function")throw Error('Error: Extension "'+e+'" not found.');let d;if(o?uS(e,n):d=gd(n),a.apply(n),o)vp('Error after applying mutator "'+e+'": ',n);else if(!fS(d,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},uS=function(e,n){if(gd(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},hS=function(e,n){return pd(e.mutationToDom,e.domToMutation,n+" mutationToDom/domToMutation")},dS=function(e,n){return pd(e.saveExtraState,e.loadExtraState,n+" saveExtraState/loadExtraState")},Ap=function(e,n){return pd(e.compose,e.decompose,n+" compose/decompose")},pd=function(e,n,o){if(e&&n){if(typeof e!="function"||typeof n!="function")throw Error(o+" must be a function");return!0}if(!e&&!n)return!1;throw Error(o+"Must have both or neither functions")},vp=function(e,n){const o=hS(n,e),a=dS(n,e);if(!o&&!a)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");Ap(n,e)},gd=function(e){const n=[];return e.domToMutation!==void 0&&n.push(e.domToMutation),e.mutationToDom!==void 0&&n.push(e.mutationToDom),e.saveExtraState!==void 0&&n.push(e.saveExtraState),e.loadExtraState!==void 0&&n.push(e.loadExtraState),e.compose!==void 0&&n.push(e.compose),e.decompose!==void 0&&n.push(e.decompose),n},fS=function(e,n){if(n=gd(n),n.length!==e.length)return!1;for(let o=0;o<n.length;o++)if(e[o]!==n[o])return!1;return!0},_S=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const n=setInterval(function(){document.readyState==="complete"&&(clearInterval(n),e())},10)}},r.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,n){const o=[];return function(){o.includes(this.type)||(TS(this,e,n),o.push(this.type)),this.setTooltip(function(){const a=String(this.getFieldValue(e));return rr(n[a])}.bind(this))}},TS=function(e,n,o){var a=e.getField(n);if(a instanceof Vr&&!a.isOptionListDynamic()){a=a.getOptions();for(const d of a)d!==Vr.SEPARATOR&&([,a]=d,o[a]===void 0&&console.warn(`No tooltip mapping for value ${a} of field ${n} of block type ${e.type}.`))}},r.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,n){return function(){this.setTooltip(function(){const o=this.getField(n);return rr(e).replace("%1",o?o.getText():"")}.bind(this))}},pS=function(){const e=this.tooltip;this.setTooltip(function(){const n=this.getParent();return n&&n.getInputsInline()&&n.tooltip||e}.bind(this))},Je=function(e,n){return" "+e+","+n+" "},vn=function(e,n){return" "+e+n.join("")},yr=function(e,n){return" M "+e+","+n+" "},Jt=function(e,n){return" m "+e+","+n+" "},Js=function(e,n){return" l "+e+","+n+" "},la=function(e){return" l"+e.join("")},qe=function(e,n){return" "+e+" "+n+" "},nr=function(e,n,o,a){return e+" "+o+" "+o+" "+n+a},gS=function(e,n){if(!e||!n)throw Error("Cannot connect null connections.");e.targetConnection=n,n.targetConnection=e},ES=function(e,n){let o=null;n=n.outputConnection;const a=n?.getConnectionChecker();for(let d=0,p;p=e.inputList[d];d++){const C=p.connection;let X;if(C&&((X=a)!=null&&X.canConnect(n,C,!1))){if(o)return null;o=C}}return o},mS=function(e,n){let o;for(;o=ES(e,n);)if(e=o.targetBlock(),!e||e.isShadow())return o;return null},Cp=function(e){return dr(e)&&typeof e.getType=="function"&&typeof e.initView=="function"&&typeof e.dispose=="function"&&typeof e.getWeight=="function"&&typeof e.getSize=="function"&&typeof e.applyColour=="function"&&typeof e.hideForInsertionMarker=="function"&&typeof e.updateEditable=="function"&&typeof e.updateCollapsed=="function"&&typeof e.isShownWhenCollapsed=="function"&&typeof e.setOffsetInBlock=="function"&&typeof e.onLocationChange=="function"&&typeof e.onClick=="function"},$S=function(e){return Cp(e)&&Yo(e)&&xc(e)&&typeof e.setText=="function"&&typeof e.getText=="function"&&typeof e.setBubbleSize=="function"&&typeof e.getBubbleSize=="function"&&typeof e.setBubbleLocation=="function"&&typeof e.getBubbleLocation=="function"&&e.getType()===gr.COMMENT},Ed=function(e){if(!(e.getDescendants(!1).length>100)){var n=e.workspace,o=e.getSvgRoot();n.getAudioManager().play("delete");var a=e.getRelativeToSurfaceXY(),d=o.cloneNode(!0);d.setAttribute("transform","translate("+a.x+","+a.y+")");var p;(p=n.getLayerManager())==null||p.appendToAnimationLayer({getSvgRoot:()=>d}),xp(d,{x:a.x,y:a.y,width:e.width,height:e.height},n.RTL,new Date)}},xp=function(e,n,o,a){const d=(new Date().getTime()-a.getTime())/150;d>1?Ce(e):(e.setAttribute("transform","translate("+(n.x+(o?-1:1)*n.width/2*d)+","+(n.y+n.height/2*d)+") scale("+(1-d)+")"),setTimeout(xp,10,e,n,o,a))},Np=function(e){var n=e.workspace;const o=n.scale;if(n.getAudioManager().play("click"),!(o<1)){var a=n.getSvgXY(e.getSvgRoot());e.outputConnection?(a.x+=(e.RTL?3:-3)*o,a.y+=13*o):e.previousConnection&&(a.x+=(e.RTL?-23:23)*o,a.y+=3*o);var d=N(ue.CIRCLE,{cx:a.x,cy:a.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg());e=N(ue.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*o},d),n=N(ue.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},d),e.beginElement(),n.beginElement(),setTimeout(()=>void Ce(d),150)}},bp=function(e){if(aa(),e.workspace.getAudioManager().play("disconnect"),!(e.workspace.scale<1)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),au=e,yp(e,n,new Date,0)}},yp=function(e,n,o,a){const d=[.66,1,.66,0,-.66,-1,-.66,0];let p="";o.getTime()+200>new Date().getTime()&&(p=`skewX(${Math.round(d[a%d.length]*n)})`,ff=setTimeout(yp,15,e,n,o,a+1)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${p}`)},aa=function(){au&&(ff&&(clearTimeout(ff),ff=null),au.getSvgRoot().setAttribute("transform",au.getTranslation()),au=null)},IS=function(e,n){e.workspace.RTL&&(n.x=e.workspace.getWidth()-n.x);const o=e.workspace,a=r.config$$module$build$src$core$config.snapRadius,d=Ne.difference(n,e.getRelativeToSurfaceXY()),p=new Ne(0,0),C=o.getAllBlocks(!1).filter(X=>X.id!=e.id).map(X=>X.getRelativeToSurfaceXY());for(;OS(Ne.sum(n,p),C)||SS(e,Ne.sum(d,p),a);)o.RTL?p.translate(-a,a*2):p.translate(a,a*2);e.moveTo(Ne.sum(n,p))},OS=function(e,n){return n.some(o=>Math.abs(o.x-e.x)<=1&&Math.abs(o.y-e.y)<=1)},SS=function(e,n,o){return e.getConnections_(!1).some(a=>!!a.closest(o,n).connection)},ca=function(e,n,o){const a=o.getBoundingRectangle(),d=a.right-a.left,p=ea(n.top,a.top,n.top+n.height-(a.bottom-a.top))-a.top;let C=n.left;return n=n.left+n.width-d,e.RTL?C=Math.min(n,C):n=Math.max(C,n),(e=ea(C,a.left,n)-a.left)||p?(o.moveBy(e,p,["inbounds"]),!0):!1},kp=function(e){return n=>{var o=e.getMetricsManager();if(o.hasFixedEdges()&&!e.isDragging()){var a;if(fR.includes((a=n.type)!=null?a:"")){a=o.getScrollMetrics(!0);const d=RS(e,n);d&&(o=r.getGroup$$module$build$src$core$events$utils()||!1,r.setGroup$$module$build$src$core$events$utils(n.group),ca(e,a,d)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),r.setGroup$$module$build$src$core$events$utils(o))}else Re(n)&&n.scale&&n.oldScale&&n.scale>n.oldScale&&md(e)}}},RS=function(e,n){let o=null;switch(n.type){case de.BLOCK_CREATE:case de.BLOCK_MOVE:(o=e.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case de.COMMENT_CREATE:case de.COMMENT_MOVE:case de.COMMENT_RESIZE:o=e.getCommentById(n.commentId)}return o},md=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);var o=e.getTopBoundedElements();for(let a=0,d;d=o[a];a++)ca(e,n,d)}},is=function(e){return e&&typeof e.isDeletable=="function"&&typeof e.dispose=="function"&&typeof e.setDeleteStyle=="function"},wp=function(e,n){const o=e.getIcons();for(const a of e.inputList){if(!a.isVisible())continue;o.push(...a.fieldRow);let d;if((d=a.connection)!=null&&d.targetBlock())if(e=a.connection.targetBlock(),a.connection.type!==ze.NEXT_STATEMENT||n)o.push(e);else{let p;(e=(p=e.lastConnectionInStack(!1))==null?void 0:p.getSourceBlock())&&o.push(e)}else{let p;((p=a.connection)==null?void 0:p.type)===ze.INPUT_VALUE&&o.push(a.connection)}}return o},ua=function(e,n){const o=e.workspace.getTopBoundedElements(!0).filter(d=>dr(d));e=o.indexOf(e instanceof bt?e.getRootBlock():e)+n;let a=null;if(e>=0&&e<o.length?a=o[e]:e<0?a=o[o.length-1]:e>=o.length&&(a=o[0]),n<0&&a instanceof bt){let d,p;return(p=(d=a.lastConnectionInStack(!1))==null?void 0:d.getSourceBlock())!=null?p:a}return a},Is=function(e,n){var o;let a;const d=e instanceof bt?(a=(o=e.outputConnection)==null?void 0:o.targetBlock())!=null?a:e.getSurroundParent():e.getSourceBlock();return!(d instanceof bt)||(o=wp(d,n>0),e=o.indexOf(e),e===-1)?null:(n=e+n,n>=0&&n<o.length?o[n]:null)},Mp=function(e,n){i(Le.ICON,e.toString(),n)},LS=function(e){c(Le.ICON,e)},ha=function(e){return e&&typeof e.getRelativeToSurfaceXY=="function"&&typeof e.isMovable=="function"&&typeof e.startDrag=="function"&&typeof e.drag=="function"&&typeof e.endDrag=="function"&&typeof e.revertDrag=="function"},AS=function(e){return e&&typeof e.autoHide=="function"},to=function(e){return typeof e.getProcedureModel=="function"&&typeof e.doProcedureUpdate=="function"&&typeof e.isProcedureDef=="function"},$d=function(e){return e&&typeof e.startPublishing=="function"&&typeof e.stopPublishing=="function"},Uc=function(e){const n=e.getProcedureMap().getProcedures().filter(a=>!a.getReturnTypes()).map(a=>[a.getName(),a.getParameters().map(d=>d.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(a=>{!to(a)&&Jl(a)&&n.push(a.getProcedureDef())});const o=e.getProcedureMap().getProcedures().filter(a=>!!a.getReturnTypes()).map(a=>[a.getName(),a.getParameters().map(d=>d.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(a=>{!to(a)&&Jl(a)&&o.push(a.getProcedureDef())}),n.sort(Dp),o.sort(Dp),[n,o]},Dp=function(e,n){return e[0].localeCompare(n[0],void 0,{sensitivity:"base"})},r.findLegalName$$module$build$src$core$procedures=function(e,n){if(n.isInFlyout)return e;for(e=e||r.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!vS(e,n.workspace,n);){const o=e.match(/^(.*?)(\d+)$/);e=o?o[1]+(parseInt(o[2])+1):e+"2"}return e},vS=function(e,n,o){return!Pp(e,n,o)},Pp=function(e,n,o){for(const a of n.getAllBlocks(!1))if(a!==o&&Jl(a)&&r.Names$$module$build$src$core$names.equals(a.getProcedureDef()[0],e))return!0;o=o&&to(o)?o?.getProcedureModel():void 0;for(const a of n.getProcedureMap().getProcedures())if(a!==o&&r.Names$$module$build$src$core$names.equals(a.getName(),e))return!0;return!1},r.rename$$module$build$src$core$procedures=function(e){var n=this.getSourceBlock();if(!n)throw new lr;e=e.trim();const o=r.findLegalName$$module$build$src$core$procedures(e,n);to(n)&&!n.isInsertionMarker()&&n.getProcedureModel().setName(o);const a=this.getValue();if(a!==e&&a!==o)for(e=n.workspace.getAllBlocks(!1),n=0;n<e.length;n++){const d=e[n];d.renameProcedure&&d.renameProcedure(a,o)}return o},CS=function(e){function n(p,C){for(let Ie=0;Ie<p.length;Ie++){var X=p[Ie][0];const Ke=p[Ie][1],jt=r.createElement$$module$build$src$core$utils$xml("block");jt.setAttribute("type",C),jt.setAttribute("gap","16");const yt=r.createElement$$module$build$src$core$utils$xml("mutation");for(yt.setAttribute("name",X),jt.appendChild(yt),X=0;X<Ke.length;X++){const Wr=r.createElement$$module$build$src$core$utils$xml("arg");Wr.setAttribute("name",Ke[X]),yt.appendChild(Wr)}o.push(jt)}}const o=[];if(Ut.procedures_defnoreturn){var a=r.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","procedures_defnoreturn"),a.setAttribute("gap","16");var d=r.createElement$$module$build$src$core$utils$xml("field");d.setAttribute("name","NAME"),d.appendChild(r.createTextNode$$module$build$src$core$utils$xml(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),a.appendChild(d),o.push(a)}return Ut.procedures_defreturn&&(a=r.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","procedures_defreturn"),a.setAttribute("gap","16"),d=r.createElement$$module$build$src$core$utils$xml("field"),d.setAttribute("name","NAME"),d.appendChild(r.createTextNode$$module$build$src$core$utils$xml(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),a.appendChild(d),o.push(a)),Ut.procedures_ifreturn&&(a=r.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","procedures_ifreturn"),a.setAttribute("gap","16"),o.push(a)),o.length&&o[o.length-1].setAttribute("gap","24"),e=Uc(e),n(e[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),o},Id=function(e){return Fp(e,!1)},Fp=function(e,n=!0){function o(d,p){for(const[C,X]of d)a.push({kind:"block",type:p,gap:16,extraState:{name:C,params:X}})}if(n)return br("The XML return value of Blockly.Procedures.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),CS(e);const a=[];return Ut.procedures_defnoreturn&&a.push({kind:"block",type:"procedures_defnoreturn",gap:16,fields:{NAME:r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE}}),Ut.procedures_defreturn&&a.push({kind:"block",type:"procedures_defreturn",gap:16,fields:{NAME:r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE}}),Ut.procedures_ifreturn&&a.push({kind:"block",type:"procedures_ifreturn",gap:16}),a.length&&(a[a.length-1].gap=24),e=Uc(e),o(e[0],"procedures_callnoreturn"),o(e[1],"procedures_callreturn"),a},Bp=function(e){var n=[],o=e.getBlocksByType("procedures_mutatorarg",!1);for(let p=0,C;C=o[p];p++)n.push(C.getFieldValue("NAME"));o=r.createElement$$module$build$src$core$utils$xml("xml");const a=r.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","procedures_mutatorarg");const d=r.createElement$$module$build$src$core$utils$xml("field");d.setAttribute("name","NAME"),n=Qh(r.DEFAULT_ARG$$module$build$src$core$procedures,n),n=r.createTextNode$$module$build$src$core$utils$xml(n),d.appendChild(n),a.appendChild(d),o.appendChild(a),e.updateToolbox(o)},Up=function(e){if(ye(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=Ot(e.workspaceId).getBlockById(e.blockId);var n=e.type;(n==="procedures_defnoreturn"||n==="procedures_defreturn")&&(e=e.getIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Bp(e),e.addChangeListener(xS))}},xS=function(e){(ne(e)||ee(e)||me(e)||we(e))&&(e=Ot(e.workspaceId),Bp(e))},Hp=function(e,n){return n.getAllBlocks(!1).filter(o=>NS(o,e)||KI(o)&&r.Names$$module$build$src$core$names.equals(o.getProcedureCall(),e))},NS=function(e,n){return to(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&r.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),n)},r.mutateCallers$$module$build$src$core$procedures=function(e){const n=K();var o=e.getProcedureDef()[0];const a=e.mutationToDom(!0);e=Hp(o,e.workspace);for(let p=0,C;C=e[p];p++){o=(o=C.mutationToDom())&&ge(o),C.domToMutation&&C.domToMutation(a);var d=C.mutationToDom();d=d&&ge(d),o!==d&&(r.setRecordUndo$$module$build$src$core$events$utils(!1),z(new(ce(de.BLOCK_CHANGE))(C,"mutation",null,o,d)),r.setRecordUndo$$module$build$src$core$events$utils(n))}},r.getDefinition$$module$build$src$core$procedures=function(e,n){for(const o of n.getAllBlocks(!1))if(to(o)&&o.isProcedureDef()&&r.Names$$module$build$src$core$names.equals(o.getProcedureModel().getName(),e)||Jl(o)&&r.Names$$module$build$src$core$names.equals(o.getProcedureDef()[0],e))return o;return null},Od=function(e){return e.isDynamic},bS=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},yS=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},Hc=function(e,n){i(Le.RENDERER,e,n)},kS=function(e){c(Le.RENDERER,e)},Gp=function(e,n,o){return e=new(f(Le.RENDERER,e))(e),e.init(n,o),e},Sd=function(e){jo(e.getTargetWorkspace(),void 0,"String")},Rd=function(e){jo(e.getTargetWorkspace(),void 0,"Number")},Ld=function(e){jo(e.getTargetWorkspace(),void 0,"Colour")},Ad=function(e){return Vp(e,!1)},Vp=function(e,n=!0){return Ut.variables_set_dynamic||Ut.variables_get_dynamic||console.warn("There are no dynamic variable blocks, but there is a dynamic variable category."),n?(br("The XML return value of Blockly.VariablesDynamic.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),wS(e)):(e.registerButtonCallback("CREATE_VARIABLE_STRING",Sd),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Rd),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Ld),[{kind:"button",text:r.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE,callbackkey:"CREATE_VARIABLE_STRING"},{kind:"button",text:r.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE,callbackkey:"CREATE_VARIABLE_NUMBER"},{kind:"button",text:r.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE,callbackkey:"CREATE_VARIABLE_COLOUR"},...Zh(e,e.getVariableMap().getAllVariables(),!1,"variables_get_dynamic","variables_set_dynamic")])},wS=function(e){let n=[],o=document.createElement("button");return o.setAttribute("text",r.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),o=document.createElement("button"),o.setAttribute("text",r.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),o=document.createElement("button"),o.setAttribute("text",r.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),e.registerButtonCallback("CREATE_VARIABLE_STRING",Sd),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",Rd),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",Ld),e=Wp(e),n=n.concat(e)},Wp=function(e){e=e.getVariableMap().getAllVariables();const n=[];if(e.length>0){if(Ut.variables_set_dynamic){var o=e[e.length-1];const a=r.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","variables_set_dynamic"),a.setAttribute("gap","24"),a.appendChild(zo(o)),n.push(a)}if(Ut.variables_get_dynamic){e.sort(ql);for(let a=0,d;d=e[a];a++)o=r.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","variables_get_dynamic"),o.setAttribute("gap","8"),o.appendChild(zo(d)),n.push(o)}}return n},vd=function(e,n){const o=e.toCopyData();return Tu=o,pu=Tn(e)&&e.workspace instanceof rn?e.workspace:null,xf=n,o},Cd=function(){return Tu},MS=function(e){Tu=e},xd=function(){return pu},DS=function(e){pu=e},Xp=function(){return xf},PS=function(e){xf=e},ro=function(e,n,o){return e&&n?jp(e,n,o):Tu&&pu?jp(Tu,pu,xf):null},jp=function(e,n,o){let a;n=n.isMutator?n:(a=n.options.parentWorkspace)!=null?a:n;let d,p;return(p=(d=_(Le.PASTER,e.paster,!1))==null?void 0:d.paste(e,n,o))!=null?p:null},Gc=function(e){return e&&typeof e.toCopyData=="function"},zp=function(){Nt.registry.register({name:ri.ESCAPE,preconditionFn(e){return!e.isReadOnly()},callback(e){return e.hideChaff(),!0},keyCodes:[At.ESC]})},Yp=function(){Nt.registry.register({name:ri.DELETE,preconditionFn(e,n){return n=n.focusedNode,!e.isReadOnly()&&n!=null&&is(n)&&n.isDeletable()&&!e.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(e,n,o,a){return n.preventDefault(),e=a.focusedNode,e instanceof bt?e.checkAndDelete():is(e)&&e.isDeletable()&&(r.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),r.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[At.DELETE,At.BACKSPACE]})},Nd=function(e){return Gc(e)&&is(e)&&ha(e)?e.isCopyable?e.isCopyable():e instanceof bt||e instanceof xi?e.isOwnDeletable()&&e.isOwnMovable():e.isDeletable()&&e.isMovable():!1},Kp=function(e){return Nd(e)&&is(e)&&e.isDeletable()},Jp=function(){const e=Nt.registry.createSerializedKey(At.C,[At.CTRL]),n=Nt.registry.createSerializedKey(At.C,[At.META]);Nt.registry.register({name:ri.COPY,preconditionFn(o,a){return a=a.focusedNode,o=o.isFlyout?o.targetWorkspace:o,!!a&&!!o&&!o.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&Nd(a)},callback(o,a,d,p){return a.preventDefault(),a=p.focusedNode,!a||!Gc(a)||!Nd(a)||(o=o.isFlyout?o.targetWorkspace:o,!o)?!1:(a.workspace.isFlyout||o.hideChaff(),o=ha(a)&&a.workspace==o?a.getRelativeToSurfaceXY():void 0,!!vd(a,o))},keyCodes:[e,n]})},qp=function(){const e=Nt.registry.createSerializedKey(At.X,[At.CTRL]),n=Nt.registry.createSerializedKey(At.X,[At.META]);Nt.registry.register({name:ri.CUT,preconditionFn(o,a){return a=a.focusedNode,!!a&&!o.isReadOnly()&&!o.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&Kp(a)},callback(o,a,d,p){return o=p.focusedNode,!o||!Kp(o)||!Gc(o)?!1:(a=ha(o)?o.getRelativeToSurfaceXY():void 0,a=vd(o,a),o instanceof bt?o.checkAndDelete():is(o)&&o.dispose(),!!a)},keyCodes:[e,n]})},Zp=function(){const e=Nt.registry.createSerializedKey(At.V,[At.CTRL]),n=Nt.registry.createSerializedKey(At.V,[At.META]);Nt.registry.register({name:ri.PASTE,preconditionFn(){var o=xd();return!o||!o.rendered?!1:(o=o.isFlyout?o.targetWorkspace:o,!!Cd()&&!!o&&!o.isReadOnly()&&!o.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken())},callback(o,a){if(o=Cd(),!o)return!1;var d=xd();if(!d||(d=d.isFlyout?d.targetWorkspace:d,!d||d.isReadOnly()))return!1;if(a instanceof PointerEvent)return a=Te(d,new Ne(a.clientX,a.clientY)),!!ro(o,d,a);if(a=Xp(),!a)return!!ro(o,d);const{left:p,top:C,width:X,height:Ie}=d.getMetricsManager().getViewMetrics(!0);return new it(C,C+Ie,p,p+X).contains(a.x,a.y)?!!ro(o,d):(a=new Ne(p+X/2,C+Ie/2),!!ro(o,d,a))},keyCodes:[e,n]})},Qp=function(){const e=Nt.registry.createSerializedKey(At.Z,[At.CTRL]),n=Nt.registry.createSerializedKey(At.Z,[At.META]);Nt.registry.register({name:ri.UNDO,preconditionFn(o){return!o.isReadOnly()&&!o.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(o,a){return o.hideChaff(),o.undo(!1),a.preventDefault(),!0},keyCodes:[e,n]})},eg=function(){const e=Nt.registry.createSerializedKey(At.Z,[At.CTRL,At.SHIFT]),n=Nt.registry.createSerializedKey(At.Z,[At.META,At.SHIFT]),o=Nt.registry.createSerializedKey(At.Y,[At.CTRL]);Nt.registry.register({name:ri.REDO,preconditionFn(a){return!a.isDragging()&&!a.isReadOnly()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(a,d){return a.hideChaff(),a.undo(!0),d.preventDefault(),!0},keyCodes:[e,n,o]})},tg=function(){zp(),Yp(),Jp(),qp(),Zp(),Qp(),eg()},rg=function(e){const n=e.saveState();return e.getParameters().length&&(n.parameters=e.getParameters().map(o=>o.saveState())),n},ng=function(e,n,o,a){if(e=e.loadState(o,a),!o.parameters)return e;for(const[d,p]of o.parameters.entries())e.insertParameter(n.loadState(p,a),d);return e},FS=function(e){const n=Object.create(null),o=T(Le.SERIALIZER,!0);for(const a in o){let d;const p=(d=o[a])==null?void 0:d.save(e);p&&(n[a]=p)}return n},BS=function(e,n,{recordUndo:o=!1}={}){var a=T(Le.SERIALIZER,!0);if(a){a=Object.entries(a).sort((p,C)=>C[1].priority-p[1].priority);var d=K();r.setRecordUndo$$module$build$src$core$events$utils(o),(o=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0),tr(),n instanceof rn&&n.setResizesEnabled(!1);for(const[,p]of a.reverse()){let C;(C=p)==null||C.clear(n)}for(const[p,C]of a.reverse())if(e[p]){let X;(X=C)==null||X.load(e[p],n)}n instanceof rn&&n.setResizesEnabled(!0),hr(),z(new(ce(de.FINISHED_LOADING))(n)),r.setGroup$$module$build$src$core$events$utils(o),r.setRecordUndo$$module$build$src$core$events$utils(d)}},US=function(e,n){let o=null;o=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var a;if(!document.contains(o)&&document!==((a=o)==null?void 0:a.ownerDocument))throw Error("Error: container is not in current document");e=new Zs(n||{}),a=document.createElement("div"),fe(a,"injectionDiv"),n!=null&&n.rtl&&fe(a,"blocklyRTL"),o.appendChild(a),n=HS(a,e);const d=GS(a,n,e);return VS(d),D(d),Mn(d),a.addEventListener("focusin",function(){D(d)}),A(a,"keydown",null,ae),d},HS=function(e,n){e.setAttribute("dir","LTR"),rt(n.hasCss,n.pathToMedia);const o=N(ue.SVG,{xmlns:Xc,"xmlns:html":tl,"xmlns:xlink":Fn,version:"1.1",class:"blocklySvg"},e),a=N(ue.DEFS,{},o),d=String(Math.random()).substring(2);return n.gridPattern=$E.createDom(d,n.gridOptions,a,e),o},GS=function(e,n,o){o.parentWorkspace=null,o=new rn(o);const a=o.options;o.scale=a.zoomOptions.startScale,n.appendChild(o.createDom("blocklyMainBackground",e));var d=o.getRenderer().getClassName();return d&&fe(e,d),(d=o.getTheme().getClassName())&&fe(e,d),!a.hasCategories&&a.languageTree&&(e=o.addFlyout(ue.SVG),ut(e,n)),a.hasTrashcan&&o.addTrashcan(),a.zoomOptions&&a.zoomOptions.controls&&o.addZoomControls(),o.getThemeManager().subscribe(n,"workspaceBackgroundColour","background-color"),o.translate(0,0),o.addChangeListener(kp(o)),Mn(o),hp(),rd(),tp(),o},VS=function(e){const n=e.options;var o=e.getParentSvg();if(A(o.parentNode,"contextmenu",null,function(a){H(a)||a.preventDefault()}),o=A(window,"resize",null,function(){Ii(),e.hideComponents(!0),JT(),Tp(),Mn(e),md(e)}),e.setResizeHandlerWrapper(o),WS(),n.languageTree){o=e.getToolbox();const a=e.getFlyout(!0);o?o.init():a&&(a.init(e),a.show(n.languageTree),typeof a.scrollToStart=="function"&&a.scrollToStart())}n.hasTrashcan&&e.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new mE(e,n.moveOptions.scrollbars===!0||!!n.moveOptions.scrollbars.horizontal,n.moveOptions.scrollbars===!0||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&XS(n.pathToMedia,e)},WS=function(){EA||(A(document,"scroll",null,function(){const e=Qe();for(let n=0,o;o=e[n];n++)o instanceof rn&&o.updateInverseScreenCTM()}),m(document,"touchend",null,S),m(document,"touchcancel",null,S)),EA=!0},XS=function(e,n){function o(){for(;d.length;){const p=d.pop();p&&y(p)}a.preload()}const a=n.getAudioManager();a.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),a.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),a.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const d=[];d.push(A(document,"pointermove",null,o,!0)),d.push(A(document,"touchstart",null,o,!0))},jS=function(e){if(!e||!e.isSimpleReporter())return!1;let n;return(n=e.getFields().next().value)==null?void 0:n.isFullBlockField()},sg=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return e.workspace.getUndoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:ht.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},ig=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return e.workspace.getRedoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:ht.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},og=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?e.workspace.getTopBlocks(!1).length>1?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:ht.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},lg=function(e,n){function o(p){d--,p.setCollapsed(e),d===0&&r.setGroup$$module$build$src$core$events$utils(!1)}let a=0,d=0;r.setGroup$$module$build$src$core$events$utils(!0);for(let p=0;p<n.length;p++){let C=n[p];for(;C;)d++,setTimeout(o.bind(null,C),a),C=C.getNextBlock(),a+=10}},ag=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let o=e[n];for(;o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}}return"disabled"}return"hidden"},callback(e){lg(!0,e.workspace.getTopBlocks(!0))},scopeType:ht.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},cg=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let o=e[n];for(;o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}}return"disabled"}return"hidden"},callback(e){lg(!1,e.workspace.getTopBlocks(!0))},scopeType:ht.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},ug=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(let o=0;o<e.length;o++)ug(e[o],n)}},bd=function(e){const n=[];e=e.getTopBlocks(!0);for(let o=0;o<e.length;o++)ug(e[o],n);return n},Vc=function(e,n){n?r.setGroup$$module$build$src$core$events$utils(n):(r.setGroup$$module$build$src$core$events$utils(!0),n=r.getGroup$$module$build$src$core$events$utils());const o=e.shift();o&&(o.isDeadOrDying()?Vc(e,n):(o.dispose(!1,!0),setTimeout(Vc,10,e,n))),r.setGroup$$module$build$src$core$events$utils(!1)},hg=function(){ht.registry.register({displayText(e){return e.workspace?(e=bd(e.workspace).length,e===1?r.Msg$$module$build$src$core$msg.DELETE_BLOCK:r.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&bd(e.workspace).length>0?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=bd(e.workspace);n.length<2?Vc(n):Yh(r.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(n.length)),function(o){o&&Vc(n)})}},scopeType:ht.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},zS=function(){sg(),ig(),og(),ag(),cg(),hg()},dg=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var n=e.block.toCopyData();n&&ro(n,e.block.workspace)}},scopeType:ht.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},fg=function(){ht.registry.register({displayText(e){return e.block.hasIcon(Ls.TYPE)?r.Msg$$module$build$src$core$msg.REMOVE_COMMENT:r.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()||!e.hasIcon(Ls.TYPE)&&jS(e)?"hidden":"enabled"},callback(e){(e=e.block)&&e.hasIcon(Ls.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:ht.ScopeType.BLOCK,id:"blockComment",weight:2})},_g=function(){ht.registry.register({displayText(e){return e.block.getInputsInline()?r.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:r.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let n=1;n<e.inputList.length;n++)if(!(e.inputList[n-1]instanceof yf||e.inputList[n]instanceof yf))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:ht.ScopeType.BLOCK,id:"blockInline",weight:3})},Tg=function(){ht.registry.register({displayText(e){return e.block.isCollapsed()?r.Msg$$module$build$src$core$msg.EXPAND_BLOCK:r.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:ht.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},pg=function(){ht.registry.register({displayText(e){return e.block.hasDisabledReason(os)?r.Msg$$module$build$src$core$msg.ENABLE_BLOCK:r.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var n=e.getDisabledReasons();return n=n.size>(n.has(os)?1:0),e.getInheritedDisabled()||n?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const n=r.getGroup$$module$build$src$core$events$utils();n||r.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(os),os),r.setGroup$$module$build$src$core$events$utils(n)},scopeType:ht.ScopeType.BLOCK,id:"blockDisable",weight:5})},gg=function(){ht.registry.register({displayText(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),e===1?r.Msg$$module$build$src$core$msg.DELETE_BLOCK:r.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:ht.ScopeType.BLOCK,id:"blockDelete",weight:6})},Eg=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:ht.ScopeType.BLOCK,id:"blockHelp",weight:7})},mg=function(){ht.registry.register({displayText:()=>r.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let n;return(n=e.comment)!=null&&n.isDeletable()?"enabled":"hidden"},callback(e){r.setGroup$$module$build$src$core$events$utils(!0);let n;(n=e.comment)==null||n.dispose(),r.setGroup$$module$build$src$core$events$utils(!1)},scopeType:ht.ScopeType.COMMENT,id:"commentDelete",weight:6})},$g=function(){ht.registry.register({displayText:()=>r.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let n;return(n=e.comment)!=null&&n.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var n=e.comment.toCopyData();n&&ro(n,e.comment.workspace)}},scopeType:ht.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},Ig=function(){ht.registry.register({displayText:()=>r.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:e=>{let n;return(n=e.workspace)!=null&&n.isMutator?"hidden":"enabled"},callback:(e,n,o,a)=>{(e=e.workspace)&&(r.setGroup$$module$build$src$core$events$utils(!0),n=new xi(e),n.setPlaceholderText(r.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),n.moveTo(Te(e,new Ne(a.x,a.y))),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(n),r.setGroup$$module$build$src$core$events$utils(!1))},scopeType:ht.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},YS=function(){dg(),fg(),_g(),Tg(),pg(),gg(),Eg()},KS=function(){$g(),mg(),Ig()},Og=function(){zS(),YS()},JS=function(e){return e&&typeof e.paste=="function"},qS=function(e){return e&&typeof e.getSvgRoot=="function"},ZS=function(e){return e.isSelectable()},QS=function(e){I().hideChaff(e)},Ee=Ee||{},Ee.scope={},Ee.ASSUME_ES5=!1,Ee.ASSUME_ES6=!1,Ee.ASSUME_ES2020=!1,Ee.ASSUME_NO_NATIVE_MAP=!1,Ee.ASSUME_NO_NATIVE_SET=!1,Ee.ISOLATE_POLYFILLS=!1,Ee.FORCE_POLYFILL_PROMISE=!1,Ee.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,Ee.INSTRUMENT_ASYNC_CONTEXT=!0,Ee.objectCreate=Ee.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(e){var n=function(){};return n.prototype=e,new n},Ee.defineProperty=Ee.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,n,o){return e==Array.prototype||e==Object.prototype||(e[n]=o.value),e},Ee.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof Co=="object"&&Co];for(var n=0;n<e.length;++n){var o=e[n];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")},Ee.global=Ee.ASSUME_ES2020?globalThis:Ee.getGlobal(this),Ee.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",Ee.TRUST_ES6_POLYFILLS=!Ee.ISOLATE_POLYFILLS||Ee.IS_SYMBOL_NATIVE,Ee.polyfills={},Ee.propertyToPolyfillSymbol={},Ee.POLYFILL_PREFIX="$jscp$",Ee.polyfill=function(e,n,o,a){n&&(Ee.ISOLATE_POLYFILLS?Ee.polyfillIsolated(e,n,o,a):Ee.polyfillUnisolated(e,n,o,a))},Ee.polyfillUnisolated=function(e,n,o,a){for(o=Ee.global,e=e.split("."),a=0;a<e.length-1;a++){var d=e[a];if(!(d in o))return;o=o[d]}e=e[e.length-1],a=o[e],n=n(a),n!=a&&n!=null&&Ee.defineProperty(o,e,{configurable:!0,writable:!0,value:n})},Ee.polyfillIsolated=function(e,n,o,a){var d=e.split(".");e=d.length===1,a=d[0],a=!e&&a in Ee.polyfills?Ee.polyfills:Ee.global;for(var p=0;p<d.length-1;p++){var C=d[p];if(!(C in a))return;a=a[C]}d=d[d.length-1],o=Ee.IS_SYMBOL_NATIVE&&o==="es6"?a[d]:null,n=n(o),n!=null&&(e?Ee.defineProperty(Ee.polyfills,d,{configurable:!0,writable:!0,value:n}):n!==o&&(Ee.propertyToPolyfillSymbol[d]===void 0&&(o=Math.random()*1e9>>>0,Ee.propertyToPolyfillSymbol[d]=Ee.IS_SYMBOL_NATIVE?Ee.global.Symbol(d):Ee.POLYFILL_PREFIX+o+"$"+d),Ee.defineProperty(a,Ee.propertyToPolyfillSymbol[d],{configurable:!0,writable:!0,value:n})))},Ee.getConstructImplementation=function(){function e(){function o(){}return Reflect.construct(o,[],function(){}),new o instanceof o}if(Ee.TRUST_ES6_POLYFILLS&&typeof Reflect<"u"&&Reflect.construct){if(e())return Reflect.construct;var n=Reflect.construct;return function(o,a,d){return o=n(o,a),d&&Reflect.setPrototypeOf(o,d.prototype),o}}return function(o,a,d){return d===void 0&&(d=o),d=Ee.objectCreate(d.prototype||Object.prototype),Function.prototype.apply.call(o,d,a)||d}},Ee.construct={valueOf:Ee.getConstructImplementation}.valueOf(),Ee.underscoreProtoCanBeSet=function(){var e={a:!0},n={};try{return n.__proto__=e,n.a}catch{}return!1},Ee.setPrototypeOf=Ee.ASSUME_ES6||Ee.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:Ee.underscoreProtoCanBeSet()?function(e,n){if(e.__proto__=n,e.__proto__!==n)throw new TypeError(e+" is not extensible");return e}:null,Ee.inherits=function(e,n){if(e.prototype=Ee.objectCreate(n.prototype),e.prototype.constructor=e,Ee.ASSUME_ES6||Ee.setPrototypeOf){var o=Ee.setPrototypeOf;o(e,n)}else for(o in n)if(o!="prototype")if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(e,o,a)}else e[o]=n[o];e.superClass_=n.prototype},Ee.arrayIteratorImpl=function(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}},Ee.arrayIterator=function(e){return{next:Ee.arrayIteratorImpl(e)}},Ee.makeIterator=function(e){var n=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(n)return n.call(e);if(typeof e.length=="number")return Ee.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},Ee.arrayFromIterator=function(e){for(var n,o=[];!(n=e.next()).done;)o.push(n.value);return o},Ee.arrayFromIterable=function(e){return e instanceof Array?e:Ee.arrayFromIterator(Ee.makeIterator(e))},Ee.generator={},Ee.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},Ee.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},Ee.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},Ee.generator.Context.prototype.stop_=function(){this.isRunning_=!1},Ee.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},Ee.generator.Context.prototype.next_=function(e){this.yieldResult=e},Ee.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},Ee.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},Ee.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},Ee.generator.Context.prototype.yield=function(e,n){return this.nextAddress=n,{value:e}},Ee.generator.Context.prototype.yieldAll=function(e,n){e=Ee.makeIterator(e);var o=e.next();if(Ee.generator.ensureIteratorResultIsObject_(o),o.done)this.yieldResult=o.value,this.nextAddress=n;else return this.yieldAllIterator_=e,this.yield(o.value,n)},Ee.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},Ee.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},Ee.generator.Context.prototype.setCatchFinallyBlocks=function(e,n){this.catchAddress_=e,n!=null&&(this.finallyAddress_=n)},Ee.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},Ee.generator.Context.prototype.leaveTryBlock=function(e,n){this.nextAddress=e,this.catchAddress_=n||0},Ee.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},Ee.generator.Context.prototype.enterFinallyBlock=function(e,n,o){o?this.finallyContexts_[o]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=n||0},Ee.generator.Context.prototype.leaveFinallyBlock=function(e,n){if(n=this.finallyContexts_.splice(n||0)[0],n=this.abruptCompletion_=this.abruptCompletion_||n){if(n.isException)return this.jumpToErrorHandler_();n.jumpTo!=null&&this.finallyAddress_<n.jumpTo?(this.nextAddress=n.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},Ee.generator.Context.prototype.forIn=function(e){return new Ee.generator.Context.PropertyIterator(e)},Ee.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var n in e)this.properties_.push(n);this.properties_.reverse()},Ee.generator.Context.PropertyIterator.prototype.getNext=function(){for(;this.properties_.length>0;){var e=this.properties_.pop();if(e in this.object_)return e}return null},Ee.generator.Engine_=function(e){this.context_=new Ee.generator.Context,this.program_=e},Ee.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},Ee.generator.Engine_.prototype.return_=function(e){this.context_.start_();var n=this.context_.yieldAllIterator_;return n?this.yieldAllStep_("return"in n?n.return:function(o){return{value:o,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},Ee.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},Ee.generator.Engine_.prototype.yieldAllStep_=function(e,n,o){try{var a=e.call(this.context_.yieldAllIterator_,n);if(Ee.generator.ensureIteratorResultIsObject_(a),!a.done)return this.context_.stop_(),a;var d=a.value}catch(p){return this.context_.yieldAllIterator_=null,this.context_.throw_(p),this.nextStep_()}return this.context_.yieldAllIterator_=null,o.call(this.context_,d),this.nextStep_()},Ee.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(n){this.context_.yieldResult=void 0,this.context_.throw_(n)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},Ee.generator.Generator_=function(e){this.next=function(n){return e.next_(n)},this.throw=function(n){return e.throw_(n)},this.return=function(n){return e.return_(n)},this[Symbol.iterator]=function(){return this}},Ee.generator.createGenerator=function(e,n){return n=new Ee.generator.Generator_(new Ee.generator.Engine_(n)),Ee.setPrototypeOf&&e.prototype&&Ee.setPrototypeOf(n,e.prototype),n},Ee.asyncExecutePromiseGenerator=function(e){function n(a){return e.next(a)}function o(a){return e.throw(a)}return new Promise(function(a,d){function p(C){C.done?a(C.value):Promise.resolve(C.value).then(n,o).then(p,d)}p(e.next())})},Ee.asyncExecutePromiseGeneratorFunction=function(e){return Ee.asyncExecutePromiseGenerator(e())},Ee.asyncExecutePromiseGeneratorProgram=function(e){return Ee.asyncExecutePromiseGenerator(new Ee.generator.Generator_(new Ee.generator.Engine_(e)))},Ee.polyfill("globalThis",function(e){return e||Ee.global},"es_2020","es3"),Ee.polyfill("Array.prototype.includes",function(e){return e||function(n,o){var a=this;a instanceof String&&(a=String(a));var d=a.length;for(o=o||0,o<0&&(o=Math.max(o+d,0));o<d;o++){var p=a[o];if(p===n||Object.is(p,n))return!0}return!1}},"es7","es3"),Ee.checkEs6ConformanceViaProxy=function(){try{var e={},n=Object.create(new Ee.global.Proxy(e,{get:function(o,a,d){return o==e&&a=="q"&&d==n}}));return n.q===!0}catch{return!1}},Ee.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,Ee.ES6_CONFORMANCE=Ee.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&Ee.checkEs6ConformanceViaProxy(),Ee.initSymbol=function(){},Ee.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},Ee.owns=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},Ee.MapEntry=function(){},Ee.polyfill("Set.prototype.difference",function(e){return e||function(n){Ee.checkIsSetInstance(this),Ee.checkIsSetLike(n);var o=Ee.getSmallerAndLargerSets(this,n);n=new Set(this);var a=o.smallerSetIterator;o=o.largerSet;for(var d=a.next();!d.done;)o.has(d.value)&&n.delete(d.value),d=a.next();return n}},"es_next","es6"),Ee.checkIsSetLike=function(e){if(typeof e!="object"||e===null||typeof e.size!="number"||e.size<0||typeof e.keys!="function"||typeof e.has!="function")throw new TypeError("Argument must be set-like")},Ee.checkIsValidIterator=function(e){if(typeof e!="object"||e===null||typeof e.next!="function")throw new TypeError("Invalid iterator.");return e},Ee.getSmallerAndLargerSets=function(e,n){return e.size<=n.size?{smallerSetIterator:e.keys(),largerSet:n}:{smallerSetIterator:Ee.checkIsValidIterator(n.keys()),largerSet:e}},Ee.checkIsSetInstance=function(e){if(!(e instanceof Set))throw new TypeError("Method must be called on an instance of Set.")},Ee.iteratorFromArray=function(e,n){if(Ee.ASSUME_ES6)return e[Symbol.iterator]();e instanceof String&&(e+="");var o=0,a=!1,d={next:function(){if(!a&&o<e.length){var p=o++;return{value:n(p,e[p]),done:!1}}return a=!0,{done:!0,value:void 0}}};return d[Symbol.iterator]=function(){return d},d},Ee.polyfill("Array.prototype.values",function(e){return e||function(){return Ee.iteratorFromArray(this,function(n,o){return o})}},"es8","es3"),Ee.polyfill("Array.prototype.flatMap",function(e){return e||function(n,o){var a=[];return Array.prototype.forEach.call(this,function(d,p){d=n.call(o,d,p,this),Array.isArray(d)?a.push.apply(a,d):a.push(d)}),a}},"es9","es5"),Ee.polyfill("Array.prototype.flat",function(e){return e||function(n){n=n===void 0?1:n;var o=[];return Array.prototype.forEach.call(this,function(a){Array.isArray(a)&&n>0?(a=Array.prototype.flat.call(a,n-1),o.push.apply(o,a)):o.push(a)}),o}},"es9","es5"),Ee.polyfill("Object.entries",function(e){return e||function(n){var o=[],a;for(a in n)Ee.owns(n,a)&&o.push([a,n[a]]);return o}},"es8","es3"),Ee.polyfill("Object.values",function(e){return e||function(n){var o=[],a;for(a in n)Ee.owns(n,a)&&o.push(n[a]);return o}},"es8","es3");var no=Object.create(null),Pk={typeMap:no},yd=Object.create(null),Pn="default",Le=class{constructor(e){this.name=e}toString(){return this.name}};Le.CONNECTION_CHECKER=new Le("connectionChecker"),Le.CONNECTION_PREVIEWER=new Le("connectionPreviewer"),Le.CURSOR=new Le("cursor"),Le.EVENT=new Le("event"),Le.FIELD=new Le("field"),Le.INPUT=new Le("input"),Le.RENDERER=new Le("renderer"),Le.TOOLBOX=new Le("toolbox"),Le.THEME=new Le("theme"),Le.TOOLBOX_ITEM=new Le("toolboxItem"),Le.FLYOUTS_VERTICAL_TOOLBOX=new Le("flyoutsVerticalToolbox"),Le.FLYOUTS_HORIZONTAL_TOOLBOX=new Le("flyoutsHorizontalToolbox"),Le.FLYOUT_INFLATER=new Le("flyoutInflater"),Le.METRICS_MANAGER=new Le("metricsManager"),Le.BLOCK_DRAGGER=new Le("blockDragger"),Le.SERIALIZER=new Le("serializer"),Le.ICON=new Le("icon"),Le.PASTER=new Le("paster"),Le.VARIABLE_MODEL=new Le("variableModel"),Le.VARIABLE_MAP=new Le("variableMap");var Oi={DEFAULT:Pn,TEST_ONLY:Pk};Oi.Type=Le,Oi.getAllItems=T,Oi.getClass=f,Oi.getClassFromOptions=g,Oi.getObject=_,Oi.hasItem=h,Oi.register=i,Oi.unregister=c;var Ut=Object.create(null),Fk=750,eR="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),kd=null,Qo={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},wd=0,el={TOUCH_ENABLED:eR,TOUCH_MAP:Qo};el.checkTouchIdentifier=v,el.clearTouchIdentifier=R,el.getTouchIdentifierFromEvent=x,el.longStart=E,el.longStop=S,el.shouldHandleEvent=L;var Sg,tR,rR,nR,Md,Dd,Rg,sR,iR,oR;(function(e){function n(a){return o.includes(a.toUpperCase())}Sg=e;const o=Sg.toUpperCase();tR=n("JavaFX"),rR=n("WebKit"),nR=n("Gecko")&&!rR,Md=n("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Dd=n("iPad")||n("Macintosh")&&e>0,Rg=n("iPhone")&&!Dd,sR=n("Macintosh"),iR=Dd||Md&&!n("Mobile")||n("Silk"),oR=!iR&&(Rg||Md)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var Bk=Sg,lR=tR,aR=nR,Lg=Md,Pd=Dd,cR=Rg,Ag=sR,uR=oR,Uk={ANDROID:Lg,GECKO:aR,IPAD:Pd,IPHONE:cR,JavaFx:lR,MAC:Ag,MOBILE:uR,raw:Bk},hR=40,dR=125,Si={};Si.bind=m,Si.conditionalBind=A,Si.getScrollDeltaPixels=F,Si.isRightButton=G,Si.isTargetInput=H,Si.mouseToSvg=k,Si.unbind=y;var de;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.VAR_TYPE_CHANGE="var_type_change",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(de||(de={}));var fR=[de.BLOCK_CREATE,de.BLOCK_MOVE,de.COMMENT_CREATE,de.COMMENT_MOVE],_R="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",TR={genUid:()=>{const e=_R.length,n=[];for(let o=0;o<20;o++)n[o]=_R.charAt(Math.random()*e);return n.join("")}},Hk=0,vg={TEST_ONLY:TR};vg.genUid=re,vg.getNextUniqueId=B;var pR="",Wc=!0,Cg=0,xg="ORPHANED_BLOCK",Ri=[],gR={FIRE_QUEUE:Ri,enqueueEvent:Z,fireNow:M,fireInternal:oe,setGroupInternal:xe};r.disable$$module$build$src$core$events$utils,r.enable$$module$build$src$core$events$utils,r.getGroup$$module$build$src$core$events$utils,r.setGroup$$module$build$src$core$events$utils,r.setRecordUndo$$module$build$src$core$events$utils;var Xc="http://www.w3.org/2000/svg",tl="http://www.w3.org/1999/xhtml",Fn="http://www.w3.org/1999/xlink",Li;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Li||(Li={}));var Os=null,Ng=0,jc=null,kr={HTML_NS:tl};kr.NodeType=Li,kr.SVG_NS=Xc,kr.XLINK_NS=Fn,kr.addClass=fe,kr.createSvgElement=N,kr.getFastTextWidth=Zr,kr.getFastTextWidthWithSizeString=Wt,kr.getTextWidth=wt,kr.hasClass=Ze,kr.insertAfter=ut,kr.measureFontMetrics=te,kr.removeClass=Me,kr.removeClasses=He,kr.removeNode=Ce,kr.setCssTransform=Bt,kr.startTextWidthCache=tr,kr.stopTextWidthCache=hr;var wr=class{static findFocusedNode(e){var n=e.getRootFocusableNode();if(!n.canBeFocused())return null;var o=n.getFocusableElement();return Ze(o,wr.ACTIVE_CLASS_NAME)||Ze(o,wr.PASSIVE_CSS_CLASS_NAME)||(n=o.querySelector(this.ACTIVE_FOCUS_NODE_CSS_SELECTOR),(n instanceof HTMLElement||n instanceof SVGElement)&&(n=wr.findFocusableNodeFor(n,e)))?n:(o=o.querySelector(this.PASSIVE_FOCUS_NODE_CSS_SELECTOR),(o instanceof HTMLElement||o instanceof SVGElement)&&(e=wr.findFocusableNodeFor(o,e))?e:null)}static findFocusableNodeFor(e,n){if(!e.id||e.id==="null"||n.getNestedTrees().map(d=>wr.findFocusableNodeFor(e,d)).findIndex(d=>!!d)!==-1)return null;var o=n.getRootFocusableNode();if(o.canBeFocused()&&e===o.getFocusableElement())return o;var a;return(o=(a=n.lookUpFocusableNode(e.id))!=null?a:null)?o:(a=e.parentElement,!o&&a?wr.findFocusableNodeFor(a,n):null)}};wr.ACTIVE_CLASS_NAME="blocklyActiveFocus",wr.PASSIVE_CSS_CLASS_NAME="blocklyPassiveFocus",wr.ACTIVE_FOCUS_NODE_CSS_SELECTOR=`.${wr.ACTIVE_CLASS_NAME}`,wr.PASSIVE_FOCUS_NODE_CSS_SELECTOR=`.${wr.PASSIVE_CSS_CLASS_NAME}`;var Gk=class{constructor(e,n){this.tree=e,this.rootShouldBeAutoTabbable=n}},Gr=class{constructor(e){this.previouslyFocusedNode=this.focusedNode=null,this.registeredTrees=[],this.isUpdatingFocusedNode=this.recentlyLostAllFocus=this.lockFocusStateChanges=this.currentlyHoldsEphemeralFocus=!1;const n=o=>{if(!this.isUpdatingFocusedNode){this.recentlyLostAllFocus=!o;var a=null;if(o instanceof HTMLElement||o instanceof SVGElement){for(var d of this.registeredTrees)if(a=wr.findFocusableNodeFor(o,d.tree))break}if(a&&a.canBeFocused()){o=a.getFocusableTree();let p;d=(p=this.focusedNode)==null?void 0:p.getFocusableTree(),a===o.getRootFocusableNode()&&o!==d?this.focusTree(o):this.focusNode(a)}else this.defocusCurrentFocusedNode()}};e("focusin",o=>{o instanceof FocusEvent&&n(document.activeElement)}),e("focusout",o=>{o instanceof FocusEvent&&n(o.relatedTarget)})}registerTree(e,n=!1){if(this.ensureManagerIsUnlocked(),this.isRegistered(e))throw Error(`Attempted to re-register already registered tree: ${e}.`);this.registeredTrees.push(new Gk(e,n));const o=e.getRootFocusableNode().getFocusableElement();if(!o.id||o.id==="null")throw Error(`Attempting to register a tree with a root element that has an invalid ID: ${e}.`);n&&(o.tabIndex=0)}isRegistered(e){return!!this.lookUpRegistration(e)}lookUpRegistration(e){let n;return(n=this.registeredTrees.find(o=>o.tree===e))!=null?n:null}unregisterTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to unregister not registered tree: ${e}.`);var n=this.registeredTrees.findIndex(d=>d.tree===e);const o=this.registeredTrees[n];this.registeredTrees.splice(n,1),n=wr.findFocusedNode(e);const a=e.getRootFocusableNode();n&&this.removeHighlight(n),this.focusedNode!==n&&this.focusedNode!==a||this.updateFocusedNode(null),this.removeHighlight(a),o.rootShouldBeAutoTabbable&&e.getRootFocusableNode().getFocusableElement().removeAttribute("tabindex")}getFocusedTree(){let e,n;return(n=(e=this.focusedNode)==null?void 0:e.getFocusableTree())!=null?n:null}getFocusedNode(){return this.focusedNode}focusTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to focus unregistered tree: ${e}.`);const n=wr.findFocusedNode(e),o=e.getRestoredFocusableNode(n);e=e.getRootFocusableNode();let a;this.focusNode((a=o??n)!=null?a:e)}focusNode(e){this.ensureManagerIsUnlocked();const n=!this.currentlyHoldsEphemeralFocus;n&&(this.isUpdatingFocusedNode=!0);var o,a=((o=this.focusedNode)==null?void 0:o.getFocusableElement())!==document.activeElement;if(this.focusedNode!==e||a)if(e.canBeFocused()){if(o=e.getFocusableTree(),!this.isRegistered(o))throw Error(`Attempted to focus unregistered node: ${e}.`);a=e.getFocusableElement(),a.id&&a.id!=="null"||console.warn("Trying to focus a node that has an invalid ID.");var d=wr.findFocusableNodeFor(a,o);a=wr.findFocusedNode(o);var p=e;if(d!==e){p=o.getRestoredFocusableNode(a),e=o.getRootFocusableNode();var C;p=(C=p??a)!=null?C:e}e=this.focusedNode,C=e?.getFocusableTree(),e&&this.passivelyFocusNode(e,o),o=o.getRootFocusableNode(),a&&this.removeHighlight(a),o!==p&&this.removeHighlight(o),this.currentlyHoldsEphemeralFocus||this.activelyFocusNode(p,C??null),this.updateFocusedNode(p)}else console.warn("Trying to focus a node that can't be focused.");n&&(this.isUpdatingFocusedNode=!1)}takeEphemeralFocus(e){if(this.ensureManagerIsUnlocked(),this.currentlyHoldsEphemeralFocus)throw Error(`Attempted to take ephemeral focus when it's already held, with new element: ${e}.`);this.currentlyHoldsEphemeralFocus=!0,this.focusedNode&&this.passivelyFocusNode(this.focusedNode,null),e.focus({preventScroll:!0});let n=!1;return()=>{if(n)throw Error(`Attempted to finish ephemeral focus twice for element: ${e}.`);if(n=!0,this.currentlyHoldsEphemeralFocus=!1,this.focusedNode){this.activelyFocusNode(this.focusedNode,null);const o=this.focusedNode;setTimeout(()=>{!this.focusedNode&&this.previouslyFocusedNode===o&&this.recentlyLostAllFocus&&this.focusNode(o)},0)}}}ephemeralFocusTaken(){return this.currentlyHoldsEphemeralFocus}ensureManagerIsUnlocked(){if(this.lockFocusStateChanges)throw Error("FocusManager state changes cannot happen in a tree/node focus/blur callback.")}updateFocusedNode(e){this.previouslyFocusedNode=this.focusedNode,this.focusedNode=e}defocusCurrentFocusedNode(){this.focusedNode&&!this.currentlyHoldsEphemeralFocus&&(this.passivelyFocusNode(this.focusedNode,null),this.updateFocusedNode(null))}activelyFocusNode(e,n){this.lockFocusStateChanges=!0;const o=e.getFocusableTree(),a=e.getFocusableElement();let d;const p=(d=this.lookUpRegistration(o))==null?void 0:d.rootShouldBeAutoTabbable;o!==n&&(o.onTreeFocus(e,n),p&&(o.getRootFocusableNode().getFocusableElement().tabIndex=-1)),e.onNodeFocus(),this.lockFocusStateChanges=!1,p&&e===o.getRootFocusableNode()||a.hasAttribute("tabindex")||(a.tabIndex=-1),this.setNodeToVisualActiveFocus(e),a.focus({preventScroll:!0})}passivelyFocusNode(e,n){this.lockFocusStateChanges=!0;const o=e.getFocusableTree();if(o!==n){o.onTreeBlur(n);let a;(a=this.lookUpRegistration(o))!=null&&a.rootShouldBeAutoTabbable&&(o.getRootFocusableNode().getFocusableElement().tabIndex=0)}e.onNodeBlur(),this.lockFocusStateChanges=!1,o!==n&&this.setNodeToVisualPassiveFocus(e)}setNodeToVisualActiveFocus(e){e=e.getFocusableElement(),fe(e,Gr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Me(e,Gr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}setNodeToVisualPassiveFocus(e){e=e.getFocusableElement(),Me(e,Gr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),fe(e,Gr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}removeHighlight(e){e=e.getFocusableElement(),Me(e,Gr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Me(e,Gr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}static getFocusManager(){return Gr.focusManager||(Gr.focusManager=new Gr(document.addEventListener)),Gr.focusManager}};Gr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyActiveFocus",Gr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyPassiveFocus",Gr.focusManager=null,r.getFocusManager$$module$build$src$core$focus_manager;var ER={};ER.deepMerge=ct;var Nt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,n){if(this.shortcuts.get(e.name)&&!n)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),n=e.keyCodes,n!=null&&n.length)for(const o of n)this.addKeyMapping(o,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,n,o){e=`${e}`;const a=this.keyMap.get(e);if(a&&!o)throw Error(`Shortcut named "${n}" collides with shortcuts "${a}"`);a&&o?a.unshift(n):this.keyMap.set(e,[n])}removeKeyMapping(e,n,o){const a=this.keyMap.get(e);if(!a)return o||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1;const d=a.indexOf(n);return d>-1?(a.splice(d,1),a.length===0&&this.keyMap.delete(e),!0):(o||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const n of this.keyMap.keys())this.removeKeyMapping(n,e,!0)}setKeyMap(e){this.keyMap.clear();for(const n in e)this.keyMap.set(n,e[n])}getKeyMap(){const e=Object.create(null);for(const[n,o]of this.keyMap)e[n]=o;return e}getRegistry(){const e=Object.create(null);for(const[n,o]of this.shortcuts)e[n]=o;return ct(Object.create(null),e)}onKeyDown(e,n){var o=this.serializeKeyEvent(n);if(o=this.getShortcutNamesByKeyCode(o),!o)return!1;for(const a of o){o=this.shortcuts.get(a);let d;if(!o||o.preconditionFn&&!o.preconditionFn(e,{focusedNode:(d=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?d:void 0}))continue;let p,C,X;if((C=(p=o).callback)!=null&&C.call(p,e,n,o,{focusedNode:(X=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?X:void 0}))return!0}return!1}getShortcutNamesByKeyCode(e){let n;return((n=this.keyMap.get(e))==null?void 0:n.slice())||[]}getKeyCodesByShortcutName(e){const n=[];for(const[o,a]of this.keyMap)a.indexOf(e)>-1&&n.push(o);return n}serializeKeyEvent(e){let n="";for(const o in Nt.modifierKeys)e.getModifierState(o)&&(n!==""&&(n+="+"),n+=o);return n!==""&&e.keyCode?n+="+"+e.keyCode:e.keyCode&&(n=String(e.keyCode)),n}checkModifiers(e){for(const n of e)if(!(n in Nt.modifierKeys))throw Error(n+" is not a valid modifier key.")}createSerializedKey(e,n){let o="";if(n){this.checkModifiers(n);for(const a in Nt.modifierKeys)n.includes(Nt.modifierKeys[a])&&(o!==""&&(o+="+"),o+=a)}return o!==""&&e?o+="+"+e:e&&(o=`${e}`),o}};Nt.registry=new Nt,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(Nt||(Nt={}));var zc=Object.create(null),mR,$R,Yc=[],IR={defineBlocksWithJsonArrayInternal:Q},Rr={TEST_ONLY:IR};Rr.createBlockDefinitionsFromJsonArray=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Rr.defineBlocks=r.defineBlocks$$module$build$src$core$common,Rr.defineBlocksWithJsonArray=w,Rr.draggingConnections=Yc,Rr.fireSelectedEvent=Be,Rr.getAllWorkspaces=Qe,Rr.getBlockTypeCounts=Dn,Rr.getMainWorkspace=I,Rr.getParentContainer=Et,Rr.getSelected=ie,Rr.getWorkspaceById=Ot,Rr.globalShortcutHandler=ae,Rr.registerWorkspace=ot,Rr.setMainWorkspace=D,Rr.setParentContainer=An,Rr.setSelected=le,Rr.svgResize=Mn,Rr.unregisterWorkpace=Mt;var da=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=r.getGroup$$module$build$src$core$events$utils(),this.recordUndo=K()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,n,o){return o.isBlank=!1,o.group=e.group||"",o.workspaceId=n.id,o}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=Ot(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},qs=class extends da{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},bg=class extends qs{constructor(e,n,o){n=e?e.workspace.id:n,n===null&&(n=void 0),super(n),this.type=de.CLICK,this.blockId=e?e.id:void 0,this.targetType=o}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new bg),n.targetType=e.targetType,n.blockId=e.blockId,n}},yg;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(yg||(yg={})),i(Le.EVENT,de.CLICK,bg);var OR={};OR.removeElem=Ae;var Ai=class{constructor(e){this.name=e}toString(){return this.name}};Ai.POSITIONABLE=new Ai("positionable"),Ai.DRAG_TARGET=new Ai("drag_target"),Ai.DELETE_AREA=new Ai("delete_area"),Ai.AUTOHIDEABLE=new Ai("autohideable");var Ht=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,n){const o=e.component.id;if(!n&&this.componentData.has(o)){var a;throw Error('Plugin "'+o+'" with capabilities "'+((a=this.componentData.get(o))==null?void 0:a.capabilities)+'" already added.')}for(this.componentData.set(o,e),n=[],a=0;a<e.capabilities.length;a++){const d=String(e.capabilities[a]).toLowerCase();if(n.push(d),this.capabilityToComponentIds.has(d)){let p;(p=this.capabilityToComponentIds.get(d))==null||p.push(o)}else this.capabilityToComponentIds.set(d,[o])}this.componentData.get(o).capabilities=n}removeComponent(e){const n=this.componentData.get(e);if(n){for(let o=0;o<n.capabilities.length;o++){const a=String(n.capabilities[o]).toLowerCase();Ae(this.capabilityToComponentIds.get(a),e)}this.componentData.delete(e)}}addCapability(e,n){if(!this.getComponent(e))throw Error('Cannot add capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,n))console.warn('Plugin "'+e+'already has capability "'+n+'"');else{n=`${n}`.toLowerCase();var o;(o=this.componentData.get(e))==null||o.capabilities.push(n);var a;(a=this.capabilityToComponentIds.get(n))==null||a.push(e)}}removeCapability(e,n){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?(n=`${n}`.toLowerCase(),Ae(this.componentData.get(e).capabilities,n),Ae(this.capabilityToComponentIds.get(n),e)):console.warn('Plugin "'+e+`doesn't have capability "`+n+'" to remove')}hasCapability(e,n){return n=`${n}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(n)}getComponent(e){let n;return(n=this.componentData.get(e))==null?void 0:n.component}getComponents(e,n){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const o=[];if(n){const a=[];e.forEach(d=>{a.push(this.componentData.get(d))}),a.sort(function(d,p){return d.weight-p.weight}),a.forEach(function(d){o.push(d.component)})}else e.forEach(a=>{o.push(this.componentData.get(a).component)});return o}};Ht.Capability=Ai,function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}(Ht||(Ht={})),Ht.ComponentWeight;var kg=!1,wg=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyEmboss {
  filter: var(--blocklyEmbossFilter);
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyHighlighted>.blocklyPath {
  filter: var(--blocklyEmbossFilter);
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete,
.blocklyDragging.blocklyDraggingDelete .blocklyField {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabledPattern>.blocklyPath {
  fill: var(--blocklyDisabledPattern);
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableField>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover):not(:focus),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
  pointer-events: none;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyMenuSeparator {
  background-color: #ccc;
  height: 1px;
  border: 0;
  margin-left: 4px;
  margin-right: 4px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}

.blocklyField {
  cursor: default;
}

.blocklyInputField {
  cursor: text;
}

.blocklyDragging .blocklyField,
.blocklyDragging .blocklyIconGroup {
  cursor: grabbing;
}

.blocklyActiveFocus:is(
  .blocklyFlyout,
  .blocklyWorkspace,
  .blocklyField,
  .blocklyPath,
  .blocklyHighlightedConnectionPath,
  .blocklyComment,
  .blocklyBubble,
  .blocklyIconGroup,
  .blocklyTextarea
) {
  outline: none;
}
`,Mg={};Mg.inject=rt,Mg.register=Xe;var Ne=class{constructor(e,n){this.x=e,this.y=n}clone(){return new Ne(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,n){return this.x+=e,this.y+=n,this}static equals(e,n){return e===n?!0:e&&n?e.x===n.x&&e.y===n.y:!1}static distance(e,n){const o=e.x-n.x;return e=e.y-n.y,Math.sqrt(o*o+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,n){return new Ne(e.x-n.x,e.y-n.y)}static sum(e,n){return new Ne(e.x+n.x,e.y+n.y)}},ue=class{constructor(e){this.tagName=e}toString(){return this.tagName}};ue.ANIMATE=new ue("animate"),ue.CIRCLE=new ue("circle"),ue.CLIPPATH=new ue("clipPath"),ue.DEFS=new ue("defs"),ue.FECOMPOSITE=new ue("feComposite"),ue.FECOMPONENTTRANSFER=new ue("feComponentTransfer"),ue.FEFLOOD=new ue("feFlood"),ue.FEFUNCA=new ue("feFuncA"),ue.FEGAUSSIANBLUR=new ue("feGaussianBlur"),ue.FEPOINTLIGHT=new ue("fePointLight"),ue.FESPECULARLIGHTING=new ue("feSpecularLighting"),ue.FILTER=new ue("filter"),ue.FOREIGNOBJECT=new ue("foreignObject"),ue.G=new ue("g"),ue.IMAGE=new ue("image"),ue.LINE=new ue("line"),ue.PATH=new ue("path"),ue.PATTERN=new ue("pattern"),ue.POLYGON=new ue("polygon"),ue.RECT=new ue("rect"),ue.SVG=new ue("svg"),ue.TEXT=new ue("text"),ue.TSPAN=new ue("tspan");var it=class{constructor(e,n,o,a){this.top=e,this.bottom=n,this.left=o,this.right=a}static from(e){return new it(e.y,e.y+e.height,e.x,e.x+e.width)}clone(){return new it(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}getOrigin(){return new Ne(this.left,this.top)}contains(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,n){return e===n?!0:e&&n?e.top===n.top&&e.bottom===n.bottom&&e.left===n.left&&e.right===n.right:!1}static createFromPoint(e,n,o){const a=e.x;return e=e.y,new it(e,e+o,a,a+n)}},lt=class{constructor(e,n){this.width=e,this.height=n}static equals(e,n){return e===n?!0:e&&n?e.width===n.width&&e.height===n.height:!1}static max(e,n){return new lt(Math.max(e.width,n.width),Math.max(e.height,n.height))}static min(e,n){return new lt(Math.min(e.width,n.width),Math.min(e.height,n.height))}},SR={getSizeInternal:Ei},so={TEST_ONLY:SR};so.getBorderBox=vc,so.getComputedStyle=Sr,so.getContainerOffsetToScrollInto=W,so.getPageOffset=Gs,so.getSize=Nr,so.getViewportPageOffset=Ac,so.scrollIntoContainerView=b;var RR=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,LR=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Vk={XY_REGEX:RR,XY_STYLE_REGEX:LR},rl={TEST_ONLY:Vk};rl.getDocumentScroll=Y,rl.getInjectionDivXY=U,rl.getRelativeXY=P,rl.getViewportBBox=j,rl.screenToWsCoordinates=Te,rl.wsToScreenCoordinates=Se;var sr=class{constructor(e,n,o,a,d){this.workspace=e,this.horizontal=n,this.oldHostMetrics=null,this.ratio=1,this.origin=new Ne(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new Ne(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=o||!1,this.margin=d!==void 0?d:sr.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),a&&(e+=" "+a),this.outerSvg=N(ue.SVG,{class:e}),a=N(ue.G,{},this.outerSvg),this.svgBackground=N(ue.RECT,{class:"blocklyScrollbarBackground"},a),e=Math.floor((sr.scrollbarThickness-5)/2),this.svgHandle=N(ue.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},a),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),ut(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),n?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=A(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=A(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=sr.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),y(this.onMouseDownBarWrapper_),y(this.onMouseDownHandleWrapper_),Ce(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,n){this.position.x=e,this.position.y=n,Bt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&sr.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var n=e.viewWidth-this.margin*2;this.pair&&(n-=sr.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),n=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(n+=sr.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-sr.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewWidth/e.scrollWidth;n=this.constrainHandleLength(n),this.setHandleLength(n),n=e.scrollWidth-e.viewWidth;var o=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/n*o,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=o/n}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let n=e.viewHeight-this.margin*2;this.pair&&(n-=sr.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-sr.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewHeight/e.scrollHeight;n=this.constrainHandleLength(n),this.setHandleLength(n),n=e.scrollHeight-e.viewHeight;var o=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/n*o,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=o/n}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const n=e!==this.containerVisible;this.containerVisible=e,n&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const n=e!==this.isVisible();this.isHandleVisible=e,n&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),R(),this.cleanUp(),G(e))e.stopPropagation();else{var n=k(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());n=this.horizontal?n.x:n.y;var o=U(this.svgHandle);o=this.horizontal?o.x:o.y;var a=this.handlePosition,d=this.handleLength*.95;n<=o?a-=d:n>=o+this.handleLength&&(a+=d),this.setHandlePosition(this.constrainHandlePosition(a)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),G(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=A(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=A(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){R(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(y(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(y(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,n){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(n||n===void 0)&&this.updateMetrics()}setOrigin(e,n){this.origin=new Ne(e,n)}static metricsAreEquivalent(e,n){return e.viewWidth===n.viewWidth&&e.viewHeight===n.viewHeight&&e.viewLeft===n.viewLeft&&e.viewTop===n.viewTop&&e.absoluteTop===n.absoluteTop&&e.absoluteLeft===n.absoluteLeft&&e.scrollWidth===n.scrollWidth&&e.scrollHeight===n.scrollHeight&&e.scrollLeft===n.scrollLeft&&e.scrollTop===n.scrollTop}};sr.scrollbarThickness=eR?25:15,sr.DEFAULT_SCROLLBAR_MARGIN=.5;var Fd={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Dg={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Bd,DOMParser:Kc,XMLSerializer:Jc}=globalThis;Kc&&(Fd=new Kc),Jc&&(Dg=new Jc);var AR="https://developers.google.com/blockly/xml",Wk=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,fa={NAME_SPACE:AR};fa.createElement=r.createElement$$module$build$src$core$utils$xml,fa.createTextNode=r.createTextNode$$module$build$src$core$utils$xml,fa.domToText=ge,fa.injectDependencies=pe,fa.textToDom=r.textToDom$$module$build$src$core$utils$xml;var Pg="categoryToolbox",vR="flyoutToolbox",at;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(at||(at={}));var CR={hasCategoriesInternal:We},io={};io.Position=at,io.TEST_ONLY=CR,io.convertFlyoutDefToJsonArray=je,io.convertToolboxDefToJson=De,io.hasCategories=Ue,io.isCategoryCollapsible=nt,io.parseToolboxTree=mi;var vi;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(vi||(vi={}));var _a;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(_a||(_a={}));var oo;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(oo||(oo={}));var nl={};nl.bumpDirection=oo,nl.bumpPositionRect=rs,nl.getCornerOppositeToolbox=Ws,nl.getStartPositionRect=Vs,nl.horizontalPosition=_a,nl.verticalPosition=vi;var pn={width:96,height:124,url:"sprites.png"},xR=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=N(ue.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:Ht.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[Ht.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&Ce(this.svgGroup);for(const e of this.boundEvents)y(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new it(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,n){if(this.initialized){var o=Ws(this.workspace,e),a=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(a+=this.LARGE_SPACING+this.HEIGHT),e=Vs(o,new lt(this.WIDTH,a),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),o=o.vertical,n=rs(e,this.MARGIN_VERTICAL,o===vi.TOP?oo.DOWN:oo.UP,n),o===vi.TOP){var d=this.SMALL_SPACING+this.HEIGHT,p;(p=this.zoomInGroup)==null||p.setAttribute("transform","translate(0, "+d+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(d+this.LARGE_SPACING+this.HEIGHT)+")")}else{p=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let X;(X=this.zoomInGroup)==null||X.setAttribute("transform","translate(0, "+p+")"),p=p+this.SMALL_SPACING+this.HEIGHT,(d=this.zoomOutGroup)==null||d.setAttribute("transform","translate(0, "+p+")")}this.top=n.top,this.left=n.left;var C;(C=this.svgGroup)==null||C.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=N(ue.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const n=N(ue.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);N(ue.RECT,{width:32,height:32},n),N(ue.IMAGE,{width:pn.width,height:pn.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(Fn,"xlink:href",this.workspace.options.pathToMedia+pn.url),this.boundEvents.push(A(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=N(ue.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const n=N(ue.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);N(ue.RECT,{width:32,height:32},n),N(ue.IMAGE,{width:pn.width,height:pn.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(Fn,"xlink:href",this.workspace.options.pathToMedia+pn.url),this.boundEvents.push(A(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,n){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),R(),n.stopPropagation(),n.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=N(ue.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const n=N(ue.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);N(ue.RECT,{width:32,height:32},n),N(ue.IMAGE,{width:pn.width,height:pn.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(Fn,"xlink:href",this.workspace.options.pathToMedia+pn.url),this.boundEvents.push(A(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const n=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(n),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),R(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(ce(de.CLICK))(null,this.workspace.id,"zoom_controls");z(e)}};Xe(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var NR=100,bR=75,yR=50,kR=25,Xk={BLOCKS:yR,PROCEDURES:bR,VARIABLES:NR,WORKSPACE_COMMENTS:kR},Fg={};Fg.register=$i,Fg.unregister=ns;var wR=class{constructor(){this.priority=kR}save(e){const n=[];for(const o of e.getTopComments())(e=Kl(o,{addCoordinates:!0,saveIds:!0}))&&n.push(e);return n.length?n:null}load(e,n){for(const o of e)Cc(o,n,{recordUndo:K()})}clear(e){for(const n of e.getTopComments())n.dispose()}};$i("workspaceComments",new wR);var Ud={};Ud.WorkspaceCommentSerializer=wR,Ud.append=Cc,Ud.save=Kl;var Bg={};Bg.register=jh,Bg.unregister=BI;var Hd=class{paste(e,n,o){e=e.commentState,o&&(e.x=o.x,e.y=o.y),r.disable$$module$build$src$core$events$utils();let a;try{a=Cc(e,n),UI(a)}finally{r.enable$$module$build$src$core$events$utils()}return a?(he()&&z(new(ce(de.COMMENT_CREATE))(a)),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(a),a):null}};Hd.TYPE="workspace-comment",jh(Hd.TYPE,new Hd);var Ug;Ug=28,r.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:Ug,connectingSnapRadius:Ug,currentConnectionPreference:8,bumpDelay:250},r.config$$module$build$src$core$config;var jk="aria-",zk="role",Bn;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem",e.SEPARATOR="separator",e.STATUS="status"})(Bn||(Bn={}));var ir;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin",e.LIVE="live",e.HIDDEN="hidden"})(ir||(ir={}));var qc={};qc.Role=Bn,qc.State=ir,qc.setRole=Xs,qc.setState=fr;var Gd=class{constructor(e,n){this.content=e,this.opt_value=n,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=B(),this.element=e,e.className="blocklyMenuItem "+(this.enabled?"":"blocklyMenuItemDisabled ")+(this.checked?"blocklyMenuItemSelected ":"")+(this.highlight?"blocklyMenuItemHighlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl ":"");const n=document.createElement("div");if(n.className="blocklyMenuItemContent",this.checkable){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox ",n.appendChild(o)}return o=this.content,typeof this.content=="string"&&(o=document.createTextNode(this.content)),n.appendChild(o),e.appendChild(n),this.roleName&&Xs(e,this.roleName),fr(e,ir.SELECTED,this.checkable&&this.checked||!1),fr(e,ir.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const n=this.getElement();n&&this.isEnabled()&&(e?fe(n,"blocklyMenuItemHighlight"):Me(n,"blocklyMenuItemHighlight"))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(e){this.isEnabled()&&this.actionHandler&&this.actionHandler(this,e)}onAction(e,n){this.actionHandler=e.bind(n)}},Hg=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.pointerLeaveHandler=this.pointerEnterHandler=this.clickHandler=this.pointerMoveHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const n=document.createElement("div");n.className="blocklyMenu",n.tabIndex=0,this.roleName&&Xs(n,this.roleName),this.element=n;for(let o=0,a;a=this.menuItems[o];o++)n.appendChild(a.createDom());return this.pointerMoveHandler=A(n,"pointermove",this,this.handlePointerMove,!0),this.clickHandler=A(n,"pointerup",this,this.handleClick,!0),this.pointerEnterHandler=A(n,"pointerenter",this,this.handlePointerEnter,!0),this.pointerLeaveHandler=A(n,"pointerleave",this,this.handlePointerLeave,!0),this.onKeyDownHandler=A(n,"keydown",this,this.handleKeyEvent),e.appendChild(n),n}getElement(){return this.element}focus(){const e=this.getElement();e&&e.focus({preventScroll:!0})}blur(){const e=this.getElement();e&&e.blur()}setRole(e){this.roleName=e}dispose(){this.pointerMoveHandler&&(y(this.pointerMoveHandler),this.pointerMoveHandler=null),this.clickHandler&&(y(this.clickHandler),this.clickHandler=null),this.pointerEnterHandler&&(y(this.pointerEnterHandler),this.pointerEnterHandler=null),this.pointerLeaveHandler&&(y(this.pointerLeaveHandler),this.pointerLeaveHandler=null),this.onKeyDownHandler&&(y(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,n;n=this.menuItems[e];e++)n.dispose();this.element=null}getMenuItem(e){const n=this.getElement();for(;e&&e!==n;){if(e.classList.contains("blocklyMenuItem")){const o=this.getMenuItems();for(let a=0,d;d=o[a];a++)if(d.getElement()===e)return d}e=e.parentElement}return null}setHighlighted(e){var n=this.highlightedItem;if(n&&(n.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,n=this.getElement();const o=e.getElement();n&&o&&(b(o,n),fr(n,ir.ACTIVEDESCENDANT,e.getId()))}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e<0?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,n){e+=n;let o;const a=this.getMenuItems();for(;o=a[e];){if(o.isEnabled()){this.setHighlighted(o);break}e+=n}}handlePointerMove(e){Math.max(Math.abs(e.movementX),Math.abs(e.movementY))!==0&&(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){var n=this.openingCoords;if(this.openingCoords=null,n&&typeof e.clientX=="number"){const o=new Ne(e.clientX,e.clientY);if(Ne.distance(n,o)<1)return}(n=this.getMenuItem(e.target))&&n.performAction(e)}handlePointerEnter(e){this.focus()}handlePointerLeave(e){this.getElement()&&this.setHighlighted(null)}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem;switch(e.key){case"Enter":case" ":n&&n.performAction(e);break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),n=Nr(e);return n.height=e.scrollHeight,n}getMenuItems(){return this.menuItems.filter(e=>e instanceof Gd)}},MR=class{constructor(){this.element=null}createDom(){return this.element=document.createElement("hr"),this.element.className="blocklyMenuSeparator",Xs(this.element,Bn.SEPARATOR),this.element}dispose(){let e;(e=this.element)==null||e.remove(),this.element=null}},Zc="_TEMP_COLLAPSED_INPUT",Vd="_TEMP_COLLAPSED_FIELD",os="MANUALLY_DISABLED",Yk={COLLAPSED_FIELD_NAME:Vd,COLLAPSED_INPUT_NAME:Zc,MANUALLY_DISABLED:os};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(r.inputTypes$$module$build$src$core$inputs$input_types||(r.inputTypes$$module$build$src$core$inputs$input_types={})),r.inputTypes$$module$build$src$core$inputs$input_types;var Wd=new Set,Gg=new WeakSet,Vg=new WeakMap,Ta=null,Wg=null,DR=0,Xd={};Xd.finishQueuedRenders=js,Xd.queueRender=LT,Xd.triggerQueuedRenders=Zi;var Xg,PR;r.Msg$$module$build$src$core$msg=Object.create(null),Xg=function(e){Object.keys(e).forEach(function(n){r.Msg$$module$build$src$core$msg[n]=e[n]})},PR={Msg:r.Msg$$module$build$src$core$msg,setLocale:Xg};var Qc="blocklyToast",FR="blocklyToastMessage",BR="blocklyToastCloseButton",sl=class{static show(e,n){if(n.oncePerSession&&n.id){if(this.shownIds.has(n.id))return;this.shownIds.add(n.id)}this.hide(e);const o=this.createDom(e,n);requestAnimationFrame(()=>{o.style.bottom="2rem"})}static createDom(e,n){const{message:o,duration:a=5,assertiveness:d=sl.Assertiveness.POLITE}=n,p=document.createElement("div");e.getInjectionDiv().appendChild(p),p.dataset.toastId=n.id,p.className=Qc,Xs(p,Bn.STATUS),fr(p,ir.LIVE,d),n=p.appendChild(document.createElement("div")),n.className=FR,n.innerText=o,n=p.appendChild(document.createElement("button")),n.className=BR,fr(n,ir.LABEL,r.Msg$$module$build$src$core$msg.CLOSE);var C=N(ue.SVG,{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},n);fr(C,ir.HIDDEN,!0),N(ue.RECT,{x:19.7782,y:2.80762,width:2,height:24,transform:"rotate(45, 19.7782, 2.80762)",fill:"black"},C),N(ue.RECT,{x:2.80762,y:4.22183,width:2,height:24,transform:"rotate(-45, 2.80762, 4.22183)",fill:"black"},C),n.addEventListener("click",()=>{p.remove(),e.markFocused()});let X;return n=()=>{X=setTimeout(()=>p.remove(),a*1e3)},C=()=>clearTimeout(X),p.addEventListener("focusin",C),p.addEventListener("focusout",n),p.addEventListener("mouseenter",C),p.addEventListener("mousemove",C),p.addEventListener("mouseleave",n),n(),p}static hide(e,n){e=e.getInjectionDiv().querySelector(`.${Qc}`),e instanceof HTMLElement&&(!n||n===e.dataset.toastId)&&e.remove()}};sl.shownIds=new Set,function(e){e=e.Assertiveness||(e.Assertiveness={}),e.ASSERTIVE="assertive",e.POLITE="polite"}(sl||(sl={})),Xe(`
.${Qc} {
  font-size: 1.2rem;
  position: absolute;
  bottom: -10rem;
  right: 2rem;
  padding: 1rem;
  color: black;
  background-color: white;
  border: 2px solid black;
  border-radius: 0.4rem;
  z-index: 999;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  line-height: 1.5;
  transition: bottom 0.3s ease-out;
}

.${Qc} .${FR} {
  maxWidth: 18rem;
}

.${Qc} .${BR} {
  margin: 0;
  padding: 0.2rem;
  background-color: transparent;
  color: black;
  border: none;
  cursor: pointer;
}
`);var UR=function(e,n){window.alert(e),n&&n()},HR=UR,GR=function(e,n){n(window.confirm(e))},VR=GR,WR=function(e,n,o){o(window.prompt(e,n))},XR=WR,jR=sl.show.bind(sl),zR=jR,Ci={};Ci.alert=Nc,Ci.confirm=Yh,Ci.prompt=Kh,Ci.setAlert=WI,Ci.setConfirm=XI,Ci.setPrompt=jI,Ci.setToast=YI,Ci.toast=zI;var YR=new Set,KR={};KR.warn=br;var jg="VARIABLE",zg="ijkmnopqrstuvwxyzabcdefgh",JR={generateUniqueNameInternal:qI},or={CATEGORY_NAME:jg,TEST_ONLY:JR,VAR_LETTER_OPTIONS:zg};or.allDeveloperVariables=r.allDeveloperVariables$$module$build$src$core$variables,or.allUsedVarModels=r.allUsedVarModels$$module$build$src$core$variables,or.compareByName=ql,or.createVariableButtonHandler=jo,or.deleteVariable=r.deleteVariable$$module$build$src$core$variables,or.flyoutCategory=NT,or.flyoutCategoryBlocks=bT,or.generateUniqueName=yT,or.generateUniqueNameFromOptions=Qh,or.generateVariableFieldDom=zo,or.getAddedVariables=bc,or.getOrCreateVariablePackage=r.getOrCreateVariablePackage$$module$build$src$core$variables,or.getVariable=r.getVariable$$module$build$src$core$variables,or.getVariableUsesById=Zl,or.internalFlyoutCategory=Jh,or.jsonFlyoutCategoryBlocks=Zh,or.nameUsedWithAnyType=kT,or.nameUsedWithConflictingParam=wT,or.promptName=ed,or.renameVariable=r.renameVariable$$module$build$src$core$variables;var pa=class extends Error{},qR=class extends pa{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},eu=class extends pa{constructor(e,n,o){super(`The block ${n.toDevString()} is missing a(n) ${e}
connection`),this.block=n,this.state=o}},ZR=class extends pa{constructor(e,n,o,a){super(`The block ${o.toDevString()} could not connect its
${n} to its parent, because: ${e}`),this.childBlock=o,this.childState=a}},QR=class extends pa{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},eL=class extends pa{constructor(e,n,o){super(`Cannot add an icon of type '${e}' to the block ${n.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=n,this.state=o}},il={};il.BadConnectionCheck=ZR,il.DeserializationError=pa,il.MissingBlockType=qR,il.MissingConnection=eu,il.RealChildOfShadow=QR,il.UnregisteredIcon=eL;var tL=class{constructor(){this.priority=yR}save(e){const n=[];for(const o of e.getTopBlocks(!1))(e=ss(o,{addCoordinates:!0,doFullSerialization:!1}))&&n.push(e);return n.length?{languageVersion:0,blocks:n}:null}load(e,n){e=e.blocks;for(const o of e)Qi(o,n,{recordUndo:K()})}clear(e){for(const n of e.getTopBlocks(!1))n.dispose(!1)}};$i("blocks",new tL);var tu={};tu.BlockSerializer=tL,tu.append=Qi,tu.appendInternal=Ql,tu.save=ss;var gr=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};gr.MUTATOR=new gr("mutator"),gr.WARNING=new gr("warning"),gr.COMMENT=new gr("comment");var ol=class extends da{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new ol),n.blockId=e.blockId,n}},ll=class extends ol{constructor(e,n,o,a,d){super(e),this.type=de.BLOCK_CHANGE,e&&(this.element=n,this.name=o||void 0,this.oldValue=a,this.newValue=d)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new ll),n.element=e.element,n.name=e.name,n.oldValue=e.oldValue,n.newValue=e.newValue,e.disabledReason!==void 0&&(n.disabledReason=e.disabledReason),n}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(n=n.getBlockById(this.blockId),!n)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const o=n.getIcon(gr.MUTATOR);switch(o&&Yo(o)&&o.bubbleIsVisible()&&o.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":var a;n.setDisabledReason(!!e,(a=this.disabledReason)!=null?a:os);break;case"inline":n.setInputsInline(!!e);break;case"mutation":a=ll.getExtraBlockState_(n),n.loadExtraState?n.loadExtraState(JSON.parse(e||"{}")):n.domToMutation&&n.domToMutation(r.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),z(new ll(n,"mutation",null,a,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?Ys(e):""}};i(Le.EVENT,de.BLOCK_CHANGE,ll);var jd={};jd.clamp=ea,jd.toDegrees=mO,jd.toRadians=td;var zd=16,rL=1,nL=12,Yg=16,Yd=.25,Kg=null,al=null,sL="",iL="",qt,ru,cl,Jg=null,lo=null,oL=null,Kd=null,Jd=null,qg={getBoundsInfo:function(){const e=Gs(Jg),n=Nr(Jg);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},getPositionMetrics:function(e,n,o,a){const d=qg.getBoundsInfo(),p=Nr(qt);return n+p.height<d.bottom?jT(e,n,d,p):a-p.height>d.top?zT(o,a,d,p):n+p.height<document.documentElement.clientHeight?jT(e,n,d,p):a-p.height>document.documentElement.clientTop?zT(o,a,d,p):IO(e,d,p)}},Qr={ANIMATION_TIME:Yd,ARROW_HORIZONTAL_PADDING:nL,ARROW_SIZE:zd,BORDER_SIZE:rL,PADDING_Y:Yg,TEST_ONLY:qg};Qr.clearContent=sd,Qr.createDom=rd,Qr.getContentDiv=nd,Qr.getOwner=BT,Qr.getPositionX=yc,Qr.hide=od,Qr.hideIfOwner=id,Qr.hideWithoutAnimation=zs,Qr.isVisible=YT,Qr.repositionForWindowResize=JT,Qr.setBoundsElement=FT,Qr.setColour=UT,Qr.show=XT,Qr.showPositionedByBlock=$O,Qr.showPositionedByField=HT;var ga={};ga.commonWordPrefix=qT,ga.commonWordSuffix=ZT,ga.isNumber=r.isNumber$$module$build$src$core$utils$string,ga.shortestStringLength=kc,ga.wrap=r.wrap$$module$build$src$core$utils$string;var qd=void 0,nu=!1,Ea=!1,lL=50,aL=0,ul=0,Zg=0,Qg=0,ls=null,su=null,eE=0,tE=10,cL=10,uL=750,Zd=5,Er=null,Un={HOVER_MS:uL,LIMIT:lL,MARGINS:Zd,OFFSET_X:eE,OFFSET_Y:tE,RADIUS_OK:cL};Un.bindMouseEvents=wc,Un.block=ip,Un.createDom=tp,Un.dispose=sp,Un.getCustomTooltip=LO,Un.getDiv=vO,Un.getTooltipOfObject=ta,Un.hide=Ii,Un.isVisible=AO,Un.setCustomTooltip=RO,Un.unbindMouseEvents=rp,Un.unblock=op;var rE=.45,nE=.65,hL={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},as={};as.blend=Jo,as.getHsvSaturation=lp,as.getHsvValue=ap,as.hexToRgb=ad,as.hsvToHex=cd,as.hueToHex=cp,as.names=hL,as.parse=Ko,as.rgbToHex=Mc,as.setHsvSaturation=wO,as.setHsvValue=MO;var iu={};iu.checkMessageReferences=DO,iu.parseBlockColour=ra,iu.replaceMessageReferences=rr,iu.tokenizeInterpolation=up;var Lt=class{get size_(){return this.size}set size_(e){this.size=e}constructor(e,n,o){this.DEFAULT_VALUE=null,this.name=void 0,this.tooltip=this.validator_=null,this.size=new lt(0,0),this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.id_=null,this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new lt(0,0),e!==Lt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),n&&this.setValidator(n))}configure_(e){e.tooltip&&this.setTooltip(rr(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");if(this.sourceBlock_=e,e.id.includes("_field"))throw Error(`Field ID indicator is contained in block ID. This may cause problems with focus: ${e.id}.`);this.id_=`${e.id}_field_${B()}`}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){if(!this.fieldGroup_){var e=this.id_;if(!e)throw Error("Expected ID to be defined prior to init.");this.fieldGroup_=N(ue.G,{id:e}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour()}}initView(){this.createBorderRect_(),this.createTextElement_(),this.fieldGroup_&&fe(this.fieldGroup_,"blocklyField")}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=N(ue.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=N(ue.TEXT,{class:"blocklyText blocklyFieldText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");wc(e),this.mouseDownWrapper=A(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(Lt),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(Lt,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=r.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),ge(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,n){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(r.textToDom$$module$build$src$core$utils$xml(n)),!0):!1}dispose(){id(this),qo(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||Ce(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,n=this.getSourceBlock();this.EDITABLE&&e&&n&&(this.enabled_&&n.isEditable()?(fe(e,"blocklyEditableField"),Me(e,"blocklyNonEditableField")):(fe(e,"blocklyNonEditableField"),Me(e,"blocklyEditableField")))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Lt.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var n=this.fieldGroup_;n&&(n.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const n=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let o=e*2,a=n.FIELD_TEXT_HEIGHT,d=0;this.textElement_&&(d=wt(this.textElement_),o+=d),this.isFullBlockField()||(a=Math.max(a,n.FIELD_BORDER_RECT_HEIGHT)),this.size_=new lt(o,a),this.positionTextElement_(e,d),this.positionBorderRect_()}positionTextElement_(e,n){if(this.textElement_){var o=this.getConstants(),a=this.size_.height/2,d;this.textElement_.setAttribute("x",String((d=this.getSourceBlock())!=null&&d.RTL?this.size_.width-n-e:e)),this.textElement_.setAttribute("y",String(o.FIELD_TEXT_BASELINE_CENTER?a:a-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_&&(this.render_(),this.isDirty_=!1),this.size_):new lt(0,0)}getScaledBBox(){let e;var n=this.getSourceBlock();if(!n)throw new lr;if(this.isFullBlockField()){var o=this.sourceBlock_.getHeightWidth();const a=n.workspace.scale;e=this.getAbsoluteXY_(),n=(o.width+1)*a,o=(o.height+1)*a,aR?(e.x+=1.5*a,e.y+=1.5*a):(e.x-=.5*a,e.y-=.5*a)}else o=this.borderRect_.getBoundingClientRect(),e=Gs(this.borderRect_),n=o.width,o=o.height;return new it(e.y,e.y+o,e.x,e.x+n)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,Lt.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,n=!0){if(e!==null){var o=r.getGroup$$module$build$src$core$events$utils();o||r.setGroup$$module$build$src$core$events$utils(!0);try{const Ie=this.doClassValidation_(e),Ke=this.processValidation(e,Ie,n);if(!(Ke instanceof Error)){var a,d=(a=this.getValidator())==null?void 0:a.call(this,Ke),p=this.processValidation(Ke,d,n);if(!(p instanceof Error)){var C=this.sourceBlock_;if(!C||!C.disposed){var X=this.getValue();X===p?this.doValueUpdate_(p):(this.doValueUpdate_(p),n&&C&&he()&&z(new(ce(de.BLOCK_CHANGE))(C,"field",this.name||null,X,p)),this.isDirty_&&this.forceRerender())}}}}finally{r.setGroup$$module$build$src$core$events$utils(o)}}}processValidation(e,n,o){return n===null?(this.doValueInvalid_(e,o),this.isDirty_&&this.forceRerender(),Error()):n===void 0?e:n}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,n){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const n=this.getClickTarget_();n?n.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return ta(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return Gs(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const n=this.getSourceBlock();if(!n)throw new lr;const o=n.inputList;for(let a=0;a<n.inputList.length;a++){const d=o[a],p=d.fieldRow;for(let C=0;C<p.length;C++)if(p[C]===this){e=d;break}}return e}getFlipRtl(){return!1}onShortcut(e){return!1}getFocusableElement(){if(!this.fieldGroup_)throw Error("This field currently has no representative DOM element.");return this.fieldGroup_}getFocusableTree(){const e=this.getSourceBlock();if(!e)throw new lr;return e.workspace}onNodeFocus(){const e=this.getSourceBlock();e.workspace.scrollBoundsIntoView(e.getBoundingRectangleWithoutChildren())}onNodeBlur(){}canBeFocused(){return!0}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};Lt.NBSP="",Lt.SKIP_SETUP=Symbol("SKIP_SETUP");var lr=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},ma=null,dL=null,Qd=null,sE="blocklyWidgetDiv",$a="",Ia="",Hn,ef=null,Ss={};Ss.createDom=hp,Ss.getDiv=na,Ss.hide=sa,Ss.hideIfOwner=qo,Ss.hideIfOwnerIsInWorkspace=Dc,Ss.isVisible=dp,Ss.positionWithAnchor=_p,Ss.repositionForWindowResize=Tp,Ss.show=hd,Ss.testOnly_setDiv=PO;var tf=null,fL={},rf=null,hl={};hl.callbackFactory=r.callbackFactory$$module$build$src$core$contextmenu,hl.dispose=gp,hl.getCurrentBlock=HO,hl.hide=Pc,hl.setCurrentBlock=pp,hl.show=ia;var ht=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let n;return(n=this.registeredItems.get(e))!=null?n:null}getContextMenuOptions(e,n){const o=[];for(const a of this.registeredItems.values()){if(a.scopeType&&(a.scopeType===iE.BLOCK&&!e.block||a.scopeType===iE.COMMENT&&!e.comment||a.scopeType===iE.WORKSPACE&&!e.workspace))continue;let d;if(d={scope:e,weight:a.weight},a.separator)d=Object.assign({},d,{separator:!0});else{const p=a.preconditionFn(e,n);if(p==="hidden")continue;const C=typeof a.displayText=="function"?a.displayText(e):a.displayText;d=Object.assign({},d,{text:C,callback:a.callback,enabled:p==="enabled"})}o.push(d)}return o.sort(function(a,d){return a.weight-d.weight}),o}};(function(e){var n=e.ScopeType||(e.ScopeType={});n.BLOCK="block",n.WORKSPACE="workspace",n.COMMENT="comment",e.registry=new e})(ht||(ht={}));var iE=ht.ScopeType,ao=50,nf=100,Kk={BLOCK:ao,BUBBLE:nf},_L=class{constructor(e){this.comment=e,this.startLoc=null,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.isReadOnly()}startDrag(){this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,ao),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0)}fireDragStartEvent(){const e=new(ce(de.COMMENT_DRAG))(this.comment,!0);z(e)}fireDragEndEvent(){const e=new(ce(de.COMMENT_DRAG))(this.comment,!1);z(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(ce(de.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),z(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},TL=new WeakMap,sf=class{constructor(e,n,o,a){this.id=e,this.workspace=n,this.container=o,this.commentView=a}isVisible(){return this.icon.checkVisibility()}getCommentView(){return this.commentView}getSize(e=!1){var n=this.icon.getBBox();return n=it.from(n),e&&(e=this.getMargin(),n.left-=e,n.top-=e,n.bottom+=e,n.right+=e),n}getMargin(){return(this.container.getBBox().height-this.icon.getBBox().height)/2}getFocusableElement(){return this.icon}getFocusableTree(){return this.workspace}onNodeFocus(){const e=this.getCommentView();var n=e.getRelativeToSurfaceXY();const o=e.getSize();n=new it(n.y,n.y+o.height,n.x,n.x+o.width),e.workspace.scrollBoundsIntoView(n)}onNodeBlur(){}canBeFocused(){return this.isVisible()}},pL="_collapse_bar_button",gL=class extends sf{constructor(e,n,o,a){super(e,n,o,a),this.id=e,this.workspace=n,this.container=o,this.commentView=a,this.icon=N(ue.IMAGE,{class:"blocklyFoldoutIcon",href:`${this.workspace.options.pathToMedia}foldout-icon.svg`,id:`${this.id}${pL}`},this.container),this.bindId=A(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){y(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${e}`)}performAction(e){R(),this.getCommentView().bringToFront(),e&&e instanceof PointerEvent&&G(e)?e.stopPropagation():(this.getCommentView().setCollapsed(!this.getCommentView().isCollapsed()),this.workspace.hideChaff(),e?.stopPropagation())}},oE="_comment_textarea_",of=class{constructor(e,n,o){this.workspace=e,this.onFinishEditing=o,this.textChangeListeners=[],this.text="",this.foreignObject=N(ue.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"}),e=document.createElementNS(tl,"body"),e.setAttribute("xmlns",tl),e.className="blocklyMinimalBody",this.textArea=document.createElementNS(tl,"textarea"),this.textArea.setAttribute("tabindex","-1"),this.textArea.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),fe(this.textArea,"blocklyCommentText"),fe(this.textArea,"blocklyTextarea"),fe(this.textArea,"blocklyText"),e.appendChild(this.textArea),this.foreignObject.appendChild(e),n&&(this.id=n+oE,this.textArea.setAttribute("id",this.id)),A(this.textArea,"change",this,this.onTextChange),A(this.textArea,"pointerdown",this,a=>{a.stopPropagation(),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this),R()}),A(this.textArea,"wheel",this,a=>{a.stopPropagation()}),A(this.textArea,"keydown",this,this.handleKeyDown)}getDom(){return this.foreignObject}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}onTextChange(){const e=this.text;this.text=this.textArea.value;for(let n=this.textChangeListeners.length-1;n>=0;n--)this.textChangeListeners[n](e,this.text)}handleKeyDown(e){(e.key==="Escape"||e.key==="Enter"&&(e.ctrlKey||e.metaKey))&&(this.onFinishEditing&&this.onFinishEditing(),e.stopPropagation())}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}setPlaceholderText(e){this.textArea.placeholder=e}setEditable(e){e?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","true")}updateSize(e,n){this.foreignObject.setAttribute("height",`${e.height-n.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${n.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}getFocusableElement(){return this.textArea}getFocusableTree(){return this.workspace}onNodeFocus(){const e=it.from(this.foreignObject.getBoundingClientRect());this.workspace.scrollBoundsIntoView(it.createFromPoint(Te(this.workspace,e.getOrigin()),e.getWidth(),e.getHeight()))}onNodeBlur(){}canBeFocused(){return!!this.id}},EL="_delete_bar_button",mL=class extends sf{constructor(e,n,o,a){super(e,n,o,a),this.id=e,this.workspace=n,this.container=o,this.commentView=a,this.icon=N(ue.IMAGE,{class:"blocklyDeleteIcon",href:`${this.workspace.options.pathToMedia}delete-icon.svg`,id:`${this.id}${EL}`},o),this.bindId=A(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){y(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("x","0");const n=this.container.getBBox();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${n.width-this.getSize(!0).getWidth()}`)}performAction(e){R(),e&&e instanceof PointerEvent&&G(e)?e.stopPropagation():(this.getCommentView().dispose(),e?.stopPropagation(),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.workspace))}},ou=class{constructor(e,n){this.workspace=e,this.commentId=n,this.collapsed=!1,this.editable=!0,this.location=new Ne(0,0),this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=N(ue.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteButton:this.deleteButton,foldoutButton:this.foldoutButton,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot),this.commentEditor=this.createTextArea(),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let o;(o=e.getLayerManager())==null||o.append(this,ao),this.size=ou.defaultCommentSize,this.setSizeWithoutFiringEvents(this.size),this.moveTo(new Ne(0,0))}createHighlightRect(e){return N(ue.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e){e=N(ue.G,{class:"blocklyCommentTopbar"},e);const n=N(ue.RECT,{class:"blocklyCommentTopbarBackground"},e),o=new mL(this.commentId,this.workspace,e,this),a=new gL(this.commentId,this.workspace,e,this);this.addDisposeListener(()=>{o.dispose(),a.dispose()});const d=N(ue.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),p=document.createTextNode("");return d.appendChild(p),{topBarGroup:e,topBarBackground:n,deleteButton:o,foldoutButton:a,textPreview:d,textPreviewNode:p}}createTextArea(){const e=new of(this.workspace,this.commentId,()=>this.svgRoot.focus());return this.svgRoot.appendChild(e.getDom()),e.addTextChangeListener((n,o)=>{this.updateTextPreview(o),this.setSize(this.size)}),e}getEditorFocusableNode(){return this.commentEditor}createResizeHandle(e,n){return e=N(ue.IMAGE,{class:"blocklyResizeHandle",href:`${n.options.pathToMedia}resize-handle.svg`},e),A(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const n=this.topBarBackground.getBBox(),o=this.textPreview.getBBox(),a=this.resizeHandle.getBBox();this.size=e=lt.max(e,this.calcMinSize(n)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.commentEditor.updateSize(e,n),this.deleteButton.reposition(),this.foldoutButton.reposition(),this.updateTextPreviewSize(e,n,o),this.updateResizeHandlePosition(e,a)}setSize(e){const n=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(n,this.size)}calcMinSize(e){var n;this.updateTextPreview((n=this.commentEditor.getText())!=null?n:"");let o=n=wt(this.textPreview);return this.foldoutButton.isVisible()?o+=this.foldoutButton.getSize(!0).getWidth():n&&(o+=4),this.deleteButton.isVisible()?o+=this.deleteButton.getSize(!0).getWidth():n&&(o+=4),new lt(o,e.height+20)}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextPreviewSize(e,n,o){n=(n.height-o.height)/2;const a=this.foldoutButton.getSize(!0),d=this.deleteButton.getSize(!0);e=e.width-a.getWidth()-d.getWidth(),this.textPreview.setAttribute("x",`${(this.workspace.RTL?-1:1)*a.getWidth()}`),this.textPreview.setAttribute("y",`${n+o.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,n){this.resizeHandle.setAttribute("y",`${e.height-n.height}`),this.resizeHandle.setAttribute("x",`${e.width-n.width}`)}onSizeChange(e,n){for(let o=this.sizeChangeListeners.length-1;o>=0;o--)this.sizeChangeListeners[o](e,n)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),G(e)||(this.preResizeSize=this.getSize(),dd(this.workspace,e,new Ne(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=A(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=A(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){R(),this.resizePointerUpListener&&(y(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(y(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=fd(this.workspace,e),this.setSizeWithoutFiringEvents(new lt(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?fe(this.svgRoot,"blocklyCollapsed"):Me(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;e>=0;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(fe(this.svgRoot,"blocklyEditable"),Me(this.svgRoot,"blocklyReadonly")):(Me(this.svgRoot,"blocklyEditable"),fe(this.svgRoot,"blocklyReadonly")),this.commentEditor.setEditable(e)}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.commentEditor.getText()}setText(e){this.commentEditor.setText(e)}setPlaceholderText(e){this.commentEditor.setPlaceholderText(e)}addTextChangeListener(e){this.commentEditor.addTextChangeListener(e)}removeTextChangeListener(e){this.commentEditor.removeTextChangeListener(e)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return e.length>=12?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,n=e.childNodes;n[n.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){R(),G(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,Ce(this.svgRoot);for(let e=this.disposeListeners.length-1;e>=0;e--)this.disposeListeners[e]();this.disposeListeners.length=0,this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}getCommentBarButtons(){return[this.foldoutButton,this.deleteButton]}};ou.defaultCommentSize=new lt(120,100),Xe(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklyCommentText.blocklyActiveFocus {
  border-color: #fc3;
  border-width: 2px;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var lf=class{constructor(e,n){this.workspace=e,this.text="",this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new Ne(0,0),this.disposing=this.disposed=!1,this.id=n&&!e.getCommentById(n)?n:re(),this.size=ou.defaultCommentSize,e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){he()&&z(new(ce(de.COMMENT_CREATE))(this))}fireDeleteEvent(){he()&&z(new(ce(de.COMMENT_DELETE))(this))}fireChangeEvent(e,n){he()&&z(new(ce(de.COMMENT_CHANGE))(this,e,n))}fireCollapseEvent(e){he()&&z(new(ce(de.COMMENT_COLLAPSE))(this,e))}setText(e){const n=this.text;this.text=e,this.fireChangeEvent(n,e)}getText(){return this.text}setSize(e){const n=new(ce(de.COMMENT_RESIZE))(this);this.size=e,n.recordCurrentSizeAsNewSize(),z(n)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnDeletable(){return this.deletable}moveTo(e,n){const o=new(ce(de.COMMENT_MOVE))(this);n&&o.setReason(n),this.location=e,o.recordNew(),z(o)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},xi=class extends lf{constructor(e,n){super(e,n),this.dragStrategy=new _L(this),this.workspace=e,this.view=new ou(e,this.id),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.view.getSvgRoot().setAttribute("id",this.id),this.addModelUpdateBindings(),A(this.view.getSvgRoot(),"pointerdown",this,this.startGesture)}addModelUpdateBindings(){this.view.addTextChangeListener((e,n)=>void super.setText(n)),this.view.addSizeChangeListener((e,n)=>void super.setSize(n)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setPlaceholderText(e){this.view.setPlaceholderText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var n,o;const a=(o=(n=this.view)==null?void 0:n.getSize())!=null?o:this.getSize();return this.workspace.RTL?(n=e.x-a.width,o=e.x):(n=e.x,o=e.x+a.width),new it(e.y,e.y+a.height,n,o)}moveBy(e,n,o){const a=this.getRelativeToSurfaceXY();e=new Ne(a.x+e,a.y+n),this.moveTo(e,o)}moveTo(e,n){super.moveTo(e,n),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?fe(this.getSvgRoot(),"blocklyDragging"):Me(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0;const e=r.getFocusManager$$module$build$src$core$focus_manager();e.getFocusedNode()===this&&setTimeout(()=>e.focusTree(this.workspace),0),this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const n=this.workspace.getGesture(e);n&&(n.handleCommentStart(e,this),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this))}setDeleteStyle(e){e?fe(this.getSvgRoot(),"blocklyDraggingDelete"):Me(this.getSvgRoot(),"blocklyDraggingDelete")}isCopyable(){return this.isOwnMovable()&&this.isOwnDeletable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){fe(this.getSvgRoot(),"blocklySelected"),Be(this)}unselect(){Me(this.getSvgRoot(),"blocklySelected"),Be(null)}toCopyData(){return{paster:Hd.TYPE,commentState:Kl(this,{addCoordinates:!0,saveIds:!1})}}showContextMenu(e){const n=ht.registry.getContextMenuOptions({comment:this,focusedNode:this},e);let o;o=e instanceof PointerEvent?new Ne(e.clientX,e.clientY):Se(this.workspace,this.getRelativeToSurfaceXY()).translate(10,10),ia(e,n,this.workspace.RTL,this.workspace,o)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var n=this.getRelativeToSurfaceXY();e=e.alignXY(n),e!==n&&this.moveTo(e,["snap"])}}}getEditorFocusableNode(){return this.view.getEditorFocusableNode()}getFocusableElement(){return this.getSvgRoot()}getFocusableTree(){return this.workspace}onNodeFocus(){this.select();let e;(e=this.workspace.getLayerManager())==null||e.append(this,ao),this.workspace.scrollBoundsIntoView(this.getBoundingRectangle())}onNodeBlur(){this.unselect()}canBeFocused(){return!0}},en={};en.appendDomToWorkspace=qO,en.blockToDom=eo,en.blockToDomWithXY=Bc,en.clearWorkspaceAndLoadFromXml=JO,en.deleteNext=oS,en.domToBlock=r.domToBlock$$module$build$src$core$xml,en.domToBlockInternal=Zo,en.domToPrettyText=KO,en.domToText=Ys,en.domToVariables=Op,en.domToWorkspace=r.domToWorkspace$$module$build$src$core$xml,en.loadWorkspaceComment=Ip,en.saveWorkspaceComment=Fc,en.variablesToDom=mp,en.workspaceToDom=jO;var lE=class extends ol{constructor(e){super(e),this.type=de.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Bc(e),this.ids=Pe(e),this.json=ss(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ys(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new lE),n.xml=r.textToDom$$module$build$src$core$utils$xml(e.xml),n.ids=e.ids,n.json=e.json,e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!Jk(n,this.ids))if(e)Qi(this.json,n);else for(e=0;e<this.ids.length;e++){const o=this.ids[e],a=n.getBlockById(o);a?a.dispose(!1):o===this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},Jk=function(e,n){return n.map(o=>e.getBlockById(o)).filter(o=>o&&o.isShadow()).length===n.length};i(Le.EVENT,de.BLOCK_CREATE,lE);var aE=class extends qs{constructor(e,n){super(n),this.type=de.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new aE),n.themeName=e.themeName,n}};i(Le.EVENT,de.THEME_CHANGE,aE);var cE=class extends qs{constructor(e,n,o,a,d){super(a),this.type=de.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=n,this.scale=o,this.oldScale=d}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new cE),n.viewTop=e.viewTop,n.viewLeft=e.viewLeft,n.scale=e.scale,n.oldScale=e.oldScale,n}};i(Le.EVENT,de.VIEWPORT_CHANGE,cE);var $L={fromJsonInternal:aS},af={TEST_ONLY:$L};af.fromJson=r.fromJson$$module$build$src$core$field_registry,af.register=Ks,af.unregister=lS;var Vr=class extends Lt{constructor(e,n,o){super(Lt.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==Lt.SKIP_SETUP&&(this.setOptions(e),o&&this.configure_(o),n&&this.setValidator(n))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(Vr,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=N(ue.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&fe(this.borderRect_,"blocklyDropdownRect"),this.fieldGroup_&&(fe(this.fieldGroup_,"blocklyField"),fe(this.fieldGroup_,"blocklyDropdownField"))}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=N(ue.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?Vr.ARROW_CHAR+" ":" "+Vr.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let n;(n=this.getSourceBlock())!=null&&n.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=N(ue.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(Fn,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var n=this.getSourceBlock();if(!n)throw new lr;this.dropdownCreate(),this.menu_&&(this.menu_.openingCoords=e&&typeof e.clientX=="number"?new Ne(e.clientX,e.clientY):null,sd(),e=this.menu_.render(nd()),fe(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(n=n.getColour(),e=this.sourceBlock_.getColourTertiary(),UT(n,e)),HT(this,this.dropdownDispose_.bind(this)),nd().style.height=`${this.menu_.getSize().height}px`,this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour())}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new lr;const n=new Hg;n.setRole(Bn.LISTBOX),this.menu_=n;const o=this.getOptions(!1);this.selectedMenuItem=null;for(let d=0;d<o.length;d++){var a=o[d];if(a===Vr.SEPARATOR){n.addChild(new MR);continue}const[p,C]=a;oa(p)?(a=new Image(p.width,p.height),a.src=p.src,a.alt=p.alt):a=p,a=new Gd(a,C),a.setRole(Bn.OPTION),a.setRightToLeft(e.RTL),a.setCheckable(!0),n.addChild(a),a.setChecked(C===this.value_),C===this.value_&&(this.selectedMenuItem=a),a.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){id(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,n){this.setValue(n.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}setOptions(e){Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],this.setValue(this.selectedOption[1])}doClassValidation_(e){return this.getOptions(!0).some(n=>n[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let n=0,o;o=e[n];n++)o[1]===this.value_&&(this.selectedOption=o)}applyColour(){const e=this.sourceBlock_;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.getColourTertiary()),this.menu_?this.borderRect_.setAttribute("fill",e.getColourTertiary()):this.borderRect_.setAttribute("fill","transparent")),e&&this.arrow&&(e.isShadow()?this.arrow.style.fill=e.getColourSecondary():this.arrow.style.fill=e.getColour())}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];oa(e)?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const n=this.getSourceBlock();if(!n)throw new lr;this.imageElement.style.display="",this.imageElement.setAttributeNS(Fn,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const o=Number(e.height);e=Number(e.width);var a=!!this.borderRect_;const d=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,o+Vr.IMAGE_Y_PADDING);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let p;p=this.svgArrow?this.positionSVGArrow(e+a,d/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):wt(this.arrow),this.size_=new lt(e+p+a*2,d);let C=0;n.RTL?this.imageElement.setAttribute("x",`${a+p}`):(C=e+p,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${a}`)),this.imageElement.setAttribute("y",String(d/2-o/2)),this.positionTextElement_(C+a,e+p)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();fe(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var n=!!this.borderRect_;e=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const o=wt(this.getTextElement());n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let a=0;this.svgArrow&&(a=this.positionSVGArrow(o+n,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_=new lt(o+a+n*2,e),this.positionTextElement_(n,o)}positionSVGArrow(e,n){if(!this.svgArrow)return 0;const o=this.getSourceBlock();if(!o)throw new lr;const a=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,p=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(o.RTL?a:e+d)+","+n+")"),p+d}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];if(oa(e))return e.alt;if(typeof HTMLElement<"u"&&e instanceof HTMLElement){let n,o;return(o=(n=e.title)!=null?n:e.ariaLabel)!=null?o:e.innerText}return typeof e=="string"?e:(console.warn("Can't get text for existing dropdown option. If you're using HTMLElement dropdown options in node, ensure you're using jsdom-global or similar."),null)}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let n=!1;const o=e.map(C=>{if(C===Vr.SEPARATOR)return n=!0,C;const[X,Ie]=C;return typeof X=="string"?[rr(X),Ie]:(n=!0,[oa(X)?Object.assign({},X,{alt:rr(X.alt)}):X,Ie])});if(n||e.length<2)return{options:o};var a=o.map(([C])=>C),d=kc(a);e=qT(a,d);const p=ZT(a,d);return!e&&!p||d<=e+p?{options:o}:(d=e?a[0].substring(0,e-1):void 0,a=p?a[0].substr(1-p):void 0,{options:this.applyTrim(o,e,p),prefix:d,suffix:a})}applyTrim(e,n,o){return e.map(([a,d])=>[a.substring(n,a.length-o),d])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let n=!1;for(let o=0;o<e.length;o++){const a=e[o];Array.isArray(a)||a===Vr.SEPARATOR?typeof a[1]!="string"?(n=!0,console.error(`Invalid option[${o}]: Each FieldDropdown option id must be a string.
          Found ${a[1]} in: ${a}`)):!a[0]||typeof a[0]=="string"||oa(a[0])||typeof HTMLElement<"u"&&a[0]instanceof HTMLElement||(n=!0,console.error(`Invalid option[${o}]: Each FieldDropdown option must have a string
          label, image description, or HTML element. Found ${a[0]} in: ${a}`)):(n=!0,console.error(`Invalid option[${o}]: Each FieldDropdown option must be an array or
          the string literal 'separator'. Found: ${a}`))}if(n)throw TypeError("Found invalid FieldDropdown options.")}};Vr.SEPARATOR="separator",Vr.ARROW_CHAR="",Vr.IMAGE_Y_OFFSET=5,Vr.IMAGE_Y_PADDING=Vr.IMAGE_Y_OFFSET*2,Ks("field_dropdown",Vr);var dl=class{constructor(e,n,o,a){this.name=e,this.startHats=!1,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=a||Object.create(null),this.fontStyle=Object.create(null),i(Le.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,n){this.blockStyles[e]=n}setCategoryStyle(e,n){this.categoryStyles[e]=n}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const n=this.getComponentStyle(e);if(n)return n}return`${e}`}setComponentStyle(e,n){this.componentStyles[e]=n}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,n){e=e.toLowerCase();const o=new dl(e);let a=n.base;if(a){if(typeof a=="string"){let d;a=(d=_(Le.THEME,a))!=null?d:void 0}a instanceof dl&&(ct(o,a),o.name=e)}return ct(o.blockStyles,n.blockStyles),ct(o.categoryStyles,n.categoryStyles),ct(o.componentStyles,n.componentStyles),ct(o.fontStyle,n.fontStyle),n.startHats!==null&&(o.startHats=n.startHats),o}},qk={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Zk={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},cf=new dl("classic",qk,Zk),Zs=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let n=null,o=!1;var a=!1,d=!1,p=!1,C=!1,X=!1;const Ie=!!e.readOnly;if(!Ie){var Ke;n=De((Ke=e.toolbox)!=null?Ke:null),o=Ue(n),a=e.trashcan,a=a===void 0?o:a,d=e.collapse,d=d===void 0?o:d,p=e.comments,p=p===void 0?o:p,C=e.disable,C=C===void 0?o:C,X=e.sounds,X=X===void 0?!0:X}Ke=e.maxTrashcanContents,a?Ke===void 0&&(Ke=32):Ke=0;const jt=!!e.rtl;let yt=e.horizontalLayout;yt===void 0&&(yt=!1);var Wr=e.toolboxPosition!=="end";Wr=yt?Wr?at.TOP:at.BOTTOM:Wr===jt?at.RIGHT:at.LEFT;let ki=e.css;ki===void 0&&(ki=!0);let li="https://blockly-demo.appspot.com/static/media/";e.media&&(li=e.media.endsWith("/")?e.media:e.media+"/");const av=e.oneBasedIndex,yw=e.renderer||"geras",kw=e.plugins||{};let o0=e.modalInputs;o0===void 0&&(o0=!0),this.RTL=jt,this.oneBasedIndex=av===void 0?!0:av,this.collapse=d,this.comments=p,this.disable=C,this.readOnly=Ie,this.maxBlocks=e.maxBlocks||1/0;let cv;this.maxInstances=(cv=e.maxInstances)!=null?cv:null,this.modalInputs=o0,this.pathToMedia=li,this.hasCategories=o,this.moveOptions=Zs.parseMoveOptions(e,o),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=a,this.maxTrashcanContents=Ke,this.hasSounds=X,this.hasCss=ki,this.horizontalLayout=yt,this.languageTree=n,this.gridOptions=Zs.parseGridOptions(e),this.zoomOptions=Zs.parseZoomOptions(e),this.toolboxPosition=Wr,this.theme=Zs.parseThemeOptions(e),this.renderer=yw;let uv;this.rendererOverrides=(uv=e.rendererOverrides)!=null?uv:null;let hv;this.parentWorkspace=(hv=e.parentWorkspace)!=null?hv:null,this.plugins=kw}static parseMoveOptions(e,n){const o=e.move||{},a={};return o.scrollbars===void 0&&e.scrollbars===void 0?a.scrollbars=n:typeof o.scrollbars=="object"?(a.scrollbars={horizontal:!!o.scrollbars.horizontal,vertical:!!o.scrollbars.vertical},a.scrollbars.horizontal&&a.scrollbars.vertical?a.scrollbars=!0:a.scrollbars.horizontal||a.scrollbars.vertical||(a.scrollbars=!1)):a.scrollbars=!!o.scrollbars||!!e.scrollbars,a.wheel=a.scrollbars&&o.wheel!==void 0?!!o.wheel:typeof a.scrollbars=="object",a.drag=a.scrollbars?o.drag===void 0?!0:!!o.drag:!1,a}static parseZoomOptions(e){e=e.zoom||{};const n={};return n.controls=e.controls===void 0?!1:!!e.controls,n.wheel=e.wheel===void 0?!1:!!e.wheel,n.startScale=e.startScale===void 0?1:Number(e.startScale),n.maxScale=e.maxScale===void 0?3:Number(e.maxScale),n.minScale=e.minScale===void 0?.3:Number(e.minScale),n.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),n.pinch=e.pinch===void 0?n.wheel||n.controls:!!e.pinch,n}static parseGridOptions(e){e=e.grid||{};const n={};return n.spacing=Number(e.spacing)||0,n.colour=e.colour||"#888",n.length=e.length===void 0?1:Number(e.length),n.snap=n.spacing>0&&!!e.snap,n}static parseThemeOptions(e){return e=e.theme||cf,typeof e=="string"?_(Le.THEME,e):e instanceof dl?e:dl.defineTheme(e.name||"builtin"+B(),e)}},IL=class{constructor(e,n){this.bubble=e,this.workspace=n,this.startLoc=null}isMovable(){return!0}startDrag(){this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,nf),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},Gn,St=class{constructor(e,n,o,a,d){this.workspace=e,this.anchor=n,this.ownerRect=o,this.owner=d,this.size=new lt(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new IL(this,this.workspace),this.id=B(),this.svgRoot=N(ue.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=N(ue.G,{class:"blocklyEmboss"},this.svgRoot),this.tail=N(ue.PATH,{class:"blocklyBubbleTail"},e),this.background=N(ue.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Gn.BORDER_WIDTH,ry:Gn.BORDER_WIDTH},e),this.contentContainer=N(ue.G,{},this.svgRoot),this.focusableElement=a??this.svgRoot,this.focusableElement.setAttribute("id",this.id),A(this.background,"pointerdown",this,this.onMouseDown),A(this.focusableElement,"keydown",this,this.onKeyDown)}dispose(){Ce(this.svgRoot),this.disposed=!0}setAnchorLocation(e,n=!1){this.anchor=e,n?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,n){this.relativeLeft=e,this.relativeTop=n,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,n=!1){e.width=Math.max(e.width,Gn.MIN_SIZE),e.height=Math.max(e.height,Gn.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),n?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let n;(n=this.workspace.getGesture(e))==null||n.handleBubbleStart(e,this),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}onKeyDown(e){e.key==="Escape"&&this.owner&&(this.owner.setBubbleVisible(!1),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.owner))}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,n){this.svgRoot.setAttribute("transform",`translate(${e}, ${n})`)}positionByRect(e=new it(0,0,0,0)){var n=this.workspace.getMetricsManager().getViewMetrics(!0),o=this.getOptimalRelativeLeft(n),a=this.getOptimalRelativeTop(n);const d={x:o,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},p={x:-this.size.width-30,y:a};a={x:e.getWidth(),y:a};var C={x:o,y:e.getHeight()};o=e.getWidth()<e.getHeight()?a:C,e=e.getWidth()<e.getHeight()?C:a,a=this.getOverlap(d,n),C=this.getOverlap(p,n);const X=this.getOverlap(o,n);n=this.getOverlap(e,n),n=Math.max(a,C,X,n),a===n?(this.relativeLeft=d.x,this.relativeTop=d.y):C===n?(this.relativeLeft=p.x,this.relativeTop=p.y):X===n?(this.relativeLeft=o.x,this.relativeTop=o.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,n){var o=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(o+this.size.width,n.left+n.width)-Math.max(o,n.left))*(Math.min(e+this.size.height,n.top+n.height)-Math.max(e,n.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let n=-this.size.width/4;if(this.size.width>e.width)return n;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var o=this.anchor.x-n;o-this.size.width<e.left?n=-(e.left-this.anchor.x+this.size.width):o>e.right&&(n=-(e.right-this.anchor.x))}else{o=n+this.anchor.x;const a=o+this.size.width;o<e.left?n=e.left-this.anchor.x:a>e.right&&(n=e.right-this.anchor.x-this.size.width)}return n}getOptimalRelativeTop(e){let n=-this.size.height/4;if(this.size.height>e.height)return n;const o=this.anchor.y+n,a=o+this.size.height;return e=this.getWorkspaceViewRect(e),o<e.top?n=e.top-this.anchor.y:a>e.bottom&&(n=e.bottom-this.anchor.y-this.size.height),n}getWorkspaceViewRect(e){const n=e.top;let o=e.top+e.height,a=e.left;return e=e.left+e.width,o-=this.getScrollbarThickness(),this.workspace.RTL?a-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new it(n,o,a,e)}getScrollbarThickness(){return sr.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var n=this.size.width/2,o=this.size.height/2,a=-this.relativeLeft,d=-this.relativeTop;if(n===a&&o===d)e.push("M "+n+","+o);else{d-=o,a-=n,this.workspace.RTL&&(a*=-1);var p=Math.sqrt(d*d+a*a),C=Math.acos(a/p);d<0&&(C=2*Math.PI-C);var X=C+Math.PI/2;X>Math.PI*2&&(X-=Math.PI*2);var Ie=Math.sin(X);const jt=Math.cos(X);let yt=(this.size.width+this.size.height)/Gn.TAIL_THICKNESS;yt=Math.min(yt,this.size.width,this.size.height)/4,X=1-Gn.ANCHOR_RADIUS/p,a=n+X*a,d=o+X*d,X=n+yt*jt;const Wr=o+yt*Ie;n-=yt*jt,o-=yt*Ie,Ie=td(this.workspace.RTL?-Gn.TAIL_ANGLE:Gn.TAIL_ANGLE),Ie=C+Ie,Ie>Math.PI*2&&(Ie-=Math.PI*2),C=Math.sin(Ie)*p/Gn.TAIL_BEND,p=Math.cos(Ie)*p/Gn.TAIL_BEND,e.push("M"+X+","+Wr),e.push("C"+(X+p)+","+(Wr+C)+" "+a+","+d+" "+a+","+d),e.push("C"+a+","+d+" "+(n+p)+","+(o+C)+" "+n+","+o)}e.push("z");let Ke;(Ke=this.tail)==null||Ke.setAttribute("d",e.join(" "))}bringToFront(){let e;const n=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&n?.lastChild!==this.svgRoot?(n?.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new Ne(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Be(this)}unselect(){Be(null)}getFocusableElement(){return this.focusableElement}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.bringToFront();var e=this.getRelativeToSurfaceXY();const n=this.getSize();e=new it(e.y,e.y+n.height,e.x,e.x+n.width),this.workspace.scrollBoundsIntoView(e)}onNodeBlur(){this.unselect()}canBeFocused(){return!0}getOwner(){return this.owner}};Gn=St,St.BORDER_WIDTH=6,St.DOUBLE_BORDER=Gn.BORDER_WIDTH*2,St.MIN_SIZE=Gn.DOUBLE_BORDER,St.TAIL_THICKNESS=1,St.TAIL_ANGLE=20,St.TAIL_BEND=4,St.ANCHOR_RADIUS=8;var Ni=class extends St{constructor(e,n,o,a){super(n,o,a),this.workspace=n,this.anchor=o,this.ownerRect=a,this.autoLayout=!0,n=new Zs(e),this.validateWorkspaceOptions(n),this.svgDialog=N(ue.SVG,{x:St.BORDER_WIDTH,y:St.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Zs(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),n.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(ue.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e?.init(this.miniWorkspace),e?.show(n.languageTree)),fe(this.svgRoot,"blocklyMiniWorkspaceBubble"),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let d,p;(d=this.miniWorkspace.getFlyout())==null||(p=d.getWorkspace())==null||p.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress)for(const e of this.miniWorkspace.getTopBlocks(!1)){const n=e.getRelativeToSurfaceXY();if(n.y<20&&e.moveBy(0,20-n.y),e.RTL){let o=-20;const a=this.miniWorkspace.getFlyout();a&&(o-=a.getWidth()),n.x>o&&e.moveBy(o-n.x,0)}else n.x<20&&e.moveBy(20-n.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress){this.autoLayout&&(this.autoLayout=!this.miniWorkspace.keyboardMoveInProgress);var e=this.getSize(),n=this.calculateWorkspaceSize();Math.abs(e.width-n.width)<Ni.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-n.height)<Ni.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${n.width}px`),this.svgDialog.setAttribute("height",`${n.height}px`),this.miniWorkspace.setCachedParentSvgSize(n.width,n.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${n.width}, 0)`),this.setSize(new lt(n.width+St.DOUBLE_BORDER,n.height+St.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let n=e.width+Ni.MARGIN;e=e.height+Ni.MARGIN;const o=this.miniWorkspace.getFlyout();if(o){const a=o.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,a.height+20),n+=o.getWidth()}return new lt(n,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let n;if(e=(n=this.miniWorkspace.getFlyout())==null?void 0:n.getWorkspace())for(const o of e.getAllBlocks(!1))o.setStyle(o.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,n){super.moveTo(e,n),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Ni.MINIMUM_VIEW_CHANGE=10,Ni.MARGIN=St.DOUBLE_BORDER*3;var lu=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new Ne(0,0),this.workspaceLocation=new Ne(0,0),this.svgRoot=null,this.tooltip=e,this.id=B()}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var n=this.sourceBlock;this.svgRoot=N(ue.G,{class:"blocklyIconGroup",id:this.id}),n.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),A(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,wc(this.svgRoot)}}dispose(){rp(this.svgRoot),Ce(this.svgRoot)}getWeight(){return-1}getSize(){return new lt(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",Yo(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=Ne.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}getFocusableElement(){const e=this.svgRoot;if(!e)throw Error("Attempting to focus uninitialized icon.");return e}getFocusableTree(){return this.sourceBlock.workspace}onNodeFocus(){var e=this.sourceBlock.getBoundingRectangle();e=new it(e.top+this.offsetInBlock.y,e.top+this.offsetInBlock.y+this.getSize().height,e.left+this.offsetInBlock.x,e.left+this.offsetInBlock.x+this.getSize().width),this.sourceBlock.workspace.scrollBoundsIntoView(e)}onNodeBlur(){}canBeFocused(){return!0}getSourceBlock(){return this.sourceBlock}},uf,hf;uf=17,hf=16,r.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends lu{constructor(e,n){super(n),this.flyoutBlockTypes=e,this.sourceBlock=n,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),N(ue.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),N(ue.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),N(ue.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),fe(this.svgRoot,"blocklyMutatorIcon"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return r.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new lt(uf,uf)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.getColour());let n;(n=this.miniWorkspaceBubble)==null||n.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let n;(n=this.miniWorkspaceBubble)==null||n.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const n=this;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){if(n.bubbleIsVisible()!==e){if(yield js(),e){n.miniWorkspaceBubble=new Ni(n.getMiniWorkspaceConfig(),n.sourceBlock.workspace,n.getAnchorLocation(),n.getBubbleOwnerRect()),n.applyColour(),n.createRootBlock(),n.addSaveConnectionsListener();let o;(o=n.miniWorkspaceBubble)==null||o.addWorkspaceChangeListener(n.createMiniWorkspaceChangeListener())}else{let o;(o=n.miniWorkspaceBubble)==null||o.dispose(),n.miniWorkspaceBubble=null,n.saveConnectionsListener&&n.sourceBlock.workspace.removeChangeListener(n.saveConnectionsListener),n.saveConnectionsListener=null}z(new(ce(de.BUBBLE_OPEN))(n.sourceBlock,e,"mutator"))}})}getBubble(){return this.miniWorkspaceBubble}getMiniWorkspaceConfig(){let e;const n={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(n.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(o=>({kind:"block",type:o}))}),n}getAnchorLocation(){const e=uf/2;return Ne.sum(this.workspaceLocation,new Ne(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new it(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let n,o,a,d;e=(d=(n=this.miniWorkspaceBubble)==null||(o=n.getWorkspace())==null||(a=o.getFlyout())==null?void 0:a.getWidth())!=null?d:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+hf):hf,hf)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{r.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||ne(e)||me(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=r.getGroup$$module$build$src$core$events$utils();e||r.setGroup$$module$build$src$core$events$utils(!0);var n=ll.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var o=ll.getExtraBlockState_(this.sourceBlock);n!==o&&z(new(ce(de.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,n,o)),r.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=gr.MUTATOR,r.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,r.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Oa=Object.create(null),Qk={allExtensions:Oa};r.register$$module$build$src$core$extensions("parent_tooltip_when_inline",pS);var Rs={TEST_ONLY:Qk};Rs.apply=Td,Rs.buildTooltipForDropdown=r.buildTooltipForDropdown$$module$build$src$core$extensions,Rs.buildTooltipWithFieldText=r.buildTooltipWithFieldText$$module$build$src$core$extensions,Rs.isRegistered=Lp,Rs.register=r.register$$module$build$src$core$extensions,Rs.registerMixin=r.registerMixin$$module$build$src$core$extensions,Rs.registerMutator=r.registerMutator$$module$build$src$core$extensions,Rs.runAfterPageLoad=_S,Rs.unregister=cS;var At;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(At||(At={}));var bi={};bi.arc=nr,bi.curve=vn,bi.line=la,bi.lineOnAxis=qe,bi.lineTo=Js,bi.moveBy=Jt,bi.moveTo=yr,bi.point=Je;var Xt={};Xt.Coordinate=Ne,Xt.KeyCodes=At,Xt.Rect=it,Xt.Size=lt,Xt.Svg=ue,Xt.aria=qc,Xt.array=OR,Xt.browserEvents=Si,Xt.colour=as,Xt.deprecation=KR,Xt.dom=kr,Xt.extensions=Rs,Xt.idGenerator=vg,Xt.math=jd,Xt.object=ER,Xt.parsing=iu,Xt.string=ga,Xt.style=so,Xt.svgMath=rl,Xt.svgPaths=bi,Xt.toolbox=io,Xt.userAgent=Uk,Xt.xml=fa;var df=class extends St{constructor(e,n,o,a){super(e,n,o,void 0,a),this.workspace=e,this.anchor=n,this.ownerRect=o,this.owner=a,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.sizeChangeListeners=[],this.locationChangeListeners=[],this.DEFAULT_SIZE=new lt(160+St.DOUBLE_BORDER,80+St.DOUBLE_BORDER),this.MIN_SIZE=new lt(45+St.DOUBLE_BORDER,20+St.DOUBLE_BORDER),this.editable=!0,fe(this.svgRoot,"blocklyTextInputBubble"),this.editor=new of(e,this.id,()=>{r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}),this.contentContainer.appendChild(this.editor.getDom()),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.editor.getText()}setText(e){this.editor.setText(e)}setEditable(e){this.editable=e,this.editor.setEditable(e)}isEditable(){return this.editable}addTextChangeListener(e){this.editor.addTextChangeListener(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}addLocationChangeListener(e){this.locationChangeListeners.push(e)}createResizeHandle(e,n){return e=N(ue.IMAGE,{class:"blocklyResizeHandle",href:`${n.options.pathToMedia}resize-handle.svg`},e),A(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,n=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const o=e.width-St.DOUBLE_BORDER,a=e.height-St.DOUBLE_BORDER;this.editor.updateSize(new lt(o,a),new lt(0,0)),this.editor.getDom().setAttribute("x",`${St.DOUBLE_BORDER/2}`),this.editor.getDom().setAttribute("y",`${St.DOUBLE_BORDER/2}`),this.resizeGroup.setAttribute("y",`${a}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-St.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${o}`),super.setSize(e,n),this.onSizeChange()}getSize(){return super.getSize()}moveDuringDrag(e){super.moveDuringDrag(e),this.onLocationChange()}setPositionRelativeToAnchor(e,n){super.setPositionRelativeToAnchor(e,n),this.onLocationChange()}positionByRect(e=new it(0,0,0,0)){super.positionByRect(e),this.onLocationChange()}onResizePointerDown(e){this.bringToFront(),G(e)||(dd(this.workspace,e,new Ne(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=A(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=A(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){R(),this.resizePointerUpListener&&(y(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(y(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=fd(this.workspace,e),this.setSize(new lt(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}onLocationChange(){for(const e of this.locationChangeListeners)e()}getEditor(){return this.editor}};Xe(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var ze;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(ze||(ze={}));var Sa=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,n){n=this.calculateIndexForYPos(n),this.connections.splice(n,0,e)}findIndexOfConnection(e,n){if(!this.connections.length)return-1;const o=this.calculateIndexForYPos(n);if(o>=this.connections.length)return-1;n=e.y;let a=o;for(;a>=0&&this.connections[a].y===n;){if(this.connections[a]===e)return a;a--}for(a=o;a<this.connections.length&&this.connections[a].y===n;){if(this.connections[a]===e)return a;a++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let n=0,o=this.connections.length;for(;n<o;){const a=Math.floor((n+o)/2);if(this.connections[a].y<e)n=a+1;else if(this.connections[a].y>e)o=a;else{n=a;break}}return n}removeConnection(e,n){if(e=this.findIndexOfConnection(e,n),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,n){function o(Ke){const jt=d-a[Ke].x,yt=p-a[Ke].y;return Math.sqrt(jt*jt+yt*yt)<=n&&Ie.push(a[Ke]),yt<n}const a=this.connections,d=e.x,p=e.y;e=0;let C=a.length-2,X=C;for(;e<X;)a[X].y<p?e=X:C=X,X=Math.floor((e+C)/2);const Ie=[];if(C=e=X,a.length){for(;e>=0&&o(e);)e--;do C++;while(C<a.length&&o(C))}return Ie}isInYRange(e,n,o){return Math.abs(this.connections[e].y-n)<=o}searchForClosest(e,n,o){if(!this.connections.length)return{connection:null,radius:n};const a=e.y,d=e.x;e.x=d+o.x,e.y=a+o.y;var p=this.calculateIndexForYPos(e.y);o=null;let C=n,X,Ie=p-1;for(;Ie>=0&&this.isInYRange(Ie,e.y,n);)X=this.connections[Ie],this.connectionChecker.canConnect(e,X,!0,C)&&(o=X,C=X.distanceFrom(e)),Ie--;for(;p<this.connections.length&&this.isInYRange(p,e.y,n);)X=this.connections[p],this.connectionChecker.canConnect(e,X,!0,C)&&(o=X,C=X.distanceFrom(e)),p++;return e.x=d,e.y=a,{connection:o,radius:C}}static init(e){const n=[];return n[ze.INPUT_VALUE]=new Sa(e),n[ze.OUTPUT_VALUE]=new Sa(e),n[ze.NEXT_STATEMENT]=new Sa(e),n[ze.PREVIOUS_STATEMENT]=new Sa(e),n}},uE=class extends qs{constructor(e,n,o){super(o),this.type=de.SELECTED,this.oldElementId=e??void 0,this.newElementId=n??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new uE),n.oldElementId=e.oldElementId,n.newElementId=e.newElementId,n}};i(Le.EVENT,de.SELECTED,uE);var hE=class extends ol{constructor(e){if(super(e),this.type=de.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Bc(e),this.ids=Pe(e),this.wasShadow=e.isShadow(),this.oldJson=ss(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=Ys(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new hE),n.oldXml=r.textToDom$$module$build$src$core$utils$xml(e.oldXml),n.ids=e.ids,n.wasShadow=e.wasShadow||n.oldXml.tagName.toLowerCase()==="shadow",n.oldJson=e.oldJson,e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const o=this.ids[e],a=n.getBlockById(o);a?a.dispose(!1):o===this.blockId&&console.warn("Can't delete non-existent block: "+o)}else Qi(this.oldJson,n)}};i(Le.EVENT,de.BLOCK_DELETE,hE);var Tt=class{constructor(e,n){if(this.type=n,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e,e.id.includes("_connection"))throw Error(`Connection ID indicator is contained in block ID. This will cause problems with focus: ${e.id}.`);this.id=`${e.id}_connection_${B()}`}connect_(e){const n=ze.INPUT_VALUE,o=this.getSourceBlock();var a=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let d;if(this.isConnected()){const C=this.stashShadowState(),X=this.targetBlock();X.isShadow()?X.dispose(!1):(this.disconnectInternal(),d=X),this.applyShadowState(C)}let p;he()&&(p=new(ce(de.BLOCK_MOVE))(a),p.setReason(["connect"])),gS(this,e),a.setParent(o),p&&(p.recordNew(),z(p)),d&&(e=this.type===n?d.outputConnection:d.previousConnection)&&((a=Tt.getConnectionForOrphanedConnection(a,e))?e.connect(a):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===ze.INPUT_VALUE||this.type===ze.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const n=r.getGroup$$module$build$src$core$events$utils();n||r.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),r.setGroup$$module$build$src$core$events$utils(n)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:n,childConnection:o}=this.getParentAndChildConnections();if(!n||!o)throw Error("Source connection not connected.");const a=r.getGroup$$module$build$src$core$events$utils();a||r.setGroup$$module$build$src$core$events$utils(!0);let d;he()&&(d=new(ce(de.BLOCK_MOVE))(o.getSourceBlock()),d.setReason(["disconnect"]));const p=this.targetConnection;p&&(p.targetConnection=null),this.targetConnection=null,e&&o.getSourceBlock().setParent(null),d&&(d.recordNew(),z(d)),o.getSourceBlock().isShadow()||n.respawnShadow_(),r.setGroup$$module$build$src$core$events$utils(a)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,n){if(this.getSourceBlock().isDeadOrDying())return!1;var o;return n=(o=e.getInput(n))==null?void 0:o.connection,o=this.targetBlock(),o&&o!==e||!n||n.targetConnection===this?!1:(n.isConnected()&&n.disconnect(),n.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,n;return(n=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?n:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?eo(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?ss(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const n=this.sourceBlock_.inputList;for(let o=0;o<n.length;o++)if(n[o].connection===this){e=n[o];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var n="Output Connection of ";else if(e.previousConnection===this)n="Previous Connection of ";else if(e.nextConnection===this)n="Next Connection of ";else{n=null;for(let o=0,a;a=e.inputList[o];o++)if(a.connection===this){n=a;break}if(n)n='Input "'+n.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return n+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),n=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:n}}applyShadowState({shadowDom:e,shadowState:n}){this.shadowDom=e,this.shadowState=n}setShadowStateInternal({shadowDom:e=null,shadowState:n=null}={}){this.shadowDom=e,this.shadowState=n,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var n=this.getSourceBlock();const o=this.getShadowState(),a=this.getShadowDom();if(n.isDeadOrDying()||!o&&!a)return null;if(o)return n=Ql(o,n.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(a){if(n=Zo(a,n.workspace),e)if(this.type===ze.INPUT_VALUE){if(!n.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(n.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===ze.NEXT_STATEMENT){if(!n.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(n.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return n}return null}serializeShadow(e){e&&(this.shadowDom=eo(e),this.shadowState=ss(e))}static getConnectionForOrphanedConnection(e,n){if(n.type===ze.OUTPUT_VALUE)return mS(e,n.getSourceBlock());e=e.lastConnectionInStack(!0);const o=n.getConnectionChecker();return e&&o.canConnect(n,e,!1)?e:null}};Tt.CAN_CONNECT=0,Tt.REASON_SELF_CONNECTION=1,Tt.REASON_WRONG_TYPE=2,Tt.REASON_TARGET_NULL=3,Tt.REASON_CHECKS_FAILED=4,Tt.REASON_DIFFERENT_WORKSPACES=5,Tt.REASON_SHADOW_PARENT=6,Tt.REASON_DRAG_CHECKS_FAILED=7,Tt.REASON_PREVIOUS_AND_OUTPUT=8;var OL=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},SL={};SL.DuplicateIconType=OL,function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"}(r.Align$$module$build$src$core$inputs$align||(r.Align$$module$build$src$core$inputs$align={})),r.Align$$module$build$src$core$inputs$align;var fl=class extends Lt{constructor(e,n,o){super(Lt.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==Lt.SKIP_SETUP&&(o?this.configure_(o):this.class=n||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&fe(this.getTextElement(),this.class),this.fieldGroup_&&fe(this.fieldGroup_,"blocklyLabelField")}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&Me(this.textElement_,this.class),e&&fe(this.textElement_,e)),this.class=e}static fromJson(e){return new this(rr(e.text),void 0,e)}};Ks("field_label",fl),fl.prototype.DEFAULT_VALUE="";var RL=30,_l=[];_l[ze.INPUT_VALUE]=ze.OUTPUT_VALUE,_l[ze.OUTPUT_VALUE]=ze.INPUT_VALUE,_l[ze.NEXT_STATEMENT]=ze.PREVIOUS_STATEMENT,_l[ze.PREVIOUS_STATEMENT]=ze.NEXT_STATEMENT;var dE="RENAME_VARIABLE_ID",fE="DELETE_VARIABLE_ID",LL=10,Mr=class extends Tt{constructor(e,n){super(e,n),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[n],this.dbOpposite=e.workspace.connectionDBList[_l[n]],this.offsetInBlock=new Ne(0,0),this.trackedState=Mr.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Mr.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,n;(n=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||n.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const n=this.x-e.x;return e=this.y-e.y,Math.sqrt(n*n+e*e)}bumpAwayFrom(e,n=!1){if(!this.sourceBlock_.workspace.isDragging()){var o=r.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*LL),a=r.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*LL),d=e.sourceBlock_.getRootBlock(),p=this.sourceBlock_.getRootBlock();if(!d.isInFlyout&&!p.isInFlyout){var C=!0;if(p.isMovable())d.isMovable()&&n&&(a=-a);else if(d.isMovable())C=!1,o=-o,a=-a;else return;n=C?e:this,e=C?this:e,d=C?p:d,d.RTL&&(o=-o),d.moveBy(n.x+o-e.x,n.y+a-e.y,["bump"])}}}moveTo(e,n){let o=!1;return this.trackedState===Mr.TrackedState.WILL_TRACK?(this.db.addConnection(this,n),this.trackedState=Mr.TrackedState.TRACKED,o=!0):this.trackedState===Mr.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,n),o=!0),this.x=e,this.y=n,o}moveBy(e,n){return this.moveTo(this.x+e,this.y+n)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,n){this.offsetInBlock.x=e,this.offsetInBlock.y=n}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const n=this.targetBlock();e&&n&&(e=Ne.difference(this.offsetInBlock,e.offsetInBlock),n.translate(e.x,e.y))}closest(e,n){return this.dbOpposite.searchForClosest(this,e,n)}highlight(){this.highlighted=!0;const e=this.findHighlightSvg();e&&(e.style.display="")}unhighlight(){this.highlighted=!1;const e=this.findHighlightSvg();e&&(e.style.display="none")}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===Mr.TrackedState.TRACKED||!e&&this.trackedState===Mr.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Mr.TrackedState.TRACKED):(this.trackedState===Mr.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Mr.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let n=0;n<e.length;n++){const o=e[n],a=o.getConnections_(!0);for(let d=0;d<a.length;d++)a[d].setTracking(!1);for(const d of o.getIcons())Yo(d)&&d.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==ze.INPUT_VALUE&&this.type!==ze.NEXT_STATEMENT)return e;const n=this.targetBlock();if(n){let o;n.isCollapsed()?(o=[],n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)):o=n.getConnections_(!0);for(let a=0;a<o.length;a++)e.push(...o[a].startTrackingAll());e.length||(e=[n])}return e}onFailedConnect(e){const n=this.getSourceBlock();if(K()){const o=r.getGroup$$module$build$src$core$events$utils();setTimeout(function(){n.isDisposed()||n.getParent()||(r.setGroup$$module$build$src$core$events$utils(o),this.bumpAwayFrom(e),r.setGroup$$module$build$src$core$events$utils(!1))}.bind(this),r.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:n,childConnection:o}=this.getParentAndChildConnections();if(n&&o){var a=r.getGroup$$module$build$src$core$events$utils();a||r.setGroup$$module$build$src$core$events$utils(!0);var d=n.getSourceBlock(),p=o.getSourceBlock();super.disconnectInternal(e),d.queueRender(),p.updateDisabled(),p.queueRender(),p.getSvgRoot().style.display="block",r.setGroup$$module$build$src$core$events$utils(a)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var n=this.getSourceBlock();e=e.getSourceBlock(),n.updateDisabled(),e.updateDisabled(),e.queueRender(),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}showContextMenu(e){const n=ht.registry.getContextMenuOptions({focusedNode:this},e);if(n.length){var o=this.getSourceBlock(),a=o.workspace;if(e instanceof PointerEvent)var d=new Ne(e.clientX,e.clientY);else d=new Ne(this.x,this.y),d=Se(a,d).translate(o.RTL?-5:5,5);ia(e,n,o.RTL,a,d)}}getFocusableElement(){const e=this.findHighlightSvg();if(e)return e;throw Error("No highlight SVG found corresponding to this connection.")}getFocusableTree(){return this.getSourceBlock().workspace}onNodeFocus(){this.highlight(),this.getSourceBlock().workspace.scrollBoundsIntoView(this.getSourceBlock().getBoundingRectangleWithoutChildren())}onNodeBlur(){this.unhighlight()}canBeFocused(){return!0}findHighlightSvg(){return document.getElementById(this.id)}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Mr||(Mr={})),Mr.TrackedState;var Ra=class{constructor(e,n){this.name=e,this.sourceBlock=n,this.fieldRow=[],this.align=r.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,n){return this.insertFieldAt(this.fieldRow.length,e,n),this}insertFieldAt(e,n,o){if(e<0||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(n||n===""&&o)&&(typeof n=="string"&&(n=r.fromJson$$module$build$src$core$field_registry({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(n),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),e++,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,n){for(let o=0,a;a=this.fieldRow[o];o++)if(a.name===e)return a.dispose(),this.fieldRow.splice(o,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(n)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let n=[];if(this.visible===e)return n;this.visible=e;for(let o=0,a;a=this.fieldRow[o];o++)a.setVisible(e);if(this.connection&&this.connection instanceof Mr){e?n=this.connection.startTrackingAll():this.connection.stopTrackingAll();const o=this.connection.targetBlock();o&&(o.getSvgRoot().style.display=e?"block":"none")}return n}markDirty(){for(let e=0,n;n=this.fieldRow[e];e++)n.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,n;n=this.fieldRow[e];e++)n.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},Qs=class extends Ra{constructor(e,n){super(e,n),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},yi=class extends Ra{constructor(e,n){super(e,n),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Vn=class extends Ra{constructor(e,n){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,n),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(ze.NEXT_STATEMENT)}},AL;r.ValueInput$$module$build$src$core$inputs$value_input=class extends Ra{constructor(e,n){if(!e)throw Error("Value inputs must have a non-empty name");super(e,n),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(ze.INPUT_VALUE)}},AL={},AL.ValueInput=r.ValueInput$$module$build$src$core$inputs$value_input;var La=class{constructor(e,n,o){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=o&&!e.getBlockById(o)?o:re(),e.setBlockById(this.id,this),this.xy=new Ne(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,n){if(this.type=n,o=Ut[n],!o||typeof o!="object")throw TypeError("Invalid block definition for type: "+n);Object.assign(this,o)}e.addTopBlock(this),e.addTypedBlock(this),new.target===La&&this.doInit_()}doInit_(){const e=r.getGroup$$module$build$src$core$events$utils();e||r.setGroup$$module$build$src$core$events$utils(!0);const n=K();try{typeof this.init=="function"&&(r.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),r.setRecordUndo$$module$build$src$core$events$utils(n)),he()&&z(new(ce(de.BLOCK_CREATE))(this))}finally{r.setGroup$$module$build$src$core$events$utils(e),r.setRecordUndo$$module$build$src$core$events$utils(n)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),he()&&z(new(ce(de.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let n=null,o;(o=this.outputConnection)!=null&&o.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e?.disconnect(),this.workspace.connectionChecker.canConnect(e,n,!1)?n.connect(e):e?.onFailedConnect(n))}getOnlyValueConnection(){let e=null;for(let n=0;n<this.inputList.length;n++){const o=this.inputList[n].connection;if(o&&o.type===ze.INPUT_VALUE&&o.targetConnection){if(e)return null;e=o}}return e}unplugFromStack(e){let n=null,o;if((o=this.previousConnection)!=null&&o.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect()),e){for(e=this.getNextBlock();e&&(e.isShadow()||!e.isMovable());)e=e.getNextBlock();if(e){var a,d,p,C;e=(C=(a=e.previousConnection)==null||(d=a.targetBlock())==null||(p=d.nextConnection)==null?void 0:p.targetConnection)!=null?C:null,e?.disconnect(),n&&this.workspace.connectionChecker.canConnect(n,e,!1)&&n.connect(e)}}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let n=0,o;o=this.inputList[n];n++)o.connection&&e.push(o.connection);return e}lastConnectionInStack(e){let n=this.nextConnection;for(;n;){const o=n.targetBlock();if(!o||e&&o.isShadow())return n;n=o.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let n=0,o;o=this.inputList[n];n++)if(o.connection&&o.connection.targetBlock()===e)return o;return null}getSurroundParent(){let e=this,n;do if(n=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===n);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,n=this;do e=n,n=e.parentBlock_;while(n);return e}getTopStackBlock(){let e=this,n;do n=e.getPreviousBlock();while(n&&n.getNextBlock()===e&&(e=n));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let o=0,a;a=this.inputList[o];o++)if(a.connection){var n=a.connection.targetBlock();n&&e.push(n)}return(n=this.getNextBlock())&&e.push(n),e}setParent(e){if(e!==this.parentBlock_){var n=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),o=!!n;if(o&&e&&n!==e)throw Error("Block connected to superior one that is not new parent.");if(!o&&e)throw Error("Block not connected to new parent.");if(o&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Ae(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const n=[this],o=this.getChildren(e);for(let a,d=0;a=o[d];d++)n.push(...a.getDescendants(e));return n}isDeletable(){return this.deletable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Dn(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(const n of this.getFields())n.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||e.fieldRow.length>1)return!1;return!0}getMatchingConnection(e,n){const o=this.getConnections_(!0);if(e=e.getConnections_(!0),o.length!==e.length)throw Error("Connection lists did not match in length.");for(let a=0;a<e.length;a++)if(e[a]===n)return o[a];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return ta(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=ra(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(const n of this.getFields())if(n.name===e)return n;return null}*getFields(){for(const e of this.inputList)for(const n of e.fieldRow)yield n}getVars(){const e=[];for(const n of this.getFields())n.referencesVariables()&&e.push(n.getValue());return e}getVarModels(){const e=[];for(const n of this.getFields())if(n.referencesVariables()){const o=this.workspace.getVariableById(n.getValue());o&&e.push(o)}return e}updateVarName(e){for(const n of this.getFields())n.referencesVariables()&&e.getId()===n.getValue()&&n.refreshVariableName()}renameVarById(e,n){for(const o of this.getFields())o.referencesVariables()&&e===o.getValue()&&o.setValue(n)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,n){const o=this.getField(n);if(!o)throw Error('Field "'+n+'" not found.');o.setValue(e)}setPreviousStatement(e,n){if(e)n===void 0&&(n=null),this.previousConnection||(this.previousConnection=this.makeConnection_(ze.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(n);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,n){if(e)n===void 0&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(ze.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,n){if(e)n===void 0&&(n=null),this.outputConnection||(this.outputConnection=this.makeConnection_(ze.OUTPUT_VALUE)),this.outputConnection.setCheck(n);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(z(new(ce(de.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof Qs&&this.inputList[e]instanceof Qs)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof r.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof Qs)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof yi)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}setDisabledReason(e,n){e||this.workspace.options.disable||!this.hasDisabledReason(os)||n==os||this.setDisabledReason(!1,os),this.disabledReasons.has(n)!==e&&(e?this.disabledReasons.add(n):this.disabledReasons.delete(n),e=new(ce(de.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(n),z(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(z(new(ce(de.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,n){n=this.toTokens(n);for(let a=2;a<n.length;a++)n[a-2]==="("&&n[a]===")"&&(n[a-2]=n[a-1],n.splice(a-1,2));let o="";return n=n.reduce((a,d)=>(a=a+(o==="("||d===")"?"":" ")+d,o=d[d.length-1],a),""),n=n.trim()||"???",e&&n.length>e&&(n=n.substring(0,e-3)+"..."),n}toTokens(e="?"){const n=[];for(const a of this.inputList)if(a.name!=Zc){for(const d of a.fieldRow)n.push(d.getText());if(a.connection){const d=a.connection.targetBlock();if(d){var o=a.connection;let p=o.getCheck();!p&&o.targetConnection&&(p=o.targetConnection.getCheck()),(o=!!p&&(p.includes("Boolean")||p.includes("Number")))&&n.push("("),n.push(...d.toTokens(e)),o&&n.push(")")}else n.push(e)}}return n}appendValueInput(e){return this.appendInput(new r.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new Vn(e,this))}appendDummyInput(e=""){return this.appendInput(new Qs(e,this))}appendEndRowInput(e=""){return this.appendInput(new yi(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,n){return(e=f(Le.INPUT,e,!1))?this.appendInput(new e(n,this)):null}jsonInit(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");for(var o=0;e["args"+o];){if(e["message"+o]===void 0)throw Error(n+`args${o} must have a corresponding message (message${o}).`);o++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,n):this.jsonInitColour(e,n),o=0;e["message"+o]!==void 0;)this.interpolate(e["message"+o],e["args"+o]||[],e["implicitAlign"+o]||e["lastDummyAlign"+o],n),o++;if(e.inputsInline!==void 0&&(r.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),r.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(o=rr(e.tooltip),this.setTooltip(o)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(o=rr(e.helpUrl),this.setHelpUrl(o)),typeof e.extensions=="string"&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&Td(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(n=0;n<e.length;n++)Td(e[n],this,!1)}jsonInitColour(e,n){if("colour"in e)if(e.colour===void 0)console.warn(n+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(n+"Illegal colour value: ",e)}}}jsonInitStyle(e,n){e=e.style;try{this.setStyle(e)}catch{console.warn(n+"Style does not exist: ",e)}}mixin(e,n){if(n!==void 0&&typeof n!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!n){n=[];for(const o in e)this[o]!==void 0&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}Object.assign(this,e)}interpolate(e,n,o,a){e=up(e),this.validateTokens(e,n.length),n=this.interpolateArguments(e,n,o),o=[];for(let d=0,p;p=n[d];d++)if(this.isInputKeyword(p.type)){if(e=this.inputFromJson(p,a)){for(let C=0,X;X=o[C];C++)e.appendField(X[0],X[1]);o.length=0}}else(e=this.fieldFromJson(p))&&o.push([e,p.name])}validateTokens(e,n){const o=[];let a=0;for(let d=0;d<e.length;d++){const p=e[d];if(typeof p=="number"){if(p<1||p>n)throw Error('Block "'+this.type+'": Message index %'+p+" out of range.");if(o[p])throw Error('Block "'+this.type+'": Message index %'+p+" duplicated.");o[p]=!0,a++}}if(a!==n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")}interpolateArguments(e,n,o){const a=[];for(let p=0;p<e.length;p++){var d=e[p];if(typeof d=="number"&&(d=n[d-1]),typeof d=="string"){if(d===`
`)d={type:"input_end_row"},o&&(d.align=o);else if(d=this.stringToFieldJson(d),!d)continue}a.push(d)}return(e=a.length)&&!this.isInputKeyword(a[e-1].type)&&(e={type:"input_dummy"},o&&(e.align=o),a.push(e)),a}fieldFromJson(e){const n=r.fromJson$$module$build$src$core$field_registry(e);return!n&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):n}inputFromJson(e,n){var o={LEFT:r.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:r.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:r.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:r.Align$$module$build$src$core$inputs$align.CENTRE};let a;switch(e.type){case"input_value":a=this.appendValueInput(e.name);break;case"input_statement":a=this.appendStatementInput(e.name);break;case"input_dummy":a=this.appendDummyInput(e.name);break;case"input_end_row":a=this.appendEndRowInput(e.name);break;default:a=this.appendInputFromRegistry(e.type,e.name)}return a?(e.check&&a.setCheck(e.check),e.align&&(o=o[e.align.toUpperCase()],o===void 0?console.warn(n+"Illegal align value: ",e.align):a.setAlign(o)),a):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||h(Le.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,n){if(e!==n){var o=-1,a=n?-1:this.inputList.length;for(let d=0,p;p=this.inputList[d];d++)if(p.name===e){if(o=d,a!==-1)break}else if(n&&p.name===n&&(a=d,o!==-1))break;if(o===-1)throw Error('Named input "'+e+'" not found.');if(a===-1)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(o,a)}}moveNumberedInputBefore(e,n){if(e===n)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");const o=this.inputList[e];this.inputList.splice(e,1),e<n&&n--,this.inputList.splice(n,0,o)}removeInput(e,n){for(let o=0,a;a=this.inputList[o];o++)if(a.name===e)return a instanceof Vn&&this.statementInputCount--,a.dispose(),this.inputList.splice(o,1),!0;if(n)return!1;throw Error("Input not found: "+e)}getInput(e){for(let n=0,o;o=this.inputList[n];n++)if(o.name===e)return o;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,n;return(n=(e=this.getIcon(gr.COMMENT))==null?void 0:e.getText())!=null?n:null}setCommentText(e){var n;let o;const a=(o=(n=this.getIcon(gr.COMMENT))==null?void 0:n.getText())!=null?o:null;if(a!==e){if(e!==null){if(n=this.getIcon(gr.COMMENT),!n){if(n=f(Le.ICON,gr.COMMENT.toString(),!1),!n)throw Error("No comment icon class is registered, so a comment cannot be set");if(n=new n(this),!$S(n))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");n=this.addIcon(n)}r.disable$$module$build$src$core$events$utils(),n.setText(e),r.enable$$module$build$src$core$events$utils()}else this.removeIcon(gr.COMMENT);z(new(ce(de.BLOCK_CHANGE))(this,"comment",null,a,e))}}setWarningText(e,n){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new OL(e);return this.icons.push(e),this.icons.sort((n,o)=>n.getWeight()-o.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let n;return(n=this.getIcon(e))==null||n.dispose(),this.icons=this.icons.filter(o=>!o.getType().equals(e)),!0}hasIcon(e){return this.icons.some(n=>n.getType().equals(e))}getIcon(e){return e instanceof gr?this.icons.find(n=>n.getType().equals(e)):this.icons.find(n=>n.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,n,o){if(this.parentBlock_)throw Error("Block has parent");const a=new(ce(de.BLOCK_MOVE))(this);o&&a.setReason(o),this.xy.translate(e,n),a.recordNew(),z(a)}makeConnection_(e){return new Tt(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let o=0,a;a=this.inputList[o];o++)if(a.connection){var n=a.connection.targetBlock();if(!n||!n.allInputsFilled(e))return!1}return(n=this.getNextBlock())?n.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};La.COLLAPSED_INPUT_NAME=Zc,La.COLLAPSED_FIELD_NAME=Vd;var ff=null,au=null,cu={};cu.connectionUiEffect=Np,cu.disconnectUiEffect=bp,cu.disconnectUiStop=aa,cu.disposeUiEffect=Ed;var uu=class{paste(e,n,o){if(!n.isCapacityAvailable(e.typeCounts))return null;o&&(e.blockState.x=o.x,e.blockState.y=o.y),o=o||new Ne(e.blockState.x||0,e.blockState.y||0),r.disable$$module$build$src$core$events$utils();let a;try{a=Qi(e.blockState,n),IS(a,o)}finally{r.enable$$module$build$src$core$events$utils()}if(!a)return a;he()&&!a.isShadow()&&z(new(ce(de.BLOCK_CREATE))(a));const d=a;return js().then(()=>r.getFocusManager$$module$build$src$core$focus_manager().focusNode(d)),a}};uu.TYPE="block",jh(uu.TYPE,new uu);var _f={};_f.bumpIntoBounds=ca,_f.bumpIntoBoundsHandler=kp,_f.bumpTopObjectsIntoBounds=md;var vL=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new Ne(0,0),this.originalEventGroup="",this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,n;return(n=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?n:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(g(Le.CONNECTION_PREVIEWER,this.workspace.options))(this.block),tr(),this.workspace.setResizesEnabled(!1),aa(),e=this.shouldHealStack(e),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var n;(n=this.workspace.getLayerManager())==null||n.moveToDragLayer(this.block)}}shouldHealStack(e){return!!e&&(e.altKey||e.ctrlKey||e.metaKey)}startDraggingShadow(e){const n=this.block.getParent();if(!n)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=Ne.difference(n.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),n.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let n,o,a;if(this.startParentConn=(a=(n=this.block.outputConnection)==null?void 0:n.targetConnection)!=null?a:(o=this.block.previousConnection)==null?void 0:o.targetConnection,e){let d;this.startChildConn=(d=this.block.nextConnection)==null?void 0:d.targetConnection}this.block.unplug(e),bp(this.block)}fireDragStartEvent(){const e=new(ce(de.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));z(e)}fireDragEndEvent(){const e=new(ce(de.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));z(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(ce(de.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),z(e)}}drag(e){if(this.block.isShadow()){let n;(n=this.block.getParent())==null||n.drag(Ne.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,Ne.difference(e,this.startLoc))}updateConnectionPreview(e,n){var o=this.connectionCandidate;const a=this.getConnectionCandidate(e,n);if(a){this.connectionCandidate=n=o&&this.currCandidateIsBetter(o,n,a)?o:a;var{local:d,neighbour:p}=n;n=d.type===ze.OUTPUT_VALUE||d.type===ze.PREVIOUS_STATEMENT;var C;if(o=p.isConnected()&&!((C=p.targetBlock())!=null&&C.isInsertionMarker()),n&&o&&!this.orphanCanConnectAtEnd(e,p.targetBlock(),d.type)){let Ie;(Ie=this.connectionPreviewer)==null||Ie.previewReplacement(d,p,p.targetBlock())}else{var X;(X=this.connectionPreviewer)==null||X.previewConnection(d,p)}}else{let Ie;(Ie=this.connectionPreviewer)==null||Ie.hidePreview(),this.connectionCandidate=null}}orphanCanConnectAtEnd(e,n,o){return!!Tt.getConnectionForOrphanedConnection(e,o===ze.OUTPUT_VALUE?n.outputConnection:n.previousConnection)}currCandidateIsBetter(e,n,o){const{local:a,neighbour:d}=e;e=new Ne(a.x,a.y);const p=new Ne(d.x,d.y);return n=Ne.distance(Ne.sum(e,n),p),o.distance>n-r.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,n){e=this.getLocalConnections(e);let o=this.getSearchRadius(),a=null;for(const d of e){const{connection:p,radius:C}=d.closest(o,n);p&&(a={local:d,neighbour:p,distance:C},o=C)}return a}getSearchRadius(){return this.connectionCandidate?r.config$$module$build$src$core$config.connectingSnapRadius:r.config$$module$build$src$core$config.snapRadius}getLocalConnections(e){const n=e.getConnections_(!1),o=e.lastConnectionInStack(!0);return o&&o!==e.nextConnection&&n.push(o),n}endDrag(e){if(this.block.isShadow()){let o;(o=this.block.getParent())==null||o.endDrag(e)}else{this.originalEventGroup=r.getGroup$$module$build$src$core$events$utils(),this.fireDragEndEvent(),this.fireMoveEvent(),hr(),aa();var n;if((n=this.connectionPreviewer)==null||n.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let o;(o=this.workspace.getLayerManager())==null||o.moveOffDragLayer(this.block,ao),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep())}}disposeStep(){const e=r.getGroup$$module$build$src$core$events$utils();r.setGroup$$module$build$src$core$events$utils(this.originalEventGroup),this.block.snapToGrid();let n;(n=this.connectionPreviewer)==null||n.dispose(),this.workspace.setResizesEnabled(!0),r.setGroup$$module$build$src$core$events$utils(e)}applyConnections(e){const{local:n,neighbour:o}=e;n.connect(o);const a=n.isSuperior()?o:n,d=this.block.getRootBlock();js().then(()=>{Np(a.getSourceBlock()),setTimeout(()=>{d.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let o;(o=this.block.getParent())==null||o.revertDrag()}else{var e;(e=this.connectionPreviewer)==null||e.hidePreview(),this.connectionCandidate=null;var n;if((n=this.startChildConn)==null||n.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case ze.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case ze.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let o;(o=this.workspace.getLayerManager())==null||o.moveOffDragLayer(this.block,ao),ca(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.block.setDragging(!1),this.dragging=!1}}},CL=class extends St{constructor(e,n,o,a){super(n,o,a),this.text=e,this.workspace=n,this.anchor=o,this.ownerRect=a,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize(),fe(this.svgRoot,"blocklyTextBubble")}getText(){return this.text}setText(e){this.text=e,Ce(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,n){return n=this.createParagraph(n),e=this.createTextFragments(n,e),this.workspace.RTL&&this.rightAlignTextFragments(n.getBBox().width,e),n}createParagraph(e){return N(ue.G,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",transform:`translate(0,${St.BORDER_WIDTH})`,style:`direction: ${this.workspace.RTL?"rtl":"ltr"}`},e)}createTextFragments(e,n){let o=1;return n.split(`
`).map(a=>{const d=N(ue.TEXT,{y:`${o}em`,x:St.BORDER_WIDTH},e);return a=document.createTextNode(a),d.appendChild(a),o+=1,d})}rightAlignTextFragments(e,n){for(const o of n)o.setAttribute("text-anchor","start"),o.setAttribute("x",`${e+St.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new lt(e.width+St.BORDER_WIDTH*2,e.height+St.BORDER_WIDTH*2),!0)}},_E=17,ei=class extends lu{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return ei.TYPE}initView(e){this.svgRoot||(super.initView(e),N(ue.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),N(ue.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),N(ue.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),fe(this.svgRoot,"blocklyWarningIcon"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return ei.WEIGHT}getSize(){return new lt(_E,_E)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.getColour())}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let n;(n=this.textBubble)==null||n.setAnchorLocation(this.getAnchorLocation())}addMessage(e,n){if(this.textMap.get(n)===e)return this;e?this.textMap.set(n,e):this.textMap.delete(n);let o;return(o=this.textBubble)==null||o.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const n=this;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){if(n.bubbleIsVisible()!==e){if(yield js(),e)n.textBubble=new CL(n.getText(),n.sourceBlock.workspace,n.getAnchorLocation(),n.getBubbleOwnerRect()),n.applyColour();else{let o;(o=n.textBubble)==null||o.dispose(),n.textBubble=null}z(new(ce(de.BUBBLE_OPEN))(n.sourceBlock,e,"warning"))}})}getBubble(){return this.textBubble}getAnchorLocation(){const e=_E/2;return Ne.sum(this.workspaceLocation,new Ne(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new it(e.y,e.y+e.height,e.x,e.x+e.width)}};ei.TYPE=gr.WARNING,ei.WEIGHT=2;var bt=class extends La{constructor(e,n,o){if(super(e,n,o),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new Ne(0,0),this.dragStrategy=new vL(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=N(ue.G,{}),n&&fe(this.svgGroup,n),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,wc(e),this.svgGroup.setAttribute("data-id",this.id),e.id=B(),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const n of this.getIcons())n.initView(this.createIconPointerDownListener(n)),n.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),(e=this.getSvgRoot())&&A(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){this.addSelect(),Be(this)}unselect(){this.removeSelect(),Be(null)}setParent(e){var n=this.parentBlock_;if(e!==n){tr(),super.setParent(e),hr();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var a=this.getRelativeToSurfaceXY(),d=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode(),p,C=this.getSvgRoot().contains((p=d?.getFocusableElement())!=null?p:null);e?(e.getSvgRoot().appendChild(o),C&&d&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(d)):n&&(e=this.workspace.getCanvas().querySelector(".blocklyDragging"),n=e?.parentElement,p=this.workspace.getCanvas(),n===p?p.insertBefore(o,e):(p.appendChild(o),C&&d&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(d)),this.translate(a.x,a.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let n=0,o=0,a=this.getSvgRoot();if(a)do{const d=P(a);n+=d.x,o+=d.y,a=a.parentNode}while(a&&!e.hasLayer(a));return new Ne(n,o)}moveBy(e,n,o){if(this.parentBlock_)throw Error("Block has parent");const a=he();let d=null;a&&(d=new(ce(de.BLOCK_MOVE))(this),o&&d.setReason(o)),e=new Ne(e,n),n=this.getRelativeToSurfaceXY(),e=Ne.sum(n,e),this.translate(e.x,e.y),this.updateComponentLocations(e),a&&d&&(d.recordNew(),z(d)),this.workspace.resizeContents()}translate(e,n){this.translation=`translate(${e}, ${n})`,this.relativeCoords=new Ne(e,n),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,n){const o=this.getRelativeToSurfaceXY();this.moveBy(e.x-o.x,e.y-o.y,n)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var n=this.getRelativeToSurfaceXY();e=e.alignXY(n),e!==n&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const n=this.getRelativeToSurfaceXY();let o,a;return this.RTL?(o=n.x-e.width,a=n.x):(o=n.x,a=n.x+e.width),new it(n.y,n.y+e.height,o,a)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,n;n=this.inputList[e];e++)n.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}childHasWarning(){const e=this.getChildren(!1);for(const n of e)if(n.getIcon(ei.TYPE)||n.childHasWarning())return!0;return!1}updateCollapsed(){var e=this.isCollapsed();const n=Zc,o=Vd;for(let d=0,p;p=this.inputList[d];d++)p.name!==n&&p.setVisible(!e);for(var a of this.getIcons())a.updateCollapsed();e?(fe(this.svgGroup,"blocklyCollapsed"),this.childHasWarning()&&this.setWarningText(r.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,bt.COLLAPSED_WARNING_ID),e=this.toString(RL),(a=this.getField(o))?a.setValue(e):(this.getInput(n)||this.appendDummyInput(n)).appendField(new fl(e),o)):(this.updateDisabled(),this.removeInput(n),Me(this.svgGroup,"blocklyCollapsed"),this.setWarningText(null,bt.COLLAPSED_WARNING_ID))}onMouseDown(e){if(!this.workspace.isReadOnly()){var n=this.workspace.getGesture(e);n&&n.handleBlockStart(e,this)}}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(e){return this.workspace.isReadOnly()||!this.contextMenu?null:(e=ht.registry.getContextMenuOptions({block:this,focusedNode:this},e),this.customContextMenu&&this.customContextMenu(e),e)}calculateContextMenuLocation(e){if(e instanceof PointerEvent)return new Ne(e.clientX,e.clientY);e=Se(this.workspace,this.getRelativeToSurfaceXY());let n,o;const a=(n=this.inputList.filter(d=>d.isVisible()).flatMap(d=>d.fieldRow).find(d=>d.isVisible()))==null||(o=n.getSvgRoot())==null?void 0:o.getBoundingClientRect();return new Ne(this.RTL?e.x-5:e.x+5,(a&&a.height?a.y+a.height:e.y+this.height)+5)}showContextMenu(e){const n=this.generateContextMenu(e),o=this.calculateContextMenuLocation(e);n&&n.length&&(ia(e,n,this.RTL,this.workspace,o),pp(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const n of this.getChildren(!1))n.updateComponentLocations(Ne.sum(e,n.relativeCoords))}updateConnectionLocations(e){for(const n of this.getConnections_(!1))n.moveToOffset(e)}updateIconLocations(e){for(const n of this.getIcons())n.onLocationChange(e)}updateFieldLocations(e){for(const n of this.inputList)for(const o of n.fieldRow)o.onLocationChange(e)}addClass(e){fe(this.svgGroup,e)}removeClass(e){Me(this.svgGroup,e)}setDragging(e){(this.dragging=e)?(this.translation="",Yc.push(...this.getConnections_(!0)),this.addClass("blocklyDragging")):(Yc.length=0,this.removeClass("blocklyDragging"));for(let n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e?Me(this.svgGroup,"blocklyNotEditable"):fe(this.svgGroup,"blocklyNotEditable"),e=this.getIcons();for(let n=0;n<e.length;n++)e[n].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,n){this.disposing=!0,sp(),Pc();const o=r.getFocusManager$$module$build$src$core$focus_manager();var a,d;if(this.getSvgRoot().contains((d=(a=o.getFocusedNode())==null?void 0:a.getFocusableElement())!=null?d:null)){if(a=this.getParent(),!a){let p;if(d=(p=this.outputConnection)!=null?p:this.previousConnection){let C;a=(C=d.closest(0,new Ne(0,0)).connection)==null?void 0:C.getSourceBlock()}}a?o.focusNode(a):setTimeout(()=>o.focusTree(this.workspace),0)}n&&(this.unplug(e),Ed(this)),super.dispose(!!e),Ce(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===this&&this.workspace.cancelCurrentGesture(),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(r.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),r.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(e=!1){return this.isInsertionMarker_?null:{paster:uu.TYPE,blockState:ss(this,{addCoordinates:!0,addNextBlocks:e,saveIds:!1}),typeCounts:Dn(this,!0)}}applyColour(){var e,n;for((n=(e=this.pathObject).applyColour)==null||n.call(e,this),e=this.getIcons(),n=0;n<e.length;n++)e[n].applyColour();for(const o of this.getFields())o.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let n;(n=this.getNextBlock())==null||n.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const n of this.getChildren(!1))n.updateDisabled()}}setWarningText(e,n=""){if(n)this.warningTextDb.has(n)&&(clearTimeout(this.warningTextDb.get(n)),this.warningTextDb.delete(n));else{for(var o of this.warningTextDb.values())clearTimeout(o);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(n,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(n),this.setWarningText(e,n))},100));else if(this.isInFlyout&&(e=null),o=this.getIcon(ei.TYPE),e){let a=this.getSurroundParent(),d=null;for(;a;)a.isCollapsed()&&(d=a),a=a.getSurroundParent();d&&d.setWarningText(r.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,bt.COLLAPSED_WARNING_ID),o?o.addMessage(e,n):this.addIcon(new ei(this).addMessage(e,n))}else o&&(n?(o.addMessage("",n),o.getText()||this.removeIcon(ei.TYPE)):this.removeIcon(ei.TYPE))}setMutator(e){this.removeIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof r.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return n=>{this.isDeadOrDying()||(n=this.workspace.getGesture(n))&&n.setStartIcon(e)}}removeIcon(e){const n=super.removeIcon(e);return e.equals(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),n}setDisabledReason(e,n){const o=this.isEnabled();super.setDisabledReason(e,n),this.isEnabled()===o||this.getInheritedDisabled()||this.updateDisabled()}setDeletable(e){super.setDeletable(e),e?Me(this.svgGroup,"blocklyNotDeletable"):fe(this.svgGroup,"blocklyNotDeletable")}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_);let n,o;(o=(n=this.pathObject).setStyle)==null||o.call(n,e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const n=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_&&Me(this.svgGroup,this.styleName_),n){this.hat=n.hat;let o,a;(a=(o=this.pathObject).setStyle)==null||a.call(o,n),this.colour_=n.colourPrimary,this.style=n,this.applyColour(),fe(this.svgGroup,e),this.styleName_=e}else throw Error("Invalid style name: "+e)}getStyle(){return this.style}bringToFront(e=!1){const n=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();let o=this;if(!o.isDeadOrDying()){do{const a=o.getSvgRoot(),d=a.parentNode,p=d.childNodes;if(p[p.length-1]!==a&&d.appendChild(a),e)break;o=o.getParent()}while(o);n&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(n)}}setPreviousStatement(e,n){super.setPreviousStatement(e,n),this.queueRender()}setNextStatement(e,n){super.setNextStatement(e,n),this.queueRender()}setOutput(e,n){super.setOutput(e,n),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,n){return e=super.removeInput(e,n),this.queueRender(),e}moveNumberedInputBefore(e,n){super.moveNumberedInputBefore(e,n),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(e)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.setTracking(e),(o=o.targetBlock())&&o.setConnectionTracking(e))}}getConnections_(e){const n=[];if(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_)for(let o=0,a;a=this.inputList[o];o++)a.connection&&n.push(a.connection);return n}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,n){return super.getMatchingConnection(e,n)}makeConnection_(e){return new Mr(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const n of this.getConnections_(!1)){if(n.isSuperior()){let o;(o=n.targetBlock())==null||o.bumpNeighbours()}for(const o of n.neighbours(r.config$$module$build$src$core$config.snapRadius))o.getSourceBlock().getRootBlock()!==e&&(n.isConnected()&&o.isConnected()||(n.isSuperior()?o.bumpAwayFrom(n,!1):n.bumpAwayFrom(o,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,n,o){if(e.type===ze.NEXT_STATEMENT||e.type===ze.INPUT_VALUE){let a=n.x;n=n.y,a+=o.x-e.getOffsetInBlock().x,n+=o.y-e.getOffsetInBlock().y,this.moveBy(a,n)}}getChildren(e){return super.getChildren(e)}queueRender(){return LT(this)}render(){this.queueRender(),Zi()}renderEfficiently(){tr(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),hr()}tightenChildrenEfficiently(){for(const e of this.inputList){const n=e.connection;n&&n.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}getHeightWidth(){let e=this.height,n=this.width;var o=this.getNextBlock();if(o){o=o.getHeightWidth();const a=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=o.height-a,n=Math.max(n,o.width)}return{height:e,width:n}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,n){this.pathObject.updateShapeForInputHighlight(e,n)}getDragStrategy(){return this.dragStrategy}setDragStrategy(e){this.dragStrategy=e}isCopyable(){return this.isOwnDeletable()&&this.isOwnMovable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,n){this.dragStrategy.drag(e,n)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},ss(this)),n=new Set(["id","height","width","pinned","enabled"]),o=function(a){for(const d in a)n.has(d)?delete a[d]:typeof a[d]=="object"&&o(a[d])};return o(e),[e]}jsonInit(e){super.jsonInit(e),e.classes&&this.addClass(Array.isArray(e.classes)?e.classes.join(" "):e.classes)}getFocusableElement(){return this.pathObject.svgPath}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.workspace.scrollBoundsIntoView(this.getBoundingRectangleWithoutChildren())}onNodeBlur(){this.unselect()}canBeFocused(){return!0}};bt.INLINE=-1,bt.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var xL=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},Tf=class extends xL{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof bt?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(is(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},Aa=class{constructor(e,n){this.element=e,this.type=n}getElement(){return this.element}getType(){return this.type}},TE=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let n=0,o=0;return e&&(n=e.getWidth(),o=e.getHeight()),new lt(n,o)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,n=0;const o=this.getToolboxMetrics(),a=this.getFlyoutMetrics(),d=!!this.workspace_.getToolbox();var p;const C=!((p=this.workspace_.getFlyout())!=null&&p.autoClose);p=d?o.position:a.position;const X=p===at.TOP;return p===at.LEFT&&(d&&(e+=o.width),C&&(e+=a.width)),X&&(d&&(n+=o.height),C&&(n+=a.height)),{top:n,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const n=this.getSvgMetrics(),o=this.getToolboxMetrics(),a=this.getFlyoutMetrics(),d=!!this.workspace_.getToolbox();var p;const C=!((p=this.workspace_.getFlyout())!=null&&p.autoClose);p=d?o.position:a.position;const X=p===at.LEFT||p===at.RIGHT;return(p===at.TOP||p===at.BOTTOM)&&(d&&(n.height-=o.height),C&&(n.height-=a.height)),X&&(d&&(n.width-=o.width),C&&(n.width-=a.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*e,width:(n.right-n.left)*e,top:n.top*e,left:n.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const n=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const a={};return o||(a.top=e.top,a.bottom=e.top+e.height),n||(a.left=e.left,a.right=e.left+e.width),a}getPaddedContent_(e,n){const o=n.top+n.height,a=n.left+n.width,d=e.width;e=e.height;const p=d/2,C=e/2;return{top:Math.min(n.top-C,o-e),bottom:Math.max(o+C,n.top+e),left:Math.min(n.left-p,a-d),right:Math.max(a+p,n.left+d)}}getScrollMetrics(e,n,o){e=e?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var a=o||this.getContentMetrics();o=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,a),a=o.top!==void 0?o.top:n.top;const d=o.left!==void 0?o.left:n.left;return{top:a/e,left:d/e,width:((o.right!==void 0?o.right:n.right)-d)/e,height:((o.bottom!==void 0?o.bottom:n.bottom)-a)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),a=this.getAbsoluteMetrics(),d=this.getViewMetrics(),p=this.getContentMetrics(),C=this.getScrollMetrics(!1,d,p);return{contentHeight:p.height,contentWidth:p.width,contentTop:p.top,contentLeft:p.left,scrollHeight:C.height,scrollWidth:C.width,scrollTop:C.top,scrollLeft:C.left,viewHeight:d.height,viewWidth:d.width,viewTop:d.top,viewLeft:d.left,absoluteTop:a.top,absoluteLeft:a.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:n.width,flyoutHeight:n.height}}};i(Le.METRICS_MANAGER,Pn,TE);var NL=class extends TE{constructor(e,n){super(e),this.flyout_=n}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const n=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:n.height*e,width:n.width*e,top:n.y*e,left:n.x*e}}getScrollMetrics(e,n,o){return n=o||this.getContentMetrics(),o=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(n.height+2*o)/e,width:(n.width+n.left+o)/e,top:0,left:0}}},gn=class{constructor(e,n,o,a){this.workspace=e,this.targetWorkspace=n,this.isFlyoutLabel=a,this.height=this.width=0,this.cursorSvg=this.svgText=null,this.text=o.text,this.position=new Ne(0,0),this.callbackKey=o.callbackKey||o.callbackkey,this.cssClass=o["web-class"]||null,this.info=o,e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton",this.cssClass&&(e+=" "+this.cssClass),this.id=B(),this.svgGroup=N(ue.G,{id:this.id,class:e},this.workspace.getCanvas());let d;this.isFlyoutLabel||(d=N(ue.RECT,{class:"blocklyFlyoutButtonShadow",rx:gn.BORDER_RADIUS,ry:gn.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=N(ue.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:gn.BORDER_RADIUS,ry:gn.BORDER_RADIUS},this.svgGroup),n=N(ue.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup),o=rr(this.text),this.workspace.RTL&&(o+=""),n.textContent=o,this.isFlyoutLabel&&(this.svgText=n,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill")),a=Sr(n,"fontSize");const p=Sr(n,"fontWeight"),C=Sr(n,"fontFamily");if(this.width=Wt(n,a,p,C),o=te(o,a,p,C),this.height=this.height||o.height,!this.isFlyoutLabel){this.width+=2*gn.TEXT_MARGIN_X,this.height+=2*gn.TEXT_MARGIN_Y;let X;(X=d)==null||X.setAttribute("width",String(this.width));let Ie;(Ie=d)==null||Ie.setAttribute("height",String(this.height))}e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),n.setAttribute("x",String(this.width/2)),n.setAttribute("y",String(this.height/2-o.height/2+o.baseline)),this.updateTransform(),this.onMouseDownWrapper=A(this.svgGroup,"pointerdown",this,this.onMouseDown),this.onMouseUpWrapper=A(this.svgGroup,"pointerup",this,this.onMouseUp)}createDom(){return this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,n){this.position.x=e,this.position.y=n,this.updateTransform()}moveBy(e,n,o){this.moveTo(this.position.x+e,this.position.y+n)}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getBoundingRectangle(){return new it(this.position.y,this.position.y+this.height,this.position.x,this.position.x+this.width)}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){y(this.onMouseDownWrapper),y(this.onMouseUpWrapper),this.svgGroup&&Ce(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}onMouseDown(e){const n=this.targetWorkspace.getGesture(e),o=this.targetWorkspace.getFlyout();n&&o&&n.handleFlyoutStart(e,o)}getSvgRoot(){return this.svgGroup}getFocusableElement(){return this.svgGroup}getFocusableTree(){return this.workspace}onNodeFocus(){var e=this.getPosition();e=new it(e.y,e.y+this.height,e.x,e.x+this.width),this.workspace.scrollBoundsIntoView(e)}onNodeBlur(){}canBeFocused(){return!0}};gn.TEXT_MARGIN_X=5,gn.TEXT_MARGIN_Y=2,gn.BORDER_RADIUS=4,Xe(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var bL=class{getFirstChild(e){return null}getParent(e){return e.getWorkspace()}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof gn}},yL=class{constructor(e,n){this.policy=e,this.flyout=n}getFirstChild(e){return null}getParent(e){return this.policy.getParent(e)}getNextSibling(e){const n=this.flyout.getContents();if(!n)return null;let o=n.findIndex(a=>a.getElement()===e);return o===-1?null:(o++,o>=n.length&&(o=0),n[o].getElement())}getPreviousSibling(e){const n=this.flyout.getContents();if(!n)return null;let o=n.findIndex(a=>a.getElement()===e);return o===-1?null:(o--,o<0&&(o=n.length-1),n[o].getElement())}isNavigable(e){return this.policy.isNavigable(e)}isApplicable(e){return this.policy.isApplicable(e)}},pf=class{constructor(e,n){this.gap=e,this.axis=n,this.y=this.x=0}getBoundingRectangle(){switch(this.axis){case"x":return new it(this.y,this.y,this.x,this.x+this.gap);case"y":return new it(this.y,this.y+this.gap,this.x,this.x)}}moveBy(e,n,o){this.x+=e,this.y+=n}isNavigable(){return!1}getFocusableElement(){throw Error("Cannot be focused")}getFocusableTree(){throw Error("Cannot be focused")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}},kL=class{getFirstChild(e){return null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return!1}isApplicable(e){return e instanceof pf}},ew=class{getFirstChild(e){return e.getEditor()}getParent(e){let n;return(n=e.getOwner())!=null?n:null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof df}},wL=class{getFirstChild(e){return wp(e,!0)[0]}getParent(e){var n;if((n=e.previousConnection)!=null&&n.targetBlock()){if(n=e.getSurroundParent())return n}else{let o;if((o=e.outputConnection)!=null&&o.targetBlock())return e.outputConnection.targetBlock()}return e.workspace}getNextSibling(e){let n;if((n=e.nextConnection)!=null&&n.targetBlock()){let a;return(a=e.nextConnection)==null?void 0:a.targetBlock()}let o;return(o=e.outputConnection)!=null&&o.targetBlock()?Is(e,1):e.getSurroundParent()?Is(e.getTopStackBlock(),1):this.getParent(e)instanceof rn?ua(e,1):null}getPreviousSibling(e){let n;if((n=e.previousConnection)!=null&&n.targetBlock()){let a;return(a=e.previousConnection)==null?void 0:a.targetBlock()}let o;return(o=e.outputConnection)!=null&&o.targetBlock()?Is(e,-1):this.getParent(e)instanceof rn?ua(e,-1):null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof bt}},tw=class{getFirstChild(e){return null}getParent(e){return e.getCommentView().workspace.getCommentById(e.getCommentView().commentId)}getNextSibling(e){const n=e.getCommentView().getCommentBarButtons();return e=n.indexOf(e),e>=0&&e+1<n.length?n[e+1]:null}getPreviousSibling(e){const n=e.getCommentView().getCommentBarButtons();return e=n.indexOf(e),e>0?n[e-1]:null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof sf}},rw=class{getFirstChild(e){return null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof of}},ML=class{getFirstChild(e){return e.getParentInput()?e.targetConnection:null}getParent(e){return e.getSourceBlock()}getNextSibling(e){if(e.getParentInput())return Is(e,1);if(e.type===ze.NEXT_STATEMENT){const o=e.targetConnection;var n=e.getSourceBlock();if(!o&&n.getRootBlock().lastConnectionInStack(!1)===e){e=n.workspace.getTopBlocks(!0),n=e.indexOf(n.getRootBlock())+1,n>=e.length&&(n=0),n=e[n];let a;return(a=this.getParentConnection(n))!=null?a:n}return o}return e.getSourceBlock()}getPreviousSibling(e){if(e.getParentInput())return Is(e,-1);if(e.type===ze.PREVIOUS_STATEMENT||e.type===ze.OUTPUT_VALUE){const o=e.targetConnection&&!e.targetConnection.getParentInput()?e.targetConnection:null;var n=e.getSourceBlock();if(!o&&this.getParentConnection(n.getRootBlock())===e){e=n.workspace.getTopBlocks(!0),n=e.indexOf(n.getRootBlock())-1,n<0&&(n=e.length-1),n=e[n];let a;return(a=n.lastConnectionInStack(!1))!=null?a:n}return o}return e.type===ze.NEXT_STATEMENT?e.getSourceBlock():null}getParentConnection(e){let n;return!e.outputConnection||(n=e.previousConnection)!=null&&n.isConnected()?e.previousConnection:e.outputConnection}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof Mr}},DL=class{getFirstChild(e){return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return Is(e,1)}getPreviousSibling(e){return Is(e,-1)}isNavigable(e){let n;return e.canBeFocused()&&e.isVisible()&&(e.isClickable()||e.isCurrentlyEditable())&&!((n=e.getSourceBlock())!=null&&n.isSimpleReporter()&&e.isFullBlockField())&&e.getParentInput().isVisible()}isApplicable(e){return e instanceof Lt}},pE={};pE.register=Mp,pE.unregister=LS;var gE=17,PL=160,FL=80,Ls=class extends lu{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new lt(PL,FL),this.bubbleVisiblity=!1}getType(){return Ls.TYPE}initView(e){this.svgRoot||(super.initView(e),N(ue.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),N(ue.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),N(ue.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),fe(this.svgRoot,"blocklyCommentIcon"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return Ls.WEIGHT}getSize(){return new lt(gE,gE)}applyColour(){super.applyColour();const e=this.sourceBlock.getColour();let n;(n=this.textInputBubble)==null||n.setColour(e)}updateEditable(){const e=this,n=()=>super.updateEditable;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){n().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){const n=this.workspaceLocation;super.onLocationChange(e),this.bubbleLocation&&(e=Ne.difference(this.workspaceLocation,n),this.bubbleLocation=Ne.sum(this.bubbleLocation,e)),e=this.getAnchorLocation();let o;(o=this.textInputBubble)==null||o.setAnchorLocation(e)}setText(e){const n=this.text;z(new(ce(de.BLOCK_CHANGE))(this.sourceBlock,"comment",null,n,e)),this.text=e;let o;(o=this.textInputBubble)==null||o.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let n;(n=this.textInputBubble)==null||n.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}setBubbleLocation(e){this.bubbleLocation=e;let n;(n=this.textInputBubble)==null||n.moveDuringDrag(e)}getBubbleLocation(){return this.bubbleLocation}saveState(){if(this.text){const e={text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width},n=this.getBubbleLocation();return n&&(e.x=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(n.x+this.bubbleSize.width):n.x,e.y=n.y),e}return null}loadState(e){let n;this.text=(n=e.text)!=null?n:"";let o,a;this.bubbleSize=new lt((o=e.width)!=null?o:PL,(a=e.height)!=null?a:FL);let d;this.bubbleVisiblity=(d=e.pinned)!=null?d:!1,this.setBubbleVisible(this.bubbleVisiblity);let p=e.x;const C=e.y;js().then(()=>{p&&C&&(p=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(p+this.bubbleSize.width):p,this.setBubbleLocation(new Ne(p,C)))})}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(z(new(ce(de.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}onBubbleLocationChange(){this.textInputBubble&&(this.bubbleLocation=this.textInputBubble.getRelativeToSurfaceXY())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const n=this;return(0,Ee.asyncExecutePromiseGeneratorFunction)(function*(){n.bubbleVisiblity!==e&&(n.bubbleVisiblity=e,yield js(),!n.sourceBlock.rendered||n.sourceBlock.isInFlyout||n.sourceBlock.isInsertionMarker()||(e?(n.sourceBlock.isEditable()?n.showEditableBubble():n.showNonEditableBubble(),n.applyColour()):n.hideBubble(),z(new(ce(de.BUBBLE_OPEN))(n.sourceBlock,e,"comment"))))})}getBubble(){return this.textInputBubble}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let n;(n=this.textInputBubble)==null||n.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new df(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect(),this),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.bubbleLocation&&this.textInputBubble.moveDuringDrag(this.bubbleLocation),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange()),this.textInputBubble.addLocationChangeListener(()=>this.onBubbleLocationChange())}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=gE/2;return Ne.sum(this.workspaceLocation,new Ne(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};Ls.TYPE=gr.COMMENT,Ls.WEIGHT=3,Mp(Ls.TYPE,Ls);var nw=class{getFirstChild(e){if(e instanceof r.MutatorIcon$$module$build$src$core$icons$mutator_icon&&e.bubbleIsVisible()&&r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===e){let n,o;return(o=(n=e.getBubble())==null?void 0:n.getWorkspace())!=null?o:null}if(e instanceof Ls&&e.bubbleIsVisible()&&r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===e){let n,o;return(o=(n=e.getBubble())==null?void 0:n.getEditor())!=null?o:null}return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return Is(e,1)}getPreviousSibling(e){return Is(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof lu}},sw=class{getFirstChild(e){return e.view.getCommentBarButtons()[0]}getParent(e){return e.workspace}getNextSibling(e){return ua(e,1)}getPreviousSibling(e){return ua(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof xi}},BL=class{getFirstChild(e){return e=e.getTopBlocks(!0),e.length?e[0]:null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()&&!e.isMutator}isApplicable(e){return e instanceof rn}},EE=class{constructor(){this.rules=[new wL,new DL,new ML,new BL,new nw,new sw,new tw,new ew,new rw]}addNavigationPolicy(e){this.rules.push(e)}get(e){return this.rules.find(n=>n.isApplicable(e))}getFirstChild(e){let n;const o=(n=this.get(e))==null?void 0:n.getFirstChild(e);if(!o)return null;let a;return(a=this.get(o))!=null&&a.isNavigable(o)?o:this.getFirstChild(o)||this.getNextSibling(o)}getParent(e){let n;const o=(n=this.get(e))==null?void 0:n.getParent(e);if(!o)return null;let a;return(a=this.get(o))!=null&&a.isNavigable(o)?o:this.getParent(o)}getNextSibling(e){let n;const o=(n=this.get(e))==null?void 0:n.getNextSibling(e);if(!o)return null;let a;return(a=this.get(o))!=null&&a.isNavigable(o)?o:this.getNextSibling(o)}getPreviousSibling(e){let n;const o=(n=this.get(e))==null?void 0:n.getPreviousSibling(e);if(!o)return null;let a;return(a=this.get(o))!=null&&a.isNavigable(o)?o:this.getPreviousSibling(o)}},UL=class extends EE{constructor(e){super(),this.rules.push(new bL,new kL),this.rules=this.rules.map(n=>new yL(n,e))}},mE=class{constructor(e,n,o,a,d){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,n=n===void 0?!0:n,o=o===void 0?!0:o;const p=n&&o;n&&(this.hScroll=new sr(e,!0,p,a,d)),o&&(this.vScroll=new sr(e,!1,p,a,d)),p&&(this.corner_=N(ue.RECT,{height:sr.scrollbarThickness,width:sr.scrollbarThickness,class:"blocklyScrollbarBackground"}),ut(this.corner_,e.getBubbleCanvas()))}dispose(){Ce(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var n=!1,o=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(n=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(o=!0)):o=n=!0,n||o){try{r.disable$$module$build$src$core$events$utils(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&o&&this.vScroll.resize(e)}finally{r.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let a;(a=this.corner_)==null||a.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let a;(a=this.corner_)==null||a.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,n){this.hScroll&&this.hScroll.setOrigin(e,n),this.vScroll&&this.vScroll.setOrigin(e,n)}set(e,n,o){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(n,!1),(o||o===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},va="sep",HL=class{load(e,n){return e=new pf(0,n.horizontalLayout?"x":"y"),new Aa(e,va)}gapForItem(e,n){let o;return(o=parseInt(String(e.gap)))!=null?o:n}disposeItem(e){}getType(){return va}};i(Le.FLYOUT_INFLATER,va,HL);var gf=class extends Tf{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.reflowWrapper=null,this.contents=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,this.inflaters=new Map,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new rn(e),this.workspace_.setMetricsManager(new NL(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.workspace_.setNavigator(new UL(this)),this.id=re(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=this.MARGIN*3,this.GAP_Y=this.MARGIN*3}createDom(e){return this.svgGroup_=N(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=N(ue.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new mE(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(A(this.svgGroup_,"wheel",this,this.wheel_)),this.boundEvents.push(A(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:Ht.ComponentWeight.FLYOUT_WEIGHT,capabilities:[Ht.Capability.AUTOHIDEABLE,Ht.Capability.DELETE_AREA,Ht.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)y(e);this.boundEvents.length=0,this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&Ce(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const n=e!==this.isVisible();this.visible=e,n&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const n=e!==this.containerVisible;this.containerVisible=e,n&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let n;(n=this.workspace_.scrollbar)==null||n.setContainerVisible(e)}positionAt_(e,n,o,a){let d;(d=this.svgGroup_)==null||d.setAttribute("width",`${e}`);let p;(p=this.svgGroup_)==null||p.setAttribute("height",`${n}`),this.workspace_.setCachedParentSvgSize(e,n),this.svgGroup_&&Bt(this.svgGroup_,"translate("+o+"px,"+a+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(o,a),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){this.isVisible()&&(this.setVisible(!1),this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null))}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=je(e),e=this.createFlyoutInfo(e),Zi(this.workspace_),this.setContents(e),this.layout_(e),this.horizontalLayout?this.height_=0:this.width_=0,this.reflow(),this.workspace_.setResizesEnabled(!0),this.reflowWrapper=n=>{n.type!==de.BLOCK_CHANGE&&n.type!==de.BLOCK_FIELD_INTERMEDIATE_CHANGE||this.reflow()},this.workspace_.addChangeListener(this.reflowWrapper)}createFlyoutInfo(e){const n=[],o=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const a of e)"custom"in a&&(e=this.getDynamicCategoryContents(a.custom),e=je(e),n.push(...this.createFlyoutInfo(e))),e=a.kind.toLowerCase(),(e=this.getInflaterForType(e))&&(n.push(e.load(a,this)),(e=e.gapForItem(a,o))&&n.push(new Aa(new pf(e,this.horizontalLayout?"x":"y"),va)));return this.normalizeSeparators(n)}normalizeSeparators(e){for(let n=e.length-1;n>0;n--){const o=e[n].getType().toLowerCase(),a=e[n-1].getType().toLowerCase();o===va&&a===va&&e.splice(n-1,1)}return e}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}clearOldBlocks(){this.getContents().forEach(n=>{let o;(o=this.getInflaterForType(n.getType()))==null||o.disposeItem(n)});let e;(e=this.workspace_.getPotentialVariableMap())==null||e.clear()}onMouseDown(e){const n=this.targetWorkspace.getGesture(e);n&&n.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()&&!this.getTargetWorkspace().isReadOnly()}createBlock(e){let n=null;r.disable$$module$build$src$core$events$utils();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock(e)}finally{r.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=bc(this.targetWorkspace,o),he()){for(r.setGroup$$module$build$src$core$events$utils(!0),o=0;o<e.length;o++){const a=e[o];z(new(ce(de.VAR_CREATE))(a))}z(new(ce(de.BLOCK_CREATE))(n))}return this.autoClose&&this.hide(),n}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const o=this.serializeBlock(e);return n.setResizesEnabled(!1),n=Qi(o,n),this.positionNewBlock(e,n),n}serializeBlock(e){return ss(e)}positionNewBlock(e,n){const o=this.targetWorkspace;var a=o.getOriginOffsetInPixels(),d=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),d=Ne.sum(d,e),a=Ne.difference(d,a),a.scale(1/o.scale),n.moveTo(new Ne(a.x,a.y))}getInflaterForType(e){if(this.inflaters.has(e)){var n;return(n=this.inflaters.get(e))!=null?n:null}return(n=f(Le.FLYOUT_INFLATER,e))?(n=new n,this.inflaters.set(e,n),n):null}getFocusableElement(){throw Error("Flyouts are not directly focusable.")}getFocusableTree(){throw Error("Flyouts are not directly focusable.")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}getRootFocusableNode(){throw Error("Flyouts are not directly focusable.")}getRestoredFocusableNode(e){throw Error("Flyouts are not directly focusable.")}getNestedTrees(){throw Error("Flyouts are not directly focusable.")}lookUpFocusableNode(e){throw Error("Flyouts are not directly focusable.")}onTreeFocus(e,n){}onTreeBlur(e){throw Error("Flyouts are not directly focusable.")}},GL=class{constructor(){this.isActive=!1,this.activeClassName="blocklyKeyboardNavigation"}setIsActive(e=!0){this.isActive=e,this.updateActiveVisualization()}getIsActive(){return this.isActive}updateActiveVisualization(){this.isActive?document.body.classList.add(this.activeClassName):document.body.classList.remove(this.activeClassName)}},Ef=new GL,VL=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new Ne(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){}endDrag(e){this.drag(e)}drag(e){if(e=Ne.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},iw=5,ow=6,mf=class{constructor(e,n){this.creatorWorkspace=n,this.mouseDownXY=new Ne(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new Ne(0,0)}dispose(){R(),op(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)y(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const n=new Ne(e.clientX,e.clientY);this.updateDragDelta(n)&&(this.updateIsDragging(e),S()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=Ne.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=Ne.magnitude(this.currentDragDeltaXY)>(this.flyout?r.config$$module$build$src$core$config.flyoutDragRadius:r.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),r.getGroup$$module$build$src$core$events$utils()||r.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new VL(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const n=ie();n&&ha(n)&&n.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(n,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,n){return new(g(Le.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,n)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,H(e)?this.cancel():(this.gestureHasStarted=!0,aa(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=BT(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,ip(),G(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&E(e,this),this.mouseDownXY=new Ne(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(A(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(A(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(A(document,"pointerup",null,this.handleUp.bind(this),!0)),this.boundEvents.push(A(document,"pointercancel",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&S())}handleMove(e){this.isDragging()&&L(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),S())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!L(e))return;if(this.updateFromEvent(e),S(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?(Ef.setIsActive(!1),this.dragger.onDragEnd(e,this.currentDragDeltaXY)):this.workspaceDragger?(Ef.setIsActive(!1),this.workspaceDragger.endDrag(this.currentDragDeltaXY)):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var n=x(e);this.cachedPoints.set(n,this.getTouchPoint(e));var o=Array.from(this.cachedPoints.keys());o.length===2&&(n=this.cachedPoints.get(o[0]),o=this.cachedPoints.get(o[1]),this.startDistance=Ne.distance(n,o),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const n=x(e);this.cachedPoints.set(n,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var n=Array.from(this.cachedPoints.keys()),o=this.cachedPoints.get(n[0]);if(n=this.cachedPoints.get(n[1]),o=Ne.distance(o,n)/this.startDistance,this.previousScale>0&&this.previousScale<1/0){if(n=o-this.previousScale,n=n>0?n*iw:n*ow,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const a=this.startWorkspace_,d=k(e,a.getParentSvg(),a.getInverseScreenCTM());a.zoom(d.x,d.y,n)}this.previousScale=o,e.preventDefault()}handleTouchEnd(e){e=x(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),this.cachedPoints.size<2&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new Ne(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(S(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startWorkspace_),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),Ef.setIsActive(!1),this.dispose()}handleWsStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(n),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment?this.startBlock&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startBlock):r.getFocusManager$$module$build$src$core$focus_manager().focusNode(n),this.doStart(e)}fireWorkspaceClick(e){z(new(ce(de.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(n),this.handleWsStart(e,n.getWorkspace())}handleBlockStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent=e}handleBubbleStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent=e}handleCommentStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(n),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.bringBlockToFront(),this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent)}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.flyout.isBlockCreatable(this.targetBlock)){r.getGroup$$module$build$src$core$events$utils()||r.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours(),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(ce(de.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),z(e)}this.bringBlockToFront(),r.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){this.fireWorkspaceClick(this.startWorkspace_||this.creatorWorkspace)}bringBlockToFront(){this.targetBlock&&!this.flyout&&(r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),this.targetBlock.bringToFront())}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):(this.targetBlock=e,r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e))}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,n;return(n=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?n:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=Qe();for(let n=0,o;o=e[n];n++)if(o.currentGesture_)return!0;return!1}},$E=class{constructor(e,n){this.pattern=e,this.scale=1;let o;this.spacing=(o=n.spacing)!=null?o:0;let a;this.length=(a=n.length)!=null?a:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let d;this.snapToGrid=(d=n.snap)!=null?d:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var n=this.spacing*e;this.pattern.setAttribute("width",`${n}`),this.pattern.setAttribute("height",`${n}`),n=Math.floor(this.spacing/2)+.5;let o=n-this.length/2,a=n+this.length/2;n*=e,o*=e,a*=e,this.setLineAttributes(this.line1,e,o,a,n,n),this.setLineAttributes(this.line2,e,n,n,o,a)}setLineAttributes(e,n,o,a,d,p){e&&(e.setAttribute("stroke-width",`${n}`),e.setAttribute("x1",`${o}`),e.setAttribute("y1",`${d}`),e.setAttribute("x2",`${a}`),e.setAttribute("y2",`${p}`))}moveTo(e,n){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${n}`)}alignXY(e){var n=this.getSpacing();const o=n/2,a=Math.round(Math.round((e.x-o)/n)*n+o);return n=Math.round(Math.round((e.y-o)/n)*n+o),a===e.x&&n===e.y?e:new Ne(a,n)}static createDom(e,n,o,a){e=N(ue.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},o);let d,p;if(((d=n.length)!=null?d:1)>0&&((p=n.spacing)!=null?p:0)>0){N(ue.LINE,{stroke:n.colour},e);let C;(C=n.length)!=null&&C&&N(ue.LINE,{stroke:n.colour},e)}else N(ue.LINE,{},e);return a&&a.style.setProperty("--blocklyGridPattern",`url(#${e.id})`),e}},lw=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(ao),fe(e,"blocklyBlockCanvas"),e=this.createLayer(nf),fe(e,"blocklyBubbleCanvas")}createDragLayer(e){const n=N(ue.SVG,{class:"blocklyBlockDragSurface",xmlns:Xc,"xmlns:html":tl,"xmlns:xlink":Fn,version:"1.1"});return e.append(n),N(ue.G,{},n)}createAnimationLayer(e){const n=N(ue.SVG,{class:"blocklyAnimationLayer",xmlns:Xc,"xmlns:html":tl,"xmlns:xlink":Fn,version:"1.1"});return e.append(n),N(ue.G,{},n)}appendToAnimationLayer(e){let n;const o=(n=this.dragLayer)==null?void 0:n.getAttribute("transform");if(o){let d;(d=this.animationLayer)==null||d.setAttribute("transform",o)}let a;(a=this.animationLayer)==null||a.appendChild(e.getSvgRoot())}translateLayers(e,n){e=`translate(${e.x}, ${e.y}) scale(${n})`;let o;(o=this.dragLayer)==null||o.setAttribute("transform",e);for(const[,a]of this.layers)a.setAttribute("transform",e)}moveToDragLayer(e){let n;(n=this.dragLayer)==null||n.appendChild(e.getSvgRoot()),e.canBeFocused()&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}moveOffDragLayer(e,n){this.append(e,n),e.canBeFocused()&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}append(e,n){this.layers.has(n)||this.createLayer(n),e=e.getSvgRoot();let o;if(((o=this.layers.get(n))==null?void 0:o.lastChild)!==e){let a;(a=this.layers.get(n))==null||a.appendChild(e)}}createLayer(e){const n=this.workspace.getSvgGroup(),o=N(ue.G,{});let a=!1;const d=[...this.layers].sort((p,C)=>p[0]-C[0]);for(const[p,C]of d)if(e<p){n.insertBefore(o,C),a=!0;break}return a||n.appendChild(o),this.layers.set(e,o),o}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(ao)}getBubbleLayer(){return this.layers.get(nf)}},WL=class{constructor(){this.curNode=this.colour=null,this.type="marker"}getCurNode(){return this.curNode}setCurNode(e){this.curNode=e}dispose(){this.curNode=null}getSourceBlockFromNode(e){return e instanceof bt?e:e instanceof Lt||e instanceof Mr?e.getSourceBlock():null}getSourceBlock(){return this.getSourceBlockFromNode(this.getCurNode())}},IE=class extends WL{constructor(e){super(),this.workspace=e,this.type="cursor",this.potentialNodes=null}next(){var e=this.getCurNode();return e?((e=this.getNextNode(e,n=>{let o;return n instanceof bt&&!((o=n.outputConnection)!=null&&o.targetBlock())||n instanceof xi},!0))&&this.setCurNode(e),e):null}in(){var e=this.getCurNode();return e?((e=this.getNextNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,n=>{let o;return n instanceof bt&&!((o=n.outputConnection)!=null&&o.targetBlock())||n instanceof xi},!0))&&this.setCurNode(e),e):null}out(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}atEndOfLine(){var e=this.getCurNode();if(!e)return!1;const n=this.getNextNode(e,()=>!0,!0);return e=this.getNextNode(e,o=>{let a;return o instanceof bt&&!((a=o.outputConnection)!=null&&a.targetBlock())},!0),n===e}getNextNodeImpl(e,n,o=new Set){if(!e||o.has(e))return null;let a=this.workspace.getNavigator().getFirstChild(e)||this.workspace.getNavigator().getNextSibling(e);for(var d=e;d&&!a&&(d=this.workspace.getNavigator().getParent(d),!!d);)a=this.workspace.getNavigator().getNextSibling(d);return n(a)?a:a?(o.add(e),this.getNextNodeImpl(a,n,o)):null}getNextNode(e,n,o){return!e||!o&&this.getLastNode()===e?null:this.getNextNodeImpl(e,n)}getPreviousNodeImpl(e,n,o=new Set){if(!e||o.has(e))return null;const a=this.getRightMostChild(this.workspace.getNavigator().getPreviousSibling(e),e)||this.workspace.getNavigator().getParent(e);return n(a)?a:a?(o.add(e),this.getPreviousNodeImpl(a,n,o)):null}getPreviousNode(e,n,o){return!e||!o&&this.getFirstNode()===e?null:this.getPreviousNodeImpl(e,n)}getRightMostChild(e,n){if(!e)return e;let o=this.workspace.getNavigator().getFirstChild(e);if(!o||o===n)return e;for(e=o;e&&e!==n;e=this.workspace.getNavigator().getNextSibling(o))o=e;return this.getRightMostChild(o,n)}preDelete(e){var n=this.getCurNode();n=n?[n]:[];var o;let a,d;const p=(d=(o=e.previousConnection)==null?void 0:o.targetConnection)!=null?d:(a=e.outputConnection)==null?void 0:a.targetConnection;p&&n.push(p),(o=e.getNextBlock())&&n.push(o),(e=e.getParent())&&n.push(e),n.push(this.workspace),this.potentialNodes=n}postDelete(){const e=this.potentialNodes;if(this.potentialNodes=null,!e)throw Error("must call preDelete first");for(const n of e){let o;if((o=this.getSourceBlockFromNode(n))==null||!o.disposed){this.setCurNode(n);return}}throw Error("no valid nodes in this.potentialNodes")}getCurNode(){return r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()}setCurNode(e){r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}getFirstNode(){return this.workspace.getNavigator().getFirstChild(this.workspace)}getLastNode(){const e=this.getFirstNode();return this.getPreviousNode(e,()=>!0,!0)}};i(Le.CURSOR,Pn,IE);var OE=class{constructor(e){this.workspace=e,this.markers=new Map,this.cursor=new IE(this.workspace)}registerMarker(e,n){this.markers.has(e)&&this.unregisterMarker(e),this.markers.set(e,n)}unregisterMarker(e){const n=this.markers.get(e);if(n)n.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor=e}dispose(){const e=Object.keys(this.markers);for(let n=0,o;o=e[n];n++)this.unregisterMarker(o);this.markers.clear(),this.cursor.dispose()}};OE.LOCAL_MARKER="local_marker_1";var co={};co.CommentIcon=Ls,co.Icon=lu,co.IconType=gr,co.MutatorIcon=r.MutatorIcon$$module$build$src$core$icons$mutator_icon,co.WarningIcon=ei,co.exceptions=SL,co.registry=pE,r.Names$$module$build$src$core$names=class{constructor(e,n){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=n||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.getName():null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=r.allUsedVarModels$$module$build$src$core$variables(e);for(let n=0;n<e.length;n++)this.getName(e[n].getId(),r.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,n){let o=e;n===r.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(o=e),e=o.toLowerCase();const a=n===r.NameType$$module$build$src$core$names.VARIABLE||n===r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(n)||this.db.set(n,new Map);const d=this.db.get(n);return d.has(e)?a+d.get(e):(n=this.getDistinctName(o,n),d.set(e,n.substr(a.length)),n)}getUserNames(e){let n;return(e=(n=this.db.get(e))==null?void 0:n.keys())?Array.from(e):[]}getDistinctName(e,n){e=this.safeName(e);let o=null,a,d;for(;this.dbReverse.has(e+((a=o)!=null?a:""))||this.reservedWords.has(e+((d=o)!=null?d:""));)o=o?o+1:2;let p;return e+=(p=o)!=null?p:"",this.dbReverse.add(e),(n===r.NameType$$module$build$src$core$names.VARIABLE||n===r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=r.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,n){return e.toLowerCase()===n.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(r.Names$$module$build$src$core$names||(r.Names$$module$build$src$core$names={})),r.NameType$$module$build$src$core$names=r.Names$$module$build$src$core$names.NameType,r.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,r.NameType$$module$build$src$core$names,r.Names$$module$build$src$core$names;var XL=class extends Map{constructor(){super()}set(e,n){return this.get(e)===n?this:(super.set(e,n),$d(n)&&n.startPublishing(),this)}delete(e){const n=this.get(e);return e=super.delete(e),e&&($d(n)&&n.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},$f,tn;$f="PROCEDURE",r.DEFAULT_ARG$$module$build$src$core$procedures="x",tn={CATEGORY_NAME:$f,DEFAULT_ARG:r.DEFAULT_ARG$$module$build$src$core$procedures},tn.ObservableProcedureMap=XL,tn.allProcedures=Uc,tn.findLegalName=r.findLegalName$$module$build$src$core$procedures,tn.flyoutCategory=Fp,tn.getCallers=Hp,tn.getDefinition=r.getDefinition$$module$build$src$core$procedures,tn.internalFlyoutCategory=Id,tn.isNameUsed=Pp,tn.isProcedureBlock=to,tn.mutateCallers=r.mutateCallers$$module$build$src$core$procedures,tn.mutatorOpenListener=Up,tn.rename=r.rename$$module$build$src$core$procedures;var aw=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return(e.type&this.FIELD)>=1}isHat(e){return(e.type&this.HAT)>=1}isIcon(e){return(e.type&this.ICON)>=1}isSpacer(e){return(e.type&this.SPACER)>=1}isInRowSpacer(e){return(e.type&this.IN_ROW_SPACER)>=1}isSpacerRow(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isInput(e){return(e.type&this.INPUT)>=1}isExternalInput(e){return(e.type&this.EXTERNAL_VALUE_INPUT)>=1}isInlineInput(e){return(e.type&this.INLINE_INPUT)>=1}isStatementInput(e){return(e.type&this.STATEMENT_INPUT)>=1}isPreviousConnection(e){return(e.type&this.PREVIOUS_CONNECTION)>=1}isNextConnection(e){return(e.type&this.NEXT_CONNECTION)>=1}isPreviousOrNextConnection(e){return this.isPreviousConnection(e)||this.isNextConnection(e)}isRoundCorner(e){return(e.type&this.LEFT_ROUND_CORNER)>=1||(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.LEFT_ROUND_CORNER)>=1}isRightRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftSquareCorner(e){return(e.type&this.LEFT_SQUARE_CORNER)>=1}isRightSquareCorner(e){return(e.type&this.RIGHT_SQUARE_CORNER)>=1}isCorner(e){return(e.type&this.CORNER)>=1}isJaggedEdge(e){return(e.type&this.JAGGED_EDGE)>=1}isRow(e){return(e.type&this.ROW)>=1}isBetweenRowSpacer(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isTopRow(e){return(e.type&this.TOP_ROW)>=1}isBottomRow(e){return(e.type&this.BOTTOM_ROW)>=1}isTopOrBottomRow(e){return this.isTopRow(e)||this.isBottomRow(e)}isInputRow(e){return(e.type&this.INPUT_ROW)>=1}},se=new aw,ti=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=se.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},hu=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=se.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;e>=0;e--){const n=this.elements[e];if(se.isInput(n))return n}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const n=this.elements[e];if(se.isInRowSpacer(n))return n}return null}getLastSpacer(){for(let e=this.elements.length-1;e>=0;e--){const n=this.elements[e];if(se.isInRowSpacer(n))return n}return null}},SE=class extends hu{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=se.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,o=0;for(let a=0;a<this.elements.length;a++){const d=this.elements[a];n+=d.width,se.isSpacer(d)||(se.isNextConnection(d)?o=Math.max(o,d.height):e=Math.max(e,d.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Tl=class extends ti{constructor(e,n){super(e),this.connectionModel=n,this.type|=se.CONNECTION,this.shape=this.constants_.shapeFor(n),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=n.isHighlighted()}},If=class extends Tl{constructor(e,n){super(e,n.connection),this.input=n,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=se.INPUT,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},RE=class extends If{constructor(e,n){super(e,n),this.height=0,this.type|=se.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},LE=class extends ti{constructor(e,n,o){super(e),this.field=n,this.parentInput=o,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=se.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},jL=class extends ti{constructor(e){super(e),this.type|=se.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},zL=class extends ti{constructor(e,n){super(e),this.icon=n,this.flipRtl=!1,this.type|=se.ICON,e=n.getSize(),this.height=e.height,this.width=e.width}},Wn=class extends ti{constructor(e,n){super(e),this.type|=se.SPACER|se.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},AE=class extends If{constructor(e,n){super(e,n),this.type|=se.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},vE=class extends hu{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=se.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let n=0;n<this.elements.length;n++){const o=this.elements[n];this.width+=o.width,se.isInput(o)&&(se.isStatementInput(o)?e+=o.connectedBlockWidth:se.isExternalInput(o)&&o.connectedBlockWidth!==0&&(e+=o.connectedBlockWidth-o.connectionWidth)),se.isSpacer(o)||(this.height=Math.max(this.height,o.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},YL=class extends ti{constructor(e){super(e),this.type|=se.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},KL=class extends Tl{constructor(e,n){super(e,n),this.type|=se.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},JL=class extends Tl{constructor(e,n){super(e,n),this.connectionOffsetX=0,this.type|=se.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},qL=class extends Tl{constructor(e,n){super(e,n),this.type|=se.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},du=class extends ti{constructor(e,n){super(e),this.type=(n&&n!=="left"?se.RIGHT_ROUND_CORNER:se.LEFT_ROUND_CORNER)|se.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},CE=class extends hu{constructor(e,n,o){super(e),this.height=n,this.width=o,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type|=se.SPACER|se.BETWEEN_ROW_SPACER,this.elements=[new Wn(this.constants_,o)]}measure(){}},fu=class extends ti{constructor(e,n){super(e),this.type=(n&&n!=="left"?se.RIGHT_SQUARE_CORNER:se.LEFT_SQUARE_CORNER)|se.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Of=class extends If{constructor(e,n){super(e,n),this.type|=se.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},xE=class extends hu{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=se.TOP_ROW}hasLeftSquareCorner(e){const n=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,o=e.getPreviousBlock();return!!e.outputConnection||n||(o?o.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,o=0;for(let a=0;a<this.elements.length;a++){const d=this.elements[a];n+=d.width,se.isSpacer(d)||(se.isHat(d)?o=Math.max(o,d.ascenderHeight):e=Math.max(e,d.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Sf=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Jt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const n=e.blockStyles;for(const o in n)this.blockStyles[o]=this.validatedBlockStyle_(n[o]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=te("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const n="auto_"+e;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(e)),{style:this.blockStyles[n],name:n}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const n={};return e&&Object.assign(n,e),e=ra(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?ra(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?ra(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n}generateSecondaryColour_(e){return Jo("#fff",e,.6)||e}generateTertiaryColour_(e){return Jo("#fff",e,.3)||e}dispose(){this.embossFilter&&Ce(this.embossFilter),this.disabledPattern&&Ce(this.disabledPattern),this.debugFilter&&Ce(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH,o=la([Je(n,e/4),Je(-n*2,e/2),Je(n,e/4)]);return{height:e,width:n,path:o}}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH,o=vn("c",[Je(30,-e),Je(70,-e),Je(n,0)]);return{height:e*.75,width:n,path:o}}makePuzzleTab(){function e(p){p=p?-1:1;const C=-p;var X=o/2;const Ie=X+2.5,Ke=X+.5,jt=Je(-n,p*X);return X=Je(n,p*X),vn("c",[Je(0,p*Ie),Je(-n,C*Ke),jt])+vn("s",[Je(n,C*2.5),X])}const n=this.TAB_WIDTH,o=this.TAB_HEIGHT,a=e(!0),d=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:d,pathUp:a}}makeNotch(){function e(C){return la([Je(C*a,o),Je(C*3,0),Je(C*a,-o)])}const n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,a=(n-3)/2,d=e(1),p=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:d,pathRight:p}}makeInsideCorners(){const e=this.CORNER_RADIUS,n=nr("a","0 0,0",e,Je(-e,e)),o=nr("a","0 0,0",e,Je(e,e));return{width:e,height:e,pathTop:n,pathBottom:o}}makeOutsideCorners(){const e=this.CORNER_RADIUS,n=Jt(0,e)+nr("a","0 0,1",e,Je(e,-e)),o=nr("a","0 0,1",e,Je(e,e)),a=nr("a","0 0,1",e,Je(-e,-e)),d=nr("a","0 0,1",e,Je(-e,e));return{topLeft:n,topRight:o,bottomRight:d,bottomLeft:a,rightHeight:e}}shapeFor(e){switch(e.type){case ze.INPUT_VALUE:case ze.OUTPUT_VALUE:return this.PUZZLE_TAB;case ze.PREVIOUS_STATEMENT:case ze.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,n,o,a){this.injectCSS_(n,o),this.defs=N(ue.DEFS,{},e),e=N(ue.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),N(ue.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),n=N(ue.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),N(ue.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},n),N(ue.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),N(ue.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=N(ue.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),N(ue.RECT,{width:10,height:10,fill:"#aaa"},e),N(ue.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter(),a&&(a.style.setProperty("--blocklyEmbossFilter",`url(#${this.embossFilterId})`),a.style.setProperty("--blocklyDisabledPattern",`url(#${this.disabledPatternId})`),a.style.setProperty("--blocklyDebugFilter",`url(#${this.debugFilterId})`))}createDebugFilter(){if(!this.debugFilter){const e=N(ue.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),n=N(ue.FECOMPONENTTRANSFER,{result:"outBlur"},e);N(ue.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),N(ue.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),N(ue.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,n){n=this.getCSS_(n),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const o=n.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=o:(n=document.createElement("style"),n.id=e,e=document.createTextNode(o),n.appendChild(e),document.head.insertBefore(n,document.head.firstChild),this.cssNode=n)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect,`,`${e} .blocklyEditableField>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableField:not(.blocklyEditing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},Rf=class{constructor(e,n){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=n,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=n.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const n=this.info_.rows[e];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Jt(e.xPos,this.info_.startY);for(let o=0,a;a=n[o];o++)se.isLeftRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:se.isRightRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:se.isPreviousConnection(a)?this.outlinePath_+=a.shape.pathLeft:se.isHat(a)?this.outlinePath_+=this.constants_.START_HAT.path:se.isSpacer(a)&&(this.outlinePath_+=qe("h",a.width));this.outlinePath_+=qe("v",e.height-e.ascenderHeight)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+qe("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const n=e.getLastInput();this.positionExternalValueConnection_(e);const o=Od(n.shape)?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=qe("H",n.xPos+n.width)+o+qe("v",e.height-n.connectionHeight)}drawStatementInput_(e){var n=e.getLastInput();if(n){var o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+qe("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var a=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=qe("H",o)+n+qe("v",a)+this.constants_.INSIDE_CORNERS.pathBottom+qe("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=qe("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();let o=0,a="";for(let d=n.length-1,p;p=n[d];d--)se.isNextConnection(p)?a+=p.shape.pathRight:se.isLeftSquareCorner(p)?a+=qe("H",e.xPos):se.isLeftRoundedCorner(p)?a+=this.constants_.OUTSIDE_CORNERS.bottomLeft:se.isRightRoundedCorner(p)?(a+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):se.isSpacer(p)&&(a+=qe("h",p.width*-1));this.outlinePath_+=qe("V",e.baseline-o),this.outlinePath_+=a}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const n=e.connectionOffsetY+e.height;e=Od(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=qe("V",n)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,n;n=this.info_.rows[e];e++)for(let o=0,a;a=n.elements[o];o++)se.isInlineInput(a)?this.drawInlineInput_(a):(se.isIcon(a)||se.isField(a))&&this.layoutField_(a)}layoutField_(e){const n=e.centerline-e.height/2;let o=e.xPos;var a="";this.info_.RTL&&(o=-(o+e.width),e.flipRtl&&(o+=e.width,a="scale(-1 1)")),se.isIcon(e)?(a=e.icon,a.setOffsetInBlock(new Ne(o,n)),this.info_.isInsertionMarker&&a.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+o+","+n+")"+a),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const n=e.width,o=e.height,a=e.connectionOffsetY,d=e.connectionHeight+a;this.inlinePath_+=yr(e.xPos+e.connectionWidth,e.centerline-o/2)+qe("v",a)+e.shape.pathDown+qe("v",o-d)+qe("h",n-e.connectionWidth)+qe("v",-o)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const n=e.centerline-e.height/2;if(e.connectionModel){let o=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,n+e.connectionOffsetY)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(n!=null&&n.connectionModel){let o=e.xPos+e.statementEdge+n.notchOffset;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,e.yPos)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let o=e.xPos+e.width;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const n=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,o=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const n of e.elements){if(!(n instanceof Tl))continue;const o=this.drawConnectionHighlightPath(n);o&&(o.style.display=n.highlighted?"":"none")}}drawConnectionHighlightPath(e){const n=e.connectionModel;e=n.type===ze.INPUT_VALUE||n.type===ze.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const o=n.getSourceBlock();let a,d;return(d=(a=o.pathObject).addConnectionHighlight)==null?void 0:d.call(a,n,e,n.getOffsetInBlock(),o.RTL)}getExpressionConnectionHighlightPath(e){let n="";return Od(e.shape)?n=e.shape.pathDown(e.height):bS(e.shape)&&(n=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,Jt(0,-e)+qe("v",e)+n+qe("v",e)}getStatementConnectionHighlightPath(e){if(!yS(e.shape))throw Error("Statement connections should have notch shapes");const n=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Jt(-n,0)+qe("h",n)+e.shape.pathLeft+qe("h",n)}},_u=class{constructor(e,n){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=n,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new JL(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.topRow=new xE(this.constants_),this.bottomRow=new SE(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new vE(this.constants_);this.inputRows.push(e);var n=this.block_.getIcons();for(let o=0,a;a=n[o];o++){const d=new zL(this.constants_,a);this.isCollapsed&&!a.isShownWhenCollapsed()||e.elements.push(d)}n=void 0;for(let o=0,a;a=this.block_.inputList[o];o++)if(a.isVisible()){this.shouldStartNewRow_(a,n)&&(this.rows.push(e),e=new vE(this.constants_),this.inputRows.push(e));for(let d=0,p;p=a.fieldRow[d];d++)e.elements.push(new LE(this.constants_,p,a));this.addInput_(a,e),n=a}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new YL(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const n=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let o=this.topRow.hasLeftSquareCorner(this.block_)?fu:du;this.topRow.elements.push(new o(this.constants_)),n?(e=new jL(this.constants_),this.topRow.elements.push(e)):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new qL(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Vn&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?fu:du,this.topRow.elements.push(new o(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Vn?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new fu(this.constants_)):this.bottomRow.elements.push(new du(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new KL(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new fu(this.constants_,"right")):this.bottomRow.elements.push(new du(this.constants_,"right"))}addInput_(e,n){this.isInline&&e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new AE(this.constants_,e)),n.hasInlineInput=!0):e instanceof Vn?(n.elements.push(new Of(this.constants_,e)),n.hasStatement=!0):e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new RE(this.constants_,e)),n.hasExternalInput=!0):(e instanceof Qs||e instanceof yi)&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),n.align===null&&(n.align=e.align)}shouldStartNewRow_(e,n){return n?n instanceof yi||e instanceof Vn||n instanceof Vn?!0:e instanceof r.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Qs||n instanceof r.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,n;n=this.rows[e];e++){const o=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new Wn(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(let a=0;a<o.length-1;a++){n.elements.push(o[a]);const d=this.getInRowSpacing_(o[a],o[a+1]);n.elements.push(new Wn(this.constants_,d))}n.elements.push(o[o.length-1]),n.endsWithElemSpacer()&&n.elements.push(new Wn(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}}getInRowSpacing_(e,n){if(!e&&n&&se.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&se.isInput(e)&&!n){if(se.isExternalInput(e))return this.constants_.NO_PADDING;if(se.isInlineInput(e))return this.constants_.LARGE_PADDING;if(se.isStatementInput(e))return this.constants_.NO_PADDING}return e&&se.isLeftSquareCorner(e)&&n&&(se.isPreviousConnection(n)||se.isNextConnection(n))?n.notchOffset:e&&se.isLeftRoundedCorner(e)&&n&&(se.isPreviousConnection(n)||se.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&se.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,n=0,o=0;for(let d=0,p;p=this.rows[d];d++){if(p.measure(),n=Math.max(n,p.width),p.hasStatement){var a=p.getLastInput();let C,X;a=p.width-((X=(C=a)==null?void 0:C.width)!=null?X:0),e=Math.max(e,a)}o=Math.max(o,p.widthWithConnectedBlocks)}this.statementEdge=e,this.width=n;for(let d=0,p;p=this.rows[d];d++)p.hasStatement&&(p.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let n=0,o;o=this.rows[n];n++)if(o.hasStatement)this.alignStatementRow_(o);else{var e=o.width;e=this.getDesiredRowWidth_(o)-e,e>0&&this.addAlignmentPadding_(o,e),se.isTopOrBottomRow(o)&&(o.widthWithConnectedBlocks=o.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,n){const o=e.getFirstSpacer(),a=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align===r.Align$$module$build$src$core$inputs$align.LEFT&&a)a.width+=n;else if(e.align===r.Align$$module$build$src$core$inputs$align.CENTRE&&o&&a)o.width+=n/2,a.width+=n/2;else if(e.align===r.Align$$module$build$src$core$inputs$align.RIGHT&&o)o.width+=n;else if(a)a.width+=n;else return;e.width+=n}alignStatementRow_(e){const n=e.getLastInput();if(n){var o=e.width-n.width,a=this.statementEdge;o=a-o,o>0&&this.addAlignmentPadding_(e,o),o=e.width,a=this.getDesiredRowWidth_(e),n.width+=a-o,n.height=Math.max(n.height,e.height),e.width+=a-o,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let n=0;n<e.length;n++)this.rows.push(e[n]),n!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[n],e[n+1]))}makeSpacerRow_(e,n){var o=this.getSpacerRowHeight_(e,n);const a=this.getSpacerRowWidth_(e,n);return o=new CE(this.constants_,o,a),e.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o}getSpacerRowWidth_(e,n){return this.width-this.startX}getSpacerRowHeight_(e,n){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){return se.isSpacer(n)?e.yPos+n.height/2:se.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,se.isNextConnection(n)?e+n.height/2:e-n.height/2):se.isTopRow(e)?se.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2}recordElemPositions_(e){let n=e.xPos;for(let o=0,a;a=e.elements[o];o++)se.isSpacer(a)&&(a.height=e.height),a.xPos=n,a.centerline=this.getElemCenterline_(e,a),n+=a.width}finalize_(){let e=0,n=0;for(let o=0,a;a=this.rows[o];o++)a.yPos=n,a.xPos=this.startX,n+=a.height,e=Math.max(e,a.widthWithConnectedBlocks),this.recordElemPositions_(a);if(this.outputConnection&&this.block_.nextConnection){const o=this.block_.nextConnection.targetBlock();o&&(e=Math.max(e,o.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let n;if(((n=this.outputConnection)==null?void 0:n.connectionModel)===e)return this.outputConnection;for(const o of this.rows)for(const a of o.elements)if(a instanceof Tl&&a.connectionModel===e)return a;return null}},Lf=class{constructor(e,n,o){this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=o,this.style=n,this.svgRoot=e,this.svgPath=N(ue.PATH,{class:"blocklyPath"},this.svgRoot),this.setClass_("blocklyBlock",!0)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,n){e&&(n?fe(this.svgRoot,e):Me(this.svgRoot,e))}updateHighlighted(e){e?this.setClass_("blocklyHighlighted",!0):this.setClass_("blocklyHighlighted",!1)}updateShadow_(e){e?(this.setClass_("blocklyShadow",!0),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)):this.setClass_("blocklyShadow",!1)}updateDisabled_(e){this.setClass_("blocklyDisabled",e),this.setClass_("blocklyDisabledPattern",e)}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,n){}addConnectionHighlight(e,n,o,a){return o=`translate(${o.x}, ${o.y})`+(a?" scale(-1 1)":""),(a=this.connectionHighlights.get(e))?(a.setAttribute("d",n),a.setAttribute("transform",o),a):(n=N(ue.PATH,{id:e.id,class:"blocklyHighlightedConnectionPath",style:"display: none;",d:n,transform:o},this.svgRoot),this.connectionHighlights.set(e,n),n)}removeConnectionHighlight(e){const n=this.connectionHighlights.get(e);n&&(Ce(n),this.connectionHighlights.delete(e))}},Af=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,Object.assign(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,n,o){this.constants_.createDom(e,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName(),o)}refreshDom(e,n,o){const a=this.getConstants();a.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=a.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n,o)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Sf}makeRenderInfo_(e){return new _u(this,e)}makeDrawer_(e,n){return new Rf(e,n)}makePathObject(e,n){return new Lf(e,n,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,n,o){return!!Tt.getConnectionForOrphanedConnection(e,o===ze.OUTPUT_VALUE?n.outputConnection:n.previousConnection)}render(e){const n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()}},Rt={};Rt.BottomRow=SE,Rt.Connection=Tl,Rt.ConstantProvider=Sf,Rt.Drawer=Rf,Rt.ExternalValueInput=RE,Rt.Field=LE,Rt.Hat=jL,Rt.Icon=zL,Rt.InRowSpacer=Wn,Rt.InlineInput=AE,Rt.InputConnection=If,Rt.InputRow=vE,Rt.JaggedEdge=YL,Rt.Measurable=ti,Rt.NextConnection=KL,Rt.OutputConnection=JL,Rt.PathObject=Lf,Rt.PreviousConnection=qL,Rt.RenderInfo=_u,Rt.Renderer=Af,Rt.RoundCorner=du,Rt.Row=hu,Rt.SpacerRow=CE,Rt.SquareCorner=fu,Rt.StatementInput=Of,Rt.TopRow=xE,Rt.Types=se,Rt.init=Gp,Rt.register=Hc,Rt.unregister=kS;var ZL=class{constructor(e,n){this.workspace=e,this.theme=n,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var n=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(n&&(n=n.getClassName())&&Me(e,n),(n=this.theme.getClassName())&&fe(e,n));for(let o=0,a;a=this.subscribedWorkspaces[o];o++)a.refreshTheme();for(const[o,a]of this.componentDB)for(const d of a){e=d.element,n=d.propertyName;const p=this.theme&&this.theme.getComponentStyle(o);e.style.setProperty(n,p||"")}for(const o of this.subscribedWorkspaces)o.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!Ae(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,n,o){this.componentDB.has(n)||this.componentDB.set(n,[]),this.componentDB.get(n).push({element:e,propertyName:o}),n=this.theme&&this.theme.getComponentStyle(n),e.style.setProperty(o,n||"")}unsubscribe(e){if(e)for(const[n,o]of this.componentDB){for(let a=o.length-1;a>=0;a--)o[a].element===e&&o.splice(a,1);o.length||this.componentDB.delete(n)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},NE="VARIABLE_DYNAMIC",uo={CATEGORY_NAME:NE};uo.flyoutCategory=Vp,uo.flyoutCategoryBlocks=Wp,uo.internalFlyoutCategory=Ad,uo.onCreateVariableButtonClick_Colour=Ld,uo.onCreateVariableButtonClick_Number=Rd,uo.onCreateVariableButtonClick_String=Sd;var QL=class{canConnect(e,n,o,a){return this.canConnectWithReason(e,n,o,a)===Tt.CAN_CONNECT}canConnectWithReason(e,n,o,a){const d=this.doSafetyChecks(e,n);return d!==Tt.CAN_CONNECT?d:this.doTypeChecks(e,n)?o&&!this.doDragChecks(e,n,a||0)?Tt.REASON_DRAG_CHECKS_FAILED:Tt.CAN_CONNECT:Tt.REASON_CHECKS_FAILED}getErrorMessage(e,n,o){switch(e){case Tt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Tt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Tt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Tt.REASON_TARGET_NULL:return"Target connection is null.";case Tt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(n+" expected "+n.getCheck()+", found "+o.getCheck());case Tt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Tt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Tt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,n){if(!e||!n)return Tt.REASON_TARGET_NULL;let o,a,d;return e.isSuperior()?(o=e.getSourceBlock(),a=n.getSourceBlock(),d=n):(a=e.getSourceBlock(),o=n.getSourceBlock(),d=e,e=n),o===a?Tt.REASON_SELF_CONNECTION:d.type!==_l[e.type]?Tt.REASON_WRONG_TYPE:o.workspace!==a.workspace?Tt.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!a.isShadow()?Tt.REASON_SHADOW_PARENT:d.type===ze.OUTPUT_VALUE&&a.previousConnection&&a.previousConnection.isConnected()||d.type===ze.PREVIOUS_STATEMENT&&a.outputConnection&&a.outputConnection.isConnected()?Tt.REASON_PREVIOUS_AND_OUTPUT:Tt.CAN_CONNECT}doTypeChecks(e,n){if(e=e.getCheck(),n=n.getCheck(),!e||!n)return!0;for(let o=0;o<e.length;o++)if(n.includes(e[o]))return!0;return!1}doDragChecks(e,n,o){if(e.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case ze.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case ze.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case ze.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case ze.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection||n.targetBlock()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;default:return!1}return!Yc.includes(n)}canConnectToPrevious_(e,n){return e.targetConnection||Yc.includes(n)?!1:n.targetConnection?(e=n.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};i(Le.CONNECTION_CHECKER,Pn,QL);var Ca=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new XL,this.readOnly=!1,this.potentialVariableMap=null,this.id=re(),ot(this),this.options=e||new Zs({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(g(Le.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new(this.getVariableMapClass())(this),this.setIsReadOnly(this.options.readOnly)}dispose(){this.listeners.length=0,this.clear(),Mt(this)}sortObjects(e,n){const o=a=>({getBoundingRectangle:()=>{const d=a.getRelativeToSurfaceXY();return new it(d.y,d.y,d.x,d.x)},moveBy:()=>{}});return this.sortByOrigin(o(e),o(n))}sortByOrigin(e,n){const o=Math.sin(td(Ca.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getBoundingRectangle().getOrigin(),n=n.getBoundingRectangle().getOrigin(),e.y+o*e.x-(n.y+o*n.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!Ae(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const n=[].concat(this.topBlocks);return e&&n.length>1&&n.sort(this.sortObjects.bind(this)),n}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){Ae(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,n=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),n&&e&&e.length>1&&e.sort(this.sortObjects.bind(this)),e.filter(o=>!o.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!Ae(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const n=[].concat(this.topComments);return e&&n.length>1&&n.sort(this.sortObjects.bind(this)),n}getAllBlocks(e=!1){if(e){var n=this.getTopBlocks(!0);e=[];for(let o=0;o<n.length;o++)e.push(...n[o].getDescendants(!0))}else for(e=this.getTopBlocks(!1),n=0;n<e.length;n++)e.push(...e[n].getChildren(!1));return e.filter(o=>!o.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=r.getGroup$$module$build$src$core$events$utils();for(e||r.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();r.setGroup$$module$build$src$core$events$utils(e),this.isFlyout||this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,n){br("Blockly.Workspace.renameVariableById","v12","v13","Blockly.Workspace.getVariableMap().renameVariable"),(e=this.variableMap.getVariableById(e))&&this.variableMap.renameVariable(e,n)}createVariable(e,n,o){return br("Blockly.Workspace.createVariable","v12","v13","Blockly.Workspace.getVariableMap().createVariable"),this.variableMap.createVariable(e,n??void 0,o??void 0)}getVariableUsesById(e){return br("Blockly.Workspace.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),Zl(this,e)}deleteVariableById(e){br("Blockly.Workspace.deleteVariableById","v12","v13","Blockly.Workspace.getVariableMap().deleteVariable");const n=this.variableMap.getVariableById(e);n?r.deleteVariable$$module$build$src$core$variables(this,n):console.warn(`Can't delete non-existent variable: ${e}`)}getVariable(e,n){return br("Blockly.Workspace.getVariable","v12","v13","Blockly.Workspace.getVariableMap().getVariable"),this.variableMap.getVariable(e,n)}getVariableById(e){return br("Blockly.Workspace.getVariableById","v12","v13","Blockly.Workspace.getVariableMap().getVariableById"),this.variableMap.getVariableById(e)}getVariablesOfType(e){return br("Blockly.Workspace.getVariablesOfType","v12","v13","Blockly.Workspace.getVariableMap().getVariablesOfType"),this.variableMap.getVariablesOfType(e??"")}getAllVariables(){return br("Blockly.Workspace.getAllVariables","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables()}getAllVariableNames(){return br("Blockly.Workspace.getAllVariableNames","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables().map(e=>e.getName())}getWidth(){return 0}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let n=0;for(const o in e){if(e[o]>this.remainingCapacityOfType(o))return!1;n+=e[o]}return!(n>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var n=e?this.redoStack_:this.undoStack_,o=e?this.undoStack_:this.redoStack_;const a=n.pop();if(a){for(var d=[a];n.length&&a.group&&a.group===n[n.length-1].group;){const p=n.pop();p&&d.push(p)}for(n=0;n<d.length;n++)o.push(d[n]);r.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(o=0;o<d.length;o++)d[o].run(e)}finally{r.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,q()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){Ae(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&this.MAX_UNDO>=0;)this.undoStack_.shift();for(let n=0;n<this.listeners.length;n++)(0,this.listeners[n])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,n){this.blockDB.set(e,n)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let n;return(n=this.commentDB.get(e))!=null?n:null}allInputsFilled(e){const n=this.getTopBlocks(!1);for(let o=0;o<n.length;o++)if(!n[o].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new(this.getVariableMapClass())(this,!0)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const n=this.options.parentWorkspace;return this.isFlyout?n&&n.options&&(e=n.options.parentWorkspace):n&&(e=n),e}static getById(e){return Ot(e)}static getAll(){return Qe()}getVariableMapClass(){const e=g(Le.VARIABLE_MAP,this.options,!0);if(!e)throw Error("No variable map is registered.");return e}isReadOnly(){return this.readOnly}setIsReadOnly(e){this.readOnly=e,this.options.readOnly=e}};Ca.SCAN_ANGLE=3;var cw=100,eA=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,n){if(e.length){try{var o=new globalThis.Audio}catch{return}for(let d=0;d<e.length;d++){const p=e[d],C=p.match(/\.(\w+)$/);if(C&&o.canPlayType("audio/"+C[1])){var a=new globalThis.Audio(p);break}}a&&this.sounds.set(n,a)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const n=e.play();if(n!==void 0?n.then(e.pause).catch(function(){}):e.pause(),Pd||cR)break}}play(e,n){if(!this.muted){var o=this.sounds.get(e);o?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<cw||(this.lastSound=e,o=Pd||Lg?o:o.cloneNode(),o.volume=n===void 0?1:n,o.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,n)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},uw=20,rn=class extends Ca{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardMoveInProgress=this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.navigator=new EE,this.metricsManager=new(g(Le.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||rn.setTopLevelWorkspaceMetrics,this.componentManager=new Ht,this.connectionDBList=Sa.init(this.connectionChecker),this.audioManager=new eA(e.parentWorkspace),this.grid=this.options.gridPattern?new $E(this.options.gridPattern,e.gridOptions):null,this.markerManager=new OE(this),or&&Jh&&this.registerToolboxCategoryCallback(jg,Jh),uo&&Ad&&this.registerToolboxCategoryCallback(NE,Ad),tn&&Id&&(this.registerToolboxCategoryCallback($f,Id),this.addChangeListener(Up)),this.addChangeListener(this.variableChangeCallback.bind(this)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new ZL(this,this.options.theme||cf),this.themeManager_.subscribeWorkspace(this);let n;this.renderer=Gp(this.options.renderer||"geras",this.getTheme(),(n=this.options.rendererOverrides)!=null?n:void 0),this.cachedParentSvgSize=new lt(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}getMarker(e){return this.markerManager.getMarker(e)}getCursor(){return this.markerManager.getCursor()}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=cf),this.themeManager_.setTheme(e)}refreshTheme(){if(this.svgGroup_){var e=this.options.parentWorkspace===null;this.renderer.refreshDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0)}this.updateBlockStyles(this.getAllBlocks(!1).filter(n=>!!n.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0),e=new(ce(de.THEME_CHANGE))(this.getTheme().name,this.id),z(e)}updateBlockStyles(e){for(let n=0,o;o=e[n];n++){const a=o.getStyleName();a&&o.setStyle(a)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let n=0,o=0,a=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(a=this.scale);do{const d=P(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(a=1),n+=d.x*a,o+=d.y*a,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new Ne(n,o)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new lt(e.width,e.height)}getOriginOffsetInPixels(){return U(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,n){return this.injectionDiv||(this.injectionDiv=n??null),this.svgGroup_=N(ue.G,{class:"blocklyWorkspace",id:this.id}),n&&fr(this.svgGroup_,ir.LABEL,r.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),e&&(this.svgBackground_=N(ue.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="var(--blocklyGridPattern)":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new lw(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(A(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),A(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(g(Le.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=g(Le.CURSOR,this.options))&&this.markerManager.setCursor(new e(this)),e=this.options.parentWorkspace===null,this.renderer.createDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0),r.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!!this.injectionDiv||this.isFlyout),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&Ce(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&Ce(e.parentNode)}this.resizeHandlerWrapper&&(y(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null),r.getFocusManager$$module$build$src$core$focus_manager().isRegistered(this)&&r.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}addTrashcan(){this.trashcan=rn.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new xR(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}copyOptionsForFlyout(){return new Zs({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,plugins:this.options.plugins,modalInputs:this.options.modalInputs,move:{scrollbars:!0}})}addFlyout(e){const n=this.copyOptionsForFlyout();return n.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(g(Le.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(g(Le.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox?this.toolbox.position():this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(Ht.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),o=[];for(let a=0,d;d=e[a];a++){d.position(n,o);const p=d.getBoundingRectangle();p&&o.push(p)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=Y();Ne.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,n){const o=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,o.setAttribute("data-cached-width",`${e}`)),n!=null&&(this.cachedParentSvgSize.height=n,o.setAttribute("data-cached-height",`${n}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(he()){var e=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(e===this.oldScale&&Math.abs(n-this.oldTop)<1&&Math.abs(o-this.oldLeft)<1)){var a=new(ce(de.VIEWPORT_CHANGE))(n,o,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=n,this.oldLeft=o,z(a)}}}translate(e,n){let o;(o=this.layerManager)==null||o.translateLayers(new Ne(e,n),this.scale);let a;(a=this.grid)==null||a.moveTo(e,n),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let n=e.length-1;n>=0;n--)e[n].queueRender();this.getTopBlocks().flatMap(n=>n.getDescendants(!1)).filter(n=>n.isInsertionMarker()).forEach(n=>n.queueRender())}highlightBlock(e,n){if(n===void 0){for(let o=0,a;a=this.highlightedBlocks[o];o++)a.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((n=n===void 0||n)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):Ae(this.highlightedBlocks,e),e.setHighlighted(n))}variableChangeCallback(e){switch(e.type){case de.VAR_CREATE:case de.VAR_DELETE:case de.VAR_RENAME:case de.VAR_TYPE_CHANGE:this.refreshToolboxSelection()}}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}recordDragTargets(){const e=this.componentManager.getComponents(Ht.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let n=0,o;o=e[n];n++){const a=o.getClientRect();a&&this.dragTargetAreas.push({component:o,clientRect:a})}}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let n=0,o;o=this.dragTargetAreas[n];n++)if(o.clientRect.contains(e.clientX,e.clientY))return o.component;return null}onMouseDown(e){const n=this.getGesture(e);n&&n.handleWsStart(e,this)}startDrag(e,n){dd(this,e,n)}moveDrag(e){return fd(this,e)}setKeyboardMoveInProgress(e){this.keyboardMoveInProgress=e}isDragging(){return this.keyboardMoveInProgress||this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(mf.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var a=F(e);if(Ag)var d=e.metaKey;n&&(e.ctrlKey||d||!o)?(a=-a.y/50,n=k(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,a)):(n=this.scrollX-a.x,o=this.scrollY-a.y,e.shiftKey&&!a.x&&(n=this.scrollX-a.y,o=this.scrollY),this.scroll(n,o)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new it(0,0,0,0);const n=e[0].getBoundingRectangle();for(let a=1;a<e.length;a++){var o=e[a];o.isInsertionMarker&&o.isInsertionMarker()||(o=o.getBoundingRectangle(),o.top<n.top&&(n.top=o.top),o.bottom>n.bottom&&(n.bottom=o.bottom),o.left<n.left&&(n.left=o.left),o.right>n.right&&(n.right=o.right))}return n}cleanUp(){this.setResizesEnabled(!1);const e=r.getGroup$$module$build$src$core$events$utils();e||r.setGroup$$module$build$src$core$events$utils(!0);var n=this.getTopBlocks(!0),o=n.filter(C=>C.isMovable());const a=n.filter(C=>!C.isMovable()).map(C=>C.getBoundingRectangle());n=function(C){for(const X of a)if(C.intersects(X))return X;return null};var d=0;const p=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const C of o){for(o=C.getBoundingRectangle(),C.moveBy(-o.left,d-o.top,["cleanup"]),C.snapToGrid(),o=C.getBoundingRectangle(),d=n(o);d!=null;)d=d.top+d.getHeight()+p,C.moveBy(0,d-o.top,["cleanup"]),C.snapToGrid(),o=C.getBoundingRectangle(),d=n(o);d=C.getRelativeToSurfaceXY().y+C.getHeightWidth().height+p}r.setGroup$$module$build$src$core$events$utils(e),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.isReadOnly()&&!this.isFlyout){var n=ht.registry.getContextMenuOptions({workspace:this,focusedNode:this},e);this.configureContextMenu&&this.configureContextMenu(n,e);var o=e instanceof PointerEvent?new Ne(e.clientX,e.clientY):Se(this,new Ne(5,5));ia(e,n,this.RTL,this,o)}}updateToolbox(e){if(e=De(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Ue(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(D(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,n,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);const a=this.scale*o;if(this.scale!==a){a>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:a<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var d=this.getCanvas().getCTM(),p=this.getParentSvg().createSVGPoint();p.x=e,p.y=n,p=p.matrixTransform(d.inverse()),e=p.x,n=p.y,d=d.translate(e*(1-o),n*(1-o)).scale(o),this.scrollX=d.e,this.scrollY=d.f,this.setScale(a)}}zoomCenter(e){var n=this.getMetrics();let o;this.flyout?(o=n.svgWidth?n.svgWidth/2:0,n=n.svgHeight?n.svgHeight/2:0):(o=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop),this.zoom(o,n,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var o=this.getBlocksBoundingBox(),a=uw*2,d=o.right-o.left+a;if(o=o.bottom-o.top+a,d){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),o+=this.flyout.getHeight()/this.scale):(n+=this.flyout.getWidth(),d+=this.flyout.getWidth()/this.scale)),n/=d,e/=o,r.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{r.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){fe(this.getCanvas(),"blocklyCanvasTransitioning"),fe(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){Me(this.getCanvas(),"blocklyCanvasTransitioning"),Me(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),n=(e.scrollWidth-e.viewWidth)/2,o=(e.scrollHeight-e.viewHeight)/2;n=-n-e.scrollLeft,o=-o-e.scrollTop,this.scroll(n,o)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,n){if(this.isMovable()){var o=e?this.getBlockById(e):null;if(o){e=o.getRelativeToSurfaceXY(),o=n?{height:o.height,width:o.width}:o.getHeightWidth();var a=this.scale;n=(e.x+(this.RTL?-1:1)*o.width/2)*a,e=(e.y+o.height/2)*a,o=this.getMetrics(),this.scroll(-(n-o.viewWidth/2),-(e-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.scale}getAbsoluteScale(){const e=o=>{if(o.isFlyout){let a;const d=(a=o.targetWorkspace)==null?void 0:a.getFlyout();if(d instanceof gf)return d.getFlyoutScale()}return o.getScale()},n=(o,a)=>o.options.parentWorkspace&&o.options.parentWorkspace.getSvgGroup().contains(o.getSvgGroup())?n(o.options.parentWorkspace,a*e(o)):a*e(o);return n(this,1)}scroll(e,n){this.hideChaff(!0);const o=this.getMetrics();e=Math.min(e,-o.scrollLeft),n=Math.min(n,-o.scrollTop);const a=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);e=Math.max(e,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-a),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+o.scrollLeft),-(n+o.scrollTop),!1),e+=o.absoluteLeft,n+=o.absoluteTop,this.translate(e,n)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getTopComments(e=!1){return super.getTopComments(e)}getCommentById(e){return super.getCommentById(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){Ae(this.topBoundedElements,e)}getTopBoundedElements(e=!1){const n=[].concat(this.topBoundedElements);return e&&n.sort(this.sortByOrigin.bind(this)),n}setResizesEnabled(e){const n=!this.resizesEnabled&&e;this.resizesEnabled=e,n&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,n){if(typeof n!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,n)}getButtonCallback(e){let n;return(n=this.flyoutButtonCallbacks.get(e))!=null?n:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,n){if(typeof n!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,n)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){if(this.keyboardMoveInProgress)return e.preventDefault(),e.stopPropagation(),null;const n=e.type==="pointerdown";let o;return n&&((o=this.currentGesture_)!=null&&o.hasStarted())&&(console.warn("Tried to start the same gesture twice."),this.currentGesture_.cancel()),!this.currentGesture_&&n&&(this.currentGesture_=new mf(e,this)),this.currentGesture_}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){Ii(),Dc(this),zs(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(Ht.Capability.AUTOHIDEABLE,!0).forEach(n=>n.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const n=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*e.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)}addClass(e){this.injectionDiv&&fe(this.injectionDiv,e)}removeClass(e){this.injectionDiv&&Me(this.injectionDiv,e)}setIsReadOnly(e){super.setIsReadOnly(e),e?this.addClass("blocklyReadOnly"):this.removeClass("blocklyReadOnly")}scrollBoundsIntoView(e,n=10){if(!mf.inProgress()){var o=this.getScale(),a=this.getMetricsManager().getViewMetrics(!0);if(a=new it(a.top,a.top+a.height,a.left,a.left+a.width),!(e.left>=a.left&&e.top>=a.top&&e.right<=a.right&&e.bottom<=a.bottom)){e=e.clone(),e.top-=n,e.bottom+=n,e.left-=n,e.right+=n;var d=n=0;e.left<a.left?n=this.RTL?Math.min(a.left-e.left,a.right-e.right):a.left-e.left:e.right>a.right&&(n=this.RTL?a.right-e.right:Math.max(a.right-e.right,a.left-e.left)),e.top<a.top?d=a.top-e.top:e.bottom>a.bottom&&(d=Math.max(a.bottom-e.bottom,a.top-e.top)),this.scroll(this.scrollX+n*o,this.scrollY+d*o)}}}getFocusableElement(){return this.svgGroup_}getFocusableTree(){return this.isMutator&&this.options.parentWorkspace||this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(e)return null;let n;if(e=(n=this.targetWorkspace)==null?void 0:n.getFlyout(),this.isFlyout&&e){let a,d;return(d=(a=e.getContents().find(p=>(p=p.getElement(),dr(p)&&p.canBeFocused())))==null?void 0:a.getElement())!=null?d:null}let o;return(o=this.getTopBlocks(!0)[0])!=null?o:null}getNestedTrees(){const e=this.getAllBlocks().map(o=>o.getIcons()).flat().filter(o=>o instanceof r.MutatorIcon$$module$build$src$core$icons$mutator_icon&&o.bubbleIsVisible()).map(o=>{let a;return(a=o.getBubble())==null?void 0:a.getWorkspace()}).filter(o=>!!o),n=this.getFlyout(!0);return n&&e.push(n.getWorkspace()),e}searchForWorkspaceComment(e){for(const n of this.getTopComments())if(n instanceof xi&&n.canBeFocused()&&n.getFocusableElement().id===e)return n}lookUpFocusableNode(e){var n;const o=(n=this.targetWorkspace)==null?void 0:n.getFlyout();if(this.isFlyout&&o){for(var a of o.getContents())if(n=a.getElement(),dr(n)&&n.canBeFocused()&&n.getFocusableElement().id===e)return n}if(a=e.indexOf("_field_"),n=e.indexOf("_connection_"),a!==-1){var d=e.substring(0,a);if(d=this.getBlockById(d)){for(var p of d.getFields())if(p.canBeFocused()&&p.getFocusableElement().id===e)return p}return null}if(n!==-1){if(d=e.substring(0,n),d=this.getBlockById(d)){for(const X of d.getConnections_(!0))if(X.id===e)return X}return null}if(p=Math.max(e.indexOf(oE),e.indexOf(pL),e.indexOf(EL)),p!==-1&&(p=e.substring(0,p),p=this.searchForWorkspaceComment(p))){if(e.indexOf(oE)>-1)return p.getEditorFocusableNode();var C;return(C=p.view.getCommentBarButtons().find(X=>X.getFocusableElement().id.includes(e)))!=null?C:null}if((C=this.getAllBlocks(!1).find(X=>X.getFocusableElement().id===e))||(C=this.searchForWorkspaceComment(e)))return C;C=this.getAllBlocks().map(X=>X.getIcons()).flat();for(d of C){if(d.canBeFocused()&&d.getFocusableElement().id===e)return d;if(Yo(d)){if((C=d.getBubble())&&C.canBeFocused()&&C.getFocusableElement().id===e)return C;if(C instanceof df&&C.getEditor().getFocusableElement().id===e)return C.getEditor()}}return null}onTreeFocus(e,n){}onTreeBlur(e){if(this.isFlyout&&this.targetWorkspace&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()){var n=this.targetWorkspace.getToolbox();n&&e===n||AS(n)&&n.autoHide(!1)}}getNavigator(){return this.navigator}setNavigator(e){this.navigator=e}},xa=class extends da{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.getWorkspace().id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new xa),n.varId=e.varId,n}},bE=class extends xa{constructor(e){super(e),this.type=de.VAR_CREATE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new bE),n.varType=e.varType,n.varName=e.varName,n}run(e){var n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");n=n.getVariableMap(),e?n.createVariable(this.varName,this.varType,this.varId):(e=n.getVariableById(this.varId))&&n.deleteVariable(e)}};i(Le.EVENT,de.VAR_CREATE,bE);var tA=class{constructor(e,n,o,a){this.workspace=e,this.name=n,this.type=o||"",this.id=a||re()}getId(){return this.id}getName(){return this.name}setName(e){return this.name=e,this}getType(){return this.type}setType(e){return this.type=e,this}getWorkspace(){return this.workspace}save(){const e={name:this.getName(),id:this.getId()},n=this.getType();return n&&(e.type=n),e}static load(e,n){e=new this(n,e.name,e.type,e.id),n.getVariableMap().addVariable(e),z(new(ce(de.VAR_CREATE))(e))}};i(Le.VARIABLE_MODEL,Pn,tA);var yE=class extends xa{constructor(e){super(e),this.type=de.VAR_DELETE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new yE),n.varType=e.varType,n.varName=e.varName,n}run(e){var n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");n=n.getVariableMap(),e?(e=n.getVariableById(this.varId))&&n.deleteVariable(e):n.createVariable(this.varName,this.varType,this.varId)}};i(Le.EVENT,de.VAR_DELETE,yE);var kE=class extends xa{constructor(e,n){super(e),this.type=de.VAR_RENAME,e&&(this.oldName=e.getName(),this.newName=typeof n>"u"?"":n)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new kE),n.oldName=e.oldName,n.newName=e.newName,n}run(e){var n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");n=n.getVariableMap();const o=n.getVariableById(this.varId);e?o&&n.renameVariable(o,this.newName):o&&n.renameVariable(o,this.oldName)}};i(Le.EVENT,de.VAR_RENAME,kE);var rA=class{constructor(e,n=!1){this.workspace=e,this.potentialMap=n,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(const n of e.values())this.deleteVariable(n);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,n){if(e.getName()===n)return e;var o=e.getType();o=this.getVariable(n,o);const a=this.workspace.getAllBlocks(!1);let d="";this.potentialMap||(d=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0);try{o&&o.getId()!==e.getId()?this.renameVariableWithConflict(e,n,o,a):this.renameVariableAndUses(e,n,a)}finally{this.potentialMap||r.setGroup$$module$build$src$core$events$utils(d)}return e}changeVariableType(e,n){const o=e.getType();if(o===n)return e;var a=this.variableMap.get(o);a?.delete(e.getId()),a?.size===0&&this.variableMap.delete(o),e.setType(n);let d;return a=(d=this.variableMap.get(n))!=null?d:new Map,a.set(e.getId(),e),this.variableMap.has(n)||this.variableMap.set(n,a),z(new(ce(de.VAR_TYPE_CHANGE))(e,o,n)),e}renameVariableById(e,n){br("VariableMap.renameVariableById","v12","v13","VariableMap.renameVariable");const o=this.getVariableById(e);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(o,n)}renameVariableAndUses(e,n,o){for(this.potentialMap||z(new(ce(de.VAR_RENAME))(e,n)),e.setName(n),n=0;n<o.length;n++)o[n].updateVarName(e)}renameVariableWithConflict(e,n,o,a){const d=e.getType(),p=o.getName();for(n!==p&&this.renameVariableAndUses(o,n,a),n=0;n<a.length;n++)a[n].renameVarById(e.getId(),o.getId());this.potentialMap||z(new(ce(de.VAR_DELETE))(e));let C;(C=this.variableMap.get(d))==null||C.delete(e.getId())}createVariable(e,n,o){var a=this.getVariable(e,n);if(a){if(o&&a.getId()!==o)throw Error('Variable "'+e+'" is already in use and its id is "'+a.getId()+'" which conflicts with the passed in id, "'+o+'".');return a}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');if(a=o||re(),n=n||"",o=g(Le.VARIABLE_MODEL,this.workspace.options,!0),!o)throw Error("No variable model is registered.");a=new o(this.workspace,e,n,a);let d;return e=(d=this.variableMap.get(n))!=null?d:new Map,e.set(a.getId(),a),this.variableMap.has(n)||this.variableMap.set(n,e),this.potentialMap||z(new(ce(de.VAR_CREATE))(a)),a}addVariable(e){const n=e.getType();this.variableMap.has(n)||this.variableMap.set(n,new Map);let o;(o=this.variableMap.get(n))==null||o.set(e.getId(),e)}deleteVariable(e){const n=Zl(this.workspace,e.getId());let o="";this.potentialMap||(o=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0);try{for(let d=0;d<n.length;d++)n[d].dispose(!0);const a=this.variableMap.get(e.getType());a&&a.has(e.getId())&&(a.delete(e.getId()),this.potentialMap||z(new(ce(de.VAR_DELETE))(e)),a.size===0&&this.variableMap.delete(e.getType()))}finally{this.potentialMap||r.setGroup$$module$build$src$core$events$utils(o)}}deleteVariableById(e){br("VariableMap.deleteVariableById","v12","v13","Blockly.Variables.deleteVariable"),(e=this.getVariableById(e))&&r.deleteVariable$$module$build$src$core$variables(this.workspace,e)}getVariable(e,n){if(n=this.variableMap.get(n||""),!n)return null;let o;return(o=[...n.values()].find(a=>r.Names$$module$build$src$core$names.equals(a.getName(),e)))!=null?o:null}getVariableById(e){for(const n of this.variableMap.values())if(n.has(e)){let o;return(o=n.get(e))!=null?o:null}return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?[...e.values()]:[]}getTypes(){return[...this.variableMap.keys()]}getAllVariables(){let e=[];for(const n of this.variableMap.values())e=e.concat(...n.values());return e}getAllVariableNames(){br("VariableMap.getAllVariableNames","v12","v13","Blockly.Variables.getAllVariables");const e=[];for(const n of this.variableMap.values())for(const o of n.values())e.push(o.getName());return e}getVariableUsesById(e){return br("VariableMap.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),Zl(this.workspace,e)}};i(Le.VARIABLE_MAP,Pn,rA);var wE=class extends qs{constructor(e,n){super(n),this.type=de.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new wE),n.isOpen=e.isOpen,n}};i(Le.EVENT,de.TRASHCAN_OPEN,wE);var nA=class extends Tf{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,this.workspace.options.maxTrashcanContents<=0||(e=this.workspace.copyOptionsForFlyout(),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===at.TOP?at.BOTTOM:at.TOP,this.flyout=new(g(Le.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===at.RIGHT?at.LEFT:at.RIGHT,this.flyout=new(g(Le.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=N(ue.G,{class:"blocklyTrash"});let e;const n=String(Math.random()).substring(2);e=N(ue.CLIPPATH,{id:"blocklyTrashBodyClipPath"+n},this.svgGroup),N(ue.RECT,{width:Na,height:vf,y:ba},e);const o=N(ue.IMAGE,{width:pn.width,x:-ME,height:pn.height,y:-DE,"clip-path":"url(#blocklyTrashBodyClipPath"+n+")"},this.svgGroup);return o.setAttributeNS(Fn,"xlink:href",this.workspace.options.pathToMedia+pn.url),e=N(ue.CLIPPATH,{id:"blocklyTrashLidClipPath"+n},this.svgGroup),N(ue.RECT,{width:Na,height:ba},e),this.svgLid=N(ue.IMAGE,{width:pn.width,x:-ME,height:pn.height,y:-DE,"clip-path":"url(#blocklyTrashLidClipPath"+n+")"},this.svgGroup),this.svgLid.setAttributeNS(Fn,"xlink:href",this.workspace.options.pathToMedia+pn.url),m(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),m(this.svgGroup,"pointerup",this,this.click),m(o,"pointerover",this,this.mouseOver),m(o,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){if(this.workspace.options.maxTrashcanContents>0){const e=this.flyout.createDom(ue.SVG);fe(e,"blocklyTrashcanFlyout"),ut(e,this.workspace.getParentSvg()),this.flyout.init(this.workspace)}this.workspace.getComponentManager().addComponent({component:this,weight:Ht.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[Ht.Capability.AUTOHIDEABLE,Ht.Capability.DELETE_AREA,Ht.Capability.DRAG_TARGET,Ht.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&Ce(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(o){return JSON.parse(o)}),n=this.workspace.getParentSvg().style;n.cursor="wait",setTimeout(()=>{let o;(o=this.flyout)==null||o.show(e),n.cursor="";let a;(a=this.workspace.scrollbar)==null||a.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var n;(n=this.workspace.scrollbar)==null||n.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,n){if(this.initialized){var o=Ws(this.workspace,e);e=Vs(o,new lt(Na,vf+ba),hw,sA,e,this.workspace),n=rs(e,sA,o.vertical===vi.TOP?oo.DOWN:oo.UP,n),this.top=n.top,this.left=n.left;var a;(a=this.svgGroup)==null||a.setAttribute("transform","translate("+this.left+","+this.top+")");var d;(d=this.flyout)==null||d.position()}}getBoundingRectangle(){return new it(this.top,this.top+vf+ba,this.left,this.left+Na)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const n=e.top+DE-Cf;return e=e.left+ME-Cf,new it(n,n+ba+vf+2*Cf,e,e+Na+2*Cf)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=_w;var n=1/(e+1);this.lidOpen+=this.isLidOpen?n:-n,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*oA),n=iA+this.lidOpen*(Tw-iA),this.svgGroup&&(this.svgGroup.style.opacity=`${n}`),this.lidOpen>this.minOpenness&&this.lidOpen<1&&(this.lidTask=setTimeout(this.animateLid.bind(this),fw/e))}setLidAngle(e){const n=this.workspace.toolboxPosition===at.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let o;(o=this.svgLid)==null||o.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:Na-4)+","+(ba-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*oA)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(ce(de.TRASHCAN_OPEN))(e,this.workspace.id),z(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(this.workspace.options.maxTrashcanContents<=0||!ee(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(dw)}}}cleanBlockJson(e){function n(o){if(o){if(delete o.id,delete o.x,delete o.y,delete o.enabled,delete o.disabledReasons,o.icons&&o.icons.comment){var a=o.icons.comment;delete a.height,delete a.width,delete a.pinned}a=o.inputs;for(var d in a){var p=a[d];const C=p.block;p=p.shadow,C&&n(C),p&&n(p)}o.next&&(d=o.next,o=d.block,d=d.shadow,o&&n(o),d&&n(d))}}return e=JSON.parse(JSON.stringify(e)),n(e),Object.assign({},{kind:"BLOCK"},e)}},Na=47,vf=44,ba=16,sA=20,hw=20,Cf=10,ME=0,DE=32,dw=.1,fw=80,_w=4,iA=.4,Tw=.8,oA=45,Tu=null,pu=null,xf=void 0,As={};As.BlockPaster=uu,As.copy=vd,As.getLastCopiedData=Cd,As.getLastCopiedLocation=Xp,As.getLastCopiedWorkspace=xd,As.paste=ro,As.registry=Bg,As.setLastCopiedData=MS,As.setLastCopiedLocation=PS,As.setLastCopiedWorkspace=DS;var ho={};ho.CollapseCommentBarButton=gL,ho.CommentBarButton=sf,ho.CommentEditor=of,ho.CommentView=ou,ho.DeleteCommentBarButton=mL,ho.RenderedWorkspaceComment=xi,ho.WorkspaceComment=lf;var ri;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(ri||(ri={})),tg();var ni={};ni.names=ri,ni.registerCopy=Jp,ni.registerCut=qp,ni.registerDefaultShortcuts=tg,ni.registerDelete=Yp,ni.registerEscape=zp,ni.registerPaste=Zp,ni.registerRedo=eg,ni.registerUndo=Qp;var pw=class{constructor(e,n){this.procedureModelClass=e,this.parameterModelClass=n,this.priority=bR}save(e){return e=e.getProcedureMap().getProcedures().map(n=>rg(n)),e.length?e:null}load(e,n){const o=n.getProcedureMap();for(const a of e)o.add(ng(this.procedureModelClass,this.parameterModelClass,a,n))}clear(e){e.getProcedureMap().clear()}},Nf={};Nf.ProcedureSerializer=pw,Nf.loadProcedure=ng,Nf.saveProcedure=rg;var lA=class{constructor(){this.priority=NR}save(e){return e=e.getAllVariables().map(n=>n.save()),e.length?e:null}load(e,n){const o=_(Le.VARIABLE_MODEL,Pn);e.forEach(a=>{o?.load(a,n)})}clear(e){e.getVariableMap().clear()}};$i("variables",new lA);var aA={};aA.VariableSerializer=lA;var PE={};PE.load=BS,PE.save=FS;var gw={blocks:tu,exceptions:il,priorities:Xk,procedures:Nf,registry:Fg,variables:aA,workspaceComments:Ud,workspaces:PE};"Blockly"in globalThis||(globalThis.Blockly={Msg:PR});var FE="label",cA=class{load(e,n){return e=new gn(n.getWorkspace(),n.targetWorkspace,e,!0),e.show(),new Aa(e,FE)}gapForItem(e,n){return n}disposeItem(e){e=e.getElement(),e instanceof gn&&e.dispose()}getType(){return FE}};i(Le.FLYOUT_INFLATER,FE,cA);var uA=class extends Sf{constructor(e){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,e&&(this.GRID_UNIT=e),this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+this.FIELD_BORDER_RECT_Y_PADDING*2}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&Ce(this.selectedGlowFilter),this.replacementGlowFilter&&Ce(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH,o=vn("c",[Je(25,-e),Je(71,-e),Je(n,0)]);return{height:e*.75,width:n,path:o}}makeHexagonal(){function e(o,a,d){var p=o/2;return p=p>n?n:p,d=d?-1:1,o=(a?-1:1)*o/2,Js(-d*p,o)+Js(d*p,o)}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(o){return o/=2,o>n?n:o},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}makeRounded(){function e(a,d,p){const C=a>o?a-o:0;a=(a>o?o:a)/2;const X=p===d?"0":"1";return nr("a","0 0,"+X,a,Je((p?1:-1)*a,(d?-1:1)*a))+qe("v",(d?-1:1)*C)+nr("a","0 0,"+X,a,Je((p?-1:1)*a,(d?-1:1)*a))}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=n*2;return{type:this.SHAPES.ROUND,isDynamic:!0,width(a){return a/=2,a>n?n:a},height(a){return a},connectionOffsetY(a){return a/2},connectionOffsetX(a){return-a},pathDown(a){return e(a,!1,!1)},pathUp(a){return e(a,!0,!1)},pathRightDown(a){return e(a,!1,!0)},pathRightUp(a){return e(a,!1,!0)}}}makeSquared(){function e(o,a,d){o-=n*2;const p=d===a?"0":"1";return nr("a","0 0,"+p,n,Je((d?1:-1)*n,(a?-1:1)*n))+qe("v",(a?-1:1)*o)+nr("a","0 0,"+p,n,Je((d?-1:1)*n,(a?-1:1)*n))}const n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(o){return n},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}shapeFor(e){let n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case ze.INPUT_VALUE:case ze.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&n.includes("Boolean")?this.HEXAGONAL:n&&n.includes("Number")?this.ROUNDED:(n&&n.includes("String"),this.ROUNDED);case ze.PREVIOUS_STATEMENT:case ze.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(Ke){return vn("c",[Je(Ke*d/2,0),Je(Ke*d*3/4,C/2),Je(Ke*d,C)])+la([Je(Ke*d,p)])+vn("c",[Je(Ke*d/4,C/2),Je(Ke*d/2,C),Je(Ke*d,C)])+qe("h",Ke*a)+vn("c",[Je(Ke*d/2,0),Je(Ke*d*3/4,-(C/2)),Je(Ke*d,-C)])+la([Je(Ke*d,-p)])+vn("c",[Je(Ke*d/4,-(C/2)),Je(Ke*d/2,-C),Je(Ke*d,-C)])}const n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,a=n/3,d=a/3,p=o/2,C=p/2,X=e(1),Ie=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:X,pathRight:Ie}}makeInsideCorners(){const e=this.CORNER_RADIUS,n=nr("a","0 0,0",e,Je(-e,e)),o=nr("a","0 0,1",e,Je(-e,e)),a=nr("a","0 0,0",e,Je(e,e)),d=nr("a","0 0,1",e,Je(e,e));return{width:e,height:e,pathTop:n,pathBottom:a,rightWidth:e,rightHeight:e,pathTopRight:o,pathBottomRight:d}}generateSecondaryColour_(e){return Jo("#000",e,.15)||e}generateTertiaryColour_(e){return Jo("#000",e,.25)||e}createDom(e,n,o,a){super.createDom(e,n,o,a),e=N(ue.DEFS,{},e),n=N(ue.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),N(ue.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=N(ue.FECOMPONENTTRANSFER,{result:"outBlur"},n),N(ue.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),N(ue.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),N(ue.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter=n,e=N(ue.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),N(ue.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=N(ue.FECOMPONENTTRANSFER,{result:"outBlur"},e),N(ue.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),N(ue.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),N(ue.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),N(ue.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e,a&&(a.style.setProperty("--blocklySelectedGlowFilter",`url(#${this.selectedGlowFilterId})`),a.style.setProperty("--blocklyReplacementGlowFilter",`url(#${this.replacementGlowFilterId})`))}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableField>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text,`,`${e} .blocklyNonEditableField>g>text,`,`${e} .blocklyEditableField>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .blocklyMenuItem,`,`${e}.blocklyDropDownDiv .blocklyMenuItem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .blocklyMenuItemContent {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabledPattern > .blocklyOutlinePath {`,"fill: var(--blocklyDisabledPattern)","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}",`${e} .blocklySelected>.blocklyPath.blocklyPathSelected {`,"fill: none;","filter: var(--blocklySelectedGlowFilter);","}",`${e} .blocklyReplaceable>.blocklyPath {`,"filter: var(--blocklyReplacementGlowFilter);","}"]}},hA=class extends Rf{constructor(e,n){super(e,n)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(e.height<=0)){if(se.isSpacer(e)){const a=e.precedesStatement;var n=e.followsStatement;if(a||n){const d=this.constants_.INSIDE_CORNERS;var o=d.rightHeight;o=e.height-(a?o:0),n=n?d.pathBottomRight:"",e=o>0?qe("V",e.yPos+o):"",this.outlinePath_+=n+e+(a?d.pathTopRight:"");return}}this.outlinePath_+=qe("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Jt(e.xPos,this.info_.startY),this.outlinePath_+=qe("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=qe("V",e.baseline),this.outlinePath_+=qe("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const n=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=yr(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(n,e))}getInlineInputPath(e){const n=e.width-e.connectionWidth*2,o=e.height;return qe("h",n)+e.shape.pathRightDown(o)+qe("h",-n)+e.shape.pathUp(o)+"z"}drawStatementInput_(e){var n=e.getLastInput();const o=n.xPos+n.notchOffset+n.shape.width,a=this.constants_.INSIDE_CORNERS,d=n.shape.pathRight+qe("h",-(n.notchOffset-a.width))+a.pathTop,p=e.height-2*a.height;n=a.pathBottom+qe("h",n.notchOffset-a.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=qe("H",o)+d+qe("v",p)+n+qe("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const n=e.connectionModel;if(n.type===ze.NEXT_STATEMENT||n.type===ze.PREVIOUS_STATEMENT||n.type===ze.OUTPUT_VALUE&&!e.isDynamicShape)return super.drawConnectionHighlightPath(e);e=n.type===ze.INPUT_VALUE?yr(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):yr(e.width,-e.height/2)+e.shape.pathDown(e.height);const o=n.getSourceBlock();let a,d;return(d=(a=o.pathObject).addConnectionHighlight)==null?void 0:d.call(a,n,e,n.getOffsetInBlock(),o.RTL)}},pl=class extends Lt{constructor(e,n,o,a,d,p,C){if(super(Lt.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",o=Number(rr(o)),n=Number(rr(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(o<=0||n<=0)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new lt(n,o+pl.Y_PADDING),this.imageHeight=o,typeof d=="function"&&(this.clickHandler=d),e!==Lt.SKIP_SETUP&&(C?this.configure_(C):(this.flipRtl=!!p,this.altText=rr(a)||""),this.setValue(rr(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=rr(e.alt))}initView(){this.imageElement=N(ue.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(Fn,"xlink:href",this.value_),this.fieldGroup_&&fe(this.fieldGroup_,"blocklyImageField"),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(Fn,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}isClickable(){return super.isClickable()&&!!this.clickHandler}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};pl.Y_PADDING=1,Ks("field_image",pl),pl.prototype.DEFAULT_VALUE="";var bf=14,ya=class extends Lt{set size_(e){super.size_=e}get size_(){const e=super.size_;return e.width<bf&&(e.width=bf),e}constructor(e,n,o){super(Lt.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,e!==Lt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new lr;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()),this.fieldGroup_&&fe(this.fieldGroup_,"blocklyInputField")}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new lr;let n;return this.fullBlockClickTarget_=!((n=this.getConstants())==null||!n.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,n=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&he()&&this.value_!==e&&n&&z(new(ce(de.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new lr;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.getColourTertiary())):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(Me(e,"blocklyInvalidInput"),fr(e,ir.INVALID,!1)):(fe(e,"blocklyInvalidInput"),fr(e,ir.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new lr;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,n=!1,o=!0){this.workspace_=this.sourceBlock_.workspace,!n&&this.workspace_.options.modalInputs&&(uR||Lg||Pd)?this.showPromptEditor():this.showInlineEditor(n,o)}showPromptEditor(){Kh(r.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e,n){const o=this.getSourceBlock();if(!o)throw new lr;hd(this,o.RTL,this.widgetDispose_.bind(this),this.workspace_,n),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new lr;r.setGroup$$module$build$src$core$events$utils(!0);const n=na();var o=this.getClickTarget_();if(!o)throw Error("A click target has not been set.");fe(o,"blocklyEditing"),o=document.createElement("input"),o.className="blocklyHtmlInput",o.setAttribute("spellcheck",this.spellcheck_);const a=this.workspace_.getAbsoluteScale();var d=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";return n.style.fontSize=d,o.style.fontSize=d,d=ya.BORDERRADIUS*a+"px",this.isFullBlockField()&&(d=this.getScaledBBox(),d=(d.bottom-d.top)/2+"px",e=e.getParent()?e.getParent().getColourTertiary():this.sourceBlock_.getColourTertiary(),o.style.border=1*a+"px solid "+e,n.style.borderRadius=d,n.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(n.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*a+"px")),o.style.borderRadius=d,n.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(o),o}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&he()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(z(new(ce(de.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),r.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=na().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");Me(e,"blocklyEditing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=A(e,"keydown",this,this.onHtmlInputKeyDown_),this.onInputWrapper=A(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(y(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onInputWrapper&&(y(this.onInputWrapper),this.onInputWrapper=null)}onHtmlInputKeyDown_(e){if(e.key==="Enter")qo(this),zs();else if(e.key==="Escape")this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),qo(this),zs();else if(e.key==="Tab"){e.preventDefault();var n,o=(n=this.workspace_)==null?void 0:n.getCursor();n=a=>(a instanceof ya||a instanceof bt&&a.isSimpleReporter())&&a!==this.getSourceBlock(),e=e.shiftKey?o?.getPreviousNode(this,n,!1):o?.getNextNode(this,n,!1),e=e instanceof bt&&e.isSimpleReporter()?e.getFields().next().value:e,e instanceof ya&&(qo(this),zs(),o=e.getSourceBlock(),e.isFullBlockField()&&o&&o instanceof bt?r.getFocusManager$$module$build$src$core$focus_manager().focusNode(o):r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e),e.showEditor())}}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&he()&&this.value_!==e&&z(new(ce(de.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,n=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,n)}resizeEditor_(){js().then(()=>{const e=this.getSourceBlock();if(!e)throw new lr;const n=na(),o=this.getScaledBBox();n.style.width=o.right-o.left+"px",n.style.height=o.bottom-o.top+"px";const a=o.top;n.style.left=`${e.RTL?o.right-n.offsetWidth:o.left}px`,n.style.top=`${a}px`})}repositionForWindowResize(){let e;const n=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return n instanceof bt?(ca(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),n)||this.resizeEditor_(),!0):!1}positionTextElement_(e,n){const o=e*2+n;super.positionTextElement_(e+(o<bf?(bf-o)/2:0),n)}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};ya.BORDERRADIUS=4,r.FieldTextInput$$module$build$src$core$field_textinput=class extends ya{constructor(e,n,o){super(e,n,o)}initView(){super.initView(),this.fieldGroup_&&fe(this.fieldGroup_,"blocklyTextInputField")}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(rr(e.text),void 0,e)}},Ks("field_input",r.FieldTextInput$$module$build$src$core$field_textinput),r.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",r.FieldTextInput$$module$build$src$core$field_textinput;var dA=class extends SE{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},yf=class extends Of{constructor(e,n){if(super(e,n),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;n=e.getNextBlock();)e=n;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},fA=class extends ti{constructor(e){super(e),this.width=this.height=0,this.type|=se.getType("RIGHT_CONNECTION")}},_A=class extends xE{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const n=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||n}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},TA=class extends _u{constructor(e,n){super(e,n),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new _A(this.constants_),this.bottomRow=new dA(this.constants_),this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=n.statementInputCount>0,this.rightSide=this.outputConnection?new fA(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,n){return n?n instanceof yi||e instanceof Vn||n instanceof Vn?!0:e instanceof r.ValueInput$$module$build$src$core$inputs$value_input||e instanceof Qs||e instanceof yi?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&se.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&se.isLeftRoundedCorner(e)&&n&&(se.isPreviousConnection(n)||se.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&se.isLeftSquareCorner(e)&&n&&se.isHat(n)||e&&se.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,n){if(se.isTopRow(e)&&se.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const o=se.isInputRow(e)&&e.hasStatement,a=se.isInputRow(n)&&n.hasStatement;return a||o?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),a&&o?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):se.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):se.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,n){const o=this.width-this.startX;return se.isInputRow(e)&&e.hasStatement||se.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o}getElemCenterline_(e,n){if(e.hasStatement&&!se.isSpacer(n)&&!se.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(se.isInlineInput(n)){const o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return e.yPos+o.height/2}return super.getElemCenterline_(e,n)}addInput_(e,n){if((e instanceof Qs||e instanceof yi)&&n.hasDummyInput&&n.align===r.Align$$module$build$src$core$inputs$align.LEFT&&e.align===r.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(n,e);else if(e instanceof Vn){n.elements.push(new yf(this.constants_,e)),n.hasStatement=!0,n.align===null&&(n.align=e.align);return}super.addInput_(e,n)}addAlignmentPadding_(e,n){if(this.rightAlignedDummyInputs.get(e)){let o;for(let a=0;a<e.elements.length;a++){const d=e.elements[a];if(se.isSpacer(d)&&(o=d),se.isField(d)&&d.parentInput===this.rightAlignedDummyInputs.get(e))break}if(o){o.width+=n,e.width+=n;return}}super.addAlignmentPadding_(e,n)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let n=e;for(let d=2;d<this.rows.length-1;d+=2){var o=this.rows[d-1];const p=this.rows[d];var a=this.rows[d+1];if(o=d===2?!!this.topRow.hasPreviousConnection:!!o.followsStatement,a=d+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!a.precedesStatement,se.isInputRow(p)&&p.hasStatement){p.measure();let C,X;n=p.width-((X=(C=p.getLastInput())==null?void 0:C.width)!=null?X:0)+e}else if(o&&(d===2||a)&&se.isInputRow(p)&&!p.hasStatement){a=p.xPos,o=null;for(let C=0;C<p.elements.length;C++){const X=p.elements[C];se.isSpacer(X)&&(o=X),!(o&&(se.isField(X)||se.isInput(X))&&a<n)||se.isField(X)&&(X.field instanceof fl||X.field instanceof pl)||(o.width+=n-a),a+=X.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var n=0,o=0;o<this.rows.length;o++){const a=this.rows[o];a.yPos=n,n+=a.height}this.height=n,o=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,n=e.height(o),o=e.width(o),this.outputConnection.height=n,this.outputConnection.width=o,this.outputConnection.startX=o,this.outputConnection.connectionOffsetY=e.connectionOffsetY(n),this.outputConnection.connectionOffsetX=e.connectionOffsetX(o),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=o,this.rightSide.height=n,this.rightSide.width=e,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+e),this.startX=o,this.width+=o+e,this.widthWithChildren+=o+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,n=0;n<this.rows.length;n++){var o=this.rows[n];if(!se.isInputRow(o))continue;e=o.elements[o.elements.length-2];let a=this.getNegativeSpacing_(o.elements[1]),d=this.getNegativeSpacing_(e);e=a+d;const p=this.constants_.MIN_BLOCK_WIDTH+this.outputConnection.width*2;this.width-e<p&&(e=this.width-p,a=e/2,d=e/2),o.elements.unshift(new Wn(this.constants_,-a)),o.elements.push(new Wn(this.constants_,-d))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,n=0;n<this.rows.length;n++)o=this.rows[n],se.isTopOrBottomRow(o)&&(o.elements[1].width-=e),o.width-=e,o.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const n=this.outputConnection.width;var o=this.outputConnection.shape.type;const a=this.constants_;if(this.inputRows.length>1)switch(o){case a.SHAPES.ROUND:return o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=this.height/2>o?o:this.height/2,n-o*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)));default:return 0}if(se.isInlineInput(e)){const d=e.connectedBlock;return e=d?d.pathObject.outputShapeType:e.shape.type,e==null||d&&d.outputConnection&&(d.statementInputCount||d.nextConnection)||o===a.SHAPES.HEXAGONAL&&o!==e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][e]}return se.isField(e)?o===a.SHAPES.ROUND&&e.field instanceof r.FieldTextInput$$module$build$src$core$field_textinput?n-2.75*a.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:se.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let a=2;a<this.rows.length-1;a+=2){const d=this.rows[a-1],p=this.rows[a],C=this.rows[a+1];var e=a===2,n=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!C.precedesStatement;if(e?this.topRow.hasPreviousConnection:d.followsStatement){var o=p.elements[1];if(o=p.elements.length===3&&o instanceof LE&&(o.field instanceof fl||o.field instanceof pl),!e&&o)d.height-=this.constants_.SMALL_PADDING,C.height-=this.constants_.SMALL_PADDING,p.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!n)d.height+=this.constants_.SMALL_PADDING;else if(n){for(e=!1,n=0;n<p.elements.length;n++)if(o=p.elements[n],se.isInlineInput(o)&&o.connectedBlock&&!o.connectedBlock.isShadow()&&o.connectedBlock.getHeightWidth().height>=40){e=!0;break}e&&(d.height-=this.constants_.SMALL_PADDING,C.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},pA=class extends Lf{constructor(e,n,o){super(e,n,o),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=o}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const n=e.getParent();e.isShadow()&&n&&this.svgPath.setAttribute("stroke",n.getColourTertiary());for(const o of this.outlines.values())o.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.classList.add("blocklyPathSelected"),Me(this.svgPathSelected,Gr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),Me(this.svgPathSelected,Gr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME),this.svgPathSelected.removeAttribute("tabindex"),this.svgPathSelected.removeAttribute("id"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,n){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(n?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,n){e=this.getOutlinePath(e),e.setAttribute("d",n),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,N(ue.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let n,o;(n=this.outlines.get(e))==null||(o=n.parentNode)==null||o.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},BE=class extends Af{constructor(e){super(e)}makeConstants_(){return new uA}makeRenderInfo_(e){return new TA(this,e)}makeDrawer_(e,n){return new hA(e,n)}makePathObject(e,n){return new pA(e,n,this.getConstants())}getConstants(){return this.constants_}};Hc("zelos",BE);var gA=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,n,o){r.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=o,o.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(n)&&(n.highlight(),this.staticConn=n)}finally{r.enable$$module$build$src$core$events$utils()}}previewConnection(e,n){if(e!==this.draggedConn||n!==this.staticConn){r.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,n)&&(this.markerConn=this.previewMarker(e,n)),this.workspace.getRenderer().shouldHighlightConnection(n)&&n.highlight(),this.draggedConn=e,this.staticConn=n}finally{r.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,n){return n.type===ze.PREVIOUS_STATEMENT||n.type===ze.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof BE)}previewMarker(e,n){const o=e.getSourceBlock(),a=this.createInsertionMarker(o),d=this.getMatchingConnection(o,a,e);if(!d)return null;a.queueRender(),Zi(),d.connect(n);const p={x:n.x-d.x,y:n.y-d.y},C=d.getOffsetInBlock().clone();return js().then(()=>{if(!a.isDeadOrDying()){r.disable$$module$build$src$core$events$utils();try{a?.positionNearConnection(d,p,C),a?.getSvgRoot().setAttribute("visibility","visible")}finally{r.enable$$module$build$src$core$events$utils()}}}),d}serializeBlockToInsertionMarker(e){const n=ss(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!n)throw Error(`Failed to serialize source block. ${e.toDevString()}`);return n}createInsertionMarker(e){e=this.serializeBlockToInsertionMarker(e),e=Qi(e,this.workspace);for(const n of e.getDescendants(!1))n.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,n,o){if(e=e.getConnections_(!0),n=n.getConnections_(!0),e.length!==n.length)return null;for(let a=0;a<e.length;a++)if(e[a]===o)return n[a];return null}hidePreview(){r.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{r.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const n=e.getSourceBlock(),o=n.outputConnection;let a;if((a=n.previousConnection)!=null&&a.targetConnection||o!=null&&o.targetConnection)n.unplug(!0);else{let d;(d=e.targetBlock())==null||d.unplug(!1)}n.dispose()}dispose(){this.hidePreview()}};i(Le.CONNECTION_PREVIEWER,Pn,gA);var fo={};fo.Align=r.Align$$module$build$src$core$inputs$align,fo.DummyInput=Qs,fo.EndRowInput=yi,fo.Input=Ra,fo.StatementInput=Vn,fo.ValueInput=r.ValueInput$$module$build$src$core$inputs$value_input,fo.inputTypes=r.inputTypes$$module$build$src$core$inputs$input_types;var EA=!1,mA;r.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=I());var n=[];this.init(e),e=e.getTopBlocks(!0);for(let o=0,a;a=e[o];o++){let d=this.blockToCode(a);Array.isArray(d)&&(d=d[0]),d&&(a.outputConnection&&(d=this.scrubNakedValue(d),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(d=this.injectId(this.STATEMENT_PREFIX,a)+d),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(d+=this.injectId(this.STATEMENT_SUFFIX,a))),n.push(d))}return n=n.join(`
`),n=this.finish(n),n=n.replace(/^\s+\n/,""),n=n.replace(/\n\s+$/,`
`),n=n.replace(/[ \t]+\n/g,`
`)}prefixLines(e,n){return n+e.replace(/(?!\n$)\n/g,`
`+n)}allNestedComments(e){const n=[];e=e.getDescendants(!0);for(let o=0;o<e.length;o++){const a=e[o].getCommentText();a&&n.push(a)}return n.length&&n.push(""),n.join(`
`)}blockToCode(e,n){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return n?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return n?"":this.blockToCode(e.getChildren(!1)[0]);var o=this.forBlock[e.type];if(typeof o!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(o=o.call(e,e,this),Array.isArray(o)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,o[0],n),o[1]]}if(typeof o=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,e)+o),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,o,n);if(o===null)return"";throw SyntaxError("Invalid code generated: "+o)}valueToCode(e,n,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+e.type);var a=e.getInputTargetBlock(n);if(!a&&!e.getInput(n))throw ReferenceError(`Input "${n}" doesn't exist on "${e.type}"`);if(!a||(n=this.blockToCode(a),n===""))return"";if(!Array.isArray(n))throw TypeError(`Expecting tuple from value block: ${a.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+a.type);if(!e)return"";a=!1;var d=Math.floor(o);const p=Math.floor(n);if(d<=p&&(d!==p||d!==0&&d!==99)){for(a=!0,d=0;d<this.ORDER_OVERRIDES.length;d++)if(this.ORDER_OVERRIDES[d][0]===o&&this.ORDER_OVERRIDES[d][1]===n){a=!1;break}}return a&&(e="("+e+")"),e}statementToCode(e,n){const o=e.getInputTargetBlock(n);if(!o&&!e.getInput(n))throw ReferenceError(`Input "${n}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(o),typeof e!="string")throw TypeError("Expecting code from statement block: "+(o&&o.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,n){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),e}injectId(e,n){return n=n.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+n+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,n){if(!this.definitions_[e]){const o=this.nameDB_.getDistinctName(e,r.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=o,Array.isArray(n)&&(n=n.join(`
`)),n=n.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);let a;for(;a!==n;)a=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]}getVariableName(e){return this.getName(e,r.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,r.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,n){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,n)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,n,o){return n}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},mA={},mA.CodeGenerator=r.CodeGenerator$$module$build$src$core$generator;var UE=class extends gf{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),a=n.getViewMetrics();n=n.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(o.top+(o.height-a.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),o=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===at.LEFT?e.width:o.width-this.getWidth():this.toolboxPosition_===at.LEFT?0:o.width:this.toolboxPosition_===at.LEFT?0:o.width+n.left-this.getWidth()}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height;var n=this.getWidth()-this.CORNER_RADIUS;this.setBackgroundPath(n,e.height-2*this.CORNER_RADIUS),e=this.getX(),n=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,n)}}setBackgroundPath(e,n){const o=this.toolboxPosition_===at.RIGHT;var a=e+this.CORNER_RADIUS;a=["M "+(o?a:0)+",0"],a.push("h",o?-e:e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",Math.max(0,n)),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",o?e:-e),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var n=F(e);if(n.y){const o=this.workspace_.getMetricsManager(),a=o.getScrollMetrics();n=o.getViewMetrics().top-a.top+n.y;let d;(d=this.workspace_.scrollbar)==null||d.setY(n),Dc(this.workspace_),zs()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN;const o=this.RTL?n:n+this.tabWidth_;for(const a of e)a.getElement().moveBy(o,n),n+=a.getElement().getBoundingRectangle().getHeight()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<n&&e>-n||e<-180+n||e>180-n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_===at.LEFT?new it(-1e9,1e9,-1e9,n+e.width):new it(-1e9,1e9,n,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((n,o)=>Math.max(n,o.getElement().getBoundingRectangle().getWidth()),0);if(e+=this.MARGIN*1.5+this.tabWidth_,e*=this.workspace_.scale,e+=sr.scrollbarThickness,this.getWidth()!==e){if(this.RTL)for(const n of this.getContents()){const o=n.getElement().getBoundingRectangle().left,a=e/this.workspace_.scale-n.getElement().getBoundingRectangle().getWidth()-this.MARGIN-this.tabWidth_;n.getElement().moveBy(a-o,0)}this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==at.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};UE.registryName="verticalFlyout",i(Le.FLYOUTS_VERTICAL_TOOLBOX,Pn,UE);var $A=class extends gf{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),a=n.getViewMetrics();n=n.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(o.left+(o.width-a.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),o=e.getViewMetrics();e=e.getToolboxMetrics();const a=this.toolboxPosition_===at.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?a?e.height:o.height-this.getHeight():a?0:o.height:a?0:o.height+n.top-this.getHeight()}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,e=e.width-2*this.CORNER_RADIUS;var n=this.getHeight()-this.CORNER_RADIUS;this.setBackgroundPath(e,n),e=this.getX(),n=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,n)}}setBackgroundPath(e,n){const o=this.toolboxPosition_===at.TOP,a=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(a.push("h",e+2*this.CORNER_RADIUS),a.push("v",n),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",-e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),a.push("h",e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",n),a.push("h",-e-2*this.CORNER_RADIUS)),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var n=F(e);if(n=n.x||n.y){const o=this.workspace_.getMetricsManager(),a=o.getScrollMetrics();n=o.getViewMetrics().left-a.left+n;let d;(d=this.workspace_.scrollbar)==null||d.setX(n),Dc(this.workspace_),zs()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;const n=this.MARGIN;let o=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(const a of e)e=a.getElement().getBoundingRectangle(),e=this.RTL?o+e.getWidth():o,a.getElement().moveBy(e,n),o+=a.getElement().getBoundingRectangle().getWidth()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<90+n&&e>90-n||e>-90-n&&e<-90+n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_===at.TOP?new it(-1e9,n+e.height,-1e9,1e9):new it(n,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((n,o)=>Math.max(n,o.getElement().getBoundingRectangle().getHeight()),0);e+=this.MARGIN*1.5,e*=this.workspace_.scale,e+=sr.scrollbarThickness,this.getHeight()!==e&&(this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==at.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets())}};i(Le.FLYOUTS_HORIZONTAL_TOOLBOX,Pn,$A);var gu=class extends Vr{constructor(e,n,o,a,d){super(Lt.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=gu.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new lt(0,0),e!==Lt.SKIP_SETUP&&(d?this.configure_(d):this.setTypes(o,a),n&&this.setValidator(n))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new lr;this.variable||(e=r.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}initView(){super.initView(),fe(this.fieldGroup_,"blocklyVariableField")}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new lr;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var n=this.getSourceBlock();if(!n)throw new lr;const o=e.getAttribute("id"),a=e.textContent,d=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=r.getOrCreateVariablePackage$$module$build$src$core$variables(n.workspace,o,a,d),d!==null&&d!==n.getType())throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.getType()+", and does not match variable field that references it: "+Ys(e)+".");this.setValue(n.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.getName(),this.variable.getType()&&e.setAttribute("variabletype",this.variable.getType()),e}saveState(e){var n=this.saveLegacyState(gu);return n!==null||(this.initModel(),n={id:this.variable.getId()},e&&(n.name=this.variable.getName(),n.type=this.variable.getType())),n}loadState(e){const n=this.getSourceBlock();if(!n)throw new lr;this.loadLegacyState(gu,e)||(e=r.getOrCreateVariablePackage$$module$build$src$core$variables(n.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.getName():""}getVariable(){return this.variable}getDefaultType(){return this.defaultType}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var n=this.getSourceBlock();if(!n)throw new lr;return n=r.getVariable$$module$build$src$core$variables(n.workspace,e),n?(n=n.getType(),this.typeIsAllowed(n)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const n=this.getSourceBlock();if(!n)throw new lr;this.variable=r.getVariable$$module$build$src$core$variables(n.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const n=this.getVariableTypes();if(!n)return!0;for(let o=0;o<n.length;o++)if(e===n[o])return!0;return!1}getVariableTypes(){if(this.variableTypes)return this.variableTypes;if(!this.sourceBlock_||this.sourceBlock_.isDeadOrDying())return[""];let e=this.sourceBlock_.workspace.getVariableMap().getTypes();if(this.sourceBlock_.isInFlyout){const n=this.sourceBlock_.workspace.getPotentialVariableMap();if(!n)return e;e=Array.from(new Set([...e,...n.getTypes()]))}return e}setTypes(e=null,n=""){var o=this.getText();if(Array.isArray(e)){if(e.length===0)throw Error(`'variableTypes' of field variable ${o} was an empty list. If you want to include all variable types, pass 'null' instead.`);o=!1;for(let a=0;a<e.length;a++)e[a]===n&&(o=!0);if(!o)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}else if(e!==null)throw Error(`'variableTypes' was not an array or null in the definition of FieldVariable ${o}`);this.defaultType=n,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,n){if(e=n.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===dE&&this.variable){r.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===fE&&this.variable){e=this.variable.getWorkspace(),r.deleteVariable$$module$build$src$core$variables(e,this.variable,this.sourceBlock_);return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(rr(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let n=[];var o=this.getSourceBlock();if(o&&!o.isDeadOrDying()){o=o.workspace;const p=this.getVariableTypes();for(let C=0;C<p.length;C++){const X=p[C],Ie=o.getVariableMap().getVariablesOfType(X);if(n=n.concat(Ie),o.isFlyout){var a=void 0,d=void 0;n=n.concat((d=(a=o.getPotentialVariableMap())==null?void 0:a.getVariablesOfType(X))!=null?d:[])}}}for(n.sort(ql),a=[],d=0;d<n.length;d++)a[d]=[n[d].getName(),n[d].getId()];return a.push([r.Msg$$module$build$src$core$msg.RENAME_VARIABLE,dE]),r.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&a.push([r.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),fE]),a}};Ks("field_variable",gu);var HE=class extends ya{constructor(e,n,o,a,d,p){super(Lt.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==Lt.SKIP_SETUP&&(p?this.configure_(p):this.setConstraints(n,o,a),this.setValue(e),d&&this.setValidator(d))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,n,o){this.setMinInternal(e),this.setMaxInternal(n),this.setPrecisionInternal(o),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let n=String(this.precision_);n.includes("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const o=n.indexOf(".");this.decimalPlaces=o===-1?e?0:null:n.length-o-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return this.min_>-1/0&&(e.min=`${this.min_}`,fr(e,ir.VALUEMIN,this.min_)),this.max_<1/0&&(e.max=`${this.max_}`,fr(e,ir.VALUEMAX,this.max_)),e}initView(){super.initView(),this.fieldGroup_&&fe(this.fieldGroup_,"blocklyNumberField")}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};Ks("field_number",HE),HE.prototype.DEFAULT_VALUE=0;var IA=class extends fl{constructor(e,n,o){super(String(e??""),n,o),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(rr(e.text),void 0,e)}};Ks("field_label_serializable",IA);var gl=class extends Lt{constructor(e,n,o){super(Lt.SKIP_SETUP),this.SERIALIZABLE=!0,this.value_=this.value_,this.checkChar=gl.CHECK_CHAR,e!==Lt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState(gl);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();fe(this.fieldGroup_,"blocklyCheckboxField"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||gl.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};gl.CHECK_CHAR="",Ks("field_checkbox",gl),gl.prototype.DEFAULT_VALUE=!1;var OA=class{constructor(e,n){this.draggable=e,this.workspace=n,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){r.getGroup$$module$build$src$core$events$utils()||r.setGroup$$module$build$src$core$events$utils(!0),this.draggable.startDrag(e)}onDrag(e,n){this.moveDraggable(e,n),n=this.getRoot(this.draggable),is(n)&&n.setDeleteStyle(this.wouldDeleteDraggable(e,n)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const n=this.getRoot(this.draggable);if(this.dragTarget!==e){let o;(o=this.dragTarget)==null||o.onDragExit(n),e?.onDragEnter(n)}e?.onDragOver(n),this.dragTarget=e}moveDraggable(e,n){n=this.pixelsToWorkspaceUnits(n),n=Ne.sum(this.startLoc,n),this.draggable.drag(n,e)}wouldDeleteDraggable(e,n){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,Ht.Capability.DELETE_AREA)?e.wouldDelete(n):!1}onDragEnd(e){const n=r.getGroup$$module$build$src$core$events$utils();var o=this.workspace.getDragTarget(e);const a=this.getRoot(this.draggable);if(o){let d;(d=this.dragTarget)==null||d.onDrop(a)}this.shouldReturnToStart(e,a)&&this.draggable.revertDrag(),(o=is(a)&&this.wouldDeleteDraggable(e,a))&&this.draggable instanceof bt&&Ed(this.draggable.getRootBlock()),this.draggable.endDrag(e),o&&is(a)&&(r.setGroup$$module$build$src$core$events$utils(n),a.dispose()),r.setGroup$$module$build$src$core$events$utils(!1),!o&&dr(this.draggable)&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.draggable)}getRoot(e){return e instanceof bt?e.getRootBlock():e}shouldReturnToStart(e,n){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(n):!1}pixelsToWorkspaceUnits(e){return e=new Ne(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};i(Le.BLOCK_DRAGGER,Pn,OA);var Eu={};Eu.BlockDragStrategy=vL,Eu.BubbleDragStrategy=IL,Eu.CommentDragStrategy=_L,Eu.Dragger=OA;var GE=class extends qs{constructor(e,n,o){super(e?e.workspace.id:void 0),this.type=de.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=n,this.blocks=o)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new GE),n.isStart=e.isStart,n.blockId=e.blockId,n.blocks=e.blocks,n}};i(Le.EVENT,de.BLOCK_DRAG,GE);var VE=class extends ol{constructor(e,n,o,a){super(e),this.type=de.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=n,this.oldValue=o,this.newValue=a)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new VE),n.name=e.name,n.oldValue=e.oldValue,n.newValue=e.newValue,n}isNull(){return this.oldValue===this.newValue}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(n=n.getBlockById(this.blockId),!n)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};i(Le.EVENT,de.BLOCK_FIELD_INTERMEDIATE_CHANGE,VE);var WE=class extends ol{constructor(e){super(e),this.type=de.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new WE),n.oldParentId=e.oldParentId,n.oldInputName=e.oldInputName,e.oldCoordinate&&(o=e.oldCoordinate.split(","),n.oldCoordinate=new Ne(Number(o[0]),Number(o[1]))),n.newParentId=e.newParentId,n.newInputName=e.newInputName,e.newCoordinate&&(o=e.newCoordinate.split(","),n.newCoordinate=new Ne(Number(o[0]),Number(o[1]))),e.reason!==void 0&&(n.reason=e.reason),e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var n=e.getBlockById(this.blockId);if(!n)throw Error("The block associated with the block move event could not be found");e={};const o=n.getParent();return o?(e.parentId=o.id,(n=o.getInputWithBlock(n))&&(e.inputName=n.name)):e.coordinate=n.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&Ne.equals(this.oldCoordinate,this.newCoordinate)}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var o=n.getBlockById(this.blockId);if(o){var a=e?this.newParentId:this.oldParentId,d=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,a){var p=n.getBlockById(a);if(!p){console.warn("Can't connect to non-existent block: "+a);return}}if(o.getParent()&&o.unplug(),e)d=o.getRelativeToSurfaceXY(),o.moveBy(e.x-d.x,e.y-d.y,this.reason);else{n=o.outputConnection,(!n||o.previousConnection&&o.previousConnection.isConnected())&&(n=o.previousConnection);let C,X;o=(X=n)==null?void 0:X.type,d?(o=p.getInput(d))&&(C=o.connection):o===ze.PREVIOUS_STATEMENT&&(C=p.nextConnection),C&&n?n.connect(C):console.warn("Can't connect to non-existent input: "+d)}}else console.warn("Can't move non-existent block: "+this.blockId)}};i(Le.EVENT,de.BLOCK_MOVE,WE);var XE=class extends qs{constructor(e,n,o){super(e?e.workspace.id:void 0),this.type=de.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=n,this.bubbleType=o)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new XE),n.isOpen=e.isOpen,n.bubbleType=e.bubbleType,n.blockId=e.blockId,n}},jE;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(jE||(jE={})),i(Le.EVENT,de.BUBBLE_OPEN,XE);var si=class extends da{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=r.getGroup$$module$build$src$core$events$utils(),this.recordUndo=K())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new si),n.commentId=e.commentId,n}static CommentCreateDeleteHelper(e,n){const o=e.getEventWorkspace_();if(n){if(!e.json)throw Error("Encountered a comment event without proper json");Cc(e.json,o)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=o.getCommentById(e.commentId))?n.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},zE=class extends si{constructor(e,n,o){super(e),this.type=de.COMMENT_CHANGE,e&&(this.oldContents_=typeof n>"u"?"":n,this.newContents_=typeof o>"u"?"":o)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new zE),n.oldContents_=e.oldContents,n.newContents_=e.newContents,n}isNull(){return this.oldContents_===this.newContents_}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){var o=e?this.newContents_:this.oldContents_;if(o===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");n.setText(o)}else console.warn("Can't change non-existent comment: "+this.commentId)}};i(Le.EVENT,de.COMMENT_CHANGE,zE);var YE=class extends si{constructor(e,n){super(e),this.newCollapsed=n,this.type=de.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new YE),n.newCollapsed=e.newCollapsed,n}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=n.getCommentById(this.commentId))?n.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};i(Le.EVENT,de.COMMENT_COLLAPSE,YE);var KE=class extends si{constructor(e){super(e),this.type=de.COMMENT_CREATE,e&&(this.xml=Fc(e),this.json=Kl(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ys(this.xml),e.json=this.json,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new KE),n.xml=r.textToDom$$module$build$src$core$utils$xml(e.xml),n.json=e.json,n}run(e){si.CommentCreateDeleteHelper(this,e)}};i(Le.EVENT,de.COMMENT_CREATE,KE);var JE=class extends si{constructor(e){super(e),this.type=de.COMMENT_DELETE,e&&(this.xml=Fc(e),this.json=Kl(e,{addCoordinates:!0}))}run(e){si.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Ys(this.xml),e.json=this.json,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new JE),n.xml=r.textToDom$$module$build$src$core$utils$xml(e.xml),n.json=e.json,n}};i(Le.EVENT,de.COMMENT_DELETE,JE);var qE=class extends qs{constructor(e,n){super(e?e.workspace.id:void 0),this.type=de.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=n)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new qE),n.isStart=e.isStart,n.commentId=e.commentId,n}};i(Le.EVENT,de.COMMENT_DRAG,qE);var ZE=class extends si{constructor(e){super(e),this.type=de.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new ZE),o=e.oldCoordinate.split(","),n.oldCoordinate_=new Ne(Number(o[0]),Number(o[1])),o=e.newCoordinate.split(","),n.newCoordinate_=new Ne(Number(o[0]),Number(o[1])),n}isNull(){return Ne.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");n.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};i(Le.EVENT,de.COMMENT_MOVE,ZE);var QE=class extends si{constructor(e){super(e),this.type=de.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new QE),n.oldSize=new lt(e.oldWidth,e.oldHeight),n.newSize=new lt(e.newWidth,e.newHeight),n}isNull(){return lt.equals(this.oldSize,this.newSize)}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");n.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};i(Le.EVENT,de.COMMENT_RESIZE,QE);var e0=class extends qs{constructor(e,n,o){super(o),this.type=de.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=n??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new e0),n.oldItem=e.oldItem,n.newItem=e.newItem,n}};i(Le.EVENT,de.TOOLBOX_ITEM_SELECT,e0);var t0=class extends xa{constructor(e,n,o){super(e),this.oldType=n,this.newType=o,this.type=de.VAR_TYPE_CHANGE}toJson(){const e=super.toJson();if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");return e.oldType=this.oldType,e.newType=this.newType,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new t0),n.oldType=e.oldType,n.newType=e.newType,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");const o=n.getVariableMap().getVariableById(this.varId);o&&(e?n.getVariableMap().changeVariableType(o,this.newType):n.getVariableMap().changeVariableType(o,this.oldType))}};i(Le.EVENT,de.VAR_TYPE_CHANGE,t0);var SA=class extends da{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=de.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};i(Le.EVENT,de.FINISHED_LOADING,SA);var RA,LA,AA,vA,CA,xA,NA,bA,yA,kA,wA,MA,DA,PA,FA,BA,UA,HA,GA,VA,WA,XA,jA,zA,Ve;r.BLOCK_CHANGE$$module$build$src$core$events$events=de.BLOCK_CHANGE,r.BLOCK_CREATE$$module$build$src$core$events$events=de.BLOCK_CREATE,r.BLOCK_DELETE$$module$build$src$core$events$events=de.BLOCK_DELETE,RA=de.BLOCK_DRAG,r.BLOCK_MOVE$$module$build$src$core$events$events=de.BLOCK_MOVE,LA=de.BLOCK_FIELD_INTERMEDIATE_CHANGE,AA=de.BUBBLE_OPEN,vA=de.BLOCK_CHANGE,CA=de.CLICK,xA=de.COMMENT_CHANGE,NA=de.COMMENT_CREATE,bA=de.COMMENT_DELETE,yA=de.COMMENT_MOVE,kA=de.COMMENT_RESIZE,wA=de.COMMENT_DRAG,MA=de.BLOCK_CREATE,DA=de.BLOCK_DELETE,PA=de.FINISHED_LOADING,FA=de.BLOCK_MOVE,BA=de.SELECTED,UA=de.THEME_CHANGE,HA=de.TOOLBOX_ITEM_SELECT,GA=de.TRASHCAN_OPEN,VA=de.UI,WA=de.VAR_CREATE,XA=de.VAR_DELETE,jA=de.VAR_RENAME,zA=de.VIEWPORT_CHANGE,Ve={},Ve.Abstract=da,Ve.BLOCK_CHANGE=r.BLOCK_CHANGE$$module$build$src$core$events$events,Ve.BLOCK_CREATE=r.BLOCK_CREATE$$module$build$src$core$events$events,Ve.BLOCK_DELETE=r.BLOCK_DELETE$$module$build$src$core$events$events,Ve.BLOCK_DRAG=RA,Ve.BLOCK_FIELD_INTERMEDIATE_CHANGE=LA,Ve.BLOCK_MOVE=r.BLOCK_MOVE$$module$build$src$core$events$events,Ve.BUBBLE_OPEN=AA,Ve.BUMP_EVENTS=fR,Ve.BlockBase=ol,Ve.BlockChange=ll,Ve.BlockCreate=lE,Ve.BlockDelete=hE,Ve.BlockDrag=GE,Ve.BlockFieldIntermediateChange=VE,Ve.BlockMove=WE,Ve.BubbleOpen=XE,Ve.BubbleType=jE,Ve.CHANGE=vA,Ve.CLICK=CA,Ve.COMMENT_CHANGE=xA,Ve.COMMENT_CREATE=NA,Ve.COMMENT_DELETE=bA,Ve.COMMENT_DRAG=wA,Ve.COMMENT_MOVE=yA,Ve.COMMENT_RESIZE=kA,Ve.CREATE=MA,Ve.Click=bg,Ve.ClickTarget=yg,Ve.CommentBase=si,Ve.CommentChange=zE,Ve.CommentCollapse=YE,Ve.CommentCreate=KE,Ve.CommentDelete=JE,Ve.CommentDrag=qE,Ve.CommentMove=ZE,Ve.CommentResize=QE,Ve.DELETE=DA,Ve.FINISHED_LOADING=PA,Ve.FinishedLoading=SA,Ve.MOVE=FA,Ve.SELECTED=BA,Ve.Selected=uE,Ve.THEME_CHANGE=UA,Ve.TOOLBOX_ITEM_SELECT=HA,Ve.TRASHCAN_OPEN=GA,Ve.ThemeChange=aE,Ve.ToolboxItemSelect=e0,Ve.TrashcanOpen=wE,Ve.UI=VA,Ve.UiBase=qs,Ve.VAR_CREATE=WA,Ve.VAR_DELETE=XA,Ve.VAR_RENAME=jA,Ve.VIEWPORT_CHANGE=zA,Ve.VarBase=xa,Ve.VarCreate=bE,Ve.VarDelete=yE,Ve.VarRename=kE,Ve.VarTypeChange=t0,Ve.ViewportChange=cE,Ve.clearPendingUndo=q,Ve.disable=r.disable$$module$build$src$core$events$utils,Ve.disableOrphans=et,Ve.enable=r.enable$$module$build$src$core$events$utils,Ve.filter=J,Ve.fire=z,Ve.fromJson=be,Ve.get=ce,Ve.getDescendantIds=Pe,Ve.getGroup=r.getGroup$$module$build$src$core$events$utils,Ve.getRecordUndo=K,Ve.isEnabled=he,Ve.setGroup=r.setGroup$$module$build$src$core$events$utils,Ve.setRecordUndo=r.setRecordUndo$$module$build$src$core$events$utils;var ii={};ii.BottomRow=dA,ii.ConstantProvider=uA,ii.Drawer=hA,ii.PathObject=pA,ii.RenderInfo=TA,ii.Renderer=BE,ii.RightConnectionShape=fA,ii.StatementInput=yf,ii.TopRow=_A,Og();var Lr={};Lr.registerCleanup=og,Lr.registerCollapse=ag,Lr.registerCollapseExpandBlock=Tg,Lr.registerComment=fg,Lr.registerCommentCreate=Ig,Lr.registerCommentDelete=mg,Lr.registerCommentDuplicate=$g,Lr.registerCommentOptions=KS,Lr.registerDefaultOptions=Og,Lr.registerDelete=gg,Lr.registerDeleteAll=hg,Lr.registerDisable=pg,Lr.registerDuplicate=dg,Lr.registerExpand=cg,Lr.registerHelp=Eg,Lr.registerInline=_g,Lr.registerRedo=ig,Lr.registerUndo=sg;var r0="button",YA=class{load(e,n){return e=new gn(n.getWorkspace(),n.targetWorkspace,e,!1),e.show(),new Aa(e,r0)}gapForItem(e,n){return n}disposeItem(e){e=e.getElement(),e instanceof gn&&e.dispose()}getType(){return r0}};i(Le.FLYOUT_INFLATER,r0,YA);var mu={};mu.Bubble=St,mu.MiniWorkspaceBubble=Ni,mu.TextBubble=CL,mu.TextInputBubble=df;var Ew="WORKSPACE_AT_BLOCK_CAPACITY",n0="block",KA=class{constructor(){this.permanentlyDisabledBlocks=new Set,this.listeners=new Map,this.capacityWrapper=this.filterFlyoutBasedOnCapacity.bind(this)}load(e,n){return this.setFlyout(n),e=this.createBlock(e,n.getWorkspace()),e.isEnabled()?this.updateStateBasedOnCapacity(e):this.permanentlyDisabledBlocks.add(e),e.getDescendants(!1).forEach(o=>o.isInFlyout=!0),this.addBlockListeners(e),new Aa(e,n0)}createBlock(e,n){return e.blockxml?(e=typeof e.blockxml=="string"?r.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,n=Zo(e,n)):(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[os]),"x"in e&&delete e.x,"y"in e&&delete e.y,n=Ql(e,n)),n}gapForItem(e,n){let o;return e.gap?o=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?r.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,o=parseInt(e.getAttribute("gap"))),!o||isNaN(o)?n:o}disposeItem(e){e=e.getElement(),e instanceof bt&&(this.removeListeners(e.id),e.dispose(!1,!1))}removeListeners(e){let n;((n=this.listeners.get(e))!=null?n:[]).forEach(o=>y(o)),this.listeners.delete(e)}setFlyout(e){if(this.flyout!==e){if(this.flyout){let o;(o=this.flyout.targetWorkspace)==null||o.removeChangeListener(this.capacityWrapper)}this.flyout=e;var n;(n=this.flyout.targetWorkspace)==null||n.addChangeListener(this.capacityWrapper)}}updateStateBasedOnCapacity(e){let n,o;const a=(n=this.flyout)==null||(o=n.targetWorkspace)==null?void 0:o.isCapacityAvailable(Dn(e));for(;e;)e.setDisabledReason(!a,Ew),e=e.getNextBlock()}addBlockListeners(e){const n=[];n.push(A(e.getSvgRoot(),"pointerdown",e,o=>{let a,d;const p=(a=this.flyout)==null||(d=a.targetWorkspace)==null?void 0:d.getGesture(o);p&&this.flyout&&(p.setStartBlock(e),p.handleFlyoutStart(o,this.flyout))})),n.push(m(e.getSvgRoot(),"pointermove",null,()=>{let o,a;!((o=this.flyout)==null||(a=o.targetWorkspace)==null)&&a.isDragging()||e.addSelect()})),n.push(m(e.getSvgRoot(),"pointerleave",null,()=>{let o,a;!((o=this.flyout)==null||(a=o.targetWorkspace)==null)&&a.isDragging()||e.removeSelect()})),this.listeners.set(e.id,n)}filterFlyoutBasedOnCapacity(e){!this.flyout||e&&e.type!==de.BLOCK_CREATE&&e.type!==de.BLOCK_DELETE||this.flyout.getWorkspace().getTopBlocks(!1).forEach(n=>{this.permanentlyDisabledBlocks.has(n)||this.updateStateBasedOnCapacity(n)})}getType(){return n0}};i(Le.FLYOUT_INFLATER,n0,KA);var JA=class extends Sf{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},qA=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=Jt(e.xPos,this.info_.startY);for(let n=0,o;o=e.elements[n];n++)se.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:se.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):se.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:se.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):se.isSpacer(o)&&o.width!==0&&(this.steps_+=qe("H",o.xPos+o.width-this.highlightOffset));this.steps_+=qe("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+qe("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const n=e.getLastInput();if(this.RTL_){const o=e.height-n.connectionHeight;this.steps_+=yr(n.xPos+n.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+qe("v",o)}else this.steps_+=yr(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const n=e.getLastInput();if(n)if(this.RTL_){const o=e.height-2*this.insideCornerPaths_.height;this.steps_+=yr(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+qe("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+Js(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=yr(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Js(e.width-n.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const n=e.xPos+e.width-this.highlightOffset;e instanceof CE&&e.followsStatement&&(this.steps_+=qe("H",n)),this.RTL_&&(this.steps_+=qe("H",n),e.height>this.highlightOffset&&(this.steps_+=qe("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=qe("V",e.baseline-this.highlightOffset);else{const n=this.info_.bottomRow.elements[0];se.isLeftSquareCorner(n)?this.steps_+=yr(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):se.isLeftRoundedCorner(n)&&(this.steps_+=yr(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=yr(this.info_.startX,e):(this.steps_+=yr(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=qe("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,se.isLeftRoundedCorner(e.elements[0])?this.steps_+=qe("V",this.outsideCornerPaths_.height):this.steps_+=qe("V",e.capline+this.highlightOffset))}drawInlineInput(e){const n=this.highlightOffset,o=e.xPos+e.connectionWidth;var a=e.centerline-e.height/2;const d=e.width-e.connectionWidth,p=a+n;this.RTL_?(a=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=yr(o-n,p)+qe("v",a)+this.puzzleTabPaths_.pathDown(this.RTL_)+qe("v",e)+qe("h",d)):this.inlineSteps_+=yr(e.xPos+e.width+n,p)+qe("v",e.height)+qe("h",-d)+yr(o,a+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},ZA=class extends Rf{constructor(e,n){super(e,n),this.highlighter_=new qA(n)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=qe("H",e.xPos+e.width)+qe("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const n=e.centerline-e.height/2;if(e.connectionModel){let o=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,n+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(n!=null&&n.connectionModel){let o=e.xPos+e.statementEdge+n.notchOffset;o=this.info_.RTL?o*-1:o+this.constants_.DARK_PATH_OFFSET,n.connectionModel.setOffsetInBlock(o,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let o=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,o=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},QA=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=Jt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e+n)-n,a=Jt(o,o)+nr("a","0 0,0",e,Je(-o-n,e-o)),d=nr("a","0 0,0",e+n,Je(e+n,e+n)),p=Jt(o,-o)+nr("a","0 0,0",e+n,Je(e-o,o+n));return{width:e+n,height:e,pathTop(C){return C?a:""},pathBottom(C){return C?d:p}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e-n)+n,a=Jt(o,o)+nr("a","0 0,1",e-n,Je(e-o,-o+n)),d=Jt(n,e)+nr("a","0 0,1",e-n,Je(e,-e+n)),p=-o,C=Jt(o,p)+nr("a","0 0,1",e-n,Je(-o+n,-p-e));return{height:e,topLeft(X){return X?a:d},bottomLeft(){return C}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=Jt(-2,-n+2.5+.9)+Js(e*-.45,-2.1),a=qe("v",2.5)+Jt(-e*.97,2.5)+vn("q",[Je(-e*.05,10),Je(e*.3,9.5)])+Jt(e*.67,-1.9)+qe("v",2.5),d=qe("v",-1.5)+Jt(e*-.92,-.5)+vn("q",[Je(e*-.19,-5.5),Je(0,-11)])+Jt(e*.92,1),p=Jt(-5,n-.7)+Js(e*.46,-2.1);return{width:e,height:n,pathUp(C){return C?o:d},pathDown(C){return C?a:p}}}makeNotch(){return{pathLeft:qe("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Js(5.1,2.6)+Jt(-10.2,6.8)+Js(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,n=Jt(25,-8.7)+vn("c",[Je(29.7,-6.2),Je(57.2,-.5),Je(75,8.7)]),o=vn("c",[Je(17.8,-9.2),Je(45.3,-14.9),Je(75,-8.7)])+yr(100.5,e+.5);return{path(a){return a?n:o}}}},ev=class extends AE{constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},tv=class extends Of{constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},rv=class extends _u{constructor(e,n){super(e,n),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Vn||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,n){this.isInline&&e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new ev(this.constants_,e)),n.hasInlineInput=!0):e instanceof Vn?(n.elements.push(new tv(this.constants_,e)),n.hasStatement=!0):e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new RE(this.constants_,e)),n.hasExternalInput=!0):(e instanceof Qs||e instanceof yi)&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||n.align!==null||(n.align=e.align)}addElemSpacing_(){let e=!1;for(let o=0,a;a=this.rows[o];o++)a.hasExternalInput&&(e=!0);for(let o=0,a;a=this.rows[o];o++){var n=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new Wn(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let d=0;d<n.length-1;d++){a.elements.push(n[d]);const p=this.getInRowSpacing_(n[d],n[d+1]);a.elements.push(new Wn(this.constants_,p))}a.elements.push(n[n.length-1]),a.endsWithElemSpacer()&&(n=this.getInRowSpacing_(n[n.length-1],null),e&&a.hasDummyInput&&(n+=this.constants_.TAB_WIDTH),a.elements.push(new Wn(this.constants_,n)))}}}getInRowSpacing_(e,n){if(!e)return n&&se.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&se.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&se.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!se.isInput(e)&&(!n||se.isStatementInput(n)))return se.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:se.isIcon(e)?this.constants_.LARGE_PADDING*2+1:se.isHat(e)?this.constants_.NO_PADDING:se.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:se.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:se.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(se.isInput(e)&&!n){if(se.isExternalInput(e))return this.constants_.NO_PADDING;if(se.isInlineInput(e))return this.constants_.LARGE_PADDING;if(se.isStatementInput(e))return this.constants_.NO_PADDING}if(!se.isInput(e)&&n&&se.isInput(n)){if(se.isField(e)&&e.isEditable){if(se.isInlineInput(n)||se.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(se.isInlineInput(n)||se.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(se.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(se.isIcon(e)&&n&&!se.isInput(n))return this.constants_.LARGE_PADDING;if(se.isInlineInput(e)&&n&&se.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(se.isLeftSquareCorner(e)&&n){if(se.isHat(n))return this.constants_.NO_PADDING;if(se.isPreviousConnection(n))return n.notchOffset;if(se.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(se.isLeftRoundedCorner(e)&&n){if(se.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(se.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return se.isField(e)&&n&&se.isField(n)&&e.isEditable===n.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:n&&se.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return se.isTopRow(e)&&se.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:se.isTopRow(e)||se.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(se.isSpacer(n))return e.yPos+n.height/2;if(se.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,se.isNextConnection(n)?e+n.height/2:e-n.height/2;if(se.isTopRow(e))return se.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let o=e.yPos;return se.isField(n)||se.isIcon(n)?(o+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=se.isInlineInput(n)?o+n.height/2:o+e.height/2,o}alignRowElements_(){if(this.isInline){var e=0,n=new WeakMap,o=null;for(let a=this.rows.length-1,d;d=this.rows[a];a--)n.set(d,e),se.isInputRow(d)&&(d.hasStatement&&this.alignStatementRow_(d),o&&o.hasStatement&&d.width<o.width?n.set(d,o.width):e=d.hasStatement?d.width:Math.max(e,d.width),o=d);e=0;for(let a=0,d;d=this.rows[a];a++)d.hasStatement?e=this.getDesiredRowWidth_(d):se.isSpacer(d)?d.width=Math.max(e,n.get(d)):(o=d.width,e=Math.max(e,n.get(d))-o,e>0&&this.addAlignmentPadding_(d,e),e=d.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,n=0;for(let a=0,d;d=this.rows[a];a++){d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var o=n-this.topRow.ascenderHeight;d===this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,n+=o),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,o.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},nv=class extends Lf{constructor(e,n,o){super(e,n,o),this.constants=o,this.colourDark="#000000",this.svgPathDark=N(ue.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=N(ue.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=Jo("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){super.updateHighlighted(e),this.svgPathLight.style.display=e?"none":"inline"}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},sv=class extends Af{constructor(e){super(e),this.highlightConstants=null}init(e,n){super.init(e,n),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,n,o){super.refreshDom(e,n,o),this.getHighlightConstants().init()}makeConstants_(){return new JA}makeRenderInfo_(e){return new rv(this,e)}makeDrawer_(e,n){return new ZA(e,n)}makePathObject(e,n){return new nv(e,n,this.getConstants())}makeHighlightConstants_(){return new QA(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};Hc("geras",sv);var oi={};oi.ConstantProvider=JA,oi.Drawer=ZA,oi.HighlightConstantProvider=QA,oi.Highlighter=qA,oi.InlineInput=ev,oi.PathObject=nv,oi.RenderInfo=rv,oi.Renderer=sv,oi.StatementInput=tv;var iv=class extends _u{constructor(e,n){super(e,n)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var n=0;n<this.rows.length;n++)if(this.rows[n].hasExternalInput){e=!0;break}for(n=0;n<this.rows.length;n++){const a=this.rows[n];var o=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new Wn(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(let d=0;d<o.length-1;d++){a.elements.push(o[d]);const p=this.getInRowSpacing_(o[d],o[d+1]);a.elements.push(new Wn(this.constants_,p))}a.elements.push(o[o.length-1]),a.endsWithElemSpacer()&&(o=this.getInRowSpacing_(o[o.length-1],null),e&&a.hasDummyInput&&(o+=this.constants_.TAB_WIDTH),a.elements.push(new Wn(this.constants_,o)))}}}getInRowSpacing_(e,n){if(!e)return n&&se.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&se.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&se.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!se.isInput(e)&&!n)return se.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:se.isIcon(e)?this.constants_.LARGE_PADDING*2+1:se.isHat(e)?this.constants_.NO_PADDING:se.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:se.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:se.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(se.isInput(e)&&!n){if(se.isExternalInput(e))return this.constants_.NO_PADDING;if(se.isInlineInput(e))return this.constants_.LARGE_PADDING;if(se.isStatementInput(e))return this.constants_.NO_PADDING}if(!se.isInput(e)&&n&&se.isInput(n)){if(se.isField(e)&&e.isEditable){if(se.isInlineInput(n)||se.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(se.isInlineInput(n)||se.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(se.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(se.isIcon(e)&&n&&!se.isInput(n))return this.constants_.LARGE_PADDING;if(se.isInlineInput(e)&&n&&se.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(se.isLeftSquareCorner(e)&&n){if(se.isHat(n))return this.constants_.NO_PADDING;if(se.isPreviousConnection(n)||se.isNextConnection(n))return n.notchOffset}return se.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:se.isField(e)&&n&&se.isField(n)&&e.isEditable===n.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:n&&se.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return se.isTopRow(e)&&se.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:se.isTopRow(e)||se.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(se.isSpacer(n))return e.yPos+n.height/2;if(se.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,se.isNextConnection(n)?e+n.height/2:e-n.height/2;if(se.isTopRow(e))return se.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let o=e.yPos;return o=se.isField(n)&&e.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+e.height/2}finalize_(){let e=0,n=0;for(var o=0;o<this.rows.length;o++){const d=this.rows[o];d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var a=n-this.topRow.ascenderHeight;d===this.bottomRow&&a<this.constants_.MIN_BLOCK_HEIGHT&&(a=this.constants_.MIN_BLOCK_HEIGHT-a,this.bottomRow.height+=a,n+=a),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,o.getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline}},ov=class extends Af{constructor(e){super(e)}makeRenderInfo_(e){return new iv(this,e)}};Hc("thrasos",ov);var s0={};s0.RenderInfo=iv,s0.Renderer=ov;var mw={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},$w={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},Iw=new dl("zelos",mw,$w),Ow={Classic:cf,Zelos:Iw},i0=class{constructor(e,n,o){this.id_=e.toolboxitemid||B(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}getFocusableElement(){const e=this.getDiv();if(!e)throw Error("Trying to access toolbox item before DOM is initialized.");if(!(e instanceof HTMLElement))throw Error("Toolbox item div is unexpectedly not an HTML element.");return e}getFocusableTree(){return this.parentToolbox_}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}},vs=class extends i0{constructor(e,n,o){super(e,n,o),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategoryContainer",row:"blocklyToolboxCategory",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyToolboxCategoryIcon",label:"blocklyToolboxCategoryLabel",contents:"blocklyToolboxCategoryGroup",selected:"blocklyToolboxSelected",openicon:"blocklyToolboxCategoryIconOpen",closedicon:"blocklyToolboxCategoryIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let n=0;n<e.length;n++){const o=e[n];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(o)}}parseCategoryDef_(e){this.name_="name"in e?rr(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Xs(this.htmlDiv_,Bn.TREEITEM),fr(this.htmlDiv_,ir.SELECTED,!1),fr(this.htmlDiv_,ir.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Xs(this.iconDom_,Bn.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&fr(this.htmlDiv_,ir.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const n=this.cssConfig_.container;return n&&fe(e,n),e}createRowContainer_(){const e=document.createElement("div");var n=this.cssConfig_.row;return n&&fe(e,n),n=`${vs.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e}createRowContentsContainer_(){const e=document.createElement("div"),n=this.cssConfig_.rowcontentcontainer;return n&&fe(e,n),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&fe(e,n)}return e.style.display="inline-block",e}createLabelDom_(e){const n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,(e=this.cssConfig_.label)&&fe(n,e),n}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=vs.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const n=e.categorystyle||e.categoryStyle;if((e=e.colour)&&n)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(n)return this.getColourfromStyle(n);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var n=this.workspace_.getTheme();if(e&&n){if((n=n.categoryStyles[e])&&n.colour)return this.parseColour(n.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=rr(e),e==null||e==="")return"";var n=Number(e);return isNaN(n)?(n=Ko(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):cp(n)}openIcon_(e){if(e){var n=this.cssConfig_.closedicon;n&&He(e,n),(n=this.cssConfig_.openicon)&&fe(e,n)}}closeIcon_(e){if(e){var n=this.cssConfig_.openicon;n&&He(e,n),(n=this.cssConfig_.closedicon)&&fe(e,n)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var n=this.cssConfig_.selected;if(e){const o=this.parseColour(vs.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||o,n&&fe(this.rowDiv_,n)}else this.rowDiv_.style.backgroundColor="",n&&Me(this.rowDiv_,n);fr(this.htmlDiv_,ir.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:je(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){Ce(this.htmlDiv_)}};vs.registrationName="category",vs.nestedPadding=19,vs.borderWidth=8,vs.defaultBackgroundColour="#57e",Xe(`
.blocklyToolboxCategory:not(.blocklyToolboxSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolbox[layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 5px 1px 0;
}

.blocklyToolbox[dir="RTL"][layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 0 1px 5px;
}

.blocklyToolboxCategory {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategory {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyToolboxCategoryIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyToolboxCategoryIconClosed {
  background-position: -32px -1px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategoryIconClosed {
  background-position: 0 -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: -32px -17px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: 0 -17px;
}

.blocklyToolboxCategoryIconOpen {
  background-position: -16px -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconOpen {
  background-position: -16px -17px;
}

.blocklyToolboxCategoryLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyToolboxCategoryLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxSelected .blocklyToolboxCategoryLabel {
  color: #fff;
}
`),i(Le.TOOLBOX_ITEM,vs.registrationName,vs);var $u=class extends i0{constructor(e,n){super(e,n),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const n=this.cssConfig_.container;return n&&fe(e,n),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){Ce(this.htmlDiv)}};$u.registrationName="sep",Xe(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolbox[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),i(Le.TOOLBOX_ITEM,$u.registrationName,$u);var ka=class extends vs{constructor(e,n,o){super(e,n,o),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxCategoryGroup",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const n=e.contents;if(n){this.flyoutItems_=[],e=!0;for(let o=0;o<n.length;o++){const a=n[o];!h(Le.TOOLBOX_ITEM,a.kind)||a.kind.toLowerCase()===$u.registrationName&&e?(this.flyoutItems_.push(a),e=!0):(this.createToolboxItem(a),e=!1)}}}}createToolboxItem(e){let n=e.kind;n.toUpperCase()==="CATEGORY"&&nt(e)&&(n=ka.registrationName),e=new(f(Le.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),Xs(this.subcategoriesDiv_,Bn.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),fr(this.htmlDiv_,ir.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&fe(e,n),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const n=document.createElement("div");n.style.display="none";var o=this.cssConfig_.contents;for(o&&fe(n,o),o=0;o<e.length;o++){const a=e[o];a.init();const d=a.getDiv();if(n.appendChild(d),a.getClickTarget){let p;(p=a.getClickTarget())==null||p.setAttribute("id",a.getId())}}return n}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let n;(n=this.parentToolbox_.getFlyout())==null||n.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}fr(this.htmlDiv_,ir.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const n=this.getChildToolboxItems();for(let o=0;o<n.length;o++)n[o].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};ka.registrationName="collapsibleCategory",i(Le.TOOLBOX_ITEM,ka.registrationName,ka);var lv=class extends Tf{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.height_=this.width_=0,this.flyout=null,this.contents=new Map,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const n=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_);const o=this.flyout.createDom("svg");fe(o,"blocklyToolboxFlyout"),ut(o,n),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:Ht.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[Ht.Capability.AUTOHIDEABLE,Ht.Capability.DELETE_AREA,Ht.Capability.DRAG_TARGET]}),r.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!0)}createDom_(e){e=e.getParentSvg();const n=this.createContainer_();return n.id=B(),this.contentsDiv_=this.createContentsContainer_(),Xs(this.contentsDiv_,Bn.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),fe(e,"blocklyToolbox"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return fe(e,"blocklyToolboxCategoryGroup"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,n){e=A(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),n=A(n,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(n)}onClick_(e){if(G(e)||e.target===this.HtmlDiv)I().hideChaff(!1);else{var n=e.target.getAttribute("id");n&&(n=this.getToolboxItemById(n),n.isSelectable()&&(this.setSelectedItem(n),n.onClick(e))),I().hideChaff(!0)}R()}onKeyDown_(e){let n=!1;switch(e.key){case"ArrowDown":n=this.selectNext();break;case"ArrowUp":n=this.selectPrevious();break;case"ArrowLeft":n=this.selectParent();break;case"ArrowRight":n=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(e)),n&&e.preventDefault()}createFlyout_(){const e=this.workspace_,n=e.copyOptionsForFlyout();return n.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?g(Le.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):g(Le.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)}render(e){this.toolboxDef_=e,this.contents.forEach(n=>n.dispose()),this.contents.clear(),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const n=document.createDocumentFragment();for(let o=0;o<e.length;o++)this.createToolboxItem(e[o],n);this.contentsDiv_.appendChild(n)}createToolboxItem(e,n){var o=e.kind;o.toUpperCase()==="CATEGORY"&&nt(e)&&(o=ka.registrationName),(o=f(Le.TOOLBOX_ITEM,o.toLowerCase()))&&(e=new o(e,this),e.init(),this.addToolboxItem_(e),(o=e.getDiv())&&n.appendChild(o),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents.set(e.getId(),e),e.isCollapsible()){e=e.getChildToolboxItems();for(let n=0;n<e.length;n++)this.addToolboxItem_(e[n])}}getToolboxItems(){return[...this.contents.values()]}addStyle(e){e&&this.HtmlDiv&&fe(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&Me(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const n=e.top,o=n+e.height,a=e.left;return e=a+e.width,this.toolboxPosition===at.TOP?new it(-1e7,o,-1e7,1e7):this.toolboxPosition===at.BOTTOM?new it(n,1e7,-1e7,1e7):this.toolboxPosition===at.LEFT?new it(-1e7,1e7,-1e7,e):new it(-1e7,1e7,a,1e7)}wouldDelete(e){return e instanceof bt?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(is(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(n):this.removeStyle(n)}getToolboxItemById(e){return this.contents.get(e)||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===at.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition===at.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_;var n=this.HtmlDiv.getBoundingClientRect();const o=this.getFlyout(),a=this.toolboxPosition===at.LEFT?e.scrollX+n.width+(o!=null&&o.isVisible()?o.getWidth():0):e.scrollX;n=this.toolboxPosition===at.TOP?e.scrollY+n.height+(o!=null&&o.isVisible()?o.getHeight():0):e.scrollY,e.translate(a,n),Mn(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){this.contents.forEach(e=>{e.refreshTheme&&e.refreshTheme()})}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const n=this.selectedItem_;!e&&!n||e&&!ZS(e)||(this.shouldDeselectItem_(n,e)&&n!==null&&this.deselectItem_(n),this.shouldSelectItem_(n,e)&&e!==null&&this.selectItem_(n,e),this.updateFlyout_(n,e),this.fireSelectEvent(n,e))}shouldDeselectItem_(e,n){return e!==null&&(!e.isCollapsible()||e!==n)}shouldSelectItem_(e,n){return n!==null&&n!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),fr(this.contentsDiv_,ir.ACTIVEDESCENDANT,"")}selectItem_(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),fr(this.contentsDiv_,ir.ACTIVEDESCENDANT,n.getId())}selectItemByPosition(e){(e=this.getToolboxItems()[e])&&this.setSelectedItem(e)}updateFlyout_(e,n){n&&(e!==n||n.isCollapsible())&&n.getContents().length?(this.flyout.show(n.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,n){const o=e&&e.getName();let a=n&&n.getName();e===n&&(a=null),e=new(ce(de.TOOLBOX_ITEM_SELECT))(o,a,this.workspace_.id),z(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let n=e.indexOf(this.selectedItem_)+1;if(n>-1&&n<e.length){let o=e[n];for(;o&&!o.isSelectable();)o=e[++n];if(o&&o.isSelectable())return this.setSelectedItem(o),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let n=e.indexOf(this.selectedItem_)-1;if(n>-1&&n<e.length){let o=e[n];for(;o&&!o.isSelectable();)o=e[--n];if(o&&o.isSelectable())return this.setSelectedItem(o),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose(),this.contents.forEach(e=>e.dispose());for(let e=0;e<this.boundEvents_.length;e++)y(this.boundEvents_[e]);this.boundEvents_=[],this.contents.clear(),this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),Ce(this.HtmlDiv)),r.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}getFocusableElement(){if(!this.HtmlDiv)throw Error("Toolbox DOM has not yet been created.");return this.HtmlDiv}getFocusableTree(){return this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(!e||e===this){let n;return(n=this.getToolboxItems().find(o=>o.isSelectable()))!=null?n:null}return null}getNestedTrees(){return[]}lookUpFocusableNode(e){return this.getToolboxItemById(e)}onTreeFocus(e,n){e!==this?this.getSelectedItem()!==e&&this.setSelectedItem(e):this.clearSelection()}onTreeBlur(e){let n;e&&e===((n=this.flyout)==null?void 0:n.getWorkspace())||this.autoHide(!1)}};Xe(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolbox {
  box-sizing: border-box;
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxCategoryGroup {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxCategoryGroup:focus {
  outline: none;
}
`),i(Le.TOOLBOX,Pn,lv);var Sw="12.3.1",Rw=ze.INPUT_VALUE,Lw=ze.OUTPUT_VALUE,Aw=ze.NEXT_STATEMENT,vw=ze.PREVIOUS_STATEMENT,Cw=at.TOP,xw=at.BOTTOM,Nw=at.LEFT,bw=at.RIGHT;Ca.prototype.newBlock=function(e,n){return new La(this,e,n)},rn.prototype.newBlock=function(e,n){return new bt(this,e,n)},Ca.prototype.newComment=function(e){return new lf(this,e)},rn.prototype.newComment=function(e){return new xi(this,e)},rn.newTrashcan=function(e){return new nA(e)},Ni.prototype.newWorkspaceSvg=function(e){return new rn(e)},r.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=Uc(e),e=e[0].concat(e[1]);for(let n=0;n<e.length;n++)this.getName(e[n][0],r.Names$$module$build$src$core$names.NameType.PROCEDURE)};var _e={};return _e.Block=La,_e.BlockFlyoutInflater=KA,_e.BlockNavigationPolicy=wL,_e.BlockSvg=bt,_e.Blocks=Ut,_e.ButtonFlyoutInflater=YA,_e.COLLAPSED_FIELD_NAME=Vd,_e.COLLAPSED_INPUT_NAME=Zc,_e.COLLAPSE_CHARS=RL,_e.CodeGenerator=r.CodeGenerator$$module$build$src$core$generator,_e.CollapsibleToolboxCategory=ka,_e.ComponentManager=Ht,_e.Connection=Tt,_e.ConnectionChecker=QL,_e.ConnectionDB=Sa,_e.ConnectionNavigationPolicy=ML,_e.ConnectionType=ze,_e.ContextMenu=hl,_e.ContextMenuItems=Lr,_e.ContextMenuRegistry=ht,_e.Css=Mg,_e.DELETE_VARIABLE_ID=fE,_e.DeleteArea=Tf,_e.DragTarget=xL,_e.DropDownDiv=Qr,_e.Events=Ve,_e.Extensions=Rs,_e.Field=Lt,_e.FieldCheckbox=gl,_e.FieldDropdown=Vr,_e.FieldImage=pl,_e.FieldLabel=fl,_e.FieldLabelSerializable=IA,_e.FieldNavigationPolicy=DL,_e.FieldNumber=HE,_e.FieldTextInput=r.FieldTextInput$$module$build$src$core$field_textinput,_e.FieldVariable=gu,_e.Flyout=gf,_e.FlyoutButton=gn,_e.FlyoutButtonNavigationPolicy=bL,_e.FlyoutItem=Aa,_e.FlyoutMetricsManager=NL,_e.FlyoutNavigationPolicy=yL,_e.FlyoutNavigator=UL,_e.FlyoutSeparator=pf,_e.FlyoutSeparatorNavigationPolicy=kL,_e.FocusManager=Gr,_e.FocusableTreeTraverser=wr,_e.Generator=r.CodeGenerator$$module$build$src$core$generator,_e.Gesture=mf,_e.Grid=$E,_e.HorizontalFlyout=$A,_e.INPUT_VALUE=Rw,_e.Input=Ra,_e.InsertionMarkerPreviewer=gA,_e.KeyboardNavigationController=GL,_e.LabelFlyoutInflater=cA,_e.LineCursor=IE,_e.Marker=WL,_e.MarkerManager=OE,_e.Menu=Hg,_e.MenuItem=Gd,_e.MetricsManager=TE,_e.Msg=r.Msg$$module$build$src$core$msg,_e.NEXT_STATEMENT=Aw,_e.Names=r.Names$$module$build$src$core$names,_e.Navigator=EE,_e.OPPOSITE_TYPE=_l,_e.OUTPUT_VALUE=Lw,_e.Options=Zs,_e.PREVIOUS_STATEMENT=vw,_e.PROCEDURE_CATEGORY_NAME=$f,_e.Procedures=tn,_e.RENAME_VARIABLE_ID=dE,_e.RenderedConnection=Mr,_e.Scrollbar=sr,_e.ScrollbarPair=mE,_e.SeparatorFlyoutInflater=HL,_e.ShortcutItems=ni,_e.ShortcutRegistry=Nt,_e.TOOLBOX_AT_BOTTOM=xw,_e.TOOLBOX_AT_LEFT=Nw,_e.TOOLBOX_AT_RIGHT=bw,_e.TOOLBOX_AT_TOP=Cw,_e.Theme=dl,_e.ThemeManager=ZL,_e.Themes=Ow,_e.Toast=sl,_e.Toolbox=lv,_e.ToolboxCategory=vs,_e.ToolboxItem=i0,_e.ToolboxSeparator=$u,_e.Tooltip=Un,_e.Touch=el,_e.Trashcan=nA,_e.UnattachedFieldError=lr,_e.VARIABLE_CATEGORY_NAME=jg,_e.VARIABLE_DYNAMIC_CATEGORY_NAME=NE,_e.VERSION=Sw,_e.VariableMap=rA,_e.VariableModel=tA,_e.Variables=or,_e.VariablesDynamic=uo,_e.VerticalFlyout=UE,_e.WidgetDiv=Ss,_e.Workspace=Ca,_e.WorkspaceAudio=eA,_e.WorkspaceDragger=VL,_e.WorkspaceNavigationPolicy=BL,_e.WorkspaceSvg=rn,_e.Xml=en,_e.ZoomControls=xR,_e.blockAnimations=cu,_e.blockRendering=Rt,_e.browserEvents=Si,_e.bubbles=mu,_e.bumpObjects=_f,_e.clipboard=As,_e.comments=ho,_e.common=Rr,_e.config=r.config$$module$build$src$core$config,_e.constants=Yk,_e.defineBlocksWithJsonArray=w,_e.dialog=Ci,_e.dragging=Eu,_e.fieldRegistry=af,_e.geras=oi,_e.getFocusManager=r.getFocusManager$$module$build$src$core$focus_manager,_e.getMainWorkspace=I,_e.getSelected=ie,_e.hasBubble=Yo,_e.hideChaff=QS,_e.icons=co,_e.inject=US,_e.inputs=fo,_e.isCopyable=Gc,_e.isDeletable=is,_e.isDraggable=ha,_e.isIcon=Cp,_e.isObservable=$d,_e.isPaster=JS,_e.isRenderedElement=qS,_e.isSelectable=Tn,_e.isSerializable=xc,_e.isVariableBackedParameterModel=xT,_e.keyboardNavigationController=Ef,_e.layers=Kk,_e.navigateBlock=Is,_e.navigateStacks=ua,_e.procedures=tn,_e.registry=Oi,_e.renderManagement=Xd,_e.serialization=gw,_e.setLocale=Xg,_e.setParentContainer=An,_e.svgResize=Mn,_e.thrasos=s0,_e.uiPosition=nl,_e.utils=Xt,_e.zelos=ii,_e.__namespace__=r,_e})}(j0)),j0.exports}var z0={exports:{}},Wx;function mk(){return Wx||(Wx=1,function(t,s){(function(r,i){t.exports=i()})(Co,function(){var r=r||{Msg:Object.create(null)};return r.Msg.ADD_COMMENT="Add Comment",r.Msg.ALT_KEY="Alt",r.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",r.Msg.CHANGE_VALUE_TITLE="Change value:",r.Msg.CHROME_OS="ChromeOS",r.Msg.CLEAN_UP="Clean up Blocks",r.Msg.CLOSE="Close",r.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",r.Msg.COLLAPSE_ALL="Collapse Blocks",r.Msg.COLLAPSE_BLOCK="Collapse Block",r.Msg.COLOUR_BLEND_COLOUR1="colour 1",r.Msg.COLOUR_BLEND_COLOUR2="colour 2",r.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",r.Msg.COLOUR_BLEND_RATIO="ratio",r.Msg.COLOUR_BLEND_TITLE="blend",r.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",r.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",r.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",r.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",r.Msg.COLOUR_RANDOM_TITLE="random colour",r.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",r.Msg.COLOUR_RGB_BLUE="blue",r.Msg.COLOUR_RGB_GREEN="green",r.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",r.Msg.COLOUR_RGB_RED="red",r.Msg.COLOUR_RGB_TITLE="colour with",r.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",r.Msg.COMMAND_KEY=" Command",r.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",r.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",r.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",r.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",r.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",r.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",r.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",r.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",r.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",r.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",r.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",r.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",r.Msg.CONTROLS_IF_MSG_ELSE="else",r.Msg.CONTROLS_IF_MSG_ELSEIF="else if",r.Msg.CONTROLS_IF_MSG_IF="if",r.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",r.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",r.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",r.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",r.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",r.Msg.CONTROLS_REPEAT_INPUT_DO="do",r.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",r.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",r.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",r.Msg.CONTROL_KEY="Ctrl",r.Msg.COPY_SHORTCUT="Copy",r.Msg.CUT_SHORTCUT="Cut",r.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",r.Msg.DELETE_BLOCK="Delete Block",r.Msg.DELETE_VARIABLE="Delete the '%1' variable",r.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",r.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",r.Msg.DIALOG_CANCEL="Cancel",r.Msg.DIALOG_OK="OK",r.Msg.DISABLE_BLOCK="Disable Block",r.Msg.DUPLICATE_BLOCK="Duplicate",r.Msg.DUPLICATE_COMMENT="Duplicate Comment",r.Msg.EDIT_BLOCK_CONTENTS="Edit Block contents",r.Msg.ENABLE_BLOCK="Enable Block",r.Msg.EXPAND_ALL="Expand Blocks",r.Msg.EXPAND_BLOCK="Expand Block",r.Msg.EXTERNAL_INPUTS="External Inputs",r.Msg.HELP="Help",r.Msg.HELP_PROMPT="Press %1 for help on keyboard controls",r.Msg.INLINE_INPUTS="Inline Inputs",r.Msg.KEYBOARD_NAV_CONSTRAINED_MOVE_HINT="Use the arrow keys to move, then %1 to accept the position",r.Msg.KEYBOARD_NAV_COPIED_HINT="Copied. Press %1 to paste.",r.Msg.KEYBOARD_NAV_CUT_HINT="Cut. Press %1 to paste.",r.Msg.KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT="Hold %1 and use arrow keys to move freely, then %2 to accept the position",r.Msg.LINUX="Linux",r.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",r.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",r.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",r.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",r.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",r.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",r.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",r.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",r.Msg.LISTS_GET_INDEX_FIRST="first",r.Msg.LISTS_GET_INDEX_FROM_END="# from end",r.Msg.LISTS_GET_INDEX_FROM_START="#",r.Msg.LISTS_GET_INDEX_GET="get",r.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",r.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",r.Msg.LISTS_GET_INDEX_LAST="last",r.Msg.LISTS_GET_INDEX_RANDOM="random",r.Msg.LISTS_GET_INDEX_REMOVE="remove",r.Msg.LISTS_GET_INDEX_TAIL="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",r.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",r.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",r.Msg.LISTS_GET_SUBLIST_END_LAST="to last",r.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",r.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",r.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",r.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",r.Msg.LISTS_GET_SUBLIST_TAIL="",r.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",r.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",r.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",r.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",r.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",r.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",r.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",r.Msg.LISTS_INLIST="in list",r.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",r.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",r.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",r.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",r.Msg.LISTS_LENGTH_TITLE="length of %1",r.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",r.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",r.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",r.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",r.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",r.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",r.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",r.Msg.LISTS_SET_INDEX_INPUT_TO="as",r.Msg.LISTS_SET_INDEX_INSERT="insert at",r.Msg.LISTS_SET_INDEX_SET="set",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",r.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",r.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",r.Msg.LISTS_SORT_ORDER_DESCENDING="descending",r.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",r.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",r.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",r.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",r.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",r.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",r.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",r.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",r.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",r.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",r.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",r.Msg.LOGIC_BOOLEAN_FALSE="false",r.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",r.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",r.Msg.LOGIC_BOOLEAN_TRUE="true",r.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",r.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",r.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",r.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",r.Msg.LOGIC_NEGATE_TITLE="not %1",r.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",r.Msg.LOGIC_NULL="null",r.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",r.Msg.LOGIC_NULL_TOOLTIP="Returns null.",r.Msg.LOGIC_OPERATION_AND="and",r.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",r.Msg.LOGIC_OPERATION_OR="or",r.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",r.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",r.Msg.LOGIC_TERNARY_CONDITION="test",r.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",r.Msg.LOGIC_TERNARY_IF_FALSE="if false",r.Msg.LOGIC_TERNARY_IF_TRUE="if true",r.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",r.Msg.MAC_OS="macOS",r.Msg.MATH_ADDITION_SYMBOL="+",r.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",r.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",r.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",r.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",r.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",r.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",r.Msg.MATH_CHANGE_TITLE="change %1 by %2",r.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",r.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",r.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",r.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",r.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",r.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",r.Msg.MATH_DIVISION_SYMBOL="",r.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",r.Msg.MATH_IS_EVEN="is even",r.Msg.MATH_IS_NEGATIVE="is negative",r.Msg.MATH_IS_ODD="is odd",r.Msg.MATH_IS_POSITIVE="is positive",r.Msg.MATH_IS_PRIME="is prime",r.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",r.Msg.MATH_IS_WHOLE="is whole",r.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",r.Msg.MATH_MODULO_TITLE="remainder of %1  %2",r.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",r.Msg.MATH_MULTIPLICATION_SYMBOL="",r.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",r.Msg.MATH_NUMBER_TOOLTIP="A number.",r.Msg.MATH_ONLIST_HELPURL="",r.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",r.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",r.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",r.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",r.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",r.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",r.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",r.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",r.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",r.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",r.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",r.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",r.Msg.MATH_POWER_SYMBOL="^",r.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",r.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",r.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",r.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",r.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",r.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",r.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",r.Msg.MATH_ROUND_OPERATOR_ROUND="round",r.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",r.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",r.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",r.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",r.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",r.Msg.MATH_SINGLE_OP_ROOT="square root",r.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",r.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",r.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",r.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",r.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",r.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",r.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",r.Msg.MATH_SUBTRACTION_SYMBOL="-",r.Msg.MATH_TRIG_ACOS="acos",r.Msg.MATH_TRIG_ASIN="asin",r.Msg.MATH_TRIG_ATAN="atan",r.Msg.MATH_TRIG_COS="cos",r.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",r.Msg.MATH_TRIG_SIN="sin",r.Msg.MATH_TRIG_TAN="tan",r.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",r.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",r.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",r.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",r.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",r.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",r.Msg.MOVE_BLOCK="Move Block",r.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",r.Msg.NEW_NUMBER_VARIABLE="Create number variable...",r.Msg.NEW_STRING_VARIABLE="Create string variable...",r.Msg.NEW_VARIABLE="Create variable...",r.Msg.NEW_VARIABLE_TITLE="New variable name:",r.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",r.Msg.OPTION_KEY=" Option",r.Msg.ORDINAL_NUMBER_SUFFIX="",r.Msg.PASTE_SHORTCUT="Paste",r.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",r.Msg.PROCEDURES_BEFORE_PARAMS="with:",r.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",r.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",r.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",r.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",r.Msg.PROCEDURES_CREATE_DO="Create '%1'",r.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",r.Msg.PROCEDURES_DEFNORETURN_DO="",r.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",r.Msg.PROCEDURES_DEFNORETURN_TITLE="to",r.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",r.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFRETURN_RETURN="return",r.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",r.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",r.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",r.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",r.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",r.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",r.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",r.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",r.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",r.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",r.Msg.REDO="Redo",r.Msg.REMOVE_COMMENT="Remove Comment",r.Msg.RENAME_VARIABLE="Rename variable...",r.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",r.Msg.SHORTCUTS_CODE_NAVIGATION="Code navigation",r.Msg.SHORTCUTS_EDITING="Editing",r.Msg.SHORTCUTS_GENERAL="General",r.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_APPEND_TITLE="to %1 append text %2",r.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",r.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",r.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",r.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",r.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",r.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",r.Msg.TEXT_CHARAT_FIRST="get first letter",r.Msg.TEXT_CHARAT_FROM_END="get letter # from end",r.Msg.TEXT_CHARAT_FROM_START="get letter #",r.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",r.Msg.TEXT_CHARAT_LAST="get last letter",r.Msg.TEXT_CHARAT_RANDOM="get random letter",r.Msg.TEXT_CHARAT_TAIL="",r.Msg.TEXT_CHARAT_TITLE="in text %1 %2",r.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",r.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",r.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",r.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",r.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",r.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",r.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",r.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",r.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",r.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",r.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",r.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",r.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",r.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",r.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",r.Msg.TEXT_GET_SUBSTRING_TAIL="",r.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",r.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",r.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",r.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",r.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",r.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",r.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",r.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",r.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",r.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",r.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",r.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",r.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_LENGTH_TITLE="length of %1",r.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",r.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",r.Msg.TEXT_PRINT_TITLE="print %1",r.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",r.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",r.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",r.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",r.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",r.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",r.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",r.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",r.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",r.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",r.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",r.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",r.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",r.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",r.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",r.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",r.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",r.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",r.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",r.Msg.TODAY="Today",r.Msg.UNDO="Undo",r.Msg.UNKNOWN="Unknown",r.Msg.UNNAMED_KEY="unnamed",r.Msg.VARIABLES_DEFAULT_NAME="item",r.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",r.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",r.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",r.Msg.VARIABLES_SET="set %1 to %2",r.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",r.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",r.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",r.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",r.Msg.WINDOWS="Windows",r.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",r.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",r.Msg.CONTROLS_FOREACH_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_FOR_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=r.Msg.CONTROLS_IF_MSG_ELSEIF,r.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=r.Msg.CONTROLS_IF_MSG_ELSE,r.Msg.CONTROLS_IF_IF_TITLE_IF=r.Msg.CONTROLS_IF_MSG_IF,r.Msg.CONTROLS_IF_MSG_THEN=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.LISTS_CREATE_WITH_ITEM_TITLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.MATH_CHANGE_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.PROCEDURES_DEFRETURN_COMMENT=r.Msg.PROCEDURES_DEFNORETURN_COMMENT,r.Msg.PROCEDURES_DEFRETURN_DO=r.Msg.PROCEDURES_DEFNORETURN_DO,r.Msg.PROCEDURES_DEFRETURN_PROCEDURE=r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,r.Msg.PROCEDURES_DEFRETURN_TITLE=r.Msg.PROCEDURES_DEFNORETURN_TITLE,r.Msg.TEXT_APPEND_VARIABLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.COLOUR_HUE="20",r.Msg.LISTS_HUE="260",r.Msg.LOGIC_HUE="210",r.Msg.LOOPS_HUE="120",r.Msg.MATH_HUE="230",r.Msg.PROCEDURES_HUE="290",r.Msg.TEXTS_HUE="160",r.Msg.VARIABLES_DYNAMIC_HUE="310",r.Msg.VARIABLES_HUE="330",r.Msg})}(z0)),z0.exports}var Y0={exports:{}},Xx;function $k(){return Xx||(Xx=1,function(t,s){(function(r,i){t.exports=i(MI())})(Co,function(r){var i=r.__namespace__,l=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),c={customContextMenu:function(I){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(ie={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:u(this)},le=this.getField("VAR").getText(),le={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",le),enabled:!0,callback:h(this)},I.unshift(ie),I.unshift(le));else{if(this.type==="variables_get_dynamic")var D="variables_set_dynamic",ie=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else D="variables_get_dynamic",ie=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var le=this.getField("VAR");D={type:D,fields:{VAR:le.saveState(!0)}},I.push({enabled:this.workspace.remainingCapacity()>0,text:ie.replace("%1",le.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,D)})}},onchange:function(I){I=this.getFieldValue("VAR"),I=i.getVariable$$module$build$src$core$variables(this.workspace,I),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(I.getType()):this.getInput("VALUE").connection.setCheck(I.getType())}},u=function(I){return function(){const D=I.workspace,ie=I.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(D,ie)}},h=function(I){return function(){const D=I.getField("VAR").getVariable();D&&i.deleteVariable$$module$build$src$core$variables(D.getWorkspace(),D,I)}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",c),i.defineBlocks$$module$build$src$core$common(l);var f={blocks:l},_=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),T={customContextMenu:function(I){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(ie={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:g(this)},le=this.getField("VAR").getText(),le={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",le),enabled:!0,callback:E(this)},I.unshift(ie),I.unshift(le));else{if(this.type==="variables_get")var D="variables_set",ie=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else D="variables_get",ie=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var le=this.getField("VAR");D={type:D,fields:{VAR:le.saveState(!0)}},I.push({enabled:this.workspace.remainingCapacity()>0,text:ie.replace("%1",le.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,D)})}}},g=function(I){return function(){const D=I.workspace,ie=I.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(D,ie)}},E=function(I){return function(){const D=I.getField("VAR").getVariable();D&&i.deleteVariable$$module$build$src$core$variables(D.getWorkspace(),D,I)}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",T),i.defineBlocks$$module$build$src$core$common(_);var S={blocks:_},R=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),L={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const I=D=>{const ie=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+D]});return ie.setValidator(function(le){const Be=this.getValue();le=le==="FROM_START"||le==="FROM_END",le!==(Be==="FROM_START"||Be==="FROM_END")&&this.getSourceBlock().updateAt_(D,le)}),ie};this.appendDummyInput("WHERE1_INPUT").appendField(I(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(I(2),"WHERE2"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");var D=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return I.setAttribute("at1",`${D}`),D=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,I.setAttribute("at2",`${D}`),I},domToMutation:function(I){const D=I.getAttribute("at1")==="true";I=I.getAttribute("at2")==="true",this.updateAt_(1,D),this.updateAt_(2,I)},updateAt_:function(I,D){this.removeInput("AT"+I),this.removeInput("ORDINAL"+I,!0),D?(this.appendValueInput("AT"+I).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+I).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+I),I===2&&i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),I===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};R.text_getSubstring=L,R.text_changeCase={init:function(){const I=[[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:I}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},R.text_trim={init:function(){const I=[[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:I}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},R.text_print={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var x={updateType_:function(I){this.outputConnection.setCheck(I==="NUMBER"?"Number":"String")},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");return I.setAttribute("type",this.getFieldValue("TYPE")),I},domToMutation:function(I){this.updateType_(I.getAttribute("type"))}};R.text_prompt_ext=Object.assign({},x,{init:function(){var I=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),I=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:I}),I.setValidator(D=>{this.updateType_(D)}),this.appendValueInput("TEXT").appendField(I,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),R.text_prompt=Object.assign({},x,{init:function(){this.mixin(v);var I=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),I=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:I}),I.setValidator(D=>{this.updateType_(D)}),this.appendDummyInput().appendField(I,"TYPE").appendField(this.newQuote_(!0)).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),R.text_count={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},R.text_replace={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},R.text_reverse={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var v={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(I){for(let D=0,ie;ie=this.inputList[D];D++)for(let le=0,Be;Be=ie.fieldRow[le];le++)if(I===Be.name){ie.insertFieldAt(le,this.newQuote_(!0)),ie.insertFieldAt(le+2,this.newQuote_(!1));return}console.warn('field named "'+I+'" not found in '+this.toDevString())},newQuote_:function(I){return I=this.RTL?!I:I,i.fromJson$$module$build$src$core$field_registry({type:"field_image",src:I?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:I?"":""})}},A=function(){this.mixin(v),this.quoteField_("TEXT")},m={itemCount_:0,mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");return I.setAttribute("items",`${this.itemCount_}`),I},domToMutation:function(I){this.itemCount_=parseInt(I.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(I){this.itemCount_=I.itemCount,this.updateShape_()},decompose:function(I){const D=I.newBlock("text_create_join_container");D.initSvg();let ie=D.getInput("STACK").connection;for(let le=0;le<this.itemCount_;le++){const Be=I.newBlock("text_create_join_item");Be.initSvg(),ie.connect(Be.previousConnection),ie=Be.nextConnection}return D},compose:function(I){var D=I.getInputTargetBlock("STACK");for(I=[];D;)D.isInsertionMarker()||I.push(D.valueConnection_),D=D.getNextBlock();for(D=0;D<this.itemCount_;D++){const ie=this.getInput("ADD"+D).connection.targetConnection;ie&&!I.includes(ie)&&ie.disconnect()}for(this.itemCount_=I.length,this.updateShape_(),D=0;D<this.itemCount_;D++){let ie;(ie=I[D])==null||ie.reconnect(this,"ADD"+D)}},saveConnections:function(I){I=I.getInputTargetBlock("STACK");let D=0;for(;I;){if(I.isInsertionMarker()){I=I.getNextBlock();continue}const ie=this.getInput("ADD"+D);I.valueConnection_=ie&&ie.connection.targetConnection,I=I.getNextBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var I=0;I<this.itemCount_;I++)if(!this.getInput("ADD"+I)){const D=this.appendValueInput("ADD"+I).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);I===0&&D.appendField(i.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(I=this.itemCount_;this.getInput("ADD"+I);I++)this.removeInput("ADD"+I)}},y=function(){this.mixin(v),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};i.register$$module$build$src$core$extensions("text_append_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var H=function(){this.setTooltip(()=>i.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},G={isAt_:!1,mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");return I.setAttribute("at",`${this.isAt_}`),I},domToMutation:function(I){I=I.getAttribute("at")!=="false",this.updateAt_(I)},updateAt_:function(I){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),I&&(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=I}},k=function(){this.getField("WHERE").setValidator(function(I){I=I==="FROM_START"||I==="FROM_END";const D=this.getSourceBlock();I!==D.isAt_&&D.updateAt_(I)}),this.updateAt_(!0),this.setTooltip(()=>{var I=this.getFieldValue("WHERE");let D=i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(I==="FROM_START"||I==="FROM_END")&&(I=I==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(D+="  "+I.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),D})};i.register$$module$build$src$core$extensions("text_indexOf_tooltip",H),i.register$$module$build$src$core$extensions("text_quotes",A),i.registerMixin$$module$build$src$core$extensions("quote_image_mixin",v),i.registerMutator$$module$build$src$core$extensions("text_join_mutator",m,y),i.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",G,k),i.defineBlocks$$module$build$src$core$common(R);var F={blocks:R},B={},re={setStatements_:function(I){this.hasStatements_!==I&&(I?(this.appendStatementInput("STACK").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=I)},updateParams_:function(){let I="";this.arguments_.length&&(I=i.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.disable$$module$build$src$core$events$utils();try{this.setFieldValue(I,"PARAMS")}finally{i.enable$$module$build$src$core$events$utils()}},mutationToDom:function(I){const D=i.createElement$$module$build$src$core$utils$xml("mutation");I&&D.setAttribute("name",this.getFieldValue("NAME"));for(let ie=0;ie<this.argumentVarModels_.length;ie++){const le=i.createElement$$module$build$src$core$utils$xml("arg"),Be=this.argumentVarModels_[ie];le.setAttribute("name",Be.getName()),le.setAttribute("varid",Be.getId()),I&&this.paramIds_&&le.setAttribute("paramId",this.paramIds_[ie]),D.appendChild(le)}return this.hasStatements_||D.setAttribute("statements","false"),D},domToMutation:function(I){this.arguments_=[],this.argumentVarModels_=[];for(let ie=0,le;le=I.childNodes[ie];ie++)if(le.nodeName.toLowerCase()==="arg"){var D=le;const Be=D.getAttribute("name");D=D.getAttribute("varid")||D.getAttribute("varId"),this.arguments_.push(Be),D=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,D,Be,""),D!==null?this.argumentVarModels_.push(D):console.log(`Failed to create a variable named "${Be}", ignoring.`)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(I.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const I=Object.create(null);if(this.argumentVarModels_.length){I.params=[];for(let D=0;D<this.argumentVarModels_.length;D++)I.params.push({name:this.argumentVarModels_[D].getName(),id:this.argumentVarModels_[D].getId()})}return this.hasStatements_||(I.hasStatements=!1),I},loadExtraState:function(I){if(this.arguments_=[],this.argumentVarModels_=[],I.params)for(let ie=0;ie<I.params.length;ie++){var D=I.params[ie];D=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,D.id,D.name,""),this.arguments_.push(D.getName()),this.argumentVarModels_.push(D)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(I.hasStatements!==!1)},decompose:function(I){const D=i.createElement$$module$build$src$core$utils$xml("block");D.setAttribute("type","procedures_mutatorcontainer");var ie=i.createElement$$module$build$src$core$utils$xml("statement");ie.setAttribute("name","STACK"),D.appendChild(ie);for(let Be=0;Be<this.arguments_.length;Be++){const Et=i.createElement$$module$build$src$core$utils$xml("block");Et.setAttribute("type","procedures_mutatorarg");var le=i.createElement$$module$build$src$core$utils$xml("field");le.setAttribute("name","NAME");const An=i.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Be]);le.appendChild(An),Et.appendChild(le),le=i.createElement$$module$build$src$core$utils$xml("next"),Et.appendChild(le),ie.appendChild(Et),ie=le}return I=i.domToBlock$$module$build$src$core$xml(D,I),this.type==="procedures_defreturn"?I.setFieldValue(this.hasStatements_,"STATEMENTS"):I.removeInput("STATEMENT_INPUT"),i.mutateCallers$$module$build$src$core$procedures(this),I},compose:function(I){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let D=I.getInputTargetBlock("STACK");for(;D&&!D.isInsertionMarker();){var ie=D.getFieldValue("NAME");this.arguments_.push(ie),ie=this.workspace.getVariable(ie,""),this.argumentVarModels_.push(ie),this.paramIds_.push(D.id),D=D.nextConnection&&D.nextConnection.targetBlock()}if(this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),I=I.getFieldValue("STATEMENTS"),I!==null&&(I=I==="TRUE",this.hasStatements_!==I))if(I){this.setStatements_(!0);var le;(le=this.statementConnection_)==null||le.reconnect(this,"STACK"),this.statementConnection_=null}else le=this.getInput("STACK").connection,(this.statementConnection_=le.targetConnection)&&(le=le.targetBlock(),le.unplug(),le.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(I,D){var ie=this.workspace.getVariableById(I);if(ie.getType()===""){ie=ie.getName(),D=this.workspace.getVariableById(D);var le=!1;for(let Be=0;Be<this.argumentVarModels_.length;Be++)this.argumentVarModels_[Be].getId()===I&&(this.arguments_[Be]=D.getName(),this.argumentVarModels_[Be]=D,le=!0);le&&(this.displayRenamedVar_(ie,D.getName()),i.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(I){const D=I.getName();let ie=!1,le;for(let Be=0;Be<this.argumentVarModels_.length;Be++)this.argumentVarModels_[Be].getId()===I.getId()&&(le=this.arguments_[Be],this.arguments_[Be]=D,ie=!0);ie&&(this.displayRenamedVar_(le,D),i.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(I,D){this.updateParams_();var ie=this.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(ie&&ie.bubbleIsVisible()){ie=ie.getWorkspace().getAllBlocks(!1);for(let le=0,Be;Be=ie[le];le++)Be.type==="procedures_mutatorarg"&&i.Names$$module$build$src$core$names.equals(I,Be.getFieldValue("NAME"))&&Be.setFieldValue(D,"NAME")}},customContextMenu:function(I){if(!this.isInFlyout){var D=this.getFieldValue("NAME"),ie={type:this.callType_,extraState:{name:D,params:this.arguments_}};if(I.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",D),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ie)}),!this.isCollapsed())for(D=0;D<this.argumentVarModels_.length;D++){ie=this.argumentVarModels_[D];const le={type:"variables_get",fields:{VAR:{name:ie.getName(),id:ie.getId(),type:ie.getType()}}};I.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ie.getName()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,le)})}}}};B.procedures_defnoreturn=Object.assign({},re,{init:function(){var I=i.findLegalName$$module$build$src$core$procedures("",this);I=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:I}),I.setValidator(i.rename$$module$build$src$core$procedures),I.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(I,"NAME").appendField("","PARAMS"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),B.procedures_defreturn=Object.assign({},re,{init:function(){var I=i.findLegalName$$module$build$src$core$procedures("",this);I=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:I}),I.setValidator(i.rename$$module$build$src$core$procedures),I.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(I,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT).appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var ne={init:function(){this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};B.procedures_mutatorcontainer=ne;var ee=class extends i.FieldTextInput$$module$build$src$core$field_textinput{constructor(){super(...arguments),this.editingInteractively=!1}showEditor_(I){super.showEditor_(I),this.editingInteractively=!0,this.editingVariable=void 0}onFinishEditing_(I){super.onFinishEditing_(I),this.editingInteractively=!1}},me={init:function(){const I=new ee(i.DEFAULT_ARG$$module$build$src$core$procedures,this.validator_);this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(I,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1},validator_:function(I){var D=this.getSourceBlock();const ie=D.workspace.getRootWorkspace();if(I=I.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!I)return null;const le=(D.workspace.targetWorkspace||D.workspace).getAllBlocks(!1),Be=I.toLowerCase();for(let Et=0;Et<le.length;Et++){if(le[Et].id===this.getSourceBlock().id)continue;const An=le[Et].getFieldValue("NAME");if(An&&An.toLowerCase()===Be)return null}return D.isInFlyout||((D=ie.getVariable(I,""))&&D.getName()!==I&&ie.renameVariableById(D.getId(),I),D||(this.editingInteractively?this.editingVariable?ie.renameVariableById(this.editingVariable.getId(),I):this.editingVariable=ie.createVariable(I,""):ie.createVariable(I,""))),I}};B.procedures_mutatorarg=me;var we="DISABLED_PROCEDURE_DEFINITION",Oe={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(I,D){i.Names$$module$build$src$core$names.equals(I,this.getProcedureCall())&&(this.setFieldValue(D,"NAME"),this.setTooltip((this.outputConnection?i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",D)))},setProcedureParameters_:function(I,D){var ie=i.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((ie=(ie=ie&&ie.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&ie.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),I.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=D;else{if(D.length!==I.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Be=0;Be<this.arguments_.length;Be++){var le=this.getInput("ARG"+Be);le&&(le=le.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Be]]=le,ie&&le&&!D.includes(this.quarkIds_[Be])&&(le.disconnect(),le.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(I),this.argumentVarModels_=[],I=0;I<this.arguments_.length;I++)ie=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[I],""),this.argumentVarModels_.push(ie);if(this.updateShape_(),this.quarkIds_=D){for(D=0;D<this.arguments_.length;D++)if(I=this.quarkIds_[D],I in this.quarkConnections_){let Be;(Be=this.quarkConnections_[I])!=null&&Be.reconnect(this,"ARG"+D)||delete this.quarkConnections_[I]}}}},updateShape_:function(){for(var I=0;I<this.arguments_.length;I++){var D=this.getField("ARGNAME"+I);if(D){i.disable$$module$build$src$core$events$utils();try{D.setValue(this.arguments_[I])}finally{i.enable$$module$build$src$core$events$utils()}}else D=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[I]}),this.appendValueInput("ARG"+I).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT).appendField(D,"ARGNAME"+I)}for(I=this.arguments_.length;this.getInput("ARG"+I);I++)this.removeInput("ARG"+I);(I=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||I.appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&I.removeField("WITH"))},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");I.setAttribute("name",this.getProcedureCall());for(let D=0;D<this.arguments_.length;D++){const ie=i.createElement$$module$build$src$core$utils$xml("arg");ie.setAttribute("name",this.arguments_[D]),I.appendChild(ie)}return I},domToMutation:function(I){var D=I.getAttribute("name");this.renameProcedure(this.getProcedureCall(),D),D=[];const ie=[];for(let le=0,Be;Be=I.childNodes[le];le++)Be.nodeName.toLowerCase()==="arg"&&(D.push(Be.getAttribute("name")),ie.push(Be.getAttribute("paramId")));this.setProcedureParameters_(D,ie)},saveExtraState:function(){const I=Object.create(null);return I.name=this.getProcedureCall(),this.arguments_.length&&(I.params=this.arguments_),I},loadExtraState:function(I){if(this.renameProcedure(this.getProcedureCall(),I.name),I=I.params){const D=[];D.length=I.length,D.fill(null),this.setProcedureParameters_(I,D)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(I){if(this.workspace&&!this.workspace.isFlyout&&I.recordUndo)if(I.type===i.BLOCK_CREATE$$module$build$src$core$events$events&&I.ids.includes(this.id)){var D=this.getProcedureCall(),ie=i.getDefinition$$module$build$src$core$procedures(D,this.workspace);if(!ie||ie.type===this.defType_&&JSON.stringify(ie.getVars())===JSON.stringify(this.arguments_)||(ie=null),ie)ie.isEnabled()||(this.setDisabledReason(!0,we),this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",D)));else{i.setGroup$$module$build$src$core$events$utils(I.group),I=i.createElement$$module$build$src$core$utils$xml("xml"),D=i.createElement$$module$build$src$core$utils$xml("block"),D.setAttribute("type",this.defType_),ie=this.getRelativeToSurfaceXY();var le=ie.y+i.config$$module$build$src$core$config.snapRadius*2;D.setAttribute("x",`${ie.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),D.setAttribute("y",`${le}`),ie=this.mutationToDom(),D.appendChild(ie),ie=i.createElement$$module$build$src$core$utils$xml("field"),ie.setAttribute("name","NAME"),le=this.getProcedureCall();const Be=i.findLegalName$$module$build$src$core$procedures(le,this);le!==Be&&this.renameProcedure(le,Be),ie.appendChild(i.createTextNode$$module$build$src$core$utils$xml(le)),D.appendChild(ie),I.appendChild(D),i.domToWorkspace$$module$build$src$core$xml(I,this.workspace),i.setGroup$$module$build$src$core$events$utils(!1)}}else I.type===i.BLOCK_DELETE$$module$build$src$core$events$events?(D=this.getProcedureCall(),i.getDefinition$$module$build$src$core$procedures(D,this.workspace)||(i.setGroup$$module$build$src$core$events$utils(I.group),this.dispose(!0),i.setGroup$$module$build$src$core$events$utils(!1))):I.type===i.BLOCK_CHANGE$$module$build$src$core$events$events&&I.element==="disabled"&&(D=this.getProcedureCall(),(le=i.getDefinition$$module$build$src$core$procedures(D,this.workspace))&&le.id===I.blockId&&((ie=i.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),i.setGroup$$module$build$src$core$events$utils(I.group),I=le.isEnabled(),this.setDisabledReason(!I,we),this.setWarningText(I?null:i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",D)),i.setGroup$$module$build$src$core$events$utils(ie)))},customContextMenu:function(I){if(this.workspace.isMovable()){var D=this.getProcedureCall(),ie=this.workspace;I.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const le=i.getDefinition$$module$build$src$core$procedures(D,ie);le&&(ie.centerOnBlock(le.id),i.getFocusManager$$module$build$src$core$focus_manager().focusNode(le))}})}}};B.procedures_callnoreturn=Object.assign({},Oe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),B.procedures_callreturn=Object.assign({},Oe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var ke="UNPARENTED_IFRETURN",ye={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");return I.setAttribute("value",String(Number(this.hasReturnValue_))),I},domToMutation:function(I){this.hasReturnValue_=I.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(I){if(!(this.workspace.isDragging&&this.workspace.isDragging()||I.type!==i.BLOCK_MOVE$$module$build$src$core$events$events&&I.type!==i.BLOCK_CREATE$$module$build$src$core$events$events)){I=!1;var D=this;do{if(this.FUNCTION_TYPES.includes(D.type)){I=!0;break}D=D.getSurroundParent()}while(D);if(I?(D.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):D.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{i.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!I,ke)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};B.procedures_ifreturn=ye,i.defineBlocks$$module$build$src$core$common(B);var Re={blocks:B},K=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),z={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.register$$module$build$src$core$extensions("math_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",z));var oe={mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation"),D=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return I.setAttribute("divisor_input",String(D)),I},domToMutation:function(I){I=I.getAttribute("divisor_input")==="true",this.updateShape_(I)},updateShape_:function(I){const D=this.getInput("DIVISOR");I?D||this.appendValueInput("DIVISOR").setCheck("Number"):D&&this.removeInput("DIVISOR")}},M=function(){this.getField("PROPERTY").setValidator(function(I){I=I==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(I)})};i.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",oe,M),i.register$$module$build$src$core$extensions("math_change_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Z={updateType_:function(I){I==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");return I.setAttribute("op",this.getFieldValue("OP")),I},domToMutation:function(I){if(I=I.getAttribute("op"),I===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(I)}},J=function(){this.getField("OP").setValidator(function(I){this.updateType_(I)}.bind(this))};i.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",Z,J),i.defineBlocks$$module$build$src$core$common(K);var q={blocks:K},he=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),xe={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",xe));var Pe={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.register$$module$build$src$core$extensions("controls_flow_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Pe));var be={customContextMenu:function(I){if(!this.isInFlyout){var D=this.getField("VAR"),ie=D.getVariable().getName();this.isCollapsed()||ie===null||(D={type:"variables_get",fields:{VAR:D.saveState(!0)}},I.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ie),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,D)}))}}};i.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",be),i.register$$module$build$src$core$extensions("controls_for_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.register$$module$build$src$core$extensions("controls_forEach_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var ce=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),et="CONTROL_FLOW_NOT_IN_LOOP",N={getSurroundLoop:function(){let I=this;do{if(ce.has(I.type))return I;I=I.getSurroundParent()}while(I);return null},onchange:function(I){const D=this.workspace;if(D.isDragging&&!D.isDragging()&&(I.type===i.BLOCK_MOVE$$module$build$src$core$events$events||I.type===i.BLOCK_CREATE$$module$build$src$core$events$events)&&(I=!!this.getSurroundLoop(),this.setWarningText(I?null:i.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{i.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!I,et)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}};i.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",N),i.defineBlocks$$module$build$src$core$common(he);var fe={blocks:he,loopTypes:ce},He=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),Me={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.register$$module$build$src$core$extensions("logic_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Me));var Ze={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const I=i.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&I.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&I.setAttribute("else","1"),I},domToMutation:function(I){this.elseifCount_=parseInt(I.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(I.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const I=Object.create(null);return this.elseifCount_&&(I.elseIfCount=this.elseifCount_),this.elseCount_&&(I.hasElse=!0),I},loadExtraState:function(I){this.elseifCount_=I.elseIfCount||0,this.elseCount_=I.hasElse?1:0,this.updateShape_()},decompose:function(I){const D=I.newBlock("controls_if_if");D.initSvg();let ie=D.nextConnection;for(let le=1;le<=this.elseifCount_;le++){const Be=I.newBlock("controls_if_elseif");Be.initSvg(),ie.connect(Be.previousConnection),ie=Be.nextConnection}return this.elseCount_&&(I=I.newBlock("controls_if_else"),I.initSvg(),ie.connect(I.previousConnection)),D},compose:function(I){I=I.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const D=[null],ie=[null];let le=null;for(;I;){if(!I.isInsertionMarker())switch(I.type){case"controls_if_elseif":this.elseifCount_++,D.push(I.valueConnection_),ie.push(I.statementConnection_);break;case"controls_if_else":this.elseCount_++,le=I.statementConnection_;break;default:throw TypeError("Unknown block type: "+I.type)}I=I.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(D,ie,le)},saveConnections:function(I){I=I.nextConnection.targetBlock();let D=1;for(;I;){if(!I.isInsertionMarker())switch(I.type){case"controls_if_elseif":var ie=this.getInput("IF"+D);const le=this.getInput("DO"+D);I.valueConnection_=ie&&ie.connection.targetConnection,I.statementConnection_=le&&le.connection.targetConnection,D++;break;case"controls_if_else":ie=this.getInput("ELSE"),I.statementConnection_=ie&&ie.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+I.type)}I=I.getNextBlock()}},rebuildShape_:function(){const I=[null],D=[null];let ie=null;this.getInput("ELSE")&&(ie=this.getInput("ELSE").connection.targetConnection);for(let le=1;this.getInput("IF"+le);le++){const Be=this.getInput("IF"+le),Et=this.getInput("DO"+le);I.push(Be.connection.targetConnection),D.push(Et.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(I,D,ie)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var I=1;this.getInput("IF"+I);I++)this.removeInput("IF"+I),this.removeInput("DO"+I);for(I=1;I<=this.elseifCount_;I++)this.appendValueInput("IF"+I).setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+I).appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(I,D,ie){for(let le=1;le<=this.elseifCount_;le++){let Be;(Be=I[le])==null||Be.reconnect(this,"IF"+le);let Et;(Et=D[le])==null||Et.reconnect(this,"DO"+le)}ie?.reconnect(this,"ELSE")}};i.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Ze,null,["controls_if_elseif","controls_if_else"]);var Ce=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};i.register$$module$build$src$core$extensions("controls_if_tooltip",Ce);var ut={onchange:function(I){this.prevBlocks_||(this.prevBlocks_=[null,null]);var D=this.getInputTargetBlock("A");const ie=this.getInputTargetBlock("B");D&&ie&&!this.workspace.connectionChecker.doTypeChecks(D.outputConnection,ie.outputConnection)&&(i.setGroup$$module$build$src$core$events$utils(I.group),I=this.prevBlocks_[0],I!==D&&(D.unplug(),!I||I.isDisposed()||I.isShadow()||this.getInput("A").connection.connect(I.outputConnection)),D=this.prevBlocks_[1],D!==ie&&(ie.unplug(),!D||D.isDisposed()||D.isShadow()||this.getInput("B").connection.connect(D.outputConnection)),this.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Bt=function(){this.mixin(ut)};i.register$$module$build$src$core$extensions("logic_compare",Bt);var tr={prevParentConnection_:null,onchange:function(I){const D=this.getInputTargetBlock("THEN"),ie=this.getInputTargetBlock("ELSE"),le=this.outputConnection.targetConnection;if((D||ie)&&le)for(let Be=0;Be<2;Be++){const Et=Be===1?D:ie;Et&&!Et.workspace.connectionChecker.doTypeChecks(Et.outputConnection,le)&&(i.setGroup$$module$build$src$core$events$utils(I.group),le===this.prevParentConnection_?(this.unplug(),le.getSourceBlock().bumpNeighbours()):(Et.unplug(),Et.bumpNeighbours()),i.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=le}};i.registerMixin$$module$build$src$core$extensions("logic_ternary",tr),i.defineBlocks$$module$build$src$core$common(He);var hr={blocks:He},wt=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),Zr={init:function(){this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");return I.setAttribute("items",String(this.itemCount_)),I},domToMutation:function(I){if(I=I.getAttribute("items"),!I)throw new TypeError("element did not have items");this.itemCount_=parseInt(I,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(I){this.itemCount_=I.itemCount,this.updateShape_()},decompose:function(I){const D=I.newBlock("lists_create_with_container");D.initSvg();let ie=D.getInput("STACK").connection;for(let le=0;le<this.itemCount_;le++){const Be=I.newBlock("lists_create_with_item");if(Be.initSvg(),!Be.previousConnection)throw Error("itemBlock has no previousConnection");ie.connect(Be.previousConnection),ie=Be.nextConnection}return D},compose:function(I){var D=I.getInputTargetBlock("STACK");for(I=[];D;)D.isInsertionMarker()||I.push(D.valueConnection_),D=D.getNextBlock();for(D=0;D<this.itemCount_;D++){const ie=this.getInput("ADD"+D).connection.targetConnection;ie&&!I.includes(ie)&&ie.disconnect()}for(this.itemCount_=I.length,this.updateShape_(),D=0;D<this.itemCount_;D++){let ie;(ie=I[D])==null||ie.reconnect(this,"ADD"+D)}},saveConnections:function(I){I=I.getInputTargetBlock("STACK");let D=0;for(;I;){if(I.isInsertionMarker()){I=I.getNextBlock();continue}const ie=this.getInput("ADD"+D);let le;I.valueConnection_=(le=ie)==null?void 0:le.connection.targetConnection,I=I.getNextBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var I=0;I<this.itemCount_;I++)if(!this.getInput("ADD"+I)){const D=this.appendValueInput("ADD"+I).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);I===0&&D.appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(I=this.itemCount_;this.getInput("ADD"+I);I++)this.removeInput("ADD"+I)}};wt.lists_create_with=Zr;var Wt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};wt.lists_create_with_container=Wt;var te={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};wt.lists_create_with_item=te;var dr={init:function(){var I=[[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),I=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:I}),!I)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(I,"END"),this.setInputsInline(!0),this.setTooltip(()=>i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};wt.lists_indexOf=dr;var Tn={init:function(){var I=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),I=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:I}),I.setValidator(function(D){D=D==="REMOVE",this.getSourceBlock().updateStatement_(D)}),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(I,"MODE").appendField("","SPACE"),I=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),I.setValidator(function(D){const ie=this.getValue();D=D==="FROM_START"||D==="FROM_END",D!==(ie==="FROM_START"||ie==="FROM_END")&&this.getSourceBlock().updateAt_(D)}),this.appendDummyInput().appendField(I,"WHERE"),this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const D=this.getFieldValue("MODE"),ie=this.getFieldValue("WHERE");let le="";switch(D+" "+ie){case"GET FROM_START":case"GET FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(ie==="FROM_START"||ie==="FROM_END")&&(le+="  "+(ie==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),le})},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");I.setAttribute("statement",String(!this.outputConnection));const D=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return I.setAttribute("at",String(D)),I},domToMutation:function(I){const D=I.getAttribute("statement")==="true";this.updateStatement_(D),I=I.getAttribute("at")!=="false",this.updateAt_(I)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(I){I.isStatement?this.updateStatement_(!0):typeof I=="string"&&this.domToMutation(i.textToDom$$module$build$src$core$utils$xml(I))},updateStatement_:function(I){I!==!this.outputConnection&&(this.unplug(!0,!0),I?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(I){this.removeInput("AT"),this.removeInput("ORDINAL",!0),I?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};wt.lists_getIndex=Tn;var ct={init:function(){var I=[[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),I=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:I}),this.appendDummyInput().appendField(I,"MODE").appendField("","SPACE"),I=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),I.setValidator(function(D){const ie=this.getValue();D=D==="FROM_START"||D==="FROM_END",D!==(ie==="FROM_START"||ie==="FROM_END")&&this.getSourceBlock().updateAt_(D)}),this.appendDummyInput().appendField(I,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const D=this.getFieldValue("MODE"),ie=this.getFieldValue("WHERE");let le="";switch(D+" "+ie){case"SET FROM_START":case"SET FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(ie==="FROM_START"||ie==="FROM_END")&&(le+="  "+i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),le})},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation"),D=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return I.setAttribute("at",String(D)),I},domToMutation:function(I){I=I.getAttribute("at")!=="false",this.updateAt_(I)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(I){this.removeInput("AT"),this.removeInput("ORDINAL",!0),I?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};wt.lists_setIndex=ct;var Ot={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const I=D=>{const ie=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+D]});return ie.setValidator(function(le){const Be=this.getValue();le=le==="FROM_START"||le==="FROM_END",le!==(Be==="FROM_START"||Be==="FROM_END")&&this.getSourceBlock().updateAt_(D,le)}),ie};this.appendDummyInput("WHERE1_INPUT").appendField(I(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(I(2),"WHERE2"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");var D=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return I.setAttribute("at1",String(D)),D=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,I.setAttribute("at2",String(D)),I},domToMutation:function(I){const D=I.getAttribute("at1")==="true";I=I.getAttribute("at2")==="true",this.updateAt_(1,D),this.updateAt_(2,I)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(I,D){this.removeInput("AT"+I),this.removeInput("ORDINAL"+I,!0),D?(this.appendValueInput("AT"+I).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+I).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+I),I===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};wt.lists_getSublist=Ot,wt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},wt.lists_split={init:function(){const I=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!I)throw Error("field_dropdown not found");I.setValidator(D=>{this.updateType_(D)}),this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(I,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const D=this.getFieldValue("MODE");if(D==="SPLIT")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(D==="JOIN")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+D)})},updateType_:function(I){if(this.getFieldValue("MODE")!==I){const D=this.getInput("INPUT").connection;D.setShadowDom(null);const ie=D.targetBlock();ie&&(D.disconnect(),ie.isShadow()?ie.dispose(!1):this.bumpNeighbours())}I==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const I=i.createElement$$module$build$src$core$utils$xml("mutation");return I.setAttribute("mode",this.getFieldValue("MODE")),I},domToMutation:function(I){this.updateType_(I.getAttribute("mode"))},saveExtraState:function(){return{mode:this.getFieldValue("MODE")}},loadExtraState:function(I){this.updateType_(I.mode)}},i.defineBlocks$$module$build$src$core$common(wt);var Qe={blocks:wt},ot=Object.assign({},wt,He,he,K,B,R,_,l),Mt={blocks:ot,lists:Qe,logic:hr,loops:fe,math:q,procedures:Re,texts:F,variables:S,variablesDynamic:f};return Mt.__namespace__=i,Mt})}(Y0)),Y0.exports}(function(t,s){(function(r,i){t.exports=i(MI(),mk(),$k())})(Co,function(r,i,l){return r.setLocale(i),r})})(Ek);var UW=Ek.exports;const HW=yh(UW),{Block:Yne,BlockFlyoutInflater:Kne,BlockNavigationPolicy:Jne,BlockSvg:Ik,Blocks:zt,ButtonFlyoutInflater:qne,COLLAPSED_FIELD_NAME:Zne,COLLAPSED_INPUT_NAME:Qne,COLLAPSE_CHARS:ese,CodeGenerator:tse,CollapsibleToolboxCategory:rse,ComponentManager:nse,Connection:sse,ConnectionChecker:ise,ConnectionDB:ose,ConnectionNavigationPolicy:lse,ConnectionType:ase,ContextMenu:cse,ContextMenuItems:use,ContextMenuRegistry:hse,Css:dse,DELETE_VARIABLE_ID:fse,DeleteArea:_se,DragTarget:Tse,DropDownDiv:pse,Events:kt,Extensions:Dr,Field:gse,FieldCheckbox:Ese,FieldDropdown:K0,FieldImage:mse,FieldLabel:GW,FieldLabelSerializable:Fl,FieldNavigationPolicy:$se,FieldNumber:Ise,FieldTextInput:Mi,FieldVariable:Ose,Flyout:Sse,FlyoutButton:Rse,FlyoutButtonNavigationPolicy:Lse,FlyoutItem:Ase,FlyoutMetricsManager:vse,FlyoutNavigationPolicy:Cse,FlyoutNavigator:xse,FlyoutSeparator:Nse,FlyoutSeparatorNavigationPolicy:bse,FocusManager:yse,FocusableTreeTraverser:kse,Generator:wse,Gesture:Mse,Grid:Dse,HorizontalFlyout:Pse,INPUT_VALUE:Fse,Input:Bse,InsertionMarkerPreviewer:Use,KeyboardNavigationController:Hse,LabelFlyoutInflater:Gse,LineCursor:Vse,Marker:Wse,MarkerManager:Xse,Menu:jse,MenuItem:zse,MetricsManager:Yse,Msg:Cn,NEXT_STATEMENT:Kse,Names:Jse,Navigator:qse,OPPOSITE_TYPE:Zse,OUTPUT_VALUE:Qse,Options:eie,PREVIOUS_STATEMENT:tie,PROCEDURE_CATEGORY_NAME:rie,Procedures:nie,RENAME_VARIABLE_ID:sie,RenderedConnection:iie,Scrollbar:oie,ScrollbarPair:lie,SeparatorFlyoutInflater:aie,ShortcutItems:cie,ShortcutRegistry:uie,TOOLBOX_AT_BOTTOM:hie,TOOLBOX_AT_LEFT:die,TOOLBOX_AT_RIGHT:fie,TOOLBOX_AT_TOP:_ie,Theme:VW,ThemeManager:Tie,Themes:WW,Toast:pie,Toolbox:gie,ToolboxCategory:Eie,ToolboxItem:mie,ToolboxSeparator:$ie,Tooltip:Iie,Touch:Oie,Trashcan:Sie,UnattachedFieldError:Rie,VARIABLE_CATEGORY_NAME:Lie,VARIABLE_DYNAMIC_CATEGORY_NAME:Aie,VERSION:vie,VariableMap:Cie,VariableModel:xie,Variables:Nie,VariablesDynamic:bie,VerticalFlyout:yie,WidgetDiv:kie,Workspace:wie,WorkspaceAudio:Mie,WorkspaceDragger:Die,WorkspaceNavigationPolicy:Pie,WorkspaceSvg:Fie,Xml:jx,ZoomControls:Bie,blockAnimations:Uie,blockRendering:Hie,browserEvents:Gie,bubbles:Vie,bumpObjects:Wie,clipboard:Xie,comments:jie,common:zie,config:Yie,constants:Kie,defineBlocksWithJsonArray:l$,dialog:Jie,dragging:qie,fieldRegistry:Zie,geras:Qie,getFocusManager:eoe,getMainWorkspace:toe,getSelected:roe,hasBubble:noe,hideChaff:zx,icons:soe,inject:XW,inputs:a$,isCopyable:ioe,isDeletable:ooe,isDraggable:loe,isIcon:aoe,isObservable:coe,isPaster:uoe,isRenderedElement:hoe,isSelectable:doe,isSerializable:foe,isVariableBackedParameterModel:_oe,keyboardNavigationController:Toe,layers:poe,navigateBlock:goe,navigateStacks:Eoe,procedures:moe,registry:$oe,renderManagement:Ioe,serialization:Ooe,setLocale:Yx,setParentContainer:Soe,svgResize:Roe,thrasos:Loe,uiPosition:Aoe,utils:qa,zelos:voe}=HW;var jW=$k();const zW=yh(jW),{blocks:Coe,lists:xoe,logic:Noe,loops:boe,math:yoe,procedures:koe,texts:woe,variables:Moe,variablesDynamic:Doe}=zW;var Ok={exports:{}};(function(t,s){(function(r,i){t.exports=i()})(Co,function(){var r=r||{Msg:Object.create(null)};return r.Msg.ADD_COMMENT="",r.Msg.ALT_KEY="Alt",r.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE=" '%1'  '%2' ",r.Msg.CHANGE_VALUE_TITLE="",r.Msg.CHROME_OS="ChromeOS",r.Msg.CLEAN_UP="",r.Msg.CLOSE="Close",r.Msg.COLLAPSED_WARNINGS_WARNING="",r.Msg.COLLAPSE_ALL="",r.Msg.COLLAPSE_BLOCK="",r.Msg.COLOUR_BLEND_COLOUR1=" 1",r.Msg.COLOUR_BLEND_COLOUR2=" 2",r.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",r.Msg.COLOUR_BLEND_RATIO="",r.Msg.COLOUR_BLEND_TITLE="",r.Msg.COLOUR_BLEND_TOOLTIP="20.01.0",r.Msg.COLOUR_PICKER_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.COLOUR_PICKER_TOOLTIP="",r.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",r.Msg.COLOUR_RANDOM_TITLE="",r.Msg.COLOUR_RANDOM_TOOLTIP="",r.Msg.COLOUR_RGB_BLUE="",r.Msg.COLOUR_RGB_GREEN="",r.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",r.Msg.COLOUR_RGB_RED="",r.Msg.COLOUR_RGB_TITLE=":",r.Msg.COLOUR_RGB_TOOLTIP=" 0  100 ",r.Msg.COMMAND_KEY=" Command",r.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="",r.Msg.CONTROLS_FLOW_STATEMENTS_WARNING=": ",r.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",r.Msg.CONTROLS_FOREACH_TITLE="%2%1",r.Msg.CONTROLS_FOREACH_TOOLTIP="'%1'",r.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",r.Msg.CONTROLS_FOR_TITLE="%1  %2  %3  %4 ",r.Msg.CONTROLS_FOR_TOOLTIP=" '%1' ",r.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="",r.Msg.CONTROLS_IF_ELSE_TOOLTIP="If",r.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",r.Msg.CONTROLS_IF_IF_TOOLTIP="",r.Msg.CONTROLS_IF_MSG_ELSE="",r.Msg.CONTROLS_IF_MSG_ELSEIF="",r.Msg.CONTROLS_IF_MSG_IF="",r.Msg.CONTROLS_IF_TOOLTIP_1=" true ",r.Msg.CONTROLS_IF_TOOLTIP_2=" true 2",r.Msg.CONTROLS_IF_TOOLTIP_3=" true 2 true 2",r.Msg.CONTROLS_IF_TOOLTIP_4=" true 2 true 2 true ",r.Msg.CONTROLS_REPEAT_HELPURL="https://ja.wikipedia.org/wiki/for",r.Msg.CONTROLS_REPEAT_INPUT_DO="",r.Msg.CONTROLS_REPEAT_TITLE="%1 ",r.Msg.CONTROLS_REPEAT_TOOLTIP="",r.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="false",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="true",r.Msg.CONTROL_KEY="Ctrl",r.Msg.COPY_SHORTCUT="Copy",r.Msg.CUT_SHORTCUT="Cut",r.Msg.DELETE_ALL_BLOCKS="%1",r.Msg.DELETE_BLOCK="",r.Msg.DELETE_VARIABLE=" '%1' ",r.Msg.DELETE_VARIABLE_CONFIRMATION="%1 '%2' ",r.Msg.DELETE_X_BLOCKS="%1",r.Msg.DIALOG_CANCEL="",r.Msg.DIALOG_OK="OK",r.Msg.DISABLE_BLOCK="",r.Msg.DUPLICATE_BLOCK="",r.Msg.DUPLICATE_COMMENT="",r.Msg.EDIT_BLOCK_CONTENTS="Edit Block contents",r.Msg.ENABLE_BLOCK="",r.Msg.EXPAND_ALL="",r.Msg.EXPAND_BLOCK="",r.Msg.EXTERNAL_INPUTS="",r.Msg.HELP="",r.Msg.HELP_PROMPT="Press %1 for help on keyboard controls",r.Msg.INLINE_INPUTS="",r.Msg.KEYBOARD_NAV_CONSTRAINED_MOVE_HINT="Use the arrow keys to move, then %1 to accept the position",r.Msg.KEYBOARD_NAV_COPIED_HINT="Copied. Press %1 to paste.",r.Msg.KEYBOARD_NAV_CUT_HINT="Cut. Press %1 to paste.",r.Msg.KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT="Hold %1 and use arrow keys to move freely, then %2 to accept the position",r.Msg.LINUX="Linux",r.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",r.Msg.LISTS_CREATE_EMPTY_TITLE="",r.Msg.LISTS_CREATE_EMPTY_TOOLTIP="",r.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="",r.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="",r.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_CREATE_WITH_INPUT_WITH="",r.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="",r.Msg.LISTS_CREATE_WITH_TOOLTIP="",r.Msg.LISTS_GET_INDEX_FIRST="",r.Msg.LISTS_GET_INDEX_FROM_END="",r.Msg.LISTS_GET_INDEX_FROM_START="#",r.Msg.LISTS_GET_INDEX_GET="",r.Msg.LISTS_GET_INDEX_GET_REMOVE="",r.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",r.Msg.LISTS_GET_INDEX_LAST="",r.Msg.LISTS_GET_INDEX_RANDOM="",r.Msg.LISTS_GET_INDEX_REMOVE="",r.Msg.LISTS_GET_INDEX_TAIL="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="  ",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="",r.Msg.LISTS_GET_SUBLIST_END_FROM_END="",r.Msg.LISTS_GET_SUBLIST_END_FROM_START="",r.Msg.LISTS_GET_SUBLIST_END_LAST="",r.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",r.Msg.LISTS_GET_SUBLIST_START_FIRST="",r.Msg.LISTS_GET_SUBLIST_START_FROM_END=" #",r.Msg.LISTS_GET_SUBLIST_START_FROM_START="# ",r.Msg.LISTS_GET_SUBLIST_TAIL="",r.Msg.LISTS_GET_SUBLIST_TOOLTIP="",r.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 ",r.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 ",r.Msg.LISTS_INDEX_OF_FIRST="",r.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",r.Msg.LISTS_INDEX_OF_LAST="",r.Msg.LISTS_INDEX_OF_TOOLTIP="/ %1 ",r.Msg.LISTS_INLIST="",r.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",r.Msg.LISTS_ISEMPTY_TITLE="%1",r.Msg.LISTS_ISEMPTY_TOOLTIP="true ",r.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",r.Msg.LISTS_LENGTH_TITLE="%1",r.Msg.LISTS_LENGTH_TOOLTIP="",r.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_REPEAT_TITLE="%1%2",r.Msg.LISTS_REPEAT_TOOLTIP="",r.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",r.Msg.LISTS_REVERSE_MESSAGE0="%1",r.Msg.LISTS_REVERSE_TOOLTIP="",r.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",r.Msg.LISTS_SET_INDEX_INPUT_TO="",r.Msg.LISTS_SET_INDEX_INSERT="",r.Msg.LISTS_SET_INDEX_SET="",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="",r.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",r.Msg.LISTS_SORT_ORDER_ASCENDING="",r.Msg.LISTS_SORT_ORDER_DESCENDING="",r.Msg.LISTS_SORT_TITLE="%1 ( %2 )  %3 ",r.Msg.LISTS_SORT_TOOLTIP="",r.Msg.LISTS_SORT_TYPE_IGNORECASE="",r.Msg.LISTS_SORT_TYPE_NUMERIC="",r.Msg.LISTS_SORT_TYPE_TEXT="",r.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",r.Msg.LISTS_SPLIT_LIST_FROM_TEXT="",r.Msg.LISTS_SPLIT_TEXT_FROM_LIST="",r.Msg.LISTS_SPLIT_TOOLTIP_JOIN="",r.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="",r.Msg.LISTS_SPLIT_WITH_DELIMITER="",r.Msg.LOGIC_BOOLEAN_FALSE="false",r.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",r.Msg.LOGIC_BOOLEAN_TOOLTIP="true  false ",r.Msg.LOGIC_BOOLEAN_TRUE="true",r.Msg.LOGIC_COMPARE_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.LOGIC_COMPARE_TOOLTIP_EQ=" true ",r.Msg.LOGIC_COMPARE_TOOLTIP_GT=" 2  true ",r.Msg.LOGIC_COMPARE_TOOLTIP_GTE=" 2  true ",r.Msg.LOGIC_COMPARE_TOOLTIP_LT=" 2  true ",r.Msg.LOGIC_COMPARE_TOOLTIP_LTE=" 2  true ",r.Msg.LOGIC_COMPARE_TOOLTIP_NEQ=" true ",r.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",r.Msg.LOGIC_NEGATE_TITLE="%1",r.Msg.LOGIC_NEGATE_TOOLTIP=" false true  true  false ",r.Msg.LOGIC_NULL="null",r.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",r.Msg.LOGIC_NULL_TOOLTIP="null ",r.Msg.LOGIC_OPERATION_AND="",r.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",r.Msg.LOGIC_OPERATION_OR="",r.Msg.LOGIC_OPERATION_TOOLTIP_AND=" true  true ",r.Msg.LOGIC_OPERATION_TOOLTIP_OR=" 1  true  true ",r.Msg.LOGIC_TERNARY_CONDITION="",r.Msg.LOGIC_TERNARY_HELPURL="https://ja.wikipedia.org/wiki/%3F:",r.Msg.LOGIC_TERNARY_IF_FALSE="false ",r.Msg.LOGIC_TERNARY_IF_TRUE="true ",r.Msg.LOGIC_TERNARY_TOOLTIP="''  true 'true'  'false' ",r.Msg.MAC_OS="macOS",r.Msg.MATH_ADDITION_SYMBOL="+",r.Msg.MATH_ARITHMETIC_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="2 ",r.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="2 ",r.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="2 ",r.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="2 ",r.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="2 ",r.Msg.MATH_ATAN2_HELPURL="https://ja.wikipedia.org/wiki/Atan2",r.Msg.MATH_ATAN2_TITLE="X:%1 Y:%2atan2",r.Msg.MATH_ATAN2_TOOLTIP=" (X, Y)  -180 180",r.Msg.MATH_CHANGE_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_CHANGE_TITLE="%1  %2 ",r.Msg.MATH_CHANGE_TOOLTIP="'%1'",r.Msg.MATH_CONSTANT_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_CONSTANT_TOOLTIP=":  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  ().",r.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",r.Msg.MATH_CONSTRAIN_TITLE="%1  %2  %3 ",r.Msg.MATH_CONSTRAIN_TOOLTIP="",r.Msg.MATH_DIVISION_SYMBOL="",r.Msg.MATH_IS_DIVISIBLE_BY="",r.Msg.MATH_IS_EVEN="",r.Msg.MATH_IS_NEGATIVE="",r.Msg.MATH_IS_ODD="",r.Msg.MATH_IS_POSITIVE="",r.Msg.MATH_IS_PRIME="",r.Msg.MATH_IS_TOOLTIP="true  false ",r.Msg.MATH_IS_WHOLE="",r.Msg.MATH_MODULO_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_MODULO_TITLE="%1%2",r.Msg.MATH_MODULO_TOOLTIP="2",r.Msg.MATH_MULTIPLICATION_SYMBOL="",r.Msg.MATH_NUMBER_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_NUMBER_TOOLTIP="",r.Msg.MATH_ONLIST_HELPURL="",r.Msg.MATH_ONLIST_OPERATOR_AVERAGE="",r.Msg.MATH_ONLIST_OPERATOR_MAX="",r.Msg.MATH_ONLIST_OPERATOR_MEDIAN="",r.Msg.MATH_ONLIST_OPERATOR_MIN="",r.Msg.MATH_ONLIST_OPERATOR_MODE="",r.Msg.MATH_ONLIST_OPERATOR_RANDOM="",r.Msg.MATH_ONLIST_OPERATOR_STD_DEV="",r.Msg.MATH_ONLIST_OPERATOR_SUM="",r.Msg.MATH_ONLIST_TOOLTIP_AVERAGE=" () ",r.Msg.MATH_ONLIST_TOOLTIP_MAX="",r.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="",r.Msg.MATH_ONLIST_TOOLTIP_MIN="",r.Msg.MATH_ONLIST_TOOLTIP_MODE="",r.Msg.MATH_ONLIST_TOOLTIP_RANDOM="",r.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="",r.Msg.MATH_ONLIST_TOOLTIP_SUM="",r.Msg.MATH_POWER_SYMBOL="^",r.Msg.MATH_RANDOM_FLOAT_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="1",r.Msg.MATH_RANDOM_FLOAT_TOOLTIP="0.01.0",r.Msg.MATH_RANDOM_INT_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_RANDOM_INT_TITLE="%1%2",r.Msg.MATH_RANDOM_INT_TOOLTIP="",r.Msg.MATH_ROUND_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_ROUND_OPERATOR_ROUND="",r.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="",r.Msg.MATH_ROUND_OPERATOR_ROUNDUP="",r.Msg.MATH_ROUND_TOOLTIP="",r.Msg.MATH_SINGLE_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_SINGLE_OP_ABSOLUTE="",r.Msg.MATH_SINGLE_OP_ROOT="",r.Msg.MATH_SINGLE_TOOLTIP_ABS="",r.Msg.MATH_SINGLE_TOOLTIP_EXP="e",r.Msg.MATH_SINGLE_TOOLTIP_LN="",r.Msg.MATH_SINGLE_TOOLTIP_LOG10="10",r.Msg.MATH_SINGLE_TOOLTIP_NEG="",r.Msg.MATH_SINGLE_TOOLTIP_POW10="10",r.Msg.MATH_SINGLE_TOOLTIP_ROOT="",r.Msg.MATH_SUBTRACTION_SYMBOL="-",r.Msg.MATH_TRIG_ACOS="acos",r.Msg.MATH_TRIG_ASIN="asin",r.Msg.MATH_TRIG_ATAN="atan",r.Msg.MATH_TRIG_COS="cos",r.Msg.MATH_TRIG_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_TRIG_SIN="sin",r.Msg.MATH_TRIG_TAN="tan",r.Msg.MATH_TRIG_TOOLTIP_ACOS="arccosin",r.Msg.MATH_TRIG_TOOLTIP_ASIN="arcsin",r.Msg.MATH_TRIG_TOOLTIP_ATAN="arctan",r.Msg.MATH_TRIG_TOOLTIP_COS="cosin",r.Msg.MATH_TRIG_TOOLTIP_SIN="sin",r.Msg.MATH_TRIG_TOOLTIP_TAN="tan",r.Msg.MOVE_BLOCK="Move Block",r.Msg.NEW_COLOUR_VARIABLE="...",r.Msg.NEW_NUMBER_VARIABLE="...",r.Msg.NEW_STRING_VARIABLE="...",r.Msg.NEW_VARIABLE="",r.Msg.NEW_VARIABLE_TITLE=":",r.Msg.NEW_VARIABLE_TYPE_TITLE=":",r.Msg.OPTION_KEY=" Option",r.Msg.ORDINAL_NUMBER_SUFFIX="",r.Msg.PASTE_SHORTCUT="Paste",r.Msg.PROCEDURES_ALLOW_STATEMENTS="",r.Msg.PROCEDURES_BEFORE_PARAMS="",r.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.PROCEDURES_CALLNORETURN_TOOLTIP=" '%1' ",r.Msg.PROCEDURES_CALLRETURN_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.PROCEDURES_CALLRETURN_TOOLTIP=" '%1' ",r.Msg.PROCEDURES_CALL_BEFORE_PARAMS="",r.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING=" '%1' ",r.Msg.PROCEDURES_CREATE_DO="'%1' ",r.Msg.PROCEDURES_DEFNORETURN_COMMENT="",r.Msg.PROCEDURES_DEFNORETURN_DO="",r.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="",r.Msg.PROCEDURES_DEFNORETURN_TITLE="",r.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="",r.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFRETURN_RETURN="",r.Msg.PROCEDURES_DEFRETURN_TOOLTIP="",r.Msg.PROCEDURES_DEF_DUPLICATE_WARNING=": ",r.Msg.PROCEDURES_HIGHLIGHT_DEF="",r.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",r.Msg.PROCEDURES_IFRETURN_TOOLTIP="1 true 2",r.Msg.PROCEDURES_IFRETURN_WARNING=": ",r.Msg.PROCEDURES_MUTATORARG_TITLE=":",r.Msg.PROCEDURES_MUTATORARG_TOOLTIP="",r.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="",r.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="",r.Msg.REDO="",r.Msg.REMOVE_COMMENT="",r.Msg.RENAME_VARIABLE="",r.Msg.RENAME_VARIABLE_TITLE="%1",r.Msg.SHORTCUTS_CODE_NAVIGATION="Code navigation",r.Msg.SHORTCUTS_EDITING="Editing",r.Msg.SHORTCUTS_GENERAL="General",r.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_APPEND_TITLE=" %1  %2",r.Msg.TEXT_APPEND_TOOLTIP=" '%1' ",r.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",r.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="",r.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE=" ",r.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="",r.Msg.TEXT_CHANGECASE_TOOLTIP="",r.Msg.TEXT_CHARAT_FIRST="",r.Msg.TEXT_CHARAT_FROM_END="",r.Msg.TEXT_CHARAT_FROM_START="",r.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",r.Msg.TEXT_CHARAT_LAST="",r.Msg.TEXT_CHARAT_RANDOM="",r.Msg.TEXT_CHARAT_TAIL="",r.Msg.TEXT_CHARAT_TITLE=" %1 %2",r.Msg.TEXT_CHARAT_TOOLTIP="",r.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",r.Msg.TEXT_COUNT_MESSAGE0="%2%1",r.Msg.TEXT_COUNT_TOOLTIP="",r.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="",r.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="",r.Msg.TEXT_CREATE_JOIN_TOOLTIP="",r.Msg.TEXT_GET_SUBSTRING_END_FROM_END="",r.Msg.TEXT_GET_SUBSTRING_END_FROM_START="",r.Msg.TEXT_GET_SUBSTRING_END_LAST="",r.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",r.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="",r.Msg.TEXT_GET_SUBSTRING_START_FIRST="",r.Msg.TEXT_GET_SUBSTRING_START_FROM_END="",r.Msg.TEXT_GET_SUBSTRING_START_FROM_START="",r.Msg.TEXT_GET_SUBSTRING_TAIL="",r.Msg.TEXT_GET_SUBSTRING_TOOLTIP="",r.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",r.Msg.TEXT_INDEXOF_OPERATOR_FIRST="",r.Msg.TEXT_INDEXOF_OPERATOR_LAST="",r.Msg.TEXT_INDEXOF_TITLE=" %1 %2 %3",r.Msg.TEXT_INDEXOF_TOOLTIP="%1",r.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",r.Msg.TEXT_ISEMPTY_TITLE="%1",r.Msg.TEXT_ISEMPTY_TOOLTIP=" true ",r.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",r.Msg.TEXT_JOIN_TITLE_CREATEWITH="",r.Msg.TEXT_JOIN_TOOLTIP="",r.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_LENGTH_TITLE="%1",r.Msg.TEXT_LENGTH_TOOLTIP="()",r.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",r.Msg.TEXT_PRINT_TITLE="%1 ",r.Msg.TEXT_PRINT_TOOLTIP="",r.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",r.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="",r.Msg.TEXT_PROMPT_TOOLTIP_TEXT="",r.Msg.TEXT_PROMPT_TYPE_NUMBER="",r.Msg.TEXT_PROMPT_TYPE_TEXT="",r.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",r.Msg.TEXT_REPLACE_MESSAGE0="%3%1%2",r.Msg.TEXT_REPLACE_TOOLTIP="",r.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",r.Msg.TEXT_REVERSE_MESSAGE0="%1",r.Msg.TEXT_REVERSE_TOOLTIP="",r.Msg.TEXT_TEXT_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.TEXT_TEXT_TOOLTIP="",r.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",r.Msg.TEXT_TRIM_OPERATOR_BOTH="",r.Msg.TEXT_TRIM_OPERATOR_LEFT="",r.Msg.TEXT_TRIM_OPERATOR_RIGHT="",r.Msg.TEXT_TRIM_TOOLTIP=" 1 ",r.Msg.TODAY="",r.Msg.UNDO="",r.Msg.UNKNOWN="Unknown",r.Msg.UNNAMED_KEY="",r.Msg.VARIABLES_DEFAULT_NAME="",r.Msg.VARIABLES_GET_CREATE_SET="'%1",r.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",r.Msg.VARIABLES_GET_TOOLTIP="",r.Msg.VARIABLES_SET="%1  %2 ",r.Msg.VARIABLES_SET_CREATE_GET="'%1 ' ",r.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",r.Msg.VARIABLES_SET_TOOLTIP="",r.Msg.VARIABLE_ALREADY_EXISTS=" '%1' ",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="'%2'  '%1' ",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="'%2'  '%1' ",r.Msg.WINDOWS="Windows",r.Msg.WORKSPACE_ARIA_LABEL="Blockly",r.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="",r.Msg.CONTROLS_FOREACH_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_FOR_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=r.Msg.CONTROLS_IF_MSG_ELSEIF,r.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=r.Msg.CONTROLS_IF_MSG_ELSE,r.Msg.CONTROLS_IF_IF_TITLE_IF=r.Msg.CONTROLS_IF_MSG_IF,r.Msg.CONTROLS_IF_MSG_THEN=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.LISTS_CREATE_WITH_ITEM_TITLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.MATH_CHANGE_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.PROCEDURES_DEFRETURN_COMMENT=r.Msg.PROCEDURES_DEFNORETURN_COMMENT,r.Msg.PROCEDURES_DEFRETURN_DO=r.Msg.PROCEDURES_DEFNORETURN_DO,r.Msg.PROCEDURES_DEFRETURN_PROCEDURE=r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,r.Msg.PROCEDURES_DEFRETURN_TITLE=r.Msg.PROCEDURES_DEFNORETURN_TITLE,r.Msg.TEXT_APPEND_VARIABLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.COLOUR_HUE="20",r.Msg.LISTS_HUE="260",r.Msg.LOGIC_HUE="210",r.Msg.LOOPS_HUE="120",r.Msg.MATH_HUE="230",r.Msg.PROCEDURES_HUE="290",r.Msg.TEXTS_HUE="160",r.Msg.VARIABLES_DYNAMIC_HUE="310",r.Msg.VARIABLES_HUE="330",r.Msg})})(Ok);var YW=Ok.exports;const KW=yh(YW),{LOGIC_HUE:JW,LOOPS_HUE:qW,MATH_HUE:ZW,TEXTS_HUE:QW,LISTS_HUE:eX,COLOUR_HUE:tX,VARIABLES_HUE:rX,VARIABLES_DYNAMIC_HUE:nX,PROCEDURES_HUE:sX,VARIABLES_DEFAULT_NAME:iX,UNNAMED_KEY:oX,TODAY:lX,DUPLICATE_BLOCK:aX,ADD_COMMENT:cX,REMOVE_COMMENT:uX,DUPLICATE_COMMENT:hX,EXTERNAL_INPUTS:dX,INLINE_INPUTS:fX,DELETE_BLOCK:_X,DELETE_X_BLOCKS:TX,DELETE_ALL_BLOCKS:pX,CLEAN_UP:gX,CLOSE:EX,COLLAPSE_BLOCK:mX,COLLAPSE_ALL:$X,EXPAND_BLOCK:IX,EXPAND_ALL:OX,DISABLE_BLOCK:SX,ENABLE_BLOCK:RX,HELP:LX,UNDO:AX,REDO:vX,CHANGE_VALUE_TITLE:CX,RENAME_VARIABLE:xX,RENAME_VARIABLE_TITLE:NX,NEW_VARIABLE:bX,NEW_STRING_VARIABLE:yX,NEW_NUMBER_VARIABLE:kX,NEW_COLOUR_VARIABLE:wX,NEW_VARIABLE_TYPE_TITLE:MX,NEW_VARIABLE_TITLE:DX,VARIABLE_ALREADY_EXISTS:PX,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:FX,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:BX,DELETE_VARIABLE_CONFIRMATION:UX,CANNOT_DELETE_VARIABLE_PROCEDURE:HX,DELETE_VARIABLE:GX,COLOUR_PICKER_HELPURL:VX,COLOUR_PICKER_TOOLTIP:WX,COLOUR_RANDOM_HELPURL:XX,COLOUR_RANDOM_TITLE:jX,COLOUR_RANDOM_TOOLTIP:zX,COLOUR_RGB_HELPURL:YX,COLOUR_RGB_TITLE:KX,COLOUR_RGB_RED:JX,COLOUR_RGB_GREEN:qX,COLOUR_RGB_BLUE:ZX,COLOUR_RGB_TOOLTIP:QX,COLOUR_BLEND_HELPURL:e8,COLOUR_BLEND_TITLE:t8,COLOUR_BLEND_COLOUR1:r8,COLOUR_BLEND_COLOUR2:n8,COLOUR_BLEND_RATIO:s8,COLOUR_BLEND_TOOLTIP:i8,CONTROLS_REPEAT_HELPURL:o8,CONTROLS_REPEAT_TITLE:l8,CONTROLS_REPEAT_INPUT_DO:a8,CONTROLS_REPEAT_TOOLTIP:c8,CONTROLS_WHILEUNTIL_HELPURL:u8,CONTROLS_WHILEUNTIL_INPUT_DO:h8,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:d8,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:f8,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:_8,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:T8,CONTROLS_FOR_HELPURL:p8,CONTROLS_FOR_TOOLTIP:g8,CONTROLS_FOR_TITLE:E8,CONTROLS_FOR_INPUT_DO:m8,CONTROLS_FOREACH_HELPURL:$8,CONTROLS_FOREACH_TITLE:I8,CONTROLS_FOREACH_INPUT_DO:O8,CONTROLS_FOREACH_TOOLTIP:S8,CONTROLS_FLOW_STATEMENTS_HELPURL:R8,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:L8,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:A8,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:v8,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:C8,CONTROLS_FLOW_STATEMENTS_WARNING:x8,CONTROLS_IF_HELPURL:N8,CONTROLS_IF_TOOLTIP_1:b8,CONTROLS_IF_TOOLTIP_2:y8,CONTROLS_IF_TOOLTIP_3:k8,CONTROLS_IF_TOOLTIP_4:w8,CONTROLS_IF_MSG_IF:M8,CONTROLS_IF_MSG_ELSEIF:D8,CONTROLS_IF_MSG_ELSE:P8,CONTROLS_IF_MSG_THEN:F8,CONTROLS_IF_IF_TITLE_IF:B8,CONTROLS_IF_IF_TOOLTIP:U8,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:H8,CONTROLS_IF_ELSEIF_TOOLTIP:G8,CONTROLS_IF_ELSE_TITLE_ELSE:V8,CONTROLS_IF_ELSE_TOOLTIP:W8,LOGIC_COMPARE_HELPURL:X8,LOGIC_COMPARE_TOOLTIP_EQ:j8,LOGIC_COMPARE_TOOLTIP_NEQ:z8,LOGIC_COMPARE_TOOLTIP_LT:Y8,LOGIC_COMPARE_TOOLTIP_LTE:K8,LOGIC_COMPARE_TOOLTIP_GT:J8,LOGIC_COMPARE_TOOLTIP_GTE:q8,LOGIC_OPERATION_HELPURL:Z8,LOGIC_OPERATION_TOOLTIP_AND:Q8,LOGIC_OPERATION_AND:e6,LOGIC_OPERATION_TOOLTIP_OR:t6,LOGIC_OPERATION_OR:r6,LOGIC_NEGATE_HELPURL:n6,LOGIC_NEGATE_TITLE:s6,LOGIC_NEGATE_TOOLTIP:i6,LOGIC_BOOLEAN_HELPURL:o6,LOGIC_BOOLEAN_TRUE:l6,LOGIC_BOOLEAN_FALSE:a6,LOGIC_BOOLEAN_TOOLTIP:c6,LOGIC_NULL_HELPURL:u6,LOGIC_NULL:h6,LOGIC_NULL_TOOLTIP:d6,LOGIC_TERNARY_HELPURL:f6,LOGIC_TERNARY_CONDITION:_6,LOGIC_TERNARY_IF_TRUE:T6,LOGIC_TERNARY_IF_FALSE:p6,LOGIC_TERNARY_TOOLTIP:g6,MATH_NUMBER_HELPURL:E6,MATH_NUMBER_TOOLTIP:m6,MATH_ADDITION_SYMBOL:$6,MATH_SUBTRACTION_SYMBOL:I6,MATH_DIVISION_SYMBOL:O6,MATH_MULTIPLICATION_SYMBOL:S6,MATH_POWER_SYMBOL:R6,MATH_TRIG_SIN:L6,MATH_TRIG_COS:A6,MATH_TRIG_TAN:v6,MATH_TRIG_ASIN:C6,MATH_TRIG_ACOS:x6,MATH_TRIG_ATAN:N6,MATH_ARITHMETIC_HELPURL:b6,MATH_ARITHMETIC_TOOLTIP_ADD:y6,MATH_ARITHMETIC_TOOLTIP_MINUS:k6,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:w6,MATH_ARITHMETIC_TOOLTIP_DIVIDE:M6,MATH_ARITHMETIC_TOOLTIP_POWER:D6,MATH_SINGLE_HELPURL:P6,MATH_SINGLE_OP_ROOT:F6,MATH_SINGLE_TOOLTIP_ROOT:B6,MATH_SINGLE_OP_ABSOLUTE:U6,MATH_SINGLE_TOOLTIP_ABS:H6,MATH_SINGLE_TOOLTIP_NEG:G6,MATH_SINGLE_TOOLTIP_LN:V6,MATH_SINGLE_TOOLTIP_LOG10:W6,MATH_SINGLE_TOOLTIP_EXP:X6,MATH_SINGLE_TOOLTIP_POW10:j6,MATH_TRIG_HELPURL:z6,MATH_TRIG_TOOLTIP_SIN:Y6,MATH_TRIG_TOOLTIP_COS:K6,MATH_TRIG_TOOLTIP_TAN:J6,MATH_TRIG_TOOLTIP_ASIN:q6,MATH_TRIG_TOOLTIP_ACOS:Z6,MATH_TRIG_TOOLTIP_ATAN:Q6,MATH_CONSTANT_HELPURL:e5,MATH_CONSTANT_TOOLTIP:t5,MATH_IS_EVEN:r5,MATH_IS_ODD:n5,MATH_IS_PRIME:s5,MATH_IS_WHOLE:i5,MATH_IS_POSITIVE:o5,MATH_IS_NEGATIVE:l5,MATH_IS_DIVISIBLE_BY:a5,MATH_IS_TOOLTIP:c5,MATH_CHANGE_HELPURL:u5,MATH_CHANGE_TITLE:h5,MATH_CHANGE_TITLE_ITEM:d5,MATH_CHANGE_TOOLTIP:f5,MATH_ROUND_HELPURL:_5,MATH_ROUND_TOOLTIP:T5,MATH_ROUND_OPERATOR_ROUND:p5,MATH_ROUND_OPERATOR_ROUNDUP:g5,MATH_ROUND_OPERATOR_ROUNDDOWN:E5,MATH_ONLIST_HELPURL:m5,MATH_ONLIST_OPERATOR_SUM:$5,MATH_ONLIST_TOOLTIP_SUM:I5,MATH_ONLIST_OPERATOR_MIN:O5,MATH_ONLIST_TOOLTIP_MIN:S5,MATH_ONLIST_OPERATOR_MAX:R5,MATH_ONLIST_TOOLTIP_MAX:L5,MATH_ONLIST_OPERATOR_AVERAGE:A5,MATH_ONLIST_TOOLTIP_AVERAGE:v5,MATH_ONLIST_OPERATOR_MEDIAN:C5,MATH_ONLIST_TOOLTIP_MEDIAN:x5,MATH_ONLIST_OPERATOR_MODE:N5,MATH_ONLIST_TOOLTIP_MODE:b5,MATH_ONLIST_OPERATOR_STD_DEV:y5,MATH_ONLIST_TOOLTIP_STD_DEV:k5,MATH_ONLIST_OPERATOR_RANDOM:w5,MATH_ONLIST_TOOLTIP_RANDOM:M5,MATH_MODULO_HELPURL:D5,MATH_MODULO_TITLE:P5,MATH_MODULO_TOOLTIP:F5,MATH_CONSTRAIN_HELPURL:B5,MATH_CONSTRAIN_TITLE:U5,MATH_CONSTRAIN_TOOLTIP:H5,MATH_RANDOM_INT_HELPURL:G5,MATH_RANDOM_INT_TITLE:V5,MATH_RANDOM_INT_TOOLTIP:W5,MATH_RANDOM_FLOAT_HELPURL:X5,MATH_RANDOM_FLOAT_TITLE_RANDOM:j5,MATH_RANDOM_FLOAT_TOOLTIP:z5,MATH_ATAN2_HELPURL:Y5,MATH_ATAN2_TITLE:K5,MATH_ATAN2_TOOLTIP:J5,TEXT_TEXT_HELPURL:q5,TEXT_TEXT_TOOLTIP:Z5,TEXT_JOIN_HELPURL:Q5,TEXT_JOIN_TITLE_CREATEWITH:ej,TEXT_JOIN_TOOLTIP:tj,TEXT_CREATE_JOIN_TITLE_JOIN:rj,TEXT_CREATE_JOIN_TOOLTIP:nj,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:sj,TEXT_CREATE_JOIN_ITEM_TOOLTIP:ij,TEXT_APPEND_HELPURL:oj,TEXT_APPEND_TITLE:lj,TEXT_APPEND_VARIABLE:aj,TEXT_APPEND_TOOLTIP:cj,TEXT_LENGTH_HELPURL:uj,TEXT_LENGTH_TITLE:hj,TEXT_LENGTH_TOOLTIP:dj,TEXT_ISEMPTY_HELPURL:fj,TEXT_ISEMPTY_TITLE:_j,TEXT_ISEMPTY_TOOLTIP:Tj,TEXT_INDEXOF_HELPURL:pj,TEXT_INDEXOF_TOOLTIP:gj,TEXT_INDEXOF_TITLE:Ej,TEXT_INDEXOF_OPERATOR_FIRST:mj,TEXT_INDEXOF_OPERATOR_LAST:$j,TEXT_CHARAT_HELPURL:Ij,TEXT_CHARAT_TITLE:Oj,TEXT_CHARAT_FROM_START:Sj,TEXT_CHARAT_FROM_END:Rj,TEXT_CHARAT_FIRST:Lj,TEXT_CHARAT_LAST:Aj,TEXT_CHARAT_RANDOM:vj,TEXT_CHARAT_TAIL:Cj,TEXT_CHARAT_TOOLTIP:xj,TEXT_GET_SUBSTRING_TOOLTIP:Nj,TEXT_GET_SUBSTRING_HELPURL:bj,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:yj,TEXT_GET_SUBSTRING_START_FROM_START:kj,TEXT_GET_SUBSTRING_START_FROM_END:wj,TEXT_GET_SUBSTRING_START_FIRST:Mj,TEXT_GET_SUBSTRING_END_FROM_START:Dj,TEXT_GET_SUBSTRING_END_FROM_END:Pj,TEXT_GET_SUBSTRING_END_LAST:Fj,TEXT_GET_SUBSTRING_TAIL:Bj,TEXT_CHANGECASE_HELPURL:Uj,TEXT_CHANGECASE_TOOLTIP:Hj,TEXT_CHANGECASE_OPERATOR_UPPERCASE:Gj,TEXT_CHANGECASE_OPERATOR_LOWERCASE:Vj,TEXT_CHANGECASE_OPERATOR_TITLECASE:Wj,TEXT_TRIM_HELPURL:Xj,TEXT_TRIM_TOOLTIP:jj,TEXT_TRIM_OPERATOR_BOTH:zj,TEXT_TRIM_OPERATOR_LEFT:Yj,TEXT_TRIM_OPERATOR_RIGHT:Kj,TEXT_PRINT_HELPURL:Jj,TEXT_PRINT_TITLE:qj,TEXT_PRINT_TOOLTIP:Zj,TEXT_PROMPT_HELPURL:Qj,TEXT_PROMPT_TYPE_TEXT:ez,TEXT_PROMPT_TYPE_NUMBER:tz,TEXT_PROMPT_TOOLTIP_NUMBER:rz,TEXT_PROMPT_TOOLTIP_TEXT:nz,TEXT_COUNT_MESSAGE0:sz,TEXT_COUNT_HELPURL:iz,TEXT_COUNT_TOOLTIP:oz,TEXT_REPLACE_MESSAGE0:lz,TEXT_REPLACE_HELPURL:az,TEXT_REPLACE_TOOLTIP:cz,TEXT_REVERSE_MESSAGE0:uz,TEXT_REVERSE_HELPURL:hz,TEXT_REVERSE_TOOLTIP:dz,LISTS_CREATE_EMPTY_HELPURL:fz,LISTS_CREATE_EMPTY_TITLE:_z,LISTS_CREATE_EMPTY_TOOLTIP:Tz,LISTS_CREATE_WITH_HELPURL:pz,LISTS_CREATE_WITH_TOOLTIP:gz,LISTS_CREATE_WITH_INPUT_WITH:Ez,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:mz,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:$z,LISTS_CREATE_WITH_ITEM_TITLE:Iz,LISTS_CREATE_WITH_ITEM_TOOLTIP:Oz,LISTS_REPEAT_HELPURL:Sz,LISTS_REPEAT_TOOLTIP:Rz,LISTS_REPEAT_TITLE:Lz,LISTS_LENGTH_HELPURL:Az,LISTS_LENGTH_TITLE:vz,LISTS_LENGTH_TOOLTIP:Cz,LISTS_ISEMPTY_HELPURL:xz,LISTS_ISEMPTY_TITLE:Nz,LISTS_ISEMPTY_TOOLTIP:bz,LISTS_INLIST:yz,LISTS_INDEX_OF_HELPURL:kz,LISTS_INDEX_OF_INPUT_IN_LIST:wz,LISTS_INDEX_OF_FIRST:Mz,LISTS_INDEX_OF_LAST:Dz,LISTS_INDEX_OF_TOOLTIP:Pz,LISTS_GET_INDEX_HELPURL:Fz,LISTS_GET_INDEX_GET:Bz,LISTS_GET_INDEX_GET_REMOVE:Uz,LISTS_GET_INDEX_REMOVE:Hz,LISTS_GET_INDEX_FROM_START:Gz,LISTS_GET_INDEX_FROM_END:Vz,LISTS_GET_INDEX_FIRST:Wz,LISTS_GET_INDEX_LAST:Xz,LISTS_GET_INDEX_RANDOM:jz,LISTS_GET_INDEX_TAIL:zz,LISTS_GET_INDEX_INPUT_IN_LIST:Yz,LISTS_INDEX_FROM_START_TOOLTIP:Kz,LISTS_INDEX_FROM_END_TOOLTIP:Jz,LISTS_GET_INDEX_TOOLTIP_GET_FROM:qz,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:Zz,LISTS_GET_INDEX_TOOLTIP_GET_LAST:Qz,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:e9,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:t9,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:r9,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:n9,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:s9,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:i9,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:o9,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:l9,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:a9,LISTS_SET_INDEX_HELPURL:c9,LISTS_SET_INDEX_INPUT_IN_LIST:u9,LISTS_SET_INDEX_SET:h9,LISTS_SET_INDEX_INSERT:d9,LISTS_SET_INDEX_INPUT_TO:f9,LISTS_SET_INDEX_TOOLTIP_SET_FROM:_9,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:T9,LISTS_SET_INDEX_TOOLTIP_SET_LAST:p9,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:g9,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:E9,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:m9,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:$9,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:I9,LISTS_GET_SUBLIST_HELPURL:O9,LISTS_GET_SUBLIST_INPUT_IN_LIST:S9,LISTS_GET_SUBLIST_START_FROM_START:R9,LISTS_GET_SUBLIST_START_FROM_END:L9,LISTS_GET_SUBLIST_START_FIRST:A9,LISTS_GET_SUBLIST_END_FROM_START:v9,LISTS_GET_SUBLIST_END_FROM_END:C9,LISTS_GET_SUBLIST_END_LAST:x9,LISTS_GET_SUBLIST_TAIL:N9,LISTS_GET_SUBLIST_TOOLTIP:b9,LISTS_SORT_HELPURL:y9,LISTS_SORT_TITLE:k9,LISTS_SORT_TOOLTIP:w9,LISTS_SORT_ORDER_ASCENDING:M9,LISTS_SORT_ORDER_DESCENDING:D9,LISTS_SORT_TYPE_NUMERIC:P9,LISTS_SORT_TYPE_TEXT:F9,LISTS_SORT_TYPE_IGNORECASE:B9,LISTS_SPLIT_HELPURL:U9,LISTS_SPLIT_LIST_FROM_TEXT:H9,LISTS_SPLIT_TEXT_FROM_LIST:G9,LISTS_SPLIT_WITH_DELIMITER:V9,LISTS_SPLIT_TOOLTIP_SPLIT:W9,LISTS_SPLIT_TOOLTIP_JOIN:X9,LISTS_REVERSE_HELPURL:j9,LISTS_REVERSE_MESSAGE0:z9,LISTS_REVERSE_TOOLTIP:Y9,ORDINAL_NUMBER_SUFFIX:K9,VARIABLES_GET_HELPURL:J9,VARIABLES_GET_TOOLTIP:q9,VARIABLES_GET_CREATE_SET:Z9,VARIABLES_SET_HELPURL:Q9,VARIABLES_SET:e7,VARIABLES_SET_TOOLTIP:t7,VARIABLES_SET_CREATE_GET:r7,PROCEDURES_DEFNORETURN_HELPURL:n7,PROCEDURES_DEFNORETURN_TITLE:s7,PROCEDURES_DEFNORETURN_PROCEDURE:i7,PROCEDURES_BEFORE_PARAMS:o7,PROCEDURES_CALL_BEFORE_PARAMS:l7,PROCEDURES_CALL_DISABLED_DEF_WARNING:a7,PROCEDURES_DEFNORETURN_DO:c7,PROCEDURES_DEFNORETURN_TOOLTIP:u7,PROCEDURES_DEFNORETURN_COMMENT:h7,PROCEDURES_DEFRETURN_HELPURL:d7,PROCEDURES_DEFRETURN_TITLE:f7,PROCEDURES_DEFRETURN_PROCEDURE:_7,PROCEDURES_DEFRETURN_DO:T7,PROCEDURES_DEFRETURN_COMMENT:p7,PROCEDURES_DEFRETURN_RETURN:g7,PROCEDURES_DEFRETURN_TOOLTIP:E7,PROCEDURES_ALLOW_STATEMENTS:m7,PROCEDURES_DEF_DUPLICATE_WARNING:$7,PROCEDURES_CALLNORETURN_HELPURL:I7,PROCEDURES_CALLNORETURN_TOOLTIP:O7,PROCEDURES_CALLRETURN_HELPURL:S7,PROCEDURES_CALLRETURN_TOOLTIP:R7,PROCEDURES_MUTATORCONTAINER_TITLE:L7,PROCEDURES_MUTATORCONTAINER_TOOLTIP:A7,PROCEDURES_MUTATORARG_TITLE:v7,PROCEDURES_MUTATORARG_TOOLTIP:C7,PROCEDURES_HIGHLIGHT_DEF:x7,PROCEDURES_CREATE_DO:N7,PROCEDURES_IFRETURN_TOOLTIP:b7,PROCEDURES_IFRETURN_HELPURL:y7,PROCEDURES_IFRETURN_WARNING:k7,WORKSPACE_COMMENT_DEFAULT_TEXT:w7,WORKSPACE_ARIA_LABEL:M7,COLLAPSED_WARNINGS_WARNING:D7,DIALOG_OK:P7,DIALOG_CANCEL:F7,EDIT_BLOCK_CONTENTS:B7,MOVE_BLOCK:U7,WINDOWS:H7,MAC_OS:G7,CHROME_OS:V7,LINUX:W7,UNKNOWN:X7,CONTROL_KEY:j7,COMMAND_KEY:z7,OPTION_KEY:Y7,ALT_KEY:K7,CUT_SHORTCUT:J7,COPY_SHORTCUT:q7,PASTE_SHORTCUT:Z7,HELP_PROMPT:Q7,SHORTCUTS_GENERAL:eY,SHORTCUTS_EDITING:tY,SHORTCUTS_CODE_NAVIGATION:rY,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:nY,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:sY,KEYBOARD_NAV_COPIED_HINT:iY,KEYBOARD_NAV_CUT_HINT:oY}=KW,lY=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT:cX,ALT_KEY:K7,CANNOT_DELETE_VARIABLE_PROCEDURE:HX,CHANGE_VALUE_TITLE:CX,CHROME_OS:V7,CLEAN_UP:gX,CLOSE:EX,COLLAPSED_WARNINGS_WARNING:D7,COLLAPSE_ALL:$X,COLLAPSE_BLOCK:mX,COLOUR_BLEND_COLOUR1:r8,COLOUR_BLEND_COLOUR2:n8,COLOUR_BLEND_HELPURL:e8,COLOUR_BLEND_RATIO:s8,COLOUR_BLEND_TITLE:t8,COLOUR_BLEND_TOOLTIP:i8,COLOUR_HUE:tX,COLOUR_PICKER_HELPURL:VX,COLOUR_PICKER_TOOLTIP:WX,COLOUR_RANDOM_HELPURL:XX,COLOUR_RANDOM_TITLE:jX,COLOUR_RANDOM_TOOLTIP:zX,COLOUR_RGB_BLUE:ZX,COLOUR_RGB_GREEN:qX,COLOUR_RGB_HELPURL:YX,COLOUR_RGB_RED:JX,COLOUR_RGB_TITLE:KX,COLOUR_RGB_TOOLTIP:QX,COMMAND_KEY:z7,CONTROLS_FLOW_STATEMENTS_HELPURL:R8,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:L8,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:A8,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:v8,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:C8,CONTROLS_FLOW_STATEMENTS_WARNING:x8,CONTROLS_FOREACH_HELPURL:$8,CONTROLS_FOREACH_INPUT_DO:O8,CONTROLS_FOREACH_TITLE:I8,CONTROLS_FOREACH_TOOLTIP:S8,CONTROLS_FOR_HELPURL:p8,CONTROLS_FOR_INPUT_DO:m8,CONTROLS_FOR_TITLE:E8,CONTROLS_FOR_TOOLTIP:g8,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:H8,CONTROLS_IF_ELSEIF_TOOLTIP:G8,CONTROLS_IF_ELSE_TITLE_ELSE:V8,CONTROLS_IF_ELSE_TOOLTIP:W8,CONTROLS_IF_HELPURL:N8,CONTROLS_IF_IF_TITLE_IF:B8,CONTROLS_IF_IF_TOOLTIP:U8,CONTROLS_IF_MSG_ELSE:P8,CONTROLS_IF_MSG_ELSEIF:D8,CONTROLS_IF_MSG_IF:M8,CONTROLS_IF_MSG_THEN:F8,CONTROLS_IF_TOOLTIP_1:b8,CONTROLS_IF_TOOLTIP_2:y8,CONTROLS_IF_TOOLTIP_3:k8,CONTROLS_IF_TOOLTIP_4:w8,CONTROLS_REPEAT_HELPURL:o8,CONTROLS_REPEAT_INPUT_DO:a8,CONTROLS_REPEAT_TITLE:l8,CONTROLS_REPEAT_TOOLTIP:c8,CONTROLS_WHILEUNTIL_HELPURL:u8,CONTROLS_WHILEUNTIL_INPUT_DO:h8,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:f8,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:d8,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:T8,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:_8,CONTROL_KEY:j7,COPY_SHORTCUT:q7,CUT_SHORTCUT:J7,DELETE_ALL_BLOCKS:pX,DELETE_BLOCK:_X,DELETE_VARIABLE:GX,DELETE_VARIABLE_CONFIRMATION:UX,DELETE_X_BLOCKS:TX,DIALOG_CANCEL:F7,DIALOG_OK:P7,DISABLE_BLOCK:SX,DUPLICATE_BLOCK:aX,DUPLICATE_COMMENT:hX,EDIT_BLOCK_CONTENTS:B7,ENABLE_BLOCK:RX,EXPAND_ALL:OX,EXPAND_BLOCK:IX,EXTERNAL_INPUTS:dX,HELP:LX,HELP_PROMPT:Q7,INLINE_INPUTS:fX,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:sY,KEYBOARD_NAV_COPIED_HINT:iY,KEYBOARD_NAV_CUT_HINT:oY,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:nY,LINUX:W7,LISTS_CREATE_EMPTY_HELPURL:fz,LISTS_CREATE_EMPTY_TITLE:_z,LISTS_CREATE_EMPTY_TOOLTIP:Tz,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:mz,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:$z,LISTS_CREATE_WITH_HELPURL:pz,LISTS_CREATE_WITH_INPUT_WITH:Ez,LISTS_CREATE_WITH_ITEM_TITLE:Iz,LISTS_CREATE_WITH_ITEM_TOOLTIP:Oz,LISTS_CREATE_WITH_TOOLTIP:gz,LISTS_GET_INDEX_FIRST:Wz,LISTS_GET_INDEX_FROM_END:Vz,LISTS_GET_INDEX_FROM_START:Gz,LISTS_GET_INDEX_GET:Bz,LISTS_GET_INDEX_GET_REMOVE:Uz,LISTS_GET_INDEX_HELPURL:Fz,LISTS_GET_INDEX_INPUT_IN_LIST:Yz,LISTS_GET_INDEX_LAST:Xz,LISTS_GET_INDEX_RANDOM:jz,LISTS_GET_INDEX_REMOVE:Hz,LISTS_GET_INDEX_TAIL:zz,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:Zz,LISTS_GET_INDEX_TOOLTIP_GET_FROM:qz,LISTS_GET_INDEX_TOOLTIP_GET_LAST:Qz,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:e9,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:r9,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:t9,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:n9,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:s9,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:o9,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:i9,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:l9,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:a9,LISTS_GET_SUBLIST_END_FROM_END:C9,LISTS_GET_SUBLIST_END_FROM_START:v9,LISTS_GET_SUBLIST_END_LAST:x9,LISTS_GET_SUBLIST_HELPURL:O9,LISTS_GET_SUBLIST_INPUT_IN_LIST:S9,LISTS_GET_SUBLIST_START_FIRST:A9,LISTS_GET_SUBLIST_START_FROM_END:L9,LISTS_GET_SUBLIST_START_FROM_START:R9,LISTS_GET_SUBLIST_TAIL:N9,LISTS_GET_SUBLIST_TOOLTIP:b9,LISTS_HUE:eX,LISTS_INDEX_FROM_END_TOOLTIP:Jz,LISTS_INDEX_FROM_START_TOOLTIP:Kz,LISTS_INDEX_OF_FIRST:Mz,LISTS_INDEX_OF_HELPURL:kz,LISTS_INDEX_OF_INPUT_IN_LIST:wz,LISTS_INDEX_OF_LAST:Dz,LISTS_INDEX_OF_TOOLTIP:Pz,LISTS_INLIST:yz,LISTS_ISEMPTY_HELPURL:xz,LISTS_ISEMPTY_TITLE:Nz,LISTS_ISEMPTY_TOOLTIP:bz,LISTS_LENGTH_HELPURL:Az,LISTS_LENGTH_TITLE:vz,LISTS_LENGTH_TOOLTIP:Cz,LISTS_REPEAT_HELPURL:Sz,LISTS_REPEAT_TITLE:Lz,LISTS_REPEAT_TOOLTIP:Rz,LISTS_REVERSE_HELPURL:j9,LISTS_REVERSE_MESSAGE0:z9,LISTS_REVERSE_TOOLTIP:Y9,LISTS_SET_INDEX_HELPURL:c9,LISTS_SET_INDEX_INPUT_IN_LIST:u9,LISTS_SET_INDEX_INPUT_TO:f9,LISTS_SET_INDEX_INSERT:d9,LISTS_SET_INDEX_SET:h9,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:m9,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:E9,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:$9,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:I9,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:T9,LISTS_SET_INDEX_TOOLTIP_SET_FROM:_9,LISTS_SET_INDEX_TOOLTIP_SET_LAST:p9,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:g9,LISTS_SORT_HELPURL:y9,LISTS_SORT_ORDER_ASCENDING:M9,LISTS_SORT_ORDER_DESCENDING:D9,LISTS_SORT_TITLE:k9,LISTS_SORT_TOOLTIP:w9,LISTS_SORT_TYPE_IGNORECASE:B9,LISTS_SORT_TYPE_NUMERIC:P9,LISTS_SORT_TYPE_TEXT:F9,LISTS_SPLIT_HELPURL:U9,LISTS_SPLIT_LIST_FROM_TEXT:H9,LISTS_SPLIT_TEXT_FROM_LIST:G9,LISTS_SPLIT_TOOLTIP_JOIN:X9,LISTS_SPLIT_TOOLTIP_SPLIT:W9,LISTS_SPLIT_WITH_DELIMITER:V9,LOGIC_BOOLEAN_FALSE:a6,LOGIC_BOOLEAN_HELPURL:o6,LOGIC_BOOLEAN_TOOLTIP:c6,LOGIC_BOOLEAN_TRUE:l6,LOGIC_COMPARE_HELPURL:X8,LOGIC_COMPARE_TOOLTIP_EQ:j8,LOGIC_COMPARE_TOOLTIP_GT:J8,LOGIC_COMPARE_TOOLTIP_GTE:q8,LOGIC_COMPARE_TOOLTIP_LT:Y8,LOGIC_COMPARE_TOOLTIP_LTE:K8,LOGIC_COMPARE_TOOLTIP_NEQ:z8,LOGIC_HUE:JW,LOGIC_NEGATE_HELPURL:n6,LOGIC_NEGATE_TITLE:s6,LOGIC_NEGATE_TOOLTIP:i6,LOGIC_NULL:h6,LOGIC_NULL_HELPURL:u6,LOGIC_NULL_TOOLTIP:d6,LOGIC_OPERATION_AND:e6,LOGIC_OPERATION_HELPURL:Z8,LOGIC_OPERATION_OR:r6,LOGIC_OPERATION_TOOLTIP_AND:Q8,LOGIC_OPERATION_TOOLTIP_OR:t6,LOGIC_TERNARY_CONDITION:_6,LOGIC_TERNARY_HELPURL:f6,LOGIC_TERNARY_IF_FALSE:p6,LOGIC_TERNARY_IF_TRUE:T6,LOGIC_TERNARY_TOOLTIP:g6,LOOPS_HUE:qW,MAC_OS:G7,MATH_ADDITION_SYMBOL:$6,MATH_ARITHMETIC_HELPURL:b6,MATH_ARITHMETIC_TOOLTIP_ADD:y6,MATH_ARITHMETIC_TOOLTIP_DIVIDE:M6,MATH_ARITHMETIC_TOOLTIP_MINUS:k6,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:w6,MATH_ARITHMETIC_TOOLTIP_POWER:D6,MATH_ATAN2_HELPURL:Y5,MATH_ATAN2_TITLE:K5,MATH_ATAN2_TOOLTIP:J5,MATH_CHANGE_HELPURL:u5,MATH_CHANGE_TITLE:h5,MATH_CHANGE_TITLE_ITEM:d5,MATH_CHANGE_TOOLTIP:f5,MATH_CONSTANT_HELPURL:e5,MATH_CONSTANT_TOOLTIP:t5,MATH_CONSTRAIN_HELPURL:B5,MATH_CONSTRAIN_TITLE:U5,MATH_CONSTRAIN_TOOLTIP:H5,MATH_DIVISION_SYMBOL:O6,MATH_HUE:ZW,MATH_IS_DIVISIBLE_BY:a5,MATH_IS_EVEN:r5,MATH_IS_NEGATIVE:l5,MATH_IS_ODD:n5,MATH_IS_POSITIVE:o5,MATH_IS_PRIME:s5,MATH_IS_TOOLTIP:c5,MATH_IS_WHOLE:i5,MATH_MODULO_HELPURL:D5,MATH_MODULO_TITLE:P5,MATH_MODULO_TOOLTIP:F5,MATH_MULTIPLICATION_SYMBOL:S6,MATH_NUMBER_HELPURL:E6,MATH_NUMBER_TOOLTIP:m6,MATH_ONLIST_HELPURL:m5,MATH_ONLIST_OPERATOR_AVERAGE:A5,MATH_ONLIST_OPERATOR_MAX:R5,MATH_ONLIST_OPERATOR_MEDIAN:C5,MATH_ONLIST_OPERATOR_MIN:O5,MATH_ONLIST_OPERATOR_MODE:N5,MATH_ONLIST_OPERATOR_RANDOM:w5,MATH_ONLIST_OPERATOR_STD_DEV:y5,MATH_ONLIST_OPERATOR_SUM:$5,MATH_ONLIST_TOOLTIP_AVERAGE:v5,MATH_ONLIST_TOOLTIP_MAX:L5,MATH_ONLIST_TOOLTIP_MEDIAN:x5,MATH_ONLIST_TOOLTIP_MIN:S5,MATH_ONLIST_TOOLTIP_MODE:b5,MATH_ONLIST_TOOLTIP_RANDOM:M5,MATH_ONLIST_TOOLTIP_STD_DEV:k5,MATH_ONLIST_TOOLTIP_SUM:I5,MATH_POWER_SYMBOL:R6,MATH_RANDOM_FLOAT_HELPURL:X5,MATH_RANDOM_FLOAT_TITLE_RANDOM:j5,MATH_RANDOM_FLOAT_TOOLTIP:z5,MATH_RANDOM_INT_HELPURL:G5,MATH_RANDOM_INT_TITLE:V5,MATH_RANDOM_INT_TOOLTIP:W5,MATH_ROUND_HELPURL:_5,MATH_ROUND_OPERATOR_ROUND:p5,MATH_ROUND_OPERATOR_ROUNDDOWN:E5,MATH_ROUND_OPERATOR_ROUNDUP:g5,MATH_ROUND_TOOLTIP:T5,MATH_SINGLE_HELPURL:P6,MATH_SINGLE_OP_ABSOLUTE:U6,MATH_SINGLE_OP_ROOT:F6,MATH_SINGLE_TOOLTIP_ABS:H6,MATH_SINGLE_TOOLTIP_EXP:X6,MATH_SINGLE_TOOLTIP_LN:V6,MATH_SINGLE_TOOLTIP_LOG10:W6,MATH_SINGLE_TOOLTIP_NEG:G6,MATH_SINGLE_TOOLTIP_POW10:j6,MATH_SINGLE_TOOLTIP_ROOT:B6,MATH_SUBTRACTION_SYMBOL:I6,MATH_TRIG_ACOS:x6,MATH_TRIG_ASIN:C6,MATH_TRIG_ATAN:N6,MATH_TRIG_COS:A6,MATH_TRIG_HELPURL:z6,MATH_TRIG_SIN:L6,MATH_TRIG_TAN:v6,MATH_TRIG_TOOLTIP_ACOS:Z6,MATH_TRIG_TOOLTIP_ASIN:q6,MATH_TRIG_TOOLTIP_ATAN:Q6,MATH_TRIG_TOOLTIP_COS:K6,MATH_TRIG_TOOLTIP_SIN:Y6,MATH_TRIG_TOOLTIP_TAN:J6,MOVE_BLOCK:U7,NEW_COLOUR_VARIABLE:wX,NEW_NUMBER_VARIABLE:kX,NEW_STRING_VARIABLE:yX,NEW_VARIABLE:bX,NEW_VARIABLE_TITLE:DX,NEW_VARIABLE_TYPE_TITLE:MX,OPTION_KEY:Y7,ORDINAL_NUMBER_SUFFIX:K9,PASTE_SHORTCUT:Z7,PROCEDURES_ALLOW_STATEMENTS:m7,PROCEDURES_BEFORE_PARAMS:o7,PROCEDURES_CALLNORETURN_HELPURL:I7,PROCEDURES_CALLNORETURN_TOOLTIP:O7,PROCEDURES_CALLRETURN_HELPURL:S7,PROCEDURES_CALLRETURN_TOOLTIP:R7,PROCEDURES_CALL_BEFORE_PARAMS:l7,PROCEDURES_CALL_DISABLED_DEF_WARNING:a7,PROCEDURES_CREATE_DO:N7,PROCEDURES_DEFNORETURN_COMMENT:h7,PROCEDURES_DEFNORETURN_DO:c7,PROCEDURES_DEFNORETURN_HELPURL:n7,PROCEDURES_DEFNORETURN_PROCEDURE:i7,PROCEDURES_DEFNORETURN_TITLE:s7,PROCEDURES_DEFNORETURN_TOOLTIP:u7,PROCEDURES_DEFRETURN_COMMENT:p7,PROCEDURES_DEFRETURN_DO:T7,PROCEDURES_DEFRETURN_HELPURL:d7,PROCEDURES_DEFRETURN_PROCEDURE:_7,PROCEDURES_DEFRETURN_RETURN:g7,PROCEDURES_DEFRETURN_TITLE:f7,PROCEDURES_DEFRETURN_TOOLTIP:E7,PROCEDURES_DEF_DUPLICATE_WARNING:$7,PROCEDURES_HIGHLIGHT_DEF:x7,PROCEDURES_HUE:sX,PROCEDURES_IFRETURN_HELPURL:y7,PROCEDURES_IFRETURN_TOOLTIP:b7,PROCEDURES_IFRETURN_WARNING:k7,PROCEDURES_MUTATORARG_TITLE:v7,PROCEDURES_MUTATORARG_TOOLTIP:C7,PROCEDURES_MUTATORCONTAINER_TITLE:L7,PROCEDURES_MUTATORCONTAINER_TOOLTIP:A7,REDO:vX,REMOVE_COMMENT:uX,RENAME_VARIABLE:xX,RENAME_VARIABLE_TITLE:NX,SHORTCUTS_CODE_NAVIGATION:rY,SHORTCUTS_EDITING:tY,SHORTCUTS_GENERAL:eY,TEXTS_HUE:QW,TEXT_APPEND_HELPURL:oj,TEXT_APPEND_TITLE:lj,TEXT_APPEND_TOOLTIP:cj,TEXT_APPEND_VARIABLE:aj,TEXT_CHANGECASE_HELPURL:Uj,TEXT_CHANGECASE_OPERATOR_LOWERCASE:Vj,TEXT_CHANGECASE_OPERATOR_TITLECASE:Wj,TEXT_CHANGECASE_OPERATOR_UPPERCASE:Gj,TEXT_CHANGECASE_TOOLTIP:Hj,TEXT_CHARAT_FIRST:Lj,TEXT_CHARAT_FROM_END:Rj,TEXT_CHARAT_FROM_START:Sj,TEXT_CHARAT_HELPURL:Ij,TEXT_CHARAT_LAST:Aj,TEXT_CHARAT_RANDOM:vj,TEXT_CHARAT_TAIL:Cj,TEXT_CHARAT_TITLE:Oj,TEXT_CHARAT_TOOLTIP:xj,TEXT_COUNT_HELPURL:iz,TEXT_COUNT_MESSAGE0:sz,TEXT_COUNT_TOOLTIP:oz,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:sj,TEXT_CREATE_JOIN_ITEM_TOOLTIP:ij,TEXT_CREATE_JOIN_TITLE_JOIN:rj,TEXT_CREATE_JOIN_TOOLTIP:nj,TEXT_GET_SUBSTRING_END_FROM_END:Pj,TEXT_GET_SUBSTRING_END_FROM_START:Dj,TEXT_GET_SUBSTRING_END_LAST:Fj,TEXT_GET_SUBSTRING_HELPURL:bj,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:yj,TEXT_GET_SUBSTRING_START_FIRST:Mj,TEXT_GET_SUBSTRING_START_FROM_END:wj,TEXT_GET_SUBSTRING_START_FROM_START:kj,TEXT_GET_SUBSTRING_TAIL:Bj,TEXT_GET_SUBSTRING_TOOLTIP:Nj,TEXT_INDEXOF_HELPURL:pj,TEXT_INDEXOF_OPERATOR_FIRST:mj,TEXT_INDEXOF_OPERATOR_LAST:$j,TEXT_INDEXOF_TITLE:Ej,TEXT_INDEXOF_TOOLTIP:gj,TEXT_ISEMPTY_HELPURL:fj,TEXT_ISEMPTY_TITLE:_j,TEXT_ISEMPTY_TOOLTIP:Tj,TEXT_JOIN_HELPURL:Q5,TEXT_JOIN_TITLE_CREATEWITH:ej,TEXT_JOIN_TOOLTIP:tj,TEXT_LENGTH_HELPURL:uj,TEXT_LENGTH_TITLE:hj,TEXT_LENGTH_TOOLTIP:dj,TEXT_PRINT_HELPURL:Jj,TEXT_PRINT_TITLE:qj,TEXT_PRINT_TOOLTIP:Zj,TEXT_PROMPT_HELPURL:Qj,TEXT_PROMPT_TOOLTIP_NUMBER:rz,TEXT_PROMPT_TOOLTIP_TEXT:nz,TEXT_PROMPT_TYPE_NUMBER:tz,TEXT_PROMPT_TYPE_TEXT:ez,TEXT_REPLACE_HELPURL:az,TEXT_REPLACE_MESSAGE0:lz,TEXT_REPLACE_TOOLTIP:cz,TEXT_REVERSE_HELPURL:hz,TEXT_REVERSE_MESSAGE0:uz,TEXT_REVERSE_TOOLTIP:dz,TEXT_TEXT_HELPURL:q5,TEXT_TEXT_TOOLTIP:Z5,TEXT_TRIM_HELPURL:Xj,TEXT_TRIM_OPERATOR_BOTH:zj,TEXT_TRIM_OPERATOR_LEFT:Yj,TEXT_TRIM_OPERATOR_RIGHT:Kj,TEXT_TRIM_TOOLTIP:jj,TODAY:lX,UNDO:AX,UNKNOWN:X7,UNNAMED_KEY:oX,VARIABLES_DEFAULT_NAME:iX,VARIABLES_DYNAMIC_HUE:nX,VARIABLES_GET_CREATE_SET:Z9,VARIABLES_GET_HELPURL:J9,VARIABLES_GET_TOOLTIP:q9,VARIABLES_HUE:rX,VARIABLES_SET:e7,VARIABLES_SET_CREATE_GET:r7,VARIABLES_SET_HELPURL:Q9,VARIABLES_SET_TOOLTIP:t7,VARIABLE_ALREADY_EXISTS:PX,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:FX,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:BX,WINDOWS:H7,WORKSPACE_ARIA_LABEL:M7,WORKSPACE_COMMENT_DEFAULT_TEXT:w7},Symbol.toStringTag,{value:"Module"}));var aY=mk();const cY=yh(aY),{LOGIC_HUE:uY,LOOPS_HUE:hY,MATH_HUE:dY,TEXTS_HUE:fY,LISTS_HUE:_Y,COLOUR_HUE:TY,VARIABLES_HUE:pY,VARIABLES_DYNAMIC_HUE:gY,PROCEDURES_HUE:EY,VARIABLES_DEFAULT_NAME:mY,UNNAMED_KEY:$Y,TODAY:IY,DUPLICATE_BLOCK:Sk,ADD_COMMENT:OY,REMOVE_COMMENT:SY,DUPLICATE_COMMENT:RY,EXTERNAL_INPUTS:LY,INLINE_INPUTS:AY,DELETE_BLOCK:Rk,DELETE_X_BLOCKS:vY,DELETE_ALL_BLOCKS:CY,CLEAN_UP:xY,CLOSE:NY,COLLAPSE_BLOCK:bY,COLLAPSE_ALL:yY,EXPAND_BLOCK:kY,EXPAND_ALL:wY,DISABLE_BLOCK:MY,ENABLE_BLOCK:DY,HELP:PY,UNDO:Lk,REDO:Ak,CHANGE_VALUE_TITLE:FY,RENAME_VARIABLE:BY,RENAME_VARIABLE_TITLE:UY,NEW_VARIABLE:HY,NEW_STRING_VARIABLE:GY,NEW_NUMBER_VARIABLE:VY,NEW_COLOUR_VARIABLE:WY,NEW_VARIABLE_TYPE_TITLE:XY,NEW_VARIABLE_TITLE:jY,VARIABLE_ALREADY_EXISTS:zY,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:YY,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:KY,DELETE_VARIABLE_CONFIRMATION:JY,CANNOT_DELETE_VARIABLE_PROCEDURE:qY,DELETE_VARIABLE:ZY,COLOUR_PICKER_HELPURL:QY,COLOUR_PICKER_TOOLTIP:eK,COLOUR_RANDOM_HELPURL:tK,COLOUR_RANDOM_TITLE:rK,COLOUR_RANDOM_TOOLTIP:nK,COLOUR_RGB_HELPURL:sK,COLOUR_RGB_TITLE:iK,COLOUR_RGB_RED:oK,COLOUR_RGB_GREEN:lK,COLOUR_RGB_BLUE:aK,COLOUR_RGB_TOOLTIP:cK,COLOUR_BLEND_HELPURL:uK,COLOUR_BLEND_TITLE:hK,COLOUR_BLEND_COLOUR1:dK,COLOUR_BLEND_COLOUR2:fK,COLOUR_BLEND_RATIO:_K,COLOUR_BLEND_TOOLTIP:TK,CONTROLS_REPEAT_HELPURL:pK,CONTROLS_REPEAT_TITLE:gK,CONTROLS_REPEAT_INPUT_DO:EK,CONTROLS_REPEAT_TOOLTIP:mK,CONTROLS_WHILEUNTIL_HELPURL:$K,CONTROLS_WHILEUNTIL_INPUT_DO:IK,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:OK,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:SK,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:RK,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:LK,CONTROLS_FOR_HELPURL:AK,CONTROLS_FOR_TOOLTIP:vK,CONTROLS_FOR_TITLE:CK,CONTROLS_FOR_INPUT_DO:xK,CONTROLS_FOREACH_HELPURL:NK,CONTROLS_FOREACH_TITLE:bK,CONTROLS_FOREACH_INPUT_DO:yK,CONTROLS_FOREACH_TOOLTIP:kK,CONTROLS_FLOW_STATEMENTS_HELPURL:wK,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:MK,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:DK,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:PK,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:FK,CONTROLS_FLOW_STATEMENTS_WARNING:BK,CONTROLS_IF_HELPURL:UK,CONTROLS_IF_TOOLTIP_1:HK,CONTROLS_IF_TOOLTIP_2:GK,CONTROLS_IF_TOOLTIP_3:VK,CONTROLS_IF_TOOLTIP_4:WK,CONTROLS_IF_MSG_IF:XK,CONTROLS_IF_MSG_ELSEIF:jK,CONTROLS_IF_MSG_ELSE:zK,CONTROLS_IF_MSG_THEN:YK,CONTROLS_IF_IF_TITLE_IF:KK,CONTROLS_IF_IF_TOOLTIP:JK,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:qK,CONTROLS_IF_ELSEIF_TOOLTIP:ZK,CONTROLS_IF_ELSE_TITLE_ELSE:QK,CONTROLS_IF_ELSE_TOOLTIP:eJ,LOGIC_COMPARE_HELPURL:tJ,LOGIC_COMPARE_TOOLTIP_EQ:rJ,LOGIC_COMPARE_TOOLTIP_NEQ:nJ,LOGIC_COMPARE_TOOLTIP_LT:sJ,LOGIC_COMPARE_TOOLTIP_LTE:iJ,LOGIC_COMPARE_TOOLTIP_GT:oJ,LOGIC_COMPARE_TOOLTIP_GTE:lJ,LOGIC_OPERATION_HELPURL:aJ,LOGIC_OPERATION_TOOLTIP_AND:cJ,LOGIC_OPERATION_AND:uJ,LOGIC_OPERATION_TOOLTIP_OR:hJ,LOGIC_OPERATION_OR:dJ,LOGIC_NEGATE_HELPURL:fJ,LOGIC_NEGATE_TITLE:_J,LOGIC_NEGATE_TOOLTIP:TJ,LOGIC_BOOLEAN_HELPURL:pJ,LOGIC_BOOLEAN_TRUE:gJ,LOGIC_BOOLEAN_FALSE:EJ,LOGIC_BOOLEAN_TOOLTIP:mJ,LOGIC_NULL_HELPURL:$J,LOGIC_NULL:IJ,LOGIC_NULL_TOOLTIP:OJ,LOGIC_TERNARY_HELPURL:SJ,LOGIC_TERNARY_CONDITION:RJ,LOGIC_TERNARY_IF_TRUE:LJ,LOGIC_TERNARY_IF_FALSE:AJ,LOGIC_TERNARY_TOOLTIP:vJ,MATH_NUMBER_HELPURL:CJ,MATH_NUMBER_TOOLTIP:xJ,MATH_ADDITION_SYMBOL:NJ,MATH_SUBTRACTION_SYMBOL:bJ,MATH_DIVISION_SYMBOL:yJ,MATH_MULTIPLICATION_SYMBOL:kJ,MATH_POWER_SYMBOL:wJ,MATH_TRIG_SIN:MJ,MATH_TRIG_COS:DJ,MATH_TRIG_TAN:PJ,MATH_TRIG_ASIN:FJ,MATH_TRIG_ACOS:BJ,MATH_TRIG_ATAN:UJ,MATH_ARITHMETIC_HELPURL:HJ,MATH_ARITHMETIC_TOOLTIP_ADD:GJ,MATH_ARITHMETIC_TOOLTIP_MINUS:VJ,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:WJ,MATH_ARITHMETIC_TOOLTIP_DIVIDE:XJ,MATH_ARITHMETIC_TOOLTIP_POWER:jJ,MATH_SINGLE_HELPURL:zJ,MATH_SINGLE_OP_ROOT:YJ,MATH_SINGLE_TOOLTIP_ROOT:KJ,MATH_SINGLE_OP_ABSOLUTE:JJ,MATH_SINGLE_TOOLTIP_ABS:qJ,MATH_SINGLE_TOOLTIP_NEG:ZJ,MATH_SINGLE_TOOLTIP_LN:QJ,MATH_SINGLE_TOOLTIP_LOG10:eq,MATH_SINGLE_TOOLTIP_EXP:tq,MATH_SINGLE_TOOLTIP_POW10:rq,MATH_TRIG_HELPURL:nq,MATH_TRIG_TOOLTIP_SIN:sq,MATH_TRIG_TOOLTIP_COS:iq,MATH_TRIG_TOOLTIP_TAN:oq,MATH_TRIG_TOOLTIP_ASIN:lq,MATH_TRIG_TOOLTIP_ACOS:aq,MATH_TRIG_TOOLTIP_ATAN:cq,MATH_CONSTANT_HELPURL:uq,MATH_CONSTANT_TOOLTIP:hq,MATH_IS_EVEN:dq,MATH_IS_ODD:fq,MATH_IS_PRIME:_q,MATH_IS_WHOLE:Tq,MATH_IS_POSITIVE:pq,MATH_IS_NEGATIVE:gq,MATH_IS_DIVISIBLE_BY:Eq,MATH_IS_TOOLTIP:mq,MATH_CHANGE_HELPURL:$q,MATH_CHANGE_TITLE:Iq,MATH_CHANGE_TITLE_ITEM:Oq,MATH_CHANGE_TOOLTIP:Sq,MATH_ROUND_HELPURL:Rq,MATH_ROUND_TOOLTIP:Lq,MATH_ROUND_OPERATOR_ROUND:Aq,MATH_ROUND_OPERATOR_ROUNDUP:vq,MATH_ROUND_OPERATOR_ROUNDDOWN:Cq,MATH_ONLIST_HELPURL:xq,MATH_ONLIST_OPERATOR_SUM:Nq,MATH_ONLIST_TOOLTIP_SUM:bq,MATH_ONLIST_OPERATOR_MIN:yq,MATH_ONLIST_TOOLTIP_MIN:kq,MATH_ONLIST_OPERATOR_MAX:wq,MATH_ONLIST_TOOLTIP_MAX:Mq,MATH_ONLIST_OPERATOR_AVERAGE:Dq,MATH_ONLIST_TOOLTIP_AVERAGE:Pq,MATH_ONLIST_OPERATOR_MEDIAN:Fq,MATH_ONLIST_TOOLTIP_MEDIAN:Bq,MATH_ONLIST_OPERATOR_MODE:Uq,MATH_ONLIST_TOOLTIP_MODE:Hq,MATH_ONLIST_OPERATOR_STD_DEV:Gq,MATH_ONLIST_TOOLTIP_STD_DEV:Vq,MATH_ONLIST_OPERATOR_RANDOM:Wq,MATH_ONLIST_TOOLTIP_RANDOM:Xq,MATH_MODULO_HELPURL:jq,MATH_MODULO_TITLE:zq,MATH_MODULO_TOOLTIP:Yq,MATH_CONSTRAIN_HELPURL:Kq,MATH_CONSTRAIN_TITLE:Jq,MATH_CONSTRAIN_TOOLTIP:qq,MATH_RANDOM_INT_HELPURL:Zq,MATH_RANDOM_INT_TITLE:Qq,MATH_RANDOM_INT_TOOLTIP:eZ,MATH_RANDOM_FLOAT_HELPURL:tZ,MATH_RANDOM_FLOAT_TITLE_RANDOM:rZ,MATH_RANDOM_FLOAT_TOOLTIP:nZ,MATH_ATAN2_HELPURL:sZ,MATH_ATAN2_TITLE:iZ,MATH_ATAN2_TOOLTIP:oZ,TEXT_TEXT_HELPURL:lZ,TEXT_TEXT_TOOLTIP:aZ,TEXT_JOIN_HELPURL:cZ,TEXT_JOIN_TITLE_CREATEWITH:uZ,TEXT_JOIN_TOOLTIP:hZ,TEXT_CREATE_JOIN_TITLE_JOIN:dZ,TEXT_CREATE_JOIN_TOOLTIP:fZ,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:_Z,TEXT_CREATE_JOIN_ITEM_TOOLTIP:TZ,TEXT_APPEND_HELPURL:pZ,TEXT_APPEND_TITLE:gZ,TEXT_APPEND_VARIABLE:EZ,TEXT_APPEND_TOOLTIP:mZ,TEXT_LENGTH_HELPURL:$Z,TEXT_LENGTH_TITLE:IZ,TEXT_LENGTH_TOOLTIP:OZ,TEXT_ISEMPTY_HELPURL:SZ,TEXT_ISEMPTY_TITLE:RZ,TEXT_ISEMPTY_TOOLTIP:LZ,TEXT_INDEXOF_HELPURL:AZ,TEXT_INDEXOF_TOOLTIP:vZ,TEXT_INDEXOF_TITLE:CZ,TEXT_INDEXOF_OPERATOR_FIRST:xZ,TEXT_INDEXOF_OPERATOR_LAST:NZ,TEXT_CHARAT_HELPURL:bZ,TEXT_CHARAT_TITLE:yZ,TEXT_CHARAT_FROM_START:kZ,TEXT_CHARAT_FROM_END:wZ,TEXT_CHARAT_FIRST:MZ,TEXT_CHARAT_LAST:DZ,TEXT_CHARAT_RANDOM:PZ,TEXT_CHARAT_TAIL:FZ,TEXT_CHARAT_TOOLTIP:BZ,TEXT_GET_SUBSTRING_TOOLTIP:UZ,TEXT_GET_SUBSTRING_HELPURL:HZ,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:GZ,TEXT_GET_SUBSTRING_START_FROM_START:VZ,TEXT_GET_SUBSTRING_START_FROM_END:WZ,TEXT_GET_SUBSTRING_START_FIRST:XZ,TEXT_GET_SUBSTRING_END_FROM_START:jZ,TEXT_GET_SUBSTRING_END_FROM_END:zZ,TEXT_GET_SUBSTRING_END_LAST:YZ,TEXT_GET_SUBSTRING_TAIL:KZ,TEXT_CHANGECASE_HELPURL:JZ,TEXT_CHANGECASE_TOOLTIP:qZ,TEXT_CHANGECASE_OPERATOR_UPPERCASE:ZZ,TEXT_CHANGECASE_OPERATOR_LOWERCASE:QZ,TEXT_CHANGECASE_OPERATOR_TITLECASE:eQ,TEXT_TRIM_HELPURL:tQ,TEXT_TRIM_TOOLTIP:rQ,TEXT_TRIM_OPERATOR_BOTH:nQ,TEXT_TRIM_OPERATOR_LEFT:sQ,TEXT_TRIM_OPERATOR_RIGHT:iQ,TEXT_PRINT_HELPURL:oQ,TEXT_PRINT_TITLE:lQ,TEXT_PRINT_TOOLTIP:aQ,TEXT_PROMPT_HELPURL:cQ,TEXT_PROMPT_TYPE_TEXT:uQ,TEXT_PROMPT_TYPE_NUMBER:hQ,TEXT_PROMPT_TOOLTIP_NUMBER:dQ,TEXT_PROMPT_TOOLTIP_TEXT:fQ,TEXT_COUNT_MESSAGE0:_Q,TEXT_COUNT_HELPURL:TQ,TEXT_COUNT_TOOLTIP:pQ,TEXT_REPLACE_MESSAGE0:gQ,TEXT_REPLACE_HELPURL:EQ,TEXT_REPLACE_TOOLTIP:mQ,TEXT_REVERSE_MESSAGE0:$Q,TEXT_REVERSE_HELPURL:IQ,TEXT_REVERSE_TOOLTIP:OQ,LISTS_CREATE_EMPTY_HELPURL:SQ,LISTS_CREATE_EMPTY_TITLE:RQ,LISTS_CREATE_EMPTY_TOOLTIP:LQ,LISTS_CREATE_WITH_HELPURL:AQ,LISTS_CREATE_WITH_TOOLTIP:vQ,LISTS_CREATE_WITH_INPUT_WITH:CQ,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:xQ,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:NQ,LISTS_CREATE_WITH_ITEM_TITLE:bQ,LISTS_CREATE_WITH_ITEM_TOOLTIP:yQ,LISTS_REPEAT_HELPURL:kQ,LISTS_REPEAT_TOOLTIP:wQ,LISTS_REPEAT_TITLE:MQ,LISTS_LENGTH_HELPURL:DQ,LISTS_LENGTH_TITLE:PQ,LISTS_LENGTH_TOOLTIP:FQ,LISTS_ISEMPTY_HELPURL:BQ,LISTS_ISEMPTY_TITLE:UQ,LISTS_ISEMPTY_TOOLTIP:HQ,LISTS_INLIST:GQ,LISTS_INDEX_OF_HELPURL:VQ,LISTS_INDEX_OF_INPUT_IN_LIST:WQ,LISTS_INDEX_OF_FIRST:XQ,LISTS_INDEX_OF_LAST:jQ,LISTS_INDEX_OF_TOOLTIP:zQ,LISTS_GET_INDEX_HELPURL:YQ,LISTS_GET_INDEX_GET:KQ,LISTS_GET_INDEX_GET_REMOVE:JQ,LISTS_GET_INDEX_REMOVE:qQ,LISTS_GET_INDEX_FROM_START:ZQ,LISTS_GET_INDEX_FROM_END:QQ,LISTS_GET_INDEX_FIRST:eee,LISTS_GET_INDEX_LAST:tee,LISTS_GET_INDEX_RANDOM:ree,LISTS_GET_INDEX_TAIL:nee,LISTS_GET_INDEX_INPUT_IN_LIST:see,LISTS_INDEX_FROM_START_TOOLTIP:iee,LISTS_INDEX_FROM_END_TOOLTIP:oee,LISTS_GET_INDEX_TOOLTIP_GET_FROM:lee,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:aee,LISTS_GET_INDEX_TOOLTIP_GET_LAST:cee,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:uee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:hee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:dee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:fee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:_ee,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:Tee,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:pee,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:gee,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:Eee,LISTS_SET_INDEX_HELPURL:mee,LISTS_SET_INDEX_INPUT_IN_LIST:$ee,LISTS_SET_INDEX_SET:Iee,LISTS_SET_INDEX_INSERT:Oee,LISTS_SET_INDEX_INPUT_TO:See,LISTS_SET_INDEX_TOOLTIP_SET_FROM:Ree,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:Lee,LISTS_SET_INDEX_TOOLTIP_SET_LAST:Aee,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:vee,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:Cee,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:xee,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:Nee,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:bee,LISTS_GET_SUBLIST_HELPURL:yee,LISTS_GET_SUBLIST_INPUT_IN_LIST:kee,LISTS_GET_SUBLIST_START_FROM_START:wee,LISTS_GET_SUBLIST_START_FROM_END:Mee,LISTS_GET_SUBLIST_START_FIRST:Dee,LISTS_GET_SUBLIST_END_FROM_START:Pee,LISTS_GET_SUBLIST_END_FROM_END:Fee,LISTS_GET_SUBLIST_END_LAST:Bee,LISTS_GET_SUBLIST_TAIL:Uee,LISTS_GET_SUBLIST_TOOLTIP:Hee,LISTS_SORT_HELPURL:Gee,LISTS_SORT_TITLE:Vee,LISTS_SORT_TOOLTIP:Wee,LISTS_SORT_ORDER_ASCENDING:Xee,LISTS_SORT_ORDER_DESCENDING:jee,LISTS_SORT_TYPE_NUMERIC:zee,LISTS_SORT_TYPE_TEXT:Yee,LISTS_SORT_TYPE_IGNORECASE:Kee,LISTS_SPLIT_HELPURL:Jee,LISTS_SPLIT_LIST_FROM_TEXT:qee,LISTS_SPLIT_TEXT_FROM_LIST:Zee,LISTS_SPLIT_WITH_DELIMITER:Qee,LISTS_SPLIT_TOOLTIP_SPLIT:ete,LISTS_SPLIT_TOOLTIP_JOIN:tte,LISTS_REVERSE_HELPURL:rte,LISTS_REVERSE_MESSAGE0:nte,LISTS_REVERSE_TOOLTIP:ste,ORDINAL_NUMBER_SUFFIX:ite,VARIABLES_GET_HELPURL:ote,VARIABLES_GET_TOOLTIP:lte,VARIABLES_GET_CREATE_SET:ate,VARIABLES_SET_HELPURL:cte,VARIABLES_SET:ute,VARIABLES_SET_TOOLTIP:hte,VARIABLES_SET_CREATE_GET:dte,PROCEDURES_DEFNORETURN_HELPURL:fte,PROCEDURES_DEFNORETURN_TITLE:_te,PROCEDURES_DEFNORETURN_PROCEDURE:Tte,PROCEDURES_BEFORE_PARAMS:pte,PROCEDURES_CALL_BEFORE_PARAMS:gte,PROCEDURES_CALL_DISABLED_DEF_WARNING:Ete,PROCEDURES_DEFNORETURN_DO:mte,PROCEDURES_DEFNORETURN_TOOLTIP:$te,PROCEDURES_DEFNORETURN_COMMENT:Ite,PROCEDURES_DEFRETURN_HELPURL:Ote,PROCEDURES_DEFRETURN_TITLE:Ste,PROCEDURES_DEFRETURN_PROCEDURE:Rte,PROCEDURES_DEFRETURN_DO:Lte,PROCEDURES_DEFRETURN_COMMENT:Ate,PROCEDURES_DEFRETURN_RETURN:vte,PROCEDURES_DEFRETURN_TOOLTIP:Cte,PROCEDURES_ALLOW_STATEMENTS:xte,PROCEDURES_DEF_DUPLICATE_WARNING:Nte,PROCEDURES_CALLNORETURN_HELPURL:bte,PROCEDURES_CALLNORETURN_TOOLTIP:yte,PROCEDURES_CALLRETURN_HELPURL:kte,PROCEDURES_CALLRETURN_TOOLTIP:wte,PROCEDURES_MUTATORCONTAINER_TITLE:Mte,PROCEDURES_MUTATORCONTAINER_TOOLTIP:Dte,PROCEDURES_MUTATORARG_TITLE:Pte,PROCEDURES_MUTATORARG_TOOLTIP:Fte,PROCEDURES_HIGHLIGHT_DEF:Bte,PROCEDURES_CREATE_DO:Ute,PROCEDURES_IFRETURN_TOOLTIP:Hte,PROCEDURES_IFRETURN_HELPURL:Gte,PROCEDURES_IFRETURN_WARNING:Vte,WORKSPACE_COMMENT_DEFAULT_TEXT:Wte,WORKSPACE_ARIA_LABEL:Xte,COLLAPSED_WARNINGS_WARNING:jte,DIALOG_OK:zte,DIALOG_CANCEL:Yte,EDIT_BLOCK_CONTENTS:Kte,MOVE_BLOCK:Jte,WINDOWS:qte,MAC_OS:Zte,CHROME_OS:Qte,LINUX:ere,UNKNOWN:tre,CONTROL_KEY:rre,COMMAND_KEY:nre,OPTION_KEY:sre,ALT_KEY:ire,CUT_SHORTCUT:ore,COPY_SHORTCUT:lre,PASTE_SHORTCUT:are,HELP_PROMPT:cre,SHORTCUTS_GENERAL:ure,SHORTCUTS_EDITING:hre,SHORTCUTS_CODE_NAVIGATION:dre,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:fre,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:_re,KEYBOARD_NAV_COPIED_HINT:Tre,KEYBOARD_NAV_CUT_HINT:pre}=cY,gre=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT:OY,ALT_KEY:ire,CANNOT_DELETE_VARIABLE_PROCEDURE:qY,CHANGE_VALUE_TITLE:FY,CHROME_OS:Qte,CLEAN_UP:xY,CLOSE:NY,COLLAPSED_WARNINGS_WARNING:jte,COLLAPSE_ALL:yY,COLLAPSE_BLOCK:bY,COLOUR_BLEND_COLOUR1:dK,COLOUR_BLEND_COLOUR2:fK,COLOUR_BLEND_HELPURL:uK,COLOUR_BLEND_RATIO:_K,COLOUR_BLEND_TITLE:hK,COLOUR_BLEND_TOOLTIP:TK,COLOUR_HUE:TY,COLOUR_PICKER_HELPURL:QY,COLOUR_PICKER_TOOLTIP:eK,COLOUR_RANDOM_HELPURL:tK,COLOUR_RANDOM_TITLE:rK,COLOUR_RANDOM_TOOLTIP:nK,COLOUR_RGB_BLUE:aK,COLOUR_RGB_GREEN:lK,COLOUR_RGB_HELPURL:sK,COLOUR_RGB_RED:oK,COLOUR_RGB_TITLE:iK,COLOUR_RGB_TOOLTIP:cK,COMMAND_KEY:nre,CONTROLS_FLOW_STATEMENTS_HELPURL:wK,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:MK,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:DK,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:PK,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:FK,CONTROLS_FLOW_STATEMENTS_WARNING:BK,CONTROLS_FOREACH_HELPURL:NK,CONTROLS_FOREACH_INPUT_DO:yK,CONTROLS_FOREACH_TITLE:bK,CONTROLS_FOREACH_TOOLTIP:kK,CONTROLS_FOR_HELPURL:AK,CONTROLS_FOR_INPUT_DO:xK,CONTROLS_FOR_TITLE:CK,CONTROLS_FOR_TOOLTIP:vK,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:qK,CONTROLS_IF_ELSEIF_TOOLTIP:ZK,CONTROLS_IF_ELSE_TITLE_ELSE:QK,CONTROLS_IF_ELSE_TOOLTIP:eJ,CONTROLS_IF_HELPURL:UK,CONTROLS_IF_IF_TITLE_IF:KK,CONTROLS_IF_IF_TOOLTIP:JK,CONTROLS_IF_MSG_ELSE:zK,CONTROLS_IF_MSG_ELSEIF:jK,CONTROLS_IF_MSG_IF:XK,CONTROLS_IF_MSG_THEN:YK,CONTROLS_IF_TOOLTIP_1:HK,CONTROLS_IF_TOOLTIP_2:GK,CONTROLS_IF_TOOLTIP_3:VK,CONTROLS_IF_TOOLTIP_4:WK,CONTROLS_REPEAT_HELPURL:pK,CONTROLS_REPEAT_INPUT_DO:EK,CONTROLS_REPEAT_TITLE:gK,CONTROLS_REPEAT_TOOLTIP:mK,CONTROLS_WHILEUNTIL_HELPURL:$K,CONTROLS_WHILEUNTIL_INPUT_DO:IK,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:SK,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:OK,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:LK,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:RK,CONTROL_KEY:rre,COPY_SHORTCUT:lre,CUT_SHORTCUT:ore,DELETE_ALL_BLOCKS:CY,DELETE_BLOCK:Rk,DELETE_VARIABLE:ZY,DELETE_VARIABLE_CONFIRMATION:JY,DELETE_X_BLOCKS:vY,DIALOG_CANCEL:Yte,DIALOG_OK:zte,DISABLE_BLOCK:MY,DUPLICATE_BLOCK:Sk,DUPLICATE_COMMENT:RY,EDIT_BLOCK_CONTENTS:Kte,ENABLE_BLOCK:DY,EXPAND_ALL:wY,EXPAND_BLOCK:kY,EXTERNAL_INPUTS:LY,HELP:PY,HELP_PROMPT:cre,INLINE_INPUTS:AY,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:_re,KEYBOARD_NAV_COPIED_HINT:Tre,KEYBOARD_NAV_CUT_HINT:pre,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:fre,LINUX:ere,LISTS_CREATE_EMPTY_HELPURL:SQ,LISTS_CREATE_EMPTY_TITLE:RQ,LISTS_CREATE_EMPTY_TOOLTIP:LQ,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:xQ,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:NQ,LISTS_CREATE_WITH_HELPURL:AQ,LISTS_CREATE_WITH_INPUT_WITH:CQ,LISTS_CREATE_WITH_ITEM_TITLE:bQ,LISTS_CREATE_WITH_ITEM_TOOLTIP:yQ,LISTS_CREATE_WITH_TOOLTIP:vQ,LISTS_GET_INDEX_FIRST:eee,LISTS_GET_INDEX_FROM_END:QQ,LISTS_GET_INDEX_FROM_START:ZQ,LISTS_GET_INDEX_GET:KQ,LISTS_GET_INDEX_GET_REMOVE:JQ,LISTS_GET_INDEX_HELPURL:YQ,LISTS_GET_INDEX_INPUT_IN_LIST:see,LISTS_GET_INDEX_LAST:tee,LISTS_GET_INDEX_RANDOM:ree,LISTS_GET_INDEX_REMOVE:qQ,LISTS_GET_INDEX_TAIL:nee,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:aee,LISTS_GET_INDEX_TOOLTIP_GET_FROM:lee,LISTS_GET_INDEX_TOOLTIP_GET_LAST:cee,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:uee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:dee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:hee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:fee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:_ee,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:pee,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:Tee,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:gee,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:Eee,LISTS_GET_SUBLIST_END_FROM_END:Fee,LISTS_GET_SUBLIST_END_FROM_START:Pee,LISTS_GET_SUBLIST_END_LAST:Bee,LISTS_GET_SUBLIST_HELPURL:yee,LISTS_GET_SUBLIST_INPUT_IN_LIST:kee,LISTS_GET_SUBLIST_START_FIRST:Dee,LISTS_GET_SUBLIST_START_FROM_END:Mee,LISTS_GET_SUBLIST_START_FROM_START:wee,LISTS_GET_SUBLIST_TAIL:Uee,LISTS_GET_SUBLIST_TOOLTIP:Hee,LISTS_HUE:_Y,LISTS_INDEX_FROM_END_TOOLTIP:oee,LISTS_INDEX_FROM_START_TOOLTIP:iee,LISTS_INDEX_OF_FIRST:XQ,LISTS_INDEX_OF_HELPURL:VQ,LISTS_INDEX_OF_INPUT_IN_LIST:WQ,LISTS_INDEX_OF_LAST:jQ,LISTS_INDEX_OF_TOOLTIP:zQ,LISTS_INLIST:GQ,LISTS_ISEMPTY_HELPURL:BQ,LISTS_ISEMPTY_TITLE:UQ,LISTS_ISEMPTY_TOOLTIP:HQ,LISTS_LENGTH_HELPURL:DQ,LISTS_LENGTH_TITLE:PQ,LISTS_LENGTH_TOOLTIP:FQ,LISTS_REPEAT_HELPURL:kQ,LISTS_REPEAT_TITLE:MQ,LISTS_REPEAT_TOOLTIP:wQ,LISTS_REVERSE_HELPURL:rte,LISTS_REVERSE_MESSAGE0:nte,LISTS_REVERSE_TOOLTIP:ste,LISTS_SET_INDEX_HELPURL:mee,LISTS_SET_INDEX_INPUT_IN_LIST:$ee,LISTS_SET_INDEX_INPUT_TO:See,LISTS_SET_INDEX_INSERT:Oee,LISTS_SET_INDEX_SET:Iee,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:xee,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:Cee,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:Nee,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:bee,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:Lee,LISTS_SET_INDEX_TOOLTIP_SET_FROM:Ree,LISTS_SET_INDEX_TOOLTIP_SET_LAST:Aee,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:vee,LISTS_SORT_HELPURL:Gee,LISTS_SORT_ORDER_ASCENDING:Xee,LISTS_SORT_ORDER_DESCENDING:jee,LISTS_SORT_TITLE:Vee,LISTS_SORT_TOOLTIP:Wee,LISTS_SORT_TYPE_IGNORECASE:Kee,LISTS_SORT_TYPE_NUMERIC:zee,LISTS_SORT_TYPE_TEXT:Yee,LISTS_SPLIT_HELPURL:Jee,LISTS_SPLIT_LIST_FROM_TEXT:qee,LISTS_SPLIT_TEXT_FROM_LIST:Zee,LISTS_SPLIT_TOOLTIP_JOIN:tte,LISTS_SPLIT_TOOLTIP_SPLIT:ete,LISTS_SPLIT_WITH_DELIMITER:Qee,LOGIC_BOOLEAN_FALSE:EJ,LOGIC_BOOLEAN_HELPURL:pJ,LOGIC_BOOLEAN_TOOLTIP:mJ,LOGIC_BOOLEAN_TRUE:gJ,LOGIC_COMPARE_HELPURL:tJ,LOGIC_COMPARE_TOOLTIP_EQ:rJ,LOGIC_COMPARE_TOOLTIP_GT:oJ,LOGIC_COMPARE_TOOLTIP_GTE:lJ,LOGIC_COMPARE_TOOLTIP_LT:sJ,LOGIC_COMPARE_TOOLTIP_LTE:iJ,LOGIC_COMPARE_TOOLTIP_NEQ:nJ,LOGIC_HUE:uY,LOGIC_NEGATE_HELPURL:fJ,LOGIC_NEGATE_TITLE:_J,LOGIC_NEGATE_TOOLTIP:TJ,LOGIC_NULL:IJ,LOGIC_NULL_HELPURL:$J,LOGIC_NULL_TOOLTIP:OJ,LOGIC_OPERATION_AND:uJ,LOGIC_OPERATION_HELPURL:aJ,LOGIC_OPERATION_OR:dJ,LOGIC_OPERATION_TOOLTIP_AND:cJ,LOGIC_OPERATION_TOOLTIP_OR:hJ,LOGIC_TERNARY_CONDITION:RJ,LOGIC_TERNARY_HELPURL:SJ,LOGIC_TERNARY_IF_FALSE:AJ,LOGIC_TERNARY_IF_TRUE:LJ,LOGIC_TERNARY_TOOLTIP:vJ,LOOPS_HUE:hY,MAC_OS:Zte,MATH_ADDITION_SYMBOL:NJ,MATH_ARITHMETIC_HELPURL:HJ,MATH_ARITHMETIC_TOOLTIP_ADD:GJ,MATH_ARITHMETIC_TOOLTIP_DIVIDE:XJ,MATH_ARITHMETIC_TOOLTIP_MINUS:VJ,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:WJ,MATH_ARITHMETIC_TOOLTIP_POWER:jJ,MATH_ATAN2_HELPURL:sZ,MATH_ATAN2_TITLE:iZ,MATH_ATAN2_TOOLTIP:oZ,MATH_CHANGE_HELPURL:$q,MATH_CHANGE_TITLE:Iq,MATH_CHANGE_TITLE_ITEM:Oq,MATH_CHANGE_TOOLTIP:Sq,MATH_CONSTANT_HELPURL:uq,MATH_CONSTANT_TOOLTIP:hq,MATH_CONSTRAIN_HELPURL:Kq,MATH_CONSTRAIN_TITLE:Jq,MATH_CONSTRAIN_TOOLTIP:qq,MATH_DIVISION_SYMBOL:yJ,MATH_HUE:dY,MATH_IS_DIVISIBLE_BY:Eq,MATH_IS_EVEN:dq,MATH_IS_NEGATIVE:gq,MATH_IS_ODD:fq,MATH_IS_POSITIVE:pq,MATH_IS_PRIME:_q,MATH_IS_TOOLTIP:mq,MATH_IS_WHOLE:Tq,MATH_MODULO_HELPURL:jq,MATH_MODULO_TITLE:zq,MATH_MODULO_TOOLTIP:Yq,MATH_MULTIPLICATION_SYMBOL:kJ,MATH_NUMBER_HELPURL:CJ,MATH_NUMBER_TOOLTIP:xJ,MATH_ONLIST_HELPURL:xq,MATH_ONLIST_OPERATOR_AVERAGE:Dq,MATH_ONLIST_OPERATOR_MAX:wq,MATH_ONLIST_OPERATOR_MEDIAN:Fq,MATH_ONLIST_OPERATOR_MIN:yq,MATH_ONLIST_OPERATOR_MODE:Uq,MATH_ONLIST_OPERATOR_RANDOM:Wq,MATH_ONLIST_OPERATOR_STD_DEV:Gq,MATH_ONLIST_OPERATOR_SUM:Nq,MATH_ONLIST_TOOLTIP_AVERAGE:Pq,MATH_ONLIST_TOOLTIP_MAX:Mq,MATH_ONLIST_TOOLTIP_MEDIAN:Bq,MATH_ONLIST_TOOLTIP_MIN:kq,MATH_ONLIST_TOOLTIP_MODE:Hq,MATH_ONLIST_TOOLTIP_RANDOM:Xq,MATH_ONLIST_TOOLTIP_STD_DEV:Vq,MATH_ONLIST_TOOLTIP_SUM:bq,MATH_POWER_SYMBOL:wJ,MATH_RANDOM_FLOAT_HELPURL:tZ,MATH_RANDOM_FLOAT_TITLE_RANDOM:rZ,MATH_RANDOM_FLOAT_TOOLTIP:nZ,MATH_RANDOM_INT_HELPURL:Zq,MATH_RANDOM_INT_TITLE:Qq,MATH_RANDOM_INT_TOOLTIP:eZ,MATH_ROUND_HELPURL:Rq,MATH_ROUND_OPERATOR_ROUND:Aq,MATH_ROUND_OPERATOR_ROUNDDOWN:Cq,MATH_ROUND_OPERATOR_ROUNDUP:vq,MATH_ROUND_TOOLTIP:Lq,MATH_SINGLE_HELPURL:zJ,MATH_SINGLE_OP_ABSOLUTE:JJ,MATH_SINGLE_OP_ROOT:YJ,MATH_SINGLE_TOOLTIP_ABS:qJ,MATH_SINGLE_TOOLTIP_EXP:tq,MATH_SINGLE_TOOLTIP_LN:QJ,MATH_SINGLE_TOOLTIP_LOG10:eq,MATH_SINGLE_TOOLTIP_NEG:ZJ,MATH_SINGLE_TOOLTIP_POW10:rq,MATH_SINGLE_TOOLTIP_ROOT:KJ,MATH_SUBTRACTION_SYMBOL:bJ,MATH_TRIG_ACOS:BJ,MATH_TRIG_ASIN:FJ,MATH_TRIG_ATAN:UJ,MATH_TRIG_COS:DJ,MATH_TRIG_HELPURL:nq,MATH_TRIG_SIN:MJ,MATH_TRIG_TAN:PJ,MATH_TRIG_TOOLTIP_ACOS:aq,MATH_TRIG_TOOLTIP_ASIN:lq,MATH_TRIG_TOOLTIP_ATAN:cq,MATH_TRIG_TOOLTIP_COS:iq,MATH_TRIG_TOOLTIP_SIN:sq,MATH_TRIG_TOOLTIP_TAN:oq,MOVE_BLOCK:Jte,NEW_COLOUR_VARIABLE:WY,NEW_NUMBER_VARIABLE:VY,NEW_STRING_VARIABLE:GY,NEW_VARIABLE:HY,NEW_VARIABLE_TITLE:jY,NEW_VARIABLE_TYPE_TITLE:XY,OPTION_KEY:sre,ORDINAL_NUMBER_SUFFIX:ite,PASTE_SHORTCUT:are,PROCEDURES_ALLOW_STATEMENTS:xte,PROCEDURES_BEFORE_PARAMS:pte,PROCEDURES_CALLNORETURN_HELPURL:bte,PROCEDURES_CALLNORETURN_TOOLTIP:yte,PROCEDURES_CALLRETURN_HELPURL:kte,PROCEDURES_CALLRETURN_TOOLTIP:wte,PROCEDURES_CALL_BEFORE_PARAMS:gte,PROCEDURES_CALL_DISABLED_DEF_WARNING:Ete,PROCEDURES_CREATE_DO:Ute,PROCEDURES_DEFNORETURN_COMMENT:Ite,PROCEDURES_DEFNORETURN_DO:mte,PROCEDURES_DEFNORETURN_HELPURL:fte,PROCEDURES_DEFNORETURN_PROCEDURE:Tte,PROCEDURES_DEFNORETURN_TITLE:_te,PROCEDURES_DEFNORETURN_TOOLTIP:$te,PROCEDURES_DEFRETURN_COMMENT:Ate,PROCEDURES_DEFRETURN_DO:Lte,PROCEDURES_DEFRETURN_HELPURL:Ote,PROCEDURES_DEFRETURN_PROCEDURE:Rte,PROCEDURES_DEFRETURN_RETURN:vte,PROCEDURES_DEFRETURN_TITLE:Ste,PROCEDURES_DEFRETURN_TOOLTIP:Cte,PROCEDURES_DEF_DUPLICATE_WARNING:Nte,PROCEDURES_HIGHLIGHT_DEF:Bte,PROCEDURES_HUE:EY,PROCEDURES_IFRETURN_HELPURL:Gte,PROCEDURES_IFRETURN_TOOLTIP:Hte,PROCEDURES_IFRETURN_WARNING:Vte,PROCEDURES_MUTATORARG_TITLE:Pte,PROCEDURES_MUTATORARG_TOOLTIP:Fte,PROCEDURES_MUTATORCONTAINER_TITLE:Mte,PROCEDURES_MUTATORCONTAINER_TOOLTIP:Dte,REDO:Ak,REMOVE_COMMENT:SY,RENAME_VARIABLE:BY,RENAME_VARIABLE_TITLE:UY,SHORTCUTS_CODE_NAVIGATION:dre,SHORTCUTS_EDITING:hre,SHORTCUTS_GENERAL:ure,TEXTS_HUE:fY,TEXT_APPEND_HELPURL:pZ,TEXT_APPEND_TITLE:gZ,TEXT_APPEND_TOOLTIP:mZ,TEXT_APPEND_VARIABLE:EZ,TEXT_CHANGECASE_HELPURL:JZ,TEXT_CHANGECASE_OPERATOR_LOWERCASE:QZ,TEXT_CHANGECASE_OPERATOR_TITLECASE:eQ,TEXT_CHANGECASE_OPERATOR_UPPERCASE:ZZ,TEXT_CHANGECASE_TOOLTIP:qZ,TEXT_CHARAT_FIRST:MZ,TEXT_CHARAT_FROM_END:wZ,TEXT_CHARAT_FROM_START:kZ,TEXT_CHARAT_HELPURL:bZ,TEXT_CHARAT_LAST:DZ,TEXT_CHARAT_RANDOM:PZ,TEXT_CHARAT_TAIL:FZ,TEXT_CHARAT_TITLE:yZ,TEXT_CHARAT_TOOLTIP:BZ,TEXT_COUNT_HELPURL:TQ,TEXT_COUNT_MESSAGE0:_Q,TEXT_COUNT_TOOLTIP:pQ,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:_Z,TEXT_CREATE_JOIN_ITEM_TOOLTIP:TZ,TEXT_CREATE_JOIN_TITLE_JOIN:dZ,TEXT_CREATE_JOIN_TOOLTIP:fZ,TEXT_GET_SUBSTRING_END_FROM_END:zZ,TEXT_GET_SUBSTRING_END_FROM_START:jZ,TEXT_GET_SUBSTRING_END_LAST:YZ,TEXT_GET_SUBSTRING_HELPURL:HZ,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:GZ,TEXT_GET_SUBSTRING_START_FIRST:XZ,TEXT_GET_SUBSTRING_START_FROM_END:WZ,TEXT_GET_SUBSTRING_START_FROM_START:VZ,TEXT_GET_SUBSTRING_TAIL:KZ,TEXT_GET_SUBSTRING_TOOLTIP:UZ,TEXT_INDEXOF_HELPURL:AZ,TEXT_INDEXOF_OPERATOR_FIRST:xZ,TEXT_INDEXOF_OPERATOR_LAST:NZ,TEXT_INDEXOF_TITLE:CZ,TEXT_INDEXOF_TOOLTIP:vZ,TEXT_ISEMPTY_HELPURL:SZ,TEXT_ISEMPTY_TITLE:RZ,TEXT_ISEMPTY_TOOLTIP:LZ,TEXT_JOIN_HELPURL:cZ,TEXT_JOIN_TITLE_CREATEWITH:uZ,TEXT_JOIN_TOOLTIP:hZ,TEXT_LENGTH_HELPURL:$Z,TEXT_LENGTH_TITLE:IZ,TEXT_LENGTH_TOOLTIP:OZ,TEXT_PRINT_HELPURL:oQ,TEXT_PRINT_TITLE:lQ,TEXT_PRINT_TOOLTIP:aQ,TEXT_PROMPT_HELPURL:cQ,TEXT_PROMPT_TOOLTIP_NUMBER:dQ,TEXT_PROMPT_TOOLTIP_TEXT:fQ,TEXT_PROMPT_TYPE_NUMBER:hQ,TEXT_PROMPT_TYPE_TEXT:uQ,TEXT_REPLACE_HELPURL:EQ,TEXT_REPLACE_MESSAGE0:gQ,TEXT_REPLACE_TOOLTIP:mQ,TEXT_REVERSE_HELPURL:IQ,TEXT_REVERSE_MESSAGE0:$Q,TEXT_REVERSE_TOOLTIP:OQ,TEXT_TEXT_HELPURL:lZ,TEXT_TEXT_TOOLTIP:aZ,TEXT_TRIM_HELPURL:tQ,TEXT_TRIM_OPERATOR_BOTH:nQ,TEXT_TRIM_OPERATOR_LEFT:sQ,TEXT_TRIM_OPERATOR_RIGHT:iQ,TEXT_TRIM_TOOLTIP:rQ,TODAY:IY,UNDO:Lk,UNKNOWN:tre,UNNAMED_KEY:$Y,VARIABLES_DEFAULT_NAME:mY,VARIABLES_DYNAMIC_HUE:gY,VARIABLES_GET_CREATE_SET:ate,VARIABLES_GET_HELPURL:ote,VARIABLES_GET_TOOLTIP:lte,VARIABLES_HUE:pY,VARIABLES_SET:ute,VARIABLES_SET_CREATE_GET:dte,VARIABLES_SET_HELPURL:cte,VARIABLES_SET_TOOLTIP:hte,VARIABLE_ALREADY_EXISTS:zY,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:YY,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:KY,WINDOWS:qte,WORKSPACE_ARIA_LABEL:Xte,WORKSPACE_COMMENT_DEFAULT_TEXT:Wte},Symbol.toStringTag,{value:"Module"})),Ere=new Set(["LET","LAMBDA"]);function vk(t){const s=t.filter(r=>!Ere.has(r.name.toUpperCase())).map(r=>({type:`frockly_${r.name.toUpperCase()}`,message0:"",args0:[],output:null,colour:200,mutator:"frockly_fn_dynargs",extensions:["frockly_fn_ui"]}));l$(s)}var Ck={exports:{}};(function(t,s){(function(r,i){t.exports=i(MI())})(Co,function(r){var i=r.__namespace__,l=function(O,w){return["[]",te.ATOMIC]},c=function(O,w){const Q=Array(O.itemCount_);for(let ae=0;ae<O.itemCount_;ae++)Q[ae]=w.valueToCode(O,"ADD"+ae,te.NONE)||"null";return["["+Q.join(", ")+"]",te.ATOMIC]},u=function(O,w){const Q=w.provideFunction_("listsRepeat",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),ae=w.valueToCode(O,"ITEM",te.NONE)||"null";return O=w.valueToCode(O,"NUM",te.NONE)||"0",[Q+"("+ae+", "+O+")",te.FUNCTION_CALL]},h=function(O,w){return[(w.valueToCode(O,"VALUE",te.MEMBER)||"[]")+".length",te.MEMBER]},f=function(O,w){return["!"+(w.valueToCode(O,"VALUE",te.MEMBER)||"[]")+".length",te.LOGICAL_NOT]},_=function(O,w){const Q=O.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ae=w.valueToCode(O,"FIND",te.NONE)||"''";return w=(w.valueToCode(O,"VALUE",te.MEMBER)||"[]")+"."+Q+"("+ae+")",O.workspace.options.oneBasedIndex?[w+" + 1",te.ADDITION]:[w,te.FUNCTION_CALL]},T=function(O,w){const Q=O.getFieldValue("MODE")||"GET",ae=O.getFieldValue("WHERE")||"FROM_START";var Ae=w.valueToCode(O,"VALUE",ae==="RANDOM"?te.NONE:te.MEMBER)||"[]";switch(ae){case"FIRST":if(Q==="GET")return[Ae+"[0]",te.MEMBER];if(Q==="GET_REMOVE")return[Ae+".shift()",te.MEMBER];if(Q==="REMOVE")return Ae+`.shift();
`;break;case"LAST":if(Q==="GET")return[Ae+".slice(-1)[0]",te.MEMBER];if(Q==="GET_REMOVE")return[Ae+".pop()",te.MEMBER];if(Q==="REMOVE")return Ae+`.pop();
`;break;case"FROM_START":if(O=w.getAdjusted(O,"AT"),Q==="GET")return[Ae+"["+O+"]",te.MEMBER];if(Q==="GET_REMOVE")return[Ae+".splice("+O+", 1)[0]",te.FUNCTION_CALL];if(Q==="REMOVE")return Ae+".splice("+O+`, 1);
`;break;case"FROM_END":if(O=w.getAdjusted(O,"AT",1,!0),Q==="GET")return[Ae+".slice("+O+")[0]",te.FUNCTION_CALL];if(Q==="GET_REMOVE")return[Ae+".splice("+O+", 1)[0]",te.FUNCTION_CALL];if(Q==="REMOVE")return Ae+".splice("+O+", 1);";break;case"RANDOM":if(Ae=w.provideFunction_("listsGetRandomItem",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Ae+", "+(Q!=="GET")+")",Q==="GET"||Q==="GET_REMOVE")return[Ae,te.FUNCTION_CALL];if(Q==="REMOVE")return Ae+`;
`}throw Error("Unhandled combination (lists_getIndex).")},g=function(O,w){function Q(){if(ae.match(/^\w+$/))return"";const Nr=w.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),Ei="var "+Nr+" = "+ae+`;
`;return ae=Nr,Ei}let ae=w.valueToCode(O,"LIST",te.MEMBER)||"[]";const Ae=O.getFieldValue("MODE")||"GET";var Xe=O.getFieldValue("WHERE")||"FROM_START";const rt=w.valueToCode(O,"TO",te.ASSIGNMENT)||"null";switch(Xe){case"FIRST":if(Ae==="SET")return ae+"[0] = "+rt+`;
`;if(Ae==="INSERT")return ae+".unshift("+rt+`);
`;break;case"LAST":if(Ae==="SET")return Q()+(ae+"["+ae+".length - 1] = "+rt+`;
`);if(Ae==="INSERT")return ae+".push("+rt+`);
`;break;case"FROM_START":if(O=w.getAdjusted(O,"AT"),Ae==="SET")return ae+"["+O+"] = "+rt+`;
`;if(Ae==="INSERT")return ae+".splice("+O+", 0, "+rt+`);
`;break;case"FROM_END":if(O=w.getAdjusted(O,"AT",1,!1,te.SUBTRACTION),Xe=Q(),Ae==="SET")return Xe+(ae+"["+ae+".length - "+O+"] = "+rt+`;
`);if(Ae==="INSERT")return Xe+(ae+".splice("+ae+".length - "+O+", 0, "+rt+`);
`);break;case"RANDOM":if(O=Q(),Xe=w.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+Xe+" = Math.floor(Math.random() * "+ae+`.length);
`,Ae==="SET")return O+(ae+"["+Xe+"] = "+rt+`;
`);if(Ae==="INSERT")return O+(ae+".splice("+Xe+", 0, "+rt+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},E=function(O,w){var Q={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},ae=w.valueToCode(O,"LIST",te.MEMBER)||"[]";const Ae=O.getFieldValue("WHERE1"),Xe=O.getFieldValue("WHERE2");if(Ae==="FIRST"&&Xe==="LAST")ae+=".slice(0)";else if(ae.match(/^\w+$/)||Ae!=="FROM_END"&&Xe==="FROM_START"){switch(Ae){case"FROM_START":Q=w.getAdjusted(O,"AT1");break;case"FROM_END":Q=w.getAdjusted(O,"AT1",1,!1,te.SUBTRACTION),Q=ae+".length - "+Q;break;case"FIRST":Q="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Xe){case"FROM_START":w=w.getAdjusted(O,"AT2",1);break;case"FROM_END":w=w.getAdjusted(O,"AT2",0,!1,te.SUBTRACTION),w=ae+".length - "+w;break;case"LAST":w=ae+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}ae=ae+".slice("+Q+", "+w+")"}else{const rt=w.getAdjusted(O,"AT1");O=w.getAdjusted(O,"AT2"),ae=w.provideFunction_("subsequence"+Q[Ae]+Q[Xe],`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ae==="FROM_END"||Ae==="FROM_START"?", at1":""}${Xe==="FROM_END"||Xe==="FROM_START"?", at2":""}) {
  var start = ${Tn("sequence",Ae,"at1")};
  var end = ${Tn("sequence",Xe,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+ae+(Ae==="FROM_END"||Ae==="FROM_START"?", "+rt:"")+(Xe==="FROM_END"||Xe==="FROM_START"?", "+O:"")+")"}return[ae,te.FUNCTION_CALL]},S=function(O,w){const Q=w.valueToCode(O,"LIST",te.FUNCTION_CALL)||"[]",ae=O.getFieldValue("DIRECTION")==="1"?1:-1;return O=O.getFieldValue("TYPE"),w=w.provideFunction_("listsGetSortCompare",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[Q+".slice().sort("+w+'("'+O+'", '+ae+"))",te.FUNCTION_CALL]},R=function(O,w){let Q=w.valueToCode(O,"INPUT",te.MEMBER);if(w=w.valueToCode(O,"DELIM",te.NONE)||"''",O=O.getFieldValue("MODE"),O==="SPLIT")Q||(Q="''"),O="split";else if(O==="JOIN")Q||(Q="[]"),O="join";else throw Error("Unknown mode: "+O);return[Q+"."+O+"("+w+")",te.FUNCTION_CALL]},L=function(O,w){return[(w.valueToCode(O,"LIST",te.FUNCTION_CALL)||"[]")+".slice().reverse()",te.FUNCTION_CALL]},x=function(O,w){var Q=0;let ae="";w.STATEMENT_PREFIX&&(ae+=w.injectId(w.STATEMENT_PREFIX,O));do{const Ae=w.valueToCode(O,"IF"+Q,te.NONE)||"false";let Xe=w.statementToCode(O,"DO"+Q);w.STATEMENT_SUFFIX&&(Xe=w.prefixLines(w.injectId(w.STATEMENT_SUFFIX,O),w.INDENT)+Xe),ae+=(Q>0?" else ":"")+"if ("+Ae+`) {
`+Xe+"}",Q++}while(O.getInput("IF"+Q));return(O.getInput("ELSE")||w.STATEMENT_SUFFIX)&&(Q=O.getInput("ELSE")?w.statementToCode(O,"ELSE"):"",w.STATEMENT_SUFFIX&&(Q=w.prefixLines(w.injectId(w.STATEMENT_SUFFIX,O),w.INDENT)+Q),ae+=` else {
`+Q+"}"),ae+`
`},v=function(O,w){const Q={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[O.getFieldValue("OP")],ae=Q==="=="||Q==="!="?te.EQUALITY:te.RELATIONAL,Ae=w.valueToCode(O,"A",ae)||"0";return O=w.valueToCode(O,"B",ae)||"0",[Ae+" "+Q+" "+O,ae]},A=function(O,w){const Q=O.getFieldValue("OP")==="AND"?"&&":"||",ae=Q==="&&"?te.LOGICAL_AND:te.LOGICAL_OR;let Ae=w.valueToCode(O,"A",ae);return O=w.valueToCode(O,"B",ae),Ae||O?(w=Q==="&&"?"true":"false",Ae||(Ae=w),O||(O=w)):O=Ae="false",[Ae+" "+Q+" "+O,ae]},m=function(O,w){const Q=te.LOGICAL_NOT;return["!"+(w.valueToCode(O,"BOOL",Q)||"true"),Q]},y=function(O,w){return[O.getFieldValue("BOOL")==="TRUE"?"true":"false",te.ATOMIC]},H=function(O,w){return["null",te.ATOMIC]},G=function(O,w){const Q=w.valueToCode(O,"IF",te.CONDITIONAL)||"false",ae=w.valueToCode(O,"THEN",te.CONDITIONAL)||"null";return O=w.valueToCode(O,"ELSE",te.CONDITIONAL)||"null",[Q+" ? "+ae+" : "+O,te.CONDITIONAL]},k=function(O,w){let Q;Q=O.getField("TIMES")?String(Number(O.getFieldValue("TIMES"))):w.valueToCode(O,"TIMES",te.ASSIGNMENT)||"0";let ae=w.statementToCode(O,"DO");ae=w.addLoopTrap(ae,O),O="";const Ae=w.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let Xe=Q;return Q.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(Q)||(Xe=w.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+Xe+" = "+Q+`;
`),O+("for (var "+Ae+" = 0; "+Ae+" < "+Xe+"; "+Ae+`++) {
`+ae+`}
`)},F=function(O,w){const Q=O.getFieldValue("MODE")==="UNTIL";let ae=w.valueToCode(O,"BOOL",Q?te.LOGICAL_NOT:te.NONE)||"false",Ae=w.statementToCode(O,"DO");return Ae=w.addLoopTrap(Ae,O),Q&&(ae="!"+ae),"while ("+ae+`) {
`+Ae+`}
`},B=function(O,w){var Q=w.getVariableName(O.getFieldValue("VAR")),ae=w.valueToCode(O,"FROM",te.ASSIGNMENT)||"0",Ae=w.valueToCode(O,"TO",te.ASSIGNMENT)||"0";const Xe=w.valueToCode(O,"BY",te.ASSIGNMENT)||"1";let rt=w.statementToCode(O,"DO");if(rt=w.addLoopTrap(rt,O),i.isNumber$$module$build$src$core$utils$string(ae)&&i.isNumber$$module$build$src$core$utils$string(Ae)&&i.isNumber$$module$build$src$core$utils$string(Xe))w=Number(ae)<=Number(Ae),O="for ("+Q+" = "+ae+"; "+Q+(w?" <= ":" >= ")+Ae+"; "+Q,Q=Math.abs(Number(Xe)),O=Q===1?O+(w?"++":"--"):O+((w?" += ":" -= ")+Q),O+=`) {
`+rt+`}
`;else{O="";let Nr=ae;ae.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(ae)||(Nr=w.nameDB_.getDistinctName(Q+"_start",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+Nr+" = "+ae+`;
`),ae=Ae,Ae.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(Ae)||(ae=w.nameDB_.getDistinctName(Q+"_end",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+ae+" = "+Ae+`;
`),Ae=w.nameDB_.getDistinctName(Q+"_inc",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+Ae+" = ",O=i.isNumber$$module$build$src$core$utils$string(Xe)?O+(Math.abs(Number(Xe))+`;
`):O+("Math.abs("+Xe+`);
`),O+="if ("+Nr+" > "+ae+`) {
`,O+=w.INDENT+Ae+" = -"+Ae+`;
`,O=O+`}
for (`+(Q+" = "+Nr+"; "+Ae+" >= 0 ? "+Q+" <= "+ae+" : "+Q+" >= "+ae+"; "+Q+" += "+Ae+`) {
`+rt+`}
`)}return O},re=function(O,w){const Q=w.getVariableName(O.getFieldValue("VAR"));var ae=w.valueToCode(O,"LIST",te.ASSIGNMENT)||"[]";let Ae=w.statementToCode(O,"DO");Ae=w.addLoopTrap(Ae,O),O="";let Xe=ae;return ae.match(/^\w+$/)||(Xe=w.nameDB_.getDistinctName(Q+"_list",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+Xe+" = "+ae+`;
`),ae=w.nameDB_.getDistinctName(Q+"_index",i.NameType$$module$build$src$core$names.VARIABLE),Ae=w.INDENT+Q+" = "+Xe+"["+ae+`];
`+Ae,O+("for (var "+ae+" in "+Xe+`) {
`+Ae+`}
`)},ne=function(O,w){let Q="";if(w.STATEMENT_PREFIX&&(Q+=w.injectId(w.STATEMENT_PREFIX,O)),w.STATEMENT_SUFFIX&&(Q+=w.injectId(w.STATEMENT_SUFFIX,O)),w.STATEMENT_PREFIX){const ae=O.getSurroundLoop();ae&&!ae.suppressPrefixSuffix&&(Q+=w.injectId(w.STATEMENT_PREFIX,ae))}switch(O.getFieldValue("FLOW")){case"BREAK":return Q+`break;
`;case"CONTINUE":return Q+`continue;
`}throw Error("Unknown flow statement.")},ee=function(O,w){return O=Number(O.getFieldValue("NUM")),[String(O),O>=0?te.ATOMIC:te.UNARY_NEGATION]},me=function(O,w){var Q={ADD:[" + ",te.ADDITION],MINUS:[" - ",te.SUBTRACTION],MULTIPLY:[" * ",te.MULTIPLICATION],DIVIDE:[" / ",te.DIVISION],POWER:[null,te.NONE]}[O.getFieldValue("OP")];const ae=Q[0];Q=Q[1];const Ae=w.valueToCode(O,"A",Q)||"0";return O=w.valueToCode(O,"B",Q)||"0",ae?[Ae+ae+O,Q]:["Math.pow("+Ae+", "+O+")",te.FUNCTION_CALL]},we=function(O,w){const Q=O.getFieldValue("OP");let ae;if(Q==="NEG")return O=w.valueToCode(O,"NUM",te.UNARY_NEGATION)||"0",O[0]==="-"&&(O=" "+O),["-"+O,te.UNARY_NEGATION];switch(O=Q==="SIN"||Q==="COS"||Q==="TAN"?w.valueToCode(O,"NUM",te.DIVISION)||"0":w.valueToCode(O,"NUM",te.NONE)||"0",Q){case"ABS":ae="Math.abs("+O+")";break;case"ROOT":ae="Math.sqrt("+O+")";break;case"LN":ae="Math.log("+O+")";break;case"EXP":ae="Math.exp("+O+")";break;case"POW10":ae="Math.pow(10,"+O+")";break;case"ROUND":ae="Math.round("+O+")";break;case"ROUNDUP":ae="Math.ceil("+O+")";break;case"ROUNDDOWN":ae="Math.floor("+O+")";break;case"SIN":ae="Math.sin("+O+" / 180 * Math.PI)";break;case"COS":ae="Math.cos("+O+" / 180 * Math.PI)";break;case"TAN":ae="Math.tan("+O+" / 180 * Math.PI)"}if(ae)return[ae,te.FUNCTION_CALL];switch(Q){case"LOG10":ae="Math.log("+O+") / Math.log(10)";break;case"ASIN":ae="Math.asin("+O+") / Math.PI * 180";break;case"ACOS":ae="Math.acos("+O+") / Math.PI * 180";break;case"ATAN":ae="Math.atan("+O+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+Q)}return[ae,te.DIVISION]},Oe=function(O,w){return{PI:["Math.PI",te.MEMBER],E:["Math.E",te.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",te.DIVISION],SQRT2:["Math.SQRT2",te.MEMBER],SQRT1_2:["Math.SQRT1_2",te.MEMBER],INFINITY:["Infinity",te.ATOMIC]}[O.getFieldValue("CONSTANT")]},ke=function(O,w){var Q={EVEN:[" % 2 === 0",te.MODULUS,te.EQUALITY],ODD:[" % 2 === 1",te.MODULUS,te.EQUALITY],WHOLE:[" % 1 === 0",te.MODULUS,te.EQUALITY],POSITIVE:[" > 0",te.RELATIONAL,te.RELATIONAL],NEGATIVE:[" < 0",te.RELATIONAL,te.RELATIONAL],DIVISIBLE_BY:[null,te.MODULUS,te.EQUALITY],PRIME:[null,te.NONE,te.FUNCTION_CALL]};const ae=O.getFieldValue("PROPERTY"),[Ae,Xe,rt]=Q[ae];return Q=w.valueToCode(O,"NUMBER_TO_CHECK",Xe)||"0",ae==="PRIME"?O=w.provideFunction_("mathIsPrime",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+Q+")":ae==="DIVISIBLE_BY"?(O=w.valueToCode(O,"DIVISOR",te.MODULUS)||"0",O=Q+" % "+O+" === 0"):O=Q+Ae,[O,rt]},ye=function(O,w){const Q=w.valueToCode(O,"DELTA",te.ADDITION)||"0";return O=w.getVariableName(O.getFieldValue("VAR")),O+" = (typeof "+O+" === 'number' ? "+O+" : 0) + "+Q+`;
`},Re=function(O,w){var Q=O.getFieldValue("OP");switch(Q){case"SUM":O=w.valueToCode(O,"LIST",te.MEMBER)||"[]",O+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":O=w.valueToCode(O,"LIST",te.NONE)||"[]",O="Math.min.apply(null, "+O+")";break;case"MAX":O=w.valueToCode(O,"LIST",te.NONE)||"[]",O="Math.max.apply(null, "+O+")";break;case"AVERAGE":Q=w.provideFunction_("mathMean",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=Q+"("+O+")";break;case"MEDIAN":Q=w.provideFunction_("mathMedian",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=Q+"("+O+")";break;case"MODE":Q=w.provideFunction_("mathModes",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=Q+"("+O+")";break;case"STD_DEV":Q=w.provideFunction_("mathStandardDeviation",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=Q+"("+O+")";break;case"RANDOM":Q=w.provideFunction_("mathRandomList",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=Q+"("+O+")";break;default:throw Error("Unknown operator: "+Q)}return[O,te.FUNCTION_CALL]},K=function(O,w){const Q=w.valueToCode(O,"DIVIDEND",te.MODULUS)||"0";return O=w.valueToCode(O,"DIVISOR",te.MODULUS)||"0",[Q+" % "+O,te.MODULUS]},z=function(O,w){const Q=w.valueToCode(O,"VALUE",te.NONE)||"0",ae=w.valueToCode(O,"LOW",te.NONE)||"0";return O=w.valueToCode(O,"HIGH",te.NONE)||"Infinity",["Math.min(Math.max("+Q+", "+ae+"), "+O+")",te.FUNCTION_CALL]},oe=function(O,w){const Q=w.valueToCode(O,"FROM",te.NONE)||"0";return O=w.valueToCode(O,"TO",te.NONE)||"0",[w.provideFunction_("mathRandomInt",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+Q+", "+O+")",te.FUNCTION_CALL]},M=function(O,w){return["Math.random()",te.FUNCTION_CALL]},Z=function(O,w){const Q=w.valueToCode(O,"X",te.NONE)||"0";return["Math.atan2("+(w.valueToCode(O,"Y",te.NONE)||"0")+", "+Q+") / Math.PI * 180",te.DIVISION]},J=function(O,w){const Q=w.getProcedureName(O.getFieldValue("NAME"));var ae="";w.STATEMENT_PREFIX&&(ae+=w.injectId(w.STATEMENT_PREFIX,O)),w.STATEMENT_SUFFIX&&(ae+=w.injectId(w.STATEMENT_SUFFIX,O)),ae&&(ae=w.prefixLines(ae,w.INDENT));let Ae="";w.INFINITE_LOOP_TRAP&&(Ae=w.prefixLines(w.injectId(w.INFINITE_LOOP_TRAP,O),w.INDENT));let Xe="";O.getInput("STACK")&&(Xe=w.statementToCode(O,"STACK"));let rt="";O.getInput("RETURN")&&(rt=w.valueToCode(O,"RETURN",te.NONE)||"");let Nr="";Xe&&rt&&(Nr=ae),rt&&(rt=w.INDENT+"return "+rt+`;
`);const Ei=[],qi=O.getVars();for(let Sr=0;Sr<qi.length;Sr++)Ei[Sr]=w.getVariableName(qi[Sr]);return ae="function "+Q+"("+Ei.join(", ")+`) {
`+ae+Ae+Xe+Nr+rt+"}",ae=w.scrub_(O,ae),w.definitions_["%"+Q]=ae,null},q=function(O,w){const Q=w.getProcedureName(O.getFieldValue("NAME")),ae=[],Ae=O.getVars();for(let Xe=0;Xe<Ae.length;Xe++)ae[Xe]=w.valueToCode(O,"ARG"+Xe,te.NONE)||"null";return[Q+"("+ae.join(", ")+")",te.FUNCTION_CALL]},he=function(O,w){return w.forBlock.procedures_callreturn(O,w)[0]+`;
`},xe=function(O,w){let Q="if ("+(w.valueToCode(O,"CONDITION",te.NONE)||"false")+`) {
`;return w.STATEMENT_SUFFIX&&(Q+=w.prefixLines(w.injectId(w.STATEMENT_SUFFIX,O),w.INDENT)),O.hasReturnValue_?(O=w.valueToCode(O,"VALUE",te.NONE)||"null",Q+=w.INDENT+"return "+O+`;
`):Q+=w.INDENT+`return;
`,Q+`}
`},Pe=function(O,w){return[w.quote_(O.getFieldValue("TEXT")),te.ATOMIC]},be=function(O,w){switch(O.itemCount_){case 0:return["''",te.ATOMIC];case 1:return O=w.valueToCode(O,"ADD0",te.NONE)||"''",D(O);case 2:var Q=w.valueToCode(O,"ADD0",te.NONE)||"''";return O=w.valueToCode(O,"ADD1",te.NONE)||"''",[D(Q)[0]+" + "+D(O)[0],te.ADDITION];default:Q=Array(O.itemCount_);for(let ae=0;ae<O.itemCount_;ae++)Q[ae]=w.valueToCode(O,"ADD"+ae,te.NONE)||"''";return["["+Q.join(",")+"].join('')",te.FUNCTION_CALL]}},ce=function(O,w){const Q=w.getVariableName(O.getFieldValue("VAR"));return O=w.valueToCode(O,"TEXT",te.NONE)||"''",Q+" += "+D(O)[0]+`;
`},et=function(O,w){return[(w.valueToCode(O,"VALUE",te.MEMBER)||"''")+".length",te.MEMBER]},N=function(O,w){return["!"+(w.valueToCode(O,"VALUE",te.MEMBER)||"''")+".length",te.LOGICAL_NOT]},fe=function(O,w){const Q=O.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ae=w.valueToCode(O,"FIND",te.NONE)||"''";return w=(w.valueToCode(O,"VALUE",te.MEMBER)||"''")+"."+Q+"("+ae+")",O.workspace.options.oneBasedIndex?[w+" + 1",te.ADDITION]:[w,te.FUNCTION_CALL]},He=function(O,w){const Q=O.getFieldValue("WHERE")||"FROM_START",ae=w.valueToCode(O,"VALUE",Q==="RANDOM"?te.NONE:te.MEMBER)||"''";switch(Q){case"FIRST":return[ae+".charAt(0)",te.FUNCTION_CALL];case"LAST":return[ae+".slice(-1)",te.FUNCTION_CALL];case"FROM_START":return O=w.getAdjusted(O,"AT"),[ae+".charAt("+O+")",te.FUNCTION_CALL];case"FROM_END":return O=w.getAdjusted(O,"AT",1,!0),[ae+".slice("+O+").charAt(0)",te.FUNCTION_CALL];case"RANDOM":return[w.provideFunction_("textRandomLetter",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+ae+")",te.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},Me=function(O,w){var Q={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const ae=O.getFieldValue("WHERE1"),Ae=O.getFieldValue("WHERE2");var Xe=ae!=="FROM_END"&&ae!=="LAST"&&Ae!=="FROM_END"&&Ae!=="LAST",rt=w.valueToCode(O,"STRING",Xe?te.MEMBER:te.NONE)||"''";if(ae==="FIRST"&&Ae==="LAST")return[rt,te.NONE];if(rt.match(/^'?\w+'?$/)||Xe){switch(ae){case"FROM_START":Q=w.getAdjusted(O,"AT1");break;case"FROM_END":Q=w.getAdjusted(O,"AT1",1,!1,te.SUBTRACTION),Q=rt+".length - "+Q;break;case"FIRST":Q="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Ae){case"FROM_START":w=w.getAdjusted(O,"AT2",1);break;case"FROM_END":w=w.getAdjusted(O,"AT2",0,!1,te.SUBTRACTION),w=rt+".length - "+w;break;case"LAST":w=rt+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}rt=rt+".slice("+Q+", "+w+")"}else Xe=w.getAdjusted(O,"AT1"),O=w.getAdjusted(O,"AT2"),rt=w.provideFunction_("subsequence"+Q[ae]+Q[Ae],`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(sequence${ae==="FROM_END"||ae==="FROM_START"?", at1":""}${Ae==="FROM_END"||Ae==="FROM_START"?", at2":""}) {
  var start = ${ie("sequence",ae,"at1")};
  var end = ${ie("sequence",Ae,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+rt+(ae==="FROM_END"||ae==="FROM_START"?", "+Xe:"")+(Ae==="FROM_END"||Ae==="FROM_START"?", "+O:"")+")";return[rt,te.FUNCTION_CALL]},Ze=function(O,w){const Q={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[O.getFieldValue("CASE")];return O=w.valueToCode(O,"TEXT",Q?te.MEMBER:te.NONE)||"''",[Q?O+Q:w.provideFunction_("textToTitleCase",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+O+")",te.FUNCTION_CALL]},Ce=function(O,w){const Q={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[O.getFieldValue("MODE")];return[(w.valueToCode(O,"TEXT",te.MEMBER)||"''")+Q,te.FUNCTION_CALL]},ut=function(O,w){return"window.alert("+(w.valueToCode(O,"TEXT",te.NONE)||"''")+`);
`},Bt=function(O,w){return w="window.prompt("+(O.getField("TEXT")?w.quote_(O.getFieldValue("TEXT")):w.valueToCode(O,"TEXT",te.NONE)||"''")+")",O.getFieldValue("TYPE")==="NUMBER"&&(w="Number("+w+")"),[w,te.FUNCTION_CALL]},tr=function(O,w){const Q=w.valueToCode(O,"TEXT",te.NONE)||"''";return O=w.valueToCode(O,"SUB",te.NONE)||"''",[w.provideFunction_("textCount",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+Q+", "+O+")",te.FUNCTION_CALL]},hr=function(O,w){const Q=w.valueToCode(O,"TEXT",te.NONE)||"''",ae=w.valueToCode(O,"FROM",te.NONE)||"''";return O=w.valueToCode(O,"TO",te.NONE)||"''",[w.provideFunction_("textReplace",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+Q+", "+ae+", "+O+")",te.FUNCTION_CALL]},wt=function(O,w){return[(w.valueToCode(O,"TEXT",te.MEMBER)||"''")+".split('').reverse().join('')",te.FUNCTION_CALL]},Zr=function(O,w){return[w.getVariableName(O.getFieldValue("VAR")),te.ATOMIC]},Wt=function(O,w){const Q=w.valueToCode(O,"VALUE",te.ASSIGNMENT)||"0";return w.getVariableName(O.getFieldValue("VAR"))+" = "+Q+`;
`},te;(function(O){O[O.ATOMIC=0]="ATOMIC",O[O.NEW=1.1]="NEW",O[O.MEMBER=1.2]="MEMBER",O[O.FUNCTION_CALL=2]="FUNCTION_CALL",O[O.INCREMENT=3]="INCREMENT",O[O.DECREMENT=3]="DECREMENT",O[O.BITWISE_NOT=4.1]="BITWISE_NOT",O[O.UNARY_PLUS=4.2]="UNARY_PLUS",O[O.UNARY_NEGATION=4.3]="UNARY_NEGATION",O[O.LOGICAL_NOT=4.4]="LOGICAL_NOT",O[O.TYPEOF=4.5]="TYPEOF",O[O.VOID=4.6]="VOID",O[O.DELETE=4.7]="DELETE",O[O.AWAIT=4.8]="AWAIT",O[O.EXPONENTIATION=5]="EXPONENTIATION",O[O.MULTIPLICATION=5.1]="MULTIPLICATION",O[O.DIVISION=5.2]="DIVISION",O[O.MODULUS=5.3]="MODULUS",O[O.SUBTRACTION=6.1]="SUBTRACTION",O[O.ADDITION=6.2]="ADDITION",O[O.BITWISE_SHIFT=7]="BITWISE_SHIFT",O[O.RELATIONAL=8]="RELATIONAL",O[O.IN=8]="IN",O[O.INSTANCEOF=8]="INSTANCEOF",O[O.EQUALITY=9]="EQUALITY",O[O.BITWISE_AND=10]="BITWISE_AND",O[O.BITWISE_XOR=11]="BITWISE_XOR",O[O.BITWISE_OR=12]="BITWISE_OR",O[O.LOGICAL_AND=13]="LOGICAL_AND",O[O.LOGICAL_OR=14]="LOGICAL_OR",O[O.CONDITIONAL=15]="CONDITIONAL",O[O.ASSIGNMENT=16]="ASSIGNMENT",O[O.YIELD=17]="YIELD",O[O.COMMA=18]="COMMA",O[O.NONE=99]="NONE"})(te||(te={}));var dr=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(O="JavaScript"){super(O),this.ORDER_OVERRIDES=[[te.FUNCTION_CALL,te.MEMBER],[te.FUNCTION_CALL,te.FUNCTION_CALL],[te.MEMBER,te.MEMBER],[te.MEMBER,te.FUNCTION_CALL],[te.LOGICAL_NOT,te.LOGICAL_NOT],[te.MULTIPLICATION,te.MULTIPLICATION],[te.ADDITION,te.ADDITION],[te.LOGICAL_AND,te.LOGICAL_AND],[te.LOGICAL_OR,te.LOGICAL_OR]],this.isInitialized=!1;for(const w in te)O=te[w],typeof O!="string"&&(this["ORDER_"+w]=O);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(O){super.init(O),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(O.getVariableMap()),this.nameDB_.populateVariables(O),this.nameDB_.populateProcedures(O);const w=[];var Q=i.allDeveloperVariables$$module$build$src$core$variables(O);for(let ae=0;ae<Q.length;ae++)w.push(this.nameDB_.getName(Q[ae],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(O=i.allUsedVarModels$$module$build$src$core$variables(O),Q=0;Q<O.length;Q++)w.push(this.nameDB_.getName(O[Q].getId(),i.NameType$$module$build$src$core$names.VARIABLE));w.length&&(this.definitions_.variables="var "+w.join(", ")+";"),this.isInitialized=!0}finish(O){const w=Object.values(this.definitions_);return super.finish(O),this.isInitialized=!1,this.nameDB_.reset(),w.join(`

`)+`


`+O}scrubNakedValue(O){return O+`;
`}quote_(O){return O=O.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+O+"'"}multiline_quote_(O){return O.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(O,w,Q=!1){let ae="";if(!O.outputConnection||!O.outputConnection.targetConnection){var Ae=O.getCommentText();Ae&&(Ae=i.wrap$$module$build$src$core$utils$string(Ae,this.COMMENT_WRAP-3),ae+=this.prefixLines(Ae+`
`,"// "));for(let Xe=0;Xe<O.inputList.length;Xe++)O.inputList[Xe].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(Ae=O.inputList[Xe].connection.targetBlock())&&(Ae=this.allNestedComments(Ae))&&(ae+=this.prefixLines(Ae,"// "))}return O=O.nextConnection&&O.nextConnection.targetBlock(),Q=Q?"":this.blockToCode(O),ae+w+Q}getAdjusted(O,w,Q=0,ae=!1,Ae=te.NONE){O.workspace.options.oneBasedIndex&&Q--;const Xe=O.workspace.options.oneBasedIndex?"1":"0";let rt=Ae;return Q>0?rt=te.ADDITION:Q<0?rt=te.SUBTRACTION:ae&&(rt=te.UNARY_NEGATION),O=this.valueToCode(O,w,rt)||Xe,Q===0&&!ae?O:i.isNumber$$module$build$src$core$utils$string(O)?(O=String(Number(O)+Q),ae&&(O=String(-Number(O))),O):(Q>0?O=`${O} + ${Q}`:Q<0&&(O=`${O} - ${-Q}`),ae&&(O=Q?`-(${O})`:`-${O}`),Math.floor(Ae)>=Math.floor(rt)&&(O=`(${O})`),O)}},Tn=function(O,w,Q){return w==="FIRST"?"0":w==="FROM_END"?O+".length - 1 - "+Q:w==="LAST"?O+".length - 1":Q},ct={};ct.lists_create_empty=l,ct.lists_create_with=c,ct.lists_getIndex=T,ct.lists_getSublist=E,ct.lists_indexOf=_,ct.lists_isEmpty=f,ct.lists_length=h,ct.lists_repeat=u,ct.lists_reverse=L,ct.lists_setIndex=g,ct.lists_sort=S,ct.lists_split=R;var Ot={};Ot.controls_if=x,Ot.controls_ifelse=x,Ot.logic_boolean=y,Ot.logic_compare=v,Ot.logic_negate=m,Ot.logic_null=H,Ot.logic_operation=A,Ot.logic_ternary=G;var Qe={};Qe.controls_flow_statements=ne,Qe.controls_for=B,Qe.controls_forEach=re,Qe.controls_repeat=k,Qe.controls_repeat_ext=k,Qe.controls_whileUntil=F;var ot={};ot.math_arithmetic=me,ot.math_atan2=Z,ot.math_change=ye,ot.math_constant=Oe,ot.math_constrain=z,ot.math_modulo=K,ot.math_number=ee,ot.math_number_property=ke,ot.math_on_list=Re,ot.math_random_float=M,ot.math_random_int=oe,ot.math_round=we,ot.math_single=we,ot.math_trig=we;var Mt={};Mt.procedures_callnoreturn=he,Mt.procedures_callreturn=q,Mt.procedures_defnoreturn=J,Mt.procedures_defreturn=J,Mt.procedures_ifreturn=xe;var I=/^\s*'([^']|\\')*'\s*$/,D=function(O){return I.test(O)?[O,te.ATOMIC]:["String("+O+")",te.FUNCTION_CALL]},ie=function(O,w,Q){return w==="FIRST"?"0":w==="FROM_END"?O+".length - 1 - "+Q:w==="LAST"?O+".length - 1":Q},le={};le.text=Pe,le.text_append=ce,le.text_changeCase=Ze,le.text_charAt=He,le.text_count=tr,le.text_getSubstring=Me,le.text_indexOf=fe,le.text_isEmpty=N,le.text_join=be,le.text_length=et,le.text_print=ut,le.text_prompt=Bt,le.text_prompt_ext=Bt,le.text_replace=hr,le.text_reverse=wt,le.text_trim=Ce;var Be={};Be.variables_get=Zr,Be.variables_set=Wt;var Et={};Et.variables_get_dynamic=Zr,Et.variables_set_dynamic=Wt;var An=new dr,Mn=Object.assign({},ct,Ot,Qe,ot,Mt,le,Be,Et);for(const O in Mn)An.forBlock[O]=Mn[O];var Dn={};return Dn.JavascriptGenerator=dr,Dn.Order=te,Dn.javascriptGenerator=An,Dn.__namespace__=i,Dn})})(Ck);var mre=Ck.exports;const $re=yh(mre),{JavascriptGenerator:Poe,Order:It,javascriptGenerator:rh}=$re;function c$(t,s){rh.forBlock[t]||(rh.forBlock[t]=function(r){const i=[];for(let l=0;l<50&&r.getInput(`ARG${l}`);l++)i.push(rh.valueToCode(r,`ARG${l}`,It.NONE)||"");for(;i.length&&i[i.length-1]==="";)i.pop();return[`${s}(${i.join(",")})`,It.FUNCTION_CALL]})}function Ire(t){const s=t.toUpperCase();if(s==="LET"||s==="LAMBDA")return!0;const r=`frockly_${s}`;if(zt[r])return c$(r,s),!0;const i=DI(s);return i?(vk([i]),c$(r,s),!0):!1}const u$=new Map;function Ore(t){u$.clear();for(const s of t)u$.set(s.name,s)}function DI(t){return u$.get(t.toUpperCase())}const Sre="ARG";function i_(t){return`${Sre}${t}`}function PI(t,s,r){const i=Math.max(0,r.min??0);r.variadic?s=Math.max(i,s):s=i;const l=r.variadic?r.max??0:i;r.variadic&&l>0&&(s=Math.min(s,l));const c=[];for(let h=0;h<512;h++){const f=t.getInput(i_(h));if(!f)break;c[h]=f.connection?.targetConnection??null}for(let h=0;h<512;h++){const f=i_(h);if(!t.getInput(f))break;t.removeInput(f,!0)}for(let h=0;h<s;h++)t.appendValueInput(i_(h));for(let h=0;h<s;h++){const f=c[h];if(!f)continue;const T=t.getInput(i_(h))?.connection;if(T)try{T.isConnected()&&T.disconnect(),T.connect(f)}catch{}}const u=t.workspace;u?.render&&u.render()}const J0="frockly_fn_dynargs";function Da(t,s,r){const l=t.getField(s)?.getSvgRoot?.();l&&(l.style.display=r?"":"none")}function Rre(t){return t.getInput("FN_HEADER")||t.appendDummyInput("FN_HEADER"),t.getInput("FN_HEADER")}let Kx=class extends Fl{onClick;constructor(s,r){super(s),this.onClick=r}onMouseDown_(s){s.preventDefault(),s.stopPropagation(),this.onClick()}};function q0(t){const s=t.type.replace(/^frockly_/,"");return DI(s)??{name:s,min:1,variadic:!1,max:0,step:1}}function xk(t,s,r){return Math.max(s,Math.min(r,t))}function cc(t){return Math.max(0,Number(t?.min??0))}function Nk(t){const s=Number(t?.max??0);return s>0?s:50}function Lre(t){const s=Number(t?.step??1);return Number.isFinite(s)&&s>0?s:1}function Are(t,s){t.getInput("DYNCTRL")&&t.removeInput("DYNCTRL",!0);const r=Rre(t);if(!s.variadic){Da(t,"BTN_MINUS",!1),Da(t,"BTN_PLUS",!1),Da(t,"ARGC_LABEL",!1);return}t.getField("BTN_MINUS")||(r.appendField(new Fl(" "),"SP_DYN"),r.appendField(new Kx("",()=>Jx(t,s,-1)),"BTN_MINUS"),r.appendField(new Fl(""),"ARGC_LABEL"),r.appendField(new Kx("+",()=>Jx(t,s,1)),"BTN_PLUS")),Da(t,"BTN_MINUS",!0),Da(t,"BTN_PLUS",!0),Da(t,"ARGC_LABEL",!0)}function bk(t,s){if(!s.variadic)return;const r=cc(s),i=t.__argc??r;t.getField("ARGC_LABEL")?.setValue(String(i))}function Jx(t,s,r){const i=cc(s),l=Nk(s),c=Lre(s),u=t.__argc??i,h=xk(u+r*c,i,l);h!==u&&(kt.setGroup(!0),t.__argc=h,PI(t,h,s),bk(t,s),t.render?.(),kt.setGroup(!1))}function qx(t,s,r){const i=cc(s),l=Nk(s);let c=r;s.variadic?c=xk(c,i,l):c=i,t.__argc=c,Are(t,s),PI(t,c,s),bk(t,s),t.render?.()}function vre(){const t=Dr;if(!t?.mutators_?.[J0]&&!t?.extensions_?.[J0])try{Dr.registerMutator(J0,{saveExtraState(){const s=q0(this),r=cc(s);return{argc:this.__argc??r}},loadExtraState(s){const r=q0(this),i=cc(r),l=Number.isFinite(Number(s?.argc))?Number(s.argc):i;qx(this,r,l)}},function(){const s=q0(this);qx(this,s,cc(s))})}catch(s){if(String(s?.message??s).includes("already registered"))return;throw s}}const ar=rh,Ms=ar;function Cre(t){return`"${(t??"").replace(/"/g,'""')}"`}function xre(){if(!ar?.forBlock)throw new Error("javascriptGenerator.forBlock is missing (Blockly version/import mismatch)");ar.forBlock.basic_start=function(s){return`=${ar.valueToCode(s,"EXPR",It.NONE)||""}
`},ar.forBlock.basic_number=function(s){return[String(s.getFieldValue("NUM")??"").trim(),It.ATOMIC]},ar.forBlock.basic_string=function(s){const r=String(s.getFieldValue("STR")??"");return[Cre(r),It.ATOMIC]},ar.forBlock.basic_cell=function(s){return[String(s.getFieldValue("CELL")??"").trim(),It.ATOMIC]},ar.forBlock.basic_range=function(s){return[String(s.getFieldValue("RANGE")??"").trim(),It.ATOMIC]},ar.forBlock.basic_arith=function(s){const r=String(s.getFieldValue("OP")??"+"),i=r==="*"||r==="/"?It.MULTIPLICATION:It.ADDITION,l=ar.valueToCode(s,"A",i)||"",c=ar.valueToCode(s,"B",i)||"";return[`${l}${r}${c}`,i]},ar.forBlock.basic_cmp=function(s){const r=String(s.getFieldValue("OP")??"="),i=ar.valueToCode(s,"A",It.RELATIONAL)||"",l=ar.valueToCode(s,"B",It.RELATIONAL)||"";return[`${i}${r}${l}`,It.RELATIONAL]},ar.forBlock.basic_paren=function(s){return[`(${ar.valueToCode(s,"INNER",It.NONE)||""})`,It.ATOMIC]},ar.forBlock.basic_name=function(s){return[String(s.getFieldValue("NAME")??"").trim(),It.ATOMIC]},ar.forBlock.basic_raw=function(s){return[String(s.getFieldValue("RAW")??""),It.ATOMIC]},ar.forBlock.basic_raw_call=function(s){const r=(s.getFieldValue("FN")||"FOOBAR").trim(),i=[];for(let l=0;l<50&&s.getInput(`ARG${l}`);l++)i.push(ar.valueToCode(s,`ARG${l}`,It.NONE)||"");for(;i.length&&i[i.length-1]==="";)i.pop();return[`${r}(${i.join(",")})`,It.FUNCTION_CALL]};function t(s){const r=a$?.inputTypes?.VALUE,i=s.inputList.filter(l=>l.type===r).map(l=>l.name);for(const l of i){const c=(ar.valueToCode(s,l,It.NONE)??"").trim();if(c)return c}return""}ar.forBlock.fn_root=function(s){const r=t(s);return r?`${r}
`:""}}function Nre(t){return t.type.startsWith("frockly_")?t.type.slice(8):t.type}function bre(t){return(t??"").replace(/\s+/g," ").trim()}function yre(t,s=90){const r=bre(t);return r.length>s?r.slice(0,s-1)+"ELLIPSIS":r}function kre(t){const s=Ms.blockToCode(t),r=Array.isArray(s)?s[0]:s;return String(r??"")}function wre(){Dr?.extensions_?.frockly_fn_ui||Dr.register("frockly_fn_ui",function(){const s=this.getInput("FN_HEADER")??this.appendDummyInput("FN_HEADER");this.getField("FN_NAME")||s.insertFieldAt(0,Nre(this),"FN_NAME");const r=()=>{let i="";try{i=kre(this)}catch{i="(preview error)"}this.__frocklyCollapsedText="="+yre(i)};this.setOnChange(i=>{if(!i||i.blockId!==this.id)return;if(i.type===kt.BLOCK_CHANGE&&i.element==="collapsed"){this.isCollapsed?.()??this.collapsed??!1?r():this.__frocklyCollapsedText=void 0,setTimeout(()=>this.workspace?.render?.(),0);return}if(!(this.isCollapsed?.()??this.collapsed??!1))return;(i.type===kt.BLOCK_MOVE||i.type===kt.BLOCK_CREATE||i.type===kt.BLOCK_DELETE||i.type===kt.BLOCK_CHANGE&&i.element!=="field")&&(r(),setTimeout(()=>this.workspace?.render?.(),0))})})}async function Mre(){vre(),wre();const t=await C1();Ore(t),vk(t);const s=new Set(["LET","LAMBDA"]);for(const r of t){const i=r.name.toUpperCase();if(s.has(i))continue;const l=`frockly_${i}`;c$(l,i)}}const Dre=270,Zx=210,Qx=60,Pre=30,Fre=0,Bre=180,eN=120,Ure=100,Hre=40;let o_=class extends Fl{onClick;constructor(s,r){super(s),this.onClick=r}onMouseDown_(s){s.preventDefault(),s.stopPropagation(),this.onClick()}};function yk(t){const s=t.lastIndexOf("!");return s>=0?{prefix:t.slice(0,s+1),core:t.slice(s+1)}:{prefix:"",core:t}}function h$(t){const s=t.trim().match(/^(\$?)([A-Z]+)(\$?)(\d+)$/);return s?{colAbs:!!s[1],col:s[2],rowAbs:!!s[3],row:s[4]}:null}function Gre(t){return`${t.colAbs?"$":""}${t.col}${t.rowAbs?"$":""}${t.row}`}function Za(t,s){const{prefix:r,core:i}=yk(t);if(i.includes(":")){const[c,u]=i.split(":");return`${r}${Za(c,s).replace(/^.*!/,"")}:${Za(u,s).replace(/^.*!/,"")}`}const l=h$(i);return l?(s==="col"?l.colAbs=!l.colAbs:l.rowAbs=!l.rowAbs,`${r}${Gre(l)}`):t}function Vre(t){const{core:s}=yk(t);if(s.includes(":")){const[i]=s.split(":"),l=h$(i);return{col:!!l?.colAbs,row:!!l?.rowAbs}}const r=h$(s);return{col:!!r?.colAbs,row:!!r?.rowAbs}}function go(t,s){const r=String(t.getFieldValue(s)??""),i=Vre(r),l=t.getField("ABS_COL"),c=t.getField("ABS_ROW");l?.setValue(`${i.col?"":""}`),c?.setValue(`${i.row?"":""}`)}function Wre(t){const s=Yr(t);zt.basic_start={init:function(){this.appendValueInput("EXPR").setCheck(null).appendField("="),this.setInputsInline(!0),this.setColour(Dre),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!1),typeof this.setHat=="function"&&this.setHat("cap"),this.setTooltip(s(tt.TOOLTIP_START))}},zt.basic_number={init:function(){this.appendDummyInput().appendField(s(tt.NUMBER)).appendField(new Mi("1"),"NUM"),this.setOutput(!0,null),this.setColour(Qx),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip(s(tt.TOOLTIP_NUMBER))}},zt.basic_string={init:function(){this.appendDummyInput().appendField(s(tt.TEXT)).appendField(new Mi("text"),"STR"),this.setOutput(!0,null),this.setColour(Qx),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip(s(tt.TOOLTIP_STRING))}},zt.basic_cell={init:function(){const r=new Mi("A1",i=>(queueMicrotask(()=>go(this,"CELL")),i));this.appendDummyInput().appendField(s(tt.CELL)).appendField(r,"CELL"),this.appendDummyInput("ABS_CTRL").setAlign(a$.Align.RIGHT).appendField(new o_("",()=>{const i=String(this.getFieldValue("CELL")??""),l=Za(i,"col");this.setFieldValue(l,"CELL"),go(this,"CELL")}),"ABS_COL").appendField(new o_("",()=>{const i=String(this.getFieldValue("CELL")??""),l=Za(i,"row");this.setFieldValue(l,"CELL"),go(this,"CELL")}),"ABS_ROW"),this.setOutput(!0,null),this.setColour(Zx),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip(s(tt.TOOLTIP_CELL)),go(this,"CELL")}},zt.basic_range={init:function(){const r=new Mi("A1:B2",i=>(queueMicrotask(()=>go(this,"RANGE")),i));this.appendDummyInput().appendField(s(tt.RANGE)).appendField(r,"RANGE"),this.appendDummyInput("ABS_CTRL").setAlign(a$.Align.RIGHT).appendField(new o_("",()=>{const i=String(this.getFieldValue("RANGE")??""),l=Za(i,"col");this.setFieldValue(l,"RANGE"),go(this,"RANGE")}),"ABS_COL").appendField(new o_("",()=>{const i=String(this.getFieldValue("RANGE")??""),l=Za(i,"row");this.setFieldValue(l,"RANGE"),go(this,"RANGE")}),"ABS_ROW"),this.setOutput(!0,null),this.setColour(Zx),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip(s(tt.TOOLTIP_RANGE)),go(this,"RANGE")}},zt.basic_arith={init:function(){this.appendValueInput("A").setCheck(null),this.appendDummyInput().appendField(new K0([["+","+"],["-","-"],["*","*"],["/","/"],["^","^"],["&","&"]]),"OP"),this.appendValueInput("B").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(Pre),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip(s(tt.TOOLTIP_ARITH))}},zt.basic_cmp={init:function(){this.appendValueInput("A").setCheck(null),this.appendDummyInput().appendField(new K0([["=","="],["<>","<>"],["<","<"],["<=","<="],[">",">"],[">=",">="]]),"OP"),this.appendValueInput("B").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(Fre),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip(s(tt.TOOLTIP_CMP))}},zt.basic_paren={init:function(){this.appendValueInput("INNER").setCheck(null).appendField("("),this.appendDummyInput().appendField(")"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(Bre),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip(s(tt.TOOLTIP_PAREN))}},zt.basic_raw={init:function(){this.appendDummyInput().appendField("RAW").appendField(new Mi(""),"RAW"),this.setOutput(!0,null),this.setColour(eN),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip("")}},zt.basic_raw_call={init:function(){this.appendDummyInput().appendField("RAWFN").appendField(new Mi("FOOBAR"),"FN"),this.appendValueInput("ARG0").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(eN),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip("")}},zt.basic_bool={init:function(){this.appendDummyInput().appendField(new K0([["TRUE","TRUE"],["FALSE","FALSE"]]),"BOOL"),this.setOutput(!0,null),this.setColour(Ure),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip(s("TOOLTIP_BOOL"))}},zt.basic_var={init:function(){this.appendDummyInput().appendField(s("NAME")).appendField(new Mi("x"),s("NAME")),this.setOutput(!0,"VAR"),this.setColour(Hre),Dr.apply("frockly_basic_ui",this,!1),this.setTooltip("LET / LAMBDA / ")}}}function Xre(){Ms.forBlock.fn_root=function(t){String(t.getFieldValue("NAME")??"").trim();const s=[];let r=t.getInputTargetBlock("PARAMS");for(;r;){if(r.type==="fn_param"){const c=String(r.getFieldValue("NAME")??"").trim();c&&s.push(c)}r=r.getNextBlock()}const i=Ms.valueToCode(t,"BODY",It.NONE)||"";return[`LAMBDA(${[...s,i].join(",")})`,It.FUNCTION_CALL]},Ms.forBlock.fn_param=function(t){return["",It.ATOMIC]},Ms.forBlock.fn_call=function(t){const s=String(t.getFieldValue("FN")??"").trim()||"A",r=[];for(let i=0;i<50&&t.getInput(`ARG${i}`);i++)r.push(Ms.valueToCode(t,`ARG${i}`,It.NONE)||"");for(;r.length&&r[r.length-1]==="";)r.pop();return[`${s}(${r.join(",")})`,It.FUNCTION_CALL]}}function jre(t){return(t??"").replace(/\s+/g," ").trim()}function zre(t,s=90){const r=jre(t);return r.length>s?r.slice(0,s-1)+"ELLIPSIS":r}function Yre(t){const s=Ms.blockToCode(t),r=Array.isArray(s)?s[0]:s;return String(r??"")}function Kre(){try{Dr.register("frockly_basic_ui",function(){const t=()=>{let s="";try{s=Yre(this)}catch{s="(preview error)"}this.__frocklyCollapsedText=zre(s)};this.setOnChange(s=>{if(!s||s.blockId!==this.id)return;if(s.type===kt.BLOCK_CHANGE&&s.element==="collapsed"){this.isCollapsed?.()??this.collapsed??!1?t():this.__frocklyCollapsedText=void 0,setTimeout(()=>this.workspace?.render?.(),0);return}if(!(this.isCollapsed?.()??this.collapsed??!1))return;(s.type===kt.BLOCK_MOVE||s.type===kt.BLOCK_CREATE||s.type===kt.BLOCK_DELETE||s.type===kt.BLOCK_CHANGE&&s.element!=="field")&&(t(),setTimeout(()=>this.workspace?.render?.(),0))})})}catch(t){if(String(t?.message??t).includes("already registered"))return;throw t}}function Jre(t){Kre(),Wre(t),Xre(),xre()}const qre=150;function Zre(){zt.fn_root={init:function(){this.appendDummyInput().appendField("FUNC").appendField(new Mi("A"),"NAME"),this.appendStatementInput("PARAMS").setCheck("FN_PARAM").appendField("params"),this.appendValueInput("BODY").setCheck(null).appendField("body"),this.setColour(qre),this.setDeletable(!1),this.setMovable(!1),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!1),typeof this.setHat=="function"&&this.setHat("cap")}}}const Qre=150;function ene(){zt.fn_param={init:function(){this.appendDummyInput().appendField("param").appendField(new Mi("x"),"NAME"),this.setPreviousStatement(!0,"FN_PARAM"),this.setNextStatement(!0,"FN_PARAM"),this.setColour(Qre),this.setTooltip("Function parameter")}}}function tne(){zt.fn_call||(zt.fn_call={init:function(){this.appendDummyInput("HEAD").appendField("call").appendField(new Fl("???"),"FN_NAME"),this.setInputsInline(!0),this.setOutput(!0),this.fnId_="",this.params_=[],d$(this,[]),this.setColour(210),this.setTooltip(""),this.setHelpUrl("")},mutationToDom:function(){const t=qa.xml.createElement("mutation");t.setAttribute("fnId",String(this.fnId_??""));const s=this.params_??[];return t.setAttribute("params",JSON.stringify(s)),t},domToMutation:function(t){const s=t.getAttribute("fnId")??"",r=t.getAttribute("params")??"[]";let i=[];try{const l=JSON.parse(r);Array.isArray(l)&&(i=l.map(c=>String(c)))}catch{i=[]}this.fnId_=s,this.params_=i,d$(this,i)}})}function d$(t,s){for(let r=0;r<50;r++){const i=`ARG${r}`;t.getInput(i)&&t.removeInput(i,!0)}t.getInput("TAIL")&&t.removeInput("TAIL",!0);for(let r=0;r<s.length;r++)t.appendValueInput(`ARG${r}`).appendField(r===0?"(":",").appendField(s[r]?`${s[r]}=`:"");s.length>0&&t.appendDummyInput("TAIL").appendField(")")}function Z0(t,s){const r=s?.id??"",i=s?.name??"???",l=s?.params??[];t.fnId_=r,t.params_=l;const c=t.getField("FN_NAME");c&&c.setValue(i),d$(t,l)}function rne(){const t=Ik?.prototype;if(!t){console.warn("[Frockly] BlockSvg prototype not found");return}if(t.__frocklyPatchedCollapsedSummary)return;t.__frocklyPatchedCollapsedSummary=!0;const r=["getCollapsedText","getCollapsedText_","getSummaryText","getSummaryText_"].filter(i=>typeof t[i]=="function");for(const i of r){const l=t[i];t[i]=function(...c){const u=this.__frocklyCollapsedText;return typeof u=="string"&&u.length?u:l.apply(this,c)}}}function nne(){const t=GW?.prototype;if(!t||t.__frocklyPatchedTempField)return;t.__frocklyPatchedTempField=!0;const s=t.setValue;typeof s=="function"&&(t.setValue=function(r){if(this?.name==="_TEMP_COLLAPSED_FIELD"){const l=(this.sourceBlock_??this.getSourceBlock?.())?.__frocklyCollapsedText;typeof l=="string"&&l.length&&(r=l)}return s.call(this,r)})}function sne(t){return(t??"").replace(/\s+/g," ").trim()}function ine(t,s=90){const r=sne(t);return r.length>s?r.slice(0,s-1)+"ELLIPSIS":r}function one(t){const s=Ms.blockToCode(t),r=Array.isArray(s)?s[0]:s;return String(r??"")}function lne(){try{Dr.register("frockly_syntax_ui",function(){const t=()=>{let s="";try{s=one(this)}catch{s="(preview error)"}this.__frocklyCollapsedText="="+ine(s)};this.setOnChange(s=>{if(!s||s.blockId!==this.id)return;if(s.type===kt.BLOCK_CHANGE&&s.element==="collapsed"){this.isCollapsed?.()??this.collapsed??!1?t():this.__frocklyCollapsedText=void 0,setTimeout(()=>this.workspace?.render?.(),0);return}if(!(this.isCollapsed?.()??this.collapsed??!1))return;(s.type===kt.BLOCK_MOVE||s.type===kt.BLOCK_CREATE||s.type===kt.BLOCK_DELETE||s.type===kt.BLOCK_CHANGE&&s.element!=="field")&&(t(),setTimeout(()=>this.workspace?.render?.(),0))})})}catch(t){if(String(t?.message??t).includes("already registered"))return;throw t}}function ane(){lne(),!zt.frockly_LET&&(l$([{type:"frockly_LAMBDA",message0:"LAMBDA",args0:[],output:null,colour:200,mutator:"frockly_fn_dynargs",extensions:["frockly_syntax_ui"]}]),l$([{type:"frockly_LET",message0:"",args0:[],output:null,colour:200,mutator:"frockly_let_dynpairs",extensions:["frockly_syntax_ui"]}]))}const Ll=rh;function cne(){une(),hne()}function une(){Ll.forBlock.frockly_LET=function(t){const s=[];let r=0;for(;t.getInput(`VAR${r}`);){const l=Ll.valueToCode(t,`VAR${r}`,It.NONE)||"",c=Ll.valueToCode(t,`VAL${r}`,It.NONE)||"";(l||c)&&s.push(l,c),r++}const i=Ll.valueToCode(t,"RESULT",It.NONE)||"";return[`LET(${[...s,i].join(",")})`,It.FUNCTION_CALL]}}function hne(){Ll.forBlock.frockly_LAMBDA=function(t){const s=[];let r=0;for(;t.getInput(`ARG${r}`);){const l=(Ll.valueToCode(t,`ARG${r}`,It.NONE)||"").trim();l&&s.push(l),r++}let i="";return t.getInput("BODY")&&(i=(Ll.valueToCode(t,"BODY",It.NONE)||"").trim()),!i&&s.length>0&&(i=s.pop()),i?[`LAMBDA(${[...s,i].join(",")})`,It.FUNCTION_CALL]:["",It.ATOMIC]}}function dne(){ane(),cne()}let tN=!1;function fne(){tN||(tN=!0,Dr.registerMutator("frockly_let_dynpairs",{mutationToDom(){const t=qa.xml.createElement("mutation");return t.setAttribute("pairs",String(this.__pairs??1)),t},domToMutation(t){this.__pairs=Math.max(1,Number(t.getAttribute("pairs")||1)),f$(this)}},function(){this.__pairs=1,f$(this)}))}class rN extends Fl{onClick;constructor(s,r){super(s),this.onClick=r}onMouseDown_(s){s.preventDefault(),s.stopPropagation(),this.onClick()}}function _ne(t){return t.getInput("FN_HEADER")||t.appendDummyInput("FN_HEADER").appendField("LET"),t.getInput("FN_HEADER")}function Tne(t){const s=_ne(t);t.getField("LET_MINUS")||(s.appendField(new rN("",()=>nN(t,-1)),"LET_MINUS"),s.appendField(new Fl(String(t.__pairs??1)),"LET_COUNT"),s.appendField(new rN("+",()=>nN(t,1)),"LET_PLUS"))}function pne(t){t.getField("LET_COUNT")?.setValue(String(t.__pairs??1))}function nN(t,s){const r=t.__pairs??1,i=Math.max(1,r+s);i!==r&&(kt.setGroup(!0),t.__pairs=i,f$(t),pne(t),t.render?.(),kt.setGroup(!1))}function f$(t){Tne(t);let s=0;for(;t.getInput(`VAR${s}`);)t.removeInput(`VAR${s}`),t.removeInput(`VAL${s}`),s++;const r=t.__pairs??1;for(let i=0;i<r;i++)t.appendValueInput(`VAR${i}`).setCheck("VAR"),t.appendValueInput(`VAL${i}`);if(t.getInput("RESULT")){const i=t.getInput("RESULT").connection?.targetConnection;t.removeInput("RESULT");const l=t.appendValueInput("RESULT");i&&l.connection?.connect(i)}else t.appendValueInput("RESULT");t.render?.()}let sN=!1;async function Q0(t){rne(),nne();const s=Ik;s.CORNER_RADIUS=0,s.NOTCH_HEIGHT=4,s.NOTCH_WIDTH=15,s.NOTCH_OFFSET_LEFT=6,t==="ja"?(Yx(lY),Cn.UNDO="",Cn.REDO="",Cn.COPY="",Cn.PASTE="",Cn.DUPLICATE_BLOCK="",Cn.DELETE_BLOCK="",Cn.CUT=""):(Yx(gre),Cn.UNDO=Lk??"Undo",Cn.REDO=Ak??"Redo",Cn.COPY="Copy",Cn.PASTE="Paste",Cn.DUPLICATE_BLOCK=Sk??"Duplicate",Cn.DELETE_BLOCK=Rk??"Delete",Cn.CUT="Cut"),sN||(sN=!0,await Mre()),fne(),Zre(),ene(),tne(),Jre(t),dne()}const bh=t=>t.wsRef.current?.getAllBlocks(!1)??[],kk=t=>{const s=t.wsRef.current;return s?s.getAllBlocks(!1).find(r=>r.type==="basic_start")??null:null};function gne(t){if(!t.wsRef.current)return null;const r=kk(t);return r?(r.getChildren?.(!1)??[])[0]??null:null}function Ene(t){const s=t.wsRef.current;if(!s)return[];const r=gne(t);if(!r)return[];const i=[],l=[{id:r.id,d:0}],c=new Set;for(;l.length;){const{id:u,d:h}=l.shift();if(c.has(u))continue;c.add(u);const f=s.getBlockById(u);if(!f)continue;f.type!=="basic_start"&&(i[h]||(i[h]=[]),i[h].push(u));const _=f.getChildren?.(!1)??[];for(const T of _)T&&T.type!=="basic_start"&&l.push({id:T.id,d:h+1})}return i.filter(u=>u&&u.length)}const mne=t=>{let s=[],r=0;const i=()=>{const T=t.wsRef.current;T&&(T.render(),T.resize())},l=()=>{s=Ene(t),r=Math.min(r,s.length)},c=(T,g)=>{const E=t.wsRef.current;if(!E)return;const S=s[T]??[];for(const R of S){const L=E.getBlockById(R);L&&L.type!=="basic_start"&&L.setCollapsed(g)}},u=()=>{if(!t.wsRef.current||(l(),s.length===0)||r>=s.length)return;const g=s.length-1-r;c(g,!0),r+=1,i()},h=()=>{if(!t.wsRef.current||(l(),s.length===0)||r<=0)return;const g=s.length-r;c(g,!1),r-=1,i()};return{collapseAll:()=>{if(t.wsRef.current){for(const g of bh(t))g.type!=="basic_start"&&g.setCollapsed(!0);l(),r=s.length,i()}},expandAll:()=>{if(t.wsRef.current){for(const g of bh(t))g.setCollapsed(!1);l(),r=0,i()}},expandStep:T=>T===1?u():h()}};function FI(t,s){return t.closest("g[data-id]")===s}function $ne(t){const s=t.pathObject??null;if(!s)return[];const r=[],i=l=>{l&&l instanceof SVGPathElement&&r.push(l)};return i(s.svgPath),i(s.svgPathDark),i(s.svgPathLight),r}function RT(t){return t.getSvgRoot?.()??null}function wk(t){const s=RT(t);if(!s)return[];const r=$ne(t);if(r.length)return r;let i=Array.from(s.querySelectorAll("path.blocklyPath"));return i=i.filter(l=>FI(l,s)),i}function Ine(t){const s=RT(t);if(!s)return[];let r=Array.from(s.querySelectorAll("text.blocklyText"));return r=r.filter(i=>FI(i,s)),r}function One(t){const s=RT(t);if(!s)return[];let r=Array.from(s.querySelectorAll("g.blocklyIconGroup"));return r=r.filter(i=>FI(i,s)),r}function nh(t,s){const i=t.dataset?.frocklyExtraFilter??"",l=s||"",c=(i?i+" ":"")+l;t.style.filter=c.trim()}function em(t){const s=t;t.style.filter=(s.dataset?.frocklyExtraFilter??"").trim()}function iN(t,s){const r=wk(t);for(const i of r){const l=i;if(s){i.style.stroke="var(--frockly-path-stroke, rgba(255,255,255,0.95))",i.style.strokeWidth="3",i.style.paintOrder="stroke fill";const c=l.dataset??(l.dataset={});c.frocklyExtraFilter="drop-shadow(0 0 1px rgba(0,0,0,0.35))",nh(i,"")}else i.style.stroke="",i.style.strokeWidth="",i.style.paintOrder="",l.dataset&&(l.dataset.frocklyExtraFilter=""),nh(i,"")}}const uc=(t,s)=>{const r=RT(t);if(!r)return;const i=wk(t),l=Ine(t),c=One(t),u=(f,_)=>{for(const T of i)T.style.opacity=f,nh(T,_);for(const T of l)T.style.opacity=f,nh(T,_);for(const T of c)T.style.opacity=f,nh(T,_)},h=()=>{for(const f of i)f.style.opacity="",em(f);for(const f of l)f.style.opacity="",em(f);for(const f of c)f.style.opacity="",em(f);r.style.pointerEvents=""};if(s==="normal"){h();return}if(s==="dim"){u("0.38","brightness(0.75) contrast(0.95)"),r.style.pointerEvents="none";return}u("0.0","brightness(0.5) contrast(0.9)"),r.style.pointerEvents="none"},Sne=t=>{let s=!1;const r=[];let i=new Set;const l=E=>{const S=E.getChildren?.(!1)??[];if(S.length===0)return S;const R=S.map(L=>{const x=L.getRelativeToSurfaceXY?.()??{x:0,y:0};return{k:L,x:x.x??0,y:x.y??0}});return R.sort((L,x)=>L.y-x.y||L.x-x.x),R.map(L=>L.k)},c=()=>{if(!t.wsRef.current)return null;const S=kk(t);return S?l(S)[0]??S:null},u=()=>{if(t.wsRef.current)for(const S of bh(t))uc(S,"normal")},h=()=>{const E=t.wsRef.current;if(E){if(u(),!s){E.render(),E.resize();return}for(const S of r)for(const R of S){const L=E.getBlockById(R);L&&uc(L,"hide")}for(const S of i){const R=E.getBlockById(S);R&&uc(R,"dim")}E.render(),E.resize()}},f=()=>{r.length=0,i=new Set},_=()=>{s=!s,f(),h()},T=()=>{if(!s)return;const E=t.wsRef.current;if(!E)return;if(r.length===0){const L=c();if(!L)return;const x=[L.id];r.push(x),i=new Set(x),h();return}const S=new Set;for(const L of i){const x=E.getBlockById(L);if(x)for(const v of l(x))v.type!=="basic_start"&&S.add(v.id)}if(S.size===0)return;const R=Array.from(S);r.push(R),i=S,h()},g=()=>{if(!s||r.length===0)return;r.pop();const E=r.length?r[r.length-1]:[];i=new Set(E),h()};return{toggleFocus:_,focusStep:E=>E===1?T():g(),focusDown:T,focusUp:g,isEnabled:()=>s,setEnabled:E=>{s=E,h()}}},Rne=t=>{let s=!1,r=0,i=new Set;const l=()=>bh(t).filter(f=>f.type!=="basic_start"),c=()=>{for(const f of bh(t))uc(f,"normal"),i.has(f.id)&&iN(f,!1);i.clear()},u=()=>{if(!t.wsRef.current||(c(),!s))return;const _=l();if(_.length===0)return;const T=_.filter(R=>(R.getChildren?.(!1)??[]).length===0),g=T.length?T:_;r=(r%g.length+g.length)%g.length;const E=g[r];for(const R of _)uc(R,"dim");let S=E;for(;S;)S.type!=="basic_start"&&(uc(S,"normal"),iN(S,!0),i.add(S.id)),S=S.getSurroundParent?.()??null};return{togglePath:()=>{s=!s,u()},pathStep:f=>{r+=f,u()},isEnabled:()=>s,setEnabled:f=>{s=f,u()}}},Lne=t=>{const s=mne(t),r=Sne(t),i=Rne(t);return{collapseAll:s.collapseAll,expandAll:s.expandAll,expandStep:s.expandStep,toggleFocus:()=>{const l=!r.isEnabled();l&&i.setEnabled(!1),r.setEnabled(l)},focusStep:r.focusStep,togglePath:()=>{const l=!i.isEnabled();l&&r.setEnabled(!1),i.setEnabled(l)},pathStep:i.pathStep}};function Ane(t){const s=t;return t.getParentSvg?.()??s.svgGroup_?.ownerSVGElement??null}function vne(t){const s=t.querySelector("rect.blocklyMainBackground");if(s)return s;const r=t.querySelector(".blocklyMainBackground");if(r?.tagName?.toLowerCase()==="rect")return r;const i=Array.from(t.querySelectorAll("rect"));return i.find(l=>(l.getAttribute("width")??"").includes("100%"))??i[0]??null}function Cne(t){const s=Ane(t);if(!s){console.warn("[grid] svg not found");return}const r=t;if(r.__frocklyGridDone)return;const i="http://www.w3.org/2000/svg";let l=s.querySelector("defs");if(l||(l=document.createElementNS(i,"defs"),s.insertBefore(l,s.firstChild)),!s.querySelector("#frocklyGrid")){const u=document.createElementNS(i,"pattern");u.setAttribute("id","frocklyGrid"),u.setAttribute("patternUnits","userSpaceOnUse"),u.setAttribute("width","24"),u.setAttribute("height","24");const h=document.createElementNS(i,"path");h.setAttribute("d","M 24 0 L 0 0 0 24"),h.setAttribute("fill","none"),h.setAttribute("stroke","rgba(0,0,0,0.10)"),h.setAttribute("stroke-width","1"),u.appendChild(h),l.appendChild(u)}const c=vne(s);if(!c){console.warn("[grid] main background rect not found");return}c.setAttribute("fill","url(#frocklyGrid)"),c.style.fill="url(#frocklyGrid)",r.__frocklyGridDone=!0}function xne(t){return t===" "||t==="	"||t===`
`||t==="\r"}const Nne=/^\$?[A-Za-z]{1,3}\$?\d{1,7}$/,bne=/^\$?[A-Za-z]{1,3}:\$?[A-Za-z]{1,3}$/,yne=/^\$?\d{1,7}:\$?\d{1,7}$/,kne=/^\$?[A-Za-z]{1,3}\$?\d{1,7}:\$?[A-Za-z]{1,3}\$?\d{1,7}$/;function wne(t,s){let r=s;for(;r<t.length;){const l=t[r];if(/[A-Za-z0-9:$]/.test(l))r++;else break}const i=t.slice(s,r);for(let l=i.length;l>=1;l--){const u=i.slice(0,l).toUpperCase();if(kne.test(u)||bne.test(u)||yne.test(u)||Nne.test(u))return{kind:"REF",text:u,i0:s,i1:s+l}}return null}function Mne(t){const s=t.startsWith("=")?t.slice(1):t,r=[];let i=0;for(;i<s.length;){const l=s[i];if(xne(l)){i++;continue}if(l==='"'){let h=i+1;for(;h<s.length;){if(s[h]==='"'){if(s[h+1]==='"'){h+=2;continue}h++;break}h++}const f=s.slice(i,h);r.push({kind:"STRING",text:f,i0:i,i1:h}),i=h;continue}if(l==="("){r.push({kind:"LPAREN",text:l,i0:i,i1:i+1}),i++;continue}if(l===")"){r.push({kind:"RPAREN",text:l,i0:i,i1:i+1}),i++;continue}if(l===","){r.push({kind:"COMMA",text:l,i0:i,i1:i+1}),i++;continue}const c=s.slice(i,i+2);if(c==="<="||c===">="||c==="<>"){r.push({kind:"CMP",text:c,i0:i,i1:i+2}),i+=2;continue}if(l==="<"||l===">"||l==="="){r.push({kind:"CMP",text:l,i0:i,i1:i+1}),i++;continue}if(l==="+"||l==="-"||l==="*"||l==="/"||l==="^"||l==="&"){r.push({kind:"OP",text:l,i0:i,i1:i+1}),i++;continue}const u=wne(s,i);if(u){r.push(u),i=u.i1;continue}if(/\d/.test(l)||l==="."&&/\d/.test(s[i+1]??"")){let h=i;for(;h<s.length&&/[\d.]/.test(s[h]);)h++;const f=s.slice(i,h);r.push({kind:"NUMBER",text:f,i0:i,i1:h}),i=h;continue}if(/[A-Za-z_]/.test(l)){let h=i+1;for(;h<s.length&&/[A-Za-z0-9_.]/.test(s[h]);)h++;const f=s.slice(i,h).toUpperCase();r.push({kind:"NAME",text:f,i0:i,i1:h}),i=h;continue}r.push({kind:"OP",text:l,i0:i,i1:i+1}),i++}return r.push({kind:"EOF",text:"",i0:s.length,i1:s.length}),{src:s,toks:r}}function Dne(t){if(t.kind==="OP"){const s=t.text;if(s==="^")return{lbp:70,rbp:69,op:s,isCmp:!1};if(s==="*"||s==="/")return{lbp:60,rbp:60,op:s,isCmp:!1};if(s==="+"||s==="-")return{lbp:50,rbp:50,op:s,isCmp:!1};if(s==="&")return{lbp:40,rbp:40,op:s,isCmp:!1}}return t.kind==="CMP"?{lbp:30,rbp:30,op:t.text,isCmp:!0}:null}function Pne(t,s){let r=0;function i(){return s[r]}function l(){return s[r++]}function c(_){const T=i().i0;let g=T;for(;;){const S=i();if(S.kind==="EOF"||_.has(S.kind))break;g=S.i1,l()}return{kind:"Raw",text:t.slice(T,g)}}function u(){const _=i();if(_.kind==="OP"&&_.text==="-")return l(),{kind:"Unary",op:"-",expr:h(65)};if(_.kind==="NUMBER")return l(),{kind:"Num",text:_.text};if(_.kind==="STRING")return l(),{kind:"Str",text:_.text};if(_.kind==="REF")return l(),{kind:"Ref",text:_.text};if(_.kind==="LPAREN"){l();const T=i().kind==="RPAREN"?{kind:"Raw",text:""}:h(0);return i().kind==="RPAREN"&&l(),{kind:"Paren",inner:T}}if(_.kind==="NAME"){const T=_.text;if(l(),i().kind==="LPAREN"){l();const g=[];for(;i().kind!=="RPAREN"&&i().kind!=="EOF";){if(i().kind==="COMMA"){g.push({kind:"Raw",text:""}),l();continue}const E=r;let S;try{S=h(0)}catch{r=E,S=c(new Set(["COMMA","RPAREN"]))}if(g.push(S),i().kind==="COMMA")l();else break}return i().kind==="RPAREN"&&l(),{kind:"Call",name:T,args:g}}return{kind:"Raw",text:T}}return c(new Set(["COMMA","RPAREN"]))}function h(_){let T=u();for(;;){const g=i(),E=Dne(g);if(!E||E.lbp<_)break;l();const S=r;let R;try{R=h(E.rbp)}catch{r=S,R=c(new Set(["COMMA","RPAREN"]))}T={kind:"Binary",op:E.op,left:T,right:R}}return T}return h(0)}function Fne(t){return t.includes(":")}function Eo(t){return t.initSvg(),t.render?.(),t}function Bne(t,s){for(let r=0;r<s;r++){const i=`ARG${r}`;t.getInput(i)||t.appendValueInput(i).setCheck(null)}}function Une(t,s){function r(i){switch(i.kind){case"Num":{const l=Eo(t.newBlock("basic_number"));return l.setFieldValue(i.text,"NUM"),{block:l,outConn:l.outputConnection}}case"Str":{const l=Eo(t.newBlock("basic_string"));return l.setFieldValue(i.text.replace(/^"|"$/g,""),"STR"),{block:l,outConn:l.outputConnection}}case"Ref":{const l=Fne(i.text)?"basic_range":"basic_cell",c=l==="basic_range"?"RANGE":"CELL",u=Eo(t.newBlock(l));return u.setFieldValue(i.text,c),{block:u,outConn:u.outputConnection}}case"Raw":{const l=Eo(t.newBlock("basic_raw"));return l.setFieldValue(i.text,"RAW"),{block:l,outConn:l.outputConnection}}case"Paren":{const l=Eo(t.newBlock("basic_paren")),c=r(i.inner),u=l.getInput("INNER")?.connection;return u&&c.outConn&&u.connect(c.outConn),{block:l,outConn:l.outputConnection}}case"Unary":return r({kind:"Binary",op:"-",left:{kind:"Num",text:"0"},right:i.expr});case"Binary":{const l=["=","<>","<","<=",">",">="].includes(i.op),c=Eo(t.newBlock(l?"basic_cmp":"basic_arith"));c.setFieldValue(i.op,"OP");const u=r(i.left),h=r(i.right),f=c.getInput("A")?.connection,_=c.getInput("B")?.connection;return f&&u.outConn&&f.connect(u.outConn),_&&h.outConn&&_.connect(h.outConn),{block:c,outConn:c.outputConnection}}case"Call":{const l=i.name.toUpperCase(),c=`frockly_${l}`;if(Ire(l),zt[c]){const h=Eo(t.newBlock(c)),f=DI(l);f&&PI(h,i.args.length,f);for(let _=0;_<i.args.length;_++){const T=r(i.args[_]),g=h.getInput(`ARG${_}`)?.connection;g&&T.outConn&&g.connect(T.outConn)}return{block:h,outConn:h.outputConnection}}const u=Eo(t.newBlock("basic_raw_call"));u.getField("FN")&&u.setFieldValue(l,"FN"),Bne(u,i.args.length);for(let h=0;h<i.args.length;h++){const f=r(i.args[h]),_=u.getInput(`ARG${h}`)?.connection;_&&f.outConn&&_.connect(f.outConn)}return{block:u,outConn:u.outputConnection}}}}return r(s)}function Hne(t,s){const{src:r,toks:i}=Mne(s);let l;try{l=Pne(r,i)}catch(f){throw console.error("[blockFromFormula] parseAst failed",{formulaText:s,src:r,toks:i,err:f}),f}const c=t.newBlock("basic_start");c.initSvg(),c.render?.();let u;try{u=Une(t,l)}catch(f){throw console.error("[blockFromFormula] astToBlockly failed",{formulaText:s,src:r,toks:i,ast:l,err:f}),f}const h=c.getInput("EXPR")?.connection;return h&&u.outConn&&h.connect(u.outConn),c.moveBy(40,40),c.select?.(),t.resize(),c}function Mk({onFormulaChange:t,selectedCell:s,onWorkspaceApi:r,uiLang:i,namedFns:l,onHighlightRange:c}){const u=ve.useRef(null),h=ve.useRef(l??[]);ve.useEffect(()=>{h.current=l??[]},[l]);const f=async()=>{u.current||(u.current=Q0(i)),await u.current};ve.useEffect(()=>{u.current=null},[i]);const _=y1(),T=ve.useRef(_);ve.useEffect(()=>{T.current=_},[_]);const g=ve.useRef(null),E=ve.useRef(null),S=ve.useRef(t);ve.useEffect(()=>{S.current=t},[t]);const R=ve.useRef(r);ve.useEffect(()=>{R.current=r},[r]);const L=ve.useRef(s);ve.useEffect(()=>{L.current=s},[s]);const x=ve.useRef([]),v=30,A=ve.useMemo(()=>{const F=Yr(i);return`
      <xml xmlns="https://developers.google.com/blockly/xml">
        <category name="${F(tt.BASIC).replace(/&/g,"&amp;")}">
          <block type="basic_start"></block>

          <block type="basic_number"></block>
          <block type="basic_string"></block>

          <block type="basic_cell"></block>
          <block type="basic_range"></block>

          <block type="basic_arith"></block>
          <block type="basic_cmp"></block>

          <block type="basic_paren"></block>
          <!-- <block type="basic_bool"></block> -->
        </category>

        <category name="${F(tt.HISTORY).replace(/&/g,"&amp;")}" custom="FROCKLY_HISTORY"></category>
      </xml>
    `},[i]),m=F=>{const B=E.current;if(!B)return;const ne=T.current.workspaces.find(me=>me.id===F);if(!ne||ne.kind!=="fn"||!zt.fn_root)return;const ee=B.getAllBlocks(!1).filter(me=>me.type==="fn_root");if(ee.length===0){const me=B.newBlock("fn_root");me.initSvg(),me.render?.(),me.moveBy(40,40)}else for(let me=1;me<ee.length;me++)ee[me].dispose(!0)},y=F=>{const B=E.current;if(!B)return;const re=T.current,ne=re.workspaces.find(oe=>oe.id===F);if(!ne||ne.kind!=="fn")return;const ee=ne.fnId;if(!ee)return;const me=re.functions.find(oe=>oe.id===ee),we=me?.params?.length??0,Oe=B.getAllBlocks(!1).filter(oe=>oe.type==="fn_root");if(Oe.length!==1)return;const ye=Oe[0].getInput("PARAMS")?.connection;if(!ye)return;const Re=[];let K=ye.targetBlock();for(;K&&K.type==="fn_param";)Re.push(K),K=K.getNextBlock();for(;Re.length>we;)Re.pop().dispose(!0);const z=oe=>{Re.length===0?ye.connect(oe.previousConnection):Re[Re.length-1].nextConnection.connect(oe.previousConnection)};for(;Re.length<we;){const oe=B.newBlock("fn_param");oe.initSvg(),oe.render?.(),z(oe),Re.push(oe)}for(let oe=0;oe<Re.length;oe++)Re[oe].setFieldValue(me?.params?.[oe]??`p${oe+1}`,"NAME");B.render()},H=F=>{const B=E.current;if(!B)return[];const ne=T.current.workspaces.find(ye=>ye.id===F);if(!ne||ne.kind!=="fn")return[];const ee=B.getAllBlocks(!1).find(ye=>ye.type==="fn_root");if(!ee)return[];const me=ee.getInput("PARAMS")?.connection;if(!me)return[];const we="NAME",Oe=[];let ke=me.targetBlock();for(;ke&&ke.type==="fn_param";){const ye=String(ke.getFieldValue?.(we)??"").trim();ye&&Oe.push(ye),ke=ke.getNextBlock()}return Oe},G=F=>{const ne=(F.includes("!")?F.split("!").pop():F).replace(/[$#]/g,"").trim().match(/^([A-Z]+[0-9]+)(?::([A-Z]+[0-9]+))?$/i);if(!ne)return null;const ee=ne[1].toUpperCase(),me=(ne[2]??ne[1]).toUpperCase();return{a:ee,b:me}};ve.useEffect(()=>{const F=g.current;if(!F)return;let B=!1;const re=()=>{const we=E.current;if(!we)return;const Oe=we.getToolbox?.();Oe?.clearSelection?.(),Oe?.getFlyout?.()?.hide?.(),zx?.(!0),we.resize()},ne=we=>{if(!we||!zt[we])return;const Oe=x.current.filter(ke=>ke!==we);Oe.unshift(we),x.current=Oe.slice(0,v),queueMicrotask(()=>E.current?.refreshToolboxSelection?.())},ee=()=>{const we=E.current;if(we)try{const Oe=jx.workspaceToDom(we),ke=qa.xml.domToText(Oe);gF(ke)}catch(Oe){console.warn("[WS] save xml failed",Oe)}},me=async we=>{const Oe=E.current;if(Oe)try{await f(),Oe.clear();const Re=T.current.workspaces.find(K=>K.id===we)?.xml??"";if(Re){const K=qa.xml.textToDom(Re);jx.domToWorkspace(K,Oe)}m(we),y(we),Oe.render(),Oe.resize()}catch(ke){console.error("[WS] load xml failed",ke)}};return(async()=>{try{await Q0(i)}catch(z){console.error("[DBG] initFrockly crashed",z)}if(B)return;const we=VW.defineTheme("frockly",{name:"frockly",base:WW.Classic,componentStyles:{workspaceBackgroundColour:"transparent"}}),Oe=XW(F,{toolbox:A,theme:we,trashcan:!0,scrollbars:!0,zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2}});E.current=Oe,requestAnimationFrame(()=>{Cne(Oe)}),me(_.activeWorkspaceId),F.addEventListener("pointerdown",re,!0),Oe.registerToolboxCategoryCallback("FROCKLY_HISTORY",()=>{const z=x.current;if(z.length===0){const oe=qa.xml.createElement("label"),M=Yr(i);return oe.setAttribute("text",M(tt.NO_HISTORY)),[oe]}return z.map(oe=>{const M=qa.xml.createElement("block");return M.setAttribute("type",oe),M})});const ke=z=>{const oe=T.current,M=oe?.fns??oe?.namedFns??oe?.namedFunctions??oe?.namedFnItems??oe?.functions??[];return Array.isArray(M)?M.find(Z=>Z?.id===z)??null:M&&typeof M=="object"?M[z]??null:null};R.current?.({insertBlock:z=>{const oe=E.current;if(!oe||!zt[z])return;const M=T.current;if(M.workspaces.find(he=>he.id===M.activeWorkspaceId)?.kind==="fn"&&z==="fn_param"){const he=oe.getAllBlocks(!1).find(Pe=>Pe.type==="fn_root"),xe=he?.getInput("PARAMS")?.connection;if(he&&xe){let Pe=xe.targetBlock();for(;Pe&&Pe.getNextBlock();)Pe=Pe.getNextBlock();const be=oe.newBlock("fn_param");be.initSvg(),be.render?.(),Pe?Pe.nextConnection.connect(be.previousConnection):xe.connect(be.previousConnection),ne("fn_param"),re(),oe.render(),oe.resize();return}}const q=oe.newBlock(z);q.initSvg(),q.render?.(),q.moveBy(40,40),ne(z),re()},insertRefBlock:z=>{const oe=E.current;if(!oe)return;const M=z.includes(":"),Z=M?"basic_range":"basic_cell",J=M?"RANGE":"CELL";if(!zt[Z]){console.warn("Unknown ref block:",Z);return}const q=oe.newBlock(Z);q.initSvg(),q.render?.(),q.setFieldValue(z,J),q.moveBy(40,40),ne(Z),re()},insertFromFormula:z=>{const oe=E.current;if(console.log("[WS] insertFromFormula",{hasWs:!!oe,formulaText:z}),!!oe)try{const M=Hne(oe,z);console.log("[WS] blockFromFormula OK",{startId:M?.id}),oe.resize()}catch(M){console.error("[WS] blockFromFormula crashed",M),alert("blockFromFormula console")}},switchWorkspace:z=>{ee(),CC(z),me(z),queueMicrotask(()=>{m(z),y(z)})},insertFnCall:z=>{const oe=E.current;if(!oe)return;const M=oe.newBlock("fn_call");M.initSvg();const Z=h.current.find(J=>J.id===z)??null;Z0(M,Z?{id:Z.id,name:Z.name,params:Z.params}:null),Z0(M,Z),M.render?.(),oe.render(),oe.resize(),M.moveBy(40,40),ne("fn_call"),re()},insertFnToMain:z=>{const oe=_.workspaces.find(J=>J.kind==="main");if(!oe)return;ee(),CC(oe.id),me(oe.id);const M=E.current;if(!M)return;if(!zt.fn_call){const J=M.newBlock("basic_string");J.initSvg();const q=ke(z);Z0(J,q?{id:q.id,name:q.name,params:q.params}:null),J.render?.(),J.setFieldValue(z,"TEXT"),J.moveBy(60,60),ne("basic_string"),re();return}const Z=M.newBlock("fn_call");Z.initSvg(),Z.render?.();try{Z.setFieldValue(z,"FN")}catch{Z.data=JSON.stringify({fnId:z})}Z.moveBy(60,60),ne("fn_call"),re()},view:Lne({wsRef:E})});const ye=z=>{if(z.isUiEvent||z.type===kt.BLOCK_DRAG||z.type===kt.SELECTED||z.type===kt.TOOLBOX_ITEM_SELECT)return;const oe=T.current,M=oe.activeWorkspaceId,Z=oe.workspaces.find(be=>be.id===M),J=Z?.kind==="fn";if(z.type===kt.BLOCK_CREATE){const be=z;for(const ce of be.ids??[]){const et=Oe.getBlockById(ce);et&&ne(et.type)}}const q=Oe.getAllBlocks(!1).filter(be=>J?be.type==="fn_root":be.type==="basic_start");if(q.length===0)S.current?.("");else{const be=q[0];try{Ms.init(Oe);const ce=Ms.blockToCode(be),et=Array.isArray(ce)?String(ce[0]??""):String(ce??"");Ms.finish(et),S.current?.(et.trim())}catch(ce){console.error("[GEN] blockToCode failed",ce)}}if(!J||!(z.type===kt.BLOCK_DELETE||z.type===kt.BLOCK_CREATE||z.type===kt.BLOCK_MOVE||z.type===kt.BLOCK_CHANGE))return;const xe=H(M),Pe=Z?.fnId;Pe&&IF(Pe,xe)};Oe.addChangeListener(ye);let Re=null;const K=z=>{if(z.type!==kt.SELECTED)return;const M=z.newElementId;if(Re&&Oe.getBlockById(Re)?.getSvgRoot()?.classList.remove("frockly-focused"),c?.(null),M){const Z=Oe.getBlockById(M);if(Z?.getSvgRoot()?.classList.add("frockly-focused"),Re=M,Z){let J=null;if(Z.type==="basic_cell")try{J=String(Z.getFieldValue("CELL")??"")}catch{}else if(Z.type==="basic_range")try{J=String(Z.getFieldValue("RANGE")??"")}catch{}if(J){const q=G(J);q&&c?.(q)}}}else Re=null};Oe.addChangeListener(K)})(),()=>{B=!0,F.removeEventListener("pointerdown",re,!0),E.current?.dispose(),E.current=null}},[]),ve.useEffect(()=>{(async()=>{try{await Q0(i);const F=E.current;if(F)try{F.getAllBlocks(!1).forEach(re=>{try{re.initSvg?.(),re.render?.()}catch{}});const B=F.getToolbox?.();B?.clearSelection?.(),B?.getFlyout?.()?.reflow?.(),zx?.(!0),F.resize()}catch(B){console.warn("Failed to refresh workspace after locale change",B)}}catch(F){console.error("initFrockly failed",F)}})()},[i]);const k=_.workspaces.find(F=>F.id===_.activeWorkspaceId)?.title;return V.jsxs("div",{className:"relative w-full h-full",children:[V.jsx("div",{className:`\r
            absolute top-3 right-4 z-[5]\r
            px-2 py-1 text-base font-bold\r
            text-slate-500\r
            pointer-events-none\r
            select-none\r
          `,children:k}),V.jsx("div",{ref:g,className:`\r
            w-full h-full overflow-hidden\r
            bg-[linear-gradient(to_right,rgba(0,0,0,0.06)_1px,transparent_1px),\r
                linear-gradient(to_bottom,rgba(0,0,0,0.06)_1px,transparent_1px)]\r
            bg-[size:24px_24px]\r
            bg-slate-50\r
          `})]})}function Dk({formula:t,uiLang:s="en"}){const r=Yr(s),[i,l]=ve.useState(!1),c=()=>{t&&(navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3))};return V.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[V.jsxs("div",{className:"bg-gray-100 border-b border-gray-300 px-4 py-2 flex items-center justify-between",children:[V.jsx("h3",{className:"text-emerald-700",children:r(tt.GENERATED_FORMULA)}),V.jsx("button",{onClick:c,disabled:!t,className:`
            flex items-center gap-2 px-3 py-1 rounded text-sm
            ${t?"bg-emerald-600 text-white hover:bg-emerald-700 shadow-sm":"bg-gray-300 text-gray-500 cursor-not-allowed"}
            transition-colors
          `,children:i?V.jsxs(V.Fragment,{children:[V.jsx(uP,{className:"w-4 h-4"}),r(tt.COPY_DONE)]}):V.jsxs(V.Fragment,{children:[V.jsx(dP,{className:"w-4 h-4"}),r(tt.COPY)]})})]}),V.jsx("div",{className:"flex-1 p-4",children:V.jsx("div",{className:"h-full bg-white border-2 border-gray-300 rounded-lg p-4 shadow-inner",children:t?V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("span",{className:"text-emerald-600",children:"fx"}),V.jsx("code",{className:"flex-1 bg-emerald-50 px-3 py-2 rounded border border-emerald-200 text-emerald-900",children:t})]}):V.jsx("div",{className:"flex items-center justify-center h-full",children:V.jsx("p",{className:"text-gray-400 text-sm",children:r(tt.SELECT_BLOCK_PROMPT)})})})})]})}function Gne({ui:t,projectCtx:s,refs:r,grid:i,formula:l,blockCategory:c="math"}){return V.jsxs(V.Fragment,{children:[V.jsx(SF,{selectedTab:t.ribbonTab,onTabChange:t.setRibbonTab,uiLang:t.uiLang,onUiLangChange:t.setUiLang,onWorkspaceApi:r.workspaceApiRef,onBlockClick:u=>r.workspaceApiRef.current?.insertBlock(u),focusOn:t.focusOn,pathOn:t.pathOn,onToggleFocus:t.onToggleFocus,onTogglePath:t.onTogglePath,namedFns:s.namedFns,workspaces:s.workspaces,activeWorkspaceId:s.project.activeWorkspaceId,activeWorkspaceTitle:s.activeWorkspaceTitle,onCreateNamedFn:s.onCreateNamedFn,onDuplicateNamedFn:s.onDuplicateNamedFn,onDeleteNamedFn:s.onDeleteNamedFn,onRenameNamedFn:s.onRenameNamedFn,onUpdateNamedFnMeta:s.onUpdateNamedFnMeta,onExportNamedFns:s.onExportNamedFns,onImportNamedFns:s.onImportNamedFns,onImportXlsx:s.onImportXlsx,sheets:s.sheets,activeSheet:s.activeSheet,onChangeSheet:s.onChangeSheet}),V.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[V.jsx("div",{style:{width:t.leftWidth},className:"border-r border-gray-300 bg-white",children:V.jsx(gk,{selectedCell:i.selectedCell,onCellSelect:i.setSelectedCell,cells:i.cells,onCellsChange:i.onCellsChange,uiLang:t.uiLang,highlightRange:i.highlightRange})}),V.jsx("div",{onMouseDown:t.onStartSplitDrag,className:"w-2 cursor-col-resize bg-gray-200 hover:bg-gray-300"}),V.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[V.jsx("div",{className:"flex-1 border-b border-gray-300",children:V.jsx(Mk,{category:c,onFormulaChange:l.setFormula,selectedCell:i.selectedCell,onWorkspaceApi:u=>r.workspaceApiRef.current=u,uiLang:t.uiLang,namedFns:s.namedFns,onHighlightRange:i.setHighlightRange})}),V.jsx("div",{className:"h-32 border-t border-gray-300",children:V.jsx(Dk,{formula:l.formula,uiLang:t.uiLang})})]})]})]})}function Vne(t){const s=Yr(t.uiLang);return V.jsxs("div",{className:"shrink-0 bg-emerald-600 border-b border-emerald-700 px-3 pt-2 pb-2",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(D1,{size:26}),V.jsxs("div",{className:"min-w-0 flex-1",children:[V.jsx("div",{className:"font-bold text-[13px] leading-tight text-white truncate",children:t.title??"Frockly"}),V.jsx("div",{className:"text-[11px] leading-tight text-emerald-100 truncate",children:t.subtitle??""})]}),t.onImportFromFormula&&V.jsx("button",{onClick:t.onImportFromFormula,className:`\r
      h-8 px-2\r
      text-[11px] font-medium\r
      rounded-md\r
      bg-emerald-100 text-emerald-800\r
      border border-emerald-300\r
      hover:bg-emerald-200\r
      active:bg-emerald-300\r
      whitespace-nowrap\r
    `,children:s(tt.IMPORT_FROM_FORMULA)}),V.jsxs("select",{className:`\r
      h-8 text-[12px] rounded-md\r
      border border-emerald-300/40 bg-emerald-700 text-white px-2\r
      focus:outline-none focus:bg-white focus:text-emerald-900\r
    `,value:t.uiLang,onChange:r=>t.onChangeLang(r.target.value),children:[V.jsx("option",{value:"ja",children:"JP"}),V.jsx("option",{value:"en",children:"EN"})]})]}),V.jsxs("div",{className:"mt-2 flex items-center gap-1 bg-white rounded px-2 py-1",children:[V.jsx(S1,{className:"w-4 h-4 text-gray-500 shrink-0"}),V.jsx("input",{type:"text",value:t.search,onChange:r=>t.onChangeSearch(r.target.value),placeholder:s(t.placeholderKey??"SEARCH"),className:"text-sm outline-none w-full"})]})]})}function Wne({ui:t,projectCtx:s,refs:r,grid:i,formula:l}){const c=Yr(t.uiLang),[u,h]=ve.useState(!1),[f,_]=ve.useState(""),[T,g]=ve.useState("ws"),E=()=>{_(""),h(!0)},S=t.ribbonTab,R=t.setRibbonTab,[L,x]=ve.useState(""),v=ve.useMemo(()=>[{id:"file",labelKey:"TAB_FILE",icon:O1},{id:"functions",labelKey:"TAB_FUNCTIONS",icon:L1},{id:"named",labelKey:"TAB_NAMED_FUNCTIONS",icon:R1},{id:"view",labelKey:"VIEW",icon:I1}],[]),A=(s.namedFns?.length??0)>0||!!s.onCreateNamedFn||!!r.workspaceApiRef.current?.insertFnCall,m=ve.useMemo(()=>A?v:v.filter(H=>H.id!=="named"),[v,A]),y=r.workspaceApiRef.current;return V.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[V.jsxs("div",{className:"shrink-0 border-b bg-white",children:[V.jsx(Vne,{title:"Frockly",subtitle:s.activeWorkspaceTitle,uiLang:t.uiLang,onChangeLang:t.setUiLang,search:L,onChangeSearch:x,placeholderKey:"SEARCH",onImportFromFormula:E}),V.jsx("div",{className:"px-2 pb-2 bg-emerald-600",children:V.jsx("div",{className:"flex items-center gap-1",children:m.map(H=>{const G=H.icon,k=S===H.id;return V.jsxs("button",{onClick:()=>R(H.id),className:["h-9 px-2 rounded-md border flex items-center gap-1","text-[12px] select-none",k?"bg-white text-emerald-800 border-emerald-200":"bg-emerald-500 text-white border-emerald-700"].join(" "),children:[V.jsx(G,{className:"w-4 h-4"}),V.jsx("span",{className:"leading-none",children:c(H.labelKey)})]},H.id)})})}),V.jsx("div",{className:"border-t bg-white",children:S==="file"?V.jsx(M1,{onImportXlsx:s.onImportXlsx,onImportNamedFns:s.onImportNamedFns,onExportNamedFns:s.onExportNamedFns,sheets:s.sheets,activeSheet:s.activeSheet,onChangeSheet:s.onChangeSheet}):S==="functions"?V.jsx(x1,{search:L,uiLang:t.uiLang,onBlockClick:H=>y?.insertBlock?.(H)}):S==="named"?V.jsx(N1,{uiLang:t.uiLang,search:L,fns:s.namedFns,workspaces:s.workspaces,activeWorkspaceId:s.project?.activeWorkspaceId,onUpdateFnMeta:s.onUpdateNamedFnMeta,onCreateFn:()=>s.onCreateNamedFn(),onDuplicateFn:H=>s.onDuplicateNamedFn(H),onDeleteFn:H=>s.onDeleteNamedFn(H),onRenameFn:(H,G)=>s.onRenameNamedFn(H,G),onSwitchWorkspace:H=>y?.switchWorkspace?.(H),onInsertCurrent:H=>y?.insertFnCall?.(H),onInsertToMain:H=>y?.insertFnToMain?.(H),onInsertCurrentParam:()=>y?.insertBlock?.("fn_param")}):V.jsx(Xne,{uiLang:t.uiLang,focusOn:t.focusOn,pathOn:t.pathOn,onToggleFocus:t.onToggleFocus,onTogglePath:t.onTogglePath,api:y})})]}),V.jsxs("div",{className:"flex-1 overflow-hidden",children:[T==="ws"&&V.jsx("div",{className:"h-full bg-white",children:V.jsx(Mk,{category:"math",onFormulaChange:l.setFormula,selectedCell:i.selectedCell,onWorkspaceApi:H=>r.workspaceApiRef.current=H,uiLang:t.uiLang,namedFns:s.namedFns,onHighlightRange:i.setHighlightRange})}),T==="grid"&&V.jsx("div",{className:"h-full bg-white",children:V.jsx(gk,{selectedCell:i.selectedCell,onCellSelect:i.setSelectedCell,cells:i.cells,onCellsChange:i.onCellsChange,uiLang:t.uiLang,highlightRange:i.highlightRange})}),T==="formula"&&V.jsx("div",{className:"h-full bg-white",children:V.jsx(Dk,{formula:l.formula,uiLang:t.uiLang})})]}),V.jsxs("div",{className:"h-14 shrink-0 border-t bg-white flex",children:[V.jsx(tm,{active:T==="ws",onClick:()=>g("ws"),children:c("MOBILE_TAB_WORKSPACE")}),V.jsx(tm,{active:T==="grid",onClick:()=>g("grid"),children:c("MOBILE_TAB_CELLS")}),V.jsx(tm,{active:T==="formula",onClick:()=>g("formula"),children:c("MOBILE_TAB_FORMULA")})]}),V.jsx(P1,{open:u,uiLang:t.uiLang,text:f,setText:_,onClose:()=>h(!1),onSubmit:H=>{const G=r.workspaceApiRef.current?.insertFromFormula;if(!G){alert(Yr(t.uiLang)(tt.IMPORT_API_NOT_READY));return}try{G(H),h(!1)}catch(k){console.error("[IMPORT] insertFromFormula crashed",k),alert(Yr(t.uiLang)(tt.IMPORT_FAILED))}}})]})}function tm(t){return V.jsx("button",{className:["flex-1 text-[13px] select-none",t.active?"font-semibold bg-gray-50":"bg-white"].join(" "),onClick:t.onClick,children:t.children})}function Xne(t){const s=Yr(t.uiLang);return V.jsx("div",{className:"py-1",children:V.jsx("div",{className:"h-[36px] flex items-stretch px-2 overflow-hidden",children:V.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:[V.jsx(Pr,{onClick:()=>t.api?.view?.collapseAll?.(),children:s("COLLAPSE_ALL")}),V.jsx(Pr,{onClick:()=>t.api?.view?.expandAll?.(),children:s("EXPAND_ALL")}),V.jsx(Pr,{onClick:()=>t.api?.view?.expandStep?.(-1),children:""}),V.jsx(Pr,{onClick:()=>t.api?.view?.expandStep?.(1),children:""}),V.jsx(Ih,{}),V.jsxs(Pr,{className:t.focusOn?"bg-emerald-500 text-white border-emerald-600":"",onClick:t.onToggleFocus,children:[s("FOCUS"),": ",t.focusOn?s("ON"):s("OFF")]}),V.jsx(Pr,{onClick:()=>t.api?.view?.focusStep?.(-1),children:""}),V.jsx(Pr,{onClick:()=>t.api?.view?.focusStep?.(1),children:""}),V.jsx(Ih,{}),V.jsxs(Pr,{className:t.pathOn?"bg-emerald-500 text-white border-emerald-600":"",onClick:t.onTogglePath,children:[s("PATH"),": ",t.pathOn?s("ON"):s("OFF")]}),V.jsx(Pr,{onClick:()=>t.api?.view?.pathStep?.(-1),children:""}),V.jsx(Pr,{onClick:()=>t.api?.view?.pathStep?.(1),children:""})]})})})}function jne(){EF();const t=y1(),r=$F(t,t.activeWorkspaceId)?.title??"???",i=window.matchMedia("(max-width: 768px)").matches,[l,c]=ve.useState("en"),[u,h]=ve.useState(""),[f,_]=ve.useState("A1"),[T,g]=ve.useState("functions"),[E,S]=ve.useState(!1),[R,L]=ve.useState(!1),x=ve.useRef(null),[v,A]=ve.useState(700),m=K=>{const z=K.clientX,oe=v,M=J=>{const q=J.clientX-z,he=oe+q;he>200&&he<900&&A(he)},Z=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",Z)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",Z)},y=()=>{x.current?.view?.toggleFocus?.(),S(K=>!K),L(!1)},H=()=>{x.current?.view?.togglePath?.(),L(K=>!K),S(!1)},G=ve.useMemo(()=>t.functions.map(K=>({id:K.id,name:K.name,params:K.params,workspaceId:K.workspaceId,description:K.description??""})),[t.functions]),k=ve.useMemo(()=>t.workspaces.map(z=>{if(z.kind==="main")return{id:z.id,title:z.title,kind:"main"};const oe=t.functions.find(M=>M.workspaceId===z.id);return{id:z.id,title:z.title,kind:"fn",fnId:oe?.id}}),[t.workspaces,t.functions]),[F,B]=ve.useState([{name:"Sheet1",cells:{}}]),[re,ne]=ve.useState(0),ee=F[re].cells,me=async K=>{const z=await K.arrayBuffer(),oe=lW(z);B(oe.sheets),ne(0)},we=async K=>{const z=await K.text(),oe=JSON.parse(z),M=cW(oe);OF(M.map(Z=>({name:Z.fn.name,params:Z.fn.params,description:Z.fn.description,workspaceXml:Z.workspaceXml})))},Oe=()=>{const K=Ec(),z=aW(K),oe=new Blob([JSON.stringify(z,null,2)],{type:"application/json"}),M=URL.createObjectURL(oe),Z=document.createElement("a");Z.href=M,Z.download="frockly_named_functions.json",Z.click(),URL.revokeObjectURL(M)},[ke,ye]=ve.useState(null),Re=K=>{B(z=>{const oe=[...z];return oe[re]={...oe[re],cells:K(oe[re].cells)},oe})};return V.jsx("div",{className:"h-screen flex flex-col bg-gray-50",children:i?V.jsx(Wne,{ui:{ribbonTab:T,setRibbonTab:g,uiLang:l,setUiLang:c,leftWidth:v,onStartSplitDrag:m,focusOn:E,pathOn:R,onToggleFocus:y,onTogglePath:H},projectCtx:{project:t,activeWorkspaceTitle:r,namedFns:G,workspaces:k,onCreateNamedFn:()=>Km("A",[]),onDuplicateNamedFn:bC,onDeleteNamedFn:yC,onRenameNamedFn:NC,onUpdateNamedFnMeta:xC,onExportNamedFns:Oe,onImportNamedFns:we,onImportXlsx:me,sheets:F.map(K=>K.name),activeSheet:re,onChangeSheet:ne},refs:{workspaceApiRef:x},grid:{selectedCell:f,setSelectedCell:_,cells:ee,onCellsChange:Re,highlightRange:ke,setHighlightRange:ye},formula:{formula:u,setFormula:h}}):V.jsx(Gne,{ui:{ribbonTab:T,setRibbonTab:g,uiLang:l,setUiLang:c,leftWidth:v,onStartSplitDrag:m,focusOn:E,pathOn:R,onToggleFocus:y,onTogglePath:H},projectCtx:{project:t,activeWorkspaceTitle:r,namedFns:G,workspaces:k,onCreateNamedFn:()=>Km("A",[]),onDuplicateNamedFn:bC,onDeleteNamedFn:yC,onRenameNamedFn:NC,onUpdateNamedFnMeta:xC,onExportNamedFns:Oe,onImportNamedFns:we,onImportXlsx:me,sheets:F.map(K=>K.name),activeSheet:re,onChangeSheet:ne},refs:{workspaceApiRef:x},grid:{selectedCell:f,setSelectedCell:_,cells:ee,onCellsChange:Re,highlightRange:ke,setHighlightRange:ye},formula:{formula:u,setFormula:h}})})}m1(document.getElementById("root")).render(V.jsx(jne,{}));export{yh as a,zne as g};
