(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const u of c.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function r(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=r(l);fetch(l.href,c)}})();var bo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ph(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Zne(t){if(t.__esModule)return t;var s=t.default;if(typeof s=="function"){var r=function i(){return this instanceof i?Reflect.construct(s,arguments,this.constructor):s.apply(this,arguments)};r.prototype=s.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var l=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(r,i,l.get?l:{enumerable:!0,get:function(){return t[i]}})}),r}var px={exports:{}},cT={},Ex={exports:{}},ft={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fh=Symbol.for("react.element"),Hw=Symbol.for("react.portal"),Gw=Symbol.for("react.fragment"),Vw=Symbol.for("react.strict_mode"),Ww=Symbol.for("react.profiler"),Xw=Symbol.for("react.provider"),zw=Symbol.for("react.context"),Yw=Symbol.for("react.forward_ref"),Kw=Symbol.for("react.suspense"),jw=Symbol.for("react.memo"),Jw=Symbol.for("react.lazy"),OC=Symbol.iterator;function qw(t){return t===null||typeof t!="object"?null:(t=OC&&t[OC]||t["@@iterator"],typeof t=="function"?t:null)}var gx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},mx=Object.assign,$x={};function Cc(t,s,r){this.props=t,this.context=s,this.refs=$x,this.updater=r||gx}Cc.prototype.isReactComponent={};Cc.prototype.setState=function(t,s){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,s,"setState")};Cc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ix(){}Ix.prototype=Cc.prototype;function I$(t,s,r){this.props=t,this.context=s,this.refs=$x,this.updater=r||gx}var O$=I$.prototype=new Ix;O$.constructor=I$;mx(O$,Cc.prototype);O$.isPureReactComponent=!0;var SC=Array.isArray,Ox=Object.prototype.hasOwnProperty,S$={current:null},Sx={key:!0,ref:!0,__self:!0,__source:!0};function Rx(t,s,r){var i,l={},c=null,u=null;if(s!=null)for(i in s.ref!==void 0&&(u=s.ref),s.key!==void 0&&(c=""+s.key),s)Ox.call(s,i)&&!Sx.hasOwnProperty(i)&&(l[i]=s[i]);var h=arguments.length-2;if(h===1)l.children=r;else if(1<h){for(var _=Array(h),f=0;f<h;f++)_[f]=arguments[f+2];l.children=_}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)l[i]===void 0&&(l[i]=h[i]);return{$$typeof:Fh,type:t,key:c,ref:u,props:l,_owner:S$.current}}function Zw(t,s){return{$$typeof:Fh,type:t.type,key:s,ref:t.ref,props:t.props,_owner:t._owner}}function R$(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fh}function Qw(t){var s={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return s[r]})}var RC=/\/+/g;function _0(t,s){return typeof t=="object"&&t!==null&&t.key!=null?Qw(""+t.key):s.toString(36)}function _f(t,s,r,i,l){var c=typeof t;(c==="undefined"||c==="boolean")&&(t=null);var u=!1;if(t===null)u=!0;else switch(c){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case Fh:case Hw:u=!0}}if(u)return u=t,l=l(u),t=i===""?"."+_0(u,0):i,SC(l)?(r="",t!=null&&(r=t.replace(RC,"$&/")+"/"),_f(l,s,r,"",function(f){return f})):l!=null&&(R$(l)&&(l=Zw(l,r+(!l.key||u&&u.key===l.key?"":(""+l.key).replace(RC,"$&/")+"/")+t)),s.push(l)),1;if(u=0,i=i===""?".":i+":",SC(t))for(var h=0;h<t.length;h++){c=t[h];var _=i+_0(c,h);u+=_f(c,s,r,_,l)}else if(_=qw(t),typeof _=="function")for(t=_.call(t),h=0;!(c=t.next()).done;)c=c.value,_=i+_0(c,h++),u+=_f(c,s,r,_,l);else if(c==="object")throw s=String(t),Error("Objects are not valid as a React child (found: "+(s==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":s)+"). If you meant to render a collection of children, use an array instead.");return u}function F_(t,s,r){if(t==null)return t;var i=[],l=0;return _f(t,i,"","",function(c){return s.call(r,c,l++)}),i}function eM(t){if(t._status===-1){var s=t._result;s=s(),s.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=s)}if(t._status===1)return t._result.default;throw t._result}var vn={current:null},ff={transition:null},tM={ReactCurrentDispatcher:vn,ReactCurrentBatchConfig:ff,ReactCurrentOwner:S$};function Lx(){throw Error("act(...) is not supported in production builds of React.")}ft.Children={map:F_,forEach:function(t,s,r){F_(t,function(){s.apply(this,arguments)},r)},count:function(t){var s=0;return F_(t,function(){s++}),s},toArray:function(t){return F_(t,function(s){return s})||[]},only:function(t){if(!R$(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ft.Component=Cc;ft.Fragment=Gw;ft.Profiler=Ww;ft.PureComponent=I$;ft.StrictMode=Vw;ft.Suspense=Kw;ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tM;ft.act=Lx;ft.cloneElement=function(t,s,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=mx({},t.props),l=t.key,c=t.ref,u=t._owner;if(s!=null){if(s.ref!==void 0&&(c=s.ref,u=S$.current),s.key!==void 0&&(l=""+s.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(_ in s)Ox.call(s,_)&&!Sx.hasOwnProperty(_)&&(i[_]=s[_]===void 0&&h!==void 0?h[_]:s[_])}var _=arguments.length-2;if(_===1)i.children=r;else if(1<_){h=Array(_);for(var f=0;f<_;f++)h[f]=arguments[f+2];i.children=h}return{$$typeof:Fh,type:t.type,key:l,ref:c,props:i,_owner:u}};ft.createContext=function(t){return t={$$typeof:zw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Xw,_context:t},t.Consumer=t};ft.createElement=Rx;ft.createFactory=function(t){var s=Rx.bind(null,t);return s.type=t,s};ft.createRef=function(){return{current:null}};ft.forwardRef=function(t){return{$$typeof:Yw,render:t}};ft.isValidElement=R$;ft.lazy=function(t){return{$$typeof:Jw,_payload:{_status:-1,_result:t},_init:eM}};ft.memo=function(t,s){return{$$typeof:jw,type:t,compare:s===void 0?null:s}};ft.startTransition=function(t){var s=ff.transition;ff.transition={};try{t()}finally{ff.transition=s}};ft.unstable_act=Lx;ft.useCallback=function(t,s){return vn.current.useCallback(t,s)};ft.useContext=function(t){return vn.current.useContext(t)};ft.useDebugValue=function(){};ft.useDeferredValue=function(t){return vn.current.useDeferredValue(t)};ft.useEffect=function(t,s){return vn.current.useEffect(t,s)};ft.useId=function(){return vn.current.useId()};ft.useImperativeHandle=function(t,s,r){return vn.current.useImperativeHandle(t,s,r)};ft.useInsertionEffect=function(t,s){return vn.current.useInsertionEffect(t,s)};ft.useLayoutEffect=function(t,s){return vn.current.useLayoutEffect(t,s)};ft.useMemo=function(t,s){return vn.current.useMemo(t,s)};ft.useReducer=function(t,s,r){return vn.current.useReducer(t,s,r)};ft.useRef=function(t){return vn.current.useRef(t)};ft.useState=function(t){return vn.current.useState(t)};ft.useSyncExternalStore=function(t,s,r){return vn.current.useSyncExternalStore(t,s,r)};ft.useTransition=function(){return vn.current.useTransition()};ft.version="18.3.1";Ex.exports=ft;var Ce=Ex.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM=Ce,nM=Symbol.for("react.element"),sM=Symbol.for("react.fragment"),iM=Object.prototype.hasOwnProperty,oM=rM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lM={key:!0,ref:!0,__self:!0,__source:!0};function Ax(t,s,r){var i,l={},c=null,u=null;r!==void 0&&(c=""+r),s.key!==void 0&&(c=""+s.key),s.ref!==void 0&&(u=s.ref);for(i in s)iM.call(s,i)&&!lM.hasOwnProperty(i)&&(l[i]=s[i]);if(t&&t.defaultProps)for(i in s=t.defaultProps,s)l[i]===void 0&&(l[i]=s[i]);return{$$typeof:nM,type:t,key:c,ref:u,props:l,_owner:oM.current}}cT.Fragment=sM;cT.jsx=Ax;cT.jsxs=Ax;px.exports=cT;var V=px.exports,Cx={exports:{}},ss={},vx={exports:{}},Nx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function s(Re,j){var Y=Re.length;Re.push(j);e:for(;0<Y;){var oe=Y-1>>>1,M=Re[oe];if(0<l(M,j))Re[oe]=j,Re[Y]=M,Y=oe;else break e}}function r(Re){return Re.length===0?null:Re[0]}function i(Re){if(Re.length===0)return null;var j=Re[0],Y=Re.pop();if(Y!==j){Re[0]=Y;e:for(var oe=0,M=Re.length,Q=M>>>1;oe<Q;){var J=2*(oe+1)-1,q=Re[J],he=J+1,Ne=Re[he];if(0>l(q,Y))he<M&&0>l(Ne,q)?(Re[oe]=Ne,Re[he]=Y,oe=he):(Re[oe]=q,Re[J]=Y,oe=J);else if(he<M&&0>l(Ne,Y))Re[oe]=Ne,Re[he]=Y,oe=he;else break e}}return j}function l(Re,j){var Y=Re.sortIndex-j.sortIndex;return Y!==0?Y:Re.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;t.unstable_now=function(){return c.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var _=[],f=[],T=1,E=null,g=3,S=!1,R=!1,L=!1,N=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(Re){for(var j=r(f);j!==null;){if(j.callback===null)i(f);else if(j.startTime<=Re)i(f),j.sortIndex=j.expirationTime,s(_,j);else break;j=r(f)}}function k(Re){if(L=!1,I(Re),!R)if(r(_)!==null)R=!0,we(H);else{var j=r(f);j!==null&&ye(k,j.startTime-Re)}}function H(Re,j){R=!1,L&&(L=!1,C(U),U=-1),S=!0;var Y=g;try{for(I(j),E=r(_);E!==null&&(!(E.expirationTime>j)||Re&&!Z());){var oe=E.callback;if(typeof oe=="function"){E.callback=null,g=E.priorityLevel;var M=oe(E.expirationTime<=j);j=t.unstable_now(),typeof M=="function"?E.callback=M:E===r(_)&&i(_),I(j)}else i(_);E=r(_)}if(E!==null)var Q=!0;else{var J=r(f);J!==null&&ye(k,J.startTime-j),Q=!1}return Q}finally{E=null,g=Y,S=!1}}var G=!1,x=null,U=-1,B=5,re=-1;function Z(){return!(t.unstable_now()-re<B)}function se(){if(x!==null){var Re=t.unstable_now();re=Re;var j=!0;try{j=x(!0,Re)}finally{j?pe():(G=!1,x=null)}}else G=!1}var pe;if(typeof A=="function")pe=function(){A(se)};else if(typeof MessageChannel<"u"){var Me=new MessageChannel,Oe=Me.port2;Me.port1.onmessage=se,pe=function(){Oe.postMessage(null)}}else pe=function(){N(se,0)};function we(Re){x=Re,G||(G=!0,pe())}function ye(Re,j){U=N(function(){Re(t.unstable_now())},j)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(Re){Re.callback=null},t.unstable_continueExecution=function(){R||S||(R=!0,we(H))},t.unstable_forceFrameRate=function(Re){0>Re||125<Re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<Re?Math.floor(1e3/Re):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return r(_)},t.unstable_next=function(Re){switch(g){case 1:case 2:case 3:var j=3;break;default:j=g}var Y=g;g=j;try{return Re()}finally{g=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(Re,j){switch(Re){case 1:case 2:case 3:case 4:case 5:break;default:Re=3}var Y=g;g=Re;try{return j()}finally{g=Y}},t.unstable_scheduleCallback=function(Re,j,Y){var oe=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?oe+Y:oe):Y=oe,Re){case 1:var M=-1;break;case 2:M=250;break;case 5:M=1073741823;break;case 4:M=1e4;break;default:M=5e3}return M=Y+M,Re={id:T++,callback:j,priorityLevel:Re,startTime:Y,expirationTime:M,sortIndex:-1},Y>oe?(Re.sortIndex=Y,s(f,Re),r(_)===null&&Re===r(f)&&(L?(C(U),U=-1):L=!0,ye(k,Y-oe))):(Re.sortIndex=M,s(_,Re),R||S||(R=!0,we(H))),Re},t.unstable_shouldYield=Z,t.unstable_wrapCallback=function(Re){var j=g;return function(){var Y=g;g=j;try{return Re.apply(this,arguments)}finally{g=Y}}}})(Nx);vx.exports=Nx;var aM=vx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cM=Ce,ts=aM;function Fe(t){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)s+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xx=new Set,ch={};function Vl(t,s){pc(t,s),pc(t+"Capture",s)}function pc(t,s){for(ch[t]=s,t=0;t<s.length;t++)xx.add(s[t])}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),am=Object.prototype.hasOwnProperty,uM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,LC={},AC={};function hM(t){return am.call(AC,t)?!0:am.call(LC,t)?!1:uM.test(t)?AC[t]=!0:(LC[t]=!0,!1)}function dM(t,s,r,i){if(r!==null&&r.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _M(t,s,r,i){if(s===null||typeof s>"u"||dM(t,s,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function Nn(t,s,r,i,l,c,u){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=i,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=t,this.type=s,this.sanitizeURL=c,this.removeEmptyString=u}var tn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tn[t]=new Nn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var s=t[0];tn[s]=new Nn(s,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tn[t]=new Nn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tn[t]=new Nn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tn[t]=new Nn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tn[t]=new Nn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tn[t]=new Nn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tn[t]=new Nn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tn[t]=new Nn(t,5,!1,t.toLowerCase(),null,!1,!1)});var L$=/[\-:]([a-z])/g;function A$(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var s=t.replace(L$,A$);tn[s]=new Nn(s,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var s=t.replace(L$,A$);tn[s]=new Nn(s,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var s=t.replace(L$,A$);tn[s]=new Nn(s,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!1,!1)});tn.xlinkHref=new Nn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tn[t]=new Nn(t,1,!1,t.toLowerCase(),null,!0,!0)});function C$(t,s,r,i){var l=tn.hasOwnProperty(s)?tn[s]:null;(l!==null?l.type!==0:i||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(_M(s,r,l,i)&&(r=null),i||l===null?hM(s)&&(r===null?t.removeAttribute(s):t.setAttribute(s,""+r)):l.mustUseProperty?t[l.propertyName]=r===null?l.type===3?!1:"":r:(s=l.attributeName,i=l.attributeNamespace,r===null?t.removeAttribute(s):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,i?t.setAttributeNS(i,s,r):t.setAttribute(s,r))))}var Zi=cM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,B_=Symbol.for("react.element"),Va=Symbol.for("react.portal"),Wa=Symbol.for("react.fragment"),v$=Symbol.for("react.strict_mode"),cm=Symbol.for("react.profiler"),bx=Symbol.for("react.provider"),yx=Symbol.for("react.context"),N$=Symbol.for("react.forward_ref"),um=Symbol.for("react.suspense"),hm=Symbol.for("react.suspense_list"),x$=Symbol.for("react.memo"),Oo=Symbol.for("react.lazy"),kx=Symbol.for("react.offscreen"),CC=Symbol.iterator;function Au(t){return t===null||typeof t!="object"?null:(t=CC&&t[CC]||t["@@iterator"],typeof t=="function"?t:null)}var er=Object.assign,f0;function Mu(t){if(f0===void 0)try{throw Error()}catch(r){var s=r.stack.trim().match(/\n( *(at )?)/);f0=s&&s[1]||""}return`
`+f0+t}var T0=!1;function p0(t,s){if(!t||T0)return"";T0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(f){var i=f}Reflect.construct(t,[],s)}else{try{s.call()}catch(f){i=f}t.call(s.prototype)}else{try{throw Error()}catch(f){i=f}t()}}catch(f){if(f&&i&&typeof f.stack=="string"){for(var l=f.stack.split(`
`),c=i.stack.split(`
`),u=l.length-1,h=c.length-1;1<=u&&0<=h&&l[u]!==c[h];)h--;for(;1<=u&&0<=h;u--,h--)if(l[u]!==c[h]){if(u!==1||h!==1)do if(u--,h--,0>h||l[u]!==c[h]){var _=`
`+l[u].replace(" at new "," at ");return t.displayName&&_.includes("<anonymous>")&&(_=_.replace("<anonymous>",t.displayName)),_}while(1<=u&&0<=h);break}}}finally{T0=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Mu(t):""}function fM(t){switch(t.tag){case 5:return Mu(t.type);case 16:return Mu("Lazy");case 13:return Mu("Suspense");case 19:return Mu("SuspenseList");case 0:case 2:case 15:return t=p0(t.type,!1),t;case 11:return t=p0(t.type.render,!1),t;case 1:return t=p0(t.type,!0),t;default:return""}}function dm(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wa:return"Fragment";case Va:return"Portal";case cm:return"Profiler";case v$:return"StrictMode";case um:return"Suspense";case hm:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yx:return(t.displayName||"Context")+".Consumer";case bx:return(t._context.displayName||"Context")+".Provider";case N$:var s=t.render;return t=t.displayName,t||(t=s.displayName||s.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case x$:return s=t.displayName||null,s!==null?s:dm(t.type)||"Memo";case Oo:s=t._payload,t=t._init;try{return dm(t(s))}catch{}}return null}function TM(t){var s=t.type;switch(t.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=s.render,t=t.displayName||t.name||"",s.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return dm(s);case 8:return s===v$?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function Ho(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wx(t){var s=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function pM(t){var s=wx(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,s),i=""+t[s];if(!t.hasOwnProperty(s)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,c=r.set;return Object.defineProperty(t,s,{configurable:!0,get:function(){return l.call(this)},set:function(u){i=""+u,c.call(this,u)}}),Object.defineProperty(t,s,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(u){i=""+u},stopTracking:function(){t._valueTracker=null,delete t[s]}}}}function U_(t){t._valueTracker||(t._valueTracker=pM(t))}function Mx(t){if(!t)return!1;var s=t._valueTracker;if(!s)return!0;var r=s.getValue(),i="";return t&&(i=wx(t)?t.checked?"true":"false":t.value),t=i,t!==r?(s.setValue(t),!0):!1}function Af(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _m(t,s){var r=s.checked;return er({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function vC(t,s){var r=s.defaultValue==null?"":s.defaultValue,i=s.checked!=null?s.checked:s.defaultChecked;r=Ho(s.value!=null?s.value:r),t._wrapperState={initialChecked:i,initialValue:r,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function Dx(t,s){s=s.checked,s!=null&&C$(t,"checked",s,!1)}function fm(t,s){Dx(t,s);var r=Ho(s.value),i=s.type;if(r!=null)i==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}s.hasOwnProperty("value")?Tm(t,s.type,r):s.hasOwnProperty("defaultValue")&&Tm(t,s.type,Ho(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(t.defaultChecked=!!s.defaultChecked)}function NC(t,s,r){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var i=s.type;if(!(i!=="submit"&&i!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+t._wrapperState.initialValue,r||s===t.value||(t.value=s),t.defaultValue=s}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Tm(t,s,r){(s!=="number"||Af(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Du=Array.isArray;function sc(t,s,r,i){if(t=t.options,s){s={};for(var l=0;l<r.length;l++)s["$"+r[l]]=!0;for(r=0;r<t.length;r++)l=s.hasOwnProperty("$"+t[r].value),t[r].selected!==l&&(t[r].selected=l),l&&i&&(t[r].defaultSelected=!0)}else{for(r=""+Ho(r),s=null,l=0;l<t.length;l++){if(t[l].value===r){t[l].selected=!0,i&&(t[l].defaultSelected=!0);return}s!==null||t[l].disabled||(s=t[l])}s!==null&&(s.selected=!0)}}function pm(t,s){if(s.dangerouslySetInnerHTML!=null)throw Error(Fe(91));return er({},s,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function xC(t,s){var r=s.value;if(r==null){if(r=s.children,s=s.defaultValue,r!=null){if(s!=null)throw Error(Fe(92));if(Du(r)){if(1<r.length)throw Error(Fe(93));r=r[0]}s=r}s==null&&(s=""),r=s}t._wrapperState={initialValue:Ho(r)}}function Px(t,s){var r=Ho(s.value),i=Ho(s.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),s.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),i!=null&&(t.defaultValue=""+i)}function bC(t){var s=t.textContent;s===t._wrapperState.initialValue&&s!==""&&s!==null&&(t.value=s)}function Fx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Em(t,s){return t==null||t==="http://www.w3.org/1999/xhtml"?Fx(s):t==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var H_,Bx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(s,r,i,l){MSApp.execUnsafeLocalFunction(function(){return t(s,r,i,l)})}:t}(function(t,s){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=s;else{for(H_=H_||document.createElement("div"),H_.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=H_.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;s.firstChild;)t.appendChild(s.firstChild)}});function uh(t,s){if(s){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=s;return}}t.textContent=s}var Vu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},EM=["Webkit","ms","Moz","O"];Object.keys(Vu).forEach(function(t){EM.forEach(function(s){s=s+t.charAt(0).toUpperCase()+t.substring(1),Vu[s]=Vu[t]})});function Ux(t,s,r){return s==null||typeof s=="boolean"||s===""?"":r||typeof s!="number"||s===0||Vu.hasOwnProperty(t)&&Vu[t]?(""+s).trim():s+"px"}function Hx(t,s){t=t.style;for(var r in s)if(s.hasOwnProperty(r)){var i=r.indexOf("--")===0,l=Ux(r,s[r],i);r==="float"&&(r="cssFloat"),i?t.setProperty(r,l):t[r]=l}}var gM=er({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gm(t,s){if(s){if(gM[t]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(Fe(137,t));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(Fe(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(Fe(61))}if(s.style!=null&&typeof s.style!="object")throw Error(Fe(62))}}function mm(t,s){if(t.indexOf("-")===-1)return typeof s.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $m=null;function b$(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Im=null,ic=null,oc=null;function yC(t){if(t=Hh(t)){if(typeof Im!="function")throw Error(Fe(280));var s=t.stateNode;s&&(s=fT(s),Im(t.stateNode,t.type,s))}}function Gx(t){ic?oc?oc.push(t):oc=[t]:ic=t}function Vx(){if(ic){var t=ic,s=oc;if(oc=ic=null,yC(t),s)for(t=0;t<s.length;t++)yC(s[t])}}function Wx(t,s){return t(s)}function Xx(){}var E0=!1;function zx(t,s,r){if(E0)return t(s,r);E0=!0;try{return Wx(t,s,r)}finally{E0=!1,(ic!==null||oc!==null)&&(Xx(),Vx())}}function hh(t,s){var r=t.stateNode;if(r===null)return null;var i=fT(r);if(i===null)return null;r=i[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Fe(231,s,typeof r));return r}var Om=!1;if(Ki)try{var Cu={};Object.defineProperty(Cu,"passive",{get:function(){Om=!0}}),window.addEventListener("test",Cu,Cu),window.removeEventListener("test",Cu,Cu)}catch{Om=!1}function mM(t,s,r,i,l,c,u,h,_){var f=Array.prototype.slice.call(arguments,3);try{s.apply(r,f)}catch(T){this.onError(T)}}var Wu=!1,Cf=null,vf=!1,Sm=null,$M={onError:function(t){Wu=!0,Cf=t}};function IM(t,s,r,i,l,c,u,h,_){Wu=!1,Cf=null,mM.apply($M,arguments)}function OM(t,s,r,i,l,c,u,h,_){if(IM.apply(this,arguments),Wu){if(Wu){var f=Cf;Wu=!1,Cf=null}else throw Error(Fe(198));vf||(vf=!0,Sm=f)}}function Wl(t){var s=t,r=t;if(t.alternate)for(;s.return;)s=s.return;else{t=s;do s=t,s.flags&4098&&(r=s.return),t=s.return;while(t)}return s.tag===3?r:null}function Yx(t){if(t.tag===13){var s=t.memoizedState;if(s===null&&(t=t.alternate,t!==null&&(s=t.memoizedState)),s!==null)return s.dehydrated}return null}function kC(t){if(Wl(t)!==t)throw Error(Fe(188))}function SM(t){var s=t.alternate;if(!s){if(s=Wl(t),s===null)throw Error(Fe(188));return s!==t?null:t}for(var r=t,i=s;;){var l=r.return;if(l===null)break;var c=l.alternate;if(c===null){if(i=l.return,i!==null){r=i;continue}break}if(l.child===c.child){for(c=l.child;c;){if(c===r)return kC(l),t;if(c===i)return kC(l),s;c=c.sibling}throw Error(Fe(188))}if(r.return!==i.return)r=l,i=c;else{for(var u=!1,h=l.child;h;){if(h===r){u=!0,r=l,i=c;break}if(h===i){u=!0,i=l,r=c;break}h=h.sibling}if(!u){for(h=c.child;h;){if(h===r){u=!0,r=c,i=l;break}if(h===i){u=!0,i=c,r=l;break}h=h.sibling}if(!u)throw Error(Fe(189))}}if(r.alternate!==i)throw Error(Fe(190))}if(r.tag!==3)throw Error(Fe(188));return r.stateNode.current===r?t:s}function Kx(t){return t=SM(t),t!==null?jx(t):null}function jx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var s=jx(t);if(s!==null)return s;t=t.sibling}return null}var Jx=ts.unstable_scheduleCallback,wC=ts.unstable_cancelCallback,RM=ts.unstable_shouldYield,LM=ts.unstable_requestPaint,Tr=ts.unstable_now,AM=ts.unstable_getCurrentPriorityLevel,y$=ts.unstable_ImmediatePriority,qx=ts.unstable_UserBlockingPriority,Nf=ts.unstable_NormalPriority,CM=ts.unstable_LowPriority,Zx=ts.unstable_IdlePriority,uT=null,gi=null;function vM(t){if(gi&&typeof gi.onCommitFiberRoot=="function")try{gi.onCommitFiberRoot(uT,t,void 0,(t.current.flags&128)===128)}catch{}}var Vs=Math.clz32?Math.clz32:bM,NM=Math.log,xM=Math.LN2;function bM(t){return t>>>=0,t===0?32:31-(NM(t)/xM|0)|0}var G_=64,V_=4194304;function Pu(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function xf(t,s){var r=t.pendingLanes;if(r===0)return 0;var i=0,l=t.suspendedLanes,c=t.pingedLanes,u=r&268435455;if(u!==0){var h=u&~l;h!==0?i=Pu(h):(c&=u,c!==0&&(i=Pu(c)))}else u=r&~l,u!==0?i=Pu(u):c!==0&&(i=Pu(c));if(i===0)return 0;if(s!==0&&s!==i&&!(s&l)&&(l=i&-i,c=s&-s,l>=c||l===16&&(c&4194240)!==0))return s;if(i&4&&(i|=r&16),s=t.entangledLanes,s!==0)for(t=t.entanglements,s&=i;0<s;)r=31-Vs(s),l=1<<r,i|=t[r],s&=~l;return i}function yM(t,s){switch(t){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kM(t,s){for(var r=t.suspendedLanes,i=t.pingedLanes,l=t.expirationTimes,c=t.pendingLanes;0<c;){var u=31-Vs(c),h=1<<u,_=l[u];_===-1?(!(h&r)||h&i)&&(l[u]=yM(h,s)):_<=s&&(t.expiredLanes|=h),c&=~h}}function Rm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qx(){var t=G_;return G_<<=1,!(G_&4194240)&&(G_=64),t}function g0(t){for(var s=[],r=0;31>r;r++)s.push(t);return s}function Bh(t,s,r){t.pendingLanes|=s,s!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,s=31-Vs(s),t[s]=r}function wM(t,s){var r=t.pendingLanes&~s;t.pendingLanes=s,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=s,t.mutableReadLanes&=s,t.entangledLanes&=s,s=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<r;){var l=31-Vs(r),c=1<<l;s[l]=0,i[l]=-1,t[l]=-1,r&=~c}}function k$(t,s){var r=t.entangledLanes|=s;for(t=t.entanglements;r;){var i=31-Vs(r),l=1<<i;l&s|t[i]&s&&(t[i]|=s),r&=~l}}var vt=0;function eb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tb,w$,rb,nb,sb,Lm=!1,W_=[],yo=null,ko=null,wo=null,dh=new Map,_h=new Map,Ro=[],MM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function MC(t,s){switch(t){case"focusin":case"focusout":yo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":wo=null;break;case"pointerover":case"pointerout":dh.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":_h.delete(s.pointerId)}}function vu(t,s,r,i,l,c){return t===null||t.nativeEvent!==c?(t={blockedOn:s,domEventName:r,eventSystemFlags:i,nativeEvent:c,targetContainers:[l]},s!==null&&(s=Hh(s),s!==null&&w$(s)),t):(t.eventSystemFlags|=i,s=t.targetContainers,l!==null&&s.indexOf(l)===-1&&s.push(l),t)}function DM(t,s,r,i,l){switch(s){case"focusin":return yo=vu(yo,t,s,r,i,l),!0;case"dragenter":return ko=vu(ko,t,s,r,i,l),!0;case"mouseover":return wo=vu(wo,t,s,r,i,l),!0;case"pointerover":var c=l.pointerId;return dh.set(c,vu(dh.get(c)||null,t,s,r,i,l)),!0;case"gotpointercapture":return c=l.pointerId,_h.set(c,vu(_h.get(c)||null,t,s,r,i,l)),!0}return!1}function ib(t){var s=Ll(t.target);if(s!==null){var r=Wl(s);if(r!==null){if(s=r.tag,s===13){if(s=Yx(r),s!==null){t.blockedOn=s,sb(t.priority,function(){rb(r)});return}}else if(s===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Tf(t){if(t.blockedOn!==null)return!1;for(var s=t.targetContainers;0<s.length;){var r=Am(t.domEventName,t.eventSystemFlags,s[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var i=new r.constructor(r.type,r);$m=i,r.target.dispatchEvent(i),$m=null}else return s=Hh(r),s!==null&&w$(s),t.blockedOn=r,!1;s.shift()}return!0}function DC(t,s,r){Tf(t)&&r.delete(s)}function PM(){Lm=!1,yo!==null&&Tf(yo)&&(yo=null),ko!==null&&Tf(ko)&&(ko=null),wo!==null&&Tf(wo)&&(wo=null),dh.forEach(DC),_h.forEach(DC)}function Nu(t,s){t.blockedOn===s&&(t.blockedOn=null,Lm||(Lm=!0,ts.unstable_scheduleCallback(ts.unstable_NormalPriority,PM)))}function fh(t){function s(l){return Nu(l,t)}if(0<W_.length){Nu(W_[0],t);for(var r=1;r<W_.length;r++){var i=W_[r];i.blockedOn===t&&(i.blockedOn=null)}}for(yo!==null&&Nu(yo,t),ko!==null&&Nu(ko,t),wo!==null&&Nu(wo,t),dh.forEach(s),_h.forEach(s),r=0;r<Ro.length;r++)i=Ro[r],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ro.length&&(r=Ro[0],r.blockedOn===null);)ib(r),r.blockedOn===null&&Ro.shift()}var lc=Zi.ReactCurrentBatchConfig,bf=!0;function FM(t,s,r,i){var l=vt,c=lc.transition;lc.transition=null;try{vt=1,M$(t,s,r,i)}finally{vt=l,lc.transition=c}}function BM(t,s,r,i){var l=vt,c=lc.transition;lc.transition=null;try{vt=4,M$(t,s,r,i)}finally{vt=l,lc.transition=c}}function M$(t,s,r,i){if(bf){var l=Am(t,s,r,i);if(l===null)v0(t,s,i,yf,r),MC(t,i);else if(DM(l,t,s,r,i))i.stopPropagation();else if(MC(t,i),s&4&&-1<MM.indexOf(t)){for(;l!==null;){var c=Hh(l);if(c!==null&&tb(c),c=Am(t,s,r,i),c===null&&v0(t,s,i,yf,r),c===l)break;l=c}l!==null&&i.stopPropagation()}else v0(t,s,i,null,r)}}var yf=null;function Am(t,s,r,i){if(yf=null,t=b$(i),t=Ll(t),t!==null)if(s=Wl(t),s===null)t=null;else if(r=s.tag,r===13){if(t=Yx(s),t!==null)return t;t=null}else if(r===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;t=null}else s!==t&&(t=null);return yf=t,null}function ob(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(AM()){case y$:return 1;case qx:return 4;case Nf:case CM:return 16;case Zx:return 536870912;default:return 16}default:return 16}}var Co=null,D$=null,pf=null;function lb(){if(pf)return pf;var t,s=D$,r=s.length,i,l="value"in Co?Co.value:Co.textContent,c=l.length;for(t=0;t<r&&s[t]===l[t];t++);var u=r-t;for(i=1;i<=u&&s[r-i]===l[c-i];i++);return pf=l.slice(t,1<i?1-i:void 0)}function Ef(t){var s=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&s===13&&(t=13)):t=s,t===10&&(t=13),32<=t||t===13?t:0}function X_(){return!0}function PC(){return!1}function is(t){function s(r,i,l,c,u){this._reactName=r,this._targetInst=l,this.type=i,this.nativeEvent=c,this.target=u,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(r=t[h],this[h]=r?r(c):c[h]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?X_:PC,this.isPropagationStopped=PC,this}return er(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=X_)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=X_)},persist:function(){},isPersistent:X_}),s}var vc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},P$=is(vc),Uh=er({},vc,{view:0,detail:0}),UM=is(Uh),m0,$0,xu,hT=er({},Uh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:F$,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==xu&&(xu&&t.type==="mousemove"?(m0=t.screenX-xu.screenX,$0=t.screenY-xu.screenY):$0=m0=0,xu=t),m0)},movementY:function(t){return"movementY"in t?t.movementY:$0}}),FC=is(hT),HM=er({},hT,{dataTransfer:0}),GM=is(HM),VM=er({},Uh,{relatedTarget:0}),I0=is(VM),WM=er({},vc,{animationName:0,elapsedTime:0,pseudoElement:0}),XM=is(WM),zM=er({},vc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),YM=is(zM),KM=er({},vc,{data:0}),BC=is(KM),jM={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JM={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},qM={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZM(t){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(t):(t=qM[t])?!!s[t]:!1}function F$(){return ZM}var QM=er({},Uh,{key:function(t){if(t.key){var s=jM[t.key]||t.key;if(s!=="Unidentified")return s}return t.type==="keypress"?(t=Ef(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JM[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:F$,charCode:function(t){return t.type==="keypress"?Ef(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ef(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eD=is(QM),tD=er({},hT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UC=is(tD),rD=er({},Uh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:F$}),nD=is(rD),sD=er({},vc,{propertyName:0,elapsedTime:0,pseudoElement:0}),iD=is(sD),oD=er({},hT,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lD=is(oD),aD=[9,13,27,32],B$=Ki&&"CompositionEvent"in window,Xu=null;Ki&&"documentMode"in document&&(Xu=document.documentMode);var cD=Ki&&"TextEvent"in window&&!Xu,ab=Ki&&(!B$||Xu&&8<Xu&&11>=Xu),HC=" ",GC=!1;function cb(t,s){switch(t){case"keyup":return aD.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ub(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xa=!1;function uD(t,s){switch(t){case"compositionend":return ub(s);case"keypress":return s.which!==32?null:(GC=!0,HC);case"textInput":return t=s.data,t===HC&&GC?null:t;default:return null}}function hD(t,s){if(Xa)return t==="compositionend"||!B$&&cb(t,s)?(t=lb(),pf=D$=Co=null,Xa=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ab&&s.locale!=="ko"?null:s.data;default:return null}}var dD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VC(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s==="input"?!!dD[t.type]:s==="textarea"}function hb(t,s,r,i){Gx(i),s=kf(s,"onChange"),0<s.length&&(r=new P$("onChange","change",null,r,i),t.push({event:r,listeners:s}))}var zu=null,Th=null;function _D(t){Ob(t,0)}function dT(t){var s=Ka(t);if(Mx(s))return t}function fD(t,s){if(t==="change")return s}var db=!1;if(Ki){var O0;if(Ki){var S0="oninput"in document;if(!S0){var WC=document.createElement("div");WC.setAttribute("oninput","return;"),S0=typeof WC.oninput=="function"}O0=S0}else O0=!1;db=O0&&(!document.documentMode||9<document.documentMode)}function XC(){zu&&(zu.detachEvent("onpropertychange",_b),Th=zu=null)}function _b(t){if(t.propertyName==="value"&&dT(Th)){var s=[];hb(s,Th,t,b$(t)),zx(_D,s)}}function TD(t,s,r){t==="focusin"?(XC(),zu=s,Th=r,zu.attachEvent("onpropertychange",_b)):t==="focusout"&&XC()}function pD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dT(Th)}function ED(t,s){if(t==="click")return dT(s)}function gD(t,s){if(t==="input"||t==="change")return dT(s)}function mD(t,s){return t===s&&(t!==0||1/t===1/s)||t!==t&&s!==s}var Xs=typeof Object.is=="function"?Object.is:mD;function ph(t,s){if(Xs(t,s))return!0;if(typeof t!="object"||t===null||typeof s!="object"||s===null)return!1;var r=Object.keys(t),i=Object.keys(s);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var l=r[i];if(!am.call(s,l)||!Xs(t[l],s[l]))return!1}return!0}function zC(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function YC(t,s){var r=zC(t);t=0;for(var i;r;){if(r.nodeType===3){if(i=t+r.textContent.length,t<=s&&i>=s)return{node:r,offset:s-t};t=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=zC(r)}}function fb(t,s){return t&&s?t===s?!0:t&&t.nodeType===3?!1:s&&s.nodeType===3?fb(t,s.parentNode):"contains"in t?t.contains(s):t.compareDocumentPosition?!!(t.compareDocumentPosition(s)&16):!1:!1}function Tb(){for(var t=window,s=Af();s instanceof t.HTMLIFrameElement;){try{var r=typeof s.contentWindow.location.href=="string"}catch{r=!1}if(r)t=s.contentWindow;else break;s=Af(t.document)}return s}function U$(t){var s=t&&t.nodeName&&t.nodeName.toLowerCase();return s&&(s==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||s==="textarea"||t.contentEditable==="true")}function $D(t){var s=Tb(),r=t.focusedElem,i=t.selectionRange;if(s!==r&&r&&r.ownerDocument&&fb(r.ownerDocument.documentElement,r)){if(i!==null&&U$(r)){if(s=i.start,t=i.end,t===void 0&&(t=s),"selectionStart"in r)r.selectionStart=s,r.selectionEnd=Math.min(t,r.value.length);else if(t=(s=r.ownerDocument||document)&&s.defaultView||window,t.getSelection){t=t.getSelection();var l=r.textContent.length,c=Math.min(i.start,l);i=i.end===void 0?c:Math.min(i.end,l),!t.extend&&c>i&&(l=i,i=c,c=l),l=YC(r,c);var u=YC(r,i);l&&u&&(t.rangeCount!==1||t.anchorNode!==l.node||t.anchorOffset!==l.offset||t.focusNode!==u.node||t.focusOffset!==u.offset)&&(s=s.createRange(),s.setStart(l.node,l.offset),t.removeAllRanges(),c>i?(t.addRange(s),t.extend(u.node,u.offset)):(s.setEnd(u.node,u.offset),t.addRange(s)))}}for(s=[],t=r;t=t.parentNode;)t.nodeType===1&&s.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<s.length;r++)t=s[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ID=Ki&&"documentMode"in document&&11>=document.documentMode,za=null,Cm=null,Yu=null,vm=!1;function KC(t,s,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;vm||za==null||za!==Af(i)||(i=za,"selectionStart"in i&&U$(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Yu&&ph(Yu,i)||(Yu=i,i=kf(Cm,"onSelect"),0<i.length&&(s=new P$("onSelect","select",null,s,r),t.push({event:s,listeners:i}),s.target=za)))}function z_(t,s){var r={};return r[t.toLowerCase()]=s.toLowerCase(),r["Webkit"+t]="webkit"+s,r["Moz"+t]="moz"+s,r}var Ya={animationend:z_("Animation","AnimationEnd"),animationiteration:z_("Animation","AnimationIteration"),animationstart:z_("Animation","AnimationStart"),transitionend:z_("Transition","TransitionEnd")},R0={},pb={};Ki&&(pb=document.createElement("div").style,"AnimationEvent"in window||(delete Ya.animationend.animation,delete Ya.animationiteration.animation,delete Ya.animationstart.animation),"TransitionEvent"in window||delete Ya.transitionend.transition);function _T(t){if(R0[t])return R0[t];if(!Ya[t])return t;var s=Ya[t],r;for(r in s)if(s.hasOwnProperty(r)&&r in pb)return R0[t]=s[r];return t}var Eb=_T("animationend"),gb=_T("animationiteration"),mb=_T("animationstart"),$b=_T("transitionend"),Ib=new Map,jC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zo(t,s){Ib.set(t,s),Vl(s,[t])}for(var L0=0;L0<jC.length;L0++){var A0=jC[L0],OD=A0.toLowerCase(),SD=A0[0].toUpperCase()+A0.slice(1);zo(OD,"on"+SD)}zo(Eb,"onAnimationEnd");zo(gb,"onAnimationIteration");zo(mb,"onAnimationStart");zo("dblclick","onDoubleClick");zo("focusin","onFocus");zo("focusout","onBlur");zo($b,"onTransitionEnd");pc("onMouseEnter",["mouseout","mouseover"]);pc("onMouseLeave",["mouseout","mouseover"]);pc("onPointerEnter",["pointerout","pointerover"]);pc("onPointerLeave",["pointerout","pointerover"]);Vl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vl("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Fu));function JC(t,s,r){var i=t.type||"unknown-event";t.currentTarget=r,OM(i,s,void 0,t),t.currentTarget=null}function Ob(t,s){s=(s&4)!==0;for(var r=0;r<t.length;r++){var i=t[r],l=i.event;i=i.listeners;e:{var c=void 0;if(s)for(var u=i.length-1;0<=u;u--){var h=i[u],_=h.instance,f=h.currentTarget;if(h=h.listener,_!==c&&l.isPropagationStopped())break e;JC(l,h,f),c=_}else for(u=0;u<i.length;u++){if(h=i[u],_=h.instance,f=h.currentTarget,h=h.listener,_!==c&&l.isPropagationStopped())break e;JC(l,h,f),c=_}}}if(vf)throw t=Sm,vf=!1,Sm=null,t}function Gt(t,s){var r=s[km];r===void 0&&(r=s[km]=new Set);var i=t+"__bubble";r.has(i)||(Sb(s,t,2,!1),r.add(i))}function C0(t,s,r){var i=0;s&&(i|=4),Sb(r,t,i,s)}var Y_="_reactListening"+Math.random().toString(36).slice(2);function Eh(t){if(!t[Y_]){t[Y_]=!0,xx.forEach(function(r){r!=="selectionchange"&&(RD.has(r)||C0(r,!1,t),C0(r,!0,t))});var s=t.nodeType===9?t:t.ownerDocument;s===null||s[Y_]||(s[Y_]=!0,C0("selectionchange",!1,s))}}function Sb(t,s,r,i){switch(ob(s)){case 1:var l=FM;break;case 4:l=BM;break;default:l=M$}r=l.bind(null,s,r,t),l=void 0,!Om||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(l=!0),i?l!==void 0?t.addEventListener(s,r,{capture:!0,passive:l}):t.addEventListener(s,r,!0):l!==void 0?t.addEventListener(s,r,{passive:l}):t.addEventListener(s,r,!1)}function v0(t,s,r,i,l){var c=i;if(!(s&1)&&!(s&2)&&i!==null)e:for(;;){if(i===null)return;var u=i.tag;if(u===3||u===4){var h=i.stateNode.containerInfo;if(h===l||h.nodeType===8&&h.parentNode===l)break;if(u===4)for(u=i.return;u!==null;){var _=u.tag;if((_===3||_===4)&&(_=u.stateNode.containerInfo,_===l||_.nodeType===8&&_.parentNode===l))return;u=u.return}for(;h!==null;){if(u=Ll(h),u===null)return;if(_=u.tag,_===5||_===6){i=c=u;continue e}h=h.parentNode}}i=i.return}zx(function(){var f=c,T=b$(r),E=[];e:{var g=Ib.get(t);if(g!==void 0){var S=P$,R=t;switch(t){case"keypress":if(Ef(r)===0)break e;case"keydown":case"keyup":S=eD;break;case"focusin":R="focus",S=I0;break;case"focusout":R="blur",S=I0;break;case"beforeblur":case"afterblur":S=I0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=FC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=GM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=nD;break;case Eb:case gb:case mb:S=XM;break;case $b:S=iD;break;case"scroll":S=UM;break;case"wheel":S=lD;break;case"copy":case"cut":case"paste":S=YM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=UC}var L=(s&4)!==0,N=!L&&t==="scroll",C=L?g!==null?g+"Capture":null:g;L=[];for(var A=f,I;A!==null;){I=A;var k=I.stateNode;if(I.tag===5&&k!==null&&(I=k,C!==null&&(k=hh(A,C),k!=null&&L.push(gh(A,k,I)))),N)break;A=A.return}0<L.length&&(g=new S(g,R,null,r,T),E.push({event:g,listeners:L}))}}if(!(s&7)){e:{if(g=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",g&&r!==$m&&(R=r.relatedTarget||r.fromElement)&&(Ll(R)||R[ji]))break e;if((S||g)&&(g=T.window===T?T:(g=T.ownerDocument)?g.defaultView||g.parentWindow:window,S?(R=r.relatedTarget||r.toElement,S=f,R=R?Ll(R):null,R!==null&&(N=Wl(R),R!==N||R.tag!==5&&R.tag!==6)&&(R=null)):(S=null,R=f),S!==R)){if(L=FC,k="onMouseLeave",C="onMouseEnter",A="mouse",(t==="pointerout"||t==="pointerover")&&(L=UC,k="onPointerLeave",C="onPointerEnter",A="pointer"),N=S==null?g:Ka(S),I=R==null?g:Ka(R),g=new L(k,A+"leave",S,r,T),g.target=N,g.relatedTarget=I,k=null,Ll(T)===f&&(L=new L(C,A+"enter",R,r,T),L.target=I,L.relatedTarget=N,k=L),N=k,S&&R)t:{for(L=S,C=R,A=0,I=L;I;I=Ba(I))A++;for(I=0,k=C;k;k=Ba(k))I++;for(;0<A-I;)L=Ba(L),A--;for(;0<I-A;)C=Ba(C),I--;for(;A--;){if(L===C||C!==null&&L===C.alternate)break t;L=Ba(L),C=Ba(C)}L=null}else L=null;S!==null&&qC(E,g,S,L,!1),R!==null&&N!==null&&qC(E,N,R,L,!0)}}e:{if(g=f?Ka(f):window,S=g.nodeName&&g.nodeName.toLowerCase(),S==="select"||S==="input"&&g.type==="file")var H=fD;else if(VC(g))if(db)H=gD;else{H=pD;var G=TD}else(S=g.nodeName)&&S.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(H=ED);if(H&&(H=H(t,f))){hb(E,H,r,T);break e}G&&G(t,g,f),t==="focusout"&&(G=g._wrapperState)&&G.controlled&&g.type==="number"&&Tm(g,"number",g.value)}switch(G=f?Ka(f):window,t){case"focusin":(VC(G)||G.contentEditable==="true")&&(za=G,Cm=f,Yu=null);break;case"focusout":Yu=Cm=za=null;break;case"mousedown":vm=!0;break;case"contextmenu":case"mouseup":case"dragend":vm=!1,KC(E,r,T);break;case"selectionchange":if(ID)break;case"keydown":case"keyup":KC(E,r,T)}var x;if(B$)e:{switch(t){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Xa?cb(t,r)&&(U="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(U="onCompositionStart");U&&(ab&&r.locale!=="ko"&&(Xa||U!=="onCompositionStart"?U==="onCompositionEnd"&&Xa&&(x=lb()):(Co=T,D$="value"in Co?Co.value:Co.textContent,Xa=!0)),G=kf(f,U),0<G.length&&(U=new BC(U,t,null,r,T),E.push({event:U,listeners:G}),x?U.data=x:(x=ub(r),x!==null&&(U.data=x)))),(x=cD?uD(t,r):hD(t,r))&&(f=kf(f,"onBeforeInput"),0<f.length&&(T=new BC("onBeforeInput","beforeinput",null,r,T),E.push({event:T,listeners:f}),T.data=x))}Ob(E,s)})}function gh(t,s,r){return{instance:t,listener:s,currentTarget:r}}function kf(t,s){for(var r=s+"Capture",i=[];t!==null;){var l=t,c=l.stateNode;l.tag===5&&c!==null&&(l=c,c=hh(t,r),c!=null&&i.unshift(gh(t,c,l)),c=hh(t,s),c!=null&&i.push(gh(t,c,l))),t=t.return}return i}function Ba(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qC(t,s,r,i,l){for(var c=s._reactName,u=[];r!==null&&r!==i;){var h=r,_=h.alternate,f=h.stateNode;if(_!==null&&_===i)break;h.tag===5&&f!==null&&(h=f,l?(_=hh(r,c),_!=null&&u.unshift(gh(r,_,h))):l||(_=hh(r,c),_!=null&&u.push(gh(r,_,h)))),r=r.return}u.length!==0&&t.push({event:s,listeners:u})}var LD=/\r\n?/g,AD=/\u0000|\uFFFD/g;function ZC(t){return(typeof t=="string"?t:""+t).replace(LD,`
`).replace(AD,"")}function K_(t,s,r){if(s=ZC(s),ZC(t)!==s&&r)throw Error(Fe(425))}function wf(){}var Nm=null,xm=null;function bm(t,s){return t==="textarea"||t==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var ym=typeof setTimeout=="function"?setTimeout:void 0,CD=typeof clearTimeout=="function"?clearTimeout:void 0,QC=typeof Promise=="function"?Promise:void 0,vD=typeof queueMicrotask=="function"?queueMicrotask:typeof QC<"u"?function(t){return QC.resolve(null).then(t).catch(ND)}:ym;function ND(t){setTimeout(function(){throw t})}function N0(t,s){var r=s,i=0;do{var l=r.nextSibling;if(t.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(i===0){t.removeChild(l),fh(s);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=l}while(r);fh(s)}function Mo(t){for(;t!=null;t=t.nextSibling){var s=t.nodeType;if(s===1||s===3)break;if(s===8){if(s=t.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return t}function ev(t){t=t.previousSibling;for(var s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(s===0)return t;s--}else r==="/$"&&s++}t=t.previousSibling}return null}var Nc=Math.random().toString(36).slice(2),Ei="__reactFiber$"+Nc,mh="__reactProps$"+Nc,ji="__reactContainer$"+Nc,km="__reactEvents$"+Nc,xD="__reactListeners$"+Nc,bD="__reactHandles$"+Nc;function Ll(t){var s=t[Ei];if(s)return s;for(var r=t.parentNode;r;){if(s=r[ji]||r[Ei]){if(r=s.alternate,s.child!==null||r!==null&&r.child!==null)for(t=ev(t);t!==null;){if(r=t[Ei])return r;t=ev(t)}return s}t=r,r=t.parentNode}return null}function Hh(t){return t=t[Ei]||t[ji],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ka(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Fe(33))}function fT(t){return t[mh]||null}var wm=[],ja=-1;function Yo(t){return{current:t}}function Vt(t){0>ja||(t.current=wm[ja],wm[ja]=null,ja--)}function Pt(t,s){ja++,wm[ja]=t.current,t.current=s}var Go={},pn=Yo(Go),Dn=Yo(!1),wl=Go;function Ec(t,s){var r=t.type.contextTypes;if(!r)return Go;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===s)return i.__reactInternalMemoizedMaskedChildContext;var l={},c;for(c in r)l[c]=s[c];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=l),l}function Pn(t){return t=t.childContextTypes,t!=null}function Mf(){Vt(Dn),Vt(pn)}function tv(t,s,r){if(pn.current!==Go)throw Error(Fe(168));Pt(pn,s),Pt(Dn,r)}function Rb(t,s,r){var i=t.stateNode;if(s=s.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var l in i)if(!(l in s))throw Error(Fe(108,TM(t)||"Unknown",l));return er({},r,i)}function Df(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Go,wl=pn.current,Pt(pn,t),Pt(Dn,Dn.current),!0}function rv(t,s,r){var i=t.stateNode;if(!i)throw Error(Fe(169));r?(t=Rb(t,s,wl),i.__reactInternalMemoizedMergedChildContext=t,Vt(Dn),Vt(pn),Pt(pn,t)):Vt(Dn),Pt(Dn,r)}var Ui=null,TT=!1,x0=!1;function Lb(t){Ui===null?Ui=[t]:Ui.push(t)}function yD(t){TT=!0,Lb(t)}function Ko(){if(!x0&&Ui!==null){x0=!0;var t=0,s=vt;try{var r=Ui;for(vt=1;t<r.length;t++){var i=r[t];do i=i(!0);while(i!==null)}Ui=null,TT=!1}catch(l){throw Ui!==null&&(Ui=Ui.slice(t+1)),Jx(y$,Ko),l}finally{vt=s,x0=!1}}return null}var Ja=[],qa=0,Pf=null,Ff=0,ps=[],Es=0,Ml=null,Hi=1,Gi="";function Ol(t,s){Ja[qa++]=Ff,Ja[qa++]=Pf,Pf=t,Ff=s}function Ab(t,s,r){ps[Es++]=Hi,ps[Es++]=Gi,ps[Es++]=Ml,Ml=t;var i=Hi;t=Gi;var l=32-Vs(i)-1;i&=~(1<<l),r+=1;var c=32-Vs(s)+l;if(30<c){var u=l-l%5;c=(i&(1<<u)-1).toString(32),i>>=u,l-=u,Hi=1<<32-Vs(s)+l|r<<l|i,Gi=c+t}else Hi=1<<c|r<<l|i,Gi=t}function H$(t){t.return!==null&&(Ol(t,1),Ab(t,1,0))}function G$(t){for(;t===Pf;)Pf=Ja[--qa],Ja[qa]=null,Ff=Ja[--qa],Ja[qa]=null;for(;t===Ml;)Ml=ps[--Es],ps[Es]=null,Gi=ps[--Es],ps[Es]=null,Hi=ps[--Es],ps[Es]=null}var Qn=null,Zn=null,jt=!1,Ps=null;function Cb(t,s){var r=gs(5,null,null,0);r.elementType="DELETED",r.stateNode=s,r.return=t,s=t.deletions,s===null?(t.deletions=[r],t.flags|=16):s.push(r)}function nv(t,s){switch(t.tag){case 5:var r=t.type;return s=s.nodeType!==1||r.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(t.stateNode=s,Qn=t,Zn=Mo(s.firstChild),!0):!1;case 6:return s=t.pendingProps===""||s.nodeType!==3?null:s,s!==null?(t.stateNode=s,Qn=t,Zn=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(r=Ml!==null?{id:Hi,overflow:Gi}:null,t.memoizedState={dehydrated:s,treeContext:r,retryLane:1073741824},r=gs(18,null,null,0),r.stateNode=s,r.return=t,t.child=r,Qn=t,Zn=null,!0):!1;default:return!1}}function Mm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dm(t){if(jt){var s=Zn;if(s){var r=s;if(!nv(t,s)){if(Mm(t))throw Error(Fe(418));s=Mo(r.nextSibling);var i=Qn;s&&nv(t,s)?Cb(i,r):(t.flags=t.flags&-4097|2,jt=!1,Qn=t)}}else{if(Mm(t))throw Error(Fe(418));t.flags=t.flags&-4097|2,jt=!1,Qn=t}}}function sv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Qn=t}function j_(t){if(t!==Qn)return!1;if(!jt)return sv(t),jt=!0,!1;var s;if((s=t.tag!==3)&&!(s=t.tag!==5)&&(s=t.type,s=s!=="head"&&s!=="body"&&!bm(t.type,t.memoizedProps)),s&&(s=Zn)){if(Mm(t))throw vb(),Error(Fe(418));for(;s;)Cb(t,s),s=Mo(s.nextSibling)}if(sv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Fe(317));e:{for(t=t.nextSibling,s=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(s===0){Zn=Mo(t.nextSibling);break e}s--}else r!=="$"&&r!=="$!"&&r!=="$?"||s++}t=t.nextSibling}Zn=null}}else Zn=Qn?Mo(t.stateNode.nextSibling):null;return!0}function vb(){for(var t=Zn;t;)t=Mo(t.nextSibling)}function gc(){Zn=Qn=null,jt=!1}function V$(t){Ps===null?Ps=[t]:Ps.push(t)}var kD=Zi.ReactCurrentBatchConfig;function bu(t,s,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Fe(309));var i=r.stateNode}if(!i)throw Error(Fe(147,t));var l=i,c=""+t;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===c?s.ref:(s=function(u){var h=l.refs;u===null?delete h[c]:h[c]=u},s._stringRef=c,s)}if(typeof t!="string")throw Error(Fe(284));if(!r._owner)throw Error(Fe(290,t))}return t}function J_(t,s){throw t=Object.prototype.toString.call(s),Error(Fe(31,t==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":t))}function iv(t){var s=t._init;return s(t._payload)}function Nb(t){function s(C,A){if(t){var I=C.deletions;I===null?(C.deletions=[A],C.flags|=16):I.push(A)}}function r(C,A){if(!t)return null;for(;A!==null;)s(C,A),A=A.sibling;return null}function i(C,A){for(C=new Map;A!==null;)A.key!==null?C.set(A.key,A):C.set(A.index,A),A=A.sibling;return C}function l(C,A){return C=Bo(C,A),C.index=0,C.sibling=null,C}function c(C,A,I){return C.index=I,t?(I=C.alternate,I!==null?(I=I.index,I<A?(C.flags|=2,A):I):(C.flags|=2,A)):(C.flags|=1048576,A)}function u(C){return t&&C.alternate===null&&(C.flags|=2),C}function h(C,A,I,k){return A===null||A.tag!==6?(A=P0(I,C.mode,k),A.return=C,A):(A=l(A,I),A.return=C,A)}function _(C,A,I,k){var H=I.type;return H===Wa?T(C,A,I.props.children,k,I.key):A!==null&&(A.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Oo&&iv(H)===A.type)?(k=l(A,I.props),k.ref=bu(C,A,I),k.return=C,k):(k=Rf(I.type,I.key,I.props,null,C.mode,k),k.ref=bu(C,A,I),k.return=C,k)}function f(C,A,I,k){return A===null||A.tag!==4||A.stateNode.containerInfo!==I.containerInfo||A.stateNode.implementation!==I.implementation?(A=F0(I,C.mode,k),A.return=C,A):(A=l(A,I.children||[]),A.return=C,A)}function T(C,A,I,k,H){return A===null||A.tag!==7?(A=bl(I,C.mode,k,H),A.return=C,A):(A=l(A,I),A.return=C,A)}function E(C,A,I){if(typeof A=="string"&&A!==""||typeof A=="number")return A=P0(""+A,C.mode,I),A.return=C,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case B_:return I=Rf(A.type,A.key,A.props,null,C.mode,I),I.ref=bu(C,null,A),I.return=C,I;case Va:return A=F0(A,C.mode,I),A.return=C,A;case Oo:var k=A._init;return E(C,k(A._payload),I)}if(Du(A)||Au(A))return A=bl(A,C.mode,I,null),A.return=C,A;J_(C,A)}return null}function g(C,A,I,k){var H=A!==null?A.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return H!==null?null:h(C,A,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case B_:return I.key===H?_(C,A,I,k):null;case Va:return I.key===H?f(C,A,I,k):null;case Oo:return H=I._init,g(C,A,H(I._payload),k)}if(Du(I)||Au(I))return H!==null?null:T(C,A,I,k,null);J_(C,I)}return null}function S(C,A,I,k,H){if(typeof k=="string"&&k!==""||typeof k=="number")return C=C.get(I)||null,h(A,C,""+k,H);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case B_:return C=C.get(k.key===null?I:k.key)||null,_(A,C,k,H);case Va:return C=C.get(k.key===null?I:k.key)||null,f(A,C,k,H);case Oo:var G=k._init;return S(C,A,I,G(k._payload),H)}if(Du(k)||Au(k))return C=C.get(I)||null,T(A,C,k,H,null);J_(A,k)}return null}function R(C,A,I,k){for(var H=null,G=null,x=A,U=A=0,B=null;x!==null&&U<I.length;U++){x.index>U?(B=x,x=null):B=x.sibling;var re=g(C,x,I[U],k);if(re===null){x===null&&(x=B);break}t&&x&&re.alternate===null&&s(C,x),A=c(re,A,U),G===null?H=re:G.sibling=re,G=re,x=B}if(U===I.length)return r(C,x),jt&&Ol(C,U),H;if(x===null){for(;U<I.length;U++)x=E(C,I[U],k),x!==null&&(A=c(x,A,U),G===null?H=x:G.sibling=x,G=x);return jt&&Ol(C,U),H}for(x=i(C,x);U<I.length;U++)B=S(x,C,U,I[U],k),B!==null&&(t&&B.alternate!==null&&x.delete(B.key===null?U:B.key),A=c(B,A,U),G===null?H=B:G.sibling=B,G=B);return t&&x.forEach(function(Z){return s(C,Z)}),jt&&Ol(C,U),H}function L(C,A,I,k){var H=Au(I);if(typeof H!="function")throw Error(Fe(150));if(I=H.call(I),I==null)throw Error(Fe(151));for(var G=H=null,x=A,U=A=0,B=null,re=I.next();x!==null&&!re.done;U++,re=I.next()){x.index>U?(B=x,x=null):B=x.sibling;var Z=g(C,x,re.value,k);if(Z===null){x===null&&(x=B);break}t&&x&&Z.alternate===null&&s(C,x),A=c(Z,A,U),G===null?H=Z:G.sibling=Z,G=Z,x=B}if(re.done)return r(C,x),jt&&Ol(C,U),H;if(x===null){for(;!re.done;U++,re=I.next())re=E(C,re.value,k),re!==null&&(A=c(re,A,U),G===null?H=re:G.sibling=re,G=re);return jt&&Ol(C,U),H}for(x=i(C,x);!re.done;U++,re=I.next())re=S(x,C,U,re.value,k),re!==null&&(t&&re.alternate!==null&&x.delete(re.key===null?U:re.key),A=c(re,A,U),G===null?H=re:G.sibling=re,G=re);return t&&x.forEach(function(se){return s(C,se)}),jt&&Ol(C,U),H}function N(C,A,I,k){if(typeof I=="object"&&I!==null&&I.type===Wa&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case B_:e:{for(var H=I.key,G=A;G!==null;){if(G.key===H){if(H=I.type,H===Wa){if(G.tag===7){r(C,G.sibling),A=l(G,I.props.children),A.return=C,C=A;break e}}else if(G.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Oo&&iv(H)===G.type){r(C,G.sibling),A=l(G,I.props),A.ref=bu(C,G,I),A.return=C,C=A;break e}r(C,G);break}else s(C,G);G=G.sibling}I.type===Wa?(A=bl(I.props.children,C.mode,k,I.key),A.return=C,C=A):(k=Rf(I.type,I.key,I.props,null,C.mode,k),k.ref=bu(C,A,I),k.return=C,C=k)}return u(C);case Va:e:{for(G=I.key;A!==null;){if(A.key===G)if(A.tag===4&&A.stateNode.containerInfo===I.containerInfo&&A.stateNode.implementation===I.implementation){r(C,A.sibling),A=l(A,I.children||[]),A.return=C,C=A;break e}else{r(C,A);break}else s(C,A);A=A.sibling}A=F0(I,C.mode,k),A.return=C,C=A}return u(C);case Oo:return G=I._init,N(C,A,G(I._payload),k)}if(Du(I))return R(C,A,I,k);if(Au(I))return L(C,A,I,k);J_(C,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,A!==null&&A.tag===6?(r(C,A.sibling),A=l(A,I),A.return=C,C=A):(r(C,A),A=P0(I,C.mode,k),A.return=C,C=A),u(C)):r(C,A)}return N}var mc=Nb(!0),xb=Nb(!1),Bf=Yo(null),Uf=null,Za=null,W$=null;function X$(){W$=Za=Uf=null}function z$(t){var s=Bf.current;Vt(Bf),t._currentValue=s}function Pm(t,s,r){for(;t!==null;){var i=t.alternate;if((t.childLanes&s)!==s?(t.childLanes|=s,i!==null&&(i.childLanes|=s)):i!==null&&(i.childLanes&s)!==s&&(i.childLanes|=s),t===r)break;t=t.return}}function ac(t,s){Uf=t,W$=Za=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&s&&(Mn=!0),t.firstContext=null)}function Is(t){var s=t._currentValue;if(W$!==t)if(t={context:t,memoizedValue:s,next:null},Za===null){if(Uf===null)throw Error(Fe(308));Za=t,Uf.dependencies={lanes:0,firstContext:t}}else Za=Za.next=t;return s}var Al=null;function Y$(t){Al===null?Al=[t]:Al.push(t)}function bb(t,s,r,i){var l=s.interleaved;return l===null?(r.next=r,Y$(s)):(r.next=l.next,l.next=r),s.interleaved=r,Ji(t,i)}function Ji(t,s){t.lanes|=s;var r=t.alternate;for(r!==null&&(r.lanes|=s),r=t,t=t.return;t!==null;)t.childLanes|=s,r=t.alternate,r!==null&&(r.childLanes|=s),r=t,t=t.return;return r.tag===3?r.stateNode:null}var So=!1;function K$(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yb(t,s){t=t.updateQueue,s.updateQueue===t&&(s.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wi(t,s){return{eventTime:t,lane:s,tag:0,payload:null,callback:null,next:null}}function Do(t,s,r){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,mt&2){var l=i.pending;return l===null?s.next=s:(s.next=l.next,l.next=s),i.pending=s,Ji(t,r)}return l=i.interleaved,l===null?(s.next=s,Y$(i)):(s.next=l.next,l.next=s),i.interleaved=s,Ji(t,r)}function gf(t,s,r){if(s=s.updateQueue,s!==null&&(s=s.shared,(r&4194240)!==0)){var i=s.lanes;i&=t.pendingLanes,r|=i,s.lanes=r,k$(t,r)}}function ov(t,s){var r=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var l=null,c=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};c===null?l=c=u:c=c.next=u,r=r.next}while(r!==null);c===null?l=c=s:c=c.next=s}else l=c=s;r={baseState:i.baseState,firstBaseUpdate:l,lastBaseUpdate:c,shared:i.shared,effects:i.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=s:t.next=s,r.lastBaseUpdate=s}function Hf(t,s,r,i){var l=t.updateQueue;So=!1;var c=l.firstBaseUpdate,u=l.lastBaseUpdate,h=l.shared.pending;if(h!==null){l.shared.pending=null;var _=h,f=_.next;_.next=null,u===null?c=f:u.next=f,u=_;var T=t.alternate;T!==null&&(T=T.updateQueue,h=T.lastBaseUpdate,h!==u&&(h===null?T.firstBaseUpdate=f:h.next=f,T.lastBaseUpdate=_))}if(c!==null){var E=l.baseState;u=0,T=f=_=null,h=c;do{var g=h.lane,S=h.eventTime;if((i&g)===g){T!==null&&(T=T.next={eventTime:S,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var R=t,L=h;switch(g=s,S=r,L.tag){case 1:if(R=L.payload,typeof R=="function"){E=R.call(S,E,g);break e}E=R;break e;case 3:R.flags=R.flags&-65537|128;case 0:if(R=L.payload,g=typeof R=="function"?R.call(S,E,g):R,g==null)break e;E=er({},E,g);break e;case 2:So=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,g=l.effects,g===null?l.effects=[h]:g.push(h))}else S={eventTime:S,lane:g,tag:h.tag,payload:h.payload,callback:h.callback,next:null},T===null?(f=T=S,_=E):T=T.next=S,u|=g;if(h=h.next,h===null){if(h=l.shared.pending,h===null)break;g=h,h=g.next,g.next=null,l.lastBaseUpdate=g,l.shared.pending=null}}while(!0);if(T===null&&(_=E),l.baseState=_,l.firstBaseUpdate=f,l.lastBaseUpdate=T,s=l.shared.interleaved,s!==null){l=s;do u|=l.lane,l=l.next;while(l!==s)}else c===null&&(l.shared.lanes=0);Pl|=u,t.lanes=u,t.memoizedState=E}}function lv(t,s,r){if(t=s.effects,s.effects=null,t!==null)for(s=0;s<t.length;s++){var i=t[s],l=i.callback;if(l!==null){if(i.callback=null,i=r,typeof l!="function")throw Error(Fe(191,l));l.call(i)}}}var Gh={},mi=Yo(Gh),$h=Yo(Gh),Ih=Yo(Gh);function Cl(t){if(t===Gh)throw Error(Fe(174));return t}function j$(t,s){switch(Pt(Ih,s),Pt($h,t),Pt(mi,Gh),t=s.nodeType,t){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Em(null,"");break;default:t=t===8?s.parentNode:s,s=t.namespaceURI||null,t=t.tagName,s=Em(s,t)}Vt(mi),Pt(mi,s)}function $c(){Vt(mi),Vt($h),Vt(Ih)}function kb(t){Cl(Ih.current);var s=Cl(mi.current),r=Em(s,t.type);s!==r&&(Pt($h,t),Pt(mi,r))}function J$(t){$h.current===t&&(Vt(mi),Vt($h))}var Zt=Yo(0);function Gf(t){for(var s=t;s!==null;){if(s.tag===13){var r=s.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var b0=[];function q$(){for(var t=0;t<b0.length;t++)b0[t]._workInProgressVersionPrimary=null;b0.length=0}var mf=Zi.ReactCurrentDispatcher,y0=Zi.ReactCurrentBatchConfig,Dl=0,Qt=null,vr=null,Vr=null,Vf=!1,Ku=!1,Oh=0,wD=0;function an(){throw Error(Fe(321))}function Z$(t,s){if(s===null)return!1;for(var r=0;r<s.length&&r<t.length;r++)if(!Xs(t[r],s[r]))return!1;return!0}function Q$(t,s,r,i,l,c){if(Dl=c,Qt=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,mf.current=t===null||t.memoizedState===null?FD:BD,t=r(i,l),Ku){c=0;do{if(Ku=!1,Oh=0,25<=c)throw Error(Fe(301));c+=1,Vr=vr=null,s.updateQueue=null,mf.current=UD,t=r(i,l)}while(Ku)}if(mf.current=Wf,s=vr!==null&&vr.next!==null,Dl=0,Vr=vr=Qt=null,Vf=!1,s)throw Error(Fe(300));return t}function eI(){var t=Oh!==0;return Oh=0,t}function pi(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vr===null?Qt.memoizedState=Vr=t:Vr=Vr.next=t,Vr}function Os(){if(vr===null){var t=Qt.alternate;t=t!==null?t.memoizedState:null}else t=vr.next;var s=Vr===null?Qt.memoizedState:Vr.next;if(s!==null)Vr=s,vr=t;else{if(t===null)throw Error(Fe(310));vr=t,t={memoizedState:vr.memoizedState,baseState:vr.baseState,baseQueue:vr.baseQueue,queue:vr.queue,next:null},Vr===null?Qt.memoizedState=Vr=t:Vr=Vr.next=t}return Vr}function Sh(t,s){return typeof s=="function"?s(t):s}function k0(t){var s=Os(),r=s.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var i=vr,l=i.baseQueue,c=r.pending;if(c!==null){if(l!==null){var u=l.next;l.next=c.next,c.next=u}i.baseQueue=l=c,r.pending=null}if(l!==null){c=l.next,i=i.baseState;var h=u=null,_=null,f=c;do{var T=f.lane;if((Dl&T)===T)_!==null&&(_=_.next={lane:0,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null}),i=f.hasEagerState?f.eagerState:t(i,f.action);else{var E={lane:T,action:f.action,hasEagerState:f.hasEagerState,eagerState:f.eagerState,next:null};_===null?(h=_=E,u=i):_=_.next=E,Qt.lanes|=T,Pl|=T}f=f.next}while(f!==null&&f!==c);_===null?u=i:_.next=h,Xs(i,s.memoizedState)||(Mn=!0),s.memoizedState=i,s.baseState=u,s.baseQueue=_,r.lastRenderedState=i}if(t=r.interleaved,t!==null){l=t;do c=l.lane,Qt.lanes|=c,Pl|=c,l=l.next;while(l!==t)}else l===null&&(r.lanes=0);return[s.memoizedState,r.dispatch]}function w0(t){var s=Os(),r=s.queue;if(r===null)throw Error(Fe(311));r.lastRenderedReducer=t;var i=r.dispatch,l=r.pending,c=s.memoizedState;if(l!==null){r.pending=null;var u=l=l.next;do c=t(c,u.action),u=u.next;while(u!==l);Xs(c,s.memoizedState)||(Mn=!0),s.memoizedState=c,s.baseQueue===null&&(s.baseState=c),r.lastRenderedState=c}return[c,i]}function wb(){}function Mb(t,s){var r=Qt,i=Os(),l=s(),c=!Xs(i.memoizedState,l);if(c&&(i.memoizedState=l,Mn=!0),i=i.queue,tI(Fb.bind(null,r,i,t),[t]),i.getSnapshot!==s||c||Vr!==null&&Vr.memoizedState.tag&1){if(r.flags|=2048,Rh(9,Pb.bind(null,r,i,l,s),void 0,null),Wr===null)throw Error(Fe(349));Dl&30||Db(r,s,l)}return l}function Db(t,s,r){t.flags|=16384,t={getSnapshot:s,value:r},s=Qt.updateQueue,s===null?(s={lastEffect:null,stores:null},Qt.updateQueue=s,s.stores=[t]):(r=s.stores,r===null?s.stores=[t]:r.push(t))}function Pb(t,s,r,i){s.value=r,s.getSnapshot=i,Bb(s)&&Ub(t)}function Fb(t,s,r){return r(function(){Bb(s)&&Ub(t)})}function Bb(t){var s=t.getSnapshot;t=t.value;try{var r=s();return!Xs(t,r)}catch{return!0}}function Ub(t){var s=Ji(t,1);s!==null&&Ws(s,t,1,-1)}function av(t){var s=pi();return typeof t=="function"&&(t=t()),s.memoizedState=s.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Sh,lastRenderedState:t},s.queue=t,t=t.dispatch=PD.bind(null,Qt,t),[s.memoizedState,t]}function Rh(t,s,r,i){return t={tag:t,create:s,destroy:r,deps:i,next:null},s=Qt.updateQueue,s===null?(s={lastEffect:null,stores:null},Qt.updateQueue=s,s.lastEffect=t.next=t):(r=s.lastEffect,r===null?s.lastEffect=t.next=t:(i=r.next,r.next=t,t.next=i,s.lastEffect=t)),t}function Hb(){return Os().memoizedState}function $f(t,s,r,i){var l=pi();Qt.flags|=t,l.memoizedState=Rh(1|s,r,void 0,i===void 0?null:i)}function pT(t,s,r,i){var l=Os();i=i===void 0?null:i;var c=void 0;if(vr!==null){var u=vr.memoizedState;if(c=u.destroy,i!==null&&Z$(i,u.deps)){l.memoizedState=Rh(s,r,c,i);return}}Qt.flags|=t,l.memoizedState=Rh(1|s,r,c,i)}function cv(t,s){return $f(8390656,8,t,s)}function tI(t,s){return pT(2048,8,t,s)}function Gb(t,s){return pT(4,2,t,s)}function Vb(t,s){return pT(4,4,t,s)}function Wb(t,s){if(typeof s=="function")return t=t(),s(t),function(){s(null)};if(s!=null)return t=t(),s.current=t,function(){s.current=null}}function Xb(t,s,r){return r=r!=null?r.concat([t]):null,pT(4,4,Wb.bind(null,s,t),r)}function rI(){}function zb(t,s){var r=Os();s=s===void 0?null:s;var i=r.memoizedState;return i!==null&&s!==null&&Z$(s,i[1])?i[0]:(r.memoizedState=[t,s],t)}function Yb(t,s){var r=Os();s=s===void 0?null:s;var i=r.memoizedState;return i!==null&&s!==null&&Z$(s,i[1])?i[0]:(t=t(),r.memoizedState=[t,s],t)}function Kb(t,s,r){return Dl&21?(Xs(r,s)||(r=Qx(),Qt.lanes|=r,Pl|=r,t.baseState=!0),s):(t.baseState&&(t.baseState=!1,Mn=!0),t.memoizedState=r)}function MD(t,s){var r=vt;vt=r!==0&&4>r?r:4,t(!0);var i=y0.transition;y0.transition={};try{t(!1),s()}finally{vt=r,y0.transition=i}}function jb(){return Os().memoizedState}function DD(t,s,r){var i=Fo(t);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Jb(t))qb(s,r);else if(r=bb(t,s,r,i),r!==null){var l=An();Ws(r,t,i,l),Zb(r,s,i)}}function PD(t,s,r){var i=Fo(t),l={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Jb(t))qb(s,l);else{var c=t.alternate;if(t.lanes===0&&(c===null||c.lanes===0)&&(c=s.lastRenderedReducer,c!==null))try{var u=s.lastRenderedState,h=c(u,r);if(l.hasEagerState=!0,l.eagerState=h,Xs(h,u)){var _=s.interleaved;_===null?(l.next=l,Y$(s)):(l.next=_.next,_.next=l),s.interleaved=l;return}}catch{}finally{}r=bb(t,s,l,i),r!==null&&(l=An(),Ws(r,t,i,l),Zb(r,s,i))}}function Jb(t){var s=t.alternate;return t===Qt||s!==null&&s===Qt}function qb(t,s){Ku=Vf=!0;var r=t.pending;r===null?s.next=s:(s.next=r.next,r.next=s),t.pending=s}function Zb(t,s,r){if(r&4194240){var i=s.lanes;i&=t.pendingLanes,r|=i,s.lanes=r,k$(t,r)}}var Wf={readContext:Is,useCallback:an,useContext:an,useEffect:an,useImperativeHandle:an,useInsertionEffect:an,useLayoutEffect:an,useMemo:an,useReducer:an,useRef:an,useState:an,useDebugValue:an,useDeferredValue:an,useTransition:an,useMutableSource:an,useSyncExternalStore:an,useId:an,unstable_isNewReconciler:!1},FD={readContext:Is,useCallback:function(t,s){return pi().memoizedState=[t,s===void 0?null:s],t},useContext:Is,useEffect:cv,useImperativeHandle:function(t,s,r){return r=r!=null?r.concat([t]):null,$f(4194308,4,Wb.bind(null,s,t),r)},useLayoutEffect:function(t,s){return $f(4194308,4,t,s)},useInsertionEffect:function(t,s){return $f(4,2,t,s)},useMemo:function(t,s){var r=pi();return s=s===void 0?null:s,t=t(),r.memoizedState=[t,s],t},useReducer:function(t,s,r){var i=pi();return s=r!==void 0?r(s):s,i.memoizedState=i.baseState=s,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:s},i.queue=t,t=t.dispatch=DD.bind(null,Qt,t),[i.memoizedState,t]},useRef:function(t){var s=pi();return t={current:t},s.memoizedState=t},useState:av,useDebugValue:rI,useDeferredValue:function(t){return pi().memoizedState=t},useTransition:function(){var t=av(!1),s=t[0];return t=MD.bind(null,t[1]),pi().memoizedState=t,[s,t]},useMutableSource:function(){},useSyncExternalStore:function(t,s,r){var i=Qt,l=pi();if(jt){if(r===void 0)throw Error(Fe(407));r=r()}else{if(r=s(),Wr===null)throw Error(Fe(349));Dl&30||Db(i,s,r)}l.memoizedState=r;var c={value:r,getSnapshot:s};return l.queue=c,cv(Fb.bind(null,i,c,t),[t]),i.flags|=2048,Rh(9,Pb.bind(null,i,c,r,s),void 0,null),r},useId:function(){var t=pi(),s=Wr.identifierPrefix;if(jt){var r=Gi,i=Hi;r=(i&~(1<<32-Vs(i)-1)).toString(32)+r,s=":"+s+"R"+r,r=Oh++,0<r&&(s+="H"+r.toString(32)),s+=":"}else r=wD++,s=":"+s+"r"+r.toString(32)+":";return t.memoizedState=s},unstable_isNewReconciler:!1},BD={readContext:Is,useCallback:zb,useContext:Is,useEffect:tI,useImperativeHandle:Xb,useInsertionEffect:Gb,useLayoutEffect:Vb,useMemo:Yb,useReducer:k0,useRef:Hb,useState:function(){return k0(Sh)},useDebugValue:rI,useDeferredValue:function(t){var s=Os();return Kb(s,vr.memoizedState,t)},useTransition:function(){var t=k0(Sh)[0],s=Os().memoizedState;return[t,s]},useMutableSource:wb,useSyncExternalStore:Mb,useId:jb,unstable_isNewReconciler:!1},UD={readContext:Is,useCallback:zb,useContext:Is,useEffect:tI,useImperativeHandle:Xb,useInsertionEffect:Gb,useLayoutEffect:Vb,useMemo:Yb,useReducer:w0,useRef:Hb,useState:function(){return w0(Sh)},useDebugValue:rI,useDeferredValue:function(t){var s=Os();return vr===null?s.memoizedState=t:Kb(s,vr.memoizedState,t)},useTransition:function(){var t=w0(Sh)[0],s=Os().memoizedState;return[t,s]},useMutableSource:wb,useSyncExternalStore:Mb,useId:jb,unstable_isNewReconciler:!1};function Ms(t,s){if(t&&t.defaultProps){s=er({},s),t=t.defaultProps;for(var r in t)s[r]===void 0&&(s[r]=t[r]);return s}return s}function Fm(t,s,r,i){s=t.memoizedState,r=r(i,s),r=r==null?s:er({},s,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var ET={isMounted:function(t){return(t=t._reactInternals)?Wl(t)===t:!1},enqueueSetState:function(t,s,r){t=t._reactInternals;var i=An(),l=Fo(t),c=Wi(i,l);c.payload=s,r!=null&&(c.callback=r),s=Do(t,c,l),s!==null&&(Ws(s,t,l,i),gf(s,t,l))},enqueueReplaceState:function(t,s,r){t=t._reactInternals;var i=An(),l=Fo(t),c=Wi(i,l);c.tag=1,c.payload=s,r!=null&&(c.callback=r),s=Do(t,c,l),s!==null&&(Ws(s,t,l,i),gf(s,t,l))},enqueueForceUpdate:function(t,s){t=t._reactInternals;var r=An(),i=Fo(t),l=Wi(r,i);l.tag=2,s!=null&&(l.callback=s),s=Do(t,l,i),s!==null&&(Ws(s,t,i,r),gf(s,t,i))}};function uv(t,s,r,i,l,c,u){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,c,u):s.prototype&&s.prototype.isPureReactComponent?!ph(r,i)||!ph(l,c):!0}function Qb(t,s,r){var i=!1,l=Go,c=s.contextType;return typeof c=="object"&&c!==null?c=Is(c):(l=Pn(s)?wl:pn.current,i=s.contextTypes,c=(i=i!=null)?Ec(t,l):Go),s=new s(r,c),t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=ET,t.stateNode=s,s._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=l,t.__reactInternalMemoizedMaskedChildContext=c),s}function hv(t,s,r,i){t=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(r,i),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(r,i),s.state!==t&&ET.enqueueReplaceState(s,s.state,null)}function Bm(t,s,r,i){var l=t.stateNode;l.props=r,l.state=t.memoizedState,l.refs={},K$(t);var c=s.contextType;typeof c=="object"&&c!==null?l.context=Is(c):(c=Pn(s)?wl:pn.current,l.context=Ec(t,c)),l.state=t.memoizedState,c=s.getDerivedStateFromProps,typeof c=="function"&&(Fm(t,s,c,r),l.state=t.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(s=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),s!==l.state&&ET.enqueueReplaceState(l,l.state,null),Hf(t,r,l,i),l.state=t.memoizedState),typeof l.componentDidMount=="function"&&(t.flags|=4194308)}function Ic(t,s){try{var r="",i=s;do r+=fM(i),i=i.return;while(i);var l=r}catch(c){l=`
Error generating stack: `+c.message+`
`+c.stack}return{value:t,source:s,stack:l,digest:null}}function M0(t,s,r){return{value:t,source:null,stack:r??null,digest:s??null}}function Um(t,s){try{console.error(s.value)}catch(r){setTimeout(function(){throw r})}}var HD=typeof WeakMap=="function"?WeakMap:Map;function e1(t,s,r){r=Wi(-1,r),r.tag=3,r.payload={element:null};var i=s.value;return r.callback=function(){zf||(zf=!0,Jm=i),Um(t,s)},r}function t1(t,s,r){r=Wi(-1,r),r.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var l=s.value;r.payload=function(){return i(l)},r.callback=function(){Um(t,s)}}var c=t.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(r.callback=function(){Um(t,s),typeof i!="function"&&(Po===null?Po=new Set([this]):Po.add(this));var u=s.stack;this.componentDidCatch(s.value,{componentStack:u!==null?u:""})}),r}function dv(t,s,r){var i=t.pingCache;if(i===null){i=t.pingCache=new HD;var l=new Set;i.set(s,l)}else l=i.get(s),l===void 0&&(l=new Set,i.set(s,l));l.has(r)||(l.add(r),t=tP.bind(null,t,s,r),s.then(t,t))}function _v(t){do{var s;if((s=t.tag===13)&&(s=t.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return t;t=t.return}while(t!==null);return null}function fv(t,s,r,i,l){return t.mode&1?(t.flags|=65536,t.lanes=l,t):(t===s?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(s=Wi(-1,1),s.tag=2,Do(r,s,1))),r.lanes|=1),t)}var GD=Zi.ReactCurrentOwner,Mn=!1;function On(t,s,r,i){s.child=t===null?xb(s,null,r,i):mc(s,t.child,r,i)}function Tv(t,s,r,i,l){r=r.render;var c=s.ref;return ac(s,l),i=Q$(t,s,r,i,c,l),r=eI(),t!==null&&!Mn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,qi(t,s,l)):(jt&&r&&H$(s),s.flags|=1,On(t,s,i,l),s.child)}function pv(t,s,r,i,l){if(t===null){var c=r.type;return typeof c=="function"&&!uI(c)&&c.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(s.tag=15,s.type=c,r1(t,s,c,i,l)):(t=Rf(r.type,null,i,s,s.mode,l),t.ref=s.ref,t.return=s,s.child=t)}if(c=t.child,!(t.lanes&l)){var u=c.memoizedProps;if(r=r.compare,r=r!==null?r:ph,r(u,i)&&t.ref===s.ref)return qi(t,s,l)}return s.flags|=1,t=Bo(c,i),t.ref=s.ref,t.return=s,s.child=t}function r1(t,s,r,i,l){if(t!==null){var c=t.memoizedProps;if(ph(c,i)&&t.ref===s.ref)if(Mn=!1,s.pendingProps=i=c,(t.lanes&l)!==0)t.flags&131072&&(Mn=!0);else return s.lanes=t.lanes,qi(t,s,l)}return Hm(t,s,r,i,l)}function n1(t,s,r){var i=s.pendingProps,l=i.children,c=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(ec,jn),jn|=r;else{if(!(r&1073741824))return t=c!==null?c.baseLanes|r:r,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:t,cachePool:null,transitions:null},s.updateQueue=null,Pt(ec,jn),jn|=t,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=c!==null?c.baseLanes:r,Pt(ec,jn),jn|=i}else c!==null?(i=c.baseLanes|r,s.memoizedState=null):i=r,Pt(ec,jn),jn|=i;return On(t,s,l,r),s.child}function s1(t,s){var r=s.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(s.flags|=512,s.flags|=2097152)}function Hm(t,s,r,i,l){var c=Pn(r)?wl:pn.current;return c=Ec(s,c),ac(s,l),r=Q$(t,s,r,i,c,l),i=eI(),t!==null&&!Mn?(s.updateQueue=t.updateQueue,s.flags&=-2053,t.lanes&=~l,qi(t,s,l)):(jt&&i&&H$(s),s.flags|=1,On(t,s,r,l),s.child)}function Ev(t,s,r,i,l){if(Pn(r)){var c=!0;Df(s)}else c=!1;if(ac(s,l),s.stateNode===null)If(t,s),Qb(s,r,i),Bm(s,r,i,l),i=!0;else if(t===null){var u=s.stateNode,h=s.memoizedProps;u.props=h;var _=u.context,f=r.contextType;typeof f=="object"&&f!==null?f=Is(f):(f=Pn(r)?wl:pn.current,f=Ec(s,f));var T=r.getDerivedStateFromProps,E=typeof T=="function"||typeof u.getSnapshotBeforeUpdate=="function";E||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==i||_!==f)&&hv(s,u,i,f),So=!1;var g=s.memoizedState;u.state=g,Hf(s,i,u,l),_=s.memoizedState,h!==i||g!==_||Dn.current||So?(typeof T=="function"&&(Fm(s,r,T,i),_=s.memoizedState),(h=So||uv(s,r,h,i,g,_,f))?(E||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(s.flags|=4194308)):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=i,s.memoizedState=_),u.props=i,u.state=_,u.context=f,i=h):(typeof u.componentDidMount=="function"&&(s.flags|=4194308),i=!1)}else{u=s.stateNode,yb(t,s),h=s.memoizedProps,f=s.type===s.elementType?h:Ms(s.type,h),u.props=f,E=s.pendingProps,g=u.context,_=r.contextType,typeof _=="object"&&_!==null?_=Is(_):(_=Pn(r)?wl:pn.current,_=Ec(s,_));var S=r.getDerivedStateFromProps;(T=typeof S=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(h!==E||g!==_)&&hv(s,u,i,_),So=!1,g=s.memoizedState,u.state=g,Hf(s,i,u,l);var R=s.memoizedState;h!==E||g!==R||Dn.current||So?(typeof S=="function"&&(Fm(s,r,S,i),R=s.memoizedState),(f=So||uv(s,r,f,i,g,R,_)||!1)?(T||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(i,R,_),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(i,R,_)),typeof u.componentDidUpdate=="function"&&(s.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&g===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&g===t.memoizedState||(s.flags|=1024),s.memoizedProps=i,s.memoizedState=R),u.props=i,u.state=R,u.context=_,i=f):(typeof u.componentDidUpdate!="function"||h===t.memoizedProps&&g===t.memoizedState||(s.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&g===t.memoizedState||(s.flags|=1024),i=!1)}return Gm(t,s,r,i,c,l)}function Gm(t,s,r,i,l,c){s1(t,s);var u=(s.flags&128)!==0;if(!i&&!u)return l&&rv(s,r,!1),qi(t,s,c);i=s.stateNode,GD.current=s;var h=u&&typeof r.getDerivedStateFromError!="function"?null:i.render();return s.flags|=1,t!==null&&u?(s.child=mc(s,t.child,null,c),s.child=mc(s,null,h,c)):On(t,s,h,c),s.memoizedState=i.state,l&&rv(s,r,!0),s.child}function i1(t){var s=t.stateNode;s.pendingContext?tv(t,s.pendingContext,s.pendingContext!==s.context):s.context&&tv(t,s.context,!1),j$(t,s.containerInfo)}function gv(t,s,r,i,l){return gc(),V$(l),s.flags|=256,On(t,s,r,i),s.child}var Vm={dehydrated:null,treeContext:null,retryLane:0};function Wm(t){return{baseLanes:t,cachePool:null,transitions:null}}function o1(t,s,r){var i=s.pendingProps,l=Zt.current,c=!1,u=(s.flags&128)!==0,h;if((h=u)||(h=t!==null&&t.memoizedState===null?!1:(l&2)!==0),h?(c=!0,s.flags&=-129):(t===null||t.memoizedState!==null)&&(l|=1),Pt(Zt,l&1),t===null)return Dm(s),t=s.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(s.mode&1?t.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(u=i.children,t=i.fallback,c?(i=s.mode,c=s.child,u={mode:"hidden",children:u},!(i&1)&&c!==null?(c.childLanes=0,c.pendingProps=u):c=$T(u,i,0,null),t=bl(t,i,r,null),c.return=s,t.return=s,c.sibling=t,s.child=c,s.child.memoizedState=Wm(r),s.memoizedState=Vm,t):nI(s,u));if(l=t.memoizedState,l!==null&&(h=l.dehydrated,h!==null))return VD(t,s,u,i,h,l,r);if(c){c=i.fallback,u=s.mode,l=t.child,h=l.sibling;var _={mode:"hidden",children:i.children};return!(u&1)&&s.child!==l?(i=s.child,i.childLanes=0,i.pendingProps=_,s.deletions=null):(i=Bo(l,_),i.subtreeFlags=l.subtreeFlags&14680064),h!==null?c=Bo(h,c):(c=bl(c,u,r,null),c.flags|=2),c.return=s,i.return=s,i.sibling=c,s.child=i,i=c,c=s.child,u=t.child.memoizedState,u=u===null?Wm(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},c.memoizedState=u,c.childLanes=t.childLanes&~r,s.memoizedState=Vm,i}return c=t.child,t=c.sibling,i=Bo(c,{mode:"visible",children:i.children}),!(s.mode&1)&&(i.lanes=r),i.return=s,i.sibling=null,t!==null&&(r=s.deletions,r===null?(s.deletions=[t],s.flags|=16):r.push(t)),s.child=i,s.memoizedState=null,i}function nI(t,s){return s=$T({mode:"visible",children:s},t.mode,0,null),s.return=t,t.child=s}function q_(t,s,r,i){return i!==null&&V$(i),mc(s,t.child,null,r),t=nI(s,s.pendingProps.children),t.flags|=2,s.memoizedState=null,t}function VD(t,s,r,i,l,c,u){if(r)return s.flags&256?(s.flags&=-257,i=M0(Error(Fe(422))),q_(t,s,u,i)):s.memoizedState!==null?(s.child=t.child,s.flags|=128,null):(c=i.fallback,l=s.mode,i=$T({mode:"visible",children:i.children},l,0,null),c=bl(c,l,u,null),c.flags|=2,i.return=s,c.return=s,i.sibling=c,s.child=i,s.mode&1&&mc(s,t.child,null,u),s.child.memoizedState=Wm(u),s.memoizedState=Vm,c);if(!(s.mode&1))return q_(t,s,u,null);if(l.data==="$!"){if(i=l.nextSibling&&l.nextSibling.dataset,i)var h=i.dgst;return i=h,c=Error(Fe(419)),i=M0(c,i,void 0),q_(t,s,u,i)}if(h=(u&t.childLanes)!==0,Mn||h){if(i=Wr,i!==null){switch(u&-u){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=l&(i.suspendedLanes|u)?0:l,l!==0&&l!==c.retryLane&&(c.retryLane=l,Ji(t,l),Ws(i,t,l,-1))}return cI(),i=M0(Error(Fe(421))),q_(t,s,u,i)}return l.data==="$?"?(s.flags|=128,s.child=t.child,s=rP.bind(null,t),l._reactRetry=s,null):(t=c.treeContext,Zn=Mo(l.nextSibling),Qn=s,jt=!0,Ps=null,t!==null&&(ps[Es++]=Hi,ps[Es++]=Gi,ps[Es++]=Ml,Hi=t.id,Gi=t.overflow,Ml=s),s=nI(s,i.children),s.flags|=4096,s)}function mv(t,s,r){t.lanes|=s;var i=t.alternate;i!==null&&(i.lanes|=s),Pm(t.return,s,r)}function D0(t,s,r,i,l){var c=t.memoizedState;c===null?t.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:l}:(c.isBackwards=s,c.rendering=null,c.renderingStartTime=0,c.last=i,c.tail=r,c.tailMode=l)}function l1(t,s,r){var i=s.pendingProps,l=i.revealOrder,c=i.tail;if(On(t,s,i.children,r),i=Zt.current,i&2)i=i&1|2,s.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=s.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mv(t,r,s);else if(t.tag===19)mv(t,r,s);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===s)break e;for(;t.sibling===null;){if(t.return===null||t.return===s)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Pt(Zt,i),!(s.mode&1))s.memoizedState=null;else switch(l){case"forwards":for(r=s.child,l=null;r!==null;)t=r.alternate,t!==null&&Gf(t)===null&&(l=r),r=r.sibling;r=l,r===null?(l=s.child,s.child=null):(l=r.sibling,r.sibling=null),D0(s,!1,l,r,c);break;case"backwards":for(r=null,l=s.child,s.child=null;l!==null;){if(t=l.alternate,t!==null&&Gf(t)===null){s.child=l;break}t=l.sibling,l.sibling=r,r=l,l=t}D0(s,!0,r,null,c);break;case"together":D0(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function If(t,s){!(s.mode&1)&&t!==null&&(t.alternate=null,s.alternate=null,s.flags|=2)}function qi(t,s,r){if(t!==null&&(s.dependencies=t.dependencies),Pl|=s.lanes,!(r&s.childLanes))return null;if(t!==null&&s.child!==t.child)throw Error(Fe(153));if(s.child!==null){for(t=s.child,r=Bo(t,t.pendingProps),s.child=r,r.return=s;t.sibling!==null;)t=t.sibling,r=r.sibling=Bo(t,t.pendingProps),r.return=s;r.sibling=null}return s.child}function WD(t,s,r){switch(s.tag){case 3:i1(s),gc();break;case 5:kb(s);break;case 1:Pn(s.type)&&Df(s);break;case 4:j$(s,s.stateNode.containerInfo);break;case 10:var i=s.type._context,l=s.memoizedProps.value;Pt(Bf,i._currentValue),i._currentValue=l;break;case 13:if(i=s.memoizedState,i!==null)return i.dehydrated!==null?(Pt(Zt,Zt.current&1),s.flags|=128,null):r&s.child.childLanes?o1(t,s,r):(Pt(Zt,Zt.current&1),t=qi(t,s,r),t!==null?t.sibling:null);Pt(Zt,Zt.current&1);break;case 19:if(i=(r&s.childLanes)!==0,t.flags&128){if(i)return l1(t,s,r);s.flags|=128}if(l=s.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Pt(Zt,Zt.current),i)break;return null;case 22:case 23:return s.lanes=0,n1(t,s,r)}return qi(t,s,r)}var a1,Xm,c1,u1;a1=function(t,s){for(var r=s.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===s)break;for(;r.sibling===null;){if(r.return===null||r.return===s)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Xm=function(){};c1=function(t,s,r,i){var l=t.memoizedProps;if(l!==i){t=s.stateNode,Cl(mi.current);var c=null;switch(r){case"input":l=_m(t,l),i=_m(t,i),c=[];break;case"select":l=er({},l,{value:void 0}),i=er({},i,{value:void 0}),c=[];break;case"textarea":l=pm(t,l),i=pm(t,i),c=[];break;default:typeof l.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=wf)}gm(r,i);var u;r=null;for(f in l)if(!i.hasOwnProperty(f)&&l.hasOwnProperty(f)&&l[f]!=null)if(f==="style"){var h=l[f];for(u in h)h.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else f!=="dangerouslySetInnerHTML"&&f!=="children"&&f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&f!=="autoFocus"&&(ch.hasOwnProperty(f)?c||(c=[]):(c=c||[]).push(f,null));for(f in i){var _=i[f];if(h=l?.[f],i.hasOwnProperty(f)&&_!==h&&(_!=null||h!=null))if(f==="style")if(h){for(u in h)!h.hasOwnProperty(u)||_&&_.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in _)_.hasOwnProperty(u)&&h[u]!==_[u]&&(r||(r={}),r[u]=_[u])}else r||(c||(c=[]),c.push(f,r)),r=_;else f==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,h=h?h.__html:void 0,_!=null&&h!==_&&(c=c||[]).push(f,_)):f==="children"?typeof _!="string"&&typeof _!="number"||(c=c||[]).push(f,""+_):f!=="suppressContentEditableWarning"&&f!=="suppressHydrationWarning"&&(ch.hasOwnProperty(f)?(_!=null&&f==="onScroll"&&Gt("scroll",t),c||h===_||(c=[])):(c=c||[]).push(f,_))}r&&(c=c||[]).push("style",r);var f=c;(s.updateQueue=f)&&(s.flags|=4)}};u1=function(t,s,r,i){r!==i&&(s.flags|=4)};function yu(t,s){if(!jt)switch(t.tailMode){case"hidden":s=t.tail;for(var r=null;s!==null;)s.alternate!==null&&(r=s),s=s.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?s||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function cn(t){var s=t.alternate!==null&&t.alternate.child===t.child,r=0,i=0;if(s)for(var l=t.child;l!==null;)r|=l.lanes|l.childLanes,i|=l.subtreeFlags&14680064,i|=l.flags&14680064,l.return=t,l=l.sibling;else for(l=t.child;l!==null;)r|=l.lanes|l.childLanes,i|=l.subtreeFlags,i|=l.flags,l.return=t,l=l.sibling;return t.subtreeFlags|=i,t.childLanes=r,s}function XD(t,s,r){var i=s.pendingProps;switch(G$(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(s),null;case 1:return Pn(s.type)&&Mf(),cn(s),null;case 3:return i=s.stateNode,$c(),Vt(Dn),Vt(pn),q$(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(j_(s)?s.flags|=4:t===null||t.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ps!==null&&(Qm(Ps),Ps=null))),Xm(t,s),cn(s),null;case 5:J$(s);var l=Cl(Ih.current);if(r=s.type,t!==null&&s.stateNode!=null)c1(t,s,r,i,l),t.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!i){if(s.stateNode===null)throw Error(Fe(166));return cn(s),null}if(t=Cl(mi.current),j_(s)){i=s.stateNode,r=s.type;var c=s.memoizedProps;switch(i[Ei]=s,i[mh]=c,t=(s.mode&1)!==0,r){case"dialog":Gt("cancel",i),Gt("close",i);break;case"iframe":case"object":case"embed":Gt("load",i);break;case"video":case"audio":for(l=0;l<Fu.length;l++)Gt(Fu[l],i);break;case"source":Gt("error",i);break;case"img":case"image":case"link":Gt("error",i),Gt("load",i);break;case"details":Gt("toggle",i);break;case"input":vC(i,c),Gt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!c.multiple},Gt("invalid",i);break;case"textarea":xC(i,c),Gt("invalid",i)}gm(r,c),l=null;for(var u in c)if(c.hasOwnProperty(u)){var h=c[u];u==="children"?typeof h=="string"?i.textContent!==h&&(c.suppressHydrationWarning!==!0&&K_(i.textContent,h,t),l=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(c.suppressHydrationWarning!==!0&&K_(i.textContent,h,t),l=["children",""+h]):ch.hasOwnProperty(u)&&h!=null&&u==="onScroll"&&Gt("scroll",i)}switch(r){case"input":U_(i),NC(i,c,!0);break;case"textarea":U_(i),bC(i);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(i.onclick=wf)}i=l,s.updateQueue=i,i!==null&&(s.flags|=4)}else{u=l.nodeType===9?l:l.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fx(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=u.createElement(r,{is:i.is}):(t=u.createElement(r),r==="select"&&(u=t,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):t=u.createElementNS(t,r),t[Ei]=s,t[mh]=i,a1(t,s,!1,!1),s.stateNode=t;e:{switch(u=mm(r,i),r){case"dialog":Gt("cancel",t),Gt("close",t),l=i;break;case"iframe":case"object":case"embed":Gt("load",t),l=i;break;case"video":case"audio":for(l=0;l<Fu.length;l++)Gt(Fu[l],t);l=i;break;case"source":Gt("error",t),l=i;break;case"img":case"image":case"link":Gt("error",t),Gt("load",t),l=i;break;case"details":Gt("toggle",t),l=i;break;case"input":vC(t,i),l=_m(t,i),Gt("invalid",t);break;case"option":l=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},l=er({},i,{value:void 0}),Gt("invalid",t);break;case"textarea":xC(t,i),l=pm(t,i),Gt("invalid",t);break;default:l=i}gm(r,l),h=l;for(c in h)if(h.hasOwnProperty(c)){var _=h[c];c==="style"?Hx(t,_):c==="dangerouslySetInnerHTML"?(_=_?_.__html:void 0,_!=null&&Bx(t,_)):c==="children"?typeof _=="string"?(r!=="textarea"||_!=="")&&uh(t,_):typeof _=="number"&&uh(t,""+_):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ch.hasOwnProperty(c)?_!=null&&c==="onScroll"&&Gt("scroll",t):_!=null&&C$(t,c,_,u))}switch(r){case"input":U_(t),NC(t,i,!1);break;case"textarea":U_(t),bC(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Ho(i.value));break;case"select":t.multiple=!!i.multiple,c=i.value,c!=null?sc(t,!!i.multiple,c,!1):i.defaultValue!=null&&sc(t,!!i.multiple,i.defaultValue,!0);break;default:typeof l.onClick=="function"&&(t.onclick=wf)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return cn(s),null;case 6:if(t&&s.stateNode!=null)u1(t,s,t.memoizedProps,i);else{if(typeof i!="string"&&s.stateNode===null)throw Error(Fe(166));if(r=Cl(Ih.current),Cl(mi.current),j_(s)){if(i=s.stateNode,r=s.memoizedProps,i[Ei]=s,(c=i.nodeValue!==r)&&(t=Qn,t!==null))switch(t.tag){case 3:K_(i.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&K_(i.nodeValue,r,(t.mode&1)!==0)}c&&(s.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Ei]=s,s.stateNode=i}return cn(s),null;case 13:if(Vt(Zt),i=s.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jt&&Zn!==null&&s.mode&1&&!(s.flags&128))vb(),gc(),s.flags|=98560,c=!1;else if(c=j_(s),i!==null&&i.dehydrated!==null){if(t===null){if(!c)throw Error(Fe(318));if(c=s.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(Fe(317));c[Ei]=s}else gc(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;cn(s),c=!1}else Ps!==null&&(Qm(Ps),Ps=null),c=!0;if(!c)return s.flags&65536?s:null}return s.flags&128?(s.lanes=r,s):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(s.child.flags|=8192,s.mode&1&&(t===null||Zt.current&1?Nr===0&&(Nr=3):cI())),s.updateQueue!==null&&(s.flags|=4),cn(s),null);case 4:return $c(),Xm(t,s),t===null&&Eh(s.stateNode.containerInfo),cn(s),null;case 10:return z$(s.type._context),cn(s),null;case 17:return Pn(s.type)&&Mf(),cn(s),null;case 19:if(Vt(Zt),c=s.memoizedState,c===null)return cn(s),null;if(i=(s.flags&128)!==0,u=c.rendering,u===null)if(i)yu(c,!1);else{if(Nr!==0||t!==null&&t.flags&128)for(t=s.child;t!==null;){if(u=Gf(t),u!==null){for(s.flags|=128,yu(c,!1),i=u.updateQueue,i!==null&&(s.updateQueue=i,s.flags|=4),s.subtreeFlags=0,i=r,r=s.child;r!==null;)c=r,t=i,c.flags&=14680066,u=c.alternate,u===null?(c.childLanes=0,c.lanes=t,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=u.childLanes,c.lanes=u.lanes,c.child=u.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=u.memoizedProps,c.memoizedState=u.memoizedState,c.updateQueue=u.updateQueue,c.type=u.type,t=u.dependencies,c.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return Pt(Zt,Zt.current&1|2),s.child}t=t.sibling}c.tail!==null&&Tr()>Oc&&(s.flags|=128,i=!0,yu(c,!1),s.lanes=4194304)}else{if(!i)if(t=Gf(u),t!==null){if(s.flags|=128,i=!0,r=t.updateQueue,r!==null&&(s.updateQueue=r,s.flags|=4),yu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!u.alternate&&!jt)return cn(s),null}else 2*Tr()-c.renderingStartTime>Oc&&r!==1073741824&&(s.flags|=128,i=!0,yu(c,!1),s.lanes=4194304);c.isBackwards?(u.sibling=s.child,s.child=u):(r=c.last,r!==null?r.sibling=u:s.child=u,c.last=u)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Tr(),s.sibling=null,r=Zt.current,Pt(Zt,i?r&1|2:r&1),s):(cn(s),null);case 22:case 23:return aI(),i=s.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(s.flags|=8192),i&&s.mode&1?jn&1073741824&&(cn(s),s.subtreeFlags&6&&(s.flags|=8192)):cn(s),null;case 24:return null;case 25:return null}throw Error(Fe(156,s.tag))}function zD(t,s){switch(G$(s),s.tag){case 1:return Pn(s.type)&&Mf(),t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 3:return $c(),Vt(Dn),Vt(pn),q$(),t=s.flags,t&65536&&!(t&128)?(s.flags=t&-65537|128,s):null;case 5:return J$(s),null;case 13:if(Vt(Zt),t=s.memoizedState,t!==null&&t.dehydrated!==null){if(s.alternate===null)throw Error(Fe(340));gc()}return t=s.flags,t&65536?(s.flags=t&-65537|128,s):null;case 19:return Vt(Zt),null;case 4:return $c(),null;case 10:return z$(s.type._context),null;case 22:case 23:return aI(),null;case 24:return null;default:return null}}var Z_=!1,dn=!1,YD=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Qa(t,s){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){cr(t,s,i)}else r.current=null}function zm(t,s,r){try{r()}catch(i){cr(t,s,i)}}var $v=!1;function KD(t,s){if(Nm=bf,t=Tb(),U$(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var l=i.anchorOffset,c=i.focusNode;i=i.focusOffset;try{r.nodeType,c.nodeType}catch{r=null;break e}var u=0,h=-1,_=-1,f=0,T=0,E=t,g=null;t:for(;;){for(var S;E!==r||l!==0&&E.nodeType!==3||(h=u+l),E!==c||i!==0&&E.nodeType!==3||(_=u+i),E.nodeType===3&&(u+=E.nodeValue.length),(S=E.firstChild)!==null;)g=E,E=S;for(;;){if(E===t)break t;if(g===r&&++f===l&&(h=u),g===c&&++T===i&&(_=u),(S=E.nextSibling)!==null)break;E=g,g=E.parentNode}E=S}r=h===-1||_===-1?null:{start:h,end:_}}else r=null}r=r||{start:0,end:0}}else r=null;for(xm={focusedElem:t,selectionRange:r},bf=!1,Ke=s;Ke!==null;)if(s=Ke,t=s.child,(s.subtreeFlags&1028)!==0&&t!==null)t.return=s,Ke=t;else for(;Ke!==null;){s=Ke;try{var R=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(R!==null){var L=R.memoizedProps,N=R.memoizedState,C=s.stateNode,A=C.getSnapshotBeforeUpdate(s.elementType===s.type?L:Ms(s.type,L),N);C.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var I=s.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Fe(163))}}catch(k){cr(s,s.return,k)}if(t=s.sibling,t!==null){t.return=s.return,Ke=t;break}Ke=s.return}return R=$v,$v=!1,R}function ju(t,s,r){var i=s.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var l=i=i.next;do{if((l.tag&t)===t){var c=l.destroy;l.destroy=void 0,c!==void 0&&zm(s,r,c)}l=l.next}while(l!==i)}}function gT(t,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.create;r.destroy=i()}r=r.next}while(r!==s)}}function Ym(t){var s=t.ref;if(s!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof s=="function"?s(t):s.current=t}}function h1(t){var s=t.alternate;s!==null&&(t.alternate=null,h1(s)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(s=t.stateNode,s!==null&&(delete s[Ei],delete s[mh],delete s[km],delete s[xD],delete s[bD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function d1(t){return t.tag===5||t.tag===3||t.tag===4}function Iv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||d1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Km(t,s,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?r.nodeType===8?r.parentNode.insertBefore(t,s):r.insertBefore(t,s):(r.nodeType===8?(s=r.parentNode,s.insertBefore(t,r)):(s=r,s.appendChild(t)),r=r._reactRootContainer,r!=null||s.onclick!==null||(s.onclick=wf));else if(i!==4&&(t=t.child,t!==null))for(Km(t,s,r),t=t.sibling;t!==null;)Km(t,s,r),t=t.sibling}function jm(t,s,r){var i=t.tag;if(i===5||i===6)t=t.stateNode,s?r.insertBefore(t,s):r.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(jm(t,s,r),t=t.sibling;t!==null;)jm(t,s,r),t=t.sibling}var Jr=null,Ds=!1;function go(t,s,r){for(r=r.child;r!==null;)_1(t,s,r),r=r.sibling}function _1(t,s,r){if(gi&&typeof gi.onCommitFiberUnmount=="function")try{gi.onCommitFiberUnmount(uT,r)}catch{}switch(r.tag){case 5:dn||Qa(r,s);case 6:var i=Jr,l=Ds;Jr=null,go(t,s,r),Jr=i,Ds=l,Jr!==null&&(Ds?(t=Jr,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Jr.removeChild(r.stateNode));break;case 18:Jr!==null&&(Ds?(t=Jr,r=r.stateNode,t.nodeType===8?N0(t.parentNode,r):t.nodeType===1&&N0(t,r),fh(t)):N0(Jr,r.stateNode));break;case 4:i=Jr,l=Ds,Jr=r.stateNode.containerInfo,Ds=!0,go(t,s,r),Jr=i,Ds=l;break;case 0:case 11:case 14:case 15:if(!dn&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){l=i=i.next;do{var c=l,u=c.destroy;c=c.tag,u!==void 0&&(c&2||c&4)&&zm(r,s,u),l=l.next}while(l!==i)}go(t,s,r);break;case 1:if(!dn&&(Qa(r,s),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(h){cr(r,s,h)}go(t,s,r);break;case 21:go(t,s,r);break;case 22:r.mode&1?(dn=(i=dn)||r.memoizedState!==null,go(t,s,r),dn=i):go(t,s,r);break;default:go(t,s,r)}}function Ov(t){var s=t.updateQueue;if(s!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new YD),s.forEach(function(i){var l=nP.bind(null,t,i);r.has(i)||(r.add(i),i.then(l,l))})}}function ys(t,s){var r=s.deletions;if(r!==null)for(var i=0;i<r.length;i++){var l=r[i];try{var c=t,u=s,h=u;e:for(;h!==null;){switch(h.tag){case 5:Jr=h.stateNode,Ds=!1;break e;case 3:Jr=h.stateNode.containerInfo,Ds=!0;break e;case 4:Jr=h.stateNode.containerInfo,Ds=!0;break e}h=h.return}if(Jr===null)throw Error(Fe(160));_1(c,u,l),Jr=null,Ds=!1;var _=l.alternate;_!==null&&(_.return=null),l.return=null}catch(f){cr(l,s,f)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)f1(s,t),s=s.sibling}function f1(t,s){var r=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ys(s,t),di(t),i&4){try{ju(3,t,t.return),gT(3,t)}catch(L){cr(t,t.return,L)}try{ju(5,t,t.return)}catch(L){cr(t,t.return,L)}}break;case 1:ys(s,t),di(t),i&512&&r!==null&&Qa(r,r.return);break;case 5:if(ys(s,t),di(t),i&512&&r!==null&&Qa(r,r.return),t.flags&32){var l=t.stateNode;try{uh(l,"")}catch(L){cr(t,t.return,L)}}if(i&4&&(l=t.stateNode,l!=null)){var c=t.memoizedProps,u=r!==null?r.memoizedProps:c,h=t.type,_=t.updateQueue;if(t.updateQueue=null,_!==null)try{h==="input"&&c.type==="radio"&&c.name!=null&&Dx(l,c),mm(h,u);var f=mm(h,c);for(u=0;u<_.length;u+=2){var T=_[u],E=_[u+1];T==="style"?Hx(l,E):T==="dangerouslySetInnerHTML"?Bx(l,E):T==="children"?uh(l,E):C$(l,T,E,f)}switch(h){case"input":fm(l,c);break;case"textarea":Px(l,c);break;case"select":var g=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!c.multiple;var S=c.value;S!=null?sc(l,!!c.multiple,S,!1):g!==!!c.multiple&&(c.defaultValue!=null?sc(l,!!c.multiple,c.defaultValue,!0):sc(l,!!c.multiple,c.multiple?[]:"",!1))}l[mh]=c}catch(L){cr(t,t.return,L)}}break;case 6:if(ys(s,t),di(t),i&4){if(t.stateNode===null)throw Error(Fe(162));l=t.stateNode,c=t.memoizedProps;try{l.nodeValue=c}catch(L){cr(t,t.return,L)}}break;case 3:if(ys(s,t),di(t),i&4&&r!==null&&r.memoizedState.isDehydrated)try{fh(s.containerInfo)}catch(L){cr(t,t.return,L)}break;case 4:ys(s,t),di(t);break;case 13:ys(s,t),di(t),l=t.child,l.flags&8192&&(c=l.memoizedState!==null,l.stateNode.isHidden=c,!c||l.alternate!==null&&l.alternate.memoizedState!==null||(oI=Tr())),i&4&&Ov(t);break;case 22:if(T=r!==null&&r.memoizedState!==null,t.mode&1?(dn=(f=dn)||T,ys(s,t),dn=f):ys(s,t),di(t),i&8192){if(f=t.memoizedState!==null,(t.stateNode.isHidden=f)&&!T&&t.mode&1)for(Ke=t,T=t.child;T!==null;){for(E=Ke=T;Ke!==null;){switch(g=Ke,S=g.child,g.tag){case 0:case 11:case 14:case 15:ju(4,g,g.return);break;case 1:Qa(g,g.return);var R=g.stateNode;if(typeof R.componentWillUnmount=="function"){i=g,r=g.return;try{s=i,R.props=s.memoizedProps,R.state=s.memoizedState,R.componentWillUnmount()}catch(L){cr(i,r,L)}}break;case 5:Qa(g,g.return);break;case 22:if(g.memoizedState!==null){Rv(E);continue}}S!==null?(S.return=g,Ke=S):Rv(E)}T=T.sibling}e:for(T=null,E=t;;){if(E.tag===5){if(T===null){T=E;try{l=E.stateNode,f?(c=l.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(h=E.stateNode,_=E.memoizedProps.style,u=_!=null&&_.hasOwnProperty("display")?_.display:null,h.style.display=Ux("display",u))}catch(L){cr(t,t.return,L)}}}else if(E.tag===6){if(T===null)try{E.stateNode.nodeValue=f?"":E.memoizedProps}catch(L){cr(t,t.return,L)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===t)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===t)break e;for(;E.sibling===null;){if(E.return===null||E.return===t)break e;T===E&&(T=null),E=E.return}T===E&&(T=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:ys(s,t),di(t),i&4&&Ov(t);break;case 21:break;default:ys(s,t),di(t)}}function di(t){var s=t.flags;if(s&2){try{e:{for(var r=t.return;r!==null;){if(d1(r)){var i=r;break e}r=r.return}throw Error(Fe(160))}switch(i.tag){case 5:var l=i.stateNode;i.flags&32&&(uh(l,""),i.flags&=-33);var c=Iv(t);jm(t,c,l);break;case 3:case 4:var u=i.stateNode.containerInfo,h=Iv(t);Km(t,h,u);break;default:throw Error(Fe(161))}}catch(_){cr(t,t.return,_)}t.flags&=-3}s&4096&&(t.flags&=-4097)}function jD(t,s,r){Ke=t,T1(t)}function T1(t,s,r){for(var i=(t.mode&1)!==0;Ke!==null;){var l=Ke,c=l.child;if(l.tag===22&&i){var u=l.memoizedState!==null||Z_;if(!u){var h=l.alternate,_=h!==null&&h.memoizedState!==null||dn;h=Z_;var f=dn;if(Z_=u,(dn=_)&&!f)for(Ke=l;Ke!==null;)u=Ke,_=u.child,u.tag===22&&u.memoizedState!==null?Lv(l):_!==null?(_.return=u,Ke=_):Lv(l);for(;c!==null;)Ke=c,T1(c),c=c.sibling;Ke=l,Z_=h,dn=f}Sv(t)}else l.subtreeFlags&8772&&c!==null?(c.return=l,Ke=c):Sv(t)}}function Sv(t){for(;Ke!==null;){var s=Ke;if(s.flags&8772){var r=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:dn||gT(5,s);break;case 1:var i=s.stateNode;if(s.flags&4&&!dn)if(r===null)i.componentDidMount();else{var l=s.elementType===s.type?r.memoizedProps:Ms(s.type,r.memoizedProps);i.componentDidUpdate(l,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var c=s.updateQueue;c!==null&&lv(s,c,i);break;case 3:var u=s.updateQueue;if(u!==null){if(r=null,s.child!==null)switch(s.child.tag){case 5:r=s.child.stateNode;break;case 1:r=s.child.stateNode}lv(s,u,r)}break;case 5:var h=s.stateNode;if(r===null&&s.flags&4){r=h;var _=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":_.autoFocus&&r.focus();break;case"img":_.src&&(r.src=_.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var f=s.alternate;if(f!==null){var T=f.memoizedState;if(T!==null){var E=T.dehydrated;E!==null&&fh(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Fe(163))}dn||s.flags&512&&Ym(s)}catch(g){cr(s,s.return,g)}}if(s===t){Ke=null;break}if(r=s.sibling,r!==null){r.return=s.return,Ke=r;break}Ke=s.return}}function Rv(t){for(;Ke!==null;){var s=Ke;if(s===t){Ke=null;break}var r=s.sibling;if(r!==null){r.return=s.return,Ke=r;break}Ke=s.return}}function Lv(t){for(;Ke!==null;){var s=Ke;try{switch(s.tag){case 0:case 11:case 15:var r=s.return;try{gT(4,s)}catch(_){cr(s,r,_)}break;case 1:var i=s.stateNode;if(typeof i.componentDidMount=="function"){var l=s.return;try{i.componentDidMount()}catch(_){cr(s,l,_)}}var c=s.return;try{Ym(s)}catch(_){cr(s,c,_)}break;case 5:var u=s.return;try{Ym(s)}catch(_){cr(s,u,_)}}}catch(_){cr(s,s.return,_)}if(s===t){Ke=null;break}var h=s.sibling;if(h!==null){h.return=s.return,Ke=h;break}Ke=s.return}}var JD=Math.ceil,Xf=Zi.ReactCurrentDispatcher,sI=Zi.ReactCurrentOwner,ms=Zi.ReactCurrentBatchConfig,mt=0,Wr=null,Or=null,Zr=0,jn=0,ec=Yo(0),Nr=0,Lh=null,Pl=0,mT=0,iI=0,Ju=null,wn=null,oI=0,Oc=1/0,Fi=null,zf=!1,Jm=null,Po=null,Q_=!1,vo=null,Yf=0,qu=0,qm=null,Of=-1,Sf=0;function An(){return mt&6?Tr():Of!==-1?Of:Of=Tr()}function Fo(t){return t.mode&1?mt&2&&Zr!==0?Zr&-Zr:kD.transition!==null?(Sf===0&&(Sf=Qx()),Sf):(t=vt,t!==0||(t=window.event,t=t===void 0?16:ob(t.type)),t):1}function Ws(t,s,r,i){if(50<qu)throw qu=0,qm=null,Error(Fe(185));Bh(t,r,i),(!(mt&2)||t!==Wr)&&(t===Wr&&(!(mt&2)&&(mT|=r),Nr===4&&Lo(t,Zr)),Fn(t,i),r===1&&mt===0&&!(s.mode&1)&&(Oc=Tr()+500,TT&&Ko()))}function Fn(t,s){var r=t.callbackNode;kM(t,s);var i=xf(t,t===Wr?Zr:0);if(i===0)r!==null&&wC(r),t.callbackNode=null,t.callbackPriority=0;else if(s=i&-i,t.callbackPriority!==s){if(r!=null&&wC(r),s===1)t.tag===0?yD(Av.bind(null,t)):Lb(Av.bind(null,t)),vD(function(){!(mt&6)&&Ko()}),r=null;else{switch(eb(i)){case 1:r=y$;break;case 4:r=qx;break;case 16:r=Nf;break;case 536870912:r=Zx;break;default:r=Nf}r=S1(r,p1.bind(null,t))}t.callbackPriority=s,t.callbackNode=r}}function p1(t,s){if(Of=-1,Sf=0,mt&6)throw Error(Fe(327));var r=t.callbackNode;if(cc()&&t.callbackNode!==r)return null;var i=xf(t,t===Wr?Zr:0);if(i===0)return null;if(i&30||i&t.expiredLanes||s)s=Kf(t,i);else{s=i;var l=mt;mt|=2;var c=g1();(Wr!==t||Zr!==s)&&(Fi=null,Oc=Tr()+500,xl(t,s));do try{QD();break}catch(h){E1(t,h)}while(!0);X$(),Xf.current=c,mt=l,Or!==null?s=0:(Wr=null,Zr=0,s=Nr)}if(s!==0){if(s===2&&(l=Rm(t),l!==0&&(i=l,s=Zm(t,l))),s===1)throw r=Lh,xl(t,0),Lo(t,i),Fn(t,Tr()),r;if(s===6)Lo(t,i);else{if(l=t.current.alternate,!(i&30)&&!qD(l)&&(s=Kf(t,i),s===2&&(c=Rm(t),c!==0&&(i=c,s=Zm(t,c))),s===1))throw r=Lh,xl(t,0),Lo(t,i),Fn(t,Tr()),r;switch(t.finishedWork=l,t.finishedLanes=i,s){case 0:case 1:throw Error(Fe(345));case 2:Sl(t,wn,Fi);break;case 3:if(Lo(t,i),(i&130023424)===i&&(s=oI+500-Tr(),10<s)){if(xf(t,0)!==0)break;if(l=t.suspendedLanes,(l&i)!==i){An(),t.pingedLanes|=t.suspendedLanes&l;break}t.timeoutHandle=ym(Sl.bind(null,t,wn,Fi),s);break}Sl(t,wn,Fi);break;case 4:if(Lo(t,i),(i&4194240)===i)break;for(s=t.eventTimes,l=-1;0<i;){var u=31-Vs(i);c=1<<u,u=s[u],u>l&&(l=u),i&=~c}if(i=l,i=Tr()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*JD(i/1960))-i,10<i){t.timeoutHandle=ym(Sl.bind(null,t,wn,Fi),i);break}Sl(t,wn,Fi);break;case 5:Sl(t,wn,Fi);break;default:throw Error(Fe(329))}}}return Fn(t,Tr()),t.callbackNode===r?p1.bind(null,t):null}function Zm(t,s){var r=Ju;return t.current.memoizedState.isDehydrated&&(xl(t,s).flags|=256),t=Kf(t,s),t!==2&&(s=wn,wn=r,s!==null&&Qm(s)),t}function Qm(t){wn===null?wn=t:wn.push.apply(wn,t)}function qD(t){for(var s=t;;){if(s.flags&16384){var r=s.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var l=r[i],c=l.getSnapshot;l=l.value;try{if(!Xs(c(),l))return!1}catch{return!1}}}if(r=s.child,s.subtreeFlags&16384&&r!==null)r.return=s,s=r;else{if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Lo(t,s){for(s&=~iI,s&=~mT,t.suspendedLanes|=s,t.pingedLanes&=~s,t=t.expirationTimes;0<s;){var r=31-Vs(s),i=1<<r;t[r]=-1,s&=~i}}function Av(t){if(mt&6)throw Error(Fe(327));cc();var s=xf(t,0);if(!(s&1))return Fn(t,Tr()),null;var r=Kf(t,s);if(t.tag!==0&&r===2){var i=Rm(t);i!==0&&(s=i,r=Zm(t,i))}if(r===1)throw r=Lh,xl(t,0),Lo(t,s),Fn(t,Tr()),r;if(r===6)throw Error(Fe(345));return t.finishedWork=t.current.alternate,t.finishedLanes=s,Sl(t,wn,Fi),Fn(t,Tr()),null}function lI(t,s){var r=mt;mt|=1;try{return t(s)}finally{mt=r,mt===0&&(Oc=Tr()+500,TT&&Ko())}}function Fl(t){vo!==null&&vo.tag===0&&!(mt&6)&&cc();var s=mt;mt|=1;var r=ms.transition,i=vt;try{if(ms.transition=null,vt=1,t)return t()}finally{vt=i,ms.transition=r,mt=s,!(mt&6)&&Ko()}}function aI(){jn=ec.current,Vt(ec)}function xl(t,s){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,CD(r)),Or!==null)for(r=Or.return;r!==null;){var i=r;switch(G$(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Mf();break;case 3:$c(),Vt(Dn),Vt(pn),q$();break;case 5:J$(i);break;case 4:$c();break;case 13:Vt(Zt);break;case 19:Vt(Zt);break;case 10:z$(i.type._context);break;case 22:case 23:aI()}r=r.return}if(Wr=t,Or=t=Bo(t.current,null),Zr=jn=s,Nr=0,Lh=null,iI=mT=Pl=0,wn=Ju=null,Al!==null){for(s=0;s<Al.length;s++)if(r=Al[s],i=r.interleaved,i!==null){r.interleaved=null;var l=i.next,c=r.pending;if(c!==null){var u=c.next;c.next=l,i.next=u}r.pending=i}Al=null}return t}function E1(t,s){do{var r=Or;try{if(X$(),mf.current=Wf,Vf){for(var i=Qt.memoizedState;i!==null;){var l=i.queue;l!==null&&(l.pending=null),i=i.next}Vf=!1}if(Dl=0,Vr=vr=Qt=null,Ku=!1,Oh=0,sI.current=null,r===null||r.return===null){Nr=1,Lh=s,Or=null;break}e:{var c=t,u=r.return,h=r,_=s;if(s=Zr,h.flags|=32768,_!==null&&typeof _=="object"&&typeof _.then=="function"){var f=_,T=h,E=T.tag;if(!(T.mode&1)&&(E===0||E===11||E===15)){var g=T.alternate;g?(T.updateQueue=g.updateQueue,T.memoizedState=g.memoizedState,T.lanes=g.lanes):(T.updateQueue=null,T.memoizedState=null)}var S=_v(u);if(S!==null){S.flags&=-257,fv(S,u,h,c,s),S.mode&1&&dv(c,f,s),s=S,_=f;var R=s.updateQueue;if(R===null){var L=new Set;L.add(_),s.updateQueue=L}else R.add(_);break e}else{if(!(s&1)){dv(c,f,s),cI();break e}_=Error(Fe(426))}}else if(jt&&h.mode&1){var N=_v(u);if(N!==null){!(N.flags&65536)&&(N.flags|=256),fv(N,u,h,c,s),V$(Ic(_,h));break e}}c=_=Ic(_,h),Nr!==4&&(Nr=2),Ju===null?Ju=[c]:Ju.push(c),c=u;do{switch(c.tag){case 3:c.flags|=65536,s&=-s,c.lanes|=s;var C=e1(c,_,s);ov(c,C);break e;case 1:h=_;var A=c.type,I=c.stateNode;if(!(c.flags&128)&&(typeof A.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(Po===null||!Po.has(I)))){c.flags|=65536,s&=-s,c.lanes|=s;var k=t1(c,h,s);ov(c,k);break e}}c=c.return}while(c!==null)}$1(r)}catch(H){s=H,Or===r&&r!==null&&(Or=r=r.return);continue}break}while(!0)}function g1(){var t=Xf.current;return Xf.current=Wf,t===null?Wf:t}function cI(){(Nr===0||Nr===3||Nr===2)&&(Nr=4),Wr===null||!(Pl&268435455)&&!(mT&268435455)||Lo(Wr,Zr)}function Kf(t,s){var r=mt;mt|=2;var i=g1();(Wr!==t||Zr!==s)&&(Fi=null,xl(t,s));do try{ZD();break}catch(l){E1(t,l)}while(!0);if(X$(),mt=r,Xf.current=i,Or!==null)throw Error(Fe(261));return Wr=null,Zr=0,Nr}function ZD(){for(;Or!==null;)m1(Or)}function QD(){for(;Or!==null&&!RM();)m1(Or)}function m1(t){var s=O1(t.alternate,t,jn);t.memoizedProps=t.pendingProps,s===null?$1(t):Or=s,sI.current=null}function $1(t){var s=t;do{var r=s.alternate;if(t=s.return,s.flags&32768){if(r=zD(r,s),r!==null){r.flags&=32767,Or=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nr=6,Or=null;return}}else if(r=XD(r,s,jn),r!==null){Or=r;return}if(s=s.sibling,s!==null){Or=s;return}Or=s=t}while(s!==null);Nr===0&&(Nr=5)}function Sl(t,s,r){var i=vt,l=ms.transition;try{ms.transition=null,vt=1,eP(t,s,r,i)}finally{ms.transition=l,vt=i}return null}function eP(t,s,r,i){do cc();while(vo!==null);if(mt&6)throw Error(Fe(327));r=t.finishedWork;var l=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Fe(177));t.callbackNode=null,t.callbackPriority=0;var c=r.lanes|r.childLanes;if(wM(t,c),t===Wr&&(Or=Wr=null,Zr=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Q_||(Q_=!0,S1(Nf,function(){return cc(),null})),c=(r.flags&15990)!==0,r.subtreeFlags&15990||c){c=ms.transition,ms.transition=null;var u=vt;vt=1;var h=mt;mt|=4,sI.current=null,KD(t,r),f1(r,t),$D(xm),bf=!!Nm,xm=Nm=null,t.current=r,jD(r),LM(),mt=h,vt=u,ms.transition=c}else t.current=r;if(Q_&&(Q_=!1,vo=t,Yf=l),c=t.pendingLanes,c===0&&(Po=null),vM(r.stateNode),Fn(t,Tr()),s!==null)for(i=t.onRecoverableError,r=0;r<s.length;r++)l=s[r],i(l.value,{componentStack:l.stack,digest:l.digest});if(zf)throw zf=!1,t=Jm,Jm=null,t;return Yf&1&&t.tag!==0&&cc(),c=t.pendingLanes,c&1?t===qm?qu++:(qu=0,qm=t):qu=0,Ko(),null}function cc(){if(vo!==null){var t=eb(Yf),s=ms.transition,r=vt;try{if(ms.transition=null,vt=16>t?16:t,vo===null)var i=!1;else{if(t=vo,vo=null,Yf=0,mt&6)throw Error(Fe(331));var l=mt;for(mt|=4,Ke=t.current;Ke!==null;){var c=Ke,u=c.child;if(Ke.flags&16){var h=c.deletions;if(h!==null){for(var _=0;_<h.length;_++){var f=h[_];for(Ke=f;Ke!==null;){var T=Ke;switch(T.tag){case 0:case 11:case 15:ju(8,T,c)}var E=T.child;if(E!==null)E.return=T,Ke=E;else for(;Ke!==null;){T=Ke;var g=T.sibling,S=T.return;if(h1(T),T===f){Ke=null;break}if(g!==null){g.return=S,Ke=g;break}Ke=S}}}var R=c.alternate;if(R!==null){var L=R.child;if(L!==null){R.child=null;do{var N=L.sibling;L.sibling=null,L=N}while(L!==null)}}Ke=c}}if(c.subtreeFlags&2064&&u!==null)u.return=c,Ke=u;else e:for(;Ke!==null;){if(c=Ke,c.flags&2048)switch(c.tag){case 0:case 11:case 15:ju(9,c,c.return)}var C=c.sibling;if(C!==null){C.return=c.return,Ke=C;break e}Ke=c.return}}var A=t.current;for(Ke=A;Ke!==null;){u=Ke;var I=u.child;if(u.subtreeFlags&2064&&I!==null)I.return=u,Ke=I;else e:for(u=A;Ke!==null;){if(h=Ke,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:gT(9,h)}}catch(H){cr(h,h.return,H)}if(h===u){Ke=null;break e}var k=h.sibling;if(k!==null){k.return=h.return,Ke=k;break e}Ke=h.return}}if(mt=l,Ko(),gi&&typeof gi.onPostCommitFiberRoot=="function")try{gi.onPostCommitFiberRoot(uT,t)}catch{}i=!0}return i}finally{vt=r,ms.transition=s}}return!1}function Cv(t,s,r){s=Ic(r,s),s=e1(t,s,1),t=Do(t,s,1),s=An(),t!==null&&(Bh(t,1,s),Fn(t,s))}function cr(t,s,r){if(t.tag===3)Cv(t,t,r);else for(;s!==null;){if(s.tag===3){Cv(s,t,r);break}else if(s.tag===1){var i=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Po===null||!Po.has(i))){t=Ic(r,t),t=t1(s,t,1),s=Do(s,t,1),t=An(),s!==null&&(Bh(s,1,t),Fn(s,t));break}}s=s.return}}function tP(t,s,r){var i=t.pingCache;i!==null&&i.delete(s),s=An(),t.pingedLanes|=t.suspendedLanes&r,Wr===t&&(Zr&r)===r&&(Nr===4||Nr===3&&(Zr&130023424)===Zr&&500>Tr()-oI?xl(t,0):iI|=r),Fn(t,s)}function I1(t,s){s===0&&(t.mode&1?(s=V_,V_<<=1,!(V_&130023424)&&(V_=4194304)):s=1);var r=An();t=Ji(t,s),t!==null&&(Bh(t,s,r),Fn(t,r))}function rP(t){var s=t.memoizedState,r=0;s!==null&&(r=s.retryLane),I1(t,r)}function nP(t,s){var r=0;switch(t.tag){case 13:var i=t.stateNode,l=t.memoizedState;l!==null&&(r=l.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Fe(314))}i!==null&&i.delete(s),I1(t,r)}var O1;O1=function(t,s,r){if(t!==null)if(t.memoizedProps!==s.pendingProps||Dn.current)Mn=!0;else{if(!(t.lanes&r)&&!(s.flags&128))return Mn=!1,WD(t,s,r);Mn=!!(t.flags&131072)}else Mn=!1,jt&&s.flags&1048576&&Ab(s,Ff,s.index);switch(s.lanes=0,s.tag){case 2:var i=s.type;If(t,s),t=s.pendingProps;var l=Ec(s,pn.current);ac(s,r),l=Q$(null,s,i,t,l,r);var c=eI();return s.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,Pn(i)?(c=!0,Df(s)):c=!1,s.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,K$(s),l.updater=ET,s.stateNode=l,l._reactInternals=s,Bm(s,i,t,r),s=Gm(null,s,i,!0,c,r)):(s.tag=0,jt&&c&&H$(s),On(null,s,l,r),s=s.child),s;case 16:i=s.elementType;e:{switch(If(t,s),t=s.pendingProps,l=i._init,i=l(i._payload),s.type=i,l=s.tag=iP(i),t=Ms(i,t),l){case 0:s=Hm(null,s,i,t,r);break e;case 1:s=Ev(null,s,i,t,r);break e;case 11:s=Tv(null,s,i,t,r);break e;case 14:s=pv(null,s,i,Ms(i.type,t),r);break e}throw Error(Fe(306,i,""))}return s;case 0:return i=s.type,l=s.pendingProps,l=s.elementType===i?l:Ms(i,l),Hm(t,s,i,l,r);case 1:return i=s.type,l=s.pendingProps,l=s.elementType===i?l:Ms(i,l),Ev(t,s,i,l,r);case 3:e:{if(i1(s),t===null)throw Error(Fe(387));i=s.pendingProps,c=s.memoizedState,l=c.element,yb(t,s),Hf(s,i,null,r);var u=s.memoizedState;if(i=u.element,c.isDehydrated)if(c={element:i,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},s.updateQueue.baseState=c,s.memoizedState=c,s.flags&256){l=Ic(Error(Fe(423)),s),s=gv(t,s,i,r,l);break e}else if(i!==l){l=Ic(Error(Fe(424)),s),s=gv(t,s,i,r,l);break e}else for(Zn=Mo(s.stateNode.containerInfo.firstChild),Qn=s,jt=!0,Ps=null,r=xb(s,null,i,r),s.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(gc(),i===l){s=qi(t,s,r);break e}On(t,s,i,r)}s=s.child}return s;case 5:return kb(s),t===null&&Dm(s),i=s.type,l=s.pendingProps,c=t!==null?t.memoizedProps:null,u=l.children,bm(i,l)?u=null:c!==null&&bm(i,c)&&(s.flags|=32),s1(t,s),On(t,s,u,r),s.child;case 6:return t===null&&Dm(s),null;case 13:return o1(t,s,r);case 4:return j$(s,s.stateNode.containerInfo),i=s.pendingProps,t===null?s.child=mc(s,null,i,r):On(t,s,i,r),s.child;case 11:return i=s.type,l=s.pendingProps,l=s.elementType===i?l:Ms(i,l),Tv(t,s,i,l,r);case 7:return On(t,s,s.pendingProps,r),s.child;case 8:return On(t,s,s.pendingProps.children,r),s.child;case 12:return On(t,s,s.pendingProps.children,r),s.child;case 10:e:{if(i=s.type._context,l=s.pendingProps,c=s.memoizedProps,u=l.value,Pt(Bf,i._currentValue),i._currentValue=u,c!==null)if(Xs(c.value,u)){if(c.children===l.children&&!Dn.current){s=qi(t,s,r);break e}}else for(c=s.child,c!==null&&(c.return=s);c!==null;){var h=c.dependencies;if(h!==null){u=c.child;for(var _=h.firstContext;_!==null;){if(_.context===i){if(c.tag===1){_=Wi(-1,r&-r),_.tag=2;var f=c.updateQueue;if(f!==null){f=f.shared;var T=f.pending;T===null?_.next=_:(_.next=T.next,T.next=_),f.pending=_}}c.lanes|=r,_=c.alternate,_!==null&&(_.lanes|=r),Pm(c.return,r,s),h.lanes|=r;break}_=_.next}}else if(c.tag===10)u=c.type===s.type?null:c.child;else if(c.tag===18){if(u=c.return,u===null)throw Error(Fe(341));u.lanes|=r,h=u.alternate,h!==null&&(h.lanes|=r),Pm(u,r,s),u=c.sibling}else u=c.child;if(u!==null)u.return=c;else for(u=c;u!==null;){if(u===s){u=null;break}if(c=u.sibling,c!==null){c.return=u.return,u=c;break}u=u.return}c=u}On(t,s,l.children,r),s=s.child}return s;case 9:return l=s.type,i=s.pendingProps.children,ac(s,r),l=Is(l),i=i(l),s.flags|=1,On(t,s,i,r),s.child;case 14:return i=s.type,l=Ms(i,s.pendingProps),l=Ms(i.type,l),pv(t,s,i,l,r);case 15:return r1(t,s,s.type,s.pendingProps,r);case 17:return i=s.type,l=s.pendingProps,l=s.elementType===i?l:Ms(i,l),If(t,s),s.tag=1,Pn(i)?(t=!0,Df(s)):t=!1,ac(s,r),Qb(s,i,l),Bm(s,i,l,r),Gm(null,s,i,!0,t,r);case 19:return l1(t,s,r);case 22:return n1(t,s,r)}throw Error(Fe(156,s.tag))};function S1(t,s){return Jx(t,s)}function sP(t,s,r,i){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gs(t,s,r,i){return new sP(t,s,r,i)}function uI(t){return t=t.prototype,!(!t||!t.isReactComponent)}function iP(t){if(typeof t=="function")return uI(t)?1:0;if(t!=null){if(t=t.$$typeof,t===N$)return 11;if(t===x$)return 14}return 2}function Bo(t,s){var r=t.alternate;return r===null?(r=gs(t.tag,s,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=s,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,s=t.dependencies,r.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Rf(t,s,r,i,l,c){var u=2;if(i=t,typeof t=="function")uI(t)&&(u=1);else if(typeof t=="string")u=5;else e:switch(t){case Wa:return bl(r.children,l,c,s);case v$:u=8,l|=8;break;case cm:return t=gs(12,r,s,l|2),t.elementType=cm,t.lanes=c,t;case um:return t=gs(13,r,s,l),t.elementType=um,t.lanes=c,t;case hm:return t=gs(19,r,s,l),t.elementType=hm,t.lanes=c,t;case kx:return $T(r,l,c,s);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case bx:u=10;break e;case yx:u=9;break e;case N$:u=11;break e;case x$:u=14;break e;case Oo:u=16,i=null;break e}throw Error(Fe(130,t==null?t:typeof t,""))}return s=gs(u,r,s,l),s.elementType=t,s.type=i,s.lanes=c,s}function bl(t,s,r,i){return t=gs(7,t,i,s),t.lanes=r,t}function $T(t,s,r,i){return t=gs(22,t,i,s),t.elementType=kx,t.lanes=r,t.stateNode={isHidden:!1},t}function P0(t,s,r){return t=gs(6,t,null,s),t.lanes=r,t}function F0(t,s,r){return s=gs(4,t.children!==null?t.children:[],t.key,s),s.lanes=r,s.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},s}function oP(t,s,r,i,l){this.tag=s,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=g0(0),this.expirationTimes=g0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=g0(0),this.identifierPrefix=i,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function hI(t,s,r,i,l,c,u,h,_){return t=new oP(t,s,r,h,_),s===1?(s=1,c===!0&&(s|=8)):s=0,c=gs(3,null,null,s),t.current=c,c.stateNode=t,c.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},K$(c),t}function lP(t,s,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Va,key:i==null?null:""+i,children:t,containerInfo:s,implementation:r}}function R1(t){if(!t)return Go;t=t._reactInternals;e:{if(Wl(t)!==t||t.tag!==1)throw Error(Fe(170));var s=t;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(Pn(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(Fe(171))}if(t.tag===1){var r=t.type;if(Pn(r))return Rb(t,r,s)}return s}function L1(t,s,r,i,l,c,u,h,_){return t=hI(r,i,!0,t,l,c,u,h,_),t.context=R1(null),r=t.current,i=An(),l=Fo(r),c=Wi(i,l),c.callback=s??null,Do(r,c,l),t.current.lanes=l,Bh(t,l,i),Fn(t,i),t}function IT(t,s,r,i){var l=s.current,c=An(),u=Fo(l);return r=R1(r),s.context===null?s.context=r:s.pendingContext=r,s=Wi(c,u),s.payload={element:t},i=i===void 0?null:i,i!==null&&(s.callback=i),t=Do(l,s,u),t!==null&&(Ws(t,l,u,c),gf(t,l,u)),u}function jf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function vv(t,s){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<s?r:s}}function dI(t,s){vv(t,s),(t=t.alternate)&&vv(t,s)}function aP(){return null}var A1=typeof reportError=="function"?reportError:function(t){console.error(t)};function _I(t){this._internalRoot=t}OT.prototype.render=_I.prototype.render=function(t){var s=this._internalRoot;if(s===null)throw Error(Fe(409));IT(t,s,null,null)};OT.prototype.unmount=_I.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var s=t.containerInfo;Fl(function(){IT(null,t,null,null)}),s[ji]=null}};function OT(t){this._internalRoot=t}OT.prototype.unstable_scheduleHydration=function(t){if(t){var s=nb();t={blockedOn:null,target:t,priority:s};for(var r=0;r<Ro.length&&s!==0&&s<Ro[r].priority;r++);Ro.splice(r,0,t),r===0&&ib(t)}};function fI(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ST(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Nv(){}function cP(t,s,r,i,l){if(l){if(typeof i=="function"){var c=i;i=function(){var f=jf(u);c.call(f)}}var u=L1(s,i,t,0,null,!1,!1,"",Nv);return t._reactRootContainer=u,t[ji]=u.current,Eh(t.nodeType===8?t.parentNode:t),Fl(),u}for(;l=t.lastChild;)t.removeChild(l);if(typeof i=="function"){var h=i;i=function(){var f=jf(_);h.call(f)}}var _=hI(t,0,!1,null,null,!1,!1,"",Nv);return t._reactRootContainer=_,t[ji]=_.current,Eh(t.nodeType===8?t.parentNode:t),Fl(function(){IT(s,_,r,i)}),_}function RT(t,s,r,i,l){var c=r._reactRootContainer;if(c){var u=c;if(typeof l=="function"){var h=l;l=function(){var _=jf(u);h.call(_)}}IT(s,u,t,l)}else u=cP(r,s,t,l,i);return jf(u)}tb=function(t){switch(t.tag){case 3:var s=t.stateNode;if(s.current.memoizedState.isDehydrated){var r=Pu(s.pendingLanes);r!==0&&(k$(s,r|1),Fn(s,Tr()),!(mt&6)&&(Oc=Tr()+500,Ko()))}break;case 13:Fl(function(){var i=Ji(t,1);if(i!==null){var l=An();Ws(i,t,1,l)}}),dI(t,1)}};w$=function(t){if(t.tag===13){var s=Ji(t,134217728);if(s!==null){var r=An();Ws(s,t,134217728,r)}dI(t,134217728)}};rb=function(t){if(t.tag===13){var s=Fo(t),r=Ji(t,s);if(r!==null){var i=An();Ws(r,t,s,i)}dI(t,s)}};nb=function(){return vt};sb=function(t,s){var r=vt;try{return vt=t,s()}finally{vt=r}};Im=function(t,s,r){switch(s){case"input":if(fm(t,r),s=r.name,r.type==="radio"&&s!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<r.length;s++){var i=r[s];if(i!==t&&i.form===t.form){var l=fT(i);if(!l)throw Error(Fe(90));Mx(i),fm(i,l)}}}break;case"textarea":Px(t,r);break;case"select":s=r.value,s!=null&&sc(t,!!r.multiple,s,!1)}};Wx=lI;Xx=Fl;var uP={usingClientEntryPoint:!1,Events:[Hh,Ka,fT,Gx,Vx,lI]},ku={findFiberByHostInstance:Ll,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hP={bundleType:ku.bundleType,version:ku.version,rendererPackageName:ku.rendererPackageName,rendererConfig:ku.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kx(t),t===null?null:t.stateNode},findFiberByHostInstance:ku.findFiberByHostInstance||aP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{uT=ef.inject(hP),gi=ef}catch{}}ss.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uP;ss.createPortal=function(t,s){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fI(s))throw Error(Fe(200));return lP(t,s,null,r)};ss.createRoot=function(t,s){if(!fI(t))throw Error(Fe(299));var r=!1,i="",l=A1;return s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(l=s.onRecoverableError)),s=hI(t,1,!1,null,null,r,!1,i,l),t[ji]=s.current,Eh(t.nodeType===8?t.parentNode:t),new _I(s)};ss.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var s=t._reactInternals;if(s===void 0)throw typeof t.render=="function"?Error(Fe(188)):(t=Object.keys(t).join(","),Error(Fe(268,t)));return t=Kx(s),t=t===null?null:t.stateNode,t};ss.flushSync=function(t){return Fl(t)};ss.hydrate=function(t,s,r){if(!ST(s))throw Error(Fe(200));return RT(null,t,s,!0,r)};ss.hydrateRoot=function(t,s,r){if(!fI(t))throw Error(Fe(405));var i=r!=null&&r.hydratedSources||null,l=!1,c="",u=A1;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(c=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),s=L1(s,null,t,1,r??null,l,!1,c,u),t[ji]=s.current,Eh(t),i)for(t=0;t<i.length;t++)r=i[t],l=r._getVersion,l=l(r._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[r,l]:s.mutableSourceEagerHydrationData.push(r,l);return new OT(s)};ss.render=function(t,s,r){if(!ST(s))throw Error(Fe(200));return RT(null,t,s,!1,r)};ss.unmountComponentAtNode=function(t){if(!ST(t))throw Error(Fe(40));return t._reactRootContainer?(Fl(function(){RT(null,null,t,!1,function(){t._reactRootContainer=null,t[ji]=null})}),!0):!1};ss.unstable_batchedUpdates=lI;ss.unstable_renderSubtreeIntoContainer=function(t,s,r,i){if(!ST(r))throw Error(Fe(200));if(t==null||t._reactInternals===void 0)throw Error(Fe(38));return RT(t,s,r,!1,i)};ss.version="18.3.1-next-f1338f8080-20240426";function C1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(C1)}catch(t){console.error(t)}}C1(),Cx.exports=ss;var v1=Cx.exports,N1,xv=v1;N1=xv.createRoot,xv.hydrateRoot;/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),_P=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(s,r,i)=>i?i.toUpperCase():r.toLowerCase()),bv=t=>{const s=_P(t);return s.charAt(0).toUpperCase()+s.slice(1)},x1=(...t)=>t.filter((s,r,i)=>!!s&&s.trim()!==""&&i.indexOf(s)===r).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var fP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=Ce.forwardRef(({color:t="currentColor",size:s=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:u,...h},_)=>Ce.createElement("svg",{ref:_,...fP,width:s,height:s,stroke:t,strokeWidth:i?Number(r)*24/Number(s):r,className:x1("lucide",l),...h},[...u.map(([f,T])=>Ce.createElement(f,T)),...Array.isArray(c)?c:[c]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xl=(t,s)=>{const r=Ce.forwardRef(({className:i,...l},c)=>Ce.createElement(TP,{ref:c,iconNode:s,className:x1(`lucide-${dP(bv(t))}`,`lucide-${t}`,i),...l}));return r.displayName=bv(t),r};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],EP=Xl("check",pP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gP=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],mP=Xl("copy",gP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $P=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],b1=Xl("eye",$P);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IP=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]],y1=Xl("file-spreadsheet",IP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OP=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],k1=Xl("search",OP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["path",{d:"M9 17c2 0 2.8-1 2.8-2.8V10c0-2 1-3.3 3.2-3",key:"m1af9g"}],["path",{d:"M9 11.2h5.7",key:"3zgcl2"}]],w1=Xl("square-function",SP);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RP=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],M1=Xl("wand-sparkles",RP);var D1={exports:{}},B0={exports:{}},yv;function TI(){return yv||(yv=1,function(t,s){(function(r,i){t.exports=i()})(bo,function(){var r={},i,l,c,u,h,_,f,T,E,g,S,R,L,N,C,A,I,k,H,G,x,U,B,re,Z,se,pe,Me,Oe,we,ye,Re,j,Y,oe,M,Q,J,q,he,Ne,Pe,be,ce,tt,b,_e,He,ke,Ze,ve,ut,Bt,tr,hr,wt,rn,Wt,te,dr,mn,ct,Ot,et,ot,Mt,m,D,ie,le,Be,gt,xn,Bn,Un,O,w,ee,ae,Ae,Xe,rt,wr,Oi,to,Rr,zs,bc,yc,y,W,P,F,z,K,Te,Se,Ee,ge,$e,De,Ge,ze,Ue,We,nt,Dt,Nt,pr,Si,Ys,Ks,os,Ri,ls,ea,kc,Zh,jI,JI,qI,js,_r,wc,bT,Js,ro,ZI,yT,Qh,kT,QI,wT,Mc,eO,ed,tO,td,rO,nO,sO,ta,iO,MT,Mr,rd,DT,nd,sd,oO,PT,FT,lO,id,jo,od,aO,BT,UT,cO,uO,Jo,hO,Dc,ra,na,as,dO,_O,fO,TO,pO,EO,gO,HT,no,sa,GT,mO,$O,IO,OO,SO,RO,LO,AO,CO,VT,vO,qo,ld,NO,ia,ad,WT,XT,cd,ud,zT,xO,YT,KT,jT,JT,qT,ZT,QT,bO,Pc,ep,hd,dd,qs,tp,rp,Fc,np,sp,yO,_d,ip,kO,wO,MO,DO,PO,oa,op,lp,Bc,ap,FO,BO,cp,up,Li,hp,dp,UO,HO,GO,VO,_p,WO,fp,XO,Zo,Uc,fd,Td,Qo,Tp,pd,pp,rr,zO,la,aa,YO,Ep,Ed,ca,gp,el,Hc,mp,$p,KO,jO,JO,Ip,qO,Op,ua,ZO,QO,eS,tS,Gc,Sp,Rp,gd,md,rS,Vc,Lp,Wc,nS,sS,so,Ap,Zs,iS,oS,Cp,lS,tl,vp,aS,cS,uS,hS,dS,Np,_S,fS,$d,TS,pS,xp,Qs,ES,gS,ha,mS,bp,Id,$S,IS,OS,yp,Od,kp,Sd,SS,RS,LS,AS,Je,bn,Dr,Jt,ei,da,qe,nr,CS,vS,NS,wp,xS,Rd,Mp,Dp,Pp,Fp,_a,bS,yS,kS,fa,Bp,wS,Ld,cs,Up,Ta,Ls,Hp,MS,pa,DS,io,Ad,Xc,Gp,PS,Vp,FS,Cd,Wp,Xp,zp,BS,Yp,US,vd,HS,GS,zc,VS,Kp,Nd,xd,bd,yd,jp,WS,Jp,kd,wd,XS,Md,zS,qp,YS,oo,Zp,Yc,Qp,eE,Dd,tE,rE,nE,sE,iE,oE,lE,aE,cE,KS,jS,JS,qS,ZS,QS,eR,tR,rR,uE,hE,dE,_E,fE,TE,pE,Pd,Kc,EE,nR,gE,mE,$E,IE,OE,SE,RE,LE,AE,CE,sR,iR,vE,oR,lR,aR,cR,me;i=function(e,n,o,a){if(!(e instanceof Le)&&typeof e!="string"||`${e}`.trim()==="")throw Error('Invalid type "'+e+'". The type must be a non-empty string or a Blockly.registry.Type.');if(e=`${e}`.toLowerCase(),typeof n!="string"||n.trim()==="")throw Error('Invalid name "'+n+'". The name must be a non-empty string.');const d=n.toLowerCase();if(!o)throw Error("Can not register a null value");let p=lo[e],v=Fd[e];if(p||(p=lo[e]=Object.create(null),v=Fd[e]=Object.create(null)),l(e,o),!a&&p[d]&&p[d]!==o)throw Error('Name "'+d+'" with type "'+e+'" already registered.');p[d]=o,v[d]=n},l=function(e,n){switch(e){case String(Le.FIELD):if(typeof n.fromJson!="function")throw Error('Type "'+e+'" must have a fromJson function')}},c=function(e,n){e=`${e}`.toLowerCase(),n=n.toLowerCase();const o=lo[e];o&&o[n]?(delete lo[e][n],delete Fd[e][n]):console.warn("Unable to unregister ["+n+"]["+e+"] from the registry.")},u=function(e,n,o){e=`${e}`.toLowerCase(),n=n.toLowerCase();const a=lo[e];if(!a||!a[n]){if(n="Unable to find ["+n+"]["+e+"] in the registry.",o)throw Error(n+" You must require or register a "+e+" plugin.");return console.warn(n),null}return a[n]},h=function(e,n){return e=`${e}`.toLowerCase(),n=n.toLowerCase(),(e=lo[e])?!!e[n]:!1},_=function(e,n,o){return u(e,n,o)},f=function(e,n,o){return u(e,n,o)},T=function(e,n,o){e=`${e}`.toLowerCase();var a=lo[e];if(!a){if(a=`Unable to find [${e}] in the registry.`,o)throw Error(`${a} You must require or register a ${e} plugin.`);return console.warn(a),null}if(!n)return a;e=Fd[e],o=Object.create(null);for(const d of Object.keys(a))o[e[d]]=a[d];return o},E=function(e,n,o){return n=n.plugins[String(e)]||Hn,typeof n=="function"?n:_(e,n,o)},g=function(e,n){S(),Ud=setTimeout(function(){n&&n.handleRightClick(e)},Xk)},S=function(){Ud&&(clearTimeout(Ud),Ud=0)},R=function(){Bd=null},L=function(e){return!e.type.startsWith("pointer")||e instanceof PointerEvent&&C(e)},N=function(e){return`${e.pointerId}`},C=function(e){const n=N(e);return Bd?Bd===n:e.type==="pointerdown"?(Bd=n,!0):!1},A=function(e,n,o,a,d){function p(X){(d||L(X))&&(o?a.call(o,X):a(X))}const v=[];if(n in rl)for(let X=0;X<rl[n].length;X++){const Ie=rl[n][X];e.addEventListener(Ie,p,!1),v.push([e,Ie,p])}else e.addEventListener(n,p,!1),v.push([e,n,p]);return v},I=function(e,n,o,a){function d(v){o?a.call(o,v):a(v)}const p=[];if(n in rl)for(let v=0;v<rl[n].length;v++){const X=rl[n][v];e.addEventListener(X,d,!1),p.push([e,X,d])}else e.addEventListener(n,d,!1),p.push([e,n,d]);return p},k=function(e){const n=e[e.length-1][2];for(;e.length;){const[o,a,d]=e.pop();o.removeEventListener(a,d,!1)}return n},H=function(e){if(e.target instanceof HTMLElement){if(e.target.isContentEditable||e.target.getAttribute("data-is-text-input")==="true")return!0;if(e.target instanceof HTMLInputElement)return e=e.target,e.type==="text"||e.type==="number"||e.type==="email"||e.type==="password"||e.type==="search"||e.type==="tel"||e.type==="url";if(e.target instanceof HTMLTextAreaElement)return!0}return!1},G=function(e){return e.ctrlKey&&yE?!0:e.button===2},x=function(e,n,o){const a=n.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,o||(o=n.getScreenCTM().inverse()),a.matrixTransform(o)},U=function(e){switch(e.deltaMode){default:return{x:e.deltaX,y:e.deltaY};case 1:return{x:e.deltaX*IR,y:e.deltaY*IR};case 2:return{x:e.deltaX*OR,y:e.deltaY*OR}}},B=function(){return"blockly-"+(Kk++).toString(36)},re=function(){return LR.genUid()},Z=function(e){return e.type===de.BLOCK_CREATE},se=function(e){return e.type===de.BLOCK_DELETE},pe=function(e){return e.type===de.BLOCK_CHANGE},Me=function(e){return e.type===de.BLOCK_FIELD_INTERMEDIATE_CHANGE},Oe=function(e){return e.type===de.BLOCK_MOVE},we=function(e){return e.type===de.CLICK},ye=function(e){return e.type===de.BUBBLE_OPEN},Re=function(e){return e.type===de.VIEWPORT_CHANGE},r.setRecordUndo$$module$build$src$core$events$utils=function(e){jc=e},j=function(){return jc},Y=function(e){CR.fireInternal(e)},oe=function(e){if(he()){if(!vi.length)try{requestAnimationFrame(()=>{setTimeout(M,0)})}catch{setTimeout(M,0)}Q(e)}},M=function(){const e=J(vi);vi.length=0;for(const n of e){if(!n.workspaceId)continue;let o;(o=Ot(n.workspaceId))==null||o.fireChangeListener(n)}},Q=function(e){if(pe(e)&&e.element==="mutation"){let n;for(n=vi.length;n>0;n--){const o=vi[n-1];if(o.group!==e.group||o.workspaceId!==e.workspaceId||!Oe(o)||o.newParentId!==e.blockId)break}vi.splice(n,0,e)}else vi.push(e)},J=function(e){const n=[];for(const o of e)if(e=n[n.length-1],!o.isNull())if(e&&e.workspaceId===o.workspaceId&&e.group===o.group)if(Oe(o)&&Oe(e)&&o.blockId===e.blockId){if(e.newParentId=o.newParentId,e.newInputName=o.newInputName,e.newCoordinate=o.newCoordinate,e.reason||o.reason){let a,d;e.reason=Array.from(new Set(((a=e.reason)!=null?a:[]).concat((d=o.reason)!=null?d:[])))}}else pe(o)&&pe(e)&&o.blockId===e.blockId&&o.element===e.element&&o.name===e.name?e.newValue=o.newValue:Re(o)&&Re(e)?(e.viewTop=o.viewTop,e.viewLeft=o.viewLeft,e.scale=o.scale,e.oldScale=o.oldScale):we(o)&&ye(e)||n.push(o);else n.push(o);return e=n.filter(o=>!o.isNull())},q=function(){for(let e=0,n;n=vi[e];e++)n.recordUndo=!1},r.disable$$module$build$src$core$events$utils=function(){wE++},r.enable$$module$build$src$core$events$utils=function(){wE--},he=function(){return wE===0},r.getGroup$$module$build$src$core$events$utils=function(){return AR},r.setGroup$$module$build$src$core$events$utils=function(e){CR.setGroupInternal(e)},Ne=function(e){AR=typeof e=="boolean"?e?re():"":e},Pe=function(e){const n=[];e=e.getDescendants(!1);for(let o=0,a;a=e[o];o++)n[o]=a.id;return n},be=function(e,n){const o=ce(e.type);if(!o)throw Error("Unknown event type.");return o.fromJson(e,n)},ce=function(e){const n=_(Le.EVENT,e);if(!n)throw Error(`Event type ${e} not found in registry.`);return n},tt=function(e){if((Oe(e)||Z(e))&&e.workspaceId){var n=Ot(e.workspaceId);if(!e.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(e=n.getBlockById(e.blockId)){const o=jc;try{jc=!1;const a=e.getParent();if(a&&!a.hasDisabledReason(ME)){const d=e.getDescendants(!1);for(let p=0,v;v=d[p];p++)v.setDisabledReason(!1,ME)}else if((e.outputConnection||e.previousConnection)&&!n.isDragging())do e.setDisabledReason(!0,ME),e=e.getNextBlock();while(e)}finally{jc=o}}}},b=function(e,n,o){e=document.createElementNS(Jc,`${e}`);for(const a in n)e.setAttribute(a,`${n[a]}`);return o&&o.appendChild(e),e},_e=function(e,n){return n=n.split(" "),n.every(o=>e.classList.contains(o))?!1:(e.classList.add(...n),!0)},He=function(e,n){e.classList.remove(...n.split(" "))},ke=function(e,n){return n=n.split(" "),n.every(o=>!e.classList.contains(o))?!1:(e.classList.remove(...n),!0)},Ze=function(e,n){return e.classList.contains(n)},ve=function(e){return e&&e.parentNode?e.parentNode.removeChild(e):null},ut=function(e,n){const o=n.nextSibling;if(n=n.parentNode,!n)throw Error("Reference node has no parent.");o?n.insertBefore(e,o):n.appendChild(e)},Bt=function(e,n){e.style.transform=n,e.style["-webkit-transform"]=n},tr=function(){DE++,As||(As=Object.create(null))},hr=function(){DE--,DE||(As=null)},wt=function(e){const n=e.textContent+`
`+e.className.baseVal;var o;return As&&(o=As[n])||(o=window.getComputedStyle(e),o=Wt(e,o.fontSize,o.fontWeight,o.fontFamily),As&&(As[n]=o)),o},rn=function(e,n,o,a){return Wt(e,n+"pt",o,a)},Wt=function(e,n,o,a){const d=e.textContent;e=d+`
`+e.className.baseVal;var p;return As&&(p=As[e])||(qc||(p=document.createElement("canvas"),p.className="blocklyComputeCanvas",document.body.appendChild(p),qc=p.getContext("2d")),d&&qc?(qc.font=o+" "+n+" "+a,p=qc.measureText(d).width):p=0,As&&(As[e]=p)),p},te=function(e,n,o,a){const d=document.createElement("span");d.style.font=o+" "+n+" "+a,d.textContent=e,e=document.createElement("div"),e.style.width="1px",e.style.height="0",n=document.createElement("div"),n.style.display="flex",n.style.position="fixed",n.style.top="0",n.style.left="0",n.appendChild(d),n.appendChild(e),document.body.appendChild(n),o={height:0,baseline:0};try{n.style.alignItems="baseline",o.baseline=e.offsetTop-d.offsetTop,n.style.alignItems="flex-end",o.height=e.offsetTop-d.offsetTop}finally{document.body.removeChild(n)}return o},r.getFocusManager$$module$build$src$core$focus_manager=function(){return Yr.getFocusManager()},dr=function(e){return e&&typeof e.getFocusableElement=="function"&&typeof e.getFocusableTree=="function"&&typeof e.onNodeFocus=="function"&&typeof e.onNodeBlur=="function"&&typeof e.canBeFocused=="function"},mn=function(e){return dr(e)&&typeof e.id=="string"&&typeof e.workspace=="object"&&typeof e.select=="function"&&typeof e.unselect=="function"},ct=function(e,n){for(const o in n)n[o]!==null&&Array.isArray(n[o])?e[o]=ct(e[o]||[],n[o]):e[o]=n[o]!==null&&typeof n[o]=="object"?ct(e[o]||Object.create(null),n[o]):n[o];return e},Ot=function(e){return Zc[e]||null},et=function(){const e=[];for(const n in Zc)e.push(Zc[n]);return e},ot=function(e){Zc[e.id]=e},Mt=function(e){delete Zc[e.id]},m=function(){return NR},D=function(e){NR=e},ie=function(){const e=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();return e&&mn(e)?e:null},le=function(e){r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)},Be=function(e){const n=ie();let o,a,d,p;const v=new(ce(de.SELECTED))((o=n?.id)!=null?o:null,(a=e?.id)!=null?a:null,(p=(d=e?.workspace.id)!=null?d:n?.workspace.id)!=null?p:"");Y(v)},gt=function(){return xR},xn=function(e){xR=e},Bn=function(e){for(;e.options.parentWorkspace;)e=e.options.parentWorkspace;const n=e.getParentSvg(),o=e.getCachedParentSvgSize();var a=n.parentElement;if(a instanceof HTMLElement){var d=a.offsetWidth;a=a.offsetHeight,o.width!==d&&(n.setAttribute("width",d+"px"),e.setCachedParentSvgSize(d,null)),o.height!==a&&(n.setAttribute("height",a+"px"),e.setCachedParentSvgSize(null,a)),e.resize()}},Un=function(e,n){const o=Object.create(null),a=e.getDescendants(!0);n&&(e=e.getNextBlock())&&(e=a.indexOf(e),a.splice(e,a.length-e));for(let d=0,p;p=a[d];d++)o[p.type]?o[p.type]++:o[p.type]=1;return o},O=function(e){return function(){this.jsonInit(e)}},w=function(e){bR.defineBlocksWithJsonArrayInternal(e)},ee=function(e){r.defineBlocks$$module$build$src$core$common(r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(e))},r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(e){const n={};for(let o=0;o<e.length;o++){const a=e[o];if(!a){console.warn(`Block definition #${o} in JSON array is ${a}. Skipping`);continue}const d=a.type;d?n[d]={init:O(a)}:console.warn(`Block definition #${o} in JSON array is missing a type attribute. Skipping.`)}return n},r.defineBlocks$$module$build$src$core$common=function(e){for(const n of Object.keys(e)){const o=e[n];n in Ut&&console.warn(`Block definition "${n}" overwrites previous definition.`),Ut[n]=o}},ae=function(e){let n=m();const o=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedTree();for(const a of et())if(o===a){n=a;break}!H(e)&&n&&(!n.rendered||n.isFlyout||n.isVisible())&&xt.registry.onKeyDown(n,e)},Ae=function(e,n){return n=e.indexOf(n),n===-1?!1:(e.splice(n,1),!0)},Xe=function(e){if(BE)throw Error("CSS already injected");UE+=`
`+e},rt=function(e,n){BE||(BE=!0,e&&(e=n.replace(/[\\/]$/,""),n=UE.replace(/<<<PATH>>>/g,e),UE="",e=document.createElement("style"),e.id="blockly-common-style",n=document.createTextNode(n),e.appendChild(n),document.head.insertBefore(e,document.head.firstChild)))},wr=function(e){return kR.getSizeInternal(e)},Oi=function(e){if(Rr(e,"display")!=="none")return to(e);const n=e.style,o=n.display,a=n.visibility,d=n.position;n.visibility="hidden",n.position="absolute",n.display="inline";const p=e.offsetWidth;return e=e.offsetHeight,n.display=o,n.position=d,n.visibility=a,new lt(p,e)},to=function(e){return new lt(e.offsetWidth,e.offsetHeight)},Rr=function(e,n){return e=window.getComputedStyle(e),e[n]||e.getPropertyValue(n)},zs=function(e){const n=new xe(0,0);e=e.getBoundingClientRect();var o=document.documentElement;return o=new xe(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),n.x=e.left+o.x,n.y=e.top+o.y,n},bc=function(){const e=document.body,n=document.documentElement;return new xe(e.scrollLeft||n.scrollLeft,e.scrollTop||n.scrollTop)},yc=function(e){const n=parseFloat(Rr(e,"borderLeftWidth")),o=parseFloat(Rr(e,"borderRightWidth")),a=parseFloat(Rr(e,"borderTopWidth"));return e=parseFloat(Rr(e,"borderBottomWidth")),new it(a,e,n,o)},y=function(e,n,o){e=W(e,n,o),n.scrollLeft=e.x,n.scrollTop=e.y},W=function(e,n,o){var a=zs(e),d=zs(n),p=yc(n);const v=a.x-d.x-p.left;return a=a.y-d.y-p.top,d=to(e),e=n.clientWidth-d.width,d=n.clientHeight-d.height,p=n.scrollLeft,n=n.scrollTop,o?(p+=v-e/2,n+=a-d/2):(p+=Math.min(v,Math.max(v-e,0)),n+=Math.min(a,Math.max(a-d,0))),new xe(p,n)},P=function(e){const n=new xe(0,0);var o=e.x&&e.getAttribute("x");const a=e.y&&e.getAttribute("y");return o&&(n.x=parseInt(o)),a&&(n.y=parseInt(a)),(o=(o=e.getAttribute("transform"))&&o.match(wR))&&(n.x+=Number(o[1]),o[3]&&(n.y+=Number(o[3]))),(e=e.getAttribute("style"))&&e.includes("translate")&&(e=e.match(MR))&&(n.x+=Number(e[1]),e[3]&&(n.y+=Number(e[3]))),n},F=function(e){let n=0,o=0;for(;e;){const a=P(e);if(n+=a.x,o+=a.y,(" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;e=e.parentNode}return new xe(n,o)},z=function(){const e=bc();return new it(e.y,document.documentElement.clientHeight+e.y,e.x,document.documentElement.clientWidth+e.x)},K=function(){const e=document.documentElement,n=window;return new xe(n.pageXOffset||e.scrollLeft,n.pageYOffset||e.scrollTop)},Te=function(e,n){var o=n.x;n=n.y;const a=e.getInjectionDiv().getBoundingClientRect();return o=new xe(o-a.left,n-a.top),n=e.getOriginOffsetInPixels(),xe.difference(o,n).scale(1/e.scale)},Se=function(e,n){var o=n.scale(e.scale);n=o.x,o=o.y;const a=e.getInjectionDiv().getBoundingClientRect();return e=e.getOriginOffsetInPixels(),new xe(n+a.left+e.x,o+a.top+e.y)},Ee=function(e){({document:Xd=Xd,DOMParser:eu=eu,XMLSerializer:tu=tu}=e),Wd=new eu,GE=new tu},r.createElement$$module$build$src$core$utils$xml=function(e){return Xd.createElementNS(DR,e)},r.createTextNode$$module$build$src$core$utils$xml=function(e){return Xd.createTextNode(e)},r.textToDom$$module$build$src$core$utils$xml=function(e){let n=Wd.parseFromString(e,"text/xml");if(n&&n.documentElement&&!n.getElementsByTagName("parsererror").length)return n.documentElement;if((n=Wd.parseFromString(e,"text/html"))&&n.body.firstChild&&n.body.firstChild.nodeName.toLowerCase()==="xml")return n.body.firstChild;throw Error(`DOMParser was unable to parse: ${e}`)},ge=function(e){return $e(GE.serializeToString(e))},$e=function(e){return e.replace(qk,n=>`&#${n.charCodeAt(0)};`)},De=function(e){return e?((e instanceof Element||typeof e=="string")&&(e=Si(e),e=Dt(e)),Ge(e),e):null},Ge=function(e){const n=e.kind;if(e=e.contents,n&&n!==PR&&n!==VE)throw Error("Invalid toolbox kind "+n+". Please supply either "+PR+" or "+VE);if(!e)throw Error("Toolbox must have a contents attribute.")},ze=function(e){return e?e.contents?e.contents:Array.isArray(e)&&e.length>0&&!e[0].nodeType?e:Nt(e):[]},Ue=function(e){return FR.hasCategoriesInternal(e)},We=function(e){if(!e)return!1;const n=e.kind;return n?n===VE:!!e.contents.filter(o=>o.kind.toUpperCase()==="CATEGORY").length},nt=function(e){return e&&e.contents?!!e.contents.filter(function(n){return n.kind.toUpperCase()==="CATEGORY"}).length:!1},Dt=function(e){const n={contents:Nt(e)};return e instanceof Node&&pr(e,n),n},Nt=function(e){const n=[];let o=e.childNodes;o||(o=e);for(let a=0,d;d=o[a];a++){if(!d.tagName)continue;e={};const p=d.tagName.toUpperCase();e.kind=p,p==="BLOCK"?e.blockxml=d:d.childNodes&&d.childNodes.length>0&&(e.contents=Nt(d)),pr(d,e),n.push(e)}return n},pr=function(e,n){for(let o=0;o<e.attributes.length;o++){const a=e.attributes[o];a.nodeName.includes("css-")?(n.cssconfig=n.cssconfig||{},n.cssconfig[a.nodeName.replace("css-","")]=a.value):n[a.nodeName]=a.value}},Si=function(e){let n=null;if(e)if(typeof e=="string"){if(n=r.textToDom$$module$build$src$core$utils$xml(e),n.nodeName.toLowerCase()!=="xml")throw TypeError("Toolbox should be an <xml> document.")}else e instanceof Element&&(n=e);return n},Ys=function(e,n,o,a,d,p){const v=p.scrollbar&&p.scrollbar.canScrollVertically();return e.horizontal===ma.LEFT?(o=d.absoluteMetrics.left+o,v&&p.RTL&&(o+=sr.scrollbarThickness)):(o=d.absoluteMetrics.left+d.viewMetrics.width-n.width-o,v&&!p.RTL&&(o-=sr.scrollbarThickness)),e.vertical===bi.TOP?e=d.absoluteMetrics.top+a:(e=d.absoluteMetrics.top+d.viewMetrics.height-n.height-a,p.scrollbar&&p.scrollbar.canScrollHorizontally()&&(e-=sr.scrollbarThickness)),new it(e,e+n.height,o,o+n.width)},Ks=function(e,n){return{horizontal:n.toolboxMetrics.position===at.LEFT||e.horizontalLayout&&!e.RTL?ma.RIGHT:ma.LEFT,vertical:n.toolboxMetrics.position===at.BOTTOM?bi.TOP:bi.BOTTOM}},os=function(e,n,o,a){const d=e.left,p=e.right-e.left,v=e.bottom-e.top;for(let X=0;X<a.length;X++){const Ie=a[X];e.intersects(Ie)&&(e=o===uo.UP?Ie.top-v-n:Ie.bottom+n,e=new it(e,e+v,d,d+p),X=-1)}return e},Ri=function(e,n){i(Le.SERIALIZER,e,n)},ls=function(e){c(Le.SERIALIZER,e)},ea=function(e,{addCoordinates:n=!1,saveIds:o=!0}={}){const a=e.workspace,d=Object.create(null);return d.height=e.getSize().height,d.width=e.getSize().width,o&&(d.id=e.id),n&&(n=e.getRelativeToSurfaceXY(),d.x=a.RTL?a.getWidth()-n.x:n.x,d.y=n.y),e.getText()&&(d.text=e.getText()),e.isCollapsed()&&(d.collapsed=!0),e.isOwnEditable()||(d.editable=!1),e.isOwnMovable()||(d.movable=!1),e.isOwnDeletable()||(d.deletable=!1),d},kc=function(e,n,{recordUndo:o=!1}={}){const a=j();if(r.setRecordUndo$$module$build$src$core$events$utils(o),o=n.newComment(e.id),e.text!==void 0&&o.setText(e.text),e.x!==void 0||e.y!==void 0){const p=o.getRelativeToSurfaceXY();let v,X=(v=e.x)!=null?v:p.x;X=n.RTL?n.getWidth()-X:X;var d;n=(d=e.y)!=null?d:p.y,o.moveTo(new xe(X,n))}if(e.width!==void 0||e.height){d=o.getSize();let p,v;o.setSize(new lt((p=e.width)!=null?p:d.width,(v=e.height)!=null?v:d.height))}return e.collapsed!==void 0&&o.setCollapsed(e.collapsed),e.editable!==void 0&&o.setEditable(e.editable),e.movable!==void 0&&o.setMovable(e.movable),e.deletable!==void 0&&o.setDeletable(e.deletable),r.setRecordUndo$$module$build$src$core$events$utils(a),o},Zh=function(e,n){i(Le.PASTER,e,n)},jI=function(e){c(Le.PASTER,e)},JI=function(e){const n=e.workspace,o=e.getRelativeToSurfaceXY(),a=new xe(0,0),d=n.getTopComments(!1).filter(p=>p.id!==e.id).map(p=>p.getRelativeToSurfaceXY());for(;qI(xe.sum(o,a),d);)a.translate(n.RTL?-30:30,30);e.moveTo(xe.sum(o,a))},qI=function(e,n){return n.some(o=>Math.abs(o.x-e.x)<=1&&Math.abs(o.y-e.y)<=1)},js=function(e,n){e.setAttribute(ew,n)},_r=function(e,n,o){Array.isArray(o)&&(o=o.join(" ")),e.setAttribute(Qk+n,`${o}`)},wc=function(e){return e&&typeof e.saveState=="function"&&typeof e.loadState=="function"},bT=function(e){return yT(e),ZI()?(Qh(),Promise.resolve()):($a||($a=new Promise(n=>{JE=n,zR=window.requestAnimationFrame(()=>{Qh(),n()})})),$a)},Js=function(){return $a||Promise.resolve()},ro=function(e){e||window.cancelAnimationFrame(zR),Qh(e),!e&&JE&&JE()},ZI=function(){return ER},yT=function(e){KE.add(e),jE.set(e,r.getGroup$$module$build$src$core$events$utils());const n=e.getParent();n?yT(n):Jd.add(e)},Qh=function(e){const n=e?new Set([e]):new Set([...Jd].map(p=>p.workspace)),o=[...Jd].filter(QI).filter(p=>n.has(p.workspace));for(var a of o)wT(a);for(const p of n)p.resizeContents();for(var d of o)a=d.getRelativeToSurfaceXY(),d.updateComponentLocations(a);for(const p of o)d=r.getGroup$$module$build$src$core$events$utils(),(a=jE.get(p))&&r.setGroup$$module$build$src$core$events$utils(a),p.bumpNeighbours(),r.setGroup$$module$build$src$core$events$utils(d);for(const p of o)kT(p);e||($a=null)},kT=function(e){Jd.delete(e),KE.delete(e),jE.delete(e);for(const n of e.getChildren(!1))kT(n)},QI=function(e){return!e.isDisposed()&&!e.getParent()},wT=function(e){if(KE.has(e)&&e.initialized){for(const n of e.getChildren(!1))wT(n);e.renderEfficiently()}},Mc=function(e,n){qR(e,n)},eO=function(e=JR){qR=e},ed=function(e,n){QR(e,n)},tO=function(e=ZR){QR=e},td=function(e,n,o){tL(e,n,o)},rO=function(e=eL){tL=e},nO=function(e,n){nL(e,n)},sO=function(e=rL){nL=e},ta=function(e){return e&&typeof e.getProcedureDef=="function"},iO=function(e){return e&&typeof e.getProcedureCall=="function"&&typeof e.renameProcedure=="function"},MT=function(e){return e.getVariableModel!==void 0},Mr=function(e,n,o,a){e=e+" was deprecated in "+n+" and will be deleted in "+o+".",a&&(e+=`
Use `+a+" instead."),sL.has(e)||(sL.add(e),console.warn(e))},r.allUsedVarModels$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let o=0;o<e.length;o++){const a=e[o].getVarModels();if(a)for(let d=0;d<a.length;d++){const p=a[d];p.getId()&&n.add(p)}}return Array.from(n.values())},r.allDeveloperVariables$$module$build$src$core$variables=function(e){e=e.getAllBlocks(!1);const n=new Set;for(let a=0,d;d=e[a];a++){var o=d.getDeveloperVariables;if(o){o=o();for(let p=0;p<o.length;p++)n.add(o[p])}}return Array.from(n.values())},rd=function(e){return DT(e,!1)},DT=function(e,n=!0){return Ut.variables_set||Ut.variables_get||console.warn("There are no variable blocks, but there is a variable category."),n?(Mr("The XML return value of Blockly.Variables.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),oO(e)):(e.registerButtonCallback("CREATE_VARIABLE",function(o){jo(o.getTargetWorkspace())}),[{kind:"button",text:"%{BKY_NEW_VARIABLE}",callbackkey:"CREATE_VARIABLE"},...sd(e,e.getVariableMap().getVariablesOfType(""),!0)])},nd=function(e){return{VAR:{name:e.getName(),type:e.getType()}}},sd=function(e,n,o,a="variables_get",d="variables_set"){o&&(o=Ut.math_change),e=[];const p=n.slice(-1)[0];return p&&(Ut[d]&&e.push({kind:"block",type:d,gap:o?8:24,fields:nd(p)}),o&&e.push({kind:"block",type:"math_change",gap:Ut[a]?20:8,fields:nd(p),inputs:{DELTA:{shadow:{type:"math_number",fields:{NUM:1}}}}})),Ut[a]&&e.push(...n.sort(ra).map(v=>({kind:"block",type:a,gap:8,fields:nd(v)}))),e},oO=function(e){let n=[];const o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),e.registerButtonCallback("CREATE_VARIABLE",function(a){jo(a.getTargetWorkspace())}),n.push(o),e=PT(e),n=n.concat(e)},PT=function(e){e=e.getVariableMap().getVariablesOfType("");const n=[];if(e.length>0){var o=e[e.length-1];if(Ut.variables_set){var a=r.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","variables_set"),a.setAttribute("gap",Ut.math_change?"8":"24"),a.appendChild(Jo(o)),n.push(a)}if(Ut.math_change&&(a=r.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","math_change"),a.setAttribute("gap",Ut.variables_get?"20":"8"),a.appendChild(Jo(o)),o=r.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),a.appendChild(o),n.push(a)),Ut.variables_get){e.sort(ra);for(let d=0,p;p=e[d];d++)o=r.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","variables_get"),o.setAttribute("gap","8"),o.appendChild(Jo(p)),n.push(o)}}return n},FT=function(e){return oL.generateUniqueNameInternal(e)},lO=function(e){return id(QE.charAt(0),e.getVariableMap().getAllVariables().map(n=>n.getName()))},id=function(e,n){if(!n.length)return e;const o=QE;let a="",d=o.indexOf(e);for(;;){let p=!1;for(let v=0;v<n.length;v++)if(n[v].toLowerCase()===e){p=!0;break}if(!p)break;d++,d===o.length&&(d=0,a=`${Number(a)+1}`),e=o.charAt(d)+a}return e},jo=function(e,n,o){function a(p){od(r.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,p,function(v){if(v){var X=BT(v,e);if(X){if(X.getType()===d)var Ie=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",X.getName());else Ie=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,Ie=Ie.replace("%1",X.getName()).replace("%2",X.getType());Mc(Ie,function(){a(v)})}else e.getVariableMap().createVariable(v,d),n&&n(v)}else n&&n(null)})}const d=o||"";a("")},r.renameVariable$$module$build$src$core$variables=function(e,n,o){function a(d){const p=r.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",n.getName());od(p,d,function(v){if(v){var X=aO(v,n.getType(),e),Ie=UT(n.getName(),v,e);if(X||Ie){var je="";X?je=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",X.getName()).replace("%2",X.getType()):Ie&&(je=r.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",v).replace("%2",Ie)),Mc(je,function(){a(v)})}else e.getVariableMap().renameVariable(n,v),o&&o(v)}else o&&o(null)})}a("")},od=function(e,n,o){td(e,n,function(a){a&&(a=a.replace(/[\s\xa0]+/g," ").trim(),a===r.Msg$$module$build$src$core$msg.RENAME_VARIABLE||a===r.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(a=null),o(a)})},aO=function(e,n,o){o=o.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let a=0,d;d=o[a];a++)if(d.getName().toLowerCase()===e&&d.getType()!==n)return d;return null},BT=function(e,n){n=n.getVariableMap().getAllVariables(),e=e.toLowerCase();for(let o=0,a;a=n[o];o++)if(a.getName().toLowerCase()===e)return a;return null},UT=function(e,n,o){return o.getProcedureMap().getProcedures().length?cO(e,n,o):uO(e,n,o)},cO=function(e,n,o){e=e.toLowerCase(),n=n.toLowerCase(),o=o.getProcedureMap().getProcedures();for(const d of o){var a=d.getParameters().filter(MT).map(p=>p.getVariableModel().getName());if(a&&(o=a.some(p=>p.toLowerCase()===e),a=a.some(p=>p.toLowerCase()===n),o&&a))return d.getName()}return null},uO=function(e,n,o){e=e.toLowerCase(),n=n.toLowerCase(),o=o.getAllBlocks(!1);for(const d of o){if(!ta(d))continue;o=d.getProcedureDef();var a=o[1];const p=a.some(v=>v.toLowerCase()===e);if(a=a.some(v=>v.toLowerCase()===n),p&&a)return o[0]}return null},Jo=function(e){const n=r.createElement$$module$build$src$core$utils$xml("field");return n.setAttribute("name","VAR"),n.setAttribute("id",e.getId()),n.setAttribute("variabletype",e.getType()),e=r.createTextNode$$module$build$src$core$utils$xml(e.getName()),n.appendChild(e),n},r.getOrCreateVariablePackage$$module$build$src$core$variables=function(e,n,o,a){let d=r.getVariable$$module$build$src$core$variables(e,n,o,a);return d||(d=hO(e,n,o,a)),d},r.getVariable$$module$build$src$core$variables=function(e,n,o,a){const d=e.getPotentialVariableMap();let p=null;if(n&&(p=e.getVariableById(n),!p&&d&&(p=d.getVariableById(n)),p))return p;if(o){if(a===void 0)throw Error("Tried to look up a variable by name without a type");p=e.getVariable(o,a),!p&&d&&(p=d.getVariable(o,a))}return p},hO=function(e,n,o,a){const d=e.getVariableMap(),p=e.getPotentialVariableMap();return o||(o=FT(e.isFlyout?e.targetWorkspace:e)),p?p.createVariable(o,a,n??void 0):d.createVariable(o,a,n)},Dc=function(e,n){e=e.getAllVariables();const o=[];if(n.length!==e.length)for(let a=0;a<e.length;a++){const d=e[a];n.includes(d)||o.push(d)}return o},ra=function(e,n){return e.getName().localeCompare(n.getName(),void 0,{sensitivity:"base"})},na=function(e,n){const o=[];e=e.getAllBlocks(!1);for(let a=0;a<e.length;a++){const d=e[a].getVarModels();if(d)for(let p=0;p<d.length;p++)d[p].getId()===n&&o.push(e[a])}return o},r.deleteVariable$$module$build$src$core$variables=function(e,n,o){var a=n.getName();const d=na(e,n.getId());for(let p=d.length-1;p>=0;p--){const v=d[p];if(v.type==="procedures_defnoreturn"||v.type==="procedures_defreturn"){o=String(v.getFieldValue("NAME")),a=r.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",a).replace("%2",o),Mc(a);return}v===o&&d.splice(p,1)}o&&d.length||d.length>1?(a=r.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(d.length+(o&&!o.workspace.isFlyout?1:0))).replace("%2",a),ed(a,p=>{p&&n&&e.getVariableMap().deleteVariable(n)})):e.getVariableMap().deleteVariable(n)},as=function(e,{addCoordinates:n=!1,addInputBlocks:o=!0,addNextBlocks:a=!0,doFullSerialization:d=!0,saveIds:p=!0}={}){if(e.isInsertionMarker())return null;const v={type:e.type,id:p?e.id:void 0};return n&&_O(e,v),dO(e,v),fO(e,v,d),TO(e,v,d),pO(e,v,d),o&&EO(e,v,d,p),a&&gO(e,v,d,p),v},dO=function(e,n){e.isCollapsed()&&(n.collapsed=!0),e.isEnabled()||(n.disabledReasons=Array.from(e.getDisabledReasons())),e.isOwnDeletable()||(n.deletable=!1),e.isOwnMovable()||(n.movable=!1),e.isOwnEditable()||(n.editable=!1),e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&(n.inline=e.inputsInline),e.data&&(n.data=e.data)},_O=function(e,n){const o=e.workspace;e=e.getRelativeToSurfaceXY(),n.x=Math.round(o.RTL?o.getWidth()-e.x:e.x),n.y=Math.round(e.y)},fO=function(e,n,o){e.saveExtraState?(e=e.saveExtraState(o),e!==null&&(n.extraState=e)):e.mutationToDom&&(e=e.mutationToDom(),e!==null&&(n.extraState=Zs(e).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},TO=function(e,n,o){const a=Object.create(null);for(const d of e.getIcons())wc(d)&&(e=d.saveState(o))&&(a[d.getType().toString()]=e);Object.keys(a).length&&(n.icons=a)},pO=function(e,n,o){const a=Object.create(null);for(const d of e.getFields())d.isSerializable()&&(a[d.name]=d.saveState(o));Object.keys(a).length&&(n.fields=a)},EO=function(e,n,o,a){const d=Object.create(null);for(let p=0;p<e.inputList.length;p++){const v=e.inputList[p];if(!v.connection)continue;const X=HT(v.connection,o,a);X&&(d[v.name]=X)}Object.keys(d).length&&(n.inputs=d)},gO=function(e,n,o,a){e.nextConnection&&(e=HT(e.nextConnection,o,a))&&(n.next=e)},HT=function(e,n,o){const a=e.getShadowState(!0);if(e=e.targetBlock(),!a&&!e)return null;const d=Object.create(null);return a&&(d.shadow=a),e&&!e.isShadow()&&(d.block=as(e,{doFullSerialization:n,saveIds:o})),d},no=function(e,n,{recordUndo:o=!1}={}){return e=sa(e,n,{recordUndo:o}),n.rendered&&ro(),e},sa=function(e,n,{parentConnection:o,isShadow:a=!1,recordUndo:d=!1}={}){const p=j();r.setRecordUndo$$module$build$src$core$events$utils(d),(d=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0),r.disable$$module$build$src$core$events$utils();const v=n.getAllVariables();let X;try{X=GT(e,n,{parentConnection:o,isShadow:a})}finally{r.enable$$module$build$src$core$events$utils()}if(mO(n,v),he()&&Y(new(ce(de.BLOCK_CREATE))(X)),r.setGroup$$module$build$src$core$events$utils(d),r.setRecordUndo$$module$build$src$core$events$utils(p),n.rendered){const Ie=X;setTimeout(()=>{Ie.disposed||Ie.setConnectionTracking(!0)},1)}return X},GT=function(e,n,{parentConnection:o,isShadow:a=!1}={}){if(!e.type)throw new lL(e);const d=n.newBlock(e.type,e.id);return d.setShadow(a),$O(d,e),IO(d,e),OO(d,e),SO(o,d,e),RO(d,e),LO(d,e),AO(d,e),CO(d,e),vO(d,n.rendered),d},mO=function(e,n){if(he())for(e=Dc(e,n),n=0;n<e.length;n++){const o=e[n];Y(new(ce(de.VAR_CREATE))(o))}},$O=function(e,n){let o=n.x===void 0?0:n.x;n=n.y===void 0?0:n.y;const a=e.workspace;o=a.RTL?a.getWidth()-o:o,e.moveBy(o,n)},IO=function(e,n){if(n.collapsed&&e.setCollapsed(!0),n.deletable===!1&&e.setDeletable(!1),n.movable===!1&&e.setMovable(!1),n.editable===!1&&e.setEditable(!1),n.enabled===!1&&e.setDisabledReason(!0,us),Array.isArray(n.disabledReasons))for(const o of n.disabledReasons)e.setDisabledReason(!0,o);n.inline!==void 0&&e.setInputsInline(n.inline),n.data!==void 0&&(e.data=n.data)},OO=function(e,n){n.extraState&&(e.loadExtraState?e.loadExtraState(n.extraState):e.domToMutation&&e.domToMutation(r.textToDom$$module$build$src$core$utils$xml(n.extraState)))},SO=function(e,n,o){if(e){if(e.getSourceBlock().isShadow()&&!n.isShadow())throw new cL(o);if(e.type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var a=n.outputConnection;if(!a)throw new iu("output",n,o)}else if(a=n.previousConnection,!a)throw new iu("previous",n,o);if(!e.connect(a)){const d=n.workspace.connectionChecker;throw new aL(d.getErrorMessage(d.canConnectWithReason(a,e,!1),a,e),e.type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",n,o)}}},RO=function(e,n){if(n.icons){var o=Object.keys(n.icons);for(const d of o){o=n.icons[d];var a=e.getIcon(d);if(!a){if(a=_(Le.ICON,d,!1),!a)throw new uL(d,e,n);a=new a(e),e.addIcon(a)}wc(a)&&a.loadState(o)}}},LO=function(e,n){if(n.fields){var o=Object.keys(n.fields);for(let a=0;a<o.length;a++){const d=o[a],p=n.fields[d],v=e.getField(d);v?v.loadState(p):console.warn(`Ignoring non-existant field ${d} in block ${e.type}`)}}},AO=function(e,n){if(n.inputs){var o=Object.keys(n.inputs);for(let a=0;a<o.length;a++){const d=o[a],p=e.getInput(d);if(!p||!p.connection)throw new iu(d,e,n);VT(p.connection,n.inputs[d])}}},CO=function(e,n){if(n.next){if(!e.nextConnection)throw new iu("next",e,n);VT(e.nextConnection,n.next)}},VT=function(e,n){n.shadow&&e.setShadowState(n.shadow),n.block&&GT(n.block,e.getSourceBlock().workspace,{parentConnection:e})},vO=function(e,n){if(n){e.setConnectionTracking(!1),e.initSvg(),e.queueRender();for(const o of e.getIcons())o.onLocationChange(e.getRelativeToSurfaceXY())}else e.initModel()},qo=function(e){return typeof e.bubbleIsVisible=="function"&&typeof e.setBubbleVisible=="function"&&typeof e.getBubble=="function"},ld=function(e){return e*Math.PI/180},NO=function(e){return e*180/Math.PI},ia=function(e,n,o){if(o<e){const a=o;o=e,e=a}return Math.max(e,Math.min(n,o))},ad=function(){document.querySelector(".blocklyDropDownDiv")||(qt=document.createElement("div"),qt.className="blocklyDropDownDiv",qt.tabIndex=-1,(gt()||document.body).appendChild(qt),lu=document.createElement("div"),lu.className="blocklyDropDownContent",qt.appendChild(lu),r_=A(lu,"keydown",null,ae),dl=document.createElement("div"),dl.className="blocklyDropDownArrow",qt.appendChild(dl),qt.style.opacity="0",qt.style.transition="transform "+e_+"s, opacity "+e_+"s")},WT=function(e){rg=e},XT=function(){return ho},cd=function(){return lu},ud=function(){r_&&(k(r_),r_=null),qt.remove(),ad()},zT=function(e,n){qt.style.backgroundColor=e,qt.style.borderColor=n},xO=function(e,n,o,a,d=!0){return JT(KT(n),e,d,o,a)},YT=function(e,n,o,a=!0){return pL=!0,JT(jT(e),e,a,n,o)},KT=function(e){var n=e.getSvgRoot();const o=e.workspace.scale,a=e.height*o;return e=e.width*o,n=zs(n),new it(n.y,n.y+a,n.x,n.x+e)},jT=function(e){return e=e.getScaledBBox(),new it(e.top,e.bottom,e.left,e.right)},JT=function(e,n,o,a,d){const p=e.left+(e.right-e.left)/2,v=e.bottom;e=e.top,d&&(e+=d),d=n.getSourceBlock();let X=d.workspace;for(;X.options.parentWorkspace;)X=X.options.parentWorkspace;return WT(X.getParentSvg().parentNode),qT(n,d.RTL,p,v,p,e,o,a)},qT=function(e,n,o,a,d,p,v,X){return ho=e,hl=X||null,qt.style.direction=n?"rtl":"ltr",e=m(),fL=e.getRenderer().getClassName(),TL=e.getTheme().getClassName(),_e(qt,fL),_e(qt,TL),o=tp(o,a,d,p),v&&(t_=r.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(qt)),o},ZT=function(e,n,o,a){return e=Pc(e,o.left,o.right,a.width),{initialX:e.divX,initialY:n,finalX:e.divX,finalY:n+eg,arrowX:e.arrowX,arrowY:-9,arrowAtTop:!0,arrowVisible:!0}},QT=function(e,n,o,a){return e=Pc(e,o.left,o.right,a.width),{initialX:e.divX,initialY:n-a.height,finalX:e.divX,finalY:n-a.height-eg,arrowX:e.arrowX,arrowY:a.height-dL*2-Qd/2,arrowAtTop:!1,arrowVisible:!0}},bO=function(e,n,o){return e=Pc(e,n.left,n.right,o.width),{initialX:e.divX,initialY:0,finalX:e.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Pc=function(e,n,o,a){return n=ia(n,e-a/2,o-a),e=e-Qd/2-n,o=_L,e=ia(o,e,a-o-Qd),{arrowX:e,divX:n}},ep=function(){return!!ho},hd=function(e,n){return ho===e?(n?qs():dd(),!0):!1},dd=function(){qt.style.transform="translate(0, 0)",qt.style.opacity="0",tg=setTimeout(function(){qs()},e_*1e3),hl&&(hl(),hl=null)},qs=function(){ep()&&(tg&&clearTimeout(tg),hl&&(hl(),hl=null),ud(),ho=null,m().markFocused(),t_&&(t_(),t_=null))},tp=function(e,n,o,a){e=ng.getPositionMetrics(e,n,o,a),e.arrowVisible?(n=e.arrowX,o=e.arrowY,a=e.arrowAtTop?45:225,dl.style.display="",dl.style.transform=`translate(${n}px, ${o}px) rotate(${a}deg)`,dl.setAttribute("class","blocklyDropDownArrow")):dl.style.display="none",n=Math.floor(e.initialX),o=Math.floor(e.initialY),a=Math.floor(e.finalX);const d=Math.floor(e.finalY);return qt.style.left=n+"px",qt.style.top=o+"px",qt.style.display="block",qt.style.opacity="1",qt.style.transform="translate("+(a-n)+"px,"+(d-o)+"px)",!!e.arrowAtTop},rp=function(){if(ho){var e=ho.getSourceBlock();e=pL?jT(ho):KT(e);const n=e.left+(e.right-e.left)/2;tp(n,e.bottom,n,e.top)}else dd()},Fc=function(e){return e.length?e.reduce(function(n,o){return n.length<o.length?n:o}).length:0},np=function(e,n){if(!e.length)return 0;if(e.length===1)return e[0].length;let o=0;n=n||Fc(e);let a;for(a=0;a<n;a++){for(var d=e[0][a],p=1;p<e.length;p++)if(d!==e[p][a])return o;d===" "&&(o=a+1)}for(d=1;d<e.length;d++)if((p=e[d][a])&&p!==" ")return o;return n},sp=function(e,n){if(!e.length)return 0;if(e.length===1)return e[0].length;let o=0;n=n||Fc(e);let a;for(a=0;a<n;a++){for(var d=e[0].substr(-a-1,1),p=1;p<e.length;p++)if(d!==e[p].substr(-a-1,1))return o;d===" "&&(o=a+1)}for(d=1;d<e.length;d++)if((p=e[d].charAt(e[d].length-a-1))&&p!==" ")return o;return n},r.wrap$$module$build$src$core$utils$string=function(e,n){e=e.split(`
`);for(let o=0;o<e.length;o++)e[o]=yO(e[o],n);return e.join(`
`)},yO=function(e,n){if(e.length<=n)return e;const o=e.trim().split(/\s+/);for(var a=0;a<o.length;a++)o[a].length>n&&(n=o[a].length);var d=-1/0;let p,v=1;do{a=d,p=e,e=[],d=o.length/v;let X=1;for(let Ie=0;Ie<o.length-1;Ie++)X<(Ie+1.5)/d?(X++,e[Ie]=!0):e[Ie]=!1;e=ip(o,e,n),d=_d(o,e,n),e=kO(o,e),v++}while(d>a);return p},_d=function(e,n,o){const a=[0],d=[];for(var p=0;p<e.length;p++)a[a.length-1]+=e[p].length,n[p]===!0?(a.push(0),d.push(e[p].charAt(e[p].length-1))):n[p]===!1&&a[a.length-1]++;for(e=Math.max(...a),n=0,p=0;p<a.length;p++)n-=Math.pow(Math.abs(o-a[p]),1.5)*2,n-=Math.pow(e-a[p],1.5),".?!".includes(d[p])?n+=o/3:",;)]}".includes(d[p])&&(n+=o/4);return a.length>1&&a[a.length-1]<=a[a.length-2]&&(n+=.5),n},ip=function(e,n,o){let a=_d(e,n,o),d;for(let p=0;p<n.length-1;p++){if(n[p]===n[p+1])continue;const v=[].concat(n);v[p]=!v[p],v[p+1]=!v[p+1];const X=_d(e,v,o);X>a&&(a=X,d=v)}return d?ip(e,d,o):n},kO=function(e,n){const o=[];for(let a=0;a<e.length;a++)o.push(e[a]),n[a]!==void 0&&o.push(n[a]?`
`:" ");return o.join("")},r.isNumber$$module$build$src$core$utils$string=function(e){return/^\s*-?\d+(\.\d+)?\s*$/.test(e)},wO=function(e){n_=e},MO=function(){return n_},DO=function(){return au},PO=function(){return gr},oa=function(e){if(e=op(e)){for(e=e.tooltip;typeof e=="function";)e=e();if(typeof e!="string")throw Error("Tooltip function must return a string.");return e}return""},op=function(e){for(;e&&e.tooltip;){if(typeof e.tooltip=="string"||typeof e.tooltip=="function")return e;e=e.tooltip}return null},lp=function(){document.querySelector(".blocklyTooltipDiv")||(gr=document.createElement("div"),gr.className="blocklyTooltipDiv",(gt()||document.body).appendChild(gr))},Bc=function(e){e.mouseOverWrapper_=I(e,"pointerover",null,FO),e.mouseOutWrapper_=I(e,"pointerout",null,BO),e.addEventListener("pointermove",cp,!1)},ap=function(e){e&&(k(e.mouseOverWrapper_),k(e.mouseOutWrapper_),e.removeEventListener("pointermove",cp))},FO=function(e){Sa||(e=op(e.currentTarget),hs!==e&&(Li(),cu=null,hs=e),clearTimeout(gL))},BO=function(e){Sa||(gL=setTimeout(function(){cu=hs=null,Li()},1),clearTimeout(_l),_l=0)},cp=function(e){if(hs&&hs.tooltip&&!Sa)if(au){const n=sg-e.pageX;e=ig-e.pageY,Math.sqrt(n*n+e*e)>mL&&Li()}else cu!==hs&&(clearTimeout(_l),sg=e.pageX,ig=e.pageY,_l=setTimeout(VO,$L))},up=function(){cu=hs=null,Li()},Li=function(){au&&(au=!1,gr&&(gr.style.display="none")),_l&&(clearTimeout(_l),_l=0)},hp=function(){Li(),Sa=!0},dp=function(){Sa=!1},UO=function(){gr&&hs&&(typeof n_=="function"?n_(gr,hs):HO())},HO=function(){var e=oa(hs);e=r.wrap$$module$build$src$core$utils$string(e,EL),e=e.split(`
`);for(let n=0;n<e.length;n++){const o=document.createElement("div");o.appendChild(document.createTextNode(e[n])),gr.appendChild(o)}},GO=function(e){const n=document.documentElement.clientWidth,o=document.documentElement.clientHeight;let a=sg;a=e?a-(og+gr.offsetWidth):a+og;let d=ig+lg;return d+gr.offsetHeight>o+window.scrollY&&(d-=gr.offsetHeight+2*lg),e?a=Math.max(s_-window.scrollX,a):a+gr.offsetWidth>n+window.scrollX-2*s_&&(a=n-gr.offsetWidth-2*s_),{x:a,y:d}},VO=function(){if(!Sa&&(cu=hs,gr)){gr.textContent="",UO();var e=hs.RTL;gr.style.direction=e?"rtl":"ltr",gr.style.display="block",au=!0;var{x:n,y:o}=GO(e);gr.style.left=n+"px",gr.style.top=o+"px"}},_p=function(){return ag},WO=function(e){ag=e},fp=function(){return cg},XO=function(e){cg=e},Zo=function(e){e=`${e}`.toLowerCase().trim();var n=IL[e];if(n||(n=e.substring(0,2)==="0x"?"#"+e.substring(2):e,n=n[0]==="#"?n:"#"+n,/^#[0-9a-f]{6}$/.test(n)))return n;if(/^#[0-9a-f]{3}$/.test(n))return["#",n[1],n[1],n[2],n[2],n[3],n[3]].join("");var o=e.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(e=Number(o[1]),n=Number(o[2]),o=Number(o[3]),e>=0&&e<256&&n>=0&&n<256&&o>=0&&o<256)?Uc(e,n,o):null},Uc=function(e,n,o){return n=e<<16|n<<8|o,e<16?"#"+(16777216|n).toString(16).substr(1):"#"+n.toString(16)},fd=function(e){return e=Zo(e),e?(e=parseInt(e.substr(1),16),[e>>16,e>>8&255,e&255]):[0,0,0]},Td=function(e,n,o){let a=0,d=0,p=0;if(n===0)p=d=a=o;else{const v=Math.floor(e/60),X=e/60-v;e=o*(1-n);const Ie=o*(1-n*X);switch(n=o*(1-n*(1-X)),v){case 1:a=Ie,d=o,p=e;break;case 2:a=e,d=o,p=n;break;case 3:a=e,d=Ie,p=o;break;case 4:a=n,d=e,p=o;break;case 5:a=o,d=e,p=Ie;break;case 6:case 0:a=o,d=n,p=e}}return Uc(Math.floor(a),Math.floor(d),Math.floor(p))},Qo=function(e,n,o){return e=Zo(e),!e||(n=Zo(n),!n)?null:(e=fd(e),n=fd(n),Uc(Math.round(n[0]+o*(e[0]-n[0])),Math.round(n[1]+o*(e[1]-n[1])),Math.round(n[2]+o*(e[2]-n[2]))))},Tp=function(e){return Td(e,ag,cg*255)},pd=function(e,n,o){const a=[];var d=e.split("");d.push("");var p=0;e=[];let v=null;for(let je=0;je<d.length;je++){var X=d[je];if(p===0)if(X==="%")(p=e.join(""))&&a.push(p),e.length=0,p=1;else if(o&&X===`
`){const zt=e.join("");zt&&a.push(zt),e.length=0,a.push(X)}else e.push(X);else if(p===1)X==="%"?(e.push(X),p=0):n&&"0"<=X&&X<="9"?(p=2,v=X,(X=e.join(""))&&a.push(X),e.length=0):X==="{"?p=3:(e.push("%",X),p=0);else if(p===2)if("0"<=X&&X<="9")v+=X;else{var Ie=void 0;a.push(parseInt((Ie=v)!=null?Ie:"",10)),je--,p=0}else p===3&&(X===""?(e.splice(0,0,"%{"),je--,p=0):X!=="}"?e.push(X):(p=e.join(""),/[A-Z]\w*/i.test(p)?(X=p.toUpperCase(),(X=X.startsWith("BKY_")?X.substring(4):null)&&X in r.Msg$$module$build$src$core$msg?(p=r.Msg$$module$build$src$core$msg[X],typeof p=="string"?Array.prototype.push.apply(a,pd(p,n,o)):n?a.push(`${p}`):a.push(p)):a.push("%{"+p+"}")):a.push("%{"+p+"}"),p=e.length=0))}for((n=e.join(""))&&a.push(n),Ie=[],e.length=0,d=0;d<a.length;d++)typeof a[d]!="string"||o&&a[d]===`
`?((n=e.join(""))&&Ie.push(n),e.length=0,Ie.push(a[d])):e.push(a[d]);return(n=e.join(""))&&Ie.push(n),e.length=0,Ie},pp=function(e){return pd(e,!0,!0)},rr=function(e){return typeof e!="string"?e:(e=pd(e,!1,!1),e.length?String(e[0]):"")},zO=function(e){let n=!0;const o=r.Msg$$module$build$src$core$msg,a=e.match(/%{BKY_[A-Z]\w*}/gi);if(a)for(let d=0;d<a.length;d++){const p=a[d].toUpperCase();o[p.slice(6,-1)]===void 0&&(console.warn("No message string for "+a[d]+" in "+e),n=!1)}return n},la=function(e){const n=typeof e=="string"?rr(e):e;var o=Number(n);if(!isNaN(o)&&0<=o&&o<=360)return{hue:o,hex:Td(o,_p(),fp()*255)};if(o=Zo(n))return{hue:null,hex:o};throw o='Invalid colour: "'+n+'"',e!==n&&(o+=' (from "'+e+'")'),Error(o)},aa=function(){return Xn},YO=function(e){if(Xn=e,e===null){let n;(n=document.querySelector("."+ug))==null||n.remove()}},Ep=function(){const e=gt()||document.body,n=document.querySelector("div."+ug);n?Xn=n:(Xn=document.createElement("div"),Xn.className=ug,Xn.tabIndex=-1),A(Xn,"keydown",null,ae),e.appendChild(Xn)},Ed=function(e,n,o,a,d=!0){if(ca(),Ra=e,i_=o,o=Xn){if(o.style.direction=n?"rtl":"ltr",o.style.display="block",!a&&e instanceof Lt){let X;a=(X=e.getSourceBlock())==null?void 0:X.workspace}var p;OL=(p=a)!=null?p:null;var v;e=(v=a)!=null?v:m(),La=e.getRenderer().getClassName(),Aa=e.getTheme().getClassName(),La&&_e(o,La),Aa&&_e(o,Aa),d&&(o_=r.getFocusManager$$module$build$src$core$focus_manager().takeEphemeralFocus(o))}},ca=function(){if(gp()){Ra=null;var e=Xn;e&&(e.style.display="none",e.style.left="",e.style.top="",i_&&(i_(),i_=null),e.textContent="",La&&(ke(e,La),La=""),Aa&&(ke(e,Aa),Aa=""),m().markFocused(),o_&&(o_(),o_=null))}},gp=function(){return!!Ra},el=function(e){Ra===e&&ca()},Hc=function(e){let n=OL===null,o=e;for(;!n&&o;){if(o===e){n=!0;break}o=e.options.parentWorkspace}n&&ca()},mp=function(e,n,o){Xn.style.left=e+"px",Xn.style.top=n+"px",Xn.style.height=o+"px"},$p=function(e,n,o,a){const d=jO(e,n,o);e=KO(e,n,o,a),d<0?mp(e,0,o.height+d):mp(e,d,o.height)},KO=function(e,n,o,a){return a?Math.min(Math.max(n.right-o.width,e.left),e.right-o.width):Math.max(Math.min(n.left,e.right-o.width),e.left)},jO=function(e,n,o){return n.bottom+o.height>=e.bottom?n.top-o.height:n.bottom},JO=function(e){return!(e==null||!e.repositionForWindowResize)},Ip=function(){JO(Ra)&&Ra.repositionForWindowResize()||ca()},qO=function(){return l_},Op=function(e){l_=e},ua=function(e,n,o,a,d){if(Ed(SL,o,Sp,a),n.length){d||(e instanceof PointerEvent?d=new xe(e.clientX,e.clientY):(console.warn("Context menu opened with keyboard but no location given"),d=new xe(0,0)));var p=ZO(n,o,e,d);a_=p,QO(p,o,d),setTimeout(function(){p.focus()},1),l_=null}else Gc()},ZO=function(e,n,o,a){const d=new YE;d.setRole(Vn.MENU);for(let p=0;p<e.length;p++){const v=e[p];if(v.separator){d.addChild(new XR);continue}const X=new Kd(v.text);X.setRightToLeft(n),X.setRole(Vn.MENUITEM),d.addChild(X),X.setEnabled(v.enabled),v.enabled&&X.onAction(function(Ie,je){Gc(),requestAnimationFrame(()=>{setTimeout(()=>{v.callback(v.scope,o,je,a)},0)})},{})}return d},QO=function(e,n,o){const a=z();o=new it(o.y+a.top,o.y+a.top,o.x+a.left,o.x+a.left),eS(e);const d=e.getSize();n&&(o.left+=d.width,o.right+=d.width,a.left+=d.width,a.right+=d.width),$p(a,o,d,n),e.focus()},eS=function(e){var n=aa();if(!n)throw Error("Attempting to create a context menu when widget div is null");n=e.render(n),_e(n,"blocklyContextMenu"),A(n,"contextmenu",null,tS),e.focus()},tS=function(e){e.preventDefault(),e.stopPropagation()},Gc=function(){el(SL),l_=null},Sp=function(){a_&&(a_.dispose(),a_=null)},r.callbackFactory$$module$build$src$core$contextmenu=function(e,n){return()=>{r.disable$$module$build$src$core$events$utils();let o;try{o=n instanceof Element?tl(n,e.workspace):sa(n,e.workspace);const a=e.getRelativeToSurfaceXY();a.x=e.RTL?a.x-r.config$$module$build$src$core$config.snapRadius:a.x+r.config$$module$build$src$core$config.snapRadius,a.y+=r.config$$module$build$src$core$config.snapRadius*2,o.moveBy(a.x,a.y)}finally{r.enable$$module$build$src$core$events$utils()}return he()&&!o.isShadow()&&Y(new(ce(de.BLOCK_CREATE))(o)),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(o),o}},Rp=function(e,n){return n=x(n,e.getParentSvg(),e.getInverseScreenCTM()),n.x/=e.scale,n.y/=e.scale,n},gd=function(e,n,o){n=Rp(e,n),LL.set(e,xe.difference(o,n))},md=function(e,n){if(n=Rp(e,n),e=LL.get(e),!e)throw Error("Drag not initialized");return xe.sum(e,n)},rS=function(e,n=!1){const o=r.createElement$$module$build$src$core$utils$xml("xml");var a=Lp(r.allUsedVarModels$$module$build$src$core$variables(e));a.hasChildNodes()&&o.appendChild(a);for(const d of e.getTopComments())o.appendChild(Vc(d,n));for(e=e.getTopBlocks(!0),a=0;a<e.length;a++)o.appendChild(Wc(e[a],n));return o},Vc=function(e,n=!1){const o=r.createElement$$module$build$src$core$utils$xml("comment");n||o.setAttribute("id",e.id),n=e.workspace;const a=e.getRelativeToSurfaceXY().clone();return a.x=n.RTL?n.getWidth()-a.x:a.x,o.setAttribute("x",`${a.x}`),o.setAttribute("y",`${a.y}`),o.setAttribute("w",`${e.getSize().width}`),o.setAttribute("h",`${e.getSize().height}`),e.getText()&&(o.textContent=e.getText()),e.isCollapsed()&&o.setAttribute("collapsed","true"),e.isOwnEditable()||o.setAttribute("editable","false"),e.isOwnMovable()||o.setAttribute("movable","false"),e.isOwnDeletable()||o.setAttribute("deletable","false"),o},Lp=function(e){const n=r.createElement$$module$build$src$core$utils$xml("variables");for(let o=0;o<e.length;o++){const a=e[o],d=r.createElement$$module$build$src$core$utils$xml("variable");d.appendChild(r.createTextNode$$module$build$src$core$utils$xml(a.getName())),a.getType()&&d.setAttribute("type",a.getType()),d.id=a.getId(),n.appendChild(d)}return n},Wc=function(e,n){if(e.isInsertionMarker()&&(e=e.getChildren(!1)[0],!e))return new DocumentFragment;let o=0;if(e.workspace.RTL&&(o=e.workspace.getWidth()),n=so(e,n),xp(n)){const a=e.getRelativeToSurfaceXY();n.setAttribute("x",String(Math.round(e.workspace.RTL?o-a.x:a.x))),n.setAttribute("y",String(Math.round(a.y)))}return n},nS=function(e){if(e.isSerializable()){const n=r.createElement$$module$build$src$core$utils$xml("field");return n.setAttribute("name",e.name||""),e.toXml(n)}return null},sS=function(e,n){for(const o of e.getFields())(e=nS(o))&&n.appendChild(e)},so=function(e,n){if(e.isInsertionMarker())return(n=e.getChildren(!1)[0])?so(n):new DocumentFragment;const o=r.createElement$$module$build$src$core$utils$xml(e.isShadow()?"shadow":"block");if(o.setAttribute("type",e.type),n||(o.id=e.id),e.mutationToDom){var a=e.mutationToDom();a&&(a.hasChildNodes()||a.hasAttributes())&&o.appendChild(a)}if(sS(e,o),a=e.getCommentText()){var d=e.getIcon(Er.COMMENT),p=d.getBubbleSize(),v=d.bubbleIsVisible();d=d.getBubbleLocation();var X=r.createElement$$module$build$src$core$utils$xml("comment");X.appendChild(r.createTextNode$$module$build$src$core$utils$xml(a)),X.setAttribute("pinned",`${v}`),X.setAttribute("h",`${p.height}`),X.setAttribute("w",`${p.width}`),d&&(X.setAttribute("x",`${e.workspace.RTL?e.workspace.getWidth()-(d.x+p.width):d.x}`),X.setAttribute("y",`${d.y}`)),o.appendChild(X)}for(e.data&&(a=r.createElement$$module$build$src$core$utils$xml("data"),a.appendChild(r.createTextNode$$module$build$src$core$utils$xml(e.data)),o.appendChild(a)),a=0;a<e.inputList.length;a++){p=e.inputList[a];var Ie=void 0;v=!0,p.type!==r.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&p.type!==r.inputTypes$$module$build$src$core$inputs$input_types.END_ROW&&(d=p.connection.targetBlock(),p.type===r.inputTypes$$module$build$src$core$inputs$input_types.VALUE?Ie=r.createElement$$module$build$src$core$utils$xml("value"):p.type===r.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(Ie=r.createElement$$module$build$src$core$utils$xml("statement")),X=p.connection.getShadowDom(),!X||d&&d.isShadow()||Ie.appendChild(Ap(X,n)),d&&(d=so(d,n),d.nodeType===Ni.ELEMENT_NODE&&(Ie.appendChild(d),v=!1)),Ie.setAttribute("name",p.name),v||o.appendChild(Ie))}e.inputsInline!==void 0&&e.inputsInline!==e.inputsInlineDefault&&o.setAttribute("inline",String(e.inputsInline)),e.isCollapsed()&&o.setAttribute("collapsed","true"),e.isEnabled()||o.setAttribute("disabled-reasons",Array.from(e.getDisabledReasons()).map(encodeURIComponent).join(",")),e.isOwnDeletable()||o.setAttribute("deletable","false"),e.isOwnMovable()||o.setAttribute("movable","false"),e.isOwnEditable()||o.setAttribute("editable","false"),Ie=e.getNextBlock();let je;return Ie&&(a=so(Ie,n),a.nodeType===Ni.ELEMENT_NODE&&(je=r.createElement$$module$build$src$core$utils$xml("next"),je.appendChild(a),o.appendChild(je))),e=e.nextConnection&&e.nextConnection.getShadowDom(),!e||Ie&&Ie.isShadow()||je.appendChild(Ap(e,n)),o},Ap=function(e,n){let o=e=e.cloneNode(!0),a;for(;o;)if(n&&o.nodeName==="shadow"&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;){a=o,o=o.parentNode;let d;a.nodeType===Ni.TEXT_NODE&&a.data.trim()===""&&((d=o)==null?void 0:d.firstChild)!==a&&ve(a)}o&&(a=o,o=o.nextSibling,a.nodeType===Ni.TEXT_NODE&&a.data.trim()===""&&ve(a))}return e},Zs=function(e){return ge(e).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},iS=function(e){e=Zs(e).split("<");let n="";for(let o=1;o<e.length;o++){const a=e[o];a[0]==="/"&&(n=n.substring(2)),e[o]=n+"<"+a,a[0]!=="/"&&a.slice(-2)!=="/>"&&(n+="  ")}return e=e.join(`
`),e=e.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),e.replace(/^\n/,"")},oS=function(e,n){return n.setResizesEnabled(!1),n.clear(),e=r.domToWorkspace$$module$build$src$core$xml(e,n),n.setResizesEnabled(!0),e},r.domToWorkspace$$module$build$src$core$xml=function(e,n){let o=0;n.RTL&&(o=n.getWidth());const a=[];tr();const d=r.getGroup$$module$build$src$core$events$utils();d||r.setGroup$$module$build$src$core$events$utils(!0),n.setResizesEnabled&&n.setResizesEnabled(!1);let p=!0;try{for(let v=0,X;X=e.childNodes[v];v++){const Ie=X.nodeName.toLowerCase(),je=X;if(Ie==="block"||Ie==="shadow"&&!j()){const zt=tl(je,n);a.push(zt.id);let yt;const jr=parseInt((yt=je.getAttribute("x"))!=null?yt:"10",10);let Pi;const hi=parseInt((Pi=je.getAttribute("y"))!=null?Pi:"10",10);isNaN(jr)||isNaN(hi)||zt.moveBy(n.RTL?o-jr:jr,hi,["create"]),p=!1}else{if(Ie==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(Ie==="comment")Cp(je,n);else if(Ie==="variables"){if(p)vp(je,n);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");p=!1}}}}finally{r.setGroup$$module$build$src$core$events$utils(d),n.setResizesEnabled&&n.setResizesEnabled(!0),n.rendered&&ro(),hr()}return Y(new(ce(de.FINISHED_LOADING))(n)),a},Cp=function(e,n){var o;const a=(o=e.getAttribute("id"))!=null?o:void 0;o=n.rendered?new ki(n,a):new d_(n,a);var d;o.setText((d=e.textContent)!=null?d:"");var p;d=parseInt((p=e.getAttribute("x"))!=null?p:"",10);let v;p=parseInt((v=e.getAttribute("y"))!=null?v:"",10),isNaN(d)||isNaN(p)||(d=n.RTL?n.getWidth()-d:d,o.moveTo(new xe(d,p)));var X;n=parseInt((X=e.getAttribute("w"))!=null?X:"",10);let Ie;return X=parseInt((Ie=e.getAttribute("h"))!=null?Ie:"",10),isNaN(n)||isNaN(X)||o.setSize(new lt(n,X)),e.getAttribute("collapsed")==="true"&&o.setCollapsed(!0),e.getAttribute("editable")==="false"&&o.setEditable(!1),e.getAttribute("movable")==="false"&&o.setMovable(!1),e.getAttribute("deletable")==="false"&&o.setDeletable(!1),o},lS=function(e,n){if(!n.getBlocksBoundingBox)return r.domToWorkspace$$module$build$src$core$xml(e,n);var o=n.getBlocksBoundingBox();if(e=r.domToWorkspace$$module$build$src$core$xml(e,n),o&&o.top!==o.bottom){var a=o.bottom;o=n.RTL?o.right:o.left;var d=1/0;let p=-1/0,v=1/0;for(let X=0;X<e.length;X++){const Ie=n.getBlockById(e[X]).getRelativeToSurfaceXY();Ie.y<v&&(v=Ie.y),Ie.x<d&&(d=Ie.x),Ie.x>p&&(p=Ie.x)}for(a=a-v+10,o=n.RTL?o-p:o-d,d=0;d<e.length;d++)n.getBlockById(e[d]).moveBy(o,a,["create"])}return e},r.domToBlock$$module$build$src$core$xml=function(e,n){return e=tl(e,n),n.rendered&&ro(),e},tl=function(e,n){r.disable$$module$build$src$core$events$utils();var o=n.getAllVariables();let a;try{if(a=$d(e,n),n.rendered){const d=a,p=a.getDescendants(!1);d.setConnectionTracking(!1);for(let v=p.length-1;v>=0;v--)p[v].initSvg();for(let v=p.length-1;v>=0;v--)p[v].queueRender();setTimeout(function(){d.disposed||d.setConnectionTracking(!0)},1),n.resizeContents()}else{const d=a.getDescendants(!1);for(let p=d.length-1;p>=0;p--)d[p].initModel()}}finally{r.enable$$module$build$src$core$events$utils()}if(he()){for(e=Dc(n,o),n=0;n<e.length;n++)o=e[n],Y(new(ce(de.VAR_CREATE))(o));Y(new(ce(de.BLOCK_CREATE))(a))}return a},vp=function(e,n){for(let a=0;a<e.children.length;a++){var o=e.children[a];const d=o.getAttribute("type"),p=o.getAttribute("id");if(o=o.textContent,!o)break;let v;n.getVariableMap().createVariable(o,(v=d)!=null?v:void 0,p)}},aS=function(e){const n={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let o=0;o<e.children.length;o++){const a=e.children[o];if(a.nodeType!==Ni.TEXT_NODE)switch(a.nodeName.toLowerCase()){case"mutation":n.mutation.push(a);break;case"comment":n.comment.push(a);break;case"data":n.data.push(a);break;case"title":case"field":n.field.push(a);break;case"value":case"statement":n.input.push(a);break;case"next":n.next.push(a);break;default:console.warn("Ignoring unknown tag: "+a.nodeName)}}return n},cS=function(e,n){let o=!1;for(let a=0;a<e.length;a++){const d=e[a];n.domToMutation&&(n.domToMutation(d),n.initSvg&&(o=!0))}return o},uS=function(e,n){for(let o=0;o<e.length;o++){const a=e[o],d=a.textContent,p=a.getAttribute("pinned")==="true";let v;const X=parseInt((v=a.getAttribute("w"))!=null?v:"50",10);let Ie;const je=parseInt((Ie=a.getAttribute("h"))!=null?Ie:"50",10);let zt,yt=parseInt((zt=a.getAttribute("x"))!=null?zt:"",10),jr;const Pi=parseInt((jr=a.getAttribute("y"))!=null?jr:"",10);n.setCommentText(d);const hi=n.getIcon(Er.COMMENT);isNaN(X)||isNaN(je)||hi.setBubbleSize(new lt(X,je)),hi.setBubbleVisible(p),setTimeout(()=>{isNaN(yt)||isNaN(Pi)||(yt=n.workspace.RTL?n.workspace.getWidth()-(yt+X):yt,hi.setBubbleLocation(new xe(yt,Pi))),hi.setBubbleVisible(p)},1)}},hS=function(e,n){for(let o=0;o<e.length;o++)n.data=e[o].textContent},dS=function(e,n){for(let o=0;o<e.length;o++){const a=e[o],d=a.getAttribute("name");d?TS(n,d,a):console.warn(`Ignoring unnamed field in block ${n.type}`)}},Np=function(e){let n=null,o=null;for(let a=0;a<e.childNodes.length;a++){const d=e.childNodes[a];xp(d)&&(d.nodeName.toLowerCase()==="block"?n=d:d.nodeName.toLowerCase()==="shadow"&&(o=d))}return{childBlockElement:n,childShadowElement:o}},_S=function(e,n,o,a){for(let p=0;p<e.length;p++){var d=e[p];const v=d.getAttribute("name"),X=v?o.getInput(v):null;if(!X){console.warn("Ignoring non-existent input "+v+" in block "+a);break}if(d=Np(d),d.childBlockElement){if(!X.connection)throw TypeError("Input connection does not exist.");$d(d.childBlockElement,n,X.connection,!1)}if(d.childShadowElement){let Ie;(Ie=X.connection)==null||Ie.setShadowDom(d.childShadowElement)}}},fS=function(e,n,o){for(let a=0;a<e.length;a++){const d=Np(e[a]);if(d.childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");$d(d.childBlockElement,n,o.nextConnection,!0)}d.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(d.childShadowElement)}},$d=function(e,n,o,a){var d;const p=e.getAttribute("type");if(!p)throw TypeError("Block type unspecified: "+e.outerHTML);var v=(d=e.getAttribute("id"))!=null?d:void 0;d=n.newBlock(p,v),v=aS(e);const X=cS(v.mutation,d);if(uS(v.comment,d),hS(v.data,d),o)if(a)if(d.previousConnection)o.connect(d.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(d.outputConnection)o.connect(d.outputConnection);else if(d.previousConnection)o.connect(d.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(dS(v.field,d),_S(v.input,n,d,p),fS(v.next,n,d),X&&d.initSvg(),(n=e.getAttribute("inline"))&&d.setInputsInline(n==="true"),(n=e.getAttribute("disabled"))&&d.setDisabledReason(n==="true"||n==="disabled",us),n=e.getAttribute("disabled-reasons"),n!==null)for(var Ie of n.split(","))d.setDisabledReason(!0,decodeURIComponent(Ie));if((Ie=e.getAttribute("deletable"))&&d.setDeletable(Ie==="true"),(Ie=e.getAttribute("movable"))&&d.setMovable(Ie==="true"),(Ie=e.getAttribute("editable"))&&d.setEditable(Ie==="true"),(Ie=e.getAttribute("collapsed"))&&d.setCollapsed(Ie==="true"),e.nodeName.toLowerCase()==="shadow"){for(e=d.getChildren(!1),Ie=0;Ie<e.length;Ie++)if(!e[Ie].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");d.setShadow(!0)}return d},TS=function(e,n,o){const a=e.getField(n);a?a.fromXml(o):console.warn("Ignoring non-existent field "+n+" in block "+e.type)},pS=function(e){for(let n=0;n<e.childNodes.length;n++){const o=e.childNodes[n];if(o.nodeName.toLowerCase()==="next"){e.removeChild(o);break}}},xp=function(e){return e.nodeType===Ni.ELEMENT_NODE},Qs=function(e,n){i(Le.FIELD,e,n,!0)},ES=function(e){c(Le.FIELD,e)},r.fromJson$$module$build$src$core$field_registry=function(e){return xL.fromJsonInternal(e)},gS=function(e){const n=f(Le.FIELD,e.type);return n?n.fromJson(e):(console.warn("Blockly could not create a field of type "+e.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},ha=function(e){return e&&typeof e=="object"&&"src"in e&&typeof e.src=="string"&&"alt"in e&&typeof e.alt=="string"&&"width"in e&&typeof e.width=="number"&&"height"in e&&typeof e.height=="number"},r.register$$module$build$src$core$extensions=function(e,n){if(typeof e!="string"||e.trim()==="")throw Error('Error: Invalid extension name "'+e+'"');if(Ca[e])throw Error('Error: Extension "'+e+'" is already registered.');if(typeof n!="function")throw Error('Error: Extension "'+e+'" must be a function');Ca[e]=n},r.registerMixin$$module$build$src$core$extensions=function(e,n){if(!n||typeof n!="object")throw Error('Error: Mixin "'+e+'" must be a object');r.register$$module$build$src$core$extensions(e,function(){this.mixin(n)})},r.registerMutator$$module$build$src$core$extensions=function(e,n,o,a){const d='Error when registering mutator "'+e+'": ';kp(d,n);const p=yp(n,d);if(o&&typeof o!="function")throw Error(d+'Extension "'+e+'" is not a function');r.register$$module$build$src$core$extensions(e,function(){p&&this.setMutator(new r.MutatorIcon$$module$build$src$core$icons$mutator_icon(a||[],this)),this.mixin(n),o&&o.apply(this)})},mS=function(e){bp(e)?delete Ca[e]:console.warn('No extension mapping for name "'+e+'" found to unregister')},bp=function(e){return!!Ca[e]},Id=function(e,n,o){const a=Ca[e];if(typeof a!="function")throw Error('Error: Extension "'+e+'" not found.');let d;if(o?$S(e,n):d=Sd(n),a.apply(n),o)kp('Error after applying mutator "'+e+'": ',n);else if(!SS(d,n))throw Error('Error when applying extension "'+e+'": mutation properties changed when applying a non-mutator extension.')},$S=function(e,n){if(Sd(n).length)throw Error('Error: tried to apply mutation "'+e+'" to a block that already has mutator functions.  Block id: '+n.id)},IS=function(e,n){return Od(e.mutationToDom,e.domToMutation,n+" mutationToDom/domToMutation")},OS=function(e,n){return Od(e.saveExtraState,e.loadExtraState,n+" saveExtraState/loadExtraState")},yp=function(e,n){return Od(e.compose,e.decompose,n+" compose/decompose")},Od=function(e,n,o){if(e&&n){if(typeof e!="function"||typeof n!="function")throw Error(o+" must be a function");return!0}if(!e&&!n)return!1;throw Error(o+"Must have both or neither functions")},kp=function(e,n){const o=IS(n,e),a=OS(n,e);if(!o&&!a)throw Error(e+"Mutations must contain either XML hooks, or JSON hooks, or both");yp(n,e)},Sd=function(e){const n=[];return e.domToMutation!==void 0&&n.push(e.domToMutation),e.mutationToDom!==void 0&&n.push(e.mutationToDom),e.saveExtraState!==void 0&&n.push(e.saveExtraState),e.loadExtraState!==void 0&&n.push(e.loadExtraState),e.compose!==void 0&&n.push(e.compose),e.decompose!==void 0&&n.push(e.decompose),n},SS=function(e,n){if(n=Sd(n),n.length!==e.length)return!1;for(let o=0;o<n.length;o++)if(e[o]!==n[o])return!1;return!0},RS=function(e){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")e();else{const n=setInterval(function(){document.readyState==="complete"&&(clearInterval(n),e())},10)}},r.buildTooltipForDropdown$$module$build$src$core$extensions=function(e,n){const o=[];return function(){o.includes(this.type)||(LS(this,e,n),o.push(this.type)),this.setTooltip(function(){const a=String(this.getFieldValue(e));return rr(n[a])}.bind(this))}},LS=function(e,n,o){var a=e.getField(n);if(a instanceof Kr&&!a.isOptionListDynamic()){a=a.getOptions();for(const d of a)d!==Kr.SEPARATOR&&([,a]=d,o[a]===void 0&&console.warn(`No tooltip mapping for value ${a} of field ${n} of block type ${e.type}.`))}},r.buildTooltipWithFieldText$$module$build$src$core$extensions=function(e,n){return function(){this.setTooltip(function(){const o=this.getField(n);return rr(e).replace("%1",o?o.getText():"")}.bind(this))}},AS=function(){const e=this.tooltip;this.setTooltip(function(){const n=this.getParent();return n&&n.getInputsInline()&&n.tooltip||e}.bind(this))},Je=function(e,n){return" "+e+","+n+" "},bn=function(e,n){return" "+e+n.join("")},Dr=function(e,n){return" M "+e+","+n+" "},Jt=function(e,n){return" m "+e+","+n+" "},ei=function(e,n){return" l "+e+","+n+" "},da=function(e){return" l"+e.join("")},qe=function(e,n){return" "+e+" "+n+" "},nr=function(e,n,o,a){return e+" "+o+" "+o+" "+n+a},CS=function(e,n){if(!e||!n)throw Error("Cannot connect null connections.");e.targetConnection=n,n.targetConnection=e},vS=function(e,n){let o=null;n=n.outputConnection;const a=n?.getConnectionChecker();for(let d=0,p;p=e.inputList[d];d++){const v=p.connection;let X;if(v&&((X=a)!=null&&X.canConnect(n,v,!1))){if(o)return null;o=v}}return o},NS=function(e,n){let o;for(;o=vS(e,n);)if(e=o.targetBlock(),!e||e.isShadow())return o;return null},wp=function(e){return dr(e)&&typeof e.getType=="function"&&typeof e.initView=="function"&&typeof e.dispose=="function"&&typeof e.getWeight=="function"&&typeof e.getSize=="function"&&typeof e.applyColour=="function"&&typeof e.hideForInsertionMarker=="function"&&typeof e.updateEditable=="function"&&typeof e.updateCollapsed=="function"&&typeof e.isShownWhenCollapsed=="function"&&typeof e.setOffsetInBlock=="function"&&typeof e.onLocationChange=="function"&&typeof e.onClick=="function"},xS=function(e){return wp(e)&&qo(e)&&wc(e)&&typeof e.setText=="function"&&typeof e.getText=="function"&&typeof e.setBubbleSize=="function"&&typeof e.getBubbleSize=="function"&&typeof e.setBubbleLocation=="function"&&typeof e.getBubbleLocation=="function"&&e.getType()===Er.COMMENT},Rd=function(e){if(!(e.getDescendants(!1).length>100)){var n=e.workspace,o=e.getSvgRoot();n.getAudioManager().play("delete");var a=e.getRelativeToSurfaceXY(),d=o.cloneNode(!0);d.setAttribute("transform","translate("+a.x+","+a.y+")");var p;(p=n.getLayerManager())==null||p.appendToAnimationLayer({getSvgRoot:()=>d}),Mp(d,{x:a.x,y:a.y,width:e.width,height:e.height},n.RTL,new Date)}},Mp=function(e,n,o,a){const d=(new Date().getTime()-a.getTime())/150;d>1?ve(e):(e.setAttribute("transform","translate("+(n.x+(o?-1:1)*n.width/2*d)+","+(n.y+n.height/2*d)+") scale("+(1-d)+")"),setTimeout(Mp,10,e,n,o,a))},Dp=function(e){var n=e.workspace;const o=n.scale;if(n.getAudioManager().play("click"),!(o<1)){var a=n.getSvgXY(e.getSvgRoot());e.outputConnection?(a.x+=(e.RTL?3:-3)*o,a.y+=13*o):e.previousConnection&&(a.x+=(e.RTL?-23:23)*o,a.y+=3*o);var d=b(ue.CIRCLE,{cx:a.x,cy:a.y,r:0,fill:"none",stroke:"#888","stroke-width":10},n.getParentSvg());e=b(ue.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*o},d),n=b(ue.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},d),e.beginElement(),n.beginElement(),setTimeout(()=>void ve(d),150)}},Pp=function(e){if(_a(),e.workspace.getAudioManager().play("disconnect"),!(e.workspace.scale<1)){var n=e.getHeightWidth().height;n=Math.atan(10/n)/Math.PI*180,e.RTL||(n*=-1),_u=e,Fp(e,n,new Date,0)}},Fp=function(e,n,o,a){const d=[.66,1,.66,0,-.66,-1,-.66,0];let p="";o.getTime()+200>new Date().getTime()&&(p=`skewX(${Math.round(d[a%d.length]*n)})`,g_=setTimeout(Fp,15,e,n,o,a+1)),e.getSvgRoot().setAttribute("transform",`${e.getTranslation()} ${p}`)},_a=function(){_u&&(g_&&(clearTimeout(g_),g_=null),_u.getSvgRoot().setAttribute("transform",_u.getTranslation()),_u=null)},bS=function(e,n){e.workspace.RTL&&(n.x=e.workspace.getWidth()-n.x);const o=e.workspace,a=r.config$$module$build$src$core$config.snapRadius,d=xe.difference(n,e.getRelativeToSurfaceXY()),p=new xe(0,0),v=o.getAllBlocks(!1).filter(X=>X.id!=e.id).map(X=>X.getRelativeToSurfaceXY());for(;yS(xe.sum(n,p),v)||kS(e,xe.sum(d,p),a);)o.RTL?p.translate(-a,a*2):p.translate(a,a*2);e.moveTo(xe.sum(n,p))},yS=function(e,n){return n.some(o=>Math.abs(o.x-e.x)<=1&&Math.abs(o.y-e.y)<=1)},kS=function(e,n,o){return e.getConnections_(!1).some(a=>!!a.closest(o,n).connection)},fa=function(e,n,o){const a=o.getBoundingRectangle(),d=a.right-a.left,p=ia(n.top,a.top,n.top+n.height-(a.bottom-a.top))-a.top;let v=n.left;return n=n.left+n.width-d,e.RTL?v=Math.min(n,v):n=Math.max(v,n),(e=ia(v,a.left,n)-a.left)||p?(o.moveBy(e,p,["inbounds"]),!0):!1},Bp=function(e){return n=>{var o=e.getMetricsManager();if(o.hasFixedEdges()&&!e.isDragging()){var a;if(SR.includes((a=n.type)!=null?a:"")){a=o.getScrollMetrics(!0);const d=wS(e,n);d&&(o=r.getGroup$$module$build$src$core$events$utils()||!1,r.setGroup$$module$build$src$core$events$utils(n.group),fa(e,a,d)&&!n.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),r.setGroup$$module$build$src$core$events$utils(o))}else Re(n)&&n.scale&&n.oldScale&&n.scale>n.oldScale&&Ld(e)}}},wS=function(e,n){let o=null;switch(n.type){case de.BLOCK_CREATE:case de.BLOCK_MOVE:(o=e.getBlockById(n.blockId))&&(o=o.getRootBlock());break;case de.COMMENT_CREATE:case de.COMMENT_MOVE:case de.COMMENT_RESIZE:o=e.getCommentById(n.commentId)}return o},Ld=function(e){var n=e.getMetricsManager();if(n.hasFixedEdges()&&!e.isDragging()){n=n.getScrollMetrics(!0);var o=e.getTopBoundedElements();for(let a=0,d;d=o[a];a++)fa(e,n,d)}},cs=function(e){return e&&typeof e.isDeletable=="function"&&typeof e.dispose=="function"&&typeof e.setDeleteStyle=="function"},Up=function(e,n){const o=e.getIcons();for(const a of e.inputList){if(!a.isVisible())continue;o.push(...a.fieldRow);let d;if((d=a.connection)!=null&&d.targetBlock())if(e=a.connection.targetBlock(),a.connection.type!==Ye.NEXT_STATEMENT||n)o.push(e);else{let p;(e=(p=e.lastConnectionInStack(!1))==null?void 0:p.getSourceBlock())&&o.push(e)}else{let p;((p=a.connection)==null?void 0:p.type)===Ye.INPUT_VALUE&&o.push(a.connection)}}return o},Ta=function(e,n){const o=e.workspace.getTopBoundedElements(!0).filter(d=>dr(d));e=o.indexOf(e instanceof bt?e.getRootBlock():e)+n;let a=null;if(e>=0&&e<o.length?a=o[e]:e<0?a=o[o.length-1]:e>=o.length&&(a=o[0]),n<0&&a instanceof bt){let d,p;return(p=(d=a.lastConnectionInStack(!1))==null?void 0:d.getSourceBlock())!=null?p:a}return a},Ls=function(e,n){var o;let a;const d=e instanceof bt?(a=(o=e.outputConnection)==null?void 0:o.targetBlock())!=null?a:e.getSurroundParent():e.getSourceBlock();return!(d instanceof bt)||(o=Up(d,n>0),e=o.indexOf(e),e===-1)?null:(n=e+n,n>=0&&n<o.length?o[n]:null)},Hp=function(e,n){i(Le.ICON,e.toString(),n)},MS=function(e){c(Le.ICON,e)},pa=function(e){return e&&typeof e.getRelativeToSurfaceXY=="function"&&typeof e.isMovable=="function"&&typeof e.startDrag=="function"&&typeof e.drag=="function"&&typeof e.endDrag=="function"&&typeof e.revertDrag=="function"},DS=function(e){return e&&typeof e.autoHide=="function"},io=function(e){return typeof e.getProcedureModel=="function"&&typeof e.doProcedureUpdate=="function"&&typeof e.isProcedureDef=="function"},Ad=function(e){return e&&typeof e.startPublishing=="function"&&typeof e.stopPublishing=="function"},Xc=function(e){const n=e.getProcedureMap().getProcedures().filter(a=>!a.getReturnTypes()).map(a=>[a.getName(),a.getParameters().map(d=>d.getName()),!1]);e.getBlocksByType("procedures_defnoreturn",!1).forEach(a=>{!io(a)&&ta(a)&&n.push(a.getProcedureDef())});const o=e.getProcedureMap().getProcedures().filter(a=>!!a.getReturnTypes()).map(a=>[a.getName(),a.getParameters().map(d=>d.getName()),!0]);return e.getBlocksByType("procedures_defreturn",!1).forEach(a=>{!io(a)&&ta(a)&&o.push(a.getProcedureDef())}),n.sort(Gp),o.sort(Gp),[n,o]},Gp=function(e,n){return e[0].localeCompare(n[0],void 0,{sensitivity:"base"})},r.findLegalName$$module$build$src$core$procedures=function(e,n){if(n.isInFlyout)return e;for(e=e||r.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!PS(e,n.workspace,n);){const o=e.match(/^(.*?)(\d+)$/);e=o?o[1]+(parseInt(o[2])+1):e+"2"}return e},PS=function(e,n,o){return!Vp(e,n,o)},Vp=function(e,n,o){for(const a of n.getAllBlocks(!1))if(a!==o&&ta(a)&&r.Names$$module$build$src$core$names.equals(a.getProcedureDef()[0],e))return!0;o=o&&io(o)?o?.getProcedureModel():void 0;for(const a of n.getProcedureMap().getProcedures())if(a!==o&&r.Names$$module$build$src$core$names.equals(a.getName(),e))return!0;return!1},r.rename$$module$build$src$core$procedures=function(e){var n=this.getSourceBlock();if(!n)throw new lr;e=e.trim();const o=r.findLegalName$$module$build$src$core$procedures(e,n);io(n)&&!n.isInsertionMarker()&&n.getProcedureModel().setName(o);const a=this.getValue();if(a!==e&&a!==o)for(e=n.workspace.getAllBlocks(!1),n=0;n<e.length;n++){const d=e[n];d.renameProcedure&&d.renameProcedure(a,o)}return o},FS=function(e){function n(p,v){for(let Ie=0;Ie<p.length;Ie++){var X=p[Ie][0];const je=p[Ie][1],zt=r.createElement$$module$build$src$core$utils$xml("block");zt.setAttribute("type",v),zt.setAttribute("gap","16");const yt=r.createElement$$module$build$src$core$utils$xml("mutation");for(yt.setAttribute("name",X),zt.appendChild(yt),X=0;X<je.length;X++){const jr=r.createElement$$module$build$src$core$utils$xml("arg");jr.setAttribute("name",je[X]),yt.appendChild(jr)}o.push(zt)}}const o=[];if(Ut.procedures_defnoreturn){var a=r.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","procedures_defnoreturn"),a.setAttribute("gap","16");var d=r.createElement$$module$build$src$core$utils$xml("field");d.setAttribute("name","NAME"),d.appendChild(r.createTextNode$$module$build$src$core$utils$xml(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),a.appendChild(d),o.push(a)}return Ut.procedures_defreturn&&(a=r.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","procedures_defreturn"),a.setAttribute("gap","16"),d=r.createElement$$module$build$src$core$utils$xml("field"),d.setAttribute("name","NAME"),d.appendChild(r.createTextNode$$module$build$src$core$utils$xml(r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),a.appendChild(d),o.push(a)),Ut.procedures_ifreturn&&(a=r.createElement$$module$build$src$core$utils$xml("block"),a.setAttribute("type","procedures_ifreturn"),a.setAttribute("gap","16"),o.push(a)),o.length&&o[o.length-1].setAttribute("gap","24"),e=Xc(e),n(e[0],"procedures_callnoreturn"),n(e[1],"procedures_callreturn"),o},Cd=function(e){return Wp(e,!1)},Wp=function(e,n=!0){function o(d,p){for(const[v,X]of d)a.push({kind:"block",type:p,gap:16,extraState:{name:v,params:X}})}if(n)return Mr("The XML return value of Blockly.Procedures.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),FS(e);const a=[];return Ut.procedures_defnoreturn&&a.push({kind:"block",type:"procedures_defnoreturn",gap:16,fields:{NAME:r.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE}}),Ut.procedures_defreturn&&a.push({kind:"block",type:"procedures_defreturn",gap:16,fields:{NAME:r.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE}}),Ut.procedures_ifreturn&&a.push({kind:"block",type:"procedures_ifreturn",gap:16}),a.length&&(a[a.length-1].gap=24),e=Xc(e),o(e[0],"procedures_callnoreturn"),o(e[1],"procedures_callreturn"),a},Xp=function(e){var n=[],o=e.getBlocksByType("procedures_mutatorarg",!1);for(let p=0,v;v=o[p];p++)n.push(v.getFieldValue("NAME"));o=r.createElement$$module$build$src$core$utils$xml("xml");const a=r.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","procedures_mutatorarg");const d=r.createElement$$module$build$src$core$utils$xml("field");d.setAttribute("name","NAME"),n=id(r.DEFAULT_ARG$$module$build$src$core$procedures,n),n=r.createTextNode$$module$build$src$core$utils$xml(n),d.appendChild(n),a.appendChild(d),o.appendChild(a),e.updateToolbox(o)},zp=function(e){if(ye(e)&&e.bubbleType==="mutator"&&e.isOpen&&e.blockId){e=Ot(e.workspaceId).getBlockById(e.blockId);var n=e.type;(n==="procedures_defnoreturn"||n==="procedures_defreturn")&&(e=e.getIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),Xp(e),e.addChangeListener(BS))}},BS=function(e){(Z(e)||se(e)||pe(e)||Me(e))&&(e=Ot(e.workspaceId),Xp(e))},Yp=function(e,n){return n.getAllBlocks(!1).filter(o=>US(o,e)||iO(o)&&r.Names$$module$build$src$core$names.equals(o.getProcedureCall(),e))},US=function(e,n){return io(e)&&!e.isProcedureDef()&&e.getProcedureModel()&&r.Names$$module$build$src$core$names.equals(e.getProcedureModel().getName(),n)},r.mutateCallers$$module$build$src$core$procedures=function(e){const n=j();var o=e.getProcedureDef()[0];const a=e.mutationToDom(!0);e=Yp(o,e.workspace);for(let p=0,v;v=e[p];p++){o=(o=v.mutationToDom())&&ge(o),v.domToMutation&&v.domToMutation(a);var d=v.mutationToDom();d=d&&ge(d),o!==d&&(r.setRecordUndo$$module$build$src$core$events$utils(!1),Y(new(ce(de.BLOCK_CHANGE))(v,"mutation",null,o,d)),r.setRecordUndo$$module$build$src$core$events$utils(n))}},r.getDefinition$$module$build$src$core$procedures=function(e,n){for(const o of n.getAllBlocks(!1))if(io(o)&&o.isProcedureDef()&&r.Names$$module$build$src$core$names.equals(o.getProcedureModel().getName(),e)||ta(o)&&r.Names$$module$build$src$core$names.equals(o.getProcedureDef()[0],e))return o;return null},vd=function(e){return e.isDynamic},HS=function(e){return e.pathDown!==void 0&&e.pathUp!==void 0},GS=function(e){return e.pathLeft!==void 0&&e.pathRight!==void 0},zc=function(e,n){i(Le.RENDERER,e,n)},VS=function(e){c(Le.RENDERER,e)},Kp=function(e,n,o){return e=new(_(Le.RENDERER,e))(e),e.init(n,o),e},Nd=function(e){jo(e.getTargetWorkspace(),void 0,"String")},xd=function(e){jo(e.getTargetWorkspace(),void 0,"Number")},bd=function(e){jo(e.getTargetWorkspace(),void 0,"Colour")},yd=function(e){return jp(e,!1)},jp=function(e,n=!0){return Ut.variables_set_dynamic||Ut.variables_get_dynamic||console.warn("There are no dynamic variable blocks, but there is a dynamic variable category."),n?(Mr("The XML return value of Blockly.VariablesDynamic.flyoutCategory()","v12","v13","the same method, but handle a return type of FlyoutItemInfo[] (JSON) instead."),WS(e)):(e.registerButtonCallback("CREATE_VARIABLE_STRING",Nd),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",xd),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",bd),[{kind:"button",text:r.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE,callbackkey:"CREATE_VARIABLE_STRING"},{kind:"button",text:r.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE,callbackkey:"CREATE_VARIABLE_NUMBER"},{kind:"button",text:r.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE,callbackkey:"CREATE_VARIABLE_COLOUR"},...sd(e,e.getVariableMap().getAllVariables(),!1,"variables_get_dynamic","variables_set_dynamic")])},WS=function(e){let n=[],o=document.createElement("button");return o.setAttribute("text",r.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),n.push(o),o=document.createElement("button"),o.setAttribute("text",r.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),n.push(o),o=document.createElement("button"),o.setAttribute("text",r.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),n.push(o),e.registerButtonCallback("CREATE_VARIABLE_STRING",Nd),e.registerButtonCallback("CREATE_VARIABLE_NUMBER",xd),e.registerButtonCallback("CREATE_VARIABLE_COLOUR",bd),e=Jp(e),n=n.concat(e)},Jp=function(e){e=e.getVariableMap().getAllVariables();const n=[];if(e.length>0){if(Ut.variables_set_dynamic){var o=e[e.length-1];const a=r.createElement$$module$build$src$core$utils$xml("block");a.setAttribute("type","variables_set_dynamic"),a.setAttribute("gap","24"),a.appendChild(Jo(o)),n.push(a)}if(Ut.variables_get_dynamic){e.sort(ra);for(let a=0,d;d=e[a];a++)o=r.createElement$$module$build$src$core$utils$xml("block"),o.setAttribute("type","variables_get_dynamic"),o.setAttribute("gap","8"),o.appendChild(Jo(d)),n.push(o)}}return n},kd=function(e,n){const o=e.toCopyData();return $u=o,Iu=mn(e)&&e.workspace instanceof ln?e.workspace:null,w_=n,o},wd=function(){return $u},XS=function(e){$u=e},Md=function(){return Iu},zS=function(e){Iu=e},qp=function(){return w_},YS=function(e){w_=e},oo=function(e,n,o){return e&&n?Zp(e,n,o):$u&&Iu?Zp($u,Iu,w_):null},Zp=function(e,n,o){let a;n=n.isMutator?n:(a=n.options.parentWorkspace)!=null?a:n;let d,p;return(p=(d=f(Le.PASTER,e.paster,!1))==null?void 0:d.paste(e,n,o))!=null?p:null},Yc=function(e){return e&&typeof e.toCopyData=="function"},Qp=function(){xt.registry.register({name:oi.ESCAPE,preconditionFn(e){return!e.isReadOnly()},callback(e){return e.hideChaff(),!0},keyCodes:[At.ESC]})},eE=function(){xt.registry.register({name:oi.DELETE,preconditionFn(e,n){return n=n.focusedNode,!e.isReadOnly()&&n!=null&&cs(n)&&n.isDeletable()&&!e.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(e,n,o,a){return n.preventDefault(),e=a.focusedNode,e instanceof bt?e.checkAndDelete():cs(e)&&e.isDeletable()&&(r.setGroup$$module$build$src$core$events$utils(!0),e.dispose(),r.setGroup$$module$build$src$core$events$utils(!1)),!0},keyCodes:[At.DELETE,At.BACKSPACE]})},Dd=function(e){return Yc(e)&&cs(e)&&pa(e)?e.isCopyable?e.isCopyable():e instanceof bt||e instanceof ki?e.isOwnDeletable()&&e.isOwnMovable():e.isDeletable()&&e.isMovable():!1},tE=function(e){return Dd(e)&&cs(e)&&e.isDeletable()},rE=function(){const e=xt.registry.createSerializedKey(At.C,[At.CTRL]),n=xt.registry.createSerializedKey(At.C,[At.META]);xt.registry.register({name:oi.COPY,preconditionFn(o,a){return a=a.focusedNode,o=o.isFlyout?o.targetWorkspace:o,!!a&&!!o&&!o.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&Dd(a)},callback(o,a,d,p){return a.preventDefault(),a=p.focusedNode,!a||!Yc(a)||!Dd(a)||(o=o.isFlyout?o.targetWorkspace:o,!o)?!1:(a.workspace.isFlyout||o.hideChaff(),o=pa(a)&&a.workspace==o?a.getRelativeToSurfaceXY():void 0,!!kd(a,o))},keyCodes:[e,n]})},nE=function(){const e=xt.registry.createSerializedKey(At.X,[At.CTRL]),n=xt.registry.createSerializedKey(At.X,[At.META]);xt.registry.register({name:oi.CUT,preconditionFn(o,a){return a=a.focusedNode,!!a&&!o.isReadOnly()&&!o.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()&&tE(a)},callback(o,a,d,p){return o=p.focusedNode,!o||!tE(o)||!Yc(o)?!1:(a=pa(o)?o.getRelativeToSurfaceXY():void 0,a=kd(o,a),o instanceof bt?o.checkAndDelete():cs(o)&&o.dispose(),!!a)},keyCodes:[e,n]})},sE=function(){const e=xt.registry.createSerializedKey(At.V,[At.CTRL]),n=xt.registry.createSerializedKey(At.V,[At.META]);xt.registry.register({name:oi.PASTE,preconditionFn(){var o=Md();return!o||!o.rendered?!1:(o=o.isFlyout?o.targetWorkspace:o,!!wd()&&!!o&&!o.isReadOnly()&&!o.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken())},callback(o,a){if(o=wd(),!o)return!1;var d=Md();if(!d||(d=d.isFlyout?d.targetWorkspace:d,!d||d.isReadOnly()))return!1;if(a instanceof PointerEvent)return a=Te(d,new xe(a.clientX,a.clientY)),!!oo(o,d,a);if(a=qp(),!a)return!!oo(o,d);const{left:p,top:v,width:X,height:Ie}=d.getMetricsManager().getViewMetrics(!0);return new it(v,v+Ie,p,p+X).contains(a.x,a.y)?!!oo(o,d):(a=new xe(p+X/2,v+Ie/2),!!oo(o,d,a))},keyCodes:[e,n]})},iE=function(){const e=xt.registry.createSerializedKey(At.Z,[At.CTRL]),n=xt.registry.createSerializedKey(At.Z,[At.META]);xt.registry.register({name:oi.UNDO,preconditionFn(o){return!o.isReadOnly()&&!o.isDragging()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(o,a){return o.hideChaff(),o.undo(!1),a.preventDefault(),!0},keyCodes:[e,n]})},oE=function(){const e=xt.registry.createSerializedKey(At.Z,[At.CTRL,At.SHIFT]),n=xt.registry.createSerializedKey(At.Z,[At.META,At.SHIFT]),o=xt.registry.createSerializedKey(At.Y,[At.CTRL]);xt.registry.register({name:oi.REDO,preconditionFn(a){return!a.isDragging()&&!a.isReadOnly()&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()},callback(a,d){return a.hideChaff(),a.undo(!0),d.preventDefault(),!0},keyCodes:[e,n,o]})},lE=function(){Qp(),eE(),rE(),nE(),sE(),iE(),oE()},aE=function(e){const n=e.saveState();return e.getParameters().length&&(n.parameters=e.getParameters().map(o=>o.saveState())),n},cE=function(e,n,o,a){if(e=e.loadState(o,a),!o.parameters)return e;for(const[d,p]of o.parameters.entries())e.insertParameter(n.loadState(p,a),d);return e},KS=function(e){const n=Object.create(null),o=T(Le.SERIALIZER,!0);for(const a in o){let d;const p=(d=o[a])==null?void 0:d.save(e);p&&(n[a]=p)}return n},jS=function(e,n,{recordUndo:o=!1}={}){var a=T(Le.SERIALIZER,!0);if(a){a=Object.entries(a).sort((p,v)=>v[1].priority-p[1].priority);var d=j();r.setRecordUndo$$module$build$src$core$events$utils(o),(o=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0),tr(),n instanceof ln&&n.setResizesEnabled(!1);for(const[,p]of a.reverse()){let v;(v=p)==null||v.clear(n)}for(const[p,v]of a.reverse())if(e[p]){let X;(X=v)==null||X.load(e[p],n)}n instanceof ln&&n.setResizesEnabled(!0),hr(),Y(new(ce(de.FINISHED_LOADING))(n)),r.setGroup$$module$build$src$core$events$utils(o),r.setRecordUndo$$module$build$src$core$events$utils(d)}},JS=function(e,n){let o=null;o=typeof e=="string"?document.getElementById(e)||document.querySelector(e):e;var a;if(!document.contains(o)&&document!==((a=o)==null?void 0:a.ownerDocument))throw Error("Error: container is not in current document");e=new ri(n||{}),a=document.createElement("div"),_e(a,"injectionDiv"),n!=null&&n.rtl&&_e(a,"blocklyRTL"),o.appendChild(a),n=qS(a,e);const d=ZS(a,n,e);return QS(d),D(d),Bn(d),a.addEventListener("focusin",function(){D(d)}),A(a,"keydown",null,ae),d},qS=function(e,n){e.setAttribute("dir","LTR"),rt(n.hasCss,n.pathToMedia);const o=b(ue.SVG,{xmlns:Jc,"xmlns:html":sl,"xmlns:xlink":Gn,version:"1.1",class:"blocklySvg"},e),a=b(ue.DEFS,{},o),d=String(Math.random()).substring(2);return n.gridPattern=Ag.createDom(d,n.gridOptions,a,e),o},ZS=function(e,n,o){o.parentWorkspace=null,o=new ln(o);const a=o.options;o.scale=a.zoomOptions.startScale,n.appendChild(o.createDom("blocklyMainBackground",e));var d=o.getRenderer().getClassName();return d&&_e(e,d),(d=o.getTheme().getClassName())&&_e(e,d),!a.hasCategories&&a.languageTree&&(e=o.addFlyout(ue.SVG),ut(e,n)),a.hasTrashcan&&o.addTrashcan(),a.zoomOptions&&a.zoomOptions.controls&&o.addZoomControls(),o.getThemeManager().subscribe(n,"workspaceBackgroundColour","background-color"),o.translate(0,0),o.addChangeListener(Bp(o)),Bn(o),Ep(),ad(),lp(),o},QS=function(e){const n=e.options;var o=e.getParentSvg();if(A(o.parentNode,"contextmenu",null,function(a){H(a)||a.preventDefault()}),o=A(window,"resize",null,function(){Li(),e.hideComponents(!0),rp(),Ip(),Bn(e),Ld(e)}),e.setResizeHandlerWrapper(o),eR(),n.languageTree){o=e.getToolbox();const a=e.getFlyout(!0);o?o.init():a&&(a.init(e),a.show(n.languageTree),typeof a.scrollToStart=="function"&&a.scrollToStart())}n.hasTrashcan&&e.trashcan.init(),n.zoomOptions&&n.zoomOptions.controls&&e.zoomControls_.init(),n.moveOptions&&n.moveOptions.scrollbars?(e.scrollbar=new Lg(e,n.moveOptions.scrollbars===!0||!!n.moveOptions.scrollbars.horizontal,n.moveOptions.scrollbars===!0||!!n.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),e.scrollbar.resize()):e.setMetrics({x:.5,y:.5}),n.hasSounds&&tR(n.pathToMedia,e)},eR=function(){vA||(A(document,"scroll",null,function(){const e=et();for(let n=0,o;o=e[n];n++)o instanceof ln&&o.updateInverseScreenCTM()}),I(document,"touchend",null,S),I(document,"touchcancel",null,S)),vA=!0},tR=function(e,n){function o(){for(;d.length;){const p=d.pop();p&&k(p)}a.preload()}const a=n.getAudioManager();a.load([e+"click.mp3",e+"click.wav",e+"click.ogg"],"click"),a.load([e+"disconnect.wav",e+"disconnect.mp3",e+"disconnect.ogg"],"disconnect"),a.load([e+"delete.mp3",e+"delete.ogg",e+"delete.wav"],"delete");const d=[];d.push(A(document,"pointermove",null,o,!0)),d.push(A(document,"touchstart",null,o,!0))},rR=function(e){if(!e||!e.isSimpleReporter())return!1;let n;return(n=e.getFields().next().value)==null?void 0:n.isFullBlockField()},uE=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.UNDO},preconditionFn(e){return e.workspace.getUndoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!1)},scopeType:ht.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},hE=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.REDO},preconditionFn(e){return e.workspace.getRedoStack().length>0?"enabled":"disabled"},callback(e){e.workspace.undo(!0)},scopeType:ht.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},dE=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.CLEAN_UP},preconditionFn(e){return e.workspace.isMovable()?e.workspace.getTopBlocks(!1).length>1?"enabled":"disabled":"hidden"},callback(e){e.workspace.cleanUp()},scopeType:ht.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},_E=function(e,n){function o(p){d--,p.setCollapsed(e),d===0&&r.setGroup$$module$build$src$core$events$utils(!1)}let a=0,d=0;r.setGroup$$module$build$src$core$events$utils(!0);for(let p=0;p<n.length;p++){let v=n[p];for(;v;)d++,setTimeout(o.bind(null,v),a),v=v.getNextBlock(),a+=10}},fE=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.COLLAPSE_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let o=e[n];for(;o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}}return"disabled"}return"hidden"},callback(e){_E(!0,e.workspace.getTopBlocks(!0))},scopeType:ht.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},TE=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.EXPAND_ALL},preconditionFn(e){if(e.workspace.options.collapse){e=e.workspace.getTopBlocks(!1);for(let n=0;n<e.length;n++){let o=e[n];for(;o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}}return"disabled"}return"hidden"},callback(e){_E(!1,e.workspace.getTopBlocks(!0))},scopeType:ht.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},pE=function(e,n){if(e.isDeletable())Array.prototype.push.apply(n,e.getDescendants(!1));else{e=e.getChildren(!1);for(let o=0;o<e.length;o++)pE(e[o],n)}},Pd=function(e){const n=[];e=e.getTopBlocks(!0);for(let o=0;o<e.length;o++)pE(e[o],n);return n},Kc=function(e,n){n?r.setGroup$$module$build$src$core$events$utils(n):(r.setGroup$$module$build$src$core$events$utils(!0),n=r.getGroup$$module$build$src$core$events$utils());const o=e.shift();o&&(o.isDeadOrDying()?Kc(e,n):(o.dispose(!1,!0),setTimeout(Kc,10,e,n))),r.setGroup$$module$build$src$core$events$utils(!1)},EE=function(){ht.registry.register({displayText(e){return e.workspace?(e=Pd(e.workspace).length,e===1?r.Msg$$module$build$src$core$msg.DELETE_BLOCK:r.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)):""},preconditionFn(e){return e.workspace&&Pd(e.workspace).length>0?"enabled":"disabled"},callback(e){if(e.workspace){e.workspace.cancelCurrentGesture();var n=Pd(e.workspace);n.length<2?Kc(n):ed(r.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(n.length)),function(o){o&&Kc(n)})}},scopeType:ht.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},nR=function(){uE(),hE(),dE(),fE(),TE(),EE()},gE=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isDeletable()&&e.isMovable()?e.isDuplicatable()?"enabled":"disabled":"hidden"},callback(e){if(e.block){var n=e.block.toCopyData();n&&oo(n,e.block.workspace)}},scopeType:ht.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},mE=function(){ht.registry.register({displayText(e){return e.block.hasIcon(Ns.TYPE)?r.Msg$$module$build$src$core$msg.REMOVE_COMMENT:r.Msg$$module$build$src$core$msg.ADD_COMMENT},preconditionFn(e){return e=e.block,!e||e.isInFlyout||!e.workspace.options.comments||e.isCollapsed()||!e.isEditable()||!e.hasIcon(Ns.TYPE)&&rR(e)?"hidden":"enabled"},callback(e){(e=e.block)&&e.hasIcon(Ns.TYPE)?e.setCommentText(null):e.setCommentText("")},scopeType:ht.ScopeType.BLOCK,id:"blockComment",weight:2})},$E=function(){ht.registry.register({displayText(e){return e.block.getInputsInline()?r.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:r.Msg$$module$build$src$core$msg.INLINE_INPUTS},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.isMovable()&&!e.isCollapsed()){for(let n=1;n<e.inputList.length;n++)if(!(e.inputList[n-1]instanceof P_||e.inputList[n]instanceof P_))return"enabled"}return"hidden"},callback(e){e.block.setInputsInline(!e.block.getInputsInline())},scopeType:ht.ScopeType.BLOCK,id:"blockInline",weight:3})},IE=function(){ht.registry.register({displayText(e){return e.block.isCollapsed()?r.Msg$$module$build$src$core$msg.EXPAND_BLOCK:r.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK},preconditionFn(e){return e=e.block,!e.isInFlyout&&e.isMovable()&&e.workspace.options.collapse?"enabled":"hidden"},callback(e){e.block.setCollapsed(!e.block.isCollapsed())},scopeType:ht.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},OE=function(){ht.registry.register({displayText(e){return e.block.hasDisabledReason(us)?r.Msg$$module$build$src$core$msg.ENABLE_BLOCK:r.Msg$$module$build$src$core$msg.DISABLE_BLOCK},preconditionFn(e){if(e=e.block,!e.isInFlyout&&e.workspace.options.disable&&e.isEditable()){var n=e.getDisabledReasons();return n=n.size>(n.has(us)?1:0),e.getInheritedDisabled()||n?"disabled":"enabled"}return"hidden"},callback(e){e=e.block;const n=r.getGroup$$module$build$src$core$events$utils();n||r.setGroup$$module$build$src$core$events$utils(!0),e.setDisabledReason(!e.hasDisabledReason(us),us),r.setGroup$$module$build$src$core$events$utils(n)},scopeType:ht.ScopeType.BLOCK,id:"blockDisable",weight:5})},SE=function(){ht.registry.register({displayText(e){var n=e.block;return e=n.getDescendants(!1).length,(n=n.getNextBlock())&&(e-=n.getDescendants(!1).length),e===1?r.Msg$$module$build$src$core$msg.DELETE_BLOCK:r.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${e}`)},preconditionFn(e){return!e.block.isInFlyout&&e.block.isDeletable()?"enabled":"hidden"},callback(e){e.block&&e.block.checkAndDelete()},scopeType:ht.ScopeType.BLOCK,id:"blockDelete",weight:6})},RE=function(){ht.registry.register({displayText(){return r.Msg$$module$build$src$core$msg.HELP},preconditionFn(e){return e=e.block,(typeof e.helpUrl=="function"?e.helpUrl():e.helpUrl)?"enabled":"hidden"},callback(e){e.block.showHelp()},scopeType:ht.ScopeType.BLOCK,id:"blockHelp",weight:7})},LE=function(){ht.registry.register({displayText:()=>r.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(e){let n;return(n=e.comment)!=null&&n.isDeletable()?"enabled":"hidden"},callback(e){r.setGroup$$module$build$src$core$events$utils(!0);let n;(n=e.comment)==null||n.dispose(),r.setGroup$$module$build$src$core$events$utils(!1)},scopeType:ht.ScopeType.COMMENT,id:"commentDelete",weight:6})},AE=function(){ht.registry.register({displayText:()=>r.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(e){let n;return(n=e.comment)!=null&&n.isMovable()?"enabled":"hidden"},callback(e){if(e.comment){var n=e.comment.toCopyData();n&&oo(n,e.comment.workspace)}},scopeType:ht.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},CE=function(){ht.registry.register({displayText:()=>r.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:e=>{let n;return(n=e.workspace)!=null&&n.isMutator?"hidden":"enabled"},callback:(e,n,o,a)=>{(e=e.workspace)&&(r.setGroup$$module$build$src$core$events$utils(!0),n=new ki(e),n.setPlaceholderText(r.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),n.moveTo(Te(e,new xe(a.x,a.y))),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(n),r.setGroup$$module$build$src$core$events$utils(!1))},scopeType:ht.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},sR=function(){gE(),mE(),$E(),IE(),OE(),SE(),RE()},iR=function(){AE(),LE(),CE()},vE=function(){nR(),sR()},oR=function(e){return e&&typeof e.paste=="function"},lR=function(e){return e&&typeof e.getSvgRoot=="function"},aR=function(e){return e.isSelectable()},cR=function(e){m().hideChaff(e)},me=me||{},me.scope={},me.ASSUME_ES5=!1,me.ASSUME_ES6=!1,me.ASSUME_ES2020=!1,me.ASSUME_NO_NATIVE_MAP=!1,me.ASSUME_NO_NATIVE_SET=!1,me.ISOLATE_POLYFILLS=!1,me.FORCE_POLYFILL_PROMISE=!1,me.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,me.INSTRUMENT_ASYNC_CONTEXT=!0,me.objectCreate=me.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(e){var n=function(){};return n.prototype=e,new n},me.defineProperty=me.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(e,n,o){return e==Array.prototype||e==Object.prototype||(e[n]=o.value),e},me.getGlobal=function(e){e=[typeof globalThis=="object"&&globalThis,e,typeof window=="object"&&window,typeof self=="object"&&self,typeof bo=="object"&&bo];for(var n=0;n<e.length;++n){var o=e[n];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")},me.global=me.ASSUME_ES2020?globalThis:me.getGlobal(this),me.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",me.TRUST_ES6_POLYFILLS=!me.ISOLATE_POLYFILLS||me.IS_SYMBOL_NATIVE,me.polyfills={},me.propertyToPolyfillSymbol={},me.POLYFILL_PREFIX="$jscp$",me.polyfill=function(e,n,o,a){n&&(me.ISOLATE_POLYFILLS?me.polyfillIsolated(e,n,o,a):me.polyfillUnisolated(e,n,o,a))},me.polyfillUnisolated=function(e,n,o,a){for(o=me.global,e=e.split("."),a=0;a<e.length-1;a++){var d=e[a];if(!(d in o))return;o=o[d]}e=e[e.length-1],a=o[e],n=n(a),n!=a&&n!=null&&me.defineProperty(o,e,{configurable:!0,writable:!0,value:n})},me.polyfillIsolated=function(e,n,o,a){var d=e.split(".");e=d.length===1,a=d[0],a=!e&&a in me.polyfills?me.polyfills:me.global;for(var p=0;p<d.length-1;p++){var v=d[p];if(!(v in a))return;a=a[v]}d=d[d.length-1],o=me.IS_SYMBOL_NATIVE&&o==="es6"?a[d]:null,n=n(o),n!=null&&(e?me.defineProperty(me.polyfills,d,{configurable:!0,writable:!0,value:n}):n!==o&&(me.propertyToPolyfillSymbol[d]===void 0&&(o=Math.random()*1e9>>>0,me.propertyToPolyfillSymbol[d]=me.IS_SYMBOL_NATIVE?me.global.Symbol(d):me.POLYFILL_PREFIX+o+"$"+d),me.defineProperty(a,me.propertyToPolyfillSymbol[d],{configurable:!0,writable:!0,value:n})))},me.getConstructImplementation=function(){function e(){function o(){}return Reflect.construct(o,[],function(){}),new o instanceof o}if(me.TRUST_ES6_POLYFILLS&&typeof Reflect<"u"&&Reflect.construct){if(e())return Reflect.construct;var n=Reflect.construct;return function(o,a,d){return o=n(o,a),d&&Reflect.setPrototypeOf(o,d.prototype),o}}return function(o,a,d){return d===void 0&&(d=o),d=me.objectCreate(d.prototype||Object.prototype),Function.prototype.apply.call(o,d,a)||d}},me.construct={valueOf:me.getConstructImplementation}.valueOf(),me.underscoreProtoCanBeSet=function(){var e={a:!0},n={};try{return n.__proto__=e,n.a}catch{}return!1},me.setPrototypeOf=me.ASSUME_ES6||me.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:me.underscoreProtoCanBeSet()?function(e,n){if(e.__proto__=n,e.__proto__!==n)throw new TypeError(e+" is not extensible");return e}:null,me.inherits=function(e,n){if(e.prototype=me.objectCreate(n.prototype),e.prototype.constructor=e,me.ASSUME_ES6||me.setPrototypeOf){var o=me.setPrototypeOf;o(e,n)}else for(o in n)if(o!="prototype")if(Object.defineProperties){var a=Object.getOwnPropertyDescriptor(n,o);a&&Object.defineProperty(e,o,a)}else e[o]=n[o];e.superClass_=n.prototype},me.arrayIteratorImpl=function(e){var n=0;return function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}}},me.arrayIterator=function(e){return{next:me.arrayIteratorImpl(e)}},me.makeIterator=function(e){var n=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(n)return n.call(e);if(typeof e.length=="number")return me.arrayIterator(e);throw Error(String(e)+" is not an iterable or ArrayLike")},me.arrayFromIterator=function(e){for(var n,o=[];!(n=e.next()).done;)o.push(n.value);return o},me.arrayFromIterable=function(e){return e instanceof Array?e:me.arrayFromIterator(me.makeIterator(e))},me.generator={},me.generator.ensureIteratorResultIsObject_=function(e){if(!(e instanceof Object))throw new TypeError("Iterator result "+e+" is not an object")},me.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},me.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},me.generator.Context.prototype.stop_=function(){this.isRunning_=!1},me.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},me.generator.Context.prototype.next_=function(e){this.yieldResult=e},me.generator.Context.prototype.throw_=function(e){this.abruptCompletion_={exception:e,isException:!0},this.jumpToErrorHandler_()},me.generator.Context.prototype.return=function(e){this.abruptCompletion_={return:e},this.nextAddress=this.finallyAddress_},me.generator.Context.prototype.jumpThroughFinallyBlocks=function(e){this.abruptCompletion_={jumpTo:e},this.nextAddress=this.finallyAddress_},me.generator.Context.prototype.yield=function(e,n){return this.nextAddress=n,{value:e}},me.generator.Context.prototype.yieldAll=function(e,n){e=me.makeIterator(e);var o=e.next();if(me.generator.ensureIteratorResultIsObject_(o),o.done)this.yieldResult=o.value,this.nextAddress=n;else return this.yieldAllIterator_=e,this.yield(o.value,n)},me.generator.Context.prototype.jumpTo=function(e){this.nextAddress=e},me.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},me.generator.Context.prototype.setCatchFinallyBlocks=function(e,n){this.catchAddress_=e,n!=null&&(this.finallyAddress_=n)},me.generator.Context.prototype.setFinallyBlock=function(e){this.catchAddress_=0,this.finallyAddress_=e||0},me.generator.Context.prototype.leaveTryBlock=function(e,n){this.nextAddress=e,this.catchAddress_=n||0},me.generator.Context.prototype.enterCatchBlock=function(e){return this.catchAddress_=e||0,e=this.abruptCompletion_.exception,this.abruptCompletion_=null,e},me.generator.Context.prototype.enterFinallyBlock=function(e,n,o){o?this.finallyContexts_[o]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=e||0,this.finallyAddress_=n||0},me.generator.Context.prototype.leaveFinallyBlock=function(e,n){if(n=this.finallyContexts_.splice(n||0)[0],n=this.abruptCompletion_=this.abruptCompletion_||n){if(n.isException)return this.jumpToErrorHandler_();n.jumpTo!=null&&this.finallyAddress_<n.jumpTo?(this.nextAddress=n.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=e},me.generator.Context.prototype.forIn=function(e){return new me.generator.Context.PropertyIterator(e)},me.generator.Context.PropertyIterator=function(e){this.object_=e,this.properties_=[];for(var n in e)this.properties_.push(n);this.properties_.reverse()},me.generator.Context.PropertyIterator.prototype.getNext=function(){for(;this.properties_.length>0;){var e=this.properties_.pop();if(e in this.object_)return e}return null},me.generator.Engine_=function(e){this.context_=new me.generator.Context,this.program_=e},me.generator.Engine_.prototype.next_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,e,this.context_.next_):(this.context_.next_(e),this.nextStep_())},me.generator.Engine_.prototype.return_=function(e){this.context_.start_();var n=this.context_.yieldAllIterator_;return n?this.yieldAllStep_("return"in n?n.return:function(o){return{value:o,done:!0}},e,this.context_.return):(this.context_.return(e),this.nextStep_())},me.generator.Engine_.prototype.throw_=function(e){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,e,this.context_.next_):(this.context_.throw_(e),this.nextStep_())},me.generator.Engine_.prototype.yieldAllStep_=function(e,n,o){try{var a=e.call(this.context_.yieldAllIterator_,n);if(me.generator.ensureIteratorResultIsObject_(a),!a.done)return this.context_.stop_(),a;var d=a.value}catch(p){return this.context_.yieldAllIterator_=null,this.context_.throw_(p),this.nextStep_()}return this.context_.yieldAllIterator_=null,o.call(this.context_,d),this.nextStep_()},me.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var e=this.program_(this.context_);if(e)return this.context_.stop_(),{value:e.value,done:!1}}catch(n){this.context_.yieldResult=void 0,this.context_.throw_(n)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(e=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,e.isException)throw e.exception;return{value:e.return,done:!0}}return{value:void 0,done:!0}},me.generator.Generator_=function(e){this.next=function(n){return e.next_(n)},this.throw=function(n){return e.throw_(n)},this.return=function(n){return e.return_(n)},this[Symbol.iterator]=function(){return this}},me.generator.createGenerator=function(e,n){return n=new me.generator.Generator_(new me.generator.Engine_(n)),me.setPrototypeOf&&e.prototype&&me.setPrototypeOf(n,e.prototype),n},me.asyncExecutePromiseGenerator=function(e){function n(a){return e.next(a)}function o(a){return e.throw(a)}return new Promise(function(a,d){function p(v){v.done?a(v.value):Promise.resolve(v.value).then(n,o).then(p,d)}p(e.next())})},me.asyncExecutePromiseGeneratorFunction=function(e){return me.asyncExecutePromiseGenerator(e())},me.asyncExecutePromiseGeneratorProgram=function(e){return me.asyncExecutePromiseGenerator(new me.generator.Generator_(new me.generator.Engine_(e)))},me.polyfill("globalThis",function(e){return e||me.global},"es_2020","es3"),me.polyfill("Array.prototype.includes",function(e){return e||function(n,o){var a=this;a instanceof String&&(a=String(a));var d=a.length;for(o=o||0,o<0&&(o=Math.max(o+d,0));o<d;o++){var p=a[o];if(p===n||Object.is(p,n))return!0}return!1}},"es7","es3"),me.checkEs6ConformanceViaProxy=function(){try{var e={},n=Object.create(new me.global.Proxy(e,{get:function(o,a,d){return o==e&&a=="q"&&d==n}}));return n.q===!0}catch{return!1}},me.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,me.ES6_CONFORMANCE=me.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&me.checkEs6ConformanceViaProxy(),me.initSymbol=function(){},me.iteratorPrototype=function(e){return e={next:e},e[Symbol.iterator]=function(){return this},e},me.owns=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},me.MapEntry=function(){},me.polyfill("Set.prototype.difference",function(e){return e||function(n){me.checkIsSetInstance(this),me.checkIsSetLike(n);var o=me.getSmallerAndLargerSets(this,n);n=new Set(this);var a=o.smallerSetIterator;o=o.largerSet;for(var d=a.next();!d.done;)o.has(d.value)&&n.delete(d.value),d=a.next();return n}},"es_next","es6"),me.checkIsSetLike=function(e){if(typeof e!="object"||e===null||typeof e.size!="number"||e.size<0||typeof e.keys!="function"||typeof e.has!="function")throw new TypeError("Argument must be set-like")},me.checkIsValidIterator=function(e){if(typeof e!="object"||e===null||typeof e.next!="function")throw new TypeError("Invalid iterator.");return e},me.getSmallerAndLargerSets=function(e,n){return e.size<=n.size?{smallerSetIterator:e.keys(),largerSet:n}:{smallerSetIterator:me.checkIsValidIterator(n.keys()),largerSet:e}},me.checkIsSetInstance=function(e){if(!(e instanceof Set))throw new TypeError("Method must be called on an instance of Set.")},me.iteratorFromArray=function(e,n){if(me.ASSUME_ES6)return e[Symbol.iterator]();e instanceof String&&(e+="");var o=0,a=!1,d={next:function(){if(!a&&o<e.length){var p=o++;return{value:n(p,e[p]),done:!1}}return a=!0,{done:!0,value:void 0}}};return d[Symbol.iterator]=function(){return d},d},me.polyfill("Array.prototype.values",function(e){return e||function(){return me.iteratorFromArray(this,function(n,o){return o})}},"es8","es3"),me.polyfill("Array.prototype.flatMap",function(e){return e||function(n,o){var a=[];return Array.prototype.forEach.call(this,function(d,p){d=n.call(o,d,p,this),Array.isArray(d)?a.push.apply(a,d):a.push(d)}),a}},"es9","es5"),me.polyfill("Array.prototype.flat",function(e){return e||function(n){n=n===void 0?1:n;var o=[];return Array.prototype.forEach.call(this,function(a){Array.isArray(a)&&n>0?(a=Array.prototype.flat.call(a,n-1),o.push.apply(o,a)):o.push(a)}),o}},"es9","es5"),me.polyfill("Object.entries",function(e){return e||function(n){var o=[],a;for(a in n)me.owns(n,a)&&o.push([a,n[a]]);return o}},"es8","es3"),me.polyfill("Object.values",function(e){return e||function(n){var o=[],a;for(a in n)me.owns(n,a)&&o.push(n[a]);return o}},"es8","es3");var lo=Object.create(null),Wk={typeMap:lo},Fd=Object.create(null),Hn="default",Le=class{constructor(e){this.name=e}toString(){return this.name}};Le.CONNECTION_CHECKER=new Le("connectionChecker"),Le.CONNECTION_PREVIEWER=new Le("connectionPreviewer"),Le.CURSOR=new Le("cursor"),Le.EVENT=new Le("event"),Le.FIELD=new Le("field"),Le.INPUT=new Le("input"),Le.RENDERER=new Le("renderer"),Le.TOOLBOX=new Le("toolbox"),Le.THEME=new Le("theme"),Le.TOOLBOX_ITEM=new Le("toolboxItem"),Le.FLYOUTS_VERTICAL_TOOLBOX=new Le("flyoutsVerticalToolbox"),Le.FLYOUTS_HORIZONTAL_TOOLBOX=new Le("flyoutsHorizontalToolbox"),Le.FLYOUT_INFLATER=new Le("flyoutInflater"),Le.METRICS_MANAGER=new Le("metricsManager"),Le.BLOCK_DRAGGER=new Le("blockDragger"),Le.SERIALIZER=new Le("serializer"),Le.ICON=new Le("icon"),Le.PASTER=new Le("paster"),Le.VARIABLE_MODEL=new Le("variableModel"),Le.VARIABLE_MAP=new Le("variableMap");var Ai={DEFAULT:Hn,TEST_ONLY:Wk};Ai.Type=Le,Ai.getAllItems=T,Ai.getClass=_,Ai.getClassFromOptions=E,Ai.getObject=f,Ai.hasItem=h,Ai.register=i,Ai.unregister=c;var Ut=Object.create(null),Xk=750,uR="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Bd=null,rl={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},Ud=0,nl={TOUCH_ENABLED:uR,TOUCH_MAP:rl};nl.checkTouchIdentifier=C,nl.clearTouchIdentifier=R,nl.getTouchIdentifierFromEvent=N,nl.longStart=g,nl.longStop=S,nl.shouldHandleEvent=L;var NE,hR,dR,_R,Hd,Gd,xE,fR,TR,pR;(function(e){function n(a){return o.includes(a.toUpperCase())}NE=e;const o=NE.toUpperCase();hR=n("JavaFX"),dR=n("WebKit"),_R=n("Gecko")&&!dR,Hd=n("Android"),e=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Gd=n("iPad")||n("Macintosh")&&e>0,xE=n("iPhone")&&!Gd,fR=n("Macintosh"),TR=Gd||Hd&&!n("Mobile")||n("Silk"),pR=!TR&&(xE||Hd)})(globalThis.navigator&&globalThis.navigator.userAgent||"");var zk=NE,ER=hR,gR=_R,bE=Hd,Vd=Gd,mR=xE,yE=fR,$R=pR,Yk={ANDROID:bE,GECKO:gR,IPAD:Vd,IPHONE:mR,JavaFx:ER,MAC:yE,MOBILE:$R,raw:zk},IR=40,OR=125,Ci={};Ci.bind=I,Ci.conditionalBind=A,Ci.getScrollDeltaPixels=U,Ci.isRightButton=G,Ci.isTargetInput=H,Ci.mouseToSvg=x,Ci.unbind=k;var de;(function(e){e.BLOCK_CREATE="create",e.BLOCK_DELETE="delete",e.BLOCK_CHANGE="change",e.BLOCK_FIELD_INTERMEDIATE_CHANGE="block_field_intermediate_change",e.BLOCK_MOVE="move",e.VAR_CREATE="var_create",e.VAR_DELETE="var_delete",e.VAR_RENAME="var_rename",e.VAR_TYPE_CHANGE="var_type_change",e.UI="ui",e.BLOCK_DRAG="drag",e.SELECTED="selected",e.CLICK="click",e.MARKER_MOVE="marker_move",e.BUBBLE_OPEN="bubble_open",e.TRASHCAN_OPEN="trashcan_open",e.TOOLBOX_ITEM_SELECT="toolbox_item_select",e.THEME_CHANGE="theme_change",e.VIEWPORT_CHANGE="viewport_change",e.COMMENT_CREATE="comment_create",e.COMMENT_DELETE="comment_delete",e.COMMENT_CHANGE="comment_change",e.COMMENT_MOVE="comment_move",e.COMMENT_RESIZE="comment_resize",e.COMMENT_DRAG="comment_drag",e.COMMENT_COLLAPSE="comment_collapse",e.FINISHED_LOADING="finished_loading"})(de||(de={}));var SR=[de.BLOCK_CREATE,de.BLOCK_MOVE,de.COMMENT_CREATE,de.COMMENT_MOVE],RR="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",LR={genUid:()=>{const e=RR.length,n=[];for(let o=0;o<20;o++)n[o]=RR.charAt(Math.random()*e);return n.join("")}},Kk=0,kE={TEST_ONLY:LR};kE.genUid=re,kE.getNextUniqueId=B;var AR="",jc=!0,wE=0,ME="ORPHANED_BLOCK",vi=[],CR={FIRE_QUEUE:vi,enqueueEvent:Q,fireNow:M,fireInternal:oe,setGroupInternal:Ne};r.disable$$module$build$src$core$events$utils,r.enable$$module$build$src$core$events$utils,r.getGroup$$module$build$src$core$events$utils,r.setGroup$$module$build$src$core$events$utils,r.setRecordUndo$$module$build$src$core$events$utils;var Jc="http://www.w3.org/2000/svg",sl="http://www.w3.org/1999/xhtml",Gn="http://www.w3.org/1999/xlink",Ni;(function(e){e[e.ELEMENT_NODE=1]="ELEMENT_NODE",e[e.TEXT_NODE=3]="TEXT_NODE",e[e.COMMENT_NODE=8]="COMMENT_NODE"})(Ni||(Ni={}));var As=null,DE=0,qc=null,Pr={HTML_NS:sl};Pr.NodeType=Ni,Pr.SVG_NS=Jc,Pr.XLINK_NS=Gn,Pr.addClass=_e,Pr.createSvgElement=b,Pr.getFastTextWidth=rn,Pr.getFastTextWidthWithSizeString=Wt,Pr.getTextWidth=wt,Pr.hasClass=Ze,Pr.insertAfter=ut,Pr.measureFontMetrics=te,Pr.removeClass=ke,Pr.removeClasses=He,Pr.removeNode=ve,Pr.setCssTransform=Bt,Pr.startTextWidthCache=tr,Pr.stopTextWidthCache=hr;var Fr=class{static findFocusedNode(e){var n=e.getRootFocusableNode();if(!n.canBeFocused())return null;var o=n.getFocusableElement();return Ze(o,Fr.ACTIVE_CLASS_NAME)||Ze(o,Fr.PASSIVE_CSS_CLASS_NAME)||(n=o.querySelector(this.ACTIVE_FOCUS_NODE_CSS_SELECTOR),(n instanceof HTMLElement||n instanceof SVGElement)&&(n=Fr.findFocusableNodeFor(n,e)))?n:(o=o.querySelector(this.PASSIVE_FOCUS_NODE_CSS_SELECTOR),(o instanceof HTMLElement||o instanceof SVGElement)&&(e=Fr.findFocusableNodeFor(o,e))?e:null)}static findFocusableNodeFor(e,n){if(!e.id||e.id==="null"||n.getNestedTrees().map(d=>Fr.findFocusableNodeFor(e,d)).findIndex(d=>!!d)!==-1)return null;var o=n.getRootFocusableNode();if(o.canBeFocused()&&e===o.getFocusableElement())return o;var a;return(o=(a=n.lookUpFocusableNode(e.id))!=null?a:null)?o:(a=e.parentElement,!o&&a?Fr.findFocusableNodeFor(a,n):null)}};Fr.ACTIVE_CLASS_NAME="blocklyActiveFocus",Fr.PASSIVE_CSS_CLASS_NAME="blocklyPassiveFocus",Fr.ACTIVE_FOCUS_NODE_CSS_SELECTOR=`.${Fr.ACTIVE_CLASS_NAME}`,Fr.PASSIVE_FOCUS_NODE_CSS_SELECTOR=`.${Fr.PASSIVE_CSS_CLASS_NAME}`;var jk=class{constructor(e,n){this.tree=e,this.rootShouldBeAutoTabbable=n}},Yr=class{constructor(e){this.previouslyFocusedNode=this.focusedNode=null,this.registeredTrees=[],this.isUpdatingFocusedNode=this.recentlyLostAllFocus=this.lockFocusStateChanges=this.currentlyHoldsEphemeralFocus=!1;const n=o=>{if(!this.isUpdatingFocusedNode){this.recentlyLostAllFocus=!o;var a=null;if(o instanceof HTMLElement||o instanceof SVGElement){for(var d of this.registeredTrees)if(a=Fr.findFocusableNodeFor(o,d.tree))break}if(a&&a.canBeFocused()){o=a.getFocusableTree();let p;d=(p=this.focusedNode)==null?void 0:p.getFocusableTree(),a===o.getRootFocusableNode()&&o!==d?this.focusTree(o):this.focusNode(a)}else this.defocusCurrentFocusedNode()}};e("focusin",o=>{o instanceof FocusEvent&&n(document.activeElement)}),e("focusout",o=>{o instanceof FocusEvent&&n(o.relatedTarget)})}registerTree(e,n=!1){if(this.ensureManagerIsUnlocked(),this.isRegistered(e))throw Error(`Attempted to re-register already registered tree: ${e}.`);this.registeredTrees.push(new jk(e,n));const o=e.getRootFocusableNode().getFocusableElement();if(!o.id||o.id==="null")throw Error(`Attempting to register a tree with a root element that has an invalid ID: ${e}.`);n&&(o.tabIndex=0)}isRegistered(e){return!!this.lookUpRegistration(e)}lookUpRegistration(e){let n;return(n=this.registeredTrees.find(o=>o.tree===e))!=null?n:null}unregisterTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to unregister not registered tree: ${e}.`);var n=this.registeredTrees.findIndex(d=>d.tree===e);const o=this.registeredTrees[n];this.registeredTrees.splice(n,1),n=Fr.findFocusedNode(e);const a=e.getRootFocusableNode();n&&this.removeHighlight(n),this.focusedNode!==n&&this.focusedNode!==a||this.updateFocusedNode(null),this.removeHighlight(a),o.rootShouldBeAutoTabbable&&e.getRootFocusableNode().getFocusableElement().removeAttribute("tabindex")}getFocusedTree(){let e,n;return(n=(e=this.focusedNode)==null?void 0:e.getFocusableTree())!=null?n:null}getFocusedNode(){return this.focusedNode}focusTree(e){if(this.ensureManagerIsUnlocked(),!this.isRegistered(e))throw Error(`Attempted to focus unregistered tree: ${e}.`);const n=Fr.findFocusedNode(e),o=e.getRestoredFocusableNode(n);e=e.getRootFocusableNode();let a;this.focusNode((a=o??n)!=null?a:e)}focusNode(e){this.ensureManagerIsUnlocked();const n=!this.currentlyHoldsEphemeralFocus;n&&(this.isUpdatingFocusedNode=!0);var o,a=((o=this.focusedNode)==null?void 0:o.getFocusableElement())!==document.activeElement;if(this.focusedNode!==e||a)if(e.canBeFocused()){if(o=e.getFocusableTree(),!this.isRegistered(o))throw Error(`Attempted to focus unregistered node: ${e}.`);a=e.getFocusableElement(),a.id&&a.id!=="null"||console.warn("Trying to focus a node that has an invalid ID.");var d=Fr.findFocusableNodeFor(a,o);a=Fr.findFocusedNode(o);var p=e;if(d!==e){p=o.getRestoredFocusableNode(a),e=o.getRootFocusableNode();var v;p=(v=p??a)!=null?v:e}e=this.focusedNode,v=e?.getFocusableTree(),e&&this.passivelyFocusNode(e,o),o=o.getRootFocusableNode(),a&&this.removeHighlight(a),o!==p&&this.removeHighlight(o),this.currentlyHoldsEphemeralFocus||this.activelyFocusNode(p,v??null),this.updateFocusedNode(p)}else console.warn("Trying to focus a node that can't be focused.");n&&(this.isUpdatingFocusedNode=!1)}takeEphemeralFocus(e){if(this.ensureManagerIsUnlocked(),this.currentlyHoldsEphemeralFocus)throw Error(`Attempted to take ephemeral focus when it's already held, with new element: ${e}.`);this.currentlyHoldsEphemeralFocus=!0,this.focusedNode&&this.passivelyFocusNode(this.focusedNode,null),e.focus({preventScroll:!0});let n=!1;return()=>{if(n)throw Error(`Attempted to finish ephemeral focus twice for element: ${e}.`);if(n=!0,this.currentlyHoldsEphemeralFocus=!1,this.focusedNode){this.activelyFocusNode(this.focusedNode,null);const o=this.focusedNode;setTimeout(()=>{!this.focusedNode&&this.previouslyFocusedNode===o&&this.recentlyLostAllFocus&&this.focusNode(o)},0)}}}ephemeralFocusTaken(){return this.currentlyHoldsEphemeralFocus}ensureManagerIsUnlocked(){if(this.lockFocusStateChanges)throw Error("FocusManager state changes cannot happen in a tree/node focus/blur callback.")}updateFocusedNode(e){this.previouslyFocusedNode=this.focusedNode,this.focusedNode=e}defocusCurrentFocusedNode(){this.focusedNode&&!this.currentlyHoldsEphemeralFocus&&(this.passivelyFocusNode(this.focusedNode,null),this.updateFocusedNode(null))}activelyFocusNode(e,n){this.lockFocusStateChanges=!0;const o=e.getFocusableTree(),a=e.getFocusableElement();let d;const p=(d=this.lookUpRegistration(o))==null?void 0:d.rootShouldBeAutoTabbable;o!==n&&(o.onTreeFocus(e,n),p&&(o.getRootFocusableNode().getFocusableElement().tabIndex=-1)),e.onNodeFocus(),this.lockFocusStateChanges=!1,p&&e===o.getRootFocusableNode()||a.hasAttribute("tabindex")||(a.tabIndex=-1),this.setNodeToVisualActiveFocus(e),a.focus({preventScroll:!0})}passivelyFocusNode(e,n){this.lockFocusStateChanges=!0;const o=e.getFocusableTree();if(o!==n){o.onTreeBlur(n);let a;(a=this.lookUpRegistration(o))!=null&&a.rootShouldBeAutoTabbable&&(o.getRootFocusableNode().getFocusableElement().tabIndex=0)}e.onNodeBlur(),this.lockFocusStateChanges=!1,o!==n&&this.setNodeToVisualPassiveFocus(e)}setNodeToVisualActiveFocus(e){e=e.getFocusableElement(),_e(e,Yr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),ke(e,Yr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}setNodeToVisualPassiveFocus(e){e=e.getFocusableElement(),ke(e,Yr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),_e(e,Yr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}removeHighlight(e){e=e.getFocusableElement(),ke(e,Yr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),ke(e,Yr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME)}static getFocusManager(){return Yr.focusManager||(Yr.focusManager=new Yr(document.addEventListener)),Yr.focusManager}};Yr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyActiveFocus",Yr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME="blocklyPassiveFocus",Yr.focusManager=null,r.getFocusManager$$module$build$src$core$focus_manager;var vR={};vR.deepMerge=ct;var xt=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(e,n){if(this.shortcuts.get(e.name)&&!n)throw Error(`Shortcut named "${e.name}" already exists.`);if(this.shortcuts.set(e.name,e),n=e.keyCodes,n!=null&&n.length)for(const o of n)this.addKeyMapping(o,e.name,!!e.allowCollision)}unregister(e){return this.shortcuts.get(e)?(this.removeAllKeyMappings(e),this.shortcuts.delete(e),!0):(console.warn(`Keyboard shortcut named "${e}" not found.`),!1)}addKeyMapping(e,n,o){e=`${e}`;const a=this.keyMap.get(e);if(a&&!o)throw Error(`Shortcut named "${n}" collides with shortcuts "${a}"`);a&&o?a.unshift(n):this.keyMap.set(e,[n])}removeKeyMapping(e,n,o){const a=this.keyMap.get(e);if(!a)return o||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1;const d=a.indexOf(n);return d>-1?(a.splice(d,1),a.length===0&&this.keyMap.delete(e),!0):(o||console.warn(`No keyboard shortcut named "${n}" registered with key code "${e}"`),!1)}removeAllKeyMappings(e){for(const n of this.keyMap.keys())this.removeKeyMapping(n,e,!0)}setKeyMap(e){this.keyMap.clear();for(const n in e)this.keyMap.set(n,e[n])}getKeyMap(){const e=Object.create(null);for(const[n,o]of this.keyMap)e[n]=o;return e}getRegistry(){const e=Object.create(null);for(const[n,o]of this.shortcuts)e[n]=o;return ct(Object.create(null),e)}onKeyDown(e,n){var o=this.serializeKeyEvent(n);if(o=this.getShortcutNamesByKeyCode(o),!o)return!1;for(const a of o){o=this.shortcuts.get(a);let d;if(!o||o.preconditionFn&&!o.preconditionFn(e,{focusedNode:(d=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?d:void 0}))continue;let p,v,X;if((v=(p=o).callback)!=null&&v.call(p,e,n,o,{focusedNode:(X=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode())!=null?X:void 0}))return!0}return!1}getShortcutNamesByKeyCode(e){let n;return((n=this.keyMap.get(e))==null?void 0:n.slice())||[]}getKeyCodesByShortcutName(e){const n=[];for(const[o,a]of this.keyMap)a.indexOf(e)>-1&&n.push(o);return n}serializeKeyEvent(e){let n="";for(const o in xt.modifierKeys)e.getModifierState(o)&&(n!==""&&(n+="+"),n+=o);return n!==""&&e.keyCode?n+="+"+e.keyCode:e.keyCode&&(n=String(e.keyCode)),n}checkModifiers(e){for(const n of e)if(!(n in xt.modifierKeys))throw Error(n+" is not a valid modifier key.")}createSerializedKey(e,n){let o="";if(n){this.checkModifiers(n);for(const a in xt.modifierKeys)n.includes(xt.modifierKeys[a])&&(o!==""&&(o+="+"),o+=a)}return o!==""&&e?o+="+"+e:e&&(o=`${e}`),o}};xt.registry=new xt,function(e){e=e.modifierKeys||(e.modifierKeys={}),e[e.Shift=16]="Shift",e[e.Control=17]="Control",e[e.Alt=18]="Alt",e[e.Meta=91]="Meta"}(xt||(xt={}));var Zc=Object.create(null),NR,xR,Qc=[],bR={defineBlocksWithJsonArrayInternal:ee},Lr={TEST_ONLY:bR};Lr.createBlockDefinitionsFromJsonArray=r.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Lr.defineBlocks=r.defineBlocks$$module$build$src$core$common,Lr.defineBlocksWithJsonArray=w,Lr.draggingConnections=Qc,Lr.fireSelectedEvent=Be,Lr.getAllWorkspaces=et,Lr.getBlockTypeCounts=Un,Lr.getMainWorkspace=m,Lr.getParentContainer=gt,Lr.getSelected=ie,Lr.getWorkspaceById=Ot,Lr.globalShortcutHandler=ae,Lr.registerWorkspace=ot,Lr.setMainWorkspace=D,Lr.setParentContainer=xn,Lr.setSelected=le,Lr.svgResize=Bn,Lr.unregisterWorkpace=Mt;var Ea=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=r.getGroup$$module$build$src$core$events$utils(),this.recordUndo=j()}toJson(){return{type:this.type,group:this.group}}static fromJson(e,n,o){return o.isBlank=!1,o.group=e.group||"",o.workspaceId=n.id,o}isNull(){return!1}run(e){}getEventWorkspace_(){let e;if(this.workspaceId&&(e=Ot(this.workspaceId)),!e)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return e}},ti=class extends Ea{constructor(e){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=typeof e>"u",this.workspaceId=e||""}},PE=class extends ti{constructor(e,n,o){n=e?e.workspace.id:n,n===null&&(n=void 0),super(n),this.type=de.CLICK,this.blockId=e?e.id:void 0,this.targetType=o}toJson(){const e=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return e.targetType=this.targetType,e.blockId=this.blockId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new PE),n.targetType=e.targetType,n.blockId=e.blockId,n}},FE;(function(e){e.BLOCK="block",e.WORKSPACE="workspace",e.ZOOM_CONTROLS="zoom_controls"})(FE||(FE={})),i(Le.EVENT,de.CLICK,PE);var yR={};yR.removeElem=Ae;var xi=class{constructor(e){this.name=e}toString(){return this.name}};xi.POSITIONABLE=new xi("positionable"),xi.DRAG_TARGET=new xi("drag_target"),xi.DELETE_AREA=new xi("delete_area"),xi.AUTOHIDEABLE=new xi("autohideable");var Ht=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(e,n){const o=e.component.id;if(!n&&this.componentData.has(o)){var a;throw Error('Plugin "'+o+'" with capabilities "'+((a=this.componentData.get(o))==null?void 0:a.capabilities)+'" already added.')}for(this.componentData.set(o,e),n=[],a=0;a<e.capabilities.length;a++){const d=String(e.capabilities[a]).toLowerCase();if(n.push(d),this.capabilityToComponentIds.has(d)){let p;(p=this.capabilityToComponentIds.get(d))==null||p.push(o)}else this.capabilityToComponentIds.set(d,[o])}this.componentData.get(o).capabilities=n}removeComponent(e){const n=this.componentData.get(e);if(n){for(let o=0;o<n.capabilities.length;o++){const a=String(n.capabilities[o]).toLowerCase();Ae(this.capabilityToComponentIds.get(a),e)}this.componentData.delete(e)}}addCapability(e,n){if(!this.getComponent(e))throw Error('Cannot add capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');if(this.hasCapability(e,n))console.warn('Plugin "'+e+'already has capability "'+n+'"');else{n=`${n}`.toLowerCase();var o;(o=this.componentData.get(e))==null||o.capabilities.push(n);var a;(a=this.capabilityToComponentIds.get(n))==null||a.push(e)}}removeCapability(e,n){if(!this.getComponent(e))throw Error('Cannot remove capability, "'+n+'". Plugin "'+e+'" has not been added to the ComponentManager');this.hasCapability(e,n)?(n=`${n}`.toLowerCase(),Ae(this.componentData.get(e).capabilities,n),Ae(this.capabilityToComponentIds.get(n),e)):console.warn('Plugin "'+e+`doesn't have capability "`+n+'" to remove')}hasCapability(e,n){return n=`${n}`.toLowerCase(),this.componentData.has(e)&&this.componentData.get(e).capabilities.includes(n)}getComponent(e){let n;return(n=this.componentData.get(e))==null?void 0:n.component}getComponents(e,n){if(e=`${e}`.toLowerCase(),e=this.capabilityToComponentIds.get(e),!e)return[];const o=[];if(n){const a=[];e.forEach(d=>{a.push(this.componentData.get(d))}),a.sort(function(d,p){return d.weight-p.weight}),a.forEach(function(d){o.push(d.component)})}else e.forEach(a=>{o.push(this.componentData.get(a).component)});return o}};Ht.Capability=xi,function(e){e=e.ComponentWeight||(e.ComponentWeight={}),e[e.TOOLBOX_WEIGHT=0]="TOOLBOX_WEIGHT",e[e.FLYOUT_WEIGHT=1]="FLYOUT_WEIGHT",e[e.TRASHCAN_WEIGHT=2]="TRASHCAN_WEIGHT",e[e.ZOOM_CONTROLS_WEIGHT=3]="ZOOM_CONTROLS_WEIGHT"}(Ht||(Ht={})),Ht.ComponentWeight;var BE=!1,UE=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
  user-select: none;
  -webkit-user-select: none;
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyEmboss {
  filter: var(--blocklyEmbossFilter);
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  /* @todo: spec for maximum height. */
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyHighlighted>.blocklyPath {
  filter: var(--blocklyEmbossFilter);
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  cursor: grab;
  cursor: -webkit-grab;
}

.blocklyDragging {
  cursor: grabbing;
  cursor: -webkit-grabbing;
  /* Drag surface disables events to not block the toolbox, so we have to
   * reenable them here for the cursor values to work. */
  pointer-events: auto;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete,
.blocklyDragging.blocklyDraggingDelete .blocklyField {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabledPattern>.blocklyPath {
  fill: var(--blocklyDisabledPattern);
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyNonEditableField>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover):not(:focus),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
  height: 100%;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Remove the increase and decrease arrows on the field number editor */
input.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,
input.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

input[type=number] {
  -moz-appearance: textfield;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
  pointer-events: none;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu:focus {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}

.blocklyMenuSeparator {
  background-color: #ccc;
  height: 1px;
  border: 0;
  margin-left: 4px;
  margin-right: 4px;
}

.blocklyBlockDragSurface, .blocklyAnimationLayer {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 80;
  pointer-events: none;
}

.blocklyField {
  cursor: default;
}

.blocklyInputField {
  cursor: text;
}

.blocklyDragging .blocklyField,
.blocklyDragging .blocklyIconGroup {
  cursor: grabbing;
}

.blocklyActiveFocus:is(
  .blocklyFlyout,
  .blocklyWorkspace,
  .blocklyField,
  .blocklyPath,
  .blocklyHighlightedConnectionPath,
  .blocklyComment,
  .blocklyBubble,
  .blocklyIconGroup,
  .blocklyTextarea
) {
  outline: none;
}
`,HE={};HE.inject=rt,HE.register=Xe;var xe=class{constructor(e,n){this.x=e,this.y=n}clone(){return new xe(this.x,this.y)}scale(e){return this.x*=e,this.y*=e,this}translate(e,n){return this.x+=e,this.y+=n,this}static equals(e,n){return e===n?!0:e&&n?e.x===n.x&&e.y===n.y:!1}static distance(e,n){const o=e.x-n.x;return e=e.y-n.y,Math.sqrt(o*o+e*e)}static magnitude(e){return Math.sqrt(e.x*e.x+e.y*e.y)}static difference(e,n){return new xe(e.x-n.x,e.y-n.y)}static sum(e,n){return new xe(e.x+n.x,e.y+n.y)}},ue=class{constructor(e){this.tagName=e}toString(){return this.tagName}};ue.ANIMATE=new ue("animate"),ue.CIRCLE=new ue("circle"),ue.CLIPPATH=new ue("clipPath"),ue.DEFS=new ue("defs"),ue.FECOMPOSITE=new ue("feComposite"),ue.FECOMPONENTTRANSFER=new ue("feComponentTransfer"),ue.FEFLOOD=new ue("feFlood"),ue.FEFUNCA=new ue("feFuncA"),ue.FEGAUSSIANBLUR=new ue("feGaussianBlur"),ue.FEPOINTLIGHT=new ue("fePointLight"),ue.FESPECULARLIGHTING=new ue("feSpecularLighting"),ue.FILTER=new ue("filter"),ue.FOREIGNOBJECT=new ue("foreignObject"),ue.G=new ue("g"),ue.IMAGE=new ue("image"),ue.LINE=new ue("line"),ue.PATH=new ue("path"),ue.PATTERN=new ue("pattern"),ue.POLYGON=new ue("polygon"),ue.RECT=new ue("rect"),ue.SVG=new ue("svg"),ue.TEXT=new ue("text"),ue.TSPAN=new ue("tspan");var it=class{constructor(e,n,o,a){this.top=e,this.bottom=n,this.left=o,this.right=a}static from(e){return new it(e.y,e.y+e.height,e.x,e.x+e.width)}clone(){return new it(this.top,this.bottom,this.left,this.right)}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}getOrigin(){return new xe(this.left,this.top)}contains(e,n){return e>=this.left&&e<=this.right&&n>=this.top&&n<=this.bottom}intersects(e){return this.left<=e.right&&this.right>=e.left&&this.bottom>=e.top&&this.top<=e.bottom}static equals(e,n){return e===n?!0:e&&n?e.top===n.top&&e.bottom===n.bottom&&e.left===n.left&&e.right===n.right:!1}static createFromPoint(e,n,o){const a=e.x;return e=e.y,new it(e,e+o,a,a+n)}},lt=class{constructor(e,n){this.width=e,this.height=n}static equals(e,n){return e===n?!0:e&&n?e.width===n.width&&e.height===n.height:!1}static max(e,n){return new lt(Math.max(e.width,n.width),Math.max(e.height,n.height))}static min(e,n){return new lt(Math.min(e.width,n.width),Math.min(e.height,n.height))}},kR={getSizeInternal:Oi},ao={TEST_ONLY:kR};ao.getBorderBox=yc,ao.getComputedStyle=Rr,ao.getContainerOffsetToScrollInto=W,ao.getPageOffset=zs,ao.getSize=wr,ao.getViewportPageOffset=bc,ao.scrollIntoContainerView=y;var wR=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,MR=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Jk={XY_REGEX:wR,XY_STYLE_REGEX:MR},il={TEST_ONLY:Jk};il.getDocumentScroll=K,il.getInjectionDivXY=F,il.getRelativeXY=P,il.getViewportBBox=z,il.screenToWsCoordinates=Te,il.wsToScreenCoordinates=Se;var sr=class{constructor(e,n,o,a,d){this.workspace=e,this.horizontal=n,this.oldHostMetrics=null,this.ratio=1,this.origin=new xe(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new xe(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=o||!1,this.margin=d!==void 0?d:sr.DEFAULT_SCROLLBAR_MARGIN,e="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),a&&(e+=" "+a),this.outerSvg=b(ue.SVG,{class:e}),a=b(ue.G,{},this.outerSvg),this.svgBackground=b(ue.RECT,{class:"blocklyScrollbarBackground"},a),e=Math.floor((sr.scrollbarThickness-5)/2),this.svgHandle=b(ue.RECT,{class:"blocklyScrollbarHandle",rx:e,ry:e},a),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),ut(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),n?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=A(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=A(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const e=sr.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(e)),this.outerSvg.setAttribute("height",String(e)),this.svgHandle.setAttribute("height",String(e-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(e)),this.outerSvg.setAttribute("width",String(e)),this.svgHandle.setAttribute("width",String(e-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),k(this.onMouseDownBarWrapper_),k(this.onMouseDownHandleWrapper_),ve(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength)}setHandleLength(e){this.handleLength=e,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(e){return e=e<=0||isNaN(e)?0:Math.min(e,this.scrollbarLength-this.handleLength)}setHandlePosition(e){this.handlePosition=e,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(e){this.scrollbarLength=e,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(e,n){this.position.x=e,this.position.y=n,Bt(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(e){!e&&(e=this.workspace.getMetrics(),!e)||this.oldHostMetrics&&sr.metricsAreEquivalent(e,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(e):this.resizeVertical(e),this.oldHostMetrics=e,this.updateMetrics())}requiresViewResize(e){return this.oldHostMetrics?this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft||this.oldHostMetrics.absoluteTop!==e.absoluteTop:!0}resizeHorizontal(e){this.requiresViewResize(e)?this.resizeViewHorizontal(e):this.resizeContentHorizontal(e)}resizeViewHorizontal(e){var n=e.viewWidth-this.margin*2;this.pair&&(n-=sr.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),n=e.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(n+=sr.scrollbarThickness),this.setPosition(n,e.absoluteTop+e.viewHeight-sr.scrollbarThickness-this.margin),this.resizeContentHorizontal(e)}resizeContentHorizontal(e){if(e.viewWidth>=e.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewWidth/e.scrollWidth;n=this.constrainHandleLength(n),this.setHandleLength(n),n=e.scrollWidth-e.viewWidth;var o=this.scrollbarLength-this.handleLength;e=(e.viewLeft-e.scrollLeft)/n*o,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=o/n}}resizeVertical(e){this.requiresViewResize(e)?this.resizeViewVertical(e):this.resizeContentVertical(e)}resizeViewVertical(e){let n=e.viewHeight-this.margin*2;this.pair&&(n-=sr.scrollbarThickness),this.setScrollbarLength(Math.max(0,n)),this.setPosition(this.workspace.RTL?e.absoluteLeft+this.margin:e.absoluteLeft+e.viewWidth-sr.scrollbarThickness-this.margin,e.absoluteTop+this.margin),this.resizeContentVertical(e)}resizeContentVertical(e){if(e.viewHeight>=e.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var n=this.scrollbarLength*e.viewHeight/e.scrollHeight;n=this.constrainHandleLength(n),this.setHandleLength(n),n=e.scrollHeight-e.viewHeight;var o=this.scrollbarLength-this.handleLength;e=(e.viewTop-e.scrollTop)/n*o,e=this.constrainHandlePosition(e),this.setHandlePosition(e),this.ratio=o/n}}isVisible(){return this.isHandleVisible}setContainerVisible(e){const n=e!==this.containerVisible;this.containerVisible=e,n&&this.updateDisplay_()}setVisible(e){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(e)}setVisibleInternal(e){const n=e!==this.isVisible();this.isHandleVisible=e,n&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(e){if(this.workspace.markFocused(),R(),this.cleanUp(),G(e))e.stopPropagation();else{var n=x(e,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());n=this.horizontal?n.x:n.y;var o=F(this.svgHandle);o=this.horizontal?o.x:o.y;var a=this.handlePosition,d=this.handleLength*.95;n<=o?a-=d:n>=o+this.handleLength&&(a+=d),this.setHandlePosition(this.constrainHandlePosition(a)),this.updateMetrics(),e.stopPropagation(),e.preventDefault()}}onMouseDownHandle(e){this.workspace.markFocused(),this.cleanUp(),G(e)?e.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?e.clientX:e.clientY,this.onMouseUpWrapper_=A(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=A(document,"pointermove",this,this.onMouseMoveHandle),e.stopPropagation(),e.preventDefault())}onMouseMoveHandle(e){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?e.clientX:e.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){R(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(k(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(k(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let e=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(e)&&(e=0),e}updateMetrics(){const e=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:e}):this.workspace.setMetrics({y:e})}set(e,n){this.setHandlePosition(this.constrainHandlePosition(e*this.ratio)),(n||n===void 0)&&this.updateMetrics()}setOrigin(e,n){this.origin=new xe(e,n)}static metricsAreEquivalent(e,n){return e.viewWidth===n.viewWidth&&e.viewHeight===n.viewHeight&&e.viewLeft===n.viewLeft&&e.viewTop===n.viewTop&&e.absoluteTop===n.absoluteTop&&e.absoluteLeft===n.absoluteLeft&&e.scrollWidth===n.scrollWidth&&e.scrollHeight===n.scrollHeight&&e.scrollLeft===n.scrollLeft&&e.scrollTop===n.scrollTop}};sr.scrollbarThickness=uR?25:15,sr.DEFAULT_SCROLLBAR_MARGIN=.5;var Wd={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},GE={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Xd,DOMParser:eu,XMLSerializer:tu}=globalThis;eu&&(Wd=new eu),tu&&(GE=new tu);var DR="https://developers.google.com/blockly/xml",qk=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,ga={NAME_SPACE:DR};ga.createElement=r.createElement$$module$build$src$core$utils$xml,ga.createTextNode=r.createTextNode$$module$build$src$core$utils$xml,ga.domToText=ge,ga.injectDependencies=Ee,ga.textToDom=r.textToDom$$module$build$src$core$utils$xml;var VE="categoryToolbox",PR="flyoutToolbox",at;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(at||(at={}));var FR={hasCategoriesInternal:We},co={};co.Position=at,co.TEST_ONLY=FR,co.convertFlyoutDefToJsonArray=ze,co.convertToolboxDefToJson=De,co.hasCategories=Ue,co.isCategoryCollapsible=nt,co.parseToolboxTree=Si;var bi;(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(bi||(bi={}));var ma;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(ma||(ma={}));var uo;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN"})(uo||(uo={}));var ol={};ol.bumpDirection=uo,ol.bumpPositionRect=os,ol.getCornerOppositeToolbox=Ks,ol.getStartPositionRect=Ys,ol.horizontalPosition=ma,ol.verticalPosition=bi;var $n={width:96,height:124,url:"sprites.png"},BR=class{constructor(e){this.workspace=e,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=b(ue.G,{});const e=String(Math.random()).substring(2);return this.createZoomOutSvg(e),this.createZoomInSvg(e),this.workspace.isMovable()&&this.createZoomResetSvg(e),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:Ht.ComponentWeight.ZOOM_CONTROLS_WEIGHT,capabilities:[Ht.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&ve(this.svgGroup);for(const e of this.boundEvents)k(e);this.boundEvents.length=0}getBoundingRectangle(){let e=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(e+=this.LARGE_SPACING+this.HEIGHT),new it(this.top,this.top+e,this.left,this.left+this.WIDTH)}position(e,n){if(this.initialized){var o=Ks(this.workspace,e),a=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(a+=this.LARGE_SPACING+this.HEIGHT),e=Ys(o,new lt(this.WIDTH,a),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,e,this.workspace),o=o.vertical,n=os(e,this.MARGIN_VERTICAL,o===bi.TOP?uo.DOWN:uo.UP,n),o===bi.TOP){var d=this.SMALL_SPACING+this.HEIGHT,p;(p=this.zoomInGroup)==null||p.setAttribute("transform","translate(0, "+d+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(d+this.LARGE_SPACING+this.HEIGHT)+")")}else{p=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0;let X;(X=this.zoomInGroup)==null||X.setAttribute("transform","translate(0, "+p+")"),p=p+this.SMALL_SPACING+this.HEIGHT,(d=this.zoomOutGroup)==null||d.setAttribute("transform","translate(0, "+p+")")}this.top=n.top,this.left=n.left;var v;(v=this.svgGroup)==null||v.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(e){this.zoomOutGroup=b(ue.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const n=b(ue.CLIPPATH,{id:"blocklyZoomoutClipPath"+e},this.zoomOutGroup);b(ue.RECT,{width:32,height:32},n),b(ue.IMAGE,{width:$n.width,height:$n.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+e+")"},this.zoomOutGroup).setAttributeNS(Gn,"xlink:href",this.workspace.options.pathToMedia+$n.url),this.boundEvents.push(A(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(e){this.zoomInGroup=b(ue.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const n=b(ue.CLIPPATH,{id:"blocklyZoominClipPath"+e},this.zoomInGroup);b(ue.RECT,{width:32,height:32},n),b(ue.IMAGE,{width:$n.width,height:$n.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+e+")"},this.zoomInGroup).setAttributeNS(Gn,"xlink:href",this.workspace.options.pathToMedia+$n.url),this.boundEvents.push(A(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(e,n){this.workspace.markFocused(),this.workspace.zoomCenter(e),this.fireZoomEvent(),R(),n.stopPropagation(),n.preventDefault()}createZoomResetSvg(e){this.zoomResetGroup=b(ue.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const n=b(ue.CLIPPATH,{id:"blocklyZoomresetClipPath"+e},this.zoomResetGroup);b(ue.RECT,{width:32,height:32},n),b(ue.IMAGE,{width:$n.width,height:$n.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+e+")"},this.zoomResetGroup).setAttributeNS(Gn,"xlink:href",this.workspace.options.pathToMedia+$n.url),this.boundEvents.push(A(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(e){this.workspace.markFocused();const n=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(n),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),R(),e.stopPropagation(),e.preventDefault()}fireZoomEvent(){const e=new(ce(de.CLICK))(null,this.workspace.id,"zoom_controls");Y(e)}};Xe(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var UR=100,HR=75,GR=50,VR=25,Zk={BLOCKS:GR,PROCEDURES:HR,VARIABLES:UR,WORKSPACE_COMMENTS:VR},WE={};WE.register=Ri,WE.unregister=ls;var WR=class{constructor(){this.priority=VR}save(e){const n=[];for(const o of e.getTopComments())(e=ea(o,{addCoordinates:!0,saveIds:!0}))&&n.push(e);return n.length?n:null}load(e,n){for(const o of e)kc(o,n,{recordUndo:j()})}clear(e){for(const n of e.getTopComments())n.dispose()}};Ri("workspaceComments",new WR);var zd={};zd.WorkspaceCommentSerializer=WR,zd.append=kc,zd.save=ea;var XE={};XE.register=Zh,XE.unregister=jI;var Yd=class{paste(e,n,o){e=e.commentState,o&&(e.x=o.x,e.y=o.y),r.disable$$module$build$src$core$events$utils();let a;try{a=kc(e,n),JI(a)}finally{r.enable$$module$build$src$core$events$utils()}return a?(he()&&Y(new(ce(de.COMMENT_CREATE))(a)),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(a),a):null}};Yd.TYPE="workspace-comment",Zh(Yd.TYPE,new Yd);var zE;zE=28,r.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:zE,connectingSnapRadius:zE,currentConnectionPreference:8,bumpDelay:250},r.config$$module$build$src$core$config;var Qk="aria-",ew="role",Vn;(function(e){e.GRID="grid",e.GRIDCELL="gridcell",e.GROUP="group",e.LISTBOX="listbox",e.MENU="menu",e.MENUITEM="menuitem",e.MENUITEMCHECKBOX="menuitemcheckbox",e.OPTION="option",e.PRESENTATION="presentation",e.ROW="row",e.TREE="tree",e.TREEITEM="treeitem",e.SEPARATOR="separator",e.STATUS="status"})(Vn||(Vn={}));var ir;(function(e){e.ACTIVEDESCENDANT="activedescendant",e.COLCOUNT="colcount",e.DISABLED="disabled",e.EXPANDED="expanded",e.INVALID="invalid",e.LABEL="label",e.LABELLEDBY="labelledby",e.LEVEL="level",e.ORIENTATION="orientation",e.POSINSET="posinset",e.ROWCOUNT="rowcount",e.SELECTED="selected",e.SETSIZE="setsize",e.VALUEMAX="valuemax",e.VALUEMIN="valuemin",e.LIVE="live",e.HIDDEN="hidden"})(ir||(ir={}));var ru={};ru.Role=Vn,ru.State=ir,ru.setRole=js,ru.setState=_r;var Kd=class{constructor(e,n){this.content=e,this.opt_value=n,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const e=document.createElement("div");e.id=B(),this.element=e,e.className="blocklyMenuItem "+(this.enabled?"":"blocklyMenuItemDisabled ")+(this.checked?"blocklyMenuItemSelected ":"")+(this.highlight?"blocklyMenuItemHighlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl ":"");const n=document.createElement("div");if(n.className="blocklyMenuItemContent",this.checkable){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox ",n.appendChild(o)}return o=this.content,typeof this.content=="string"&&(o=document.createTextNode(this.content)),n.appendChild(o),e.appendChild(n),this.roleName&&js(e,this.roleName),_r(e,ir.SELECTED,this.checkable&&this.checked||!1),_r(e,ir.DISABLED,!this.enabled),e}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let e;return(e=this.opt_value)!=null?e:null}setRightToLeft(e){this.rightToLeft=e}setRole(e){this.roleName=e}setCheckable(e){this.checkable=e}setChecked(e){this.checked=e}setHighlighted(e){this.highlight=e;const n=this.getElement();n&&this.isEnabled()&&(e?_e(n,"blocklyMenuItemHighlight"):ke(n,"blocklyMenuItemHighlight"))}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}performAction(e){this.isEnabled()&&this.actionHandler&&this.actionHandler(this,e)}onAction(e,n){this.actionHandler=e.bind(n)}},YE=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.pointerLeaveHandler=this.pointerEnterHandler=this.clickHandler=this.pointerMoveHandler=this.highlightedItem=this.openingCoords=null}addChild(e){this.menuItems.push(e)}render(e){const n=document.createElement("div");n.className="blocklyMenu",n.tabIndex=0,this.roleName&&js(n,this.roleName),this.element=n;for(let o=0,a;a=this.menuItems[o];o++)n.appendChild(a.createDom());return this.pointerMoveHandler=A(n,"pointermove",this,this.handlePointerMove,!0),this.clickHandler=A(n,"pointerup",this,this.handleClick,!0),this.pointerEnterHandler=A(n,"pointerenter",this,this.handlePointerEnter,!0),this.pointerLeaveHandler=A(n,"pointerleave",this,this.handlePointerLeave,!0),this.onKeyDownHandler=A(n,"keydown",this,this.handleKeyEvent),e.appendChild(n),n}getElement(){return this.element}focus(){const e=this.getElement();e&&e.focus({preventScroll:!0})}blur(){const e=this.getElement();e&&e.blur()}setRole(e){this.roleName=e}dispose(){this.pointerMoveHandler&&(k(this.pointerMoveHandler),this.pointerMoveHandler=null),this.clickHandler&&(k(this.clickHandler),this.clickHandler=null),this.pointerEnterHandler&&(k(this.pointerEnterHandler),this.pointerEnterHandler=null),this.pointerLeaveHandler&&(k(this.pointerLeaveHandler),this.pointerLeaveHandler=null),this.onKeyDownHandler&&(k(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let e=0,n;n=this.menuItems[e];e++)n.dispose();this.element=null}getMenuItem(e){const n=this.getElement();for(;e&&e!==n;){if(e.classList.contains("blocklyMenuItem")){const o=this.getMenuItems();for(let a=0,d;d=o[a];a++)if(d.getElement()===e)return d}e=e.parentElement}return null}setHighlighted(e){var n=this.highlightedItem;if(n&&(n.setHighlighted(!1),this.highlightedItem=null),e){e.setHighlighted(!0),this.highlightedItem=e,n=this.getElement();const o=e.getElement();n&&o&&(y(o,n),_r(n,ir.ACTIVEDESCENDANT,e.getId()))}}highlightNext(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e,1)}highlightPrevious(){const e=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(e<0?this.menuItems.length:e,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(e,n){e+=n;let o;const a=this.getMenuItems();for(;o=a[e];){if(o.isEnabled()){this.setHighlighted(o);break}e+=n}}handlePointerMove(e){Math.max(Math.abs(e.movementX),Math.abs(e.movementY))!==0&&(e=this.getMenuItem(e.target))&&(e.isEnabled()?this.highlightedItem!==e&&this.setHighlighted(e):this.setHighlighted(null))}handleClick(e){var n=this.openingCoords;if(this.openingCoords=null,n&&typeof e.clientX=="number"){const o=new xe(e.clientX,e.clientY);if(xe.distance(n,o)<1)return}(n=this.getMenuItem(e.target))&&n.performAction(e)}handlePointerEnter(e){this.focus()}handlePointerLeave(e){this.getElement()&&this.setHighlighted(null)}handleKeyEvent(e){if(this.menuItems.length&&!(e.shiftKey||e.ctrlKey||e.metaKey||e.altKey)){var n=this.highlightedItem;switch(e.key){case"Enter":case" ":n&&n.performAction(e);break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}e.preventDefault(),e.stopPropagation()}}getSize(){const e=this.getElement(),n=wr(e);return n.height=e.scrollHeight,n}getMenuItems(){return this.menuItems.filter(e=>e instanceof Kd)}},XR=class{constructor(){this.element=null}createDom(){return this.element=document.createElement("hr"),this.element.className="blocklyMenuSeparator",js(this.element,Vn.SEPARATOR),this.element}dispose(){let e;(e=this.element)==null||e.remove(),this.element=null}},nu="_TEMP_COLLAPSED_INPUT",jd="_TEMP_COLLAPSED_FIELD",us="MANUALLY_DISABLED",tw={COLLAPSED_FIELD_NAME:jd,COLLAPSED_INPUT_NAME:nu,MANUALLY_DISABLED:us};(function(e){e[e.VALUE=1]="VALUE",e[e.STATEMENT=3]="STATEMENT",e[e.DUMMY=5]="DUMMY",e[e.CUSTOM=6]="CUSTOM",e[e.END_ROW=7]="END_ROW"})(r.inputTypes$$module$build$src$core$inputs$input_types||(r.inputTypes$$module$build$src$core$inputs$input_types={})),r.inputTypes$$module$build$src$core$inputs$input_types;var Jd=new Set,KE=new WeakSet,jE=new WeakMap,$a=null,JE=null,zR=0,qd={};qd.finishQueuedRenders=Js,qd.queueRender=bT,qd.triggerQueuedRenders=ro;var qE,YR;r.Msg$$module$build$src$core$msg=Object.create(null),qE=function(e){Object.keys(e).forEach(function(n){r.Msg$$module$build$src$core$msg[n]=e[n]})},YR={Msg:r.Msg$$module$build$src$core$msg,setLocale:qE};var su="blocklyToast",KR="blocklyToastMessage",jR="blocklyToastCloseButton",ll=class{static show(e,n){if(n.oncePerSession&&n.id){if(this.shownIds.has(n.id))return;this.shownIds.add(n.id)}this.hide(e);const o=this.createDom(e,n);requestAnimationFrame(()=>{o.style.bottom="2rem"})}static createDom(e,n){const{message:o,duration:a=5,assertiveness:d=ll.Assertiveness.POLITE}=n,p=document.createElement("div");e.getInjectionDiv().appendChild(p),p.dataset.toastId=n.id,p.className=su,js(p,Vn.STATUS),_r(p,ir.LIVE,d),n=p.appendChild(document.createElement("div")),n.className=KR,n.innerText=o,n=p.appendChild(document.createElement("button")),n.className=jR,_r(n,ir.LABEL,r.Msg$$module$build$src$core$msg.CLOSE);var v=b(ue.SVG,{width:24,height:24,viewBox:"0 0 24 24",fill:"none"},n);_r(v,ir.HIDDEN,!0),b(ue.RECT,{x:19.7782,y:2.80762,width:2,height:24,transform:"rotate(45, 19.7782, 2.80762)",fill:"black"},v),b(ue.RECT,{x:2.80762,y:4.22183,width:2,height:24,transform:"rotate(-45, 2.80762, 4.22183)",fill:"black"},v),n.addEventListener("click",()=>{p.remove(),e.markFocused()});let X;return n=()=>{X=setTimeout(()=>p.remove(),a*1e3)},v=()=>clearTimeout(X),p.addEventListener("focusin",v),p.addEventListener("focusout",n),p.addEventListener("mouseenter",v),p.addEventListener("mousemove",v),p.addEventListener("mouseleave",n),n(),p}static hide(e,n){e=e.getInjectionDiv().querySelector(`.${su}`),e instanceof HTMLElement&&(!n||n===e.dataset.toastId)&&e.remove()}};ll.shownIds=new Set,function(e){e=e.Assertiveness||(e.Assertiveness={}),e.ASSERTIVE="assertive",e.POLITE="polite"}(ll||(ll={})),Xe(`
.${su} {
  font-size: 1.2rem;
  position: absolute;
  bottom: -10rem;
  right: 2rem;
  padding: 1rem;
  color: black;
  background-color: white;
  border: 2px solid black;
  border-radius: 0.4rem;
  z-index: 999;
  display: flex;
  align-items: center;
  gap: 0.8rem;
  line-height: 1.5;
  transition: bottom 0.3s ease-out;
}

.${su} .${KR} {
  maxWidth: 18rem;
}

.${su} .${jR} {
  margin: 0;
  padding: 0.2rem;
  background-color: transparent;
  color: black;
  border: none;
  cursor: pointer;
}
`);var JR=function(e,n){window.alert(e),n&&n()},qR=JR,ZR=function(e,n){n(window.confirm(e))},QR=ZR,eL=function(e,n,o){o(window.prompt(e,n))},tL=eL,rL=ll.show.bind(ll),nL=rL,yi={};yi.alert=Mc,yi.confirm=ed,yi.prompt=td,yi.setAlert=eO,yi.setConfirm=tO,yi.setPrompt=rO,yi.setToast=sO,yi.toast=nO;var sL=new Set,iL={};iL.warn=Mr;var ZE="VARIABLE",QE="ijkmnopqrstuvwxyzabcdefgh",oL={generateUniqueNameInternal:lO},or={CATEGORY_NAME:ZE,TEST_ONLY:oL,VAR_LETTER_OPTIONS:QE};or.allDeveloperVariables=r.allDeveloperVariables$$module$build$src$core$variables,or.allUsedVarModels=r.allUsedVarModels$$module$build$src$core$variables,or.compareByName=ra,or.createVariableButtonHandler=jo,or.deleteVariable=r.deleteVariable$$module$build$src$core$variables,or.flyoutCategory=DT,or.flyoutCategoryBlocks=PT,or.generateUniqueName=FT,or.generateUniqueNameFromOptions=id,or.generateVariableFieldDom=Jo,or.getAddedVariables=Dc,or.getOrCreateVariablePackage=r.getOrCreateVariablePackage$$module$build$src$core$variables,or.getVariable=r.getVariable$$module$build$src$core$variables,or.getVariableUsesById=na,or.internalFlyoutCategory=rd,or.jsonFlyoutCategoryBlocks=sd,or.nameUsedWithAnyType=BT,or.nameUsedWithConflictingParam=UT,or.promptName=od,or.renameVariable=r.renameVariable$$module$build$src$core$variables;var Ia=class extends Error{},lL=class extends Ia{constructor(e){super("Expected to find a 'type' property, defining the block type"),this.state=e}},iu=class extends Ia{constructor(e,n,o){super(`The block ${n.toDevString()} is missing a(n) ${e}
connection`),this.block=n,this.state=o}},aL=class extends Ia{constructor(e,n,o,a){super(`The block ${o.toDevString()} could not connect its
${n} to its parent, because: ${e}`),this.childBlock=o,this.childState=a}},cL=class extends Ia{constructor(e){super(`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=e}},uL=class extends Ia{constructor(e,n,o){super(`Cannot add an icon of type '${e}' to the block ${n.toDevString()}, because there is no icon registered with type '${e}'. Make sure that all of your icons have been registered.`),this.block=n,this.state=o}},al={};al.BadConnectionCheck=aL,al.DeserializationError=Ia,al.MissingBlockType=lL,al.MissingConnection=iu,al.RealChildOfShadow=cL,al.UnregisteredIcon=uL;var hL=class{constructor(){this.priority=GR}save(e){const n=[];for(const o of e.getTopBlocks(!1))(e=as(o,{addCoordinates:!0,doFullSerialization:!1}))&&n.push(e);return n.length?{languageVersion:0,blocks:n}:null}load(e,n){e=e.blocks;for(const o of e)no(o,n,{recordUndo:j()})}clear(e){for(const n of e.getTopBlocks(!1))n.dispose(!1)}};Ri("blocks",new hL);var ou={};ou.BlockSerializer=hL,ou.append=no,ou.appendInternal=sa,ou.save=as;var Er=class{constructor(e){this.name=e}toString(){return this.name}equals(e){return this.name===e.toString()}};Er.MUTATOR=new Er("mutator"),Er.WARNING=new Er("warning"),Er.COMMENT=new Er("comment");var cl=class extends Ea{constructor(e){super(),this.isBlank=!e,e&&(this.blockId=e.id,this.workspaceId=e.workspace.id)}toJson(){const e=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.blockId=this.blockId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new cl),n.blockId=e.blockId,n}},ul=class extends cl{constructor(e,n,o,a,d){super(e),this.type=de.BLOCK_CHANGE,e&&(this.element=n,this.name=o||void 0,this.oldValue=a,this.newValue=d)}toJson(){const e=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return e.element=this.element,e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,this.disabledReason&&(e.disabledReason=this.disabledReason),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new ul),n.element=e.element,n.name=e.name,n.oldValue=e.oldValue,n.newValue=e.newValue,e.disabledReason!==void 0&&(n.disabledReason=e.disabledReason),n}setDisabledReason(e){if(this.element!=="disabled")throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=e}isNull(){return this.oldValue===this.newValue}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(n=n.getBlockById(this.blockId),!n)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const o=n.getIcon(Er.MUTATOR);switch(o&&qo(o)&&o.bubbleIsVisible()&&o.setBubbleVisible(!1),e=e?this.newValue:this.oldValue,this.element){case"field":(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name);break;case"comment":n.setCommentText(e||null);break;case"collapsed":n.setCollapsed(!!e);break;case"disabled":var a;n.setDisabledReason(!!e,(a=this.disabledReason)!=null?a:us);break;case"inline":n.setInputsInline(!!e);break;case"mutation":a=ul.getExtraBlockState_(n),n.loadExtraState?n.loadExtraState(JSON.parse(e||"{}")):n.domToMutation&&n.domToMutation(r.textToDom$$module$build$src$core$utils$xml(e||"<mutation/>")),Y(new ul(n,"mutation",null,a,e));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(e){return e.saveExtraState?(e=e.saveExtraState(!0))?JSON.stringify(e):"":e.mutationToDom&&(e=e.mutationToDom())?Zs(e):""}};i(Le.EVENT,de.BLOCK_CHANGE,ul);var Zd={};Zd.clamp=ia,Zd.toDegrees=NO,Zd.toRadians=ld;var Qd=16,dL=1,_L=12,eg=16,e_=.25,tg=null,hl=null,fL="",TL="",qt,lu,dl,rg=null,ho=null,pL=null,t_=null,r_=null,ng={getBoundsInfo:function(){const e=zs(rg),n=wr(rg);return{left:e.x,right:e.x+n.width,top:e.y,bottom:e.y+n.height,width:n.width,height:n.height}},getPositionMetrics:function(e,n,o,a){const d=ng.getBoundsInfo(),p=wr(qt);return n+p.height<d.bottom?ZT(e,n,d,p):a-p.height>d.top?QT(o,a,d,p):n+p.height<document.documentElement.clientHeight?ZT(e,n,d,p):a-p.height>document.documentElement.clientTop?QT(o,a,d,p):bO(e,d,p)}},nn={ANIMATION_TIME:e_,ARROW_HORIZONTAL_PADDING:_L,ARROW_SIZE:Qd,BORDER_SIZE:dL,PADDING_Y:eg,TEST_ONLY:ng};nn.clearContent=ud,nn.createDom=ad,nn.getContentDiv=cd,nn.getOwner=XT,nn.getPositionX=Pc,nn.hide=dd,nn.hideIfOwner=hd,nn.hideWithoutAnimation=qs,nn.isVisible=ep,nn.repositionForWindowResize=rp,nn.setBoundsElement=WT,nn.setColour=zT,nn.show=qT,nn.showPositionedByBlock=xO,nn.showPositionedByField=YT;var Oa={};Oa.commonWordPrefix=np,Oa.commonWordSuffix=sp,Oa.isNumber=r.isNumber$$module$build$src$core$utils$string,Oa.shortestStringLength=Fc,Oa.wrap=r.wrap$$module$build$src$core$utils$string;var n_=void 0,au=!1,Sa=!1,EL=50,gL=0,_l=0,sg=0,ig=0,hs=null,cu=null,og=0,lg=10,mL=10,$L=750,s_=5,gr=null,Wn={HOVER_MS:$L,LIMIT:EL,MARGINS:s_,OFFSET_X:og,OFFSET_Y:lg,RADIUS_OK:mL};Wn.bindMouseEvents=Bc,Wn.block=hp,Wn.createDom=lp,Wn.dispose=up,Wn.getCustomTooltip=MO,Wn.getDiv=PO,Wn.getTooltipOfObject=oa,Wn.hide=Li,Wn.isVisible=DO,Wn.setCustomTooltip=wO,Wn.unbindMouseEvents=ap,Wn.unblock=dp;var ag=.45,cg=.65,IL={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},ds={};ds.blend=Qo,ds.getHsvSaturation=_p,ds.getHsvValue=fp,ds.hexToRgb=fd,ds.hsvToHex=Td,ds.hueToHex=Tp,ds.names=IL,ds.parse=Zo,ds.rgbToHex=Uc,ds.setHsvSaturation=WO,ds.setHsvValue=XO;var uu={};uu.checkMessageReferences=zO,uu.parseBlockColour=la,uu.replaceMessageReferences=rr,uu.tokenizeInterpolation=pp;var Lt=class{get size_(){return this.size}set size_(e){this.size=e}constructor(e,n,o){this.DEFAULT_VALUE=null,this.name=void 0,this.tooltip=this.validator_=null,this.size=new lt(0,0),this.constants_=this.mouseDownWrapper=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.id_=null,this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new lt(0,0),e!==Lt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),n&&this.setValidator(n))}configure_(e){e.tooltip&&this.setTooltip(rr(e.tooltip))}setSourceBlock(e){if(this.sourceBlock_)throw Error("Field already bound to a block");if(this.sourceBlock_=e,e.id.includes("_field"))throw Error(`Field ID indicator is contained in block ID. This may cause problems with focus: ${e.id}.`);this.id_=`${e.id}_field_${B()}`}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){if(!this.fieldGroup_){var e=this.id_;if(!e)throw Error("Expected ID to be defined prior to init.");this.fieldGroup_=b(ue.G,{id:e}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip),this.bindEvents_(),this.initModel(),this.applyColour()}}initView(){this.createBorderRect_(),this.createTextElement_(),this.fieldGroup_&&_e(this.fieldGroup_,"blocklyField")}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=b(ue.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=b(ue.TEXT,{class:"blocklyText blocklyFieldText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const e=this.getClickTarget_();if(!e)throw Error("A click target has not been set.");Bc(e),this.mouseDownWrapper=A(e,"pointerdown",this,this.onMouseDown_)}fromXml(e){this.setValue(e.textContent)}toXml(e){return e.textContent=this.getValue(),e}saveState(e){return e=this.saveLegacyState(Lt),e!==null?e:this.getValue()}loadState(e){this.loadLegacyState(Lt,e)||this.setValue(e)}saveLegacyState(e){return e.prototype.saveState===this.saveState&&e.prototype.toXml!==this.toXml?(e=r.createElement$$module$build$src$core$utils$xml("field"),e.setAttribute("name",this.name||""),ge(this.toXml(e)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(e,n){return e.prototype.loadState===this.loadState&&e.prototype.fromXml!==this.fromXml?(this.fromXml(r.textToDom$$module$build$src$core$utils$xml(n)),!0):!1}dispose(){hd(this),el(this);let e;(e=this.getSourceBlock())!=null&&e.isDeadOrDying()||ve(this.fieldGroup_),this.disposed=!0}updateEditable(){const e=this.fieldGroup_,n=this.getSourceBlock();this.EDITABLE&&e&&n&&(this.enabled_&&n.isEditable()?(_e(e,"blocklyEditableField"),ke(e,"blocklyNonEditableField")):(_e(e,"blocklyNonEditableField"),ke(e,"blocklyEditableField")))}setEnabled(e){this.enabled_=e,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Lt.prototype.showEditor_}isClickableInFlyout(e){return!e}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let e=!1;return this.name&&(this.SERIALIZABLE?e=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),e=!0)),e}isVisible(){return this.visible_}setVisible(e){if(this.visible_!==e){this.visible_=e;var n=this.fieldGroup_;n&&(n.style.display=e?"block":"none")}}setValidator(e){this.validator_=e}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(e){this.isClickable()&&this.showEditor_(e)}showEditor_(e){}repositionForWindowResize(){return!1}updateSize_(e){const n=this.getConstants();e=e!==void 0?e:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING;let o=e*2,a=n.FIELD_TEXT_HEIGHT,d=0;this.textElement_&&(d=wt(this.textElement_),o+=d),this.isFullBlockField()||(a=Math.max(a,n.FIELD_BORDER_RECT_HEIGHT)),this.size_=new lt(o,a),this.positionTextElement_(e,d),this.positionBorderRect_()}positionTextElement_(e,n){if(this.textElement_){var o=this.getConstants(),a=this.size_.height/2,d;this.textElement_.setAttribute("x",String((d=this.getSourceBlock())!=null&&d.RTL?this.size_.width-n-e:e)),this.textElement_.setAttribute("y",String(o.FIELD_TEXT_BASELINE_CENTER?a:a-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_&&(this.render_(),this.isDirty_=!1),this.size_):new lt(0,0)}getScaledBBox(){let e;var n=this.getSourceBlock();if(!n)throw new lr;if(this.isFullBlockField()){var o=this.sourceBlock_.getHeightWidth();const a=n.workspace.scale;e=this.getAbsoluteXY_(),n=(o.width+1)*a,o=(o.height+1)*a,gR?(e.x+=1.5*a,e.y+=1.5*a):(e.x-=.5*a,e.y-=.5*a)}else o=this.borderRect_.getBoundingClientRect(),e=zs(this.borderRect_),n=o.width,o=o.height;return new it(e.y,e.y+o,e.x,e.x+n)}onLocationChange(e){}getDisplayText_(){let e=this.getText();return e.length>this.maxDisplayLength&&(e=e.substring(0,this.maxDisplayLength-2)+""),e=e.replace(/\s/g,Lt.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(e+=""),e}getText(){const e=this.getText_();return String(e!==null?e:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(e,n=!0){if(e!==null){var o=r.getGroup$$module$build$src$core$events$utils();o||r.setGroup$$module$build$src$core$events$utils(!0);try{const Ie=this.doClassValidation_(e),je=this.processValidation(e,Ie,n);if(!(je instanceof Error)){var a,d=(a=this.getValidator())==null?void 0:a.call(this,je),p=this.processValidation(je,d,n);if(!(p instanceof Error)){var v=this.sourceBlock_;if(!v||!v.disposed){var X=this.getValue();X===p?this.doValueUpdate_(p):(this.doValueUpdate_(p),n&&v&&he()&&Y(new(ce(de.BLOCK_CHANGE))(v,"field",this.name||null,X,p)),this.isDirty_&&this.forceRerender())}}}}finally{r.setGroup$$module$build$src$core$events$utils(o)}}}processValidation(e,n,o){return n===null?(this.doValueInvalid_(e,o),this.isDirty_&&this.forceRerender(),Error()):n===void 0?e:n}getValue(){return this.value_}doClassValidation_(e){return e??null}doValueUpdate_(e){this.value_=e,this.isDirty_=!0}doValueInvalid_(e,n){}onMouseDown_(e){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(e=this.sourceBlock_.workspace.getGesture(e))&&e.setStartField(this)}setTooltip(e){e||e===""||(e=this.sourceBlock_);const n=this.getClickTarget_();n?n.tooltip=e:this.tooltip=e}getTooltip(){const e=this.getClickTarget_();return oa(e||{tooltip:this.tooltip})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return zs(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let e=null;const n=this.getSourceBlock();if(!n)throw new lr;const o=n.inputList;for(let a=0;a<n.inputList.length;a++){const d=o[a],p=d.fieldRow;for(let v=0;v<p.length;v++)if(p[v]===this){e=d;break}}return e}getFlipRtl(){return!1}onShortcut(e){return!1}getFocusableElement(){if(!this.fieldGroup_)throw Error("This field currently has no representative DOM element.");return this.fieldGroup_}getFocusableTree(){const e=this.getSourceBlock();if(!e)throw new lr;return e.workspace}onNodeFocus(){const e=this.getSourceBlock();e.workspace.scrollBoundsIntoView(e.getBoundingRectangleWithoutChildren())}onNodeBlur(){}canBeFocused(){return!0}static fromJson(e){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};Lt.NBSP="",Lt.SKIP_SETUP=Symbol("SKIP_SETUP");var lr=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},Ra=null,OL=null,i_=null,ug="blocklyWidgetDiv",La="",Aa="",Xn,o_=null,Cs={};Cs.createDom=Ep,Cs.getDiv=aa,Cs.hide=ca,Cs.hideIfOwner=el,Cs.hideIfOwnerIsInWorkspace=Hc,Cs.isVisible=gp,Cs.positionWithAnchor=$p,Cs.repositionForWindowResize=Ip,Cs.show=Ed,Cs.testOnly_setDiv=YO;var l_=null,SL={},a_=null,fl={};fl.callbackFactory=r.callbackFactory$$module$build$src$core$contextmenu,fl.dispose=Sp,fl.getCurrentBlock=qO,fl.hide=Gc,fl.setCurrentBlock=Op,fl.show=ua;var ht=class{constructor(){this.registeredItems=new Map,this.reset()}reset(){this.registeredItems.clear()}register(e){if(this.registeredItems.has(e.id))throw Error('Menu item with ID "'+e.id+'" is already registered.');this.registeredItems.set(e.id,e)}unregister(e){if(!this.registeredItems.has(e))throw Error('Menu item with ID "'+e+'" not found.');this.registeredItems.delete(e)}getItem(e){let n;return(n=this.registeredItems.get(e))!=null?n:null}getContextMenuOptions(e,n){const o=[];for(const a of this.registeredItems.values()){if(a.scopeType&&(a.scopeType===hg.BLOCK&&!e.block||a.scopeType===hg.COMMENT&&!e.comment||a.scopeType===hg.WORKSPACE&&!e.workspace))continue;let d;if(d={scope:e,weight:a.weight},a.separator)d=Object.assign({},d,{separator:!0});else{const p=a.preconditionFn(e,n);if(p==="hidden")continue;const v=typeof a.displayText=="function"?a.displayText(e):a.displayText;d=Object.assign({},d,{text:v,callback:a.callback,enabled:p==="enabled"})}o.push(d)}return o.sort(function(a,d){return a.weight-d.weight}),o}};(function(e){var n=e.ScopeType||(e.ScopeType={});n.BLOCK="block",n.WORKSPACE="workspace",n.COMMENT="comment",e.registry=new e})(ht||(ht={}));var hg=ht.ScopeType,_o=50,c_=100,rw={BLOCK:_o,BUBBLE:c_},RL=class{constructor(e){this.comment=e,this.startLoc=null,this.workspace=e.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.comment.isDeadOrDying()&&!this.workspace.isReadOnly()}startDrag(){this.fireDragStartEvent(),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(e){this.comment.moveDuringDrag(e)}endDrag(){this.fireDragEndEvent(),this.fireMoveEvent();let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.comment,_o),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0)}fireDragStartEvent(){const e=new(ce(de.COMMENT_DRAG))(this.comment,!0);Y(e)}fireDragEndEvent(){const e=new(ce(de.COMMENT_DRAG))(this.comment,!1);Y(e)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var e=new(ce(de.COMMENT_MOVE))(this.comment);e.setReason(["drag"]),e.oldCoordinate_=this.startLoc,e.recordNew(),Y(e)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},LL=new WeakMap,u_=class{constructor(e,n,o,a){this.id=e,this.workspace=n,this.container=o,this.commentView=a}isVisible(){return this.icon.checkVisibility()}getCommentView(){return this.commentView}getSize(e=!1){var n=this.icon.getBBox();return n=it.from(n),e&&(e=this.getMargin(),n.left-=e,n.top-=e,n.bottom+=e,n.right+=e),n}getMargin(){return(this.container.getBBox().height-this.icon.getBBox().height)/2}getFocusableElement(){return this.icon}getFocusableTree(){return this.workspace}onNodeFocus(){const e=this.getCommentView();var n=e.getRelativeToSurfaceXY();const o=e.getSize();n=new it(n.y,n.y+o.height,n.x,n.x+o.width),e.workspace.scrollBoundsIntoView(n)}onNodeBlur(){}canBeFocused(){return this.isVisible()}},AL="_collapse_bar_button",CL=class extends u_{constructor(e,n,o,a){super(e,n,o,a),this.id=e,this.workspace=n,this.container=o,this.commentView=a,this.icon=b(ue.IMAGE,{class:"blocklyFoldoutIcon",href:`${this.workspace.options.pathToMedia}foldout-icon.svg`,id:`${this.id}${AL}`},this.container),this.bindId=A(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){k(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${e}`)}performAction(e){R(),this.getCommentView().bringToFront(),e&&e instanceof PointerEvent&&G(e)?e.stopPropagation():(this.getCommentView().setCollapsed(!this.getCommentView().isCollapsed()),this.workspace.hideChaff(),e?.stopPropagation())}},dg="_comment_textarea_",h_=class{constructor(e,n,o){this.workspace=e,this.onFinishEditing=o,this.textChangeListeners=[],this.text="",this.foreignObject=b(ue.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"}),e=document.createElementNS(sl,"body"),e.setAttribute("xmlns",sl),e.className="blocklyMinimalBody",this.textArea=document.createElementNS(sl,"textarea"),this.textArea.setAttribute("tabindex","-1"),this.textArea.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),_e(this.textArea,"blocklyCommentText"),_e(this.textArea,"blocklyTextarea"),_e(this.textArea,"blocklyText"),e.appendChild(this.textArea),this.foreignObject.appendChild(e),n&&(this.id=n+dg,this.textArea.setAttribute("id",this.id)),A(this.textArea,"change",this,this.onTextChange),A(this.textArea,"pointerdown",this,a=>{a.stopPropagation(),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this),R()}),A(this.textArea,"wheel",this,a=>{a.stopPropagation()}),A(this.textArea,"keydown",this,this.handleKeyDown)}getDom(){return this.foreignObject}getText(){return this.text}setText(e){this.textArea.value=e,this.onTextChange()}onTextChange(){const e=this.text;this.text=this.textArea.value;for(let n=this.textChangeListeners.length-1;n>=0;n--)this.textChangeListeners[n](e,this.text)}handleKeyDown(e){(e.key==="Escape"||e.key==="Enter"&&(e.ctrlKey||e.metaKey))&&(this.onFinishEditing&&this.onFinishEditing(),e.stopPropagation())}addTextChangeListener(e){this.textChangeListeners.push(e)}removeTextChangeListener(e){this.textChangeListeners.splice(this.textChangeListeners.indexOf(e),1)}setPlaceholderText(e){this.textArea.placeholder=e}setEditable(e){e?this.textArea.removeAttribute("readonly"):this.textArea.setAttribute("readonly","true")}updateSize(e,n){this.foreignObject.setAttribute("height",`${e.height-n.height}`),this.foreignObject.setAttribute("width",`${e.width}`),this.foreignObject.setAttribute("y",`${n.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",`${-e.width}`)}getFocusableElement(){return this.textArea}getFocusableTree(){return this.workspace}onNodeFocus(){const e=it.from(this.foreignObject.getBoundingClientRect());this.workspace.scrollBoundsIntoView(it.createFromPoint(Te(this.workspace,e.getOrigin()),e.getWidth(),e.getHeight()))}onNodeBlur(){}canBeFocused(){return!!this.id}},vL="_delete_bar_button",NL=class extends u_{constructor(e,n,o,a){super(e,n,o,a),this.id=e,this.workspace=n,this.container=o,this.commentView=a,this.icon=b(ue.IMAGE,{class:"blocklyDeleteIcon",href:`${this.workspace.options.pathToMedia}delete-icon.svg`,id:`${this.id}${vL}`},o),this.bindId=A(this.icon,"pointerdown",this,this.performAction.bind(this))}dispose(){k(this.bindId)}reposition(){const e=this.getMargin();this.icon.setAttribute("x","0");const n=this.container.getBBox();this.icon.setAttribute("y",`${e}`),this.icon.setAttribute("x",`${n.width-this.getSize(!0).getWidth()}`)}performAction(e){R(),e&&e instanceof PointerEvent&&G(e)?e.stopPropagation():(this.getCommentView().dispose(),e?.stopPropagation(),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.workspace))}},hu=class{constructor(e,n){this.workspace=e,this.commentId=n,this.collapsed=!1,this.editable=!0,this.location=new xe(0,0),this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=b(ue.G,{class:"blocklyComment blocklyEditable blocklyDraggable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),{topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteButton:this.deleteButton,foldoutButton:this.foldoutButton,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot),this.commentEditor=this.createTextArea(),this.resizeHandle=this.createResizeHandle(this.svgRoot,e);let o;(o=e.getLayerManager())==null||o.append(this,_o),this.size=hu.defaultCommentSize,this.setSizeWithoutFiringEvents(this.size),this.moveTo(new xe(0,0))}createHighlightRect(e){return b(ue.RECT,{class:"blocklyCommentHighlight"},e)}createTopBar(e){e=b(ue.G,{class:"blocklyCommentTopbar"},e);const n=b(ue.RECT,{class:"blocklyCommentTopbarBackground"},e),o=new NL(this.commentId,this.workspace,e,this),a=new CL(this.commentId,this.workspace,e,this);this.addDisposeListener(()=>{o.dispose(),a.dispose()});const d=b(ue.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},e),p=document.createTextNode("");return d.appendChild(p),{topBarGroup:e,topBarBackground:n,deleteButton:o,foldoutButton:a,textPreview:d,textPreviewNode:p}}createTextArea(){const e=new h_(this.workspace,this.commentId,()=>this.svgRoot.focus());return this.svgRoot.appendChild(e.getDom()),e.addTextChangeListener((n,o)=>{this.updateTextPreview(o),this.setSize(this.size)}),e}getEditorFocusableNode(){return this.commentEditor}createResizeHandle(e,n){return e=b(ue.IMAGE,{class:"blocklyResizeHandle",href:`${n.options.pathToMedia}resize-handle.svg`},e),A(e,"pointerdown",this,this.onResizePointerDown),e}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSizeWithoutFiringEvents(e){const n=this.topBarBackground.getBBox(),o=this.textPreview.getBBox(),a=this.resizeHandle.getBBox();this.size=e=lt.max(e,this.calcMinSize(n)),this.svgRoot.setAttribute("height",`${e.height}`),this.svgRoot.setAttribute("width",`${e.width}`),this.updateHighlightRect(e),this.updateTopBarSize(e),this.commentEditor.updateSize(e,n),this.deleteButton.reposition(),this.foldoutButton.reposition(),this.updateTextPreviewSize(e,n,o),this.updateResizeHandlePosition(e,a)}setSize(e){const n=this.preResizeSize||this.size;this.setSizeWithoutFiringEvents(e),this.onSizeChange(n,this.size)}calcMinSize(e){var n;this.updateTextPreview((n=this.commentEditor.getText())!=null?n:"");let o=n=wt(this.textPreview);return this.foldoutButton.isVisible()?o+=this.foldoutButton.getSize(!0).getWidth():n&&(o+=4),this.deleteButton.isVisible()?o+=this.deleteButton.getSize(!0).getWidth():n&&(o+=4),new lt(o,e.height+20)}updateHighlightRect(e){this.highlightRect.setAttribute("height",`${e.height}`),this.highlightRect.setAttribute("width",`${e.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",`${-e.width}`)}updateTopBarSize(e){this.topBarBackground.setAttribute("width",`${e.width}`)}updateTextPreviewSize(e,n,o){n=(n.height-o.height)/2;const a=this.foldoutButton.getSize(!0),d=this.deleteButton.getSize(!0);e=e.width-a.getWidth()-d.getWidth(),this.textPreview.setAttribute("x",`${(this.workspace.RTL?-1:1)*a.getWidth()}`),this.textPreview.setAttribute("y",`${n+o.height/2}`),this.textPreview.setAttribute("width",`${e}`)}updateResizeHandlePosition(e,n){this.resizeHandle.setAttribute("y",`${e.height-n.height}`),this.resizeHandle.setAttribute("x",`${e.width-n.width}`)}onSizeChange(e,n){for(let o=this.sizeChangeListeners.length-1;o>=0;o--)this.sizeChangeListeners[o](e,n)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}removeSizeChangeListener(e){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(e),1)}onResizePointerDown(e){this.isEditable()&&(this.bringToFront(),G(e)||(this.preResizeSize=this.getSize(),gd(this.workspace,e,new xe(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=A(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=A(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation())}onResizePointerUp(e){R(),this.resizePointerUpListener&&(k(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(k(this.resizePointerMoveListener),this.resizePointerMoveListener=null),this.setSize(this.size),this.preResizeSize=void 0}onResizePointerMove(e){e=md(this.workspace,e),this.setSizeWithoutFiringEvents(new lt(this.workspace.RTL?-e.x:e.x,e.y))}isCollapsed(){return this.collapsed}setCollapsed(e){(this.collapsed=e)?_e(this.svgRoot,"blocklyCollapsed"):ke(this.svgRoot,"blocklyCollapsed"),this.setSizeWithoutFiringEvents(this.size),this.onCollapse()}onCollapse(){for(let e=this.collapseChangeListeners.length-1;e>=0;e--)this.collapseChangeListeners[e](this.collapsed)}addOnCollapseListener(e){this.collapseChangeListeners.push(e)}removeOnCollapseListener(e){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(e),1)}isEditable(){return this.editable}setEditable(e){(this.editable=e)?(_e(this.svgRoot,"blocklyEditable"),ke(this.svgRoot,"blocklyReadonly")):(ke(this.svgRoot,"blocklyEditable"),_e(this.svgRoot,"blocklyReadonly")),this.commentEditor.setEditable(e)}getRelativeToSurfaceXY(){return this.location}moveTo(e){this.location=e,this.svgRoot.setAttribute("transform",`translate(${e.x}, ${e.y})`)}getText(){return this.commentEditor.getText()}setText(e){this.commentEditor.setText(e)}setPlaceholderText(e){this.commentEditor.setPlaceholderText(e)}addTextChangeListener(e){this.commentEditor.addTextChangeListener(e)}removeTextChangeListener(e){this.commentEditor.removeTextChangeListener(e)}updateTextPreview(e){this.textPreviewNode.textContent=this.truncateText(e)}truncateText(e){return e.length>=12?`${e.substring(0,9)}...`:e}bringToFront(){const e=this.svgRoot.parentNode,n=e.childNodes;n[n.length-1]!==this.svgRoot&&e.appendChild(this.svgRoot)}onDeleteDown(e){R(),G(e)||this.dispose(),e.stopPropagation()}dispose(){this.disposing=!0,ve(this.svgRoot);for(let e=this.disposeListeners.length-1;e>=0;e--)this.disposeListeners[e]();this.disposeListeners.length=0,this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(e){this.disposeListeners.push(e)}removeDisposeListener(e){this.disposeListeners.splice(this.disposeListeners.indexOf(e),1)}getCommentBarButtons(){return[this.foldoutButton,this.deleteButton]}};hu.defaultCommentSize=new lt(120,100),Xe(`
.injectionDiv {
  --commentFillColour: #FFFCC7;
  --commentBorderColour: #F2E49B;
}

.blocklyComment .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 1px solid var(--commentBorderColour);
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}

.blocklyReadonly.blocklyComment .blocklyTextarea {
  cursor: inherit;
}

.blocklyDeleteIcon {
  width: 20px;
  height: 20px;
  display: none;
  cursor: pointer;
}

.blocklyFoldoutIcon {
  width: 20px;
  height: 20px;
  transform-origin: 12px 12px;
  cursor: pointer;
}
.blocklyResizeHandle {
  width: 12px;
  height: 12px;
  cursor: se-resize;
}
.blocklyReadonly.blocklyComment .blocklyResizeHandle {
  cursor: inherit;
}

.blocklyCommentTopbarBackground {
  fill: var(--commentBorderColour);
  height: 24px;
}

.blocklyComment .blocklyCommentPreview.blocklyText {
  fill: #000;
  dominant-baseline: middle;
  visibility: hidden;
}

.blocklyCollapsed.blocklyComment .blocklyCommentPreview {
  visibility: visible;
}

.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,
.blocklyCollapsed.blocklyComment .blocklyResizeHandle {
  display: none;
}

.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {
  transform: rotate(-90deg);
}

.blocklyRTL .blocklyCommentTopbar {
  transform: scale(-1, 1);
}

.blocklyRTL .blocklyCommentForeignObject {
  direction: rtl;
}

.blocklyRTL .blocklyCommentPreview {
  /* Revert the scale and control RTL using direction instead. */
  transform: scale(-1, 1);
  direction: rtl;
}

.blocklyRTL .blocklyResizeHandle {
  transform: scale(-1, 1);
  cursor: sw-resize;
}

.blocklyCommentHighlight {
  fill: none;
}

.blocklyCommentText.blocklyActiveFocus {
  border-color: #fc3;
  border-width: 2px;
}

.blocklySelected .blocklyCommentHighlight {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {
  stroke: none;
}

.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {
  stroke: #fc3;
  stroke-width: 3px;
}
`);var d_=class{constructor(e,n){this.workspace=e,this.text="",this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new xe(0,0),this.disposing=this.disposed=!1,this.id=n&&!e.getCommentById(n)?n:re(),this.size=hu.defaultCommentSize,e.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){he()&&Y(new(ce(de.COMMENT_CREATE))(this))}fireDeleteEvent(){he()&&Y(new(ce(de.COMMENT_DELETE))(this))}fireChangeEvent(e,n){he()&&Y(new(ce(de.COMMENT_CHANGE))(this,e,n))}fireCollapseEvent(e){he()&&Y(new(ce(de.COMMENT_COLLAPSE))(this,e))}setText(e){const n=this.text;this.text=e,this.fireChangeEvent(n,e)}getText(){return this.text}setSize(e){const n=new(ce(de.COMMENT_RESIZE))(this);this.size=e,n.recordCurrentSizeAsNewSize(),Y(n)}getSize(){return this.size}setCollapsed(e){this.collapsed=e,this.fireCollapseEvent(e)}isCollapsed(){return this.collapsed}setEditable(e){this.editable=e}isEditable(){return this.isOwnEditable()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setMovable(e){this.movable=e}isMovable(){return this.isOwnMovable()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnMovable(){return this.movable}setDeletable(e){this.deletable=e}isDeletable(){return this.isOwnDeletable()&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.workspace.isFlyout}isOwnDeletable(){return this.deletable}moveTo(e,n){const o=new(ce(de.COMMENT_MOVE))(this);n&&o.setReason(n),this.location=e,o.recordNew(),Y(o)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},ki=class extends d_{constructor(e,n){super(e,n),this.dragStrategy=new RL(this),this.workspace=e,this.view=new hu(e,this.id),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.view.getSvgRoot().setAttribute("data-id",this.id),this.view.getSvgRoot().setAttribute("id",this.id),this.addModelUpdateBindings(),A(this.view.getSvgRoot(),"pointerdown",this,this.startGesture)}addModelUpdateBindings(){this.view.addTextChangeListener((e,n)=>void super.setText(n)),this.view.addSizeChangeListener((e,n)=>void super.setSize(n)),this.view.addOnCollapseListener(()=>void super.setCollapsed(this.view.isCollapsed())),this.view.addDisposeListener(()=>{this.isDeadOrDying()||this.dispose()})}setText(e){this.view.setText(e)}setPlaceholderText(e){this.view.setPlaceholderText(e)}setSize(e){this.view.setSize(e)}setCollapsed(e){this.view.setCollapsed(e)}setEditable(e){super.setEditable(e),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const e=this.getRelativeToSurfaceXY();var n,o;const a=(o=(n=this.view)==null?void 0:n.getSize())!=null?o:this.getSize();return this.workspace.RTL?(n=e.x-a.width,o=e.x):(n=e.x,o=e.x+a.width),new it(e.y,e.y+a.height,n,o)}moveBy(e,n,o){const a=this.getRelativeToSurfaceXY();e=new xe(a.x+e,a.y+n),this.moveTo(e,o)}moveTo(e,n){super.moveTo(e,n),this.view.moveTo(e)}moveDuringDrag(e){this.location=e,this.view.moveTo(e)}setDragging(e){e?_e(this.getSvgRoot(),"blocklyDragging"):ke(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0;const e=r.getFocusManager$$module$build$src$core$focus_manager();e.getFocusedNode()===this&&setTimeout(()=>e.focusTree(this.workspace),0),this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(e){const n=this.workspace.getGesture(e);n&&(n.handleCommentStart(e,this),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this))}setDeleteStyle(e){e?_e(this.getSvgRoot(),"blocklyDraggingDelete"):ke(this.getSvgRoot(),"blocklyDraggingDelete")}isCopyable(){return this.isOwnMovable()&&this.isOwnDeletable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){_e(this.getSvgRoot(),"blocklySelected"),Be(this)}unselect(){ke(this.getSvgRoot(),"blocklySelected"),Be(null)}toCopyData(){return{paster:Yd.TYPE,commentState:ea(this,{addCoordinates:!0,saveIds:!1})}}showContextMenu(e){const n=ht.registry.getContextMenuOptions({comment:this,focusedNode:this},e);let o;o=e instanceof PointerEvent?new xe(e.clientX,e.clientY):Se(this.workspace,this.getRelativeToSurfaceXY()).translate(10,10),ua(e,n,this.workspace.RTL,this.workspace,o)}snapToGrid(){if(!this.isDeadOrDying()){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var n=this.getRelativeToSurfaceXY();e=e.alignXY(n),e!==n&&this.moveTo(e,["snap"])}}}getEditorFocusableNode(){return this.view.getEditorFocusableNode()}getFocusableElement(){return this.getSvgRoot()}getFocusableTree(){return this.workspace}onNodeFocus(){this.select();let e;(e=this.workspace.getLayerManager())==null||e.append(this,_o),this.workspace.scrollBoundsIntoView(this.getBoundingRectangle())}onNodeBlur(){this.unselect()}canBeFocused(){return!0}},sn={};sn.appendDomToWorkspace=lS,sn.blockToDom=so,sn.blockToDomWithXY=Wc,sn.clearWorkspaceAndLoadFromXml=oS,sn.deleteNext=pS,sn.domToBlock=r.domToBlock$$module$build$src$core$xml,sn.domToBlockInternal=tl,sn.domToPrettyText=iS,sn.domToText=Zs,sn.domToVariables=vp,sn.domToWorkspace=r.domToWorkspace$$module$build$src$core$xml,sn.loadWorkspaceComment=Cp,sn.saveWorkspaceComment=Vc,sn.variablesToDom=Lp,sn.workspaceToDom=rS;var _g=class extends cl{constructor(e){super(e),this.type=de.BLOCK_CREATE,e&&(e.isShadow()&&(this.recordUndo=!1),this.xml=Wc(e),this.ids=Pe(e),this.json=as(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Zs(this.xml),e.ids=this.ids,e.json=this.json,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new _g),n.xml=r.textToDom$$module$build$src$core$utils$xml(e.xml),n.ids=e.ids,n.json=e.json,e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!nw(n,this.ids))if(e)no(this.json,n);else for(e=0;e<this.ids.length;e++){const o=this.ids[e],a=n.getBlockById(o);a?a.dispose(!1):o===this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}}},nw=function(e,n){return n.map(o=>e.getBlockById(o)).filter(o=>o&&o.isShadow()).length===n.length};i(Le.EVENT,de.BLOCK_CREATE,_g);var fg=class extends ti{constructor(e,n){super(n),this.type=de.THEME_CHANGE,this.themeName=e}toJson(){const e=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return e.themeName=this.themeName,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new fg),n.themeName=e.themeName,n}};i(Le.EVENT,de.THEME_CHANGE,fg);var Tg=class extends ti{constructor(e,n,o,a,d){super(a),this.type=de.VIEWPORT_CHANGE,this.viewTop=e,this.viewLeft=n,this.scale=o,this.oldScale=d}toJson(){const e=super.toJson();if(this.viewTop===void 0)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(this.viewLeft===void 0)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(this.scale===void 0)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(this.oldScale===void 0)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return e.viewTop=this.viewTop,e.viewLeft=this.viewLeft,e.scale=this.scale,e.oldScale=this.oldScale,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new Tg),n.viewTop=e.viewTop,n.viewLeft=e.viewLeft,n.scale=e.scale,n.oldScale=e.oldScale,n}};i(Le.EVENT,de.VIEWPORT_CHANGE,Tg);var xL={fromJsonInternal:gS},__={TEST_ONLY:xL};__.fromJson=r.fromJson$$module$build$src$core$field_registry,__.register=Qs,__.unregister=ES;var Kr=class extends Lt{constructor(e,n,o){super(Lt.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,e!==Lt.SKIP_SETUP&&(this.setOptions(e),o&&this.configure_(o),n&&this.setValidator(n))}fromXml(e){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e.textContent)}loadState(e){this.loadLegacyState(Kr,e)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(e))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=b(ue.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&_e(this.borderRect_,"blocklyDropdownRect"),this.fieldGroup_&&(_e(this.fieldGroup_,"blocklyField"),_e(this.fieldGroup_,"blocklyDropdownField"))}shouldAddBorderRect_(){let e;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!((e=this.getSourceBlock())!=null&&e.isShadow())}createTextArrow_(){this.arrow=b(ue.TSPAN,{},this.textElement_);let e;this.arrow.appendChild(document.createTextNode((e=this.getSourceBlock())!=null&&e.RTL?Kr.ARROW_CHAR+" ":" "+Kr.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central");let n;(n=this.getSourceBlock())!=null&&n.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=b(ue.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(Gn,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(e){var n=this.getSourceBlock();if(!n)throw new lr;this.dropdownCreate(),this.menu_&&(this.menu_.openingCoords=e&&typeof e.clientX=="number"?new xe(e.clientX,e.clientY):null,ud(),e=this.menu_.render(cd()),_e(e,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(n=n.getColour(),e=this.sourceBlock_.getColourTertiary(),zT(n,e)),YT(this,this.dropdownDispose_.bind(this)),cd().style.height=`${this.menu_.getSize().height}px`,this.menu_.focus(),this.selectedMenuItem&&this.menu_.setHighlighted(this.selectedMenuItem),this.applyColour())}dropdownCreate(){const e=this.getSourceBlock();if(!e)throw new lr;const n=new YE;n.setRole(Vn.LISTBOX),this.menu_=n;const o=this.getOptions(!1);this.selectedMenuItem=null;for(let d=0;d<o.length;d++){var a=o[d];if(a===Kr.SEPARATOR){n.addChild(new XR);continue}const[p,v]=a;ha(p)?(a=new Image(p.width,p.height),a.src=p.src,a.alt=p.alt):a=p,a=new Kd(a,v),a.setRole(Vn.OPTION),a.setRightToLeft(e.RTL),a.setCheckable(!0),n.addChild(a),a.setChecked(v===this.value_),v===this.value_&&(this.selectedMenuItem=a),a.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(e){hd(this,!0),this.onItemSelected_(this.menu_,e)}onItemSelected_(e,n){this.setValue(n.getValue())}isOptionListDynamic(){return typeof this.menuGenerator_=="function"}getOptions(e){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:e&&this.generatedOptions?this.generatedOptions:(this.generatedOptions=this.menuGenerator_(),this.validateOptions(this.generatedOptions),this.generatedOptions)}setOptions(e){Array.isArray(e)?(this.validateOptions(e),e=this.trimOptions(e),this.menuGenerator_=e.options,this.prefixField=e.prefix||null,this.suffixField=e.suffix||null):this.menuGenerator_=e,this.selectedOption=this.getOptions(!1)[0],this.setValue(this.selectedOption[1])}doClassValidation_(e){return this.getOptions(!0).some(n=>n[1]===e)?e:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+e),null)}doValueUpdate_(e){super.doValueUpdate_(e),e=this.getOptions(!0);for(let n=0,o;o=e[n];n++)o[1]===this.value_&&(this.selectedOption=o)}applyColour(){const e=this.sourceBlock_;this.borderRect_&&(this.borderRect_.setAttribute("stroke",e.getColourTertiary()),this.menu_?this.borderRect_.setAttribute("fill",e.getColourTertiary()):this.borderRect_.setAttribute("fill","transparent")),e&&this.arrow&&(e.isShadow()?this.arrow.style.fill=e.getColourSecondary():this.arrow.style.fill=e.getColour())}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const e=this.selectedOption&&this.selectedOption[0];ha(e)?this.renderSelectedImage(e):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(e){const n=this.getSourceBlock();if(!n)throw new lr;this.imageElement.style.display="",this.imageElement.setAttributeNS(Gn,"xlink:href",e.src),this.imageElement.setAttribute("height",String(e.height)),this.imageElement.setAttribute("width",String(e.width));const o=Number(e.height);e=Number(e.width);var a=!!this.borderRect_;const d=Math.max(a?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,o+Kr.IMAGE_Y_PADDING);a=a?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let p;p=this.svgArrow?this.positionSVGArrow(e+a,d/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):wt(this.arrow),this.size_=new lt(e+p+a*2,d);let v=0;n.RTL?this.imageElement.setAttribute("x",`${a+p}`):(v=e+p,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${a}`)),this.imageElement.setAttribute("y",String(d/2-o/2)),this.positionTextElement_(v+a,e+p)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var e=this.getTextElement();_e(e,"blocklyDropdownText"),e.setAttribute("text-anchor","start");var n=!!this.borderRect_;e=Math.max(n?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const o=wt(this.getTextElement());n=n?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let a=0;this.svgArrow&&(a=this.positionSVGArrow(o+n,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_=new lt(o+a+n*2,e),this.positionTextElement_(n,o)}positionSVGArrow(e,n){if(!this.svgArrow)return 0;const o=this.getSourceBlock();if(!o)throw new lr;const a=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,d=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,p=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(o.RTL?a:e+d)+","+n+")"),p+d}getText_(){if(!this.selectedOption)return null;const e=this.selectedOption[0];if(ha(e))return e.alt;if(typeof HTMLElement<"u"&&e instanceof HTMLElement){let n,o;return(o=(n=e.title)!=null?n:e.ariaLabel)!=null?o:e.innerText}return typeof e=="string"?e:(console.warn("Can't get text for existing dropdown option. If you're using HTMLElement dropdown options in node, ensure you're using jsdom-global or similar."),null)}static fromJson(e){if(!e.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(e.options,void 0,e)}trimOptions(e){let n=!1;const o=e.map(v=>{if(v===Kr.SEPARATOR)return n=!0,v;const[X,Ie]=v;return typeof X=="string"?[rr(X),Ie]:(n=!0,[ha(X)?Object.assign({},X,{alt:rr(X.alt)}):X,Ie])});if(n||e.length<2)return{options:o};var a=o.map(([v])=>v),d=Fc(a);e=np(a,d);const p=sp(a,d);return!e&&!p||d<=e+p?{options:o}:(d=e?a[0].substring(0,e-1):void 0,a=p?a[0].substr(1-p):void 0,{options:this.applyTrim(o,e,p),prefix:d,suffix:a})}applyTrim(e,n,o){return e.map(([a,d])=>[a.substring(n,a.length-o),d])}validateOptions(e){if(!Array.isArray(e))throw TypeError("FieldDropdown options must be an array.");if(!e.length)throw TypeError("FieldDropdown options must not be an empty array.");let n=!1;for(let o=0;o<e.length;o++){const a=e[o];Array.isArray(a)||a===Kr.SEPARATOR?typeof a[1]!="string"?(n=!0,console.error(`Invalid option[${o}]: Each FieldDropdown option id must be a string.
          Found ${a[1]} in: ${a}`)):!a[0]||typeof a[0]=="string"||ha(a[0])||typeof HTMLElement<"u"&&a[0]instanceof HTMLElement||(n=!0,console.error(`Invalid option[${o}]: Each FieldDropdown option must have a string
          label, image description, or HTML element. Found ${a[0]} in: ${a}`)):(n=!0,console.error(`Invalid option[${o}]: Each FieldDropdown option must be an array or
          the string literal 'separator'. Found: ${a}`))}if(n)throw TypeError("Found invalid FieldDropdown options.")}};Kr.SEPARATOR="separator",Kr.ARROW_CHAR="",Kr.IMAGE_Y_OFFSET=5,Kr.IMAGE_Y_PADDING=Kr.IMAGE_Y_OFFSET*2,Qs("field_dropdown",Kr);var Tl=class{constructor(e,n,o,a){this.name=e,this.startHats=!1,this.blockStyles=n||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=a||Object.create(null),this.fontStyle=Object.create(null),i(Le.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(e,n){this.blockStyles[e]=n}setCategoryStyle(e,n){this.categoryStyles[e]=n}getComponentStyle(e){if(e=this.componentStyles[e],!e)return null;if(typeof e=="string"){const n=this.getComponentStyle(e);if(n)return n}return`${e}`}setComponentStyle(e,n){this.componentStyles[e]=n}setFontStyle(e){this.fontStyle=e}setStartHats(e){this.startHats=e}static defineTheme(e,n){e=e.toLowerCase();const o=new Tl(e);let a=n.base;if(a){if(typeof a=="string"){let d;a=(d=f(Le.THEME,a))!=null?d:void 0}a instanceof Tl&&(ct(o,a),o.name=e)}return ct(o.blockStyles,n.blockStyles),ct(o.categoryStyles,n.categoryStyles),ct(o.componentStyles,n.componentStyles),ct(o.fontStyle,n.fontStyle),n.startHats!==null&&(o.startHats=n.startHats),o}},sw={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},iw={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}},f_=new Tl("classic",sw,iw),ri=class{constructor(e){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let n=null,o=!1;var a=!1,d=!1,p=!1,v=!1,X=!1;const Ie=!!e.readOnly;if(!Ie){var je;n=De((je=e.toolbox)!=null?je:null),o=Ue(n),a=e.trashcan,a=a===void 0?o:a,d=e.collapse,d=d===void 0?o:d,p=e.comments,p=p===void 0?o:p,v=e.disable,v=v===void 0?o:v,X=e.sounds,X=X===void 0?!0:X}je=e.maxTrashcanContents,a?je===void 0&&(je=32):je=0;const zt=!!e.rtl;let yt=e.horizontalLayout;yt===void 0&&(yt=!1);var jr=e.toolboxPosition!=="end";jr=yt?jr?at.TOP:at.BOTTOM:jr===zt?at.RIGHT:at.LEFT;let Pi=e.css;Pi===void 0&&(Pi=!0);let hi="https://blockly-demo.appspot.com/static/media/";e.media&&(hi=e.media.endsWith("/")?e.media:e.media+"/");const gC=e.oneBasedIndex,Bw=e.renderer||"geras",Uw=e.plugins||{};let d0=e.modalInputs;d0===void 0&&(d0=!0),this.RTL=zt,this.oneBasedIndex=gC===void 0?!0:gC,this.collapse=d,this.comments=p,this.disable=v,this.readOnly=Ie,this.maxBlocks=e.maxBlocks||1/0;let mC;this.maxInstances=(mC=e.maxInstances)!=null?mC:null,this.modalInputs=d0,this.pathToMedia=hi,this.hasCategories=o,this.moveOptions=ri.parseMoveOptions(e,o),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=a,this.maxTrashcanContents=je,this.hasSounds=X,this.hasCss=Pi,this.horizontalLayout=yt,this.languageTree=n,this.gridOptions=ri.parseGridOptions(e),this.zoomOptions=ri.parseZoomOptions(e),this.toolboxPosition=jr,this.theme=ri.parseThemeOptions(e),this.renderer=Bw;let $C;this.rendererOverrides=($C=e.rendererOverrides)!=null?$C:null;let IC;this.parentWorkspace=(IC=e.parentWorkspace)!=null?IC:null,this.plugins=Uw}static parseMoveOptions(e,n){const o=e.move||{},a={};return o.scrollbars===void 0&&e.scrollbars===void 0?a.scrollbars=n:typeof o.scrollbars=="object"?(a.scrollbars={horizontal:!!o.scrollbars.horizontal,vertical:!!o.scrollbars.vertical},a.scrollbars.horizontal&&a.scrollbars.vertical?a.scrollbars=!0:a.scrollbars.horizontal||a.scrollbars.vertical||(a.scrollbars=!1)):a.scrollbars=!!o.scrollbars||!!e.scrollbars,a.wheel=a.scrollbars&&o.wheel!==void 0?!!o.wheel:typeof a.scrollbars=="object",a.drag=a.scrollbars?o.drag===void 0?!0:!!o.drag:!1,a}static parseZoomOptions(e){e=e.zoom||{};const n={};return n.controls=e.controls===void 0?!1:!!e.controls,n.wheel=e.wheel===void 0?!1:!!e.wheel,n.startScale=e.startScale===void 0?1:Number(e.startScale),n.maxScale=e.maxScale===void 0?3:Number(e.maxScale),n.minScale=e.minScale===void 0?.3:Number(e.minScale),n.scaleSpeed=e.scaleSpeed===void 0?1.2:Number(e.scaleSpeed),n.pinch=e.pinch===void 0?n.wheel||n.controls:!!e.pinch,n}static parseGridOptions(e){e=e.grid||{};const n={};return n.spacing=Number(e.spacing)||0,n.colour=e.colour||"#888",n.length=e.length===void 0?1:Number(e.length),n.snap=n.spacing>0&&!!e.snap,n}static parseThemeOptions(e){return e=e.theme||f_,typeof e=="string"?f(Le.THEME,e):e instanceof Tl?e:Tl.defineTheme(e.name||"builtin"+B(),e)}},bL=class{constructor(e,n){this.bubble=e,this.workspace=n,this.startLoc=null}isMovable(){return!0}startDrag(){this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1);let e;(e=this.workspace.getLayerManager())==null||e.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(e){this.bubble.moveDuringDrag(e)}endDrag(){this.workspace.setResizesEnabled(!0);let e;(e=this.workspace.getLayerManager())==null||e.moveOffDragLayer(this.bubble,c_),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},zn,St=class{constructor(e,n,o,a,d){this.workspace=e,this.anchor=n,this.ownerRect=o,this.owner=d,this.size=new lt(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new bL(this,this.workspace),this.id=B(),this.svgRoot=b(ue.G,{class:"blocklyBubble"},e.getBubbleCanvas()),e=b(ue.G,{class:"blocklyEmboss"},this.svgRoot),this.tail=b(ue.PATH,{class:"blocklyBubbleTail"},e),this.background=b(ue.RECT,{class:"blocklyDraggable",x:0,y:0,rx:zn.BORDER_WIDTH,ry:zn.BORDER_WIDTH},e),this.contentContainer=b(ue.G,{},this.svgRoot),this.focusableElement=a??this.svgRoot,this.focusableElement.setAttribute("id",this.id),A(this.background,"pointerdown",this,this.onMouseDown),A(this.focusableElement,"keydown",this,this.onKeyDown)}dispose(){ve(this.svgRoot),this.disposed=!0}setAnchorLocation(e,n=!1){this.anchor=e,n?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(e,n){this.relativeLeft=e,this.relativeTop=n,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(e,n=!1){e.width=Math.max(e.width,zn.MIN_SIZE),e.height=Math.max(e.height,zn.MIN_SIZE),this.size=e,this.background.setAttribute("width",`${e.width}`),this.background.setAttribute("height",`${e.height}`),n?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(e){this.colour=e,this.tail.setAttribute("fill",e),this.background.setAttribute("fill",e)}onMouseDown(e){let n;(n=this.workspace.getGesture(e))==null||n.handleBubbleStart(e,this),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}onKeyDown(e){e.key==="Escape"&&this.owner&&(this.owner.setBubbleVisible(!1),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.owner))}positionRelativeToAnchor(){let e=this.anchor.x;e=this.workspace.RTL?e-(this.relativeLeft+this.size.width):e+this.relativeLeft,this.moveTo(e,this.relativeTop+this.anchor.y)}moveTo(e,n){this.svgRoot.setAttribute("transform",`translate(${e}, ${n})`)}positionByRect(e=new it(0,0,0,0)){var n=this.workspace.getMetricsManager().getViewMetrics(!0),o=this.getOptimalRelativeLeft(n),a=this.getOptimalRelativeTop(n);const d={x:o,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},p={x:-this.size.width-30,y:a};a={x:e.getWidth(),y:a};var v={x:o,y:e.getHeight()};o=e.getWidth()<e.getHeight()?a:v,e=e.getWidth()<e.getHeight()?v:a,a=this.getOverlap(d,n),v=this.getOverlap(p,n);const X=this.getOverlap(o,n);n=this.getOverlap(e,n),n=Math.max(a,v,X,n),a===n?(this.relativeLeft=d.x,this.relativeTop=d.y):v===n?(this.relativeLeft=p.x,this.relativeTop=p.y):X===n?(this.relativeLeft=o.x,this.relativeTop=o.y):(this.relativeLeft=e.x,this.relativeTop=e.y),this.positionRelativeToAnchor()}getOverlap(e,n){var o=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x+this.anchor.x;return e=e.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(o+this.size.width,n.left+n.width)-Math.max(o,n.left))*(Math.min(e+this.size.height,n.top+n.height)-Math.max(e,n.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(e){let n=-this.size.width/4;if(this.size.width>e.width)return n;if(e=this.getWorkspaceViewRect(e),this.workspace.RTL){var o=this.anchor.x-n;o-this.size.width<e.left?n=-(e.left-this.anchor.x+this.size.width):o>e.right&&(n=-(e.right-this.anchor.x))}else{o=n+this.anchor.x;const a=o+this.size.width;o<e.left?n=e.left-this.anchor.x:a>e.right&&(n=e.right-this.anchor.x-this.size.width)}return n}getOptimalRelativeTop(e){let n=-this.size.height/4;if(this.size.height>e.height)return n;const o=this.anchor.y+n,a=o+this.size.height;return e=this.getWorkspaceViewRect(e),o<e.top?n=e.top-this.anchor.y:a>e.bottom&&(n=e.bottom-this.anchor.y-this.size.height),n}getWorkspaceViewRect(e){const n=e.top;let o=e.top+e.height,a=e.left;return e=e.left+e.width,o-=this.getScrollbarThickness(),this.workspace.RTL?a-=this.getScrollbarThickness():e-=this.getScrollbarThickness(),new it(n,o,a,e)}getScrollbarThickness(){return sr.scrollbarThickness/this.workspace.scale}renderTail(){const e=[];var n=this.size.width/2,o=this.size.height/2,a=-this.relativeLeft,d=-this.relativeTop;if(n===a&&o===d)e.push("M "+n+","+o);else{d-=o,a-=n,this.workspace.RTL&&(a*=-1);var p=Math.sqrt(d*d+a*a),v=Math.acos(a/p);d<0&&(v=2*Math.PI-v);var X=v+Math.PI/2;X>Math.PI*2&&(X-=Math.PI*2);var Ie=Math.sin(X);const zt=Math.cos(X);let yt=(this.size.width+this.size.height)/zn.TAIL_THICKNESS;yt=Math.min(yt,this.size.width,this.size.height)/4,X=1-zn.ANCHOR_RADIUS/p,a=n+X*a,d=o+X*d,X=n+yt*zt;const jr=o+yt*Ie;n-=yt*zt,o-=yt*Ie,Ie=ld(this.workspace.RTL?-zn.TAIL_ANGLE:zn.TAIL_ANGLE),Ie=v+Ie,Ie>Math.PI*2&&(Ie-=Math.PI*2),v=Math.sin(Ie)*p/zn.TAIL_BEND,p=Math.cos(Ie)*p/zn.TAIL_BEND,e.push("M"+X+","+jr),e.push("C"+(X+p)+","+(jr+v)+" "+a+","+d+" "+a+","+d),e.push("C"+a+","+d+" "+(n+p)+","+(o+v)+" "+n+","+o)}e.push("z");let je;(je=this.tail)==null||je.setAttribute("d",e.join(" "))}bringToFront(){let e;const n=(e=this.svgRoot)==null?void 0:e.parentNode;return this.svgRoot&&n?.lastChild!==this.svgRoot?(n?.appendChild(this.svgRoot),!0):!1}getRelativeToSurfaceXY(){return new xe(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(e){this.moveTo(e.x,e.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-e.x-this.size.width:e.x-this.anchor.x,this.relativeTop=e.y-this.anchor.y,this.renderTail()}setDragging(e){}setDeleteStyle(e){}isDeletable(){return!1}showContextMenu(e){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(e){this.dragStrategy.drag(e)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){Be(this)}unselect(){Be(null)}getFocusableElement(){return this.focusableElement}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.bringToFront();var e=this.getRelativeToSurfaceXY();const n=this.getSize();e=new it(e.y,e.y+n.height,e.x,e.x+n.width),this.workspace.scrollBoundsIntoView(e)}onNodeBlur(){this.unselect()}canBeFocused(){return!0}getOwner(){return this.owner}};zn=St,St.BORDER_WIDTH=6,St.DOUBLE_BORDER=zn.BORDER_WIDTH*2,St.MIN_SIZE=zn.DOUBLE_BORDER,St.TAIL_THICKNESS=1,St.TAIL_ANGLE=20,St.TAIL_BEND=4,St.ANCHOR_RADIUS=8;var wi=class extends St{constructor(e,n,o,a){super(n,o,a),this.workspace=n,this.anchor=o,this.ownerRect=a,this.autoLayout=!0,n=new ri(e),this.validateWorkspaceOptions(n),this.svgDialog=b(ue.SVG,{x:St.BORDER_WIDTH,y:St.BORDER_WIDTH},this.contentContainer),e.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new ri(e)),this.miniWorkspace.internalIsMutator=!0,e=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(e),n.languageTree&&(e.insertBefore(this.miniWorkspace.addFlyout(ue.G),this.miniWorkspace.getCanvas()),e=this.miniWorkspace.getFlyout(),e?.init(this.miniWorkspace),e?.show(n.languageTree)),_e(this.svgRoot,"blocklyMiniWorkspaceBubble"),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this));let d,p;(d=this.miniWorkspace.getFlyout())==null||(p=d.getWorkspace())==null||p.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(e){this.miniWorkspace.addChangeListener(e)}validateWorkspaceOptions(e){if(e.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(e.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(e.zoomOptions.controls||e.zoomOptions.wheel||e.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(e.moveOptions.scrollbars||e.moveOptions.wheel||e.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(e.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress)for(const e of this.miniWorkspace.getTopBlocks(!1)){const n=e.getRelativeToSurfaceXY();if(n.y<20&&e.moveBy(0,20-n.y),e.RTL){let o=-20;const a=this.miniWorkspace.getFlyout();a&&(o-=a.getWidth()),n.x>o&&e.moveBy(o-n.x,0)}else n.x<20&&e.moveBy(20-n.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()||this.miniWorkspace.keyboardMoveInProgress){this.autoLayout&&(this.autoLayout=!this.miniWorkspace.keyboardMoveInProgress);var e=this.getSize(),n=this.calculateWorkspaceSize();Math.abs(e.width-n.width)<wi.MINIMUM_VIEW_CHANGE&&Math.abs(e.height-n.height)<wi.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${n.width}px`),this.svgDialog.setAttribute("height",`${n.height}px`),this.miniWorkspace.setCachedParentSvgSize(n.width,n.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${n.width}, 0)`),this.setSize(new lt(n.width+St.DOUBLE_BORDER,n.height+St.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var e=this.miniWorkspace.getCanvas().getBBox();let n=e.width+wi.MARGIN;e=e.height+wi.MARGIN;const o=this.miniWorkspace.getFlyout();if(o){const a=o.getWorkspace().getMetricsManager().getScrollMetrics();e=Math.max(e,a.height+20),n+=o.getWidth()}return new lt(n,e)}updateBlockStyles(){for(var e of this.miniWorkspace.getAllBlocks(!1))e.setStyle(e.getStyleName());let n;if(e=(n=this.miniWorkspace.getFlyout())==null?void 0:n.getWorkspace())for(const o of e.getAllBlocks(!1))o.setStyle(o.getStyleName())}moveDuringDrag(e){super.moveDuringDrag(e),this.autoLayout=!1}moveTo(e,n){super.moveTo(e,n),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(e){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};wi.MINIMUM_VIEW_CHANGE=10,wi.MARGIN=St.DOUBLE_BORDER*3;var du=class{constructor(e){this.sourceBlock=e,this.offsetInBlock=new xe(0,0),this.workspaceLocation=new xe(0,0),this.svgRoot=null,this.tooltip=e,this.id=B()}getType(){throw Error("Icons must implement getType")}initView(e){if(!this.svgRoot){var n=this.sourceBlock;this.svgRoot=b(ue.G,{class:"blocklyIconGroup",id:this.id}),n.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),A(this.svgRoot,"pointerdown",this,e),this.svgRoot.tooltip=this,Bc(this.svgRoot)}}dispose(){ap(this.svgRoot),ve(this.svgRoot)}getWeight(){return-1}getSize(){return new lt(0,0)}setTooltip(e){this.tooltip=e??this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",qo(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(e){this.offsetInBlock=e,this.updateSvgRootOffset()}updateSvgRootOffset(){let e;(e=this.svgRoot)==null||e.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(e){this.workspaceLocation=xe.sum(e,this.offsetInBlock)}onClick(){}isClickableInFlyout(e){return!0}getFocusableElement(){const e=this.svgRoot;if(!e)throw Error("Attempting to focus uninitialized icon.");return e}getFocusableTree(){return this.sourceBlock.workspace}onNodeFocus(){var e=this.sourceBlock.getBoundingRectangle();e=new it(e.top+this.offsetInBlock.y,e.top+this.offsetInBlock.y+this.getSize().height,e.left+this.offsetInBlock.x,e.left+this.offsetInBlock.x+this.getSize().width),this.sourceBlock.workspace.scrollBoundsIntoView(e)}onNodeBlur(){}canBeFocused(){return!0}getSourceBlock(){return this.sourceBlock}},T_,p_;T_=17,p_=16,r.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends du{constructor(e,n){super(n),this.flyoutBlockTypes=e,this.sourceBlock=n,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(e){this.svgRoot||(super.initView(e),b(ue.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),b(ue.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),b(ue.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),_e(this.svgRoot,"blocklyMutatorIcon"))}dispose(){super.dispose();let e;(e=this.miniWorkspaceBubble)==null||e.dispose()}getWeight(){return r.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new lt(T_,T_)}applyColour(){super.applyColour();let e;(e=this.miniWorkspaceBubble)==null||e.setColour(this.sourceBlock.getColour());let n;(n=this.miniWorkspaceBubble)==null||n.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(e){super.onLocationChange(e);let n;(n=this.miniWorkspaceBubble)==null||n.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(e){const n=this;return(0,me.asyncExecutePromiseGeneratorFunction)(function*(){if(n.bubbleIsVisible()!==e){if(yield Js(),e){n.miniWorkspaceBubble=new wi(n.getMiniWorkspaceConfig(),n.sourceBlock.workspace,n.getAnchorLocation(),n.getBubbleOwnerRect()),n.applyColour(),n.createRootBlock(),n.addSaveConnectionsListener();let o;(o=n.miniWorkspaceBubble)==null||o.addWorkspaceChangeListener(n.createMiniWorkspaceChangeListener())}else{let o;(o=n.miniWorkspaceBubble)==null||o.dispose(),n.miniWorkspaceBubble=null,n.saveConnectionsListener&&n.sourceBlock.workspace.removeChangeListener(n.saveConnectionsListener),n.saveConnectionsListener=null}Y(new(ce(de.BUBBLE_OPEN))(n.sourceBlock,e,"mutator"))}})}getBubble(){return this.miniWorkspaceBubble}getMiniWorkspaceConfig(){let e;const n={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:(e=this.sourceBlock.workspace.options.rendererOverrides)!=null?e:void 0};return this.flyoutBlockTypes.length&&(n.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map(o=>({kind:"block",type:o}))}),n}getAnchorLocation(){const e=T_/2;return xe.sum(this.workspaceLocation,new xe(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new it(e.y,e.y+e.height,e.x,e.x+e.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace());for(var e of this.rootBlock.getDescendants(!1))e.queueRender();this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1);let n,o,a,d;e=(d=(n=this.miniWorkspaceBubble)==null||(o=n.getWorkspace())==null||(a=o.getFlyout())==null?void 0:a.getWidth())!=null?d:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(e+p_):p_,p_)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return e=>{r.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(e)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout(()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()},0))}}static isIgnorableMutatorEvent(e){return e.isUiEvent||Z(e)||pe(e)&&e.element==="disabled"}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var e=r.getGroup$$module$build$src$core$events$utils();e||r.setGroup$$module$build$src$core$events$utils(!0);var n=ul.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var o=ul.getExtraBlockState_(this.sourceBlock);n!==o&&Y(new(ce(de.BLOCK_CHANGE))(this.sourceBlock,"mutation",null,n,o)),r.setGroup$$module$build$src$core$events$utils(e)}}getWorkspace(){let e;return(e=this.miniWorkspaceBubble)==null?void 0:e.getWorkspace()}},r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=Er.MUTATOR,r.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,r.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Ca=Object.create(null),ow={allExtensions:Ca};r.register$$module$build$src$core$extensions("parent_tooltip_when_inline",AS);var vs={TEST_ONLY:ow};vs.apply=Id,vs.buildTooltipForDropdown=r.buildTooltipForDropdown$$module$build$src$core$extensions,vs.buildTooltipWithFieldText=r.buildTooltipWithFieldText$$module$build$src$core$extensions,vs.isRegistered=bp,vs.register=r.register$$module$build$src$core$extensions,vs.registerMixin=r.registerMixin$$module$build$src$core$extensions,vs.registerMutator=r.registerMutator$$module$build$src$core$extensions,vs.runAfterPageLoad=RS,vs.unregister=mS;var At;(function(e){e[e.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",e[e.MAC_ENTER=3]="MAC_ENTER",e[e.BACKSPACE=8]="BACKSPACE",e[e.TAB=9]="TAB",e[e.NUM_CENTER=12]="NUM_CENTER",e[e.ENTER=13]="ENTER",e[e.SHIFT=16]="SHIFT",e[e.CTRL=17]="CTRL",e[e.ALT=18]="ALT",e[e.PAUSE=19]="PAUSE",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.ESC=27]="ESC",e[e.SPACE=32]="SPACE",e[e.PAGE_UP=33]="PAGE_UP",e[e.PAGE_DOWN=34]="PAGE_DOWN",e[e.END=35]="END",e[e.HOME=36]="HOME",e[e.LEFT=37]="LEFT",e[e.UP=38]="UP",e[e.RIGHT=39]="RIGHT",e[e.DOWN=40]="DOWN",e[e.PLUS_SIGN=43]="PLUS_SIGN",e[e.PRINT_SCREEN=44]="PRINT_SCREEN",e[e.INSERT=45]="INSERT",e[e.DELETE=46]="DELETE",e[e.ZERO=48]="ZERO",e[e.ONE=49]="ONE",e[e.TWO=50]="TWO",e[e.THREE=51]="THREE",e[e.FOUR=52]="FOUR",e[e.FIVE=53]="FIVE",e[e.SIX=54]="SIX",e[e.SEVEN=55]="SEVEN",e[e.EIGHT=56]="EIGHT",e[e.NINE=57]="NINE",e[e.FF_SEMICOLON=59]="FF_SEMICOLON",e[e.FF_EQUALS=61]="FF_EQUALS",e[e.FF_DASH=173]="FF_DASH",e[e.FF_HASH=163]="FF_HASH",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.AT_SIGN=64]="AT_SIGN",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.META=91]="META",e[e.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",e[e.CONTEXT_MENU=93]="CONTEXT_MENU",e[e.NUM_ZERO=96]="NUM_ZERO",e[e.NUM_ONE=97]="NUM_ONE",e[e.NUM_TWO=98]="NUM_TWO",e[e.NUM_THREE=99]="NUM_THREE",e[e.NUM_FOUR=100]="NUM_FOUR",e[e.NUM_FIVE=101]="NUM_FIVE",e[e.NUM_SIX=102]="NUM_SIX",e[e.NUM_SEVEN=103]="NUM_SEVEN",e[e.NUM_EIGHT=104]="NUM_EIGHT",e[e.NUM_NINE=105]="NUM_NINE",e[e.NUM_MULTIPLY=106]="NUM_MULTIPLY",e[e.NUM_PLUS=107]="NUM_PLUS",e[e.NUM_MINUS=109]="NUM_MINUS",e[e.NUM_PERIOD=110]="NUM_PERIOD",e[e.NUM_DIVISION=111]="NUM_DIVISION",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e[e.NUMLOCK=144]="NUMLOCK",e[e.SCROLL_LOCK=145]="SCROLL_LOCK",e[e.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",e[e.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",e[e.SEMICOLON=186]="SEMICOLON",e[e.DASH=189]="DASH",e[e.EQUALS=187]="EQUALS",e[e.COMMA=188]="COMMA",e[e.PERIOD=190]="PERIOD",e[e.SLASH=191]="SLASH",e[e.APOSTROPHE=192]="APOSTROPHE",e[e.TILDE=192]="TILDE",e[e.SINGLE_QUOTE=222]="SINGLE_QUOTE",e[e.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",e[e.BACKSLASH=220]="BACKSLASH",e[e.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",e[e.WIN_KEY=224]="WIN_KEY",e[e.MAC_FF_META=224]="MAC_FF_META",e[e.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",e[e.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",e[e.WIN_IME=229]="WIN_IME",e[e.VK_NONAME=252]="VK_NONAME",e[e.PHANTOM=255]="PHANTOM"})(At||(At={}));var Mi={};Mi.arc=nr,Mi.curve=bn,Mi.line=da,Mi.lineOnAxis=qe,Mi.lineTo=ei,Mi.moveBy=Jt,Mi.moveTo=Dr,Mi.point=Je;var Xt={};Xt.Coordinate=xe,Xt.KeyCodes=At,Xt.Rect=it,Xt.Size=lt,Xt.Svg=ue,Xt.aria=ru,Xt.array=yR,Xt.browserEvents=Ci,Xt.colour=ds,Xt.deprecation=iL,Xt.dom=Pr,Xt.extensions=vs,Xt.idGenerator=kE,Xt.math=Zd,Xt.object=vR,Xt.parsing=uu,Xt.string=Oa,Xt.style=ao,Xt.svgMath=il,Xt.svgPaths=Mi,Xt.toolbox=co,Xt.userAgent=Yk,Xt.xml=ga;var E_=class extends St{constructor(e,n,o,a){super(e,n,o,void 0,a),this.workspace=e,this.anchor=n,this.ownerRect=o,this.owner=a,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.sizeChangeListeners=[],this.locationChangeListeners=[],this.DEFAULT_SIZE=new lt(160+St.DOUBLE_BORDER,80+St.DOUBLE_BORDER),this.MIN_SIZE=new lt(45+St.DOUBLE_BORDER,20+St.DOUBLE_BORDER),this.editable=!0,_e(this.svgRoot,"blocklyTextInputBubble"),this.editor=new h_(e,this.id,()=>{r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this)}),this.contentContainer.appendChild(this.editor.getDom()),this.resizeGroup=this.createResizeHandle(this.svgRoot,e),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.editor.getText()}setText(e){this.editor.setText(e)}setEditable(e){this.editable=e,this.editor.setEditable(e)}isEditable(){return this.editable}addTextChangeListener(e){this.editor.addTextChangeListener(e)}addSizeChangeListener(e){this.sizeChangeListeners.push(e)}addLocationChangeListener(e){this.locationChangeListeners.push(e)}createResizeHandle(e,n){return e=b(ue.IMAGE,{class:"blocklyResizeHandle",href:`${n.options.pathToMedia}resize-handle.svg`},e),A(e,"pointerdown",this,this.onResizePointerDown),e}setSize(e,n=!1){e.width=Math.max(e.width,this.MIN_SIZE.width),e.height=Math.max(e.height,this.MIN_SIZE.height);const o=e.width-St.DOUBLE_BORDER,a=e.height-St.DOUBLE_BORDER;this.editor.updateSize(new lt(o,a),new lt(0,0)),this.editor.getDom().setAttribute("x",`${St.DOUBLE_BORDER/2}`),this.editor.getDom().setAttribute("y",`${St.DOUBLE_BORDER/2}`),this.resizeGroup.setAttribute("y",`${a}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",`${-St.DOUBLE_BORDER}`):this.resizeGroup.setAttribute("x",`${o}`),super.setSize(e,n),this.onSizeChange()}getSize(){return super.getSize()}moveDuringDrag(e){super.moveDuringDrag(e),this.onLocationChange()}setPositionRelativeToAnchor(e,n){super.setPositionRelativeToAnchor(e,n),this.onLocationChange()}positionByRect(e=new it(0,0,0,0)){super.positionByRect(e),this.onLocationChange()}onResizePointerDown(e){this.bringToFront(),G(e)||(gd(this.workspace,e,new xe(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=A(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=A(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),e.stopPropagation()}onResizePointerUp(e){R(),this.resizePointerUpListener&&(k(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(k(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(e){e=md(this.workspace,e),this.setSize(new lt(this.workspace.RTL?-e.x:e.x,e.y),!1),this.onSizeChange()}onSizeChange(){for(const e of this.sizeChangeListeners)e()}onLocationChange(){for(const e of this.locationChangeListeners)e()}getEditor(){return this.editor}};Xe(`
.blocklyTextInputBubble .blocklyTextarea {
  background-color: var(--commentFillColour);
  border: 0;
  box-sizing: border-box;
  display: block;
  outline: 0;
  padding: 5px;
  resize: none;
  width: 100%;
  height: 100%;
}
`);var Ye;(function(e){e[e.INPUT_VALUE=1]="INPUT_VALUE",e[e.OUTPUT_VALUE=2]="OUTPUT_VALUE",e[e.NEXT_STATEMENT=3]="NEXT_STATEMENT",e[e.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"})(Ye||(Ye={}));var va=class{constructor(e){this.connectionChecker=e,this.connections=[]}addConnection(e,n){n=this.calculateIndexForYPos(n),this.connections.splice(n,0,e)}findIndexOfConnection(e,n){if(!this.connections.length)return-1;const o=this.calculateIndexForYPos(n);if(o>=this.connections.length)return-1;n=e.y;let a=o;for(;a>=0&&this.connections[a].y===n;){if(this.connections[a]===e)return a;a--}for(a=o;a<this.connections.length&&this.connections[a].y===n;){if(this.connections[a]===e)return a;a++}return-1}calculateIndexForYPos(e){if(!this.connections.length)return 0;let n=0,o=this.connections.length;for(;n<o;){const a=Math.floor((n+o)/2);if(this.connections[a].y<e)n=a+1;else if(this.connections[a].y>e)o=a;else{n=a;break}}return n}removeConnection(e,n){if(e=this.findIndexOfConnection(e,n),e===-1)throw Error("Unable to find connection in connectionDB.");this.connections.splice(e,1)}getNeighbours(e,n){function o(je){const zt=d-a[je].x,yt=p-a[je].y;return Math.sqrt(zt*zt+yt*yt)<=n&&Ie.push(a[je]),yt<n}const a=this.connections,d=e.x,p=e.y;e=0;let v=a.length-2,X=v;for(;e<X;)a[X].y<p?e=X:v=X,X=Math.floor((e+v)/2);const Ie=[];if(v=e=X,a.length){for(;e>=0&&o(e);)e--;do v++;while(v<a.length&&o(v))}return Ie}isInYRange(e,n,o){return Math.abs(this.connections[e].y-n)<=o}searchForClosest(e,n,o){if(!this.connections.length)return{connection:null,radius:n};const a=e.y,d=e.x;e.x=d+o.x,e.y=a+o.y;var p=this.calculateIndexForYPos(e.y);o=null;let v=n,X,Ie=p-1;for(;Ie>=0&&this.isInYRange(Ie,e.y,n);)X=this.connections[Ie],this.connectionChecker.canConnect(e,X,!0,v)&&(o=X,v=X.distanceFrom(e)),Ie--;for(;p<this.connections.length&&this.isInYRange(p,e.y,n);)X=this.connections[p],this.connectionChecker.canConnect(e,X,!0,v)&&(o=X,v=X.distanceFrom(e)),p++;return e.x=d,e.y=a,{connection:o,radius:v}}static init(e){const n=[];return n[Ye.INPUT_VALUE]=new va(e),n[Ye.OUTPUT_VALUE]=new va(e),n[Ye.NEXT_STATEMENT]=new va(e),n[Ye.PREVIOUS_STATEMENT]=new va(e),n}},pg=class extends ti{constructor(e,n,o){super(o),this.type=de.SELECTED,this.oldElementId=e??void 0,this.newElementId=n??void 0}toJson(){const e=super.toJson();return e.oldElementId=this.oldElementId,e.newElementId=this.newElementId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new pg),n.oldElementId=e.oldElementId,n.newElementId=e.newElementId,n}};i(Le.EVENT,de.SELECTED,pg);var Eg=class extends cl{constructor(e){if(super(e),this.type=de.BLOCK_DELETE,e){if(e.getParent())throw Error("Connected blocks cannot be deleted.");e.isShadow()&&(this.recordUndo=!1),this.oldXml=Wc(e),this.ids=Pe(e),this.wasShadow=e.isShadow(),this.oldJson=as(e,{addCoordinates:!0})}}toJson(){const e=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(this.wasShadow===void 0)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.oldXml=Zs(this.oldXml),e.ids=this.ids,e.wasShadow=this.wasShadow,e.oldJson=this.oldJson,this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new Eg),n.oldXml=r.textToDom$$module$build$src$core$utils$xml(e.oldXml),n.ids=e.ids,n.wasShadow=e.wasShadow||n.oldXml.tagName.toLowerCase()==="shadow",n.oldJson=e.oldJson,e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}run(e){const n=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(e)for(e=0;e<this.ids.length;e++){const o=this.ids[e],a=n.getBlockById(o);a?a.dispose(!1):o===this.blockId&&console.warn("Can't delete non-existent block: "+o)}else no(this.oldJson,n)}};i(Le.EVENT,de.BLOCK_DELETE,Eg);var Tt=class{constructor(e,n){if(this.type=n,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=e,e.id.includes("_connection"))throw Error(`Connection ID indicator is contained in block ID. This will cause problems with focus: ${e.id}.`);this.id=`${e.id}_connection_${B()}`}connect_(e){const n=Ye.INPUT_VALUE,o=this.getSourceBlock();var a=e.getSourceBlock();e.isConnected()&&e.disconnectInternal(!1);let d;if(this.isConnected()){const v=this.stashShadowState(),X=this.targetBlock();X.isShadow()?X.dispose(!1):(this.disconnectInternal(),d=X),this.applyShadowState(v)}let p;he()&&(p=new(ce(de.BLOCK_MOVE))(a),p.setReason(["connect"])),CS(this,e),a.setParent(o),p&&(p.recordNew(),Y(p)),d&&(e=this.type===n?d.outputConnection:d.previousConnection)&&((a=Tt.getConnectionForOrphanedConnection(a,e))?e.connect(a):e.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const e=this.targetBlock();e&&!e.isDeadOrDying()&&e.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Ye.INPUT_VALUE||this.type===Ye.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(e){}connect(e){if(this.targetConnection===e)return!0;if(this.getConnectionChecker().canConnect(this,e,!1)){const n=r.getGroup$$module$build$src$core$events$utils();n||r.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(e):e.connect_(this),r.setGroup$$module$build$src$core$events$utils(n)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(e=!0){const{parentConnection:n,childConnection:o}=this.getParentAndChildConnections();if(!n||!o)throw Error("Source connection not connected.");const a=r.getGroup$$module$build$src$core$events$utils();a||r.setGroup$$module$build$src$core$events$utils(!0);let d;he()&&(d=new(ce(de.BLOCK_MOVE))(o.getSourceBlock()),d.setReason(["disconnect"]));const p=this.targetConnection;p&&(p.targetConnection=null),this.targetConnection=null,e&&o.getSourceBlock().setParent(null),d&&(d.recordNew(),Y(d)),o.getSourceBlock().isShadow()||n.respawnShadow_(),r.setGroup$$module$build$src$core$events$utils(a)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(e,n){if(this.getSourceBlock().isDeadOrDying())return!1;var o;return n=(o=e.getInput(n))==null?void 0:o.connection,o=this.targetBlock(),o&&o!==e||!n||n.targetConnection===this?!1:(n.isConnected()&&n.disconnect(),n.connect(this),!0)}targetBlock(){if(this.isConnected()){let e,n;return(n=(e=this.targetConnection)==null?void 0:e.getSourceBlock())!=null?n:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return e?(Array.isArray(e)||(e=[e]),this.check=e,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(e){this.setShadowStateInternal({shadowDom:e})}getShadowDom(e){return e&&this.targetBlock().isShadow()?so(this.targetBlock()):this.shadowDom}setShadowState(e){this.setShadowStateInternal({shadowState:e})}getShadowState(e){return e&&this.targetBlock()&&this.targetBlock().isShadow()?as(this.targetBlock()):this.shadowState}neighbours(e){return[]}getParentInput(){let e=null;const n=this.sourceBlock_.inputList;for(let o=0;o<n.length;o++)if(n[o].connection===this){e=n[o];break}return e}toString(){const e=this.sourceBlock_;if(!e)return"Orphan Connection";if(e.outputConnection===this)var n="Output Connection of ";else if(e.previousConnection===this)n="Previous Connection of ";else if(e.nextConnection===this)n="Next Connection of ";else{n=null;for(let o=0,a;a=e.inputList[o];o++)if(a.connection===this){n=a;break}if(n)n='Input "'+n.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return n+e.toDevString()}stashShadowState(){const e=this.getShadowDom(!0),n=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:e,shadowState:n}}applyShadowState({shadowDom:e,shadowState:n}){this.shadowDom=e,this.shadowState=n}setShadowStateInternal({shadowDom:e=null,shadowState:n=null}={}){this.shadowDom=e,this.shadowState=n,this.getSourceBlock().isDeadOrDying()||((e=this.targetBlock())?e.isShadow()?(e.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(e=this.createShadowBlock(!1),this.serializeShadow(e),e&&e.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(e){var n=this.getSourceBlock();const o=this.getShadowState(),a=this.getShadowDom();if(n.isDeadOrDying()||!o&&!a)return null;if(o)return n=sa(o,n.workspace,{parentConnection:e?this:void 0,isShadow:!0,recordUndo:!1});if(a){if(n=tl(a,n.workspace),e)if(this.type===Ye.INPUT_VALUE){if(!n.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(n.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===Ye.NEXT_STATEMENT){if(!n.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(n.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return n}return null}serializeShadow(e){e&&(this.shadowDom=so(e),this.shadowState=as(e))}static getConnectionForOrphanedConnection(e,n){if(n.type===Ye.OUTPUT_VALUE)return NS(e,n.getSourceBlock());e=e.lastConnectionInStack(!0);const o=n.getConnectionChecker();return e&&o.canConnect(n,e,!1)?e:null}};Tt.CAN_CONNECT=0,Tt.REASON_SELF_CONNECTION=1,Tt.REASON_WRONG_TYPE=2,Tt.REASON_TARGET_NULL=3,Tt.REASON_CHECKS_FAILED=4,Tt.REASON_DIFFERENT_WORKSPACES=5,Tt.REASON_SHADOW_PARENT=6,Tt.REASON_DRAG_CHECKS_FAILED=7,Tt.REASON_PREVIOUS_AND_OUTPUT=8;var yL=class extends Error{constructor(e){super(`Tried to append an icon of type ${e.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=e}},kL={};kL.DuplicateIconType=yL,function(e){e[e.LEFT=-1]="LEFT",e[e.CENTRE=0]="CENTRE",e[e.RIGHT=1]="RIGHT"}(r.Align$$module$build$src$core$inputs$align||(r.Align$$module$build$src$core$inputs$align={})),r.Align$$module$build$src$core$inputs$align;var pl=class extends Lt{constructor(e,n,o){super(Lt.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,e!==Lt.SKIP_SETUP&&(o?this.configure_(o):this.class=n||null,this.setValue(e))}configure_(e){super.configure_(e),e.class&&(this.class=e.class)}initView(){this.createTextElement_(),this.class&&_e(this.getTextElement(),this.class),this.fieldGroup_&&_e(this.fieldGroup_,"blocklyLabelField")}doClassValidation_(e){return e==null?null:`${e}`}setClass(e){this.textElement_&&(this.class&&ke(this.textElement_,this.class),e&&_e(this.textElement_,e)),this.class=e}static fromJson(e){return new this(rr(e.text),void 0,e)}};Qs("field_label",pl),pl.prototype.DEFAULT_VALUE="";var wL=30,El=[];El[Ye.INPUT_VALUE]=Ye.OUTPUT_VALUE,El[Ye.OUTPUT_VALUE]=Ye.INPUT_VALUE,El[Ye.NEXT_STATEMENT]=Ye.PREVIOUS_STATEMENT,El[Ye.PREVIOUS_STATEMENT]=Ye.NEXT_STATEMENT;var gg="RENAME_VARIABLE_ID",mg="DELETE_VARIABLE_ID",ML=10,Br=class extends Tt{constructor(e,n){super(e,n),this.highlighted=!1,this.targetConnection=null,this.db=e.workspace.connectionDBList[n],this.dbOpposite=e.workspace.connectionDBList[El[n]],this.offsetInBlock=new xe(0,0),this.trackedState=Br.TrackedState.WILL_TRACK}dispose(){super.dispose(),this.trackedState===Br.TrackedState.TRACKED&&this.db.removeConnection(this,this.y);let e,n;(n=(e=this.sourceBlock_.pathObject).removeConnectionHighlight)==null||n.call(e,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(e){const n=this.x-e.x;return e=this.y-e.y,Math.sqrt(n*n+e*e)}bumpAwayFrom(e,n=!1){if(!this.sourceBlock_.workspace.isDragging()){var o=r.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*ML),a=r.config$$module$build$src$core$config.snapRadius+Math.floor(Math.random()*ML),d=e.sourceBlock_.getRootBlock(),p=this.sourceBlock_.getRootBlock();if(!d.isInFlyout&&!p.isInFlyout){var v=!0;if(p.isMovable())d.isMovable()&&n&&(a=-a);else if(d.isMovable())v=!1,o=-o,a=-a;else return;n=v?e:this,e=v?this:e,d=v?p:d,d.RTL&&(o=-o),d.moveBy(n.x+o-e.x,n.y+a-e.y,["bump"])}}}moveTo(e,n){let o=!1;return this.trackedState===Br.TrackedState.WILL_TRACK?(this.db.addConnection(this,n),this.trackedState=Br.TrackedState.TRACKED,o=!0):this.trackedState===Br.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,n),o=!0),this.x=e,this.y=n,o}moveBy(e,n){return this.moveTo(this.x+e,this.y+n)}moveToOffset(e){return this.moveTo(e.x+this.offsetInBlock.x,e.y+this.offsetInBlock.y)}setOffsetInBlock(e,n){this.offsetInBlock.x=e,this.offsetInBlock.y=n}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var e=this.targetConnection;const n=this.targetBlock();e&&n&&(e=xe.difference(this.offsetInBlock,e.offsetInBlock),n.translate(e.x,e.y))}closest(e,n){return this.dbOpposite.searchForClosest(this,e,n)}highlight(){this.highlighted=!0;const e=this.findHighlightSvg();e&&(e.style.display="")}unhighlight(){this.highlighted=!1;const e=this.findHighlightSvg();e&&(e.style.display="none")}isHighlighted(){return this.highlighted}setTracking(e){e&&this.trackedState===Br.TrackedState.TRACKED||!e&&this.trackedState===Br.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(e?(this.db.addConnection(this,this.y),this.trackedState=Br.TrackedState.TRACKED):(this.trackedState===Br.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Br.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const e=this.targetBlock().getDescendants(!1);for(let n=0;n<e.length;n++){const o=e[n],a=o.getConnections_(!0);for(let d=0;d<a.length;d++)a[d].setTracking(!1);for(const d of o.getIcons())qo(d)&&d.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let e=[];if(this.type!==Ye.INPUT_VALUE&&this.type!==Ye.NEXT_STATEMENT)return e;const n=this.targetBlock();if(n){let o;n.isCollapsed()?(o=[],n.outputConnection&&o.push(n.outputConnection),n.nextConnection&&o.push(n.nextConnection),n.previousConnection&&o.push(n.previousConnection)):o=n.getConnections_(!0);for(let a=0;a<o.length;a++)e.push(...o[a].startTrackingAll());e.length||(e=[n])}return e}onFailedConnect(e){const n=this.getSourceBlock();if(j()){const o=r.getGroup$$module$build$src$core$events$utils();setTimeout(function(){n.isDisposed()||n.getParent()||(r.setGroup$$module$build$src$core$events$utils(o),this.bumpAwayFrom(e),r.setGroup$$module$build$src$core$events$utils(!1))}.bind(this),r.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(e=!0){const{parentConnection:n,childConnection:o}=this.getParentAndChildConnections();if(n&&o){var a=r.getGroup$$module$build$src$core$events$utils();a||r.setGroup$$module$build$src$core$events$utils(!0);var d=n.getSourceBlock(),p=o.getSourceBlock();super.disconnectInternal(e),d.queueRender(),p.updateDisabled(),p.queueRender(),p.getSvgRoot().style.display="block",r.setGroup$$module$build$src$core$events$utils(a)}}respawnShadow_(){super.respawnShadow_();const e=this.targetBlock();e&&(e.initSvg(),e.queueRender())}neighbours(e){return this.dbOpposite.getNeighbours(this,e)}connect_(e){super.connect_(e);var n=this.getSourceBlock();e=e.getSourceBlock(),n.updateDisabled(),e.updateDisabled(),e.queueRender(),(n=n.getInputWithBlock(e))&&(n=n.isVisible(),e.getSvgRoot().style.display=n?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(e){return super.setCheck(e),this.sourceBlock_.queueRender(),this}showContextMenu(e){const n=ht.registry.getContextMenuOptions({focusedNode:this},e);if(n.length){var o=this.getSourceBlock(),a=o.workspace;if(e instanceof PointerEvent)var d=new xe(e.clientX,e.clientY);else d=new xe(this.x,this.y),d=Se(a,d).translate(o.RTL?-5:5,5);ua(e,n,o.RTL,a,d)}}getFocusableElement(){const e=this.findHighlightSvg();if(e)return e;throw Error("No highlight SVG found corresponding to this connection.")}getFocusableTree(){return this.getSourceBlock().workspace}onNodeFocus(){this.highlight(),this.getSourceBlock().workspace.scrollBoundsIntoView(this.getSourceBlock().getBoundingRectangleWithoutChildren())}onNodeBlur(){this.unhighlight()}canBeFocused(){return!0}findHighlightSvg(){return document.getElementById(this.id)}};(function(e){e=e.TrackedState||(e.TrackedState={}),e[e.WILL_TRACK=-1]="WILL_TRACK",e[e.UNTRACKED=0]="UNTRACKED",e[e.TRACKED=1]="TRACKED"})(Br||(Br={})),Br.TrackedState;var Na=class{constructor(e,n){this.name=e,this.sourceBlock=n,this.fieldRow=[],this.align=r.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(e,n){return this.insertFieldAt(this.fieldRow.length,e,n),this}insertFieldAt(e,n,o){if(e<0||e>this.fieldRow.length)throw Error("index "+e+" out of bounds.");return(n||n===""&&o)&&(typeof n=="string"&&(n=r.fromJson$$module$build$src$core$field_registry({type:"field_label",text:n})),n.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(n),n.name=o,n.setVisible(this.isVisible()),n.prefixField&&(e=this.insertFieldAt(e,n.prefixField)),this.fieldRow.splice(e,0,n),e++,n.suffixField&&(e=this.insertFieldAt(e,n.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender()),e}removeField(e,n){for(let o=0,a;a=this.fieldRow[o];o++)if(a.name===e)return a.dispose(),this.fieldRow.splice(o,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(n)return!1;throw Error('Field "'+e+'" not found.')}isVisible(){return this.visible}setVisible(e){let n=[];if(this.visible===e)return n;this.visible=e;for(let o=0,a;a=this.fieldRow[o];o++)a.setVisible(e);if(this.connection&&this.connection instanceof Br){e?n=this.connection.startTrackingAll():this.connection.stopTrackingAll();const o=this.connection.targetBlock();o&&(o.getSvgRoot().style.display=e?"block":"none")}return n}markDirty(){for(let e=0,n;n=this.fieldRow[e];e++)n.markDirty()}setCheck(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(e),this}setAlign(e){return this.align=e,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(e){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(e),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const e of this.fieldRow)e.init()}initModel(){for(const e of this.fieldRow)e.initModel()}initField(e){this.sourceBlock.rendered?e.init():e.initModel()}dispose(){for(let e=0,n;n=this.fieldRow[e];e++)n.dispose();this.connection&&this.connection.dispose()}makeConnection(e){return this.sourceBlock.makeConnection_(e)}},ni=class extends Na{constructor(e,n){super(e,n),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},Di=class extends Na{constructor(e,n){super(e,n),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Yn=class extends Na{constructor(e,n){if(!e)throw Error("Statement inputs must have a non-empty name");super(e,n),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Ye.NEXT_STATEMENT)}},DL;r.ValueInput$$module$build$src$core$inputs$value_input=class extends Na{constructor(e,n){if(!e)throw Error("Value inputs must have a non-empty name");super(e,n),this.name=e,this.type=r.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Ye.INPUT_VALUE)}},DL={},DL.ValueInput=r.ValueInput$$module$build$src$core$inputs$value_input;var xa=class{constructor(e,n,o){if(this.data=null,this.disposed=!1,this.hue=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable=this.movable=this.deletable=!0,this.collapsed_=this.shadow=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper=this.helpUrl=null,this.statementInputCount=0,this.workspace=e,this.id=o&&!e.getBlockById(o)?o:re(),e.setBlockById(this.id,this),this.xy=new xe(0,0),this.isInFlyout=e.isFlyout,this.isInMutator=e.isMutator,this.RTL=e.RTL,n){if(this.type=n,o=Ut[n],!o||typeof o!="object")throw TypeError("Invalid block definition for type: "+n);Object.assign(this,o)}e.addTopBlock(this),e.addTypedBlock(this),new.target===xa&&this.doInit_()}doInit_(){const e=r.getGroup$$module$build$src$core$events$utils();e||r.setGroup$$module$build$src$core$events$utils(!0);const n=j();try{typeof this.init=="function"&&(r.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),r.setRecordUndo$$module$build$src$core$events$utils(n)),he()&&Y(new(ce(de.BLOCK_CREATE))(this))}finally{r.setGroup$$module$build$src$core$events$utils(e),r.setRecordUndo$$module$build$src$core$events$utils(n)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)}dispose(e=!1){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.unplug(e),he()&&Y(new(ce(de.BLOCK_DELETE))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),typeof this.destroy=="function"&&this.destroy(),this.childBlocks_.forEach(e=>e.disposeInternal()),this.inputList.forEach(e=>e.dispose()),this.inputList.length=0,this.getConnections_(!0).forEach(e=>e.dispose()),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const e of this.inputList)e.initModel();this.initialized=!0}}unplug(e){this.outputConnection&&this.unplugFromRow(e),this.previousConnection&&this.unplugFromStack(e)}unplugFromRow(e){let n=null,o;(o=this.outputConnection)!=null&&o.isConnected()&&(n=this.outputConnection.targetConnection,this.outputConnection.disconnect()),n&&e&&(e=this.getOnlyValueConnection())&&e.isConnected()&&!e.targetBlock().isShadow()&&(e=e.targetConnection,e?.disconnect(),this.workspace.connectionChecker.canConnect(e,n,!1)?n.connect(e):e?.onFailedConnect(n))}getOnlyValueConnection(){let e=null;for(let n=0;n<this.inputList.length;n++){const o=this.inputList[n].connection;if(o&&o.type===Ye.INPUT_VALUE&&o.targetConnection){if(e)return null;e=o}}return e}unplugFromStack(e){let n=null,o;if((o=this.previousConnection)!=null&&o.isConnected()&&(n=this.previousConnection.targetConnection,this.previousConnection.disconnect()),e){for(e=this.getNextBlock();e&&(e.isShadow()||!e.isMovable());)e=e.getNextBlock();if(e){var a,d,p,v;e=(v=(a=e.previousConnection)==null||(d=a.targetBlock())==null||(p=d.nextConnection)==null?void 0:p.targetConnection)!=null?v:null,e?.disconnect(),n&&this.workspace.connectionChecker.canConnect(n,e,!1)&&n.connect(e)}}}getConnections_(e){e=[],this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection);for(let n=0,o;o=this.inputList[n];n++)o.connection&&e.push(o.connection);return e}lastConnectionInStack(e){let n=this.nextConnection;for(;n;){const o=n.targetBlock();if(!o||e&&o.isShadow())return n;n=o.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(e){for(let n=0,o;o=this.inputList[n];n++)if(o.connection&&o.connection.targetBlock()===e)return o;return null}getSurroundParent(){let e=this,n;do if(n=e,e=e.getParent(),!e)return null;while(e.getNextBlock()===n);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let e,n=this;do e=n,n=e.parentBlock_;while(n);return e}getTopStackBlock(){let e=this,n;do n=e.getPreviousBlock();while(n&&n.getNextBlock()===e&&(e=n));return e}getChildren(e){if(!e)return this.childBlocks_;e=[];for(let o=0,a;a=this.inputList[o];o++)if(a.connection){var n=a.connection.targetBlock();n&&e.push(n)}return(n=this.getNextBlock())&&e.push(n),e}setParent(e){if(e!==this.parentBlock_){var n=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),o=!!n;if(o&&e&&n!==e)throw Error("Block connected to superior one that is not new parent.");if(!o&&e)throw Error("Block not connected to new parent.");if(o&&!e)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Ae(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=e)?e.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(e){const n=[this],o=this.getChildren(e);for(let a,d=0;a=o[d];d++)n.push(...a.getDescendants(e));return n}isDeletable(){return this.deletable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnDeletable(){return this.deletable}setDeletable(e){this.deletable=e}isMovable(){return this.movable&&!this.isInFlyout&&!this.shadow&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnMovable(){return this.movable}setMovable(e){this.movable=e}isDuplicatable(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable(Un(this,!0)):!0}isShadow(){return this.shadow}setShadow(e){this.shadow=e}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(e){this.isInsertionMarker_=e}isEditable(){return this.editable&&!this.isDeadOrDying()&&!this.workspace.isReadOnly()}isOwnEditable(){return this.editable}setEditable(e){this.editable=e;for(const n of this.getFields())n.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const e of this.inputList)if(e.connection||e.fieldRow.length>1)return!1;return!0}getMatchingConnection(e,n){const o=this.getConnections_(!0);if(e=e.getConnections_(!0),o.length!==e.length)throw Error("Connection lists did not match in length.");for(let a=0;a<e.length;a++)if(e[a]===n)return o[a];return null}setHelpUrl(e){this.helpUrl=e}setTooltip(e){this.tooltip=e}getTooltip(){return oa(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue}setColour(e){e=la(e),this.hue=e.hue,this.colour_=e.hex}setStyle(e){this.styleName_=e}setOnChange(e){if(e&&typeof e!="function")throw Error("onchange must be a function.");this.onchangeWrapper&&this.workspace.removeChangeListener(this.onchangeWrapper),this.onchange=e,this.onchangeWrapper=e.bind(this),this.workspace.addChangeListener(this.onchangeWrapper)}getField(e){if(typeof e!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(e===void 0?"nothing":e+" of type "+typeof e)+" instead");for(const n of this.getFields())if(n.name===e)return n;return null}*getFields(){for(const e of this.inputList)for(const n of e.fieldRow)yield n}getVars(){const e=[];for(const n of this.getFields())n.referencesVariables()&&e.push(n.getValue());return e}getVarModels(){const e=[];for(const n of this.getFields())if(n.referencesVariables()){const o=this.workspace.getVariableById(n.getValue());o&&e.push(o)}return e}updateVarName(e){for(const n of this.getFields())n.referencesVariables()&&e.getId()===n.getValue()&&n.refreshVariableName()}renameVarById(e,n){for(const o of this.getFields())o.referencesVariables()&&e===o.getValue()&&o.setValue(n)}getFieldValue(e){return(e=this.getField(e))?e.getValue():null}setFieldValue(e,n){const o=this.getField(n);if(!o)throw Error('Field "'+n+'" not found.');o.setValue(e)}setPreviousStatement(e,n){if(e)n===void 0&&(n=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Ye.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(n);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(e,n){if(e)n===void 0&&(n=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Ye.NEXT_STATEMENT)),this.nextConnection.setCheck(n);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(e,n){if(e)n===void 0&&(n=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Ye.OUTPUT_VALUE)),this.outputConnection.setCheck(n);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(e){this.inputsInline!==e&&(Y(new(ce(de.BLOCK_CHANGE))(this,"inline",null,this.inputsInline,e)),this.inputsInline=e)}getInputsInline(){if(this.inputsInline!==void 0)return this.inputsInline;for(var e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof ni&&this.inputList[e]instanceof ni)return!1;for(e=1;e<this.inputList.length;e++)if(this.inputList[e-1]instanceof r.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[e]instanceof ni)return!0;for(e=0;e<this.inputList.length;e++)if(this.inputList[e]instanceof Di)return!0;return!1}setOutputShape(e){this.outputShape_=e}getOutputShape(){return this.outputShape_}isEnabled(){return this.disabledReasons.size===0}setDisabledReason(e,n){e||this.workspace.options.disable||!this.hasDisabledReason(us)||n==us||this.setDisabledReason(!1,us),this.disabledReasons.has(n)!==e&&(e?this.disabledReasons.add(n):this.disabledReasons.delete(n),e=new(ce(de.BLOCK_CHANGE))(this,"disabled",null,!e,e),e.setDisabledReason(n),Y(e))}getInheritedDisabled(){let e=this.getSurroundParent();for(;e;){if(!e.isEnabled())return!0;e=e.getSurroundParent()}return!1}hasDisabledReason(e){return this.disabledReasons.has(e)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(e){this.collapsed_!==e&&(Y(new(ce(de.BLOCK_CHANGE))(this,"collapsed",null,this.collapsed_,e)),this.collapsed_=e)}toString(e,n){n=this.toTokens(n);for(let a=2;a<n.length;a++)n[a-2]==="("&&n[a]===")"&&(n[a-2]=n[a-1],n.splice(a-1,2));let o="";return n=n.reduce((a,d)=>(a=a+(o==="("||d===")"?"":" ")+d,o=d[d.length-1],a),""),n=n.trim()||"???",e&&n.length>e&&(n=n.substring(0,e-3)+"..."),n}toTokens(e="?"){const n=[];for(const a of this.inputList)if(a.name!=nu){for(const d of a.fieldRow)n.push(d.getText());if(a.connection){const d=a.connection.targetBlock();if(d){var o=a.connection;let p=o.getCheck();!p&&o.targetConnection&&(p=o.targetConnection.getCheck()),(o=!!p&&(p.includes("Boolean")||p.includes("Number")))&&n.push("("),n.push(...d.toTokens(e)),o&&n.push(")")}else n.push(e)}}return n}appendValueInput(e){return this.appendInput(new r.ValueInput$$module$build$src$core$inputs$value_input(e,this))}appendStatementInput(e){return this.statementInputCount++,this.appendInput(new Yn(e,this))}appendDummyInput(e=""){return this.appendInput(new ni(e,this))}appendEndRowInput(e=""){return this.appendInput(new Di(e,this))}appendInput(e){return this.inputList.push(e),e}appendInputFromRegistry(e,n){return(e=_(Le.INPUT,e,!1))?this.appendInput(new e(n,this)):null}jsonInit(e){var n=e.type?'Block "'+e.type+'": ':"";if(e.output&&e.previousStatement)throw Error(n+"Must not have both an output and a previousStatement.");for(var o=0;e["args"+o];){if(e["message"+o]===void 0)throw Error(n+`args${o} must have a corresponding message (message${o}).`);o++}if(e.style&&e.style.hat&&(this.hat=e.style.hat,e.style=null),e.style&&e.colour)throw Error(n+"Must not have both a colour and a style.");for(e.style?this.jsonInitStyle(e,n):this.jsonInitColour(e,n),o=0;e["message"+o]!==void 0;)this.interpolate(e["message"+o],e["args"+o]||[],e["implicitAlign"+o]||e["lastDummyAlign"+o],n),o++;if(e.inputsInline!==void 0&&(r.disable$$module$build$src$core$events$utils(),this.setInputsInline(e.inputsInline),r.enable$$module$build$src$core$events$utils()),e.output!==void 0&&this.setOutput(!0,e.output),e.outputShape!==void 0&&this.setOutputShape(e.outputShape),e.previousStatement!==void 0&&this.setPreviousStatement(!0,e.previousStatement),e.nextStatement!==void 0&&this.setNextStatement(!0,e.nextStatement),e.tooltip!==void 0&&(o=rr(e.tooltip),this.setTooltip(o)),e.enableContextMenu!==void 0&&(this.contextMenu=!!e.enableContextMenu),e.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!e.suppressPrefixSuffix),e.helpUrl!==void 0&&(o=rr(e.helpUrl),this.setHelpUrl(o)),typeof e.extensions=="string"&&(console.warn(n+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+e.type+"' block."),e.extensions=[e.extensions]),e.mutator!==void 0&&Id(e.mutator,this,!0),e=e.extensions,Array.isArray(e))for(n=0;n<e.length;n++)Id(e[n],this,!1)}jsonInitColour(e,n){if("colour"in e)if(e.colour===void 0)console.warn(n+"Undefined colour value.");else{e=e.colour;try{this.setColour(e)}catch{console.warn(n+"Illegal colour value: ",e)}}}jsonInitStyle(e,n){e=e.style;try{this.setStyle(e)}catch{console.warn(n+"Style does not exist: ",e)}}mixin(e,n){if(n!==void 0&&typeof n!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!n){n=[];for(const o in e)this[o]!==void 0&&n.push(o);if(n.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(n))}Object.assign(this,e)}interpolate(e,n,o,a){e=pp(e),this.validateTokens(e,n.length),n=this.interpolateArguments(e,n,o),o=[];for(let d=0,p;p=n[d];d++)if(this.isInputKeyword(p.type)){if(e=this.inputFromJson(p,a)){for(let v=0,X;X=o[v];v++)e.appendField(X[0],X[1]);o.length=0}}else(e=this.fieldFromJson(p))&&o.push([e,p.name])}validateTokens(e,n){const o=[];let a=0;for(let d=0;d<e.length;d++){const p=e[d];if(typeof p=="number"){if(p<1||p>n)throw Error('Block "'+this.type+'": Message index %'+p+" out of range.");if(o[p])throw Error('Block "'+this.type+'": Message index %'+p+" duplicated.");o[p]=!0,a++}}if(a!==n)throw Error('Block "'+this.type+'": Message does not reference all '+n+" arg(s).")}interpolateArguments(e,n,o){const a=[];for(let p=0;p<e.length;p++){var d=e[p];if(typeof d=="number"&&(d=n[d-1]),typeof d=="string"){if(d===`
`)d={type:"input_end_row"},o&&(d.align=o);else if(d=this.stringToFieldJson(d),!d)continue}a.push(d)}return(e=a.length)&&!this.isInputKeyword(a[e-1].type)&&(e={type:"input_dummy"},o&&(e.align=o),a.push(e)),a}fieldFromJson(e){const n=r.fromJson$$module$build$src$core$field_registry(e);return!n&&e.alt?typeof e.alt=="string"?(e=this.stringToFieldJson(e.alt))?this.fieldFromJson(e):null:this.fieldFromJson(e.alt):n}inputFromJson(e,n){var o={LEFT:r.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:r.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:r.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:r.Align$$module$build$src$core$inputs$align.CENTRE};let a;switch(e.type){case"input_value":a=this.appendValueInput(e.name);break;case"input_statement":a=this.appendStatementInput(e.name);break;case"input_dummy":a=this.appendDummyInput(e.name);break;case"input_end_row":a=this.appendEndRowInput(e.name);break;default:a=this.appendInputFromRegistry(e.type,e.name)}return a?(e.check&&a.setCheck(e.check),e.align&&(o=o[e.align.toUpperCase()],o===void 0?console.warn(n+"Illegal align value: ",e.align):a.setAlign(o)),a):null}isInputKeyword(e){return e==="input_value"||e==="input_statement"||e==="input_dummy"||e==="input_end_row"||h(Le.INPUT,e)}stringToFieldJson(e){return(e=e.trim())?{type:"field_label",text:e}:null}moveInputBefore(e,n){if(e!==n){var o=-1,a=n?-1:this.inputList.length;for(let d=0,p;p=this.inputList[d];d++)if(p.name===e){if(o=d,a!==-1)break}else if(n&&p.name===n&&(a=d,o!==-1))break;if(o===-1)throw Error('Named input "'+e+'" not found.');if(a===-1)throw Error('Reference input "'+n+'" not found.');this.moveNumberedInputBefore(o,a)}}moveNumberedInputBefore(e,n){if(e===n)throw Error("Can't move input to itself.");if(e>=this.inputList.length)throw RangeError("Input index "+e+" out of bounds.");if(n>this.inputList.length)throw RangeError("Reference input "+n+" out of bounds.");const o=this.inputList[e];this.inputList.splice(e,1),e<n&&n--,this.inputList.splice(n,0,o)}removeInput(e,n){for(let o=0,a;a=this.inputList[o];o++)if(a.name===e)return a instanceof Yn&&this.statementInputCount--,a.dispose(),this.inputList.splice(o,1),!0;if(n)return!1;throw Error("Input not found: "+e)}getInput(e){for(let n=0,o;o=this.inputList[n];n++)if(o.name===e)return o;return null}getInputTargetBlock(e){return(e=this.getInput(e))&&e.connection&&e.connection.targetBlock()}getCommentText(){let e,n;return(n=(e=this.getIcon(Er.COMMENT))==null?void 0:e.getText())!=null?n:null}setCommentText(e){var n;let o;const a=(o=(n=this.getIcon(Er.COMMENT))==null?void 0:n.getText())!=null?o:null;if(a!==e){if(e!==null){if(n=this.getIcon(Er.COMMENT),!n){if(n=_(Le.ICON,Er.COMMENT.toString(),!1),!n)throw Error("No comment icon class is registered, so a comment cannot be set");if(n=new n(this),!xS(n))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");n=this.addIcon(n)}r.disable$$module$build$src$core$events$utils(),n.setText(e),r.enable$$module$build$src$core$events$utils()}else this.removeIcon(Er.COMMENT);Y(new(ce(de.BLOCK_CHANGE))(this,"comment",null,a,e))}}setWarningText(e,n){}setMutator(e){}addIcon(e){if(this.hasIcon(e.getType()))throw new yL(e);return this.icons.push(e),this.icons.sort((n,o)=>n.getWeight()-o.getWeight()),e}removeIcon(e){if(!this.hasIcon(e))return!1;let n;return(n=this.getIcon(e))==null||n.dispose(),this.icons=this.icons.filter(o=>!o.getType().equals(e)),!0}hasIcon(e){return this.icons.some(n=>n.getType().equals(e))}getIcon(e){return e instanceof Er?this.icons.find(n=>n.getType().equals(e)):this.icons.find(n=>n.getType().toString()===e)}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy}moveBy(e,n,o){if(this.parentBlock_)throw Error("Block has parent");const a=new(ce(de.BLOCK_MOVE))(this);o&&a.setReason(o),this.xy.translate(e,n),a.recordNew(),Y(a)}makeConnection_(e){return new Tt(this,e)}allInputsFilled(e){if(e===void 0&&(e=!0),!e&&this.isShadow())return!1;for(let o=0,a;a=this.inputList[o];o++)if(a.connection){var n=a.connection.targetBlock();if(!n||!n.allInputsFilled(e))return!1}return(n=this.getNextBlock())?n.allInputsFilled(e):!0}toDevString(){let e=this.type?'"'+this.type+'" block':"Block";return this.id&&(e+=' (id="'+this.id+'")'),e}};xa.COLLAPSED_INPUT_NAME=nu,xa.COLLAPSED_FIELD_NAME=jd;var g_=null,_u=null,fu={};fu.connectionUiEffect=Dp,fu.disconnectUiEffect=Pp,fu.disconnectUiStop=_a,fu.disposeUiEffect=Rd;var Tu=class{paste(e,n,o){if(!n.isCapacityAvailable(e.typeCounts))return null;o&&(e.blockState.x=o.x,e.blockState.y=o.y),o=o||new xe(e.blockState.x||0,e.blockState.y||0),r.disable$$module$build$src$core$events$utils();let a;try{a=no(e.blockState,n),bS(a,o)}finally{r.enable$$module$build$src$core$events$utils()}if(!a)return a;he()&&!a.isShadow()&&Y(new(ce(de.BLOCK_CREATE))(a));const d=a;return Js().then(()=>r.getFocusManager$$module$build$src$core$focus_manager().focusNode(d)),a}};Tu.TYPE="block",Zh(Tu.TYPE,new Tu);var m_={};m_.bumpIntoBounds=fa,m_.bumpIntoBoundsHandler=Bp,m_.bumpTopObjectsIntoBounds=Ld;var PL=class{constructor(e){this.block=e,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new xe(0,0),this.originalEventGroup="",this.workspace=e.workspace}isMovable(){if(this.block.isShadow()){let e,n;return(n=(e=this.block.getParent())==null?void 0:e.isMovable())!=null?n:!1}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.isReadOnly()&&!this.block.isInFlyout}startDrag(e){if(this.block.isShadow())this.startDraggingShadow(e);else{this.dragging=!0,this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(E(Le.CONNECTION_PREVIEWER,this.workspace.options))(this.block),tr(),this.workspace.setResizesEnabled(!1),_a(),e=this.shouldHealStack(e),this.shouldDisconnect(e)&&this.disconnectBlock(e),this.block.setDragging(!0);var n;(n=this.workspace.getLayerManager())==null||n.moveToDragLayer(this.block)}}shouldHealStack(e){return!!e&&(e.altKey||e.ctrlKey||e.metaKey)}startDraggingShadow(e){const n=this.block.getParent();if(!n)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=xe.difference(n.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),n.startDrag(e)}shouldDisconnect(e){return!!(this.block.getParent()||e&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(e){let n,o,a;if(this.startParentConn=(a=(n=this.block.outputConnection)==null?void 0:n.targetConnection)!=null?a:(o=this.block.previousConnection)==null?void 0:o.targetConnection,e){let d;this.startChildConn=(d=this.block.nextConnection)==null?void 0:d.targetConnection}this.block.unplug(e),Pp(this.block)}fireDragStartEvent(){const e=new(ce(de.BLOCK_DRAG))(this.block,!0,this.block.getDescendants(!1));Y(e)}fireDragEndEvent(){const e=new(ce(de.BLOCK_DRAG))(this.block,!1,this.block.getDescendants(!1));Y(e)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var e=new(ce(de.BLOCK_MOVE))(this.block);e.setReason(["drag"]),e.oldCoordinate=this.startLoc,e.recordNew(),Y(e)}}drag(e){if(this.block.isShadow()){let n;(n=this.block.getParent())==null||n.drag(xe.sum(e,this.dragOffset))}else this.block.moveDuringDrag(e),this.updateConnectionPreview(this.block,xe.difference(e,this.startLoc))}updateConnectionPreview(e,n){var o=this.connectionCandidate;const a=this.getConnectionCandidate(e,n);if(a){this.connectionCandidate=n=o&&this.currCandidateIsBetter(o,n,a)?o:a;var{local:d,neighbour:p}=n;n=d.type===Ye.OUTPUT_VALUE||d.type===Ye.PREVIOUS_STATEMENT;var v;if(o=p.isConnected()&&!((v=p.targetBlock())!=null&&v.isInsertionMarker()),n&&o&&!this.orphanCanConnectAtEnd(e,p.targetBlock(),d.type)){let Ie;(Ie=this.connectionPreviewer)==null||Ie.previewReplacement(d,p,p.targetBlock())}else{var X;(X=this.connectionPreviewer)==null||X.previewConnection(d,p)}}else{let Ie;(Ie=this.connectionPreviewer)==null||Ie.hidePreview(),this.connectionCandidate=null}}orphanCanConnectAtEnd(e,n,o){return!!Tt.getConnectionForOrphanedConnection(e,o===Ye.OUTPUT_VALUE?n.outputConnection:n.previousConnection)}currCandidateIsBetter(e,n,o){const{local:a,neighbour:d}=e;e=new xe(a.x,a.y);const p=new xe(d.x,d.y);return n=xe.distance(xe.sum(e,n),p),o.distance>n-r.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(e,n){e=this.getLocalConnections(e);let o=this.getSearchRadius(),a=null;for(const d of e){const{connection:p,radius:v}=d.closest(o,n);p&&(a={local:d,neighbour:p,distance:v},o=v)}return a}getSearchRadius(){return this.connectionCandidate?r.config$$module$build$src$core$config.connectingSnapRadius:r.config$$module$build$src$core$config.snapRadius}getLocalConnections(e){const n=e.getConnections_(!1),o=e.lastConnectionInStack(!0);return o&&o!==e.nextConnection&&n.push(o),n}endDrag(e){if(this.block.isShadow()){let o;(o=this.block.getParent())==null||o.endDrag(e)}else{this.originalEventGroup=r.getGroup$$module$build$src$core$events$utils(),this.fireDragEndEvent(),this.fireMoveEvent(),hr(),_a();var n;if((n=this.connectionPreviewer)==null||n.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let o;(o=this.workspace.getLayerManager())==null||o.moveOffDragLayer(this.block,_o),this.block.setDragging(!1)}this.connectionCandidate?(this.applyConnections(this.connectionCandidate),this.disposeStep()):this.block.queueRender().then(()=>this.disposeStep())}}disposeStep(){const e=r.getGroup$$module$build$src$core$events$utils();r.setGroup$$module$build$src$core$events$utils(this.originalEventGroup),this.block.snapToGrid();let n;(n=this.connectionPreviewer)==null||n.dispose(),this.workspace.setResizesEnabled(!0),r.setGroup$$module$build$src$core$events$utils(e)}applyConnections(e){const{local:n,neighbour:o}=e;n.connect(o);const a=n.isSuperior()?o:n,d=this.block.getRootBlock();Js().then(()=>{Dp(a.getSourceBlock()),setTimeout(()=>{d.bringToFront()},0)})}revertDrag(){if(this.block.isShadow()){let o;(o=this.block.getParent())==null||o.revertDrag()}else{var e;(e=this.connectionPreviewer)==null||e.hidePreview(),this.connectionCandidate=null;var n;if((n=this.startChildConn)==null||n.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case Ye.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case Ye.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{this.block.moveTo(this.startLoc,["drag"]);let o;(o=this.workspace.getLayerManager())==null||o.moveOffDragLayer(this.block,_o),fa(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.block.setDragging(!1),this.dragging=!1}}},FL=class extends St{constructor(e,n,o,a){super(n,o,a),this.text=e,this.workspace=n,this.anchor=o,this.ownerRect=a,this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize(),_e(this.svgRoot,"blocklyTextBubble")}getText(){return this.text}setText(e){this.text=e,ve(this.paragraph),this.paragraph=this.stringToSvg(e,this.contentContainer),this.updateBubbleSize()}stringToSvg(e,n){return n=this.createParagraph(n),e=this.createTextFragments(n,e),this.workspace.RTL&&this.rightAlignTextFragments(n.getBBox().width,e),n}createParagraph(e){return b(ue.G,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",transform:`translate(0,${St.BORDER_WIDTH})`,style:`direction: ${this.workspace.RTL?"rtl":"ltr"}`},e)}createTextFragments(e,n){let o=1;return n.split(`
`).map(a=>{const d=b(ue.TEXT,{y:`${o}em`,x:St.BORDER_WIDTH},e);return a=document.createTextNode(a),d.appendChild(a),o+=1,d})}rightAlignTextFragments(e,n){for(const o of n)o.setAttribute("text-anchor","start"),o.setAttribute("x",`${e+St.BORDER_WIDTH}`)}updateBubbleSize(){const e=this.paragraph.getBBox();this.setSize(new lt(e.width+St.BORDER_WIDTH*2,e.height+St.BORDER_WIDTH*2),!0)}},$g=17,si=class extends du{constructor(e){super(e),this.sourceBlock=e,this.textMap=new Map,this.textBubble=null}getType(){return si.TYPE}initView(e){this.svgRoot||(super.initView(e),b(ue.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),b(ue.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),b(ue.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),_e(this.svgRoot,"blocklyWarningIcon"))}dispose(){super.dispose();let e;(e=this.textBubble)==null||e.dispose()}getWeight(){return si.WEIGHT}getSize(){return new lt($g,$g)}applyColour(){super.applyColour();let e;(e=this.textBubble)==null||e.setColour(this.sourceBlock.getColour())}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(e){super.onLocationChange(e);let n;(n=this.textBubble)==null||n.setAnchorLocation(this.getAnchorLocation())}addMessage(e,n){if(this.textMap.get(n)===e)return this;e?this.textMap.set(n,e):this.textMap.delete(n);let o;return(o=this.textBubble)==null||o.setText(this.getText()),this}getText(){return[...this.textMap.values()].join(`
`)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(e){const n=this;return(0,me.asyncExecutePromiseGeneratorFunction)(function*(){if(n.bubbleIsVisible()!==e){if(yield Js(),e)n.textBubble=new FL(n.getText(),n.sourceBlock.workspace,n.getAnchorLocation(),n.getBubbleOwnerRect()),n.applyColour();else{let o;(o=n.textBubble)==null||o.dispose(),n.textBubble=null}Y(new(ce(de.BUBBLE_OPEN))(n.sourceBlock,e,"warning"))}})}getBubble(){return this.textBubble}getAnchorLocation(){const e=$g/2;return xe.sum(this.workspaceLocation,new xe(e,e))}getBubbleOwnerRect(){const e=this.sourceBlock.getSvgRoot().getBBox();return new it(e.y,e.y+e.height,e.x,e.x+e.width)}};si.TYPE=Er.WARNING,si.WEIGHT=2;var bt=class extends xa{constructor(e,n,o){if(super(e,n,o),this.childlessWidth=this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new xe(0,0),this.dragStrategy=new PL(this),!e.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=e,this.svgGroup=b(ue.G,{}),n&&_e(this.svgGroup,n),this.style=e.getRenderer().getConstants().getBlockStyle(null),this.pathObject=e.getRenderer().makePathObject(this.svgGroup,this.style),e=this.pathObject.svgPath,e.tooltip=this,Bc(e),this.svgGroup.setAttribute("data-id",this.id),e.id=B(),this.doInit_()}initSvg(){if(!this.initialized){for(var e of this.inputList)e.init();for(const n of this.getIcons())n.initView(this.createIconPointerDownListener(n)),n.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),(e=this.getSvgRoot())&&A(e,"pointerdown",this,this.onMouseDown),e.parentNode||this.workspace.getCanvas().appendChild(e),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){this.addSelect(),Be(this)}unselect(){this.removeSelect(),Be(null)}setParent(e){var n=this.parentBlock_;if(e!==n){tr(),super.setParent(e),hr();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var a=this.getRelativeToSurfaceXY(),d=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode(),p,v=this.getSvgRoot().contains((p=d?.getFocusableElement())!=null?p:null);e?(e.getSvgRoot().appendChild(o),v&&d&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(d)):n&&(e=this.workspace.getCanvas().querySelector(".blocklyDragging"),n=e?.parentElement,p=this.workspace.getCanvas(),n===p?p.insertBefore(o,e):(p.appendChild(o),v&&d&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(d)),this.translate(a.x,a.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const e=this.workspace.getLayerManager();if(!e)throw Error("Cannot calculate position because the workspace has not been appended");let n=0,o=0,a=this.getSvgRoot();if(a)do{const d=P(a);n+=d.x,o+=d.y,a=a.parentNode}while(a&&!e.hasLayer(a));return new xe(n,o)}moveBy(e,n,o){if(this.parentBlock_)throw Error("Block has parent");const a=he();let d=null;a&&(d=new(ce(de.BLOCK_MOVE))(this),o&&d.setReason(o)),e=new xe(e,n),n=this.getRelativeToSurfaceXY(),e=xe.sum(n,e),this.translate(e.x,e.y),this.updateComponentLocations(e),a&&d&&(d.recordNew(),Y(d)),this.workspace.resizeContents()}translate(e,n){this.translation=`translate(${e}, ${n})`,this.relativeCoords=new xe(e,n),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(e,n){const o=this.getRelativeToSurfaceXY();this.moveBy(e.x-o.x,e.y-o.y,n)}moveDuringDrag(e){this.translate(e.x,e.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(e)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var e=this.workspace.getGrid();if(e!=null&&e.shouldSnap()){var n=this.getRelativeToSurfaceXY();e=e.alignXY(n),e!==n&&this.moveTo(e,["snap"])}}}getBoundingRectangle(){return this.getBoundingRectangleWithDimensions(this.getHeightWidth())}getBoundingRectangleWithoutChildren(){return this.getBoundingRectangleWithDimensions({height:this.height,width:this.childlessWidth})}getBoundingRectangleWithDimensions(e){const n=this.getRelativeToSurfaceXY();let o,a;return this.RTL?(o=n.x-e.width,a=n.x):(o=n.x,a=n.x+e.width),new it(n.y,n.y+e.height,o,a)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let e=0,n;n=this.inputList[e];e++)n.markDirty()}setCollapsed(e){this.collapsed_!==e&&(super.setCollapsed(e),this.updateCollapsed())}childHasWarning(){const e=this.getChildren(!1);for(const n of e)if(n.getIcon(si.TYPE)||n.childHasWarning())return!0;return!1}updateCollapsed(){var e=this.isCollapsed();const n=nu,o=jd;for(let d=0,p;p=this.inputList[d];d++)p.name!==n&&p.setVisible(!e);for(var a of this.getIcons())a.updateCollapsed();e?(_e(this.svgGroup,"blocklyCollapsed"),this.childHasWarning()&&this.setWarningText(r.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,bt.COLLAPSED_WARNING_ID),e=this.toString(wL),(a=this.getField(o))?a.setValue(e):(this.getInput(n)||this.appendDummyInput(n)).appendField(new pl(e),o)):(this.updateDisabled(),this.removeInput(n),ke(this.svgGroup,"blocklyCollapsed"),this.setWarningText(null,bt.COLLAPSED_WARNING_ID))}onMouseDown(e){if(!this.workspace.isReadOnly()){var n=this.workspace.getGesture(e);n&&n.handleBlockStart(e,this)}}showHelp(){const e=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;e&&window.open(e)}generateContextMenu(e){return this.workspace.isReadOnly()||!this.contextMenu?null:(e=ht.registry.getContextMenuOptions({block:this,focusedNode:this},e),this.customContextMenu&&this.customContextMenu(e),e)}calculateContextMenuLocation(e){if(e instanceof PointerEvent)return new xe(e.clientX,e.clientY);e=Se(this.workspace,this.getRelativeToSurfaceXY());let n,o;const a=(n=this.inputList.filter(d=>d.isVisible()).flatMap(d=>d.fieldRow).find(d=>d.isVisible()))==null||(o=n.getSvgRoot())==null?void 0:o.getBoundingClientRect();return new xe(this.RTL?e.x-5:e.x+5,(a&&a.height?a.y+a.height:e.y+this.height)+5)}showContextMenu(e){const n=this.generateContextMenu(e),o=this.calculateContextMenuLocation(e);n&&n.length&&(ua(e,n,this.RTL,this.workspace,o),Op(this))}updateComponentLocations(e){this.dragging||this.updateConnectionLocations(e),this.updateIconLocations(e),this.updateFieldLocations(e);for(const n of this.getChildren(!1))n.updateComponentLocations(xe.sum(e,n.relativeCoords))}updateConnectionLocations(e){for(const n of this.getConnections_(!1))n.moveToOffset(e)}updateIconLocations(e){for(const n of this.getIcons())n.onLocationChange(e)}updateFieldLocations(e){for(const n of this.inputList)for(const o of n.fieldRow)o.onLocationChange(e)}addClass(e){_e(this.svgGroup,e)}removeClass(e){ke(this.svgGroup,e)}setDragging(e){(this.dragging=e)?(this.translation="",Qc.push(...this.getConnections_(!0)),this.addClass("blocklyDragging")):(Qc.length=0,this.removeClass("blocklyDragging"));for(let n=0;n<this.childBlocks_.length;n++)this.childBlocks_[n].setDragging(e)}setMovable(e){super.setMovable(e),this.pathObject.updateMovable(e)}setEditable(e){super.setEditable(e),e?ke(this.svgGroup,"blocklyNotEditable"):_e(this.svgGroup,"blocklyNotEditable"),e=this.getIcons();for(let n=0;n<e.length;n++)e[n].updateEditable()}setShadow(e){super.setShadow(e),this.applyColour()}setInsertionMarker(e){this.isInsertionMarker_!==e&&(this.isInsertionMarker_=e)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup}dispose(e,n){this.disposing=!0,up(),Gc();const o=r.getFocusManager$$module$build$src$core$focus_manager();var a,d;if(this.getSvgRoot().contains((d=(a=o.getFocusedNode())==null?void 0:a.getFocusableElement())!=null?d:null)){if(a=this.getParent(),!a){let p;if(d=(p=this.outputConnection)!=null?p:this.previousConnection){let v;a=(v=d.closest(0,new xe(0,0)).connection)==null?void 0:v.getSourceBlock()}}a?o.focusNode(a):setTimeout(()=>o.focusTree(this.workspace),0)}n&&(this.unplug(e),Rd(this)),super.dispose(!!e),ve(this.svgGroup)}disposeInternal(){this.disposing=!0,super.disposeInternal(),r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===this&&this.workspace.cancelCurrentGesture(),[...this.warningTextDb.values()].forEach(e=>clearTimeout(e)),this.warningTextDb.clear(),this.getIcons().forEach(e=>e.dispose())}checkAndDelete(){this.workspace.isFlyout||(r.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),r.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(e=!1){return this.isInsertionMarker_?null:{paster:Tu.TYPE,blockState:as(this,{addCoordinates:!0,addNextBlocks:e,saveIds:!1}),typeCounts:Un(this,!0)}}applyColour(){var e,n;for((n=(e=this.pathObject).applyColour)==null||n.call(e,this),e=this.getIcons(),n=0;n<e.length;n++)e[n].applyColour();for(const o of this.getFields())o.applyColour()}updateDisabled(){const e=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===e){let n;(n=this.getNextBlock())==null||n.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=e;for(const n of this.getChildren(!1))n.updateDisabled()}}setWarningText(e,n=""){if(n)this.warningTextDb.has(n)&&(clearTimeout(this.warningTextDb.get(n)),this.warningTextDb.delete(n));else{for(var o of this.warningTextDb.values())clearTimeout(o);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(n,setTimeout(()=>{this.isDeadOrDying()||(this.warningTextDb.delete(n),this.setWarningText(e,n))},100));else if(this.isInFlyout&&(e=null),o=this.getIcon(si.TYPE),e){let a=this.getSurroundParent(),d=null;for(;a;)a.isCollapsed()&&(d=a),a=a.getSurroundParent();d&&d.setWarningText(r.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,bt.COLLAPSED_WARNING_ID),o?o.addMessage(e,n):this.addIcon(new si(this).addMessage(e,n))}else o&&(n?(o.addMessage("",n),o.getText()||this.removeIcon(si.TYPE)):this.removeIcon(si.TYPE))}setMutator(e){this.removeIcon(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),e&&this.addIcon(e)}addIcon(e){return super.addIcon(e),e instanceof r.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=e),e.initView(this.createIconPointerDownListener(e)),e.applyColour(),e.updateEditable(),this.queueRender(),e}createIconPointerDownListener(e){return n=>{this.isDeadOrDying()||(n=this.workspace.getGesture(n))&&n.setStartIcon(e)}}removeIcon(e){const n=super.removeIcon(e);return e.equals(r.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),n}setDisabledReason(e,n){const o=this.isEnabled();super.setDisabledReason(e,n),this.isEnabled()===o||this.getInheritedDisabled()||this.updateDisabled()}setDeletable(e){super.setDeletable(e),e?ke(this.svgGroup,"blocklyNotDeletable"):_e(this.svgGroup,"blocklyNotDeletable")}setHighlighted(e){this.pathObject.updateHighlighted(e)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(e){this.pathObject.updateDraggingDelete(e)}getColour(){return this.style.colourPrimary}setColour(e){super.setColour(e),e=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_);let n,o;(o=(n=this.pathObject).setStyle)==null||o.call(n,e.style),this.style=e.style,this.styleName_=e.name,this.applyColour()}setStyle(e){const n=this.workspace.getRenderer().getConstants().getBlockStyle(e);if(this.styleName_&&ke(this.svgGroup,this.styleName_),n){this.hat=n.hat;let o,a;(a=(o=this.pathObject).setStyle)==null||a.call(o,n),this.colour_=n.colourPrimary,this.style=n,this.applyColour(),_e(this.svgGroup,e),this.styleName_=e}else throw Error("Invalid style name: "+e)}getStyle(){return this.style}bringToFront(e=!1){const n=r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode();let o=this;if(!o.isDeadOrDying()){do{const a=o.getSvgRoot(),d=a.parentNode,p=d.childNodes;if(p[p.length-1]!==a&&d.appendChild(a),e)break;o=o.getParent()}while(o);n&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(n)}}setPreviousStatement(e,n){super.setPreviousStatement(e,n),this.queueRender()}setNextStatement(e,n){super.setNextStatement(e,n),this.queueRender()}setOutput(e,n){super.setOutput(e,n),this.queueRender()}setInputsInline(e){super.setInputsInline(e),this.queueRender()}removeInput(e,n){return e=super.removeInput(e,n),this.queueRender(),e}moveNumberedInputBefore(e,n){super.moveNumberedInputBefore(e,n),this.queueRender()}appendInput(e){return super.appendInput(e),this.queueRender(),e}setConnectionTracking(e){if(this.previousConnection&&this.previousConnection.setTracking(e),this.outputConnection&&this.outputConnection.setTracking(e),this.nextConnection){this.nextConnection.setTracking(e);var n=this.nextConnection.targetBlock();n&&n.setConnectionTracking(e)}if(!this.collapsed_)for(n=0;n<this.inputList.length;n++){var o=this.inputList[n].connection;o&&(o.setTracking(e),(o=o.targetBlock())&&o.setConnectionTracking(e))}}getConnections_(e){const n=[];if(this.outputConnection&&n.push(this.outputConnection),this.previousConnection&&n.push(this.previousConnection),this.nextConnection&&n.push(this.nextConnection),e||!this.collapsed_)for(let o=0,a;a=this.inputList[o];o++)a.connection&&n.push(a.connection);return n}lastConnectionInStack(e){return super.lastConnectionInStack(e)}getMatchingConnection(e,n){return super.getMatchingConnection(e,n)}makeConnection_(e){return new Br(this,e)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const e=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||e.isInFlyout))for(const n of this.getConnections_(!1)){if(n.isSuperior()){let o;(o=n.targetBlock())==null||o.bumpNeighbours()}for(const o of n.neighbours(r.config$$module$build$src$core$config.snapRadius))o.getSourceBlock().getRootBlock()!==e&&(n.isConnected()&&o.isConnected()||(n.isSuperior()?o.bumpAwayFrom(n,!1):n.bumpAwayFrom(o,!0)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(e,n,o){if(e.type===Ye.NEXT_STATEMENT||e.type===Ye.INPUT_VALUE){let a=n.x;n=n.y,a+=o.x-e.getOffsetInBlock().x,n+=o.y-e.getOffsetInBlock().y,this.moveBy(a,n)}}getChildren(e){return super.getChildren(e)}queueRender(){return bT(this)}render(){this.queueRender(),ro()}renderEfficiently(){tr(),this.isCollapsed()&&this.updateCollapsed(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),hr()}tightenChildrenEfficiently(){for(const e of this.inputList){const n=e.connection;n&&n.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}getHeightWidth(){let e=this.height,n=this.width;var o=this.getNextBlock();if(o){o=o.getHeightWidth();const a=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;e+=o.height-a,n=Math.max(n,o.width)}return{height:e,width:n}}fadeForReplacement(e){this.pathObject.updateReplacementFade(e)}highlightShapeForInput(e,n){this.pathObject.updateShapeForInputHighlight(e,n)}getDragStrategy(){return this.dragStrategy}setDragStrategy(e){this.dragStrategy=e}isCopyable(){return this.isOwnDeletable()&&this.isOwnMovable()}isMovable(){return this.dragStrategy.isMovable()}startDrag(e){this.dragStrategy.startDrag(e)}drag(e,n){this.dragStrategy.drag(e,n)}endDrag(e){this.dragStrategy.endDrag(e)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const e=Object.assign({},{kind:"BLOCK"},as(this)),n=new Set(["id","height","width","pinned","enabled"]),o=function(a){for(const d in a)n.has(d)?delete a[d]:typeof a[d]=="object"&&o(a[d])};return o(e),[e]}jsonInit(e){super.jsonInit(e),e.classes&&this.addClass(Array.isArray(e.classes)?e.classes.join(" "):e.classes)}getFocusableElement(){return this.pathObject.svgPath}getFocusableTree(){return this.workspace}onNodeFocus(){this.select(),this.workspace.scrollBoundsIntoView(this.getBoundingRectangleWithoutChildren())}onNodeBlur(){this.unselect()}canBeFocused(){return!0}};bt.INLINE=-1,bt.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var BL=class{constructor(){}onDragEnter(e){}onDragOver(e){}onDragExit(e){}onDrop(e){}getClientRect(){return null}shouldPreventMove(e){return!1}},$_=class extends BL{constructor(){super(),this.wouldDelete_=!1}wouldDelete(e){return e instanceof bt?(e=!e.getParent()&&e.isDeletable(),this.updateWouldDelete_(e)):this.updateWouldDelete_(cs(e)&&e.isDeletable()),this.wouldDelete_}updateWouldDelete_(e){this.wouldDelete_=e}},ba=class{constructor(e,n){this.element=e,this.type=n}getElement(){return this.element}getType(){return this.type}},Ig=class{constructor(e){this.workspace_=e}getDimensionsPx_(e){let n=0,o=0;return e&&(n=e.getWidth(),o=e.getHeight()),new lt(n,o)}getFlyoutMetrics(e){return e=this.getDimensionsPx_(this.workspace_.getFlyout(e)),{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const e=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:e.width,height:e.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let e=0,n=0;const o=this.getToolboxMetrics(),a=this.getFlyoutMetrics(),d=!!this.workspace_.getToolbox();var p;const v=!((p=this.workspace_.getFlyout())!=null&&p.autoClose);p=d?o.position:a.position;const X=p===at.TOP;return p===at.LEFT&&(d&&(e+=o.width),v&&(e+=a.width)),X&&(d&&(n+=o.height),v&&(n+=a.height)),{top:n,left:e}}getViewMetrics(e){e=e?this.workspace_.scale:1;const n=this.getSvgMetrics(),o=this.getToolboxMetrics(),a=this.getFlyoutMetrics(),d=!!this.workspace_.getToolbox();var p;const v=!((p=this.workspace_.getFlyout())!=null&&p.autoClose);p=d?o.position:a.position;const X=p===at.LEFT||p===at.RIGHT;return(p===at.TOP||p===at.BOTTOM)&&(d&&(n.height-=o.height),v&&(n.height-=a.height)),X&&(d&&(n.width-=o.width),v&&(n.width-=a.width)),{height:n.height/e,width:n.width/e,top:-this.workspace_.scrollY/e,left:-this.workspace_.scrollX/e}}getContentMetrics(e){e=e?1:this.workspace_.scale;const n=this.workspace_.getBlocksBoundingBox();return{height:(n.bottom-n.top)*e,width:(n.right-n.left)*e,top:n.top*e,left:n.left*e}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(e){if(!this.hasFixedEdges())return{};const n=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();e=e||this.getViewMetrics(!1);const a={};return o||(a.top=e.top,a.bottom=e.top+e.height),n||(a.left=e.left,a.right=e.left+e.width),a}getPaddedContent_(e,n){const o=n.top+n.height,a=n.left+n.width,d=e.width;e=e.height;const p=d/2,v=e/2;return{top:Math.min(n.top-v,o-e),bottom:Math.max(o+v,n.top+e),left:Math.min(n.left-p,a-d),right:Math.max(a+p,n.left+d)}}getScrollMetrics(e,n,o){e=e?this.workspace_.scale:1,n=n||this.getViewMetrics(!1);var a=o||this.getContentMetrics();o=this.getComputedFixedEdges_(n),n=this.getPaddedContent_(n,a),a=o.top!==void 0?o.top:n.top;const d=o.left!==void 0?o.left:n.left;return{top:a/e,left:d/e,width:((o.right!==void 0?o.right:n.right)-d)/e,height:((o.bottom!==void 0?o.bottom:n.bottom)-a)/e}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const e=this.getToolboxMetrics(),n=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),a=this.getAbsoluteMetrics(),d=this.getViewMetrics(),p=this.getContentMetrics(),v=this.getScrollMetrics(!1,d,p);return{contentHeight:p.height,contentWidth:p.width,contentTop:p.top,contentLeft:p.left,scrollHeight:v.height,scrollWidth:v.width,scrollTop:v.top,scrollLeft:v.left,viewHeight:d.height,viewWidth:d.width,viewTop:d.top,viewLeft:d.left,absoluteTop:a.top,absoluteLeft:a.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:e.width,toolboxHeight:e.height,toolboxPosition:e.position,flyoutWidth:n.width,flyoutHeight:n.height}}};i(Le.METRICS_MANAGER,Hn,Ig);var UL=class extends Ig{constructor(e,n){super(e),this.flyout_=n}getBoundingBox(){let e;try{e=this.workspace_.getCanvas().getBBox()}catch{e={height:0,y:0,width:0,x:0}}return e}getContentMetrics(e){const n=this.getBoundingBox();return e=e?1:this.workspace_.scale,{height:n.height*e,width:n.width*e,top:n.y*e,left:n.x*e}}getScrollMetrics(e,n,o){return n=o||this.getContentMetrics(),o=this.flyout_.MARGIN*this.workspace_.scale,e=e?this.workspace_.scale:1,{height:(n.height+2*o)/e,width:(n.width+n.left+o)/e,top:0,left:0}}},In=class{constructor(e,n,o,a){this.workspace=e,this.targetWorkspace=n,this.isFlyoutLabel=a,this.height=this.width=0,this.cursorSvg=this.svgText=null,this.text=o.text,this.position=new xe(0,0),this.callbackKey=o.callbackKey||o.callbackkey,this.cssClass=o["web-class"]||null,this.info=o,e=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton",this.cssClass&&(e+=" "+this.cssClass),this.id=B(),this.svgGroup=b(ue.G,{id:this.id,class:e},this.workspace.getCanvas());let d;this.isFlyoutLabel||(d=b(ue.RECT,{class:"blocklyFlyoutButtonShadow",rx:In.BORDER_RADIUS,ry:In.BORDER_RADIUS,x:1,y:1},this.svgGroup)),e=b(ue.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:In.BORDER_RADIUS,ry:In.BORDER_RADIUS},this.svgGroup),n=b(ue.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup),o=rr(this.text),this.workspace.RTL&&(o+=""),n.textContent=o,this.isFlyoutLabel&&(this.svgText=n,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill")),a=Rr(n,"fontSize");const p=Rr(n,"fontWeight"),v=Rr(n,"fontFamily");if(this.width=Wt(n,a,p,v),o=te(o,a,p,v),this.height=this.height||o.height,!this.isFlyoutLabel){this.width+=2*In.TEXT_MARGIN_X,this.height+=2*In.TEXT_MARGIN_Y;let X;(X=d)==null||X.setAttribute("width",String(this.width));let Ie;(Ie=d)==null||Ie.setAttribute("height",String(this.height))}e.setAttribute("width",String(this.width)),e.setAttribute("height",String(this.height)),n.setAttribute("x",String(this.width/2)),n.setAttribute("y",String(this.height/2-o.height/2+o.baseline)),this.updateTransform(),this.onMouseDownWrapper=A(this.svgGroup,"pointerdown",this,this.onMouseDown),this.onMouseUpWrapper=A(this.svgGroup,"pointerup",this,this.onMouseUp)}createDom(){return this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(e,n){this.position.x=e,this.position.y=n,this.updateTransform()}moveBy(e,n,o){this.moveTo(this.position.x+e,this.position.y+n)}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getBoundingRectangle(){return new it(this.position.y,this.position.y+this.height,this.position.x,this.position.x+this.width)}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){k(this.onMouseDownWrapper),k(this.onMouseUpWrapper),this.svgGroup&&ve(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(e){e?this.svgGroup&&(this.svgGroup.appendChild(e),this.cursorSvg=e):this.cursorSvg=null}onMouseUp(e){(e=this.targetWorkspace.getGesture(e))&&e.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(e=this.targetWorkspace.getButtonCallback(this.callbackKey))&&e(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}onMouseDown(e){const n=this.targetWorkspace.getGesture(e),o=this.targetWorkspace.getFlyout();n&&o&&n.handleFlyoutStart(e,o)}getSvgRoot(){return this.svgGroup}getFocusableElement(){return this.svgGroup}getFocusableTree(){return this.workspace}onNodeFocus(){var e=this.getPosition();e=new it(e.y,e.y+this.height,e.x,e.x+this.width),this.workspace.scrollBoundsIntoView(e)}onNodeBlur(){}canBeFocused(){return!0}};In.TEXT_MARGIN_X=5,In.TEXT_MARGIN_Y=2,In.BORDER_RADIUS=4,Xe(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var HL=class{getFirstChild(e){return null}getParent(e){return e.getWorkspace()}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof In}},GL=class{constructor(e,n){this.policy=e,this.flyout=n}getFirstChild(e){return null}getParent(e){return this.policy.getParent(e)}getNextSibling(e){const n=this.flyout.getContents();if(!n)return null;let o=n.findIndex(a=>a.getElement()===e);return o===-1?null:(o++,o>=n.length&&(o=0),n[o].getElement())}getPreviousSibling(e){const n=this.flyout.getContents();if(!n)return null;let o=n.findIndex(a=>a.getElement()===e);return o===-1?null:(o--,o<0&&(o=n.length-1),n[o].getElement())}isNavigable(e){return this.policy.isNavigable(e)}isApplicable(e){return this.policy.isApplicable(e)}},I_=class{constructor(e,n){this.gap=e,this.axis=n,this.y=this.x=0}getBoundingRectangle(){switch(this.axis){case"x":return new it(this.y,this.y,this.x,this.x+this.gap);case"y":return new it(this.y,this.y+this.gap,this.x,this.x)}}moveBy(e,n,o){this.x+=e,this.y+=n}isNavigable(){return!1}getFocusableElement(){throw Error("Cannot be focused")}getFocusableTree(){throw Error("Cannot be focused")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}},VL=class{getFirstChild(e){return null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return!1}isApplicable(e){return e instanceof I_}},lw=class{getFirstChild(e){return e.getEditor()}getParent(e){let n;return(n=e.getOwner())!=null?n:null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof E_}},WL=class{getFirstChild(e){return Up(e,!0)[0]}getParent(e){var n;if((n=e.previousConnection)!=null&&n.targetBlock()){if(n=e.getSurroundParent())return n}else{let o;if((o=e.outputConnection)!=null&&o.targetBlock())return e.outputConnection.targetBlock()}return e.workspace}getNextSibling(e){let n;if((n=e.nextConnection)!=null&&n.targetBlock()){let a;return(a=e.nextConnection)==null?void 0:a.targetBlock()}let o;return(o=e.outputConnection)!=null&&o.targetBlock()?Ls(e,1):e.getSurroundParent()?Ls(e.getTopStackBlock(),1):this.getParent(e)instanceof ln?Ta(e,1):null}getPreviousSibling(e){let n;if((n=e.previousConnection)!=null&&n.targetBlock()){let a;return(a=e.previousConnection)==null?void 0:a.targetBlock()}let o;return(o=e.outputConnection)!=null&&o.targetBlock()?Ls(e,-1):this.getParent(e)instanceof ln?Ta(e,-1):null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof bt}},aw=class{getFirstChild(e){return null}getParent(e){return e.getCommentView().workspace.getCommentById(e.getCommentView().commentId)}getNextSibling(e){const n=e.getCommentView().getCommentBarButtons();return e=n.indexOf(e),e>=0&&e+1<n.length?n[e+1]:null}getPreviousSibling(e){const n=e.getCommentView().getCommentBarButtons();return e=n.indexOf(e),e>0?n[e-1]:null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof u_}},cw=class{getFirstChild(e){return null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof h_}},XL=class{getFirstChild(e){return e.getParentInput()?e.targetConnection:null}getParent(e){return e.getSourceBlock()}getNextSibling(e){if(e.getParentInput())return Ls(e,1);if(e.type===Ye.NEXT_STATEMENT){const o=e.targetConnection;var n=e.getSourceBlock();if(!o&&n.getRootBlock().lastConnectionInStack(!1)===e){e=n.workspace.getTopBlocks(!0),n=e.indexOf(n.getRootBlock())+1,n>=e.length&&(n=0),n=e[n];let a;return(a=this.getParentConnection(n))!=null?a:n}return o}return e.getSourceBlock()}getPreviousSibling(e){if(e.getParentInput())return Ls(e,-1);if(e.type===Ye.PREVIOUS_STATEMENT||e.type===Ye.OUTPUT_VALUE){const o=e.targetConnection&&!e.targetConnection.getParentInput()?e.targetConnection:null;var n=e.getSourceBlock();if(!o&&this.getParentConnection(n.getRootBlock())===e){e=n.workspace.getTopBlocks(!0),n=e.indexOf(n.getRootBlock())-1,n<0&&(n=e.length-1),n=e[n];let a;return(a=n.lastConnectionInStack(!1))!=null?a:n}return o}return e.type===Ye.NEXT_STATEMENT?e.getSourceBlock():null}getParentConnection(e){let n;return!e.outputConnection||(n=e.previousConnection)!=null&&n.isConnected()?e.previousConnection:e.outputConnection}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof Br}},zL=class{getFirstChild(e){return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return Ls(e,1)}getPreviousSibling(e){return Ls(e,-1)}isNavigable(e){let n;return e.canBeFocused()&&e.isVisible()&&(e.isClickable()||e.isCurrentlyEditable())&&!((n=e.getSourceBlock())!=null&&n.isSimpleReporter()&&e.isFullBlockField())&&e.getParentInput().isVisible()}isApplicable(e){return e instanceof Lt}},Og={};Og.register=Hp,Og.unregister=MS;var Sg=17,YL=160,KL=80,Ns=class extends du{constructor(e){super(e),this.sourceBlock=e,this.textInputBubble=null,this.text="",this.bubbleSize=new lt(YL,KL),this.bubbleVisiblity=!1}getType(){return Ns.TYPE}initView(e){this.svgRoot||(super.initView(e),b(ue.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),b(ue.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),b(ue.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),_e(this.svgRoot,"blocklyCommentIcon"))}dispose(){super.dispose();let e;(e=this.textInputBubble)==null||e.dispose()}getWeight(){return Ns.WEIGHT}getSize(){return new lt(Sg,Sg)}applyColour(){super.applyColour();const e=this.sourceBlock.getColour();let n;(n=this.textInputBubble)==null||n.setColour(e)}updateEditable(){const e=this,n=()=>super.updateEditable;return(0,me.asyncExecutePromiseGeneratorFunction)(function*(){n().call(e),e.bubbleIsVisible()&&(yield e.setBubbleVisible(!1),yield e.setBubbleVisible(!0))})}onLocationChange(e){const n=this.workspaceLocation;super.onLocationChange(e),this.bubbleLocation&&(e=xe.difference(this.workspaceLocation,n),this.bubbleLocation=xe.sum(this.bubbleLocation,e)),e=this.getAnchorLocation();let o;(o=this.textInputBubble)==null||o.setAnchorLocation(e)}setText(e){const n=this.text;Y(new(ce(de.BLOCK_CHANGE))(this.sourceBlock,"comment",null,n,e)),this.text=e;let o;(o=this.textInputBubble)==null||o.setText(this.text)}getText(){return this.text}setBubbleSize(e){this.bubbleSize=e;let n;(n=this.textInputBubble)==null||n.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}setBubbleLocation(e){this.bubbleLocation=e;let n;(n=this.textInputBubble)==null||n.moveDuringDrag(e)}getBubbleLocation(){return this.bubbleLocation}saveState(){if(this.text){const e={text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width},n=this.getBubbleLocation();return n&&(e.x=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(n.x+this.bubbleSize.width):n.x,e.y=n.y),e}return null}loadState(e){let n;this.text=(n=e.text)!=null?n:"";let o,a;this.bubbleSize=new lt((o=e.width)!=null?o:YL,(a=e.height)!=null?a:KL);let d;this.bubbleVisiblity=(d=e.pinned)!=null?d:!1,this.setBubbleVisible(this.bubbleVisiblity);let p=e.x;const v=e.y;Js().then(()=>{p&&v&&(p=this.sourceBlock.workspace.RTL?this.sourceBlock.workspace.getWidth()-(p+this.bubbleSize.width):p,this.setBubbleLocation(new xe(p,v)))})}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var e=this.textInputBubble.getText();this.text!==e&&(Y(new(ce(de.BLOCK_CHANGE))(this.sourceBlock,"comment",null,this.text,e)),this.text=e)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}onBubbleLocationChange(){this.textInputBubble&&(this.bubbleLocation=this.textInputBubble.getRelativeToSurfaceXY())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(e){const n=this;return(0,me.asyncExecutePromiseGeneratorFunction)(function*(){n.bubbleVisiblity!==e&&(n.bubbleVisiblity=e,yield Js(),!n.sourceBlock.rendered||n.sourceBlock.isInFlyout||n.sourceBlock.isInsertionMarker()||(e?(n.sourceBlock.isEditable()?n.showEditableBubble():n.showNonEditableBubble(),n.applyColour()):n.hideBubble(),Y(new(ce(de.BUBBLE_OPEN))(n.sourceBlock,e,"comment"))))})}getBubble(){return this.textInputBubble}showEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.addTextChangeListener(()=>this.onTextChange());let n;(n=this.textInputBubble)==null||n.addSizeChangeListener(()=>this.onSizeChange())}showNonEditableBubble(){this.createBubble();let e;(e=this.textInputBubble)==null||e.setEditable(!1)}createBubble(){this.textInputBubble=new E_(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect(),this),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.bubbleLocation&&this.textInputBubble.moveDuringDrag(this.bubbleLocation),this.textInputBubble.addTextChangeListener(()=>this.onTextChange()),this.textInputBubble.addSizeChangeListener(()=>this.onSizeChange()),this.textInputBubble.addLocationChangeListener(()=>this.onBubbleLocationChange())}hideBubble(){let e;(e=this.textInputBubble)==null||e.dispose(),this.textInputBubble=null}getAnchorLocation(){const e=Sg/2;return xe.sum(this.workspaceLocation,new xe(e,e))}getBubbleOwnerRect(){return this.sourceBlock.getBoundingRectangleWithoutChildren()}};Ns.TYPE=Er.COMMENT,Ns.WEIGHT=3,Hp(Ns.TYPE,Ns);var uw=class{getFirstChild(e){if(e instanceof r.MutatorIcon$$module$build$src$core$icons$mutator_icon&&e.bubbleIsVisible()&&r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===e){let n,o;return(o=(n=e.getBubble())==null?void 0:n.getWorkspace())!=null?o:null}if(e instanceof Ns&&e.bubbleIsVisible()&&r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()===e){let n,o;return(o=(n=e.getBubble())==null?void 0:n.getEditor())!=null?o:null}return null}getParent(e){return e.getSourceBlock()}getNextSibling(e){return Ls(e,1)}getPreviousSibling(e){return Ls(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof du}},hw=class{getFirstChild(e){return e.view.getCommentBarButtons()[0]}getParent(e){return e.workspace}getNextSibling(e){return Ta(e,1)}getPreviousSibling(e){return Ta(e,-1)}isNavigable(e){return e.canBeFocused()}isApplicable(e){return e instanceof ki}},jL=class{getFirstChild(e){return e=e.getTopBlocks(!0),e.length?e[0]:null}getParent(e){return null}getNextSibling(e){return null}getPreviousSibling(e){return null}isNavigable(e){return e.canBeFocused()&&!e.isMutator}isApplicable(e){return e instanceof ln}},Rg=class{constructor(){this.rules=[new WL,new zL,new XL,new jL,new uw,new hw,new aw,new lw,new cw]}addNavigationPolicy(e){this.rules.push(e)}get(e){return this.rules.find(n=>n.isApplicable(e))}getFirstChild(e){let n;const o=(n=this.get(e))==null?void 0:n.getFirstChild(e);if(!o)return null;let a;return(a=this.get(o))!=null&&a.isNavigable(o)?o:this.getFirstChild(o)||this.getNextSibling(o)}getParent(e){let n;const o=(n=this.get(e))==null?void 0:n.getParent(e);if(!o)return null;let a;return(a=this.get(o))!=null&&a.isNavigable(o)?o:this.getParent(o)}getNextSibling(e){let n;const o=(n=this.get(e))==null?void 0:n.getNextSibling(e);if(!o)return null;let a;return(a=this.get(o))!=null&&a.isNavigable(o)?o:this.getNextSibling(o)}getPreviousSibling(e){let n;const o=(n=this.get(e))==null?void 0:n.getPreviousSibling(e);if(!o)return null;let a;return(a=this.get(o))!=null&&a.isNavigable(o)?o:this.getPreviousSibling(o)}},JL=class extends Rg{constructor(e){super(),this.rules.push(new HL,new VL),this.rules=this.rules.map(n=>new GL(n,e))}},Lg=class{constructor(e,n,o,a,d){this.workspace=e,this.oldHostMetrics=this.corner_=this.vScroll=this.hScroll=null,n=n===void 0?!0:n,o=o===void 0?!0:o;const p=n&&o;n&&(this.hScroll=new sr(e,!0,p,a,d)),o&&(this.vScroll=new sr(e,!1,p,a,d)),p&&(this.corner_=b(ue.RECT,{height:sr.scrollbarThickness,width:sr.scrollbarThickness,class:"blocklyScrollbarBackground"}),ut(this.corner_,e.getBubbleCanvas()))}dispose(){ve(this.corner_),this.oldHostMetrics=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const e=this.workspace.getMetrics();if(e){var n=!1,o=!1;if(this.oldHostMetrics&&this.oldHostMetrics.viewWidth===e.viewWidth&&this.oldHostMetrics.viewHeight===e.viewHeight&&this.oldHostMetrics.absoluteTop===e.absoluteTop&&this.oldHostMetrics.absoluteLeft===e.absoluteLeft?(this.oldHostMetrics&&this.oldHostMetrics.scrollWidth===e.scrollWidth&&this.oldHostMetrics.viewLeft===e.viewLeft&&this.oldHostMetrics.scrollLeft===e.scrollLeft||(n=!0),this.oldHostMetrics&&this.oldHostMetrics.scrollHeight===e.scrollHeight&&this.oldHostMetrics.viewTop===e.viewTop&&this.oldHostMetrics.scrollTop===e.scrollTop||(o=!0)):o=n=!0,n||o){try{r.disable$$module$build$src$core$events$utils(),this.hScroll&&n&&this.hScroll.resize(e),this.vScroll&&o&&this.vScroll.resize(e)}finally{r.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==e.viewWidth||this.oldHostMetrics.absoluteLeft!==e.absoluteLeft){let a;(a=this.corner_)==null||a.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics||this.oldHostMetrics.viewHeight!==e.viewHeight||this.oldHostMetrics.absoluteTop!==e.absoluteTop){let a;(a=this.corner_)==null||a.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics=e}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(e,n){this.hScroll&&this.hScroll.setOrigin(e,n),this.vScroll&&this.vScroll.setOrigin(e,n)}set(e,n,o){this.hScroll&&this.hScroll.set(e,!1),this.vScroll&&this.vScroll.set(n,!1),(o||o===void 0)&&(e={},this.hScroll&&(e.x=this.hScroll.getRatio_()),this.vScroll&&(e.y=this.vScroll.getRatio_()),this.workspace.setMetrics(e))}setX(e){this.hScroll&&this.hScroll.set(e,!0)}setY(e){this.vScroll&&this.vScroll.set(e,!0)}setContainerVisible(e){this.hScroll&&this.hScroll.setContainerVisible(e),this.vScroll&&this.vScroll.setContainerVisible(e)}isVisible(){let e=!1;return this.hScroll&&(e=this.hScroll.isVisible()),this.vScroll&&(e=e||this.vScroll.isVisible()),e}setVisible(e){this.hScroll&&this.hScroll.setVisibleInternal(e),this.vScroll&&this.vScroll.setVisibleInternal(e)}resizeContent(e){this.hScroll&&this.hScroll.resizeContentHorizontal(e),this.vScroll&&this.vScroll.resizeContentVertical(e)}resizeView(e){this.hScroll&&this.hScroll.resizeViewHorizontal(e),this.vScroll&&this.vScroll.resizeViewVertical(e)}},ya="sep",qL=class{load(e,n){return e=new I_(0,n.horizontalLayout?"x":"y"),new ba(e,ya)}gapForItem(e,n){let o;return(o=parseInt(String(e.gap)))!=null?o:n}disposeItem(e){}getType(){return ya}};i(Le.FLYOUT_INFLATER,ya,qL);var O_=class extends $_{constructor(e){super(),this.horizontalLayout=!1,this.boundEvents=[],this.reflowWrapper=null,this.contents=[],this.autoClose=!0,this.visible=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,this.inflaters=new Map,e.setMetrics=this.setMetrics_.bind(this),this.workspace_=new ln(e),this.workspace_.setMetricsManager(new UL(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.visible),this.workspace_.setNavigator(new JL(this)),this.id=re(),this.RTL=!!e.RTL,this.toolboxPosition_=e.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=this.MARGIN*3,this.GAP_Y=this.MARGIN*3}createDom(e){return this.svgGroup_=b(e,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=b(ue.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(e){this.targetWorkspace=e,this.workspace_.targetWorkspace=e,this.workspace_.scrollbar=new Lg(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(A(this.svgGroup_,"wheel",this,this.wheel_)),this.boundEvents.push(A(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),e.getComponentManager().addComponent({component:this,weight:Ht.ComponentWeight.FLYOUT_WEIGHT,capabilities:[Ht.Capability.AUTOHIDEABLE,Ht.Capability.DELETE_AREA,Ht.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const e of this.boundEvents)k(e);this.boundEvents.length=0,this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&ve(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(e){this.autoClose=e,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(e){!e&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.visible}setVisible(e){const n=e!==this.isVisible();this.visible=e,n&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(e){const n=e!==this.containerVisible;this.containerVisible=e,n&&this.updateDisplay()}getContents(){return this.contents}setContents(e){this.contents=e}updateDisplay(){let e;e=this.containerVisible?this.isVisible():!1,this.svgGroup_&&(this.svgGroup_.style.display=e?"block":"none");let n;(n=this.workspace_.scrollbar)==null||n.setContainerVisible(e)}positionAt_(e,n,o,a){let d;(d=this.svgGroup_)==null||d.setAttribute("width",`${e}`);let p;(p=this.svgGroup_)==null||p.setAttribute("height",`${n}`),this.workspace_.setCachedParentSvgSize(e,n),this.svgGroup_&&Bt(this.svgGroup_,"translate("+o+"px,"+a+"px)"),(e=this.workspace_.scrollbar)&&(e.setOrigin(o,a),e.resize(),e.hScroll&&e.hScroll.setPosition(e.hScroll.position.x,e.hScroll.position.y),e.vScroll&&e.vScroll.setPosition(e.vScroll.position.x,e.vScroll.position.y))}hide(){this.isVisible()&&(this.setVisible(!1),this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null))}show(e){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),typeof e=="string"&&(e=this.getDynamicCategoryContents(e)),this.setVisible(!0),e=ze(e),e=this.createFlyoutInfo(e),ro(this.workspace_),this.setContents(e),this.layout_(e),this.horizontalLayout?this.height_=0:this.width_=0,this.reflow(),this.workspace_.setResizesEnabled(!0),this.reflowWrapper=n=>{n.type!==de.BLOCK_CHANGE&&n.type!==de.BLOCK_FIELD_INTERMEDIATE_CHANGE||this.reflow()},this.workspace_.addChangeListener(this.reflowWrapper)}createFlyoutInfo(e){const n=[],o=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const a of e)"custom"in a&&(e=this.getDynamicCategoryContents(a.custom),e=ze(e),n.push(...this.createFlyoutInfo(e))),e=a.kind.toLowerCase(),(e=this.getInflaterForType(e))&&(n.push(e.load(a,this)),(e=e.gapForItem(a,o))&&n.push(new ba(new I_(e,this.horizontalLayout?"x":"y"),ya)));return this.normalizeSeparators(n)}normalizeSeparators(e){for(let n=e.length-1;n>0;n--){const o=e[n].getType().toLowerCase(),a=e[n-1].getType().toLowerCase();o===ya&&a===ya&&e.splice(n-1,1)}return e}getDynamicCategoryContents(e){if(e=this.workspace_.targetWorkspace.getToolboxCategoryCallback(e),typeof e!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return e(this.workspace_.targetWorkspace)}clearOldBlocks(){this.getContents().forEach(n=>{let o;(o=this.getInflaterForType(n.getType()))==null||o.disposeItem(n)});let e;(e=this.workspace_.getPotentialVariableMap())==null||e.clear()}onMouseDown(e){const n=this.targetWorkspace.getGesture(e);n&&n.handleFlyoutStart(e,this)}isBlockCreatable(e){return e.isEnabled()&&!this.getTargetWorkspace().isReadOnly()}createBlock(e){let n=null;r.disable$$module$build$src$core$events$utils();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{n=this.placeNewBlock(e)}finally{r.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),e=Dc(this.targetWorkspace,o),he()){for(r.setGroup$$module$build$src$core$events$utils(!0),o=0;o<e.length;o++){const a=e[o];Y(new(ce(de.VAR_CREATE))(a))}Y(new(ce(de.BLOCK_CREATE))(n))}return this.autoClose&&this.hide(),n}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1}placeNewBlock(e){var n=this.targetWorkspace;if(!e.getSvgRoot())throw Error("oldBlock is not rendered");const o=this.serializeBlock(e);return n.setResizesEnabled(!1),n=no(o,n),this.positionNewBlock(e,n),n}serializeBlock(e){return as(e)}positionNewBlock(e,n){const o=this.targetWorkspace;var a=o.getOriginOffsetInPixels(),d=this.workspace_.getOriginOffsetInPixels();e=e.getRelativeToSurfaceXY(),e.scale(this.workspace_.scale),d=xe.sum(d,e),a=xe.difference(d,a),a.scale(1/o.scale),n.moveTo(new xe(a.x,a.y))}getInflaterForType(e){if(this.inflaters.has(e)){var n;return(n=this.inflaters.get(e))!=null?n:null}return(n=_(Le.FLYOUT_INFLATER,e))?(n=new n,this.inflaters.set(e,n),n):null}getFocusableElement(){throw Error("Flyouts are not directly focusable.")}getFocusableTree(){throw Error("Flyouts are not directly focusable.")}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!1}getRootFocusableNode(){throw Error("Flyouts are not directly focusable.")}getRestoredFocusableNode(e){throw Error("Flyouts are not directly focusable.")}getNestedTrees(){throw Error("Flyouts are not directly focusable.")}lookUpFocusableNode(e){throw Error("Flyouts are not directly focusable.")}onTreeFocus(e,n){}onTreeBlur(e){throw Error("Flyouts are not directly focusable.")}},ZL=class{constructor(){this.isActive=!1,this.activeClassName="blocklyKeyboardNavigation"}setIsActive(e=!0){this.isActive=e,this.updateActiveVisualization()}getIsActive(){return this.isActive}updateActiveVisualization(){this.isActive?document.body.classList.add(this.activeClassName):document.body.classList.remove(this.activeClassName)}},S_=new ZL,QL=class{constructor(e){this.workspace=e,this.horizontalScrollEnabled=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled=this.workspace.isMovableVertically(),this.startScrollXY_=new xe(e.scrollX,e.scrollY)}dispose(){this.workspace=null}startDrag(){}endDrag(e){this.drag(e)}drag(e){if(e=xe.sum(this.startScrollXY_,e),this.horizontalScrollEnabled&&this.verticalScrollEnabled)this.workspace.scroll(e.x,e.y);else if(this.horizontalScrollEnabled)this.workspace.scroll(e.x,this.workspace.scrollY);else if(this.verticalScrollEnabled)this.workspace.scroll(this.workspace.scrollX,e.y);else throw new TypeError("Invalid state.")}},dw=5,_w=6,R_=class{constructor(e,n){this.creatorWorkspace=n,this.mouseDownXY=new xe(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.multiTouch=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=e,this.currentDragDeltaXY=new xe(0,0)}dispose(){R(),dp(),this.creatorWorkspace.clearGesture();for(const e of this.boundEvents)k(e);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(e){const n=new xe(e.clientX,e.clientY);this.updateDragDelta(n)&&(this.updateIsDragging(e),S()),this.mostRecentEvent=e}updateDragDelta(e){return this.currentDragDeltaXY=xe.difference(e,this.mouseDownXY),this.hasExceededDragRadius?!1:this.hasExceededDragRadius=xe.magnitude(this.currentDragDeltaXY)>(this.flyout?r.config$$module$build$src$core$config.flyoutDragRadius:r.config$$module$build$src$core$config.dragRadius)}updateIsDraggingFromFlyout(){let e;if(!this.targetBlock||(e=this.flyout)==null||!e.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error(`Cannot update dragging from the flyout because the ' +
          'flyout's target workspace is undefined`);return!this.flyout.isScrollable()||this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)?(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),r.getGroup$$module$build$src$core$events$utils()||r.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),!0):!1}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new QL(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(e){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const n=ie();n&&pa(n)&&n.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(n,this.startWorkspace_),this.dragger.onDragStart(e),this.dragger.onDrag(e,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(e,n){return new(E(Le.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(e,n)}doStart(e){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,H(e)?this.cancel():(this.gestureHasStarted=!0,_a(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=XT(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=e,hp(),G(e)?this.handleRightClick(e):(e.type.toLowerCase()==="pointerdown"&&e.pointerType!=="mouse"&&g(e,this),this.mouseDownXY=new xe(e.clientX,e.clientY),this.bindMouseEvents(e),this.isEnding_||this.handleTouchStart(e)))}bindMouseEvents(e){this.boundEvents.push(A(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(A(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(A(document,"pointerup",null,this.handleUp.bind(this),!0)),this.boundEvents.push(A(document,"pointercancel",null,this.handleUp.bind(this),!0)),e.preventDefault(),e.stopPropagation()}handleStart(e){this.isDragging()||(this.handleTouchStart(e),this.isMultiTouch()&&S())}handleMove(e){this.isDragging()&&L(e)||!this.isMultiTouch()?(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(e),S())}handleUp(e){if(this.isDragging()||this.handleTouchEnd(e),!this.isMultiTouch()||this.isDragging()){if(!L(e))return;if(this.updateFromEvent(e),S(),this.isEnding_){console.log("Trying to end a gesture recursively.");return}this.isEnding_=!0,this.dragger?(S_.setIsActive(!1),this.dragger.onDragEnd(e,this.currentDragDeltaXY)):this.workspaceDragger?(S_.setIsActive(!1),this.workspaceDragger.endDrag(this.currentDragDeltaXY)):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(e))}e.preventDefault(),e.stopPropagation(),this.dispose()}handleTouchStart(e){var n=N(e);this.cachedPoints.set(n,this.getTouchPoint(e));var o=Array.from(this.cachedPoints.keys());o.length===2&&(n=this.cachedPoints.get(o[0]),o=this.cachedPoints.get(o[1]),this.startDistance=xe.distance(n,o),this.multiTouch=!0,e.preventDefault())}handleTouchMove(e){const n=N(e);this.cachedPoints.set(n,this.getTouchPoint(e)),this.isPinchZoomEnabled&&this.cachedPoints.size===2?this.handlePinch(e):(this.updateFromEvent(e),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),e.preventDefault(),e.stopPropagation())}handlePinch(e){var n=Array.from(this.cachedPoints.keys()),o=this.cachedPoints.get(n[0]);if(n=this.cachedPoints.get(n[1]),o=xe.distance(o,n)/this.startDistance,this.previousScale>0&&this.previousScale<1/0){if(n=o-this.previousScale,n=n>0?n*dw:n*_w,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const a=this.startWorkspace_,d=x(e,a.getParentSvg(),a.getInverseScreenCTM());a.zoom(d.x,d.y,n)}this.previousScale=o,e.preventDefault()}handleTouchEnd(e){e=N(e),this.cachedPoints.has(e)&&this.cachedPoints.delete(e),this.cachedPoints.size<2&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(e){return this.startWorkspace_?new xe(e.pageX,e.pageY):null}isMultiTouch(){return this.multiTouch}cancel(){this.isEnding_||(S(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(e){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(e)):this.startBubble?this.startBubble.showContextMenu(e):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(e)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startWorkspace_),this.startWorkspace_.showContextMenu(e)),e.preventDefault(),e.stopPropagation(),S_.setIsActive(!1),this.dispose()}handleWsStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(n),this.mostRecentEvent=e,this.startBlock||this.startBubble||this.startComment?this.startBlock&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.startBlock):r.getFocusManager$$module$build$src$core$focus_manager().focusNode(n),this.doStart(e)}fireWorkspaceClick(e){Y(new(ce(de.CLICK))(null,e.id,"workspace"))}handleFlyoutStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(n),this.handleWsStart(e,n.getWorkspace())}handleBlockStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(n),this.mostRecentEvent=e}handleBubbleStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(n),this.mostRecentEvent=e}handleCommentStart(e,n){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(n),this.mostRecentEvent=e}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.bringBlockToFront(),this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent)}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.flyout.isBlockCreatable(this.targetBlock)){r.getGroup$$module$build$src$core$events$utils()||r.setGroup$$module$build$src$core$events$utils(!0);var e=this.flyout.createBlock(this.targetBlock);e.snapToGrid(),e.bumpNeighbours(),r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");e=new(ce(de.CLICK))(this.startBlock,this.startWorkspace_.id,"block"),Y(e)}this.bringBlockToFront(),r.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(e){this.fireWorkspaceClick(this.startWorkspace_||this.creatorWorkspace)}bringBlockToFront(){this.targetBlock&&!this.flyout&&(r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.targetBlock),this.targetBlock.bringToFront())}setStartField(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=e)}setStartIcon(e){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=e)}setStartBubble(e){this.startBubble||(this.startBubble=e)}setStartComment(e){this.startComment||(this.startComment=e)}setStartBlock(e){this.startBlock||this.startBubble||(this.startBlock=e,e.isInFlyout&&e!==e.getRootBlock()?this.setTargetBlock(e.getRootBlock()):this.setTargetBlock(e))}setTargetBlock(e){e.isShadow()?this.setTargetBlock(e.getParent()):(this.targetBlock=e,r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e))}setStartWorkspace(e){this.startWorkspace_||(this.startWorkspace_=e)}setStartFlyout(e){this.flyout||(this.flyout=e)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!!this.startBlock&&!this.hasExceededDragRadius&&!this.isFieldClick()&&!this.isIconClick()}isFieldClick(){return this.startField?this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose)):!1}isIconClick(){if(!this.startIcon)return!1;const e=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&e}isWorkspaceClick(){return!this.startBlock&&!this.startBubble&&!this.startField&&!this.hasExceededDragRadius}getCurrentDragger(){let e,n;return(n=(e=this.workspaceDragger)!=null?e:this.dragger)!=null?n:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const e=et();for(let n=0,o;o=e[n];n++)if(o.currentGesture_)return!0;return!1}},Ag=class{constructor(e,n){this.pattern=e,this.scale=1;let o;this.spacing=(o=n.spacing)!=null?o:0;let a;this.length=(a=n.length)!=null?a:1,this.line2=(this.line1=e.firstChild)&&this.line1.nextSibling;let d;this.snapToGrid=(d=n.snap)!=null?d:!1}setSpacing(e){this.spacing=e,this.update(this.scale)}getSpacing(){return this.spacing}setLength(e){this.length=e,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(e){this.snapToGrid=e}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(e){this.scale=e;var n=this.spacing*e;this.pattern.setAttribute("width",`${n}`),this.pattern.setAttribute("height",`${n}`),n=Math.floor(this.spacing/2)+.5;let o=n-this.length/2,a=n+this.length/2;n*=e,o*=e,a*=e,this.setLineAttributes(this.line1,e,o,a,n,n),this.setLineAttributes(this.line2,e,n,n,o,a)}setLineAttributes(e,n,o,a,d,p){e&&(e.setAttribute("stroke-width",`${n}`),e.setAttribute("x1",`${o}`),e.setAttribute("y1",`${d}`),e.setAttribute("x2",`${a}`),e.setAttribute("y2",`${p}`))}moveTo(e,n){this.pattern.setAttribute("x",`${e}`),this.pattern.setAttribute("y",`${n}`)}alignXY(e){var n=this.getSpacing();const o=n/2,a=Math.round(Math.round((e.x-o)/n)*n+o);return n=Math.round(Math.round((e.y-o)/n)*n+o),a===e.x&&n===e.y?e:new xe(a,n)}static createDom(e,n,o,a){e=b(ue.PATTERN,{id:"blocklyGridPattern"+e,patternUnits:"userSpaceOnUse"},o);let d,p;if(((d=n.length)!=null?d:1)>0&&((p=n.spacing)!=null?p:0)>0){b(ue.LINE,{stroke:n.colour},e);let v;(v=n.length)!=null&&v&&b(ue.LINE,{stroke:n.colour},e)}else b(ue.LINE,{},e);return a&&a.style.setProperty("--blocklyGridPattern",`url(#${e.id})`),e}},fw=class{constructor(e){this.workspace=e,this.layers=new Map,(e=e.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(e),this.animationLayer=this.createAnimationLayer(e)),e=this.createLayer(_o),_e(e,"blocklyBlockCanvas"),e=this.createLayer(c_),_e(e,"blocklyBubbleCanvas")}createDragLayer(e){const n=b(ue.SVG,{class:"blocklyBlockDragSurface",xmlns:Jc,"xmlns:html":sl,"xmlns:xlink":Gn,version:"1.1"});return e.append(n),b(ue.G,{},n)}createAnimationLayer(e){const n=b(ue.SVG,{class:"blocklyAnimationLayer",xmlns:Jc,"xmlns:html":sl,"xmlns:xlink":Gn,version:"1.1"});return e.append(n),b(ue.G,{},n)}appendToAnimationLayer(e){let n;const o=(n=this.dragLayer)==null?void 0:n.getAttribute("transform");if(o){let d;(d=this.animationLayer)==null||d.setAttribute("transform",o)}let a;(a=this.animationLayer)==null||a.appendChild(e.getSvgRoot())}translateLayers(e,n){e=`translate(${e.x}, ${e.y}) scale(${n})`;let o;(o=this.dragLayer)==null||o.setAttribute("transform",e);for(const[,a]of this.layers)a.setAttribute("transform",e)}moveToDragLayer(e){let n;(n=this.dragLayer)==null||n.appendChild(e.getSvgRoot()),e.canBeFocused()&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}moveOffDragLayer(e,n){this.append(e,n),e.canBeFocused()&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}append(e,n){this.layers.has(n)||this.createLayer(n),e=e.getSvgRoot();let o;if(((o=this.layers.get(n))==null?void 0:o.lastChild)!==e){let a;(a=this.layers.get(n))==null||a.appendChild(e)}}createLayer(e){const n=this.workspace.getSvgGroup(),o=b(ue.G,{});let a=!1;const d=[...this.layers].sort((p,v)=>p[0]-v[0]);for(const[p,v]of d)if(e<p){n.insertBefore(o,v),a=!0;break}return a||n.appendChild(o),this.layers.set(e,o),o}hasLayer(e){return e===this.dragLayer||new Set(this.layers.values()).has(e)}getBlockLayer(){return this.layers.get(_o)}getBubbleLayer(){return this.layers.get(c_)}},eA=class{constructor(){this.curNode=this.colour=null,this.type="marker"}getCurNode(){return this.curNode}setCurNode(e){this.curNode=e}dispose(){this.curNode=null}getSourceBlockFromNode(e){return e instanceof bt?e:e instanceof Lt||e instanceof Br?e.getSourceBlock():null}getSourceBlock(){return this.getSourceBlockFromNode(this.getCurNode())}},Cg=class extends eA{constructor(e){super(),this.workspace=e,this.type="cursor",this.potentialNodes=null}next(){var e=this.getCurNode();return e?((e=this.getNextNode(e,n=>{let o;return n instanceof bt&&!((o=n.outputConnection)!=null&&o.targetBlock())||n instanceof ki},!0))&&this.setCurNode(e),e):null}in(){var e=this.getCurNode();return e?((e=this.getNextNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}prev(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,n=>{let o;return n instanceof bt&&!((o=n.outputConnection)!=null&&o.targetBlock())||n instanceof ki},!0))&&this.setCurNode(e),e):null}out(){var e=this.getCurNode();return e?((e=this.getPreviousNode(e,()=>!0,!0))&&this.setCurNode(e),e):null}atEndOfLine(){var e=this.getCurNode();if(!e)return!1;const n=this.getNextNode(e,()=>!0,!0);return e=this.getNextNode(e,o=>{let a;return o instanceof bt&&!((a=o.outputConnection)!=null&&a.targetBlock())},!0),n===e}getNextNodeImpl(e,n,o=new Set){if(!e||o.has(e))return null;let a=this.workspace.getNavigator().getFirstChild(e)||this.workspace.getNavigator().getNextSibling(e);for(var d=e;d&&!a&&(d=this.workspace.getNavigator().getParent(d),!!d);)a=this.workspace.getNavigator().getNextSibling(d);return n(a)?a:a?(o.add(e),this.getNextNodeImpl(a,n,o)):null}getNextNode(e,n,o){return!e||!o&&this.getLastNode()===e?null:this.getNextNodeImpl(e,n)}getPreviousNodeImpl(e,n,o=new Set){if(!e||o.has(e))return null;const a=this.getRightMostChild(this.workspace.getNavigator().getPreviousSibling(e),e)||this.workspace.getNavigator().getParent(e);return n(a)?a:a?(o.add(e),this.getPreviousNodeImpl(a,n,o)):null}getPreviousNode(e,n,o){return!e||!o&&this.getFirstNode()===e?null:this.getPreviousNodeImpl(e,n)}getRightMostChild(e,n){if(!e)return e;let o=this.workspace.getNavigator().getFirstChild(e);if(!o||o===n)return e;for(e=o;e&&e!==n;e=this.workspace.getNavigator().getNextSibling(o))o=e;return this.getRightMostChild(o,n)}preDelete(e){var n=this.getCurNode();n=n?[n]:[];var o;let a,d;const p=(d=(o=e.previousConnection)==null?void 0:o.targetConnection)!=null?d:(a=e.outputConnection)==null?void 0:a.targetConnection;p&&n.push(p),(o=e.getNextBlock())&&n.push(o),(e=e.getParent())&&n.push(e),n.push(this.workspace),this.potentialNodes=n}postDelete(){const e=this.potentialNodes;if(this.potentialNodes=null,!e)throw Error("must call preDelete first");for(const n of e){let o;if((o=this.getSourceBlockFromNode(n))==null||!o.disposed){this.setCurNode(n);return}}throw Error("no valid nodes in this.potentialNodes")}getCurNode(){return r.getFocusManager$$module$build$src$core$focus_manager().getFocusedNode()}setCurNode(e){r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e)}getFirstNode(){return this.workspace.getNavigator().getFirstChild(this.workspace)}getLastNode(){const e=this.getFirstNode();return this.getPreviousNode(e,()=>!0,!0)}};i(Le.CURSOR,Hn,Cg);var vg=class{constructor(e){this.workspace=e,this.markers=new Map,this.cursor=new Cg(this.workspace)}registerMarker(e,n){this.markers.has(e)&&this.unregisterMarker(e),this.markers.set(e,n)}unregisterMarker(e){const n=this.markers.get(e);if(n)n.dispose(),this.markers.delete(e);else throw Error("Marker with ID "+e+" does not exist. Can only unregister markers that exist.")}getCursor(){return this.cursor}getMarker(e){return this.markers.get(e)||null}setCursor(e){this.cursor=e}dispose(){const e=Object.keys(this.markers);for(let n=0,o;o=e[n];n++)this.unregisterMarker(o);this.markers.clear(),this.cursor.dispose()}};vg.LOCAL_MARKER="local_marker_1";var fo={};fo.CommentIcon=Ns,fo.Icon=du,fo.IconType=Er,fo.MutatorIcon=r.MutatorIcon$$module$build$src$core$icons$mutator_icon,fo.WarningIcon=si,fo.exceptions=kL,fo.registry=Og,r.Names$$module$build$src$core$names=class{constructor(e,n){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=n||"",this.reservedWords=new Set(e?e.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(e){this.variableMap=e}getNameForUserVariable(e){return this.variableMap?(e=this.variableMap.getVariableById(e))?e.getName():null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)}populateVariables(e){e=r.allUsedVarModels$$module$build$src$core$variables(e);for(let n=0;n<e.length;n++)this.getName(e[n].getId(),r.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(e){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(e,n){let o=e;n===r.NameType$$module$build$src$core$names.VARIABLE&&(e=this.getNameForUserVariable(e))&&(o=e),e=o.toLowerCase();const a=n===r.NameType$$module$build$src$core$names.VARIABLE||n===r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(n)||this.db.set(n,new Map);const d=this.db.get(n);return d.has(e)?a+d.get(e):(n=this.getDistinctName(o,n),d.set(e,n.substr(a.length)),n)}getUserNames(e){let n;return(e=(n=this.db.get(e))==null?void 0:n.keys())?Array.from(e):[]}getDistinctName(e,n){e=this.safeName(e);let o=null,a,d;for(;this.dbReverse.has(e+((a=o)!=null?a:""))||this.reservedWords.has(e+((d=o)!=null?d:""));)o=o?o+1:2;let p;return e+=(p=o)!=null?p:"",this.dbReverse.add(e),(n===r.NameType$$module$build$src$core$names.VARIABLE||n===r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+e}safeName(e){return e?(e=encodeURI(e.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(e[0])&&(e="my_"+e)):e=r.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",e}static equals(e,n){return e.toLowerCase()===n.toLowerCase()}},function(e){e=e.NameType||(e.NameType={}),e.DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",e.VARIABLE="VARIABLE",e.PROCEDURE="PROCEDURE"}(r.Names$$module$build$src$core$names||(r.Names$$module$build$src$core$names={})),r.NameType$$module$build$src$core$names=r.Names$$module$build$src$core$names.NameType,r.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=r.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,r.NameType$$module$build$src$core$names,r.Names$$module$build$src$core$names;var tA=class extends Map{constructor(){super()}set(e,n){return this.get(e)===n?this:(super.set(e,n),Ad(n)&&n.startPublishing(),this)}delete(e){const n=this.get(e);return e=super.delete(e),e&&(Ad(n)&&n.stopPublishing(),e)}clear(){if(this.size)for(const e of this.keys())this.delete(e)}add(e){return this.set(e.getId(),e)}getProcedures(){return[...this.values()]}},L_,on;L_="PROCEDURE",r.DEFAULT_ARG$$module$build$src$core$procedures="x",on={CATEGORY_NAME:L_,DEFAULT_ARG:r.DEFAULT_ARG$$module$build$src$core$procedures},on.ObservableProcedureMap=tA,on.allProcedures=Xc,on.findLegalName=r.findLegalName$$module$build$src$core$procedures,on.flyoutCategory=Wp,on.getCallers=Yp,on.getDefinition=r.getDefinition$$module$build$src$core$procedures,on.internalFlyoutCategory=Cd,on.isNameUsed=Vp,on.isProcedureBlock=io,on.mutateCallers=r.mutateCallers$$module$build$src$core$procedures,on.mutatorOpenListener=zp,on.rename=r.rename$$module$build$src$core$procedures;var Tw=class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(e){return Object.prototype.hasOwnProperty.call(this,e)||(this[e]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[e]}isField(e){return(e.type&this.FIELD)>=1}isHat(e){return(e.type&this.HAT)>=1}isIcon(e){return(e.type&this.ICON)>=1}isSpacer(e){return(e.type&this.SPACER)>=1}isInRowSpacer(e){return(e.type&this.IN_ROW_SPACER)>=1}isSpacerRow(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isInput(e){return(e.type&this.INPUT)>=1}isExternalInput(e){return(e.type&this.EXTERNAL_VALUE_INPUT)>=1}isInlineInput(e){return(e.type&this.INLINE_INPUT)>=1}isStatementInput(e){return(e.type&this.STATEMENT_INPUT)>=1}isPreviousConnection(e){return(e.type&this.PREVIOUS_CONNECTION)>=1}isNextConnection(e){return(e.type&this.NEXT_CONNECTION)>=1}isPreviousOrNextConnection(e){return this.isPreviousConnection(e)||this.isNextConnection(e)}isRoundCorner(e){return(e.type&this.LEFT_ROUND_CORNER)>=1||(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.LEFT_ROUND_CORNER)>=1}isRightRoundedCorner(e){return this.isRoundCorner(e)&&(e.type&this.RIGHT_ROUND_CORNER)>=1}isLeftSquareCorner(e){return(e.type&this.LEFT_SQUARE_CORNER)>=1}isRightSquareCorner(e){return(e.type&this.RIGHT_SQUARE_CORNER)>=1}isCorner(e){return(e.type&this.CORNER)>=1}isJaggedEdge(e){return(e.type&this.JAGGED_EDGE)>=1}isRow(e){return(e.type&this.ROW)>=1}isBetweenRowSpacer(e){return(e.type&this.BETWEEN_ROW_SPACER)>=1}isTopRow(e){return(e.type&this.TOP_ROW)>=1}isBottomRow(e){return(e.type&this.BOTTOM_ROW)>=1}isTopOrBottomRow(e){return this.isTopRow(e)||this.isBottomRow(e)}isInputRow(e){return(e.type&this.INPUT_ROW)>=1}},ne=new Tw,ii=class{constructor(e){this.centerline=this.xPos=this.height=this.width=0,this.constants_=e,this.type=ne.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},pu=class{constructor(e){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=e,this.type=ne.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let e=this.elements.length-1;e>=0;e--){const n=this.elements[e];if(ne.isInput(n))return n}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let e=0;e<this.elements.length;e++){const n=this.elements[e];if(ne.isInRowSpacer(n))return n}return null}getLastSpacer(){for(let e=this.elements.length-1;e>=0;e--){const n=this.elements[e];if(ne.isInRowSpacer(n))return n}return null}},Ng=class extends pu{constructor(e){super(e),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=ne.BOTTOM_ROW}hasLeftSquareCorner(e){return!!e.outputConnection||!!e.getNextBlock()}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,o=0;for(let a=0;a<this.elements.length;a++){const d=this.elements[a];n+=d.width,ne.isSpacer(d)||(ne.isNextConnection(d)?o=Math.max(o,d.height):e=Math.max(e,d.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},gl=class extends ii{constructor(e,n){super(e),this.connectionModel=n,this.type|=ne.CONNECTION,this.shape=this.constants_.shapeFor(n),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=n.isHighlighted()}},A_=class extends gl{constructor(e,n){super(e,n.connection),this.input=n,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=ne.INPUT,this.align=n.align,(this.connectedBlock=n.connection&&n.connection.targetBlock()?n.connection.targetBlock():null)?(e=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=e.width,this.connectedBlockHeight=e.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},xg=class extends A_{constructor(e,n){super(e,n),this.height=0,this.type|=ne.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},bg=class extends ii{constructor(e,n,o){super(e),this.field=n,this.parentInput=o,this.isEditable=n.EDITABLE,this.flipRtl=n.getFlipRtl(),this.type|=ne.FIELD,e=this.field.getSize(),this.height=e.height,this.width=e.width}},rA=class extends ii{constructor(e){super(e),this.type|=ne.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},nA=class extends ii{constructor(e,n){super(e),this.icon=n,this.flipRtl=!1,this.type|=ne.ICON,e=n.getSize(),this.height=e.height,this.width=e.width}},Kn=class extends ii{constructor(e,n){super(e),this.type|=ne.SPACER|ne.IN_ROW_SPACER,this.width=n,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},yg=class extends A_{constructor(e,n){super(e,n),this.type|=ne.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},kg=class extends pu{constructor(e){super(e),this.connectedBlockWidths=0,this.type|=ne.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let e=0;for(let n=0;n<this.elements.length;n++){const o=this.elements[n];this.width+=o.width,ne.isInput(o)&&(ne.isStatementInput(o)?e+=o.connectedBlockWidth:ne.isExternalInput(o)&&o.connectedBlockWidth!==0&&(e+=o.connectedBlockWidth-o.connectionWidth)),ne.isSpacer(o)||(this.height=Math.max(this.height,o.height))}this.connectedBlockWidths=e,this.widthWithConnectedBlocks=this.width+e}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},sA=class extends ii{constructor(e){super(e),this.type|=ne.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},iA=class extends gl{constructor(e,n){super(e,n),this.type|=ne.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},oA=class extends gl{constructor(e,n){super(e,n),this.connectionOffsetX=0,this.type|=ne.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},lA=class extends gl{constructor(e,n){super(e,n),this.type|=ne.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},Eu=class extends ii{constructor(e,n){super(e),this.type=(n&&n!=="left"?ne.RIGHT_ROUND_CORNER:ne.LEFT_ROUND_CORNER)|ne.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},wg=class extends pu{constructor(e,n,o){super(e),this.height=n,this.width=o,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type|=ne.SPACER|ne.BETWEEN_ROW_SPACER,this.elements=[new Kn(this.constants_,o)]}measure(){}},gu=class extends ii{constructor(e,n){super(e),this.type=(n&&n!=="left"?ne.RIGHT_SQUARE_CORNER:ne.LEFT_SQUARE_CORNER)|ne.CORNER,this.width=this.height=this.constants_.NO_PADDING}},C_=class extends A_{constructor(e,n){super(e,n),this.type|=ne.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Mg=class extends pu{constructor(e){super(e),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=ne.TOP_ROW}hasLeftSquareCorner(e){const n=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection,o=e.getPreviousBlock();return!!e.outputConnection||n||(o?o.getNextBlock()===e:!1)}hasRightSquareCorner(e){return!0}measure(){let e=0,n=0,o=0;for(let a=0;a<this.elements.length;a++){const d=this.elements[a];n+=d.width,ne.isSpacer(d)||(ne.isHat(d)?o=Math.max(o,d.ascenderHeight):e=Math.max(e,d.height))}this.width=Math.max(this.minWidth,n),this.height=Math.max(this.minHeight,e)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},v_=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Jt(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(e){this.blockStyles=Object.create(null);const n=e.blockStyles;for(const o in n)this.blockStyles[o]=this.validatedBlockStyle_(n[o]);this.setDynamicProperties_(e)}setDynamicProperties_(e){this.setFontConstants_(e),this.setComponentConstants_(e),this.ADD_START_HATS=e.startHats!==void 0?e.startHats:this.ADD_START_HATS}setFontConstants_(e){e.fontStyle&&e.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=e.fontStyle.family),e.fontStyle&&e.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=e.fontStyle.weight),e.fontStyle&&e.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=e.fontStyle.size),e=te("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=e.height,this.FIELD_TEXT_BASELINE=e.baseline}setComponentConstants_(e){this.CURSOR_COLOUR=e.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=e.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=e.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(e.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(e){const n="auto_"+e;return this.blockStyles[n]||(this.blockStyles[n]=this.createBlockStyle_(e)),{style:this.blockStyles[n],name:n}}getBlockStyle(e){return this.blockStyles[e||""]||(e&&e.startsWith("auto_")?this.getBlockStyleForColour(e.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(e){return this.validatedBlockStyle_({colourPrimary:e})}validatedBlockStyle_(e){const n={};return e&&Object.assign(n,e),e=la(n.colourPrimary||"#000"),n.colourPrimary=e.hex,n.colourSecondary=n.colourSecondary?la(n.colourSecondary).hex:this.generateSecondaryColour_(n.colourPrimary),n.colourTertiary=n.colourTertiary?la(n.colourTertiary).hex:this.generateTertiaryColour_(n.colourPrimary),n.hat=n.hat||"",n}generateSecondaryColour_(e){return Qo("#fff",e,.6)||e}generateTertiaryColour_(e){return Qo("#fff",e,.3)||e}dispose(){this.embossFilter&&ve(this.embossFilter),this.disabledPattern&&ve(this.disabledPattern),this.debugFilter&&ve(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const e=this.JAGGED_TEETH_HEIGHT,n=this.JAGGED_TEETH_WIDTH,o=da([Je(n,e/4),Je(-n*2,e/2),Je(n,e/4)]);return{height:e,width:n,path:o}}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH,o=bn("c",[Je(30,-e),Je(70,-e),Je(n,0)]);return{height:e*.75,width:n,path:o}}makePuzzleTab(){function e(p){p=p?-1:1;const v=-p;var X=o/2;const Ie=X+2.5,je=X+.5,zt=Je(-n,p*X);return X=Je(n,p*X),bn("c",[Je(0,p*Ie),Je(-n,v*je),zt])+bn("s",[Je(n,v*2.5),X])}const n=this.TAB_WIDTH,o=this.TAB_HEIGHT,a=e(!0),d=e(!1);return{type:this.SHAPES.PUZZLE,width:n,height:o,pathDown:d,pathUp:a}}makeNotch(){function e(v){return da([Je(v*a,o),Je(v*3,0),Je(v*a,-o)])}const n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,a=(n-3)/2,d=e(1),p=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:d,pathRight:p}}makeInsideCorners(){const e=this.CORNER_RADIUS,n=nr("a","0 0,0",e,Je(-e,e)),o=nr("a","0 0,0",e,Je(e,e));return{width:e,height:e,pathTop:n,pathBottom:o}}makeOutsideCorners(){const e=this.CORNER_RADIUS,n=Jt(0,e)+nr("a","0 0,1",e,Je(e,-e)),o=nr("a","0 0,1",e,Je(e,e)),a=nr("a","0 0,1",e,Je(-e,-e)),d=nr("a","0 0,1",e,Je(-e,e));return{topLeft:n,topRight:o,bottomRight:d,bottomLeft:a,rightHeight:e}}shapeFor(e){switch(e.type){case Ye.INPUT_VALUE:case Ye.OUTPUT_VALUE:return this.PUZZLE_TAB;case Ye.PREVIOUS_STATEMENT:case Ye.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(e,n,o,a){this.injectCSS_(n,o),this.defs=b(ue.DEFS,{},e),e=b(ue.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),b(ue.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},e),n=b(ue.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},e),b(ue.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},n),b(ue.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},e),b(ue.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},e),this.embossFilterId=e.id,this.embossFilter=e,e=b(ue.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),b(ue.RECT,{width:10,height:10,fill:"#aaa"},e),b(ue.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},e),this.disabledPatternId=e.id,this.disabledPattern=e,this.createDebugFilter(),a&&(a.style.setProperty("--blocklyEmbossFilter",`url(#${this.embossFilterId})`),a.style.setProperty("--blocklyDisabledPattern",`url(#${this.disabledPatternId})`),a.style.setProperty("--blocklyDebugFilter",`url(#${this.debugFilterId})`))}createDebugFilter(){if(!this.debugFilter){const e=b(ue.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),n=b(ue.FECOMPONENTTRANSFER,{result:"outBlur"},e);b(ue.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),b(ue.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},e),b(ue.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.debugFilterId=e.id,this.debugFilter=e}}injectCSS_(e,n){n=this.getCSS_(n),e="blockly-renderer-style-"+e,this.cssNode=document.getElementById(e);const o=n.join(`
`);this.cssNode?this.cssNode.firstChild.textContent=o:(n=document.createElement("style"),n.id=e,e=document.createTextNode(o),n.appendChild(e),document.head.insertBefore(n,document.head.firstChild),this.cssNode=n)}getCSS_(e){return[`${e} .blocklyText, `,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect,`,`${e} .blocklyEditableField>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text {`,"fill: #000;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${e} .blocklyEditableField:not(.blocklyEditing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${e} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${e} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${e} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${e} .blocklyReplaceable .blocklyPathLight,`,`${e} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},N_=class{constructor(e,n){this.inlinePath_=this.outlinePath_="",this.block_=e,this.info_=n,this.topLeft_=e.getRelativeToSurfaceXY(),this.constants_=n.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren,this.block_.childlessWidth=this.info_.width}drawOutline_(){this.drawTop_();for(let e=1;e<this.info_.rows.length-1;e++){const n=this.info_.rows[e];n.hasJaggedEdge?this.drawJaggedEdge_(n):n.hasStatement?this.drawStatementInput_(n):n.hasExternalInput?this.drawValueInput_(n):this.drawRightSideRow_(n)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const e=this.info_.topRow,n=e.elements;this.positionPreviousConnection_(),this.outlinePath_+=Jt(e.xPos,this.info_.startY);for(let o=0,a;a=n[o];o++)ne.isLeftRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:ne.isRightRoundedCorner(a)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:ne.isPreviousConnection(a)?this.outlinePath_+=a.shape.pathLeft:ne.isHat(a)?this.outlinePath_+=this.constants_.START_HAT.path:ne.isSpacer(a)&&(this.outlinePath_+=qe("h",a.width));this.outlinePath_+=qe("v",e.height-e.ascenderHeight)}drawJaggedEdge_(e){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+qe("v",e.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(e){const n=e.getLastInput();this.positionExternalValueConnection_(e);const o=vd(n.shape)?n.shape.pathDown(n.height):n.shape.pathDown;this.outlinePath_+=qe("H",n.xPos+n.width)+o+qe("v",e.height-n.connectionHeight)}drawStatementInput_(e){var n=e.getLastInput();if(n){var o=n.xPos+n.notchOffset+n.shape.width;n=n.shape.pathRight+qe("h",-(n.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var a=e.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=qe("H",o)+n+qe("v",a)+this.constants_.INSIDE_CORNERS.pathBottom+qe("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}}drawRightSideRow_(e){this.outlinePath_+=qe("V",e.yPos+e.height)}drawBottom_(){const e=this.info_.bottomRow,n=e.elements;this.positionNextConnection_();let o=0,a="";for(let d=n.length-1,p;p=n[d];d--)ne.isNextConnection(p)?a+=p.shape.pathRight:ne.isLeftSquareCorner(p)?a+=qe("H",e.xPos):ne.isLeftRoundedCorner(p)?a+=this.constants_.OUTSIDE_CORNERS.bottomLeft:ne.isRightRoundedCorner(p)?(a+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):ne.isSpacer(p)&&(a+=qe("h",p.width*-1));this.outlinePath_+=qe("V",e.baseline-o),this.outlinePath_+=a}drawLeft_(){var e=this.info_.outputConnection;if(this.positionOutputConnection_(),e){const n=e.connectionOffsetY+e.height;e=vd(e.shape)?e.shape.pathUp(e.height):e.shape.pathUp,this.outlinePath_+=qe("V",n)+e}this.outlinePath_+="z"}drawInternals_(){for(let e=0,n;n=this.info_.rows[e];e++)for(let o=0,a;a=n.elements[o];o++)ne.isInlineInput(a)?this.drawInlineInput_(a):(ne.isIcon(a)||ne.isField(a))&&this.layoutField_(a)}layoutField_(e){const n=e.centerline-e.height/2;let o=e.xPos;var a="";this.info_.RTL&&(o=-(o+e.width),e.flipRtl&&(o+=e.width,a="scale(-1 1)")),ne.isIcon(e)?(a=e.icon,a.setOffsetInBlock(new xe(o,n)),this.info_.isInsertionMarker&&a.hideForInsertionMarker()):(e=e.field.getSvgRoot(),e.setAttribute("transform","translate("+o+","+n+")"+a),this.info_.isInsertionMarker&&e.setAttribute("display","none"))}drawInlineInput_(e){const n=e.width,o=e.height,a=e.connectionOffsetY,d=e.connectionHeight+a;this.inlinePath_+=Dr(e.xPos+e.connectionWidth,e.centerline-o/2)+qe("v",a)+e.shape.pathDown+qe("v",o-d)+qe("h",n-e.connectionWidth)+qe("v",-o)+"z",this.positionInlineInputConnection_(e)}positionInlineInputConnection_(e){const n=e.centerline-e.height/2;if(e.connectionModel){let o=e.xPos+e.connectionWidth+e.connectionOffsetX;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,n+e.connectionOffsetY)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(n!=null&&n.connectionModel){let o=e.xPos+e.statementEdge+n.notchOffset;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,e.yPos)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let o=e.xPos+e.width;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,e.yPos)}}positionPreviousConnection_(){const e=this.info_.topRow;if(e.connection){const n=e.xPos+e.notchOffset;e.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-n:n,0)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,o=n.xPos;n.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,e.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const e=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-e:e,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const e of this.info_.rows)for(const n of e.elements){if(!(n instanceof gl))continue;const o=this.drawConnectionHighlightPath(n);o&&(o.style.display=n.highlighted?"":"none")}}drawConnectionHighlightPath(e){const n=e.connectionModel;e=n.type===Ye.INPUT_VALUE||n.type===Ye.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(e):this.getStatementConnectionHighlightPath(e);const o=n.getSourceBlock();let a,d;return(d=(a=o.pathObject).addConnectionHighlight)==null?void 0:d.call(a,n,e,n.getOffsetInBlock(),o.RTL)}getExpressionConnectionHighlightPath(e){let n="";return vd(e.shape)?n=e.shape.pathDown(e.height):HS(e.shape)&&(n=e.shape.pathDown),e=this.constants_.TAB_OFFSET_FROM_TOP,Jt(0,-e)+qe("v",e)+n+qe("v",e)}getStatementConnectionHighlightPath(e){if(!GS(e.shape))throw Error("Statement connections should have notch shapes");const n=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Jt(-n,0)+qe("h",n)+e.shape.pathLeft+qe("h",n)}},mu=class{constructor(e,n){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=e,this.block_=n,this.constants_=this.renderer_.getConstants(),this.outputConnection=n.outputConnection?new oA(this.constants_,n.outputConnection):null,this.isInline=n.getInputsInline()&&!n.isCollapsed(),this.isCollapsed=n.isCollapsed(),this.isInsertionMarker=n.isInsertionMarker(),this.RTL=n.RTL,this.topRow=new Mg(this.constants_),this.bottomRow=new Ng(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let e=new kg(this.constants_);this.inputRows.push(e);var n=this.block_.getIcons();for(let o=0,a;a=n[o];o++){const d=new nA(this.constants_,a);this.isCollapsed&&!a.isShownWhenCollapsed()||e.elements.push(d)}n=void 0;for(let o=0,a;a=this.block_.inputList[o];o++)if(a.isVisible()){this.shouldStartNewRow_(a,n)&&(this.rows.push(e),e=new kg(this.constants_),this.inputRows.push(e));for(let d=0,p;p=a.fieldRow[d];d++)e.elements.push(new bg(this.constants_,p,a));this.addInput_(a,e),n=a}this.isCollapsed&&(e.hasJaggedEdge=!0,e.elements.push(new sA(this.constants_))),(e.elements.length||e.hasDummyInput)&&this.rows.push(e),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var e=!!this.block_.previousConnection;const n=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!e;let o=this.topRow.hasLeftSquareCorner(this.block_)?gu:Eu;this.topRow.elements.push(new o(this.constants_)),n?(e=new rA(this.constants_),this.topRow.elements.push(e)):e&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new lA(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Yn&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?gu:Eu,this.topRow.elements.push(new o(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Yn?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new gu(this.constants_)):this.bottomRow.elements.push(new Eu(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new iA(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new gu(this.constants_,"right")):this.bottomRow.elements.push(new Eu(this.constants_,"right"))}addInput_(e,n){this.isInline&&e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new yg(this.constants_,e)),n.hasInlineInput=!0):e instanceof Yn?(n.elements.push(new C_(this.constants_,e)),n.hasStatement=!0):e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new xg(this.constants_,e)),n.hasExternalInput=!0):(e instanceof ni||e instanceof Di)&&(n.minHeight=Math.max(n.minHeight,e.getSourceBlock()&&e.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),n.align===null&&(n.align=e.align)}shouldStartNewRow_(e,n){return n?n instanceof Di||e instanceof Yn||n instanceof Yn?!0:e instanceof r.ValueInput$$module$build$src$core$inputs$value_input||e instanceof ni||n instanceof r.ValueInput$$module$build$src$core$inputs$value_input?!this.isInline:!1:!1}addElemSpacing_(){for(let e=0,n;n=this.rows[e];e++){const o=n.elements;if(n.elements=[],n.startsWithElemSpacer()&&n.elements.push(new Kn(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(let a=0;a<o.length-1;a++){n.elements.push(o[a]);const d=this.getInRowSpacing_(o[a],o[a+1]);n.elements.push(new Kn(this.constants_,d))}n.elements.push(o[o.length-1]),n.endsWithElemSpacer()&&n.elements.push(new Kn(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}}getInRowSpacing_(e,n){if(!e&&n&&ne.isStatementInput(n))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(e&&ne.isInput(e)&&!n){if(ne.isExternalInput(e))return this.constants_.NO_PADDING;if(ne.isInlineInput(e))return this.constants_.LARGE_PADDING;if(ne.isStatementInput(e))return this.constants_.NO_PADDING}return e&&ne.isLeftSquareCorner(e)&&n&&(ne.isPreviousConnection(n)||ne.isNextConnection(n))?n.notchOffset:e&&ne.isLeftRoundedCorner(e)&&n&&(ne.isPreviousConnection(n)||ne.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&ne.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING}computeBounds_(){let e=0,n=0,o=0;for(let d=0,p;p=this.rows[d];d++){if(p.measure(),n=Math.max(n,p.width),p.hasStatement){var a=p.getLastInput();let v,X;a=p.width-((X=(v=a)==null?void 0:v.width)!=null?X:0),e=Math.max(e,a)}o=Math.max(o,p.widthWithConnectedBlocks)}this.statementEdge=e,this.width=n;for(let d=0,p;p=this.rows[d];d++)p.hasStatement&&(p.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(n,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let n=0,o;o=this.rows[n];n++)if(o.hasStatement)this.alignStatementRow_(o);else{var e=o.width;e=this.getDesiredRowWidth_(o)-e,e>0&&this.addAlignmentPadding_(o,e),ne.isTopOrBottomRow(o)&&(o.widthWithConnectedBlocks=o.width)}}getDesiredRowWidth_(e){return this.width-this.startX}addAlignmentPadding_(e,n){const o=e.getFirstSpacer(),a=e.getLastSpacer();if((e.hasExternalInput||e.hasStatement)&&(e.widthWithConnectedBlocks+=n),e.align===r.Align$$module$build$src$core$inputs$align.LEFT&&a)a.width+=n;else if(e.align===r.Align$$module$build$src$core$inputs$align.CENTRE&&o&&a)o.width+=n/2,a.width+=n/2;else if(e.align===r.Align$$module$build$src$core$inputs$align.RIGHT&&o)o.width+=n;else if(a)a.width+=n;else return;e.width+=n}alignStatementRow_(e){const n=e.getLastInput();if(n){var o=e.width-n.width,a=this.statementEdge;o=a-o,o>0&&this.addAlignmentPadding_(e,o),o=e.width,a=this.getDesiredRowWidth_(e),n.width+=a-o,n.height=Math.max(n.height,e.height),e.width+=a-o,e.widthWithConnectedBlocks=Math.max(e.width,this.statementEdge+e.connectedBlockWidths)}}addRowSpacing_(){const e=this.rows;this.rows=[];for(let n=0;n<e.length;n++)this.rows.push(e[n]),n!==e.length-1&&this.rows.push(this.makeSpacerRow_(e[n],e[n+1]))}makeSpacerRow_(e,n){var o=this.getSpacerRowHeight_(e,n);const a=this.getSpacerRowWidth_(e,n);return o=new wg(this.constants_,o,a),e.hasStatement&&(o.followsStatement=!0),n.hasStatement&&(o.precedesStatement=!0),o}getSpacerRowWidth_(e,n){return this.width-this.startX}getSpacerRowHeight_(e,n){return this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){return ne.isSpacer(n)?e.yPos+n.height/2:ne.isBottomRow(e)?(e=e.yPos+e.height-e.descenderHeight,ne.isNextConnection(n)?e+n.height/2:e-n.height/2):ne.isTopRow(e)?ne.isHat(n)?e.capline-n.height/2:e.capline+n.height/2:e.yPos+e.height/2}recordElemPositions_(e){let n=e.xPos;for(let o=0,a;a=e.elements[o];o++)ne.isSpacer(a)&&(a.height=e.height),a.xPos=n,a.centerline=this.getElemCenterline_(e,a),n+=a.width}finalize_(){let e=0,n=0;for(let o=0,a;a=this.rows[o];o++)a.yPos=n,a.xPos=this.startX,n+=a.height,e=Math.max(e,a.widthWithConnectedBlocks),this.recordElemPositions_(a);if(this.outputConnection&&this.block_.nextConnection){const o=this.block_.nextConnection.targetBlock();o&&(e=Math.max(e,o.getHeightWidth().width))}this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline,this.bottomRow.baseline=n-this.bottomRow.descenderHeight}getMeasureableForConnection(e){let n;if(((n=this.outputConnection)==null?void 0:n.connectionModel)===e)return this.outputConnection;for(const o of this.rows)for(const a of o.elements)if(a instanceof gl&&a.connectionModel===e)return a;return null}},x_=class{constructor(e,n,o){this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=o,this.style=n,this.svgRoot=e,this.svgPath=b(ue.PATH,{class:"blocklyPath"},this.svgRoot),this.setClass_("blocklyBlock",!0)}setPath(e){this.svgPath.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}applyColour(e){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(e.isShadow()),this.updateDisabled_(!e.isEnabled()||e.getInheritedDisabled())}setStyle(e){this.style=e}setClass_(e,n){e&&(n?_e(this.svgRoot,e):ke(this.svgRoot,e))}updateHighlighted(e){e?this.setClass_("blocklyHighlighted",!0):this.setClass_("blocklyHighlighted",!1)}updateShadow_(e){e?(this.setClass_("blocklyShadow",!0),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)):this.setClass_("blocklyShadow",!1)}updateDisabled_(e){this.setClass_("blocklyDisabled",e),this.setClass_("blocklyDisabledPattern",e)}updateSelected(e){this.setClass_("blocklySelected",e)}updateDraggingDelete(e){this.setClass_("blocklyDraggingDelete",e)}updateInsertionMarker(e){this.setClass_("blocklyInsertionMarker",e)}updateMovable(e){this.setClass_("blocklyDraggable",e)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,n){}addConnectionHighlight(e,n,o,a){return o=`translate(${o.x}, ${o.y})`+(a?" scale(-1 1)":""),(a=this.connectionHighlights.get(e))?(a.setAttribute("d",n),a.setAttribute("transform",o),a):(n=b(ue.PATH,{id:e.id,class:"blocklyHighlightedConnectionPath",style:"display: none;",d:n,transform:o},this.svgRoot),this.connectionHighlights.set(e,n),n)}removeConnectionHighlight(e){const n=this.connectionHighlights.get(e);n&&(ve(n),this.connectionHighlights.delete(e))}},b_=class{constructor(e){this.overrides=null,this.name=e}getClassName(){return this.name+"-renderer"}init(e,n){this.constants_=this.makeConstants_(),n&&(this.overrides=n,Object.assign(this.constants_,n)),this.constants_.setTheme(e),this.constants_.init()}createDom(e,n,o){this.constants_.createDom(e,this.name+"-"+n.name,"."+this.getClassName()+"."+n.getClassName(),o)}refreshDom(e,n,o){const a=this.getConstants();a.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=a.randomIdentifier,this.constants_.setTheme(n),this.constants_.init(),this.createDom(e,n,o)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new v_}makeRenderInfo_(e){return new mu(this,e)}makeDrawer_(e,n){return new N_(e,n)}makePathObject(e,n){return new x_(e,n,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(e){return!0}orphanCanConnectAtEnd(e,n,o){return!!Tt.getConnectionForOrphanedConnection(e,o===Ye.OUTPUT_VALUE?n.outputConnection:n.previousConnection)}render(e){const n=this.makeRenderInfo_(e);n.measure(),this.makeDrawer_(e,n).draw()}},Rt={};Rt.BottomRow=Ng,Rt.Connection=gl,Rt.ConstantProvider=v_,Rt.Drawer=N_,Rt.ExternalValueInput=xg,Rt.Field=bg,Rt.Hat=rA,Rt.Icon=nA,Rt.InRowSpacer=Kn,Rt.InlineInput=yg,Rt.InputConnection=A_,Rt.InputRow=kg,Rt.JaggedEdge=sA,Rt.Measurable=ii,Rt.NextConnection=iA,Rt.OutputConnection=oA,Rt.PathObject=x_,Rt.PreviousConnection=lA,Rt.RenderInfo=mu,Rt.Renderer=b_,Rt.RoundCorner=Eu,Rt.Row=pu,Rt.SpacerRow=wg,Rt.SquareCorner=gu,Rt.StatementInput=C_,Rt.TopRow=Mg,Rt.Types=ne,Rt.init=Kp,Rt.register=zc,Rt.unregister=VS;var aA=class{constructor(e,n){this.workspace=e,this.theme=n,this.subscribedWorkspaces=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(e){var n=this.theme;this.theme=e,(e=this.workspace.getInjectionDiv())&&(n&&(n=n.getClassName())&&ke(e,n),(n=this.theme.getClassName())&&_e(e,n));for(let o=0,a;a=this.subscribedWorkspaces[o];o++)a.refreshTheme();for(const[o,a]of this.componentDB)for(const d of a){e=d.element,n=d.propertyName;const p=this.theme&&this.theme.getComponentStyle(o);e.style.setProperty(n,p||"")}for(const o of this.subscribedWorkspaces)o.hideChaff()}subscribeWorkspace(e){this.subscribedWorkspaces.push(e)}unsubscribeWorkspace(e){if(!Ae(this.subscribedWorkspaces,e))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(e,n,o){this.componentDB.has(n)||this.componentDB.set(n,[]),this.componentDB.get(n).push({element:e,propertyName:o}),n=this.theme&&this.theme.getComponentStyle(n),e.style.setProperty(o,n||"")}unsubscribe(e){if(e)for(const[n,o]of this.componentDB){for(let a=o.length-1;a>=0;a--)o[a].element===e&&o.splice(a,1);o.length||this.componentDB.delete(n)}}dispose(){this.subscribedWorkspaces.length=0,this.componentDB.clear()}},Dg="VARIABLE_DYNAMIC",To={CATEGORY_NAME:Dg};To.flyoutCategory=jp,To.flyoutCategoryBlocks=Jp,To.internalFlyoutCategory=yd,To.onCreateVariableButtonClick_Colour=bd,To.onCreateVariableButtonClick_Number=xd,To.onCreateVariableButtonClick_String=Nd;var cA=class{canConnect(e,n,o,a){return this.canConnectWithReason(e,n,o,a)===Tt.CAN_CONNECT}canConnectWithReason(e,n,o,a){const d=this.doSafetyChecks(e,n);return d!==Tt.CAN_CONNECT?d:this.doTypeChecks(e,n)?o&&!this.doDragChecks(e,n,a||0)?Tt.REASON_DRAG_CHECKS_FAILED:Tt.CAN_CONNECT:Tt.REASON_CHECKS_FAILED}getErrorMessage(e,n,o){switch(e){case Tt.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Tt.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Tt.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Tt.REASON_TARGET_NULL:return"Target connection is null.";case Tt.REASON_CHECKS_FAILED:return"Connection checks failed. "+(n+" expected "+n.getCheck()+", found "+o.getCheck());case Tt.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Tt.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Tt.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(e,n){if(!e||!n)return Tt.REASON_TARGET_NULL;let o,a,d;return e.isSuperior()?(o=e.getSourceBlock(),a=n.getSourceBlock(),d=n):(a=e.getSourceBlock(),o=n.getSourceBlock(),d=e,e=n),o===a?Tt.REASON_SELF_CONNECTION:d.type!==El[e.type]?Tt.REASON_WRONG_TYPE:o.workspace!==a.workspace?Tt.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!a.isShadow()?Tt.REASON_SHADOW_PARENT:d.type===Ye.OUTPUT_VALUE&&a.previousConnection&&a.previousConnection.isConnected()||d.type===Ye.PREVIOUS_STATEMENT&&a.outputConnection&&a.outputConnection.isConnected()?Tt.REASON_PREVIOUS_AND_OUTPUT:Tt.CAN_CONNECT}doTypeChecks(e,n){if(e=e.getCheck(),n=n.getCheck(),!e||!n)return!0;for(let o=0;o<e.length;o++)if(n.includes(e[o]))return!0;return!1}doDragChecks(e,n,o){if(e.distanceFrom(n)>o||n.getSourceBlock().isInsertionMarker())return!1;switch(n.type){case Ye.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(e,n);case Ye.OUTPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isInsertionMarker()||e.isConnected())return!1;break;case Ye.INPUT_VALUE:if(n.isConnected()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;case Ye.NEXT_STATEMENT:if(n.isConnected()&&!e.getSourceBlock().nextConnection&&!n.targetBlock().isShadow()&&n.targetBlock().nextConnection||n.targetBlock()&&!n.targetBlock().isMovable()&&!n.targetBlock().isShadow())return!1;break;default:return!1}return!Qc.includes(n)}canConnectToPrevious_(e,n){return e.targetConnection||Qc.includes(n)?!1:n.targetConnection?(e=n.targetBlock(),e.isInsertionMarker()?!e.getPreviousBlock():!1):!0}};i(Le.CONNECTION_CHECKER,Hn,cA);var ka=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(e){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new tA,this.readOnly=!1,this.potentialVariableMap=null,this.id=re(),ot(this),this.options=e||new ri({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(E(Le.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new(this.getVariableMapClass())(this),this.setIsReadOnly(this.options.readOnly)}dispose(){this.listeners.length=0,this.clear(),Mt(this)}sortObjects(e,n){const o=a=>({getBoundingRectangle:()=>{const d=a.getRelativeToSurfaceXY();return new it(d.y,d.y,d.x,d.x)},moveBy:()=>{}});return this.sortByOrigin(o(e),o(n))}sortByOrigin(e,n){const o=Math.sin(ld(ka.SCAN_ANGLE))*(this.RTL?-1:1);return e=e.getBoundingRectangle().getOrigin(),n=n.getBoundingRectangle().getOrigin(),e.y+o*e.x-(n.y+o*n.x)}addTopBlock(e){this.topBlocks.push(e)}removeTopBlock(e){if(!Ae(this.topBlocks,e))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(e=!1){const n=[].concat(this.topBlocks);return e&&n.length>1&&n.sort(this.sortObjects.bind(this)),n}addTypedBlock(e){this.typedBlocksDB.has(e.type)||this.typedBlocksDB.set(e.type,[]),this.typedBlocksDB.get(e.type).push(e)}removeTypedBlock(e){Ae(this.typedBlocksDB.get(e.type),e),this.typedBlocksDB.get(e.type).length||this.typedBlocksDB.delete(e.type)}getBlocksByType(e,n=!1){return this.typedBlocksDB.has(e)?(e=this.typedBlocksDB.get(e).slice(0),n&&e&&e.length>1&&e.sort(this.sortObjects.bind(this)),e.filter(o=>!o.isInsertionMarker())):[]}addTopComment(e){this.topComments.push(e),this.commentDB.has(e.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+e.id+'"'),this.commentDB.set(e.id,e)}removeTopComment(e){if(!Ae(this.topComments,e))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(e.id)}getTopComments(e=!1){const n=[].concat(this.topComments);return e&&n.length>1&&n.sort(this.sortObjects.bind(this)),n}getAllBlocks(e=!1){if(e){var n=this.getTopBlocks(!0);e=[];for(let o=0;o<n.length;o++)e.push(...n[o].getDescendants(!0))}else for(e=this.getTopBlocks(!1),n=0;n<e.length;n++)e.push(...e[n].getChildren(!1));return e.filter(o=>!o.isInsertionMarker())}clear(){this.isClearing=!0;try{const e=r.getGroup$$module$build$src$core$events$utils();for(e||r.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();r.setGroup$$module$build$src$core$events$utils(e),this.isFlyout||this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(e,n){Mr("Blockly.Workspace.renameVariableById","v12","v13","Blockly.Workspace.getVariableMap().renameVariable"),(e=this.variableMap.getVariableById(e))&&this.variableMap.renameVariable(e,n)}createVariable(e,n,o){return Mr("Blockly.Workspace.createVariable","v12","v13","Blockly.Workspace.getVariableMap().createVariable"),this.variableMap.createVariable(e,n??void 0,o??void 0)}getVariableUsesById(e){return Mr("Blockly.Workspace.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),na(this,e)}deleteVariableById(e){Mr("Blockly.Workspace.deleteVariableById","v12","v13","Blockly.Workspace.getVariableMap().deleteVariable");const n=this.variableMap.getVariableById(e);n?r.deleteVariable$$module$build$src$core$variables(this,n):console.warn(`Can't delete non-existent variable: ${e}`)}getVariable(e,n){return Mr("Blockly.Workspace.getVariable","v12","v13","Blockly.Workspace.getVariableMap().getVariable"),this.variableMap.getVariable(e,n)}getVariableById(e){return Mr("Blockly.Workspace.getVariableById","v12","v13","Blockly.Workspace.getVariableMap().getVariableById"),this.variableMap.getVariableById(e)}getVariablesOfType(e){return Mr("Blockly.Workspace.getVariablesOfType","v12","v13","Blockly.Workspace.getVariableMap().getVariablesOfType"),this.variableMap.getVariablesOfType(e??"")}getAllVariables(){return Mr("Blockly.Workspace.getAllVariables","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables()}getAllVariableNames(){return Mr("Blockly.Workspace.getAllVariableNames","v12","v13","Blockly.Workspace.getVariableMap().getAllVariables"),this.variableMap.getAllVariables().map(e=>e.getName())}getWidth(){return 0}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(e){return this.options.maxInstances?(this.options.maxInstances[e]!==void 0?this.options.maxInstances[e]:1/0)-this.getBlocksByType(e,!1).length:1/0}isCapacityAvailable(e){if(!this.hasBlockLimits())return!0;let n=0;for(const o in e){if(e[o]>this.remainingCapacityOfType(o))return!1;n+=e[o]}return!(n>this.remainingCapacity())}hasBlockLimits(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(e){var n=e?this.redoStack_:this.undoStack_,o=e?this.undoStack_:this.redoStack_;const a=n.pop();if(a){for(var d=[a];n.length&&a.group&&a.group===n[n.length-1].group;){const p=n.pop();p&&d.push(p)}for(n=0;n<d.length;n++)o.push(d[n]);r.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(o=0;o<d.length;o++)d[o].run(e)}finally{r.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,q()}addChangeListener(e){return this.listeners.push(e),e}removeChangeListener(e){Ae(this.listeners,e)}fireChangeListener(e){if(e.recordUndo)for(this.undoStack_.push(e),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&this.MAX_UNDO>=0;)this.undoStack_.shift();for(let n=0;n<this.listeners.length;n++)(0,this.listeners[n])(e)}getBlockById(e){return this.blockDB.get(e)||null}setBlockById(e,n){this.blockDB.set(e,n)}removeBlockById(e){this.blockDB.delete(e)}getCommentById(e){let n;return(n=this.commentDB.get(e))!=null?n:null}allInputsFilled(e){const n=this.getTopBlocks(!1);for(let o=0;o<n.length;o++)if(!n[o].allInputsFilled(e))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new(this.getVariableMapClass())(this,!0)}getVariableMap(){return this.variableMap}setVariableMap(e){this.variableMap=e}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let e=null;const n=this.options.parentWorkspace;return this.isFlyout?n&&n.options&&(e=n.options.parentWorkspace):n&&(e=n),e}static getById(e){return Ot(e)}static getAll(){return et()}getVariableMapClass(){const e=E(Le.VARIABLE_MAP,this.options,!0);if(!e)throw Error("No variable map is registered.");return e}isReadOnly(){return this.readOnly}setIsReadOnly(e){this.readOnly=e,this.options.readOnly=e}};ka.SCAN_ANGLE=3;var pw=100,uA=class{constructor(e){this.parentWorkspace=e,this.sounds=new Map,this.lastSound=null,this.muted=!1}dispose(){this.sounds.clear()}load(e,n){if(e.length){try{var o=new globalThis.Audio}catch{return}for(let d=0;d<e.length;d++){const p=e[d],v=p.match(/\.(\w+)$/);if(v&&o.canPlayType("audio/"+v[1])){var a=new globalThis.Audio(p);break}}a&&this.sounds.set(n,a)}}preload(){for(const e of this.sounds.values()){e.volume=.01;const n=e.play();if(n!==void 0?n.then(e.pause).catch(function(){}):e.pause(),Vd||mR)break}}play(e,n){if(!this.muted){var o=this.sounds.get(e);o?(e=new Date,this.lastSound!==null&&e.getTime()-this.lastSound.getTime()<pw||(this.lastSound=e,o=Vd||bE?o:o.cloneNode(),o.volume=n===void 0?1:n,o.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(e,n)}}setMuted(e){this.muted=e}getMuted(){return this.muted}},Ew=20,ln=class extends ka{constructor(e){super(e),this.resizeHandlerWrapper=null,this.resizesEnabled=this.visible=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardMoveInProgress=this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.navigator=new Rg,this.metricsManager=new(E(Le.METRICS_MANAGER,e,!0))(this),this.getMetrics=e.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=e.setMetrics||ln.setTopLevelWorkspaceMetrics,this.componentManager=new Ht,this.connectionDBList=va.init(this.connectionChecker),this.audioManager=new uA(e.parentWorkspace),this.grid=this.options.gridPattern?new Ag(this.options.gridPattern,e.gridOptions):null,this.markerManager=new vg(this),or&&rd&&this.registerToolboxCategoryCallback(ZE,rd),To&&yd&&this.registerToolboxCategoryCallback(Dg,yd),on&&Cd&&(this.registerToolboxCategoryCallback(L_,Cd),this.addChangeListener(zp)),this.addChangeListener(this.variableChangeCallback.bind(this)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new aA(this,this.options.theme||f_),this.themeManager_.subscribeWorkspace(this);let n;this.renderer=Kp(this.options.renderer||"geras",this.getTheme(),(n=this.options.rendererOverrides)!=null?n:void 0),this.cachedParentSvgSize=new lt(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(e){this.metricsManager=e,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}getMarker(e){return this.markerManager.getMarker(e)}getCursor(){return this.markerManager.getCursor()}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(e){e||(e=f_),this.themeManager_.setTheme(e)}refreshTheme(){if(this.svgGroup_){var e=this.options.parentWorkspace===null;this.renderer.refreshDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0)}this.updateBlockStyles(this.getAllBlocks(!1).filter(n=>!!n.getStyleName())),this.refreshToolboxSelection(),this.toolbox&&this.toolbox.refreshTheme(),this.isVisible()&&this.setVisible(!0),e=new(ce(de.THEME_CHANGE))(this.getTheme().name,this.id),Y(e)}updateBlockStyles(e){for(let n=0,o;o=e[n];n++){const a=o.getStyleName();a&&o.setStyle(a)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const e=this.getParentSvg().getScreenCTM();e&&(this.inverseScreenCTM=e.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.visible}getSvgXY(e){let n=0,o=0,a=1;(this.getCanvas().contains(e)||this.getBubbleCanvas().contains(e))&&(a=this.scale);do{const d=P(e);(e===this.getCanvas()||e===this.getBubbleCanvas())&&(a=1),n+=d.x*a,o+=d.y*a,e=e.parentNode}while(e&&e!==this.getParentSvg()&&e!==this.getInjectionDiv());return new xe(n,o)}getCachedParentSvgSize(){const e=this.cachedParentSvgSize;return new lt(e.width,e.height)}getOriginOffsetInPixels(){return F(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let e=this.svgGroup_;for(;e;){if((" "+(e.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=e;break}e=e.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(e){this.resizeHandlerWrapper=e}createDom(e,n){return this.injectionDiv||(this.injectionDiv=n??null),this.svgGroup_=b(ue.G,{class:"blocklyWorkspace",id:this.id}),n&&_r(this.svgGroup_,ir.LABEL,r.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),e&&(this.svgBackground_=b(ue.RECT,{height:"100%",width:"100%",class:e},this.svgGroup_),e==="blocklyMainBackground"&&this.grid?this.svgBackground_.style.fill="var(--blocklyGridPattern)":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new fw(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(A(this.svgGroup_,"pointerdown",this,this.onMouseDown,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),A(this.svgGroup_,"wheel",this,this.onMouseWheel)),this.options.hasCategories&&(this.toolbox=new(E(Le.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(e=E(Le.CURSOR,this.options))&&this.markerManager.setCursor(new e(this)),e=this.options.parentWorkspace===null,this.renderer.createDom(this.svgGroup_,this.getTheme(),e?this.getInjectionDiv():void 0),r.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!!this.injectionDiv||this.isFlyout),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&ve(this.svgGroup_),this.toolbox&&(this.toolbox.dispose(),this.toolbox=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const e=this.getParentSvg();e&&e.parentNode&&ve(e.parentNode)}this.resizeHandlerWrapper&&(k(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null),r.getFocusManager$$module$build$src$core$focus_manager().isRegistered(this)&&r.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}addTrashcan(){this.trashcan=ln.newTrashcan(this);const e=this.trashcan.createDom();this.svgGroup_.insertBefore(e,this.getCanvas())}static newTrashcan(e){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new BR(this);const e=this.zoomControls_.createDom();this.svgGroup_.appendChild(e)}copyOptionsForFlyout(){return new ri({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,plugins:this.options.plugins,modalInputs:this.options.modalInputs,move:{scrollbars:!0}})}addFlyout(e){const n=this.copyOptionsForFlyout();return n.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(E(Le.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(n):new(E(Le.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(n),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(e)}getFlyout(e){return this.flyout||e?this.flyout:this.toolbox?this.toolbox.getFlyout():null}getToolbox(){return this.toolbox}updateScreenCalculations(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox?this.toolbox.position():this.flyout&&this.flyout.position();const e=this.componentManager.getComponents(Ht.Capability.POSITIONABLE,!0),n=this.getMetricsManager().getUiMetrics(),o=[];for(let a=0,d;d=e[a];a++){d.position(n,o);const p=d.getBoundingRectangle();p&&o.push(p)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations()}updateScreenCalculationsIfScrolled(){const e=K();xe.equals(this.lastRecordedPageScroll,e)||(this.lastRecordedPageScroll=e,this.updateScreenCalculations())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(e,n){const o=this.getParentSvg();e!=null&&(this.cachedParentSvgSize.width=e,o.setAttribute("data-cached-width",`${e}`)),n!=null&&(this.cachedParentSvgSize.height=n,o.setAttribute("data-cached-height",`${n}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let e=this.svgGroup_;for(;e;){if(e.tagName==="svg"){this.cachedParentSvg=e;break}e=e.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(he()){var e=this.scale,n=-this.scrollY,o=-this.scrollX;if(!(e===this.oldScale&&Math.abs(n-this.oldTop)<1&&Math.abs(o-this.oldLeft)<1)){var a=new(ce(de.VIEWPORT_CHANGE))(n,o,e,this.id,this.oldScale);this.oldScale=e,this.oldTop=n,this.oldLeft=o,Y(a)}}}translate(e,n){let o;(o=this.layerManager)==null||o.translateLayers(new xe(e,n),this.scale);let a;(a=this.grid)==null||a.moveTo(e,n),this.maybeFireViewportChangeEvent()}getWidth(){const e=this.getMetrics();return e?e.viewWidth/this.scale:0}setVisible(e){this.visible=e,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(e),this.getFlyout()&&this.getFlyout().setContainerVisible(e),this.getParentSvg().style.display=e?"block":"none",this.toolbox&&this.toolbox.setVisible(e),e||this.hideChaff(!0))}render(){const e=this.getAllBlocks(!1);for(let n=e.length-1;n>=0;n--)e[n].queueRender();this.getTopBlocks().flatMap(n=>n.getDescendants(!1)).filter(n=>n.isInsertionMarker()).forEach(n=>n.queueRender())}highlightBlock(e,n){if(n===void 0){for(let o=0,a;a=this.highlightedBlocks[o];o++)a.setHighlighted(!1);this.highlightedBlocks.length=0}(e=e?this.getBlockById(e):null)&&((n=n===void 0||n)?this.highlightedBlocks.includes(e)||this.highlightedBlocks.push(e):Ae(this.highlightedBlocks,e),e.setHighlighted(n))}variableChangeCallback(e){switch(e.type){case de.VAR_CREATE:case de.VAR_DELETE:case de.VAR_RENAME:case de.VAR_TYPE_CHANGE:this.refreshToolboxSelection()}}refreshToolboxSelection(){const e=this.isFlyout?this.targetWorkspace:this;e&&!e.currentGesture_&&e.toolbox&&e.toolbox.getFlyout()&&e.toolbox.refreshSelection()}recordDragTargets(){const e=this.componentManager.getComponents(Ht.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let n=0,o;o=e[n];n++){const a=o.getClientRect();a&&this.dragTargetAreas.push({component:o,clientRect:a})}}newBlock(e,n){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(e){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(e){for(let n=0,o;o=this.dragTargetAreas[n];n++)if(o.clientRect.contains(e.clientX,e.clientY))return o.component;return null}onMouseDown(e){const n=this.getGesture(e);n&&n.handleWsStart(e,this)}startDrag(e,n){gd(this,e,n)}moveDrag(e){return md(this,e)}setKeyboardMoveInProgress(e){this.keyboardMoveInProgress=e}isDragging(){return this.keyboardMoveInProgress||this.currentGesture_!==null&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const e=!!this.scrollbar;return this.isMovable()&&(!e||e&&this.scrollbar.canScrollVertically())}onMouseWheel(e){if(R_.inProgress())e.preventDefault(),e.stopPropagation();else{var n=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(n||o){var a=U(e);if(yE)var d=e.metaKey;n&&(e.ctrlKey||d||!o)?(a=-a.y/50,n=x(e,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(n.x,n.y,a)):(n=this.scrollX-a.x,o=this.scrollY-a.y,e.shiftKey&&!a.x&&(n=this.scrollX-a.y,o=this.scrollY),this.scroll(n,o)),e.preventDefault()}}}getBlocksBoundingBox(){const e=this.getTopBoundedElements();if(!e.length)return new it(0,0,0,0);const n=e[0].getBoundingRectangle();for(let a=1;a<e.length;a++){var o=e[a];o.isInsertionMarker&&o.isInsertionMarker()||(o=o.getBoundingRectangle(),o.top<n.top&&(n.top=o.top),o.bottom>n.bottom&&(n.bottom=o.bottom),o.left<n.left&&(n.left=o.left),o.right>n.right&&(n.right=o.right))}return n}cleanUp(){this.setResizesEnabled(!1);const e=r.getGroup$$module$build$src$core$events$utils();e||r.setGroup$$module$build$src$core$events$utils(!0);var n=this.getTopBlocks(!0),o=n.filter(v=>v.isMovable());const a=n.filter(v=>!v.isMovable()).map(v=>v.getBoundingRectangle());n=function(v){for(const X of a)if(v.intersects(X))return X;return null};var d=0;const p=this.renderer.getConstants().MIN_BLOCK_HEIGHT;for(const v of o){for(o=v.getBoundingRectangle(),v.moveBy(-o.left,d-o.top,["cleanup"]),v.snapToGrid(),o=v.getBoundingRectangle(),d=n(o);d!=null;)d=d.top+d.getHeight()+p,v.moveBy(0,d-o.top,["cleanup"]),v.snapToGrid(),o=v.getBoundingRectangle(),d=n(o);d=v.getRelativeToSurfaceXY().y+v.getHeightWidth().height+p}r.setGroup$$module$build$src$core$events$utils(e),this.setResizesEnabled(!0)}showContextMenu(e){if(!this.isReadOnly()&&!this.isFlyout){var n=ht.registry.getContextMenuOptions({workspace:this,focusedNode:this},e);this.configureContextMenu&&this.configureContextMenu(n,e);var o=e instanceof PointerEvent?new xe(e.clientX,e.clientY):Se(this,new xe(5,5));ua(e,n,this.RTL,this,o)}}updateToolbox(e){if(e=De(e)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Ue(e)){if(!this.toolbox)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=e,this.toolbox.render(e)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=e,this.flyout.show(e)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(D(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(e,n,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);const a=this.scale*o;if(this.scale!==a){a>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:a<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var d=this.getCanvas().getCTM(),p=this.getParentSvg().createSVGPoint();p.x=e,p.y=n,p=p.matrixTransform(d.inverse()),e=p.x,n=p.y,d=d.translate(e*(1-o),n*(1-o)).scale(o),this.scrollX=d.e,this.scrollY=d.f,this.setScale(a)}}zoomCenter(e){var n=this.getMetrics();let o;this.flyout?(o=n.svgWidth?n.svgWidth/2:0,n=n.svgHeight?n.svgHeight/2:0):(o=n.viewWidth/2+n.absoluteLeft,n=n.viewHeight/2+n.absoluteTop),this.zoom(o,n,e)}zoomToFit(){if(this.isMovable()){var e=this.getMetrics(),n=e.viewWidth;e=e.viewHeight;var o=this.getBlocksBoundingBox(),a=Ew*2,d=o.right-o.left+a;if(o=o.bottom-o.top+a,d){this.flyout&&(this.horizontalLayout?(e+=this.flyout.getHeight(),o+=this.flyout.getHeight()/this.scale):(n+=this.flyout.getWidth(),d+=this.flyout.getWidth()/this.scale)),n/=d,e/=o,r.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(n,e)),this.scrollCenter()}finally{r.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){_e(this.getCanvas(),"blocklyCanvasTransitioning"),_e(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){ke(this.getCanvas(),"blocklyCanvasTransitioning"),ke(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var e=this.getMetrics(),n=(e.scrollWidth-e.viewWidth)/2,o=(e.scrollHeight-e.viewHeight)/2;n=-n-e.scrollLeft,o=-o-e.scrollTop,this.scroll(n,o)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(e,n){if(this.isMovable()){var o=e?this.getBlockById(e):null;if(o){e=o.getRelativeToSurfaceXY(),o=n?{height:o.height,width:o.width}:o.getHeightWidth();var a=this.scale;n=(e.x+(this.RTL?-1:1)*o.width/2)*a,e=(e.y+o.height/2)*a,o=this.getMetrics(),this.scroll(-(n-o.viewWidth/2),-(e-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(e){this.options.zoomOptions.maxScale&&e>this.options.zoomOptions.maxScale?e=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&e<this.options.zoomOptions.minScale&&(e=this.options.zoomOptions.minScale),this.scale=e,this.hideChaff(!1),(e=this.getFlyout(!1))&&e.isVisible()&&(e.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),e=this.getMetrics(),this.scrollX-=e.absoluteLeft,this.scrollY-=e.absoluteTop,e.viewLeft+=e.absoluteLeft,e.viewTop+=e.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(e):this.scrollbar.resizeContent(e))}getScale(){return this.scale}getAbsoluteScale(){const e=o=>{if(o.isFlyout){let a;const d=(a=o.targetWorkspace)==null?void 0:a.getFlyout();if(d instanceof O_)return d.getFlyoutScale()}return o.getScale()},n=(o,a)=>o.options.parentWorkspace&&o.options.parentWorkspace.getSvgGroup().contains(o.getSvgGroup())?n(o.options.parentWorkspace,a*e(o)):a*e(o);return n(this,1)}scroll(e,n){this.hideChaff(!0);const o=this.getMetrics();e=Math.min(e,-o.scrollLeft),n=Math.min(n,-o.scrollTop);const a=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);e=Math.max(e,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),n=Math.max(n,-a),this.scrollX=e,this.scrollY=n,this.scrollbar&&this.scrollbar.set(-(e+o.scrollLeft),-(n+o.scrollTop),!1),e+=o.absoluteLeft,n+=o.absoluteTop,this.translate(e,n)}getBlockById(e){return super.getBlockById(e)}getAllBlocks(e=!1){return super.getAllBlocks(e)}getTopBlocks(e=!1){return super.getTopBlocks(e)}addTopBlock(e){this.addTopBoundedElement(e),super.addTopBlock(e)}removeTopBlock(e){this.removeTopBoundedElement(e),super.removeTopBlock(e)}addTopComment(e){this.addTopBoundedElement(e),super.addTopComment(e)}removeTopComment(e){this.removeTopBoundedElement(e),super.removeTopComment(e)}getTopComments(e=!1){return super.getTopComments(e)}getCommentById(e){return super.getCommentById(e)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(e){this.topBoundedElements.push(e)}removeTopBoundedElement(e){Ae(this.topBoundedElements,e)}getTopBoundedElements(e=!1){const n=[].concat(this.topBoundedElements);return e&&n.sort(this.sortByOrigin.bind(this)),n}setResizesEnabled(e){const n=!this.resizesEnabled&&e;this.resizesEnabled=e,n&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(e,n){if(typeof n!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(e,n)}getButtonCallback(e){let n;return(n=this.flyoutButtonCallbacks.get(e))!=null?n:null}removeButtonCallback(e){this.flyoutButtonCallbacks.delete(e)}registerToolboxCategoryCallback(e,n){if(typeof n!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(e,n)}getToolboxCategoryCallback(e){return this.toolboxCategoryCallbacks.get(e)||null}removeToolboxCategoryCallback(e){this.toolboxCategoryCallbacks.delete(e)}getGesture(e){if(this.keyboardMoveInProgress)return e.preventDefault(),e.stopPropagation(),null;const n=e.type==="pointerdown";let o;return n&&((o=this.currentGesture_)!=null&&o.hasStarted())&&(console.warn("Tried to start the same gesture twice."),this.currentGesture_.cancel()),!this.currentGesture_&&n&&(this.currentGesture_=new R_(e,this)),this.currentGesture_}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(e=!1){Li(),Hc(this),qs(),this.hideComponents(e)}hideComponents(e=!1){this.getComponentManager().getComponents(Ht.Capability.AUTOHIDEABLE,!0).forEach(n=>n.autoHide(e))}static setTopLevelWorkspaceMetrics(e){const n=this.getMetrics();typeof e.x=="number"&&(this.scrollX=-(n.scrollLeft+(n.scrollWidth-n.viewWidth)*e.x)),typeof e.y=="number"&&(this.scrollY=-(n.scrollTop+(n.scrollHeight-n.viewHeight)*e.y)),this.translate(this.scrollX+n.absoluteLeft,this.scrollY+n.absoluteTop)}addClass(e){this.injectionDiv&&_e(this.injectionDiv,e)}removeClass(e){this.injectionDiv&&ke(this.injectionDiv,e)}setIsReadOnly(e){super.setIsReadOnly(e),e?this.addClass("blocklyReadOnly"):this.removeClass("blocklyReadOnly")}scrollBoundsIntoView(e,n=10){if(!R_.inProgress()){var o=this.getScale(),a=this.getMetricsManager().getViewMetrics(!0);if(a=new it(a.top,a.top+a.height,a.left,a.left+a.width),!(e.left>=a.left&&e.top>=a.top&&e.right<=a.right&&e.bottom<=a.bottom)){e=e.clone(),e.top-=n,e.bottom+=n,e.left-=n,e.right+=n;var d=n=0;e.left<a.left?n=this.RTL?Math.min(a.left-e.left,a.right-e.right):a.left-e.left:e.right>a.right&&(n=this.RTL?a.right-e.right:Math.max(a.right-e.right,a.left-e.left)),e.top<a.top?d=a.top-e.top:e.bottom>a.bottom&&(d=Math.max(a.bottom-e.bottom,a.top-e.top)),this.scroll(this.scrollX+n*o,this.scrollY+d*o)}}}getFocusableElement(){return this.svgGroup_}getFocusableTree(){return this.isMutator&&this.options.parentWorkspace||this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(e)return null;let n;if(e=(n=this.targetWorkspace)==null?void 0:n.getFlyout(),this.isFlyout&&e){let a,d;return(d=(a=e.getContents().find(p=>(p=p.getElement(),dr(p)&&p.canBeFocused())))==null?void 0:a.getElement())!=null?d:null}let o;return(o=this.getTopBlocks(!0)[0])!=null?o:null}getNestedTrees(){const e=this.getAllBlocks().map(o=>o.getIcons()).flat().filter(o=>o instanceof r.MutatorIcon$$module$build$src$core$icons$mutator_icon&&o.bubbleIsVisible()).map(o=>{let a;return(a=o.getBubble())==null?void 0:a.getWorkspace()}).filter(o=>!!o),n=this.getFlyout(!0);return n&&e.push(n.getWorkspace()),e}searchForWorkspaceComment(e){for(const n of this.getTopComments())if(n instanceof ki&&n.canBeFocused()&&n.getFocusableElement().id===e)return n}lookUpFocusableNode(e){var n;const o=(n=this.targetWorkspace)==null?void 0:n.getFlyout();if(this.isFlyout&&o){for(var a of o.getContents())if(n=a.getElement(),dr(n)&&n.canBeFocused()&&n.getFocusableElement().id===e)return n}if(a=e.indexOf("_field_"),n=e.indexOf("_connection_"),a!==-1){var d=e.substring(0,a);if(d=this.getBlockById(d)){for(var p of d.getFields())if(p.canBeFocused()&&p.getFocusableElement().id===e)return p}return null}if(n!==-1){if(d=e.substring(0,n),d=this.getBlockById(d)){for(const X of d.getConnections_(!0))if(X.id===e)return X}return null}if(p=Math.max(e.indexOf(dg),e.indexOf(AL),e.indexOf(vL)),p!==-1&&(p=e.substring(0,p),p=this.searchForWorkspaceComment(p))){if(e.indexOf(dg)>-1)return p.getEditorFocusableNode();var v;return(v=p.view.getCommentBarButtons().find(X=>X.getFocusableElement().id.includes(e)))!=null?v:null}if((v=this.getAllBlocks(!1).find(X=>X.getFocusableElement().id===e))||(v=this.searchForWorkspaceComment(e)))return v;v=this.getAllBlocks().map(X=>X.getIcons()).flat();for(d of v){if(d.canBeFocused()&&d.getFocusableElement().id===e)return d;if(qo(d)){if((v=d.getBubble())&&v.canBeFocused()&&v.getFocusableElement().id===e)return v;if(v instanceof E_&&v.getEditor().getFocusableElement().id===e)return v.getEditor()}}return null}onTreeFocus(e,n){}onTreeBlur(e){if(this.isFlyout&&this.targetWorkspace&&!r.getFocusManager$$module$build$src$core$focus_manager().ephemeralFocusTaken()){var n=this.targetWorkspace.getToolbox();n&&e===n||DS(n)&&n.autoHide(!1)}}getNavigator(){return this.navigator}setNavigator(e){this.navigator=e}},wa=class extends Ea{constructor(e){super(),this.isBlank=typeof e>"u",e&&(this.varId=e.getId(),this.workspaceId=e.getWorkspace().id)}toJson(){const e=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return e.varId=this.varId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new wa),n.varId=e.varId,n}},Pg=class extends wa{constructor(e){super(e),this.type=de.VAR_CREATE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new Pg),n.varType=e.varType,n.varName=e.varName,n}run(e){var n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");n=n.getVariableMap(),e?n.createVariable(this.varName,this.varType,this.varId):(e=n.getVariableById(this.varId))&&n.deleteVariable(e)}};i(Le.EVENT,de.VAR_CREATE,Pg);var hA=class{constructor(e,n,o,a){this.workspace=e,this.name=n,this.type=o||"",this.id=a||re()}getId(){return this.id}getName(){return this.name}setName(e){return this.name=e,this}getType(){return this.type}setType(e){return this.type=e,this}getWorkspace(){return this.workspace}save(){const e={name:this.getName(),id:this.getId()},n=this.getType();return n&&(e.type=n),e}static load(e,n){e=new this(n,e.name,e.type,e.id),n.getVariableMap().addVariable(e),Y(new(ce(de.VAR_CREATE))(e))}};i(Le.VARIABLE_MODEL,Hn,hA);var Fg=class extends wa{constructor(e){super(e),this.type=de.VAR_DELETE,e&&(this.varType=e.getType(),this.varName=e.getName())}toJson(){const e=super.toJson();if(this.varType===void 0)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return e.varType=this.varType,e.varName=this.varName,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new Fg),n.varType=e.varType,n.varName=e.varName,n}run(e){var n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");n=n.getVariableMap(),e?(e=n.getVariableById(this.varId))&&n.deleteVariable(e):n.createVariable(this.varName,this.varType,this.varId)}};i(Le.EVENT,de.VAR_DELETE,Fg);var Bg=class extends wa{constructor(e,n){super(e),this.type=de.VAR_RENAME,e&&(this.oldName=e.getName(),this.newName=typeof n>"u"?"":n)}toJson(){const e=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return e.oldName=this.oldName,e.newName=this.newName,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new Bg),n.oldName=e.oldName,n.newName=e.newName,n}run(e){var n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");n=n.getVariableMap();const o=n.getVariableById(this.varId);e?o&&n.renameVariable(o,this.newName):o&&n.renameVariable(o,this.oldName)}};i(Le.EVENT,de.VAR_RENAME,Bg);var dA=class{constructor(e,n=!1){this.workspace=e,this.potentialMap=n,this.variableMap=new Map}clear(){for(const e of this.variableMap.values())for(const n of e.values())this.deleteVariable(n);if(this.variableMap.size!==0)throw Error("Non-empty variable map")}renameVariable(e,n){if(e.getName()===n)return e;var o=e.getType();o=this.getVariable(n,o);const a=this.workspace.getAllBlocks(!1);let d="";this.potentialMap||(d=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0);try{o&&o.getId()!==e.getId()?this.renameVariableWithConflict(e,n,o,a):this.renameVariableAndUses(e,n,a)}finally{this.potentialMap||r.setGroup$$module$build$src$core$events$utils(d)}return e}changeVariableType(e,n){const o=e.getType();if(o===n)return e;var a=this.variableMap.get(o);a?.delete(e.getId()),a?.size===0&&this.variableMap.delete(o),e.setType(n);let d;return a=(d=this.variableMap.get(n))!=null?d:new Map,a.set(e.getId(),e),this.variableMap.has(n)||this.variableMap.set(n,a),Y(new(ce(de.VAR_TYPE_CHANGE))(e,o,n)),e}renameVariableById(e,n){Mr("VariableMap.renameVariableById","v12","v13","VariableMap.renameVariable");const o=this.getVariableById(e);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+e);this.renameVariable(o,n)}renameVariableAndUses(e,n,o){for(this.potentialMap||Y(new(ce(de.VAR_RENAME))(e,n)),e.setName(n),n=0;n<o.length;n++)o[n].updateVarName(e)}renameVariableWithConflict(e,n,o,a){const d=e.getType(),p=o.getName();for(n!==p&&this.renameVariableAndUses(o,n,a),n=0;n<a.length;n++)a[n].renameVarById(e.getId(),o.getId());this.potentialMap||Y(new(ce(de.VAR_DELETE))(e));let v;(v=this.variableMap.get(d))==null||v.delete(e.getId())}createVariable(e,n,o){var a=this.getVariable(e,n);if(a){if(o&&a.getId()!==o)throw Error('Variable "'+e+'" is already in use and its id is "'+a.getId()+'" which conflicts with the passed in id, "'+o+'".');return a}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');if(a=o||re(),n=n||"",o=E(Le.VARIABLE_MODEL,this.workspace.options,!0),!o)throw Error("No variable model is registered.");a=new o(this.workspace,e,n,a);let d;return e=(d=this.variableMap.get(n))!=null?d:new Map,e.set(a.getId(),a),this.variableMap.has(n)||this.variableMap.set(n,e),this.potentialMap||Y(new(ce(de.VAR_CREATE))(a)),a}addVariable(e){const n=e.getType();this.variableMap.has(n)||this.variableMap.set(n,new Map);let o;(o=this.variableMap.get(n))==null||o.set(e.getId(),e)}deleteVariable(e){const n=na(this.workspace,e.getId());let o="";this.potentialMap||(o=r.getGroup$$module$build$src$core$events$utils())||r.setGroup$$module$build$src$core$events$utils(!0);try{for(let d=0;d<n.length;d++)n[d].dispose(!0);const a=this.variableMap.get(e.getType());a&&a.has(e.getId())&&(a.delete(e.getId()),this.potentialMap||Y(new(ce(de.VAR_DELETE))(e)),a.size===0&&this.variableMap.delete(e.getType()))}finally{this.potentialMap||r.setGroup$$module$build$src$core$events$utils(o)}}deleteVariableById(e){Mr("VariableMap.deleteVariableById","v12","v13","Blockly.Variables.deleteVariable"),(e=this.getVariableById(e))&&r.deleteVariable$$module$build$src$core$variables(this.workspace,e)}getVariable(e,n){if(n=this.variableMap.get(n||""),!n)return null;let o;return(o=[...n.values()].find(a=>r.Names$$module$build$src$core$names.equals(a.getName(),e)))!=null?o:null}getVariableById(e){for(const n of this.variableMap.values())if(n.has(e)){let o;return(o=n.get(e))!=null?o:null}return null}getVariablesOfType(e){return(e=this.variableMap.get(e||""))?[...e.values()]:[]}getTypes(){return[...this.variableMap.keys()]}getAllVariables(){let e=[];for(const n of this.variableMap.values())e=e.concat(...n.values());return e}getAllVariableNames(){Mr("VariableMap.getAllVariableNames","v12","v13","Blockly.Variables.getAllVariables");const e=[];for(const n of this.variableMap.values())for(const o of n.values())e.push(o.getName());return e}getVariableUsesById(e){return Mr("VariableMap.getVariableUsesById","v12","v13","Blockly.Variables.getVariableUsesById"),na(this.workspace,e)}};i(Le.VARIABLE_MAP,Hn,dA);var Ug=class extends ti{constructor(e,n){super(n),this.type=de.TRASHCAN_OPEN,this.isOpen=e}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new Ug),n.isOpen=e.isOpen,n}};i(Le.EVENT,de.TRASHCAN_OPEN,Ug);var _A=class extends $_{constructor(e){super(),this.workspace=e,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,this.workspace.options.maxTrashcanContents<=0||(e=this.workspace.copyOptionsForFlyout(),this.workspace.horizontalLayout?(e.toolboxPosition=this.workspace.toolboxPosition===at.TOP?at.BOTTOM:at.TOP,this.flyout=new(E(Le.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(e)):(e.toolboxPosition=this.workspace.toolboxPosition===at.RIGHT?at.LEFT:at.RIGHT,this.flyout=new(E(Le.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(e)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){this.svgGroup=b(ue.G,{class:"blocklyTrash"});let e;const n=String(Math.random()).substring(2);e=b(ue.CLIPPATH,{id:"blocklyTrashBodyClipPath"+n},this.svgGroup),b(ue.RECT,{width:Ma,height:y_,y:Da},e);const o=b(ue.IMAGE,{width:$n.width,x:-Hg,height:$n.height,y:-Gg,"clip-path":"url(#blocklyTrashBodyClipPath"+n+")"},this.svgGroup);return o.setAttributeNS(Gn,"xlink:href",this.workspace.options.pathToMedia+$n.url),e=b(ue.CLIPPATH,{id:"blocklyTrashLidClipPath"+n},this.svgGroup),b(ue.RECT,{width:Ma,height:Da},e),this.svgLid=b(ue.IMAGE,{width:$n.width,x:-Hg,height:$n.height,y:-Gg,"clip-path":"url(#blocklyTrashLidClipPath"+n+")"},this.svgGroup),this.svgLid.setAttributeNS(Gn,"xlink:href",this.workspace.options.pathToMedia+$n.url),I(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),I(this.svgGroup,"pointerup",this,this.click),I(o,"pointerover",this,this.mouseOver),I(o,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){if(this.workspace.options.maxTrashcanContents>0){const e=this.flyout.createDom(ue.SVG);_e(e,"blocklyTrashcanFlyout"),ut(e,this.workspace.getParentSvg()),this.flyout.init(this.workspace)}this.workspace.getComponentManager().addComponent({component:this,weight:Ht.ComponentWeight.TRASHCAN_WEIGHT,capabilities:[Ht.Capability.AUTOHIDEABLE,Ht.Capability.DELETE_AREA,Ht.Capability.DRAG_TARGET,Ht.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&ve(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var e=this.contents.map(function(o){return JSON.parse(o)}),n=this.workspace.getParentSvg().style;n.cursor="wait",setTimeout(()=>{let o;(o=this.flyout)==null||o.show(e),n.cursor="";let a;(a=this.workspace.scrollbar)==null||a.setVisible(!1)},10),this.fireUiEvent(!0)}}closeFlyout(){if(this.contentsIsOpen()){var e;(e=this.flyout)==null||e.hide();var n;(n=this.workspace.scrollbar)==null||n.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets()}}autoHide(e){!e&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(e,n){if(this.initialized){var o=Ks(this.workspace,e);e=Ys(o,new lt(Ma,y_+Da),gw,fA,e,this.workspace),n=os(e,fA,o.vertical===bi.TOP?uo.DOWN:uo.UP,n),this.top=n.top,this.left=n.left;var a;(a=this.svgGroup)==null||a.setAttribute("transform","translate("+this.left+","+this.top+")");var d;(d=this.flyout)==null||d.position()}}getBoundingRectangle(){return new it(this.top,this.top+y_+Da,this.left,this.left+Ma)}getClientRect(){if(!this.svgGroup)return null;var e=this.svgGroup.getBoundingClientRect();const n=e.top+Gg-k_;return e=e.left+Hg-k_,new it(n,n+Da+y_+2*k_,e,e+Ma+2*k_)}onDragOver(e){this.setLidOpen(this.wouldDelete_)}onDragExit(e){this.setLidOpen(!1)}onDrop(e){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(e){this.isLidOpen!==e&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=e,this.animateLid())}animateLid(){const e=Iw;var n=1/(e+1);this.lidOpen+=this.isLidOpen?n:-n,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*pA),n=TA+this.lidOpen*(Ow-TA),this.svgGroup&&(this.svgGroup.style.opacity=`${n}`),this.lidOpen>this.minOpenness&&this.lidOpen<1&&(this.lidTask=setTimeout(this.animateLid.bind(this),$w/e))}setLidAngle(e){const n=this.workspace.toolboxPosition===at.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let o;(o=this.svgLid)==null||o.setAttribute("transform","rotate("+(n?-e:e)+","+(n?4:Ma-4)+","+(Da-2)+")")}setMinOpenness(e){this.minOpenness=e,this.isLidOpen||this.setLidAngle(e*pA)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(e){e=new(ce(de.TRASHCAN_OPEN))(e,this.workspace.id),Y(e)}blockMouseDownWhenOpenable(e){!this.contentsIsOpen()&&this.hasContents()&&e.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(e){if(!(this.workspace.options.maxTrashcanContents<=0||!se(e)||e.wasShadow)){if(!e.oldJson)throw Error("Encountered a delete event without proper oldJson");if(e=JSON.stringify(this.cleanBlockJson(e.oldJson)),!this.contents.includes(e)){for(this.contents.unshift(e);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(mw)}}}cleanBlockJson(e){function n(o){if(o){if(delete o.id,delete o.x,delete o.y,delete o.enabled,delete o.disabledReasons,o.icons&&o.icons.comment){var a=o.icons.comment;delete a.height,delete a.width,delete a.pinned}a=o.inputs;for(var d in a){var p=a[d];const v=p.block;p=p.shadow,v&&n(v),p&&n(p)}o.next&&(d=o.next,o=d.block,d=d.shadow,o&&n(o),d&&n(d))}}return e=JSON.parse(JSON.stringify(e)),n(e),Object.assign({},{kind:"BLOCK"},e)}},Ma=47,y_=44,Da=16,fA=20,gw=20,k_=10,Hg=0,Gg=32,mw=.1,$w=80,Iw=4,TA=.4,Ow=.8,pA=45,$u=null,Iu=null,w_=void 0,xs={};xs.BlockPaster=Tu,xs.copy=kd,xs.getLastCopiedData=wd,xs.getLastCopiedLocation=qp,xs.getLastCopiedWorkspace=Md,xs.paste=oo,xs.registry=XE,xs.setLastCopiedData=XS,xs.setLastCopiedLocation=YS,xs.setLastCopiedWorkspace=zS;var po={};po.CollapseCommentBarButton=CL,po.CommentBarButton=u_,po.CommentEditor=h_,po.CommentView=hu,po.DeleteCommentBarButton=NL,po.RenderedWorkspaceComment=ki,po.WorkspaceComment=d_;var oi;(function(e){e.ESCAPE="escape",e.DELETE="delete",e.COPY="copy",e.CUT="cut",e.PASTE="paste",e.UNDO="undo",e.REDO="redo"})(oi||(oi={})),lE();var li={};li.names=oi,li.registerCopy=rE,li.registerCut=nE,li.registerDefaultShortcuts=lE,li.registerDelete=eE,li.registerEscape=Qp,li.registerPaste=sE,li.registerRedo=oE,li.registerUndo=iE;var Sw=class{constructor(e,n){this.procedureModelClass=e,this.parameterModelClass=n,this.priority=HR}save(e){return e=e.getProcedureMap().getProcedures().map(n=>aE(n)),e.length?e:null}load(e,n){const o=n.getProcedureMap();for(const a of e)o.add(cE(this.procedureModelClass,this.parameterModelClass,a,n))}clear(e){e.getProcedureMap().clear()}},M_={};M_.ProcedureSerializer=Sw,M_.loadProcedure=cE,M_.saveProcedure=aE;var EA=class{constructor(){this.priority=UR}save(e){return e=e.getAllVariables().map(n=>n.save()),e.length?e:null}load(e,n){const o=f(Le.VARIABLE_MODEL,Hn);e.forEach(a=>{o?.load(a,n)})}clear(e){e.getVariableMap().clear()}};Ri("variables",new EA);var gA={};gA.VariableSerializer=EA;var Vg={};Vg.load=jS,Vg.save=KS;var Rw={blocks:ou,exceptions:al,priorities:Zk,procedures:M_,registry:WE,variables:gA,workspaceComments:zd,workspaces:Vg};"Blockly"in globalThis||(globalThis.Blockly={Msg:YR});var Wg="label",mA=class{load(e,n){return e=new In(n.getWorkspace(),n.targetWorkspace,e,!0),e.show(),new ba(e,Wg)}gapForItem(e,n){return n}disposeItem(e){e=e.getElement(),e instanceof In&&e.dispose()}getType(){return Wg}};i(Le.FLYOUT_INFLATER,Wg,mA);var $A=class extends v_{constructor(e){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,e&&(this.GRID_UNIT=e),this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(e){super.setFontConstants_(e),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+this.FIELD_BORDER_RECT_Y_PADDING*2}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(e){super.setDynamicProperties_(e),this.SELECTED_GLOW_COLOUR=e.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const n=Number(e.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=n&&!isNaN(n)?n:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=e.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(e=Number(e.getComponentStyle("replacementGlowSize")))&&!isNaN(e)?e:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&ve(this.selectedGlowFilter),this.replacementGlowFilter&&ve(this.replacementGlowFilter)}makeStartHat(){const e=this.START_HAT_HEIGHT,n=this.START_HAT_WIDTH,o=bn("c",[Je(25,-e),Je(71,-e),Je(n,0)]);return{height:e*.75,width:n,path:o}}makeHexagonal(){function e(o,a,d){var p=o/2;return p=p>n?n:p,d=d?-1:1,o=(a?-1:1)*o/2,ei(-d*p,o)+ei(d*p,o)}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width(o){return o/=2,o>n?n:o},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}makeRounded(){function e(a,d,p){const v=a>o?a-o:0;a=(a>o?o:a)/2;const X=p===d?"0":"1";return nr("a","0 0,"+X,a,Je((p?1:-1)*a,(d?-1:1)*a))+qe("v",(d?-1:1)*v)+nr("a","0 0,"+X,a,Je((p?-1:1)*a,(d?-1:1)*a))}const n=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=n*2;return{type:this.SHAPES.ROUND,isDynamic:!0,width(a){return a/=2,a>n?n:a},height(a){return a},connectionOffsetY(a){return a/2},connectionOffsetX(a){return-a},pathDown(a){return e(a,!1,!1)},pathUp(a){return e(a,!0,!1)},pathRightDown(a){return e(a,!1,!0)},pathRightUp(a){return e(a,!1,!0)}}}makeSquared(){function e(o,a,d){o-=n*2;const p=d===a?"0":"1";return nr("a","0 0,"+p,n,Je((d?1:-1)*n,(a?-1:1)*n))+qe("v",(a?-1:1)*o)+nr("a","0 0,"+p,n,Je((d?-1:1)*n,(a?-1:1)*n))}const n=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width(o){return n},height(o){return o},connectionOffsetY(o){return o/2},connectionOffsetX(o){return-o},pathDown(o){return e(o,!1,!1)},pathUp(o){return e(o,!0,!1)},pathRightDown(o){return e(o,!1,!0)},pathRightUp(o){return e(o,!1,!0)}}}shapeFor(e){let n=e.getCheck();switch(!n&&e.targetConnection&&(n=e.targetConnection.getCheck()),e.type){case Ye.INPUT_VALUE:case Ye.OUTPUT_VALUE:if(e=e.getSourceBlock().getOutputShape(),e!==null)switch(e){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return n&&n.includes("Boolean")?this.HEXAGONAL:n&&n.includes("Number")?this.ROUNDED:(n&&n.includes("String"),this.ROUNDED);case Ye.PREVIOUS_STATEMENT:case Ye.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function e(je){return bn("c",[Je(je*d/2,0),Je(je*d*3/4,v/2),Je(je*d,v)])+da([Je(je*d,p)])+bn("c",[Je(je*d/4,v/2),Je(je*d/2,v),Je(je*d,v)])+qe("h",je*a)+bn("c",[Je(je*d/2,0),Je(je*d*3/4,-(v/2)),Je(je*d,-v)])+da([Je(je*d,-p)])+bn("c",[Je(je*d/4,-(v/2)),Je(je*d/2,-v),Je(je*d,-v)])}const n=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,a=n/3,d=a/3,p=o/2,v=p/2,X=e(1),Ie=e(-1);return{type:this.SHAPES.NOTCH,width:n,height:o,pathLeft:X,pathRight:Ie}}makeInsideCorners(){const e=this.CORNER_RADIUS,n=nr("a","0 0,0",e,Je(-e,e)),o=nr("a","0 0,1",e,Je(-e,e)),a=nr("a","0 0,0",e,Je(e,e)),d=nr("a","0 0,1",e,Je(e,e));return{width:e,height:e,pathTop:n,pathBottom:a,rightWidth:e,rightHeight:e,pathTopRight:o,pathBottomRight:d}}generateSecondaryColour_(e){return Qo("#000",e,.15)||e}generateTertiaryColour_(e){return Qo("#000",e,.25)||e}createDom(e,n,o,a){super.createDom(e,n,o,a),e=b(ue.DEFS,{},e),n=b(ue.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),b(ue.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},n),o=b(ue.FECOMPONENTTRANSFER,{result:"outBlur"},n),b(ue.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),b(ue.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},n),b(ue.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},n),this.selectedGlowFilterId=n.id,this.selectedGlowFilter=n,e=b(ue.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},e),b(ue.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},e),n=b(ue.FECOMPONENTTRANSFER,{result:"outBlur"},e),b(ue.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},n),b(ue.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),b(ue.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),b(ue.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},e),this.replacementGlowFilterId=e.id,this.replacementGlowFilter=e,a&&(a.style.setProperty("--blocklySelectedGlowFilter",`url(#${this.selectedGlowFilterId})`),a.style.setProperty("--blocklyReplacementGlowFilter",`url(#${this.replacementGlowFilterId})`))}getCSS_(e){return[`${e} .blocklyText,`,`${e} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${e} .blocklyText {`,"fill: #fff;","}",`${e} .blocklyNonEditableField>rect:not(.blocklyDropdownRect),`,`${e} .blocklyEditableField>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${e} .blocklyNonEditableField>text,`,`${e} .blocklyEditableField>text,`,`${e} .blocklyNonEditableField>g>text,`,`${e} .blocklyEditableField>g>text {`,"fill: #575E75;","}",`${e} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${e} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>rect,",`${e} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableField:not(.blocklyEditing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${e} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${e} .blocklyDropdownText {`,"fill: #fff !important;","}",`${e}.blocklyWidgetDiv .blocklyMenuItem,`,`${e}.blocklyDropDownDiv .blocklyMenuItem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${e}.blocklyDropDownDiv .blocklyMenuItemContent {`,"color: #fff;","}",`${e} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${e} .blocklyDisabledPattern > .blocklyOutlinePath {`,"fill: var(--blocklyDisabledPattern)","}",`${e} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}",`${e} .blocklySelected>.blocklyPath.blocklyPathSelected {`,"fill: none;","filter: var(--blocklySelectedGlowFilter);","}",`${e} .blocklyReplaceable>.blocklyPath {`,"filter: var(--blocklyReplacementGlowFilter);","}"]}},IA=class extends N_{constructor(e,n){super(e,n)}draw(){const e=this.block_.pathObject;e.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),e.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(e.outputShapeType=this.info_.outputConnection.shape.type),e.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(e){if(!(e.height<=0)){if(ne.isSpacer(e)){const a=e.precedesStatement;var n=e.followsStatement;if(a||n){const d=this.constants_.INSIDE_CORNERS;var o=d.rightHeight;o=e.height-(a?o:0),n=n?d.pathBottomRight:"",e=o>0?qe("V",e.yPos+o):"",this.outlinePath_+=n+e+(a?d.pathTopRight:"");return}}this.outlinePath_+=qe("V",e.yPos+e.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const e=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Jt(e.xPos,this.info_.startY),this.outlinePath_+=qe("h",e.width)}drawFlatBottom_(){const e=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=qe("V",e.baseline),this.outlinePath_+=qe("h",-e.width)}drawInlineInput_(e){this.positionInlineInputConnection_(e);const n=e.input.name;e.connectedBlock||this.info_.isInsertionMarker||(e=Dr(e.xPos+e.connectionWidth,e.centerline-e.height/2)+this.getInlineInputPath(e),this.block_.pathObject.setOutlinePath(n,e))}getInlineInputPath(e){const n=e.width-e.connectionWidth*2,o=e.height;return qe("h",n)+e.shape.pathRightDown(o)+qe("h",-n)+e.shape.pathUp(o)+"z"}drawStatementInput_(e){var n=e.getLastInput();const o=n.xPos+n.notchOffset+n.shape.width,a=this.constants_.INSIDE_CORNERS,d=n.shape.pathRight+qe("h",-(n.notchOffset-a.width))+a.pathTop,p=e.height-2*a.height;n=a.pathBottom+qe("h",n.notchOffset-a.width)+(n.connectedBottomNextConnection?"":n.shape.pathLeft),this.outlinePath_+=qe("H",o)+d+qe("v",p)+n+qe("H",e.xPos+e.width),this.positionStatementInputConnection_(e)}drawConnectionHighlightPath(e){const n=e.connectionModel;if(n.type===Ye.NEXT_STATEMENT||n.type===Ye.PREVIOUS_STATEMENT||n.type===Ye.OUTPUT_VALUE&&!e.isDynamicShape)return super.drawConnectionHighlightPath(e);e=n.type===Ye.INPUT_VALUE?Dr(e.connectionWidth,-e.height/2)+this.getInlineInputPath(e):Dr(e.width,-e.height/2)+e.shape.pathDown(e.height);const o=n.getSourceBlock();let a,d;return(d=(a=o.pathObject).addConnectionHighlight)==null?void 0:d.call(a,n,e,n.getOffsetInBlock(),o.RTL)}},ml=class extends Lt{constructor(e,n,o,a,d,p,v){if(super(Lt.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",o=Number(rr(o)),n=Number(rr(n)),isNaN(o)||isNaN(n))throw Error("Height and width values of an image field must cast to numbers.");if(o<=0||n<=0)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new lt(n,o+ml.Y_PADDING),this.imageHeight=o,typeof d=="function"&&(this.clickHandler=d),e!==Lt.SKIP_SETUP&&(v?this.configure_(v):(this.flipRtl=!!p,this.altText=rr(a)||""),this.setValue(rr(e)))}configure_(e){super.configure_(e),e.flipRtl&&(this.flipRtl=e.flipRtl),e.alt&&(this.altText=rr(e.alt))}initView(){this.imageElement=b(ue.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(Gn,"xlink:href",this.value_),this.fieldGroup_&&_e(this.fieldGroup_,"blocklyImageField"),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(e){return typeof e!="string"?null:e}doValueUpdate_(e){this.value_=e,this.imageElement&&this.imageElement.setAttributeNS(Gn,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(e){e!==this.altText&&(this.altText=e||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}isClickable(){return super.isClickable()&&!!this.clickHandler}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(e){this.clickHandler=e}getText_(){return this.altText}static fromJson(e){if(!e.src||!e.width||!e.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(e.src,e.width,e.height,void 0,void 0,void 0,e)}};ml.Y_PADDING=1,Qs("field_image",ml),ml.prototype.DEFAULT_VALUE="";var D_=14,Pa=class extends Lt{set size_(e){super.size_=e}get size_(){const e=super.size_;return e.width<D_&&(e.width=D_),e}constructor(e,n,o){super(Lt.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onInputWrapper=this.onKeyDownWrapper=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,e!==Lt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.spellcheck!==void 0&&(this.spellcheck_=e.spellcheck)}initView(){if(!this.getSourceBlock())throw new lr;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot()),this.fieldGroup_&&_e(this.fieldGroup_,"blocklyInputField")}isFullBlockField(){const e=this.getSourceBlock();if(!e)throw new lr;let n;return this.fullBlockClickTarget_=!((n=this.getConstants())==null||!n.FULL_BLOCK_FIELDS)&&e.isSimpleReporter()}doValueInvalid_(e,n=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,e=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&he()&&this.value_!==e&&n&&Y(new(ce(de.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,e,this.value_)))}doValueUpdate_(e){this.isTextValid_=this.isDirty_=!0,this.value_=e}applyColour(){const e=this.getSourceBlock();if(!e)throw new lr;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",e.getColourTertiary())):(this.borderRect_.style.display="none",e.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let e;return(e=this.getConstants())!=null&&e.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var e=this.htmlInput_;this.isTextValid_?(ke(e,"blocklyInvalidInput"),_r(e,ir.INVALID,!1)):(_e(e,"blocklyInvalidInput"),_r(e,ir.INVALID,!0))}if(e=this.getSourceBlock(),!e)throw new lr;this.getConstants().FULL_BLOCK_FIELDS&&e.applyColour()}setSpellcheck(e){e!==this.spellcheck_&&(this.spellcheck_=e,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(e,n=!1,o=!0){this.workspace_=this.sourceBlock_.workspace,!n&&this.workspace_.options.modalInputs&&($R||bE||Vd)?this.showPromptEditor():this.showInlineEditor(n,o)}showPromptEditor(){td(r.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),e=>{e!==null&&this.setValue(this.getValueFromEditorText_(e)),this.onFinishEditing_(this.value_)})}showInlineEditor(e,n){const o=this.getSourceBlock();if(!o)throw new lr;Ed(this,o.RTL,this.widgetDispose_.bind(this),this.workspace_,n),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,e||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var e=this.getSourceBlock();if(!e)throw new lr;r.setGroup$$module$build$src$core$events$utils(!0);const n=aa();var o=this.getClickTarget_();if(!o)throw Error("A click target has not been set.");_e(o,"blocklyEditing"),o=document.createElement("input"),o.className="blocklyHtmlInput",o.setAttribute("spellcheck",this.spellcheck_);const a=this.workspace_.getAbsoluteScale();var d=this.getConstants().FIELD_TEXT_FONTSIZE*a+"pt";return n.style.fontSize=d,o.style.fontSize=d,d=Pa.BORDERRADIUS*a+"px",this.isFullBlockField()&&(d=this.getScaledBBox(),d=(d.bottom-d.top)/2+"px",e=e.getParent()?e.getParent().getColourTertiary():this.sourceBlock_.getColourTertiary(),o.style.border=1*a+"px solid "+e,n.style.borderRadius=d,n.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(n.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*a+"px")),o.style.borderRadius=d,n.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(o),o}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&he()&&this.valueWhenEditorWasOpened_!==null&&this.valueWhenEditorWasOpened_!==this.value_&&(Y(new(ce(de.BLOCK_CHANGE))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),r.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var e=aa().style;if(e.width="auto",e.height="auto",e.fontSize="",e.transition="",e.boxShadow="",this.htmlInput_=null,e=this.getClickTarget_(),!e)throw Error("A click target has not been set.");ke(e,"blocklyEditing")}onFinishEditing_(e){}bindInputEvents_(e){this.onKeyDownWrapper=A(e,"keydown",this,this.onHtmlInputKeyDown_),this.onInputWrapper=A(e,"input",this,this.onHtmlInputChange)}unbindInputEvents_(){this.onKeyDownWrapper&&(k(this.onKeyDownWrapper),this.onKeyDownWrapper=null),this.onInputWrapper&&(k(this.onInputWrapper),this.onInputWrapper=null)}onHtmlInputKeyDown_(e){if(e.key==="Enter")el(this),qs();else if(e.key==="Escape")this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),el(this),qs();else if(e.key==="Tab"){e.preventDefault();var n,o=(n=this.workspace_)==null?void 0:n.getCursor();n=a=>(a instanceof Pa||a instanceof bt&&a.isSimpleReporter())&&a!==this.getSourceBlock(),e=e.shiftKey?o?.getPreviousNode(this,n,!1):o?.getNextNode(this,n,!1),e=e instanceof bt&&e.isSimpleReporter()?e.getFields().next().value:e,e instanceof Pa&&(el(this),qs(),o=e.getSourceBlock(),e.isFullBlockField()&&o&&o instanceof bt?r.getFocusManager$$module$build$src$core$focus_manager().focusNode(o):r.getFocusManager$$module$build$src$core$focus_manager().focusNode(e),e.showEditor())}}onHtmlInputChange(e){e=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&he()&&this.value_!==e&&Y(new(ce(de.BLOCK_FIELD_INTERMEDIATE_CHANGE))(this.sourceBlock_,this.name||null,e,this.value_))}setEditorValue_(e,n=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(e)),this.setValue(e,n)}resizeEditor_(){Js().then(()=>{const e=this.getSourceBlock();if(!e)throw new lr;const n=aa(),o=this.getScaledBBox();n.style.width=o.right-o.left+"px",n.style.height=o.bottom-o.top+"px";const a=o.top;n.style.left=`${e.RTL?o.right-n.offsetWidth:o.left}px`,n.style.top=`${a}px`})}repositionForWindowResize(){let e;const n=(e=this.getSourceBlock())==null?void 0:e.getRootBlock();return n instanceof bt?(fa(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),n)||this.resizeEditor_(),!0):!1}positionTextElement_(e,n){const o=e*2+n;super.positionTextElement_(e+(o<D_?(D_-o)/2:0),n)}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(e){return`${e}`}getValueFromEditorText_(e){return e}};Pa.BORDERRADIUS=4,r.FieldTextInput$$module$build$src$core$field_textinput=class extends Pa{constructor(e,n,o){super(e,n,o)}initView(){super.initView(),this.fieldGroup_&&_e(this.fieldGroup_,"blocklyTextInputField")}doClassValidation_(e){return e===void 0?null:`${e}`}static fromJson(e){return new this(rr(e.text),void 0,e)}},Qs("field_input",r.FieldTextInput$$module$build$src$core$field_textinput),r.FieldTextInput$$module$build$src$core$field_textinput.prototype.DEFAULT_VALUE="",r.FieldTextInput$$module$build$src$core$field_textinput;var OA=class extends Ng{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){return!!e.outputConnection}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},P_=class extends C_{constructor(e,n){if(super(e,n),this.connectedBottomNextConnection=!1,this.connectedBlock){for(e=this.connectedBlock;n=e.getNextBlock();)e=n;e.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},SA=class extends ii{constructor(e){super(e),this.width=this.height=0,this.type|=ne.getType("RIGHT_CONNECTION")}},RA=class extends Mg{constructor(e){super(e)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(e){const n=(e.hat?e.hat==="cap":this.constants_.ADD_START_HATS)&&!e.outputConnection&&!e.previousConnection;return!!e.outputConnection||n}hasRightSquareCorner(e){return!!e.outputConnection&&!e.statementInputCount&&!e.nextConnection}},LA=class extends mu{constructor(e,n){super(e,n),this.isInline=!0,this.renderer_=e,this.constants_=this.renderer_.getConstants(),this.topRow=new RA(this.constants_),this.bottomRow=new OA(this.constants_),this.isMultiRow=!n.getInputsInline()||n.isCollapsed(),this.hasStatementInput=n.statementInputCount>0,this.rightSide=this.outputConnection?new SA(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(e,n){return n?n instanceof Di||e instanceof Yn||n instanceof Yn?!0:e instanceof r.ValueInput$$module$build$src$core$inputs$value_input||e instanceof ni||e instanceof Di?!this.isInline||this.isMultiRow:!1:!1}getDesiredRowWidth_(e){return e.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(e)}getInRowSpacing_(e,n){return e&&n||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!e&&n&&ne.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:e&&ne.isLeftRoundedCorner(e)&&n&&(ne.isPreviousConnection(n)||ne.isNextConnection(n))?n.notchOffset-this.constants_.CORNER_RADIUS:e&&ne.isLeftSquareCorner(e)&&n&&ne.isHat(n)||e&&ne.isField(e)&&e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(e,n){if(ne.isTopRow(e)&&ne.isBottomRow(n))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const o=ne.isInputRow(e)&&e.hasStatement,a=ne.isInputRow(n)&&n.hasStatement;return a||o?(e=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),a&&o?Math.max(e,this.constants_.DUMMY_INPUT_MIN_HEIGHT):e):ne.isTopRow(e)?e.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):ne.isBottomRow(n)?this.outputConnection?!n.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(e,n){const o=this.width-this.startX;return ne.isInputRow(e)&&e.hasStatement||ne.isInputRow(n)&&n.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o}getElemCenterline_(e,n){if(e.hasStatement&&!ne.isSpacer(n)&&!ne.isStatementInput(n))return e.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(ne.isInlineInput(n)){const o=n.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return e.yPos+o.height/2}return super.getElemCenterline_(e,n)}addInput_(e,n){if((e instanceof ni||e instanceof Di)&&n.hasDummyInput&&n.align===r.Align$$module$build$src$core$inputs$align.LEFT&&e.align===r.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(n,e);else if(e instanceof Yn){n.elements.push(new P_(this.constants_,e)),n.hasStatement=!0,n.align===null&&(n.align=e.align);return}super.addInput_(e,n)}addAlignmentPadding_(e,n){if(this.rightAlignedDummyInputs.get(e)){let o;for(let a=0;a<e.elements.length;a++){const d=e.elements[a];if(ne.isSpacer(d)&&(o=d),ne.isField(d)&&d.parentInput===this.rightAlignedDummyInputs.get(e))break}if(o){o.width+=n,e.width+=n;return}}super.addAlignmentPadding_(e,n)}adjustXPosition_(){const e=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let n=e;for(let d=2;d<this.rows.length-1;d+=2){var o=this.rows[d-1];const p=this.rows[d];var a=this.rows[d+1];if(o=d===2?!!this.topRow.hasPreviousConnection:!!o.followsStatement,a=d+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!a.precedesStatement,ne.isInputRow(p)&&p.hasStatement){p.measure();let v,X;n=p.width-((X=(v=p.getLastInput())==null?void 0:v.width)!=null?X:0)+e}else if(o&&(d===2||a)&&ne.isInputRow(p)&&!p.hasStatement){a=p.xPos,o=null;for(let v=0;v<p.elements.length;v++){const X=p.elements[v];ne.isSpacer(X)&&(o=X),!(o&&(ne.isField(X)||ne.isInput(X))&&a<n)||ne.isField(X)&&(X.field instanceof pl||X.field instanceof ml)||(o.width+=n-a),a+=X.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var e=this.outputConnection.shape;if("isDynamic"in e&&e.isDynamic){for(var n=0,o=0;o<this.rows.length;o++){const a=this.rows[o];a.yPos=n,n+=a.height}this.height=n,o=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,n=e.height(o),o=e.width(o),this.outputConnection.height=n,this.outputConnection.width=o,this.outputConnection.startX=o,this.outputConnection.connectionOffsetY=e.connectionOffsetY(n),this.outputConnection.connectionOffsetX=e.connectionOffsetX(o),e=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(e=o,this.rightSide.height=n,this.rightSide.width=e,this.rightSide.centerline=n/2,this.rightSide.xPos=this.width+e),this.startX=o,this.width+=o+e,this.widthWithChildren+=o+e}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var e=0,n=0;n<this.rows.length;n++){var o=this.rows[n];if(!ne.isInputRow(o))continue;e=o.elements[o.elements.length-2];let a=this.getNegativeSpacing_(o.elements[1]),d=this.getNegativeSpacing_(e);e=a+d;const p=this.constants_.MIN_BLOCK_WIDTH+this.outputConnection.width*2;this.width-e<p&&(e=this.width-p,a=e/2,d=e/2),o.elements.unshift(new Kn(this.constants_,-a)),o.elements.push(new Kn(this.constants_,-d))}if(e)for(this.width-=e,this.widthWithChildren-=e,this.rightSide.xPos-=e,n=0;n<this.rows.length;n++)o=this.rows[n],ne.isTopOrBottomRow(o)&&(o.elements[1].width-=e),o.width-=e,o.widthWithConnectedBlocks-=e}}getNegativeSpacing_(e){if(!e||!this.outputConnection)return 0;const n=this.outputConnection.width;var o=this.outputConnection.shape.type;const a=this.constants_;if(this.inputRows.length>1)switch(o){case a.SHAPES.ROUND:return o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=this.height/2>o?o:this.height/2,n-o*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)));default:return 0}if(ne.isInlineInput(e)){const d=e.connectedBlock;return e=d?d.pathObject.outputShapeType:e.shape.type,e==null||d&&d.outputConnection&&(d.statementInputCount||d.nextConnection)||o===a.SHAPES.HEXAGONAL&&o!==e?0:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][e]}return ne.isField(e)?o===a.SHAPES.ROUND&&e.field instanceof r.FieldTextInput$$module$build$src$core$field_textinput?n-2.75*a.GRID_UNIT:n-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:ne.isIcon(e)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let a=2;a<this.rows.length-1;a+=2){const d=this.rows[a-1],p=this.rows[a],v=this.rows[a+1];var e=a===2,n=a+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!v.precedesStatement;if(e?this.topRow.hasPreviousConnection:d.followsStatement){var o=p.elements[1];if(o=p.elements.length===3&&o instanceof bg&&(o.field instanceof pl||o.field instanceof ml),!e&&o)d.height-=this.constants_.SMALL_PADDING,v.height-=this.constants_.SMALL_PADDING,p.height-=this.constants_.MEDIUM_PADDING;else if(!e&&!n)d.height+=this.constants_.SMALL_PADDING;else if(n){for(e=!1,n=0;n<p.elements.length;n++)if(o=p.elements[n],ne.isInlineInput(o)&&o.connectedBlock&&!o.connectedBlock.isShadow()&&o.connectedBlock.getHeightWidth().height>=40){e=!0;break}e&&(d.height-=this.constants_.SMALL_PADDING,v.height-=this.constants_.SMALL_PADDING)}}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},AA=class extends x_{constructor(e,n,o){super(e,n,o),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=o}setPath(e){super.setPath(e),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",e)}applyColour(e){super.applyColour(e);const n=e.getParent();e.isShadow()&&n&&this.svgPath.setAttribute("stroke",n.getColourTertiary());for(const o of this.outlines.values())o.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const e of this.outlines.values())e.setAttribute("transform","scale(-1 1)")}updateSelected(e){this.setClass_("blocklySelected",e),e?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.classList.add("blocklyPathSelected"),ke(this.svgPathSelected,Yr.ACTIVE_FOCUS_NODE_CSS_CLASS_NAME),ke(this.svgPathSelected,Yr.PASSIVE_FOCUS_NODE_CSS_CLASS_NAME),this.svgPathSelected.removeAttribute("tabindex"),this.svgPathSelected.removeAttribute("id"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(e){this.setClass_("blocklyReplaceable",e)}updateShapeForInputHighlight(e,n){e=e.getParentInput().name,(e=this.getOutlinePath(e))&&(n?e.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):e.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const e of this.outlines.keys())this.remainingOutlines.add(e)}endDrawing(){if(this.remainingOutlines.size)for(const e of this.remainingOutlines)this.removeOutlinePath(e);this.remainingOutlines.clear()}setOutlinePath(e,n){e=this.getOutlinePath(e),e.setAttribute("d",n),e.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(e){return this.outlines.has(e)||this.outlines.set(e,b(ue.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(e),this.outlines.get(e)}removeOutlinePath(e){let n,o;(n=this.outlines.get(e))==null||(o=n.parentNode)==null||o.removeChild(this.outlines.get(e)),this.outlines.delete(e)}},Xg=class extends b_{constructor(e){super(e)}makeConstants_(){return new $A}makeRenderInfo_(e){return new LA(this,e)}makeDrawer_(e,n){return new IA(e,n)}makePathObject(e,n){return new AA(e,n,this.getConstants())}getConstants(){return this.constants_}};zc("zelos",Xg);var CA=class{constructor(e){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=e.workspace}previewReplacement(e,n,o){r.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=o,o.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(n)&&(n.highlight(),this.staticConn=n)}finally{r.enable$$module$build$src$core$events$utils()}}previewConnection(e,n){if(e!==this.draggedConn||n!==this.staticConn){r.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(e,n)&&(this.markerConn=this.previewMarker(e,n)),this.workspace.getRenderer().shouldHighlightConnection(n)&&n.highlight(),this.draggedConn=e,this.staticConn=n}finally{r.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(e,n){return n.type===Ye.PREVIOUS_STATEMENT||n.type===Ye.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof Xg)}previewMarker(e,n){const o=e.getSourceBlock(),a=this.createInsertionMarker(o),d=this.getMatchingConnection(o,a,e);if(!d)return null;a.queueRender(),ro(),d.connect(n);const p={x:n.x-d.x,y:n.y-d.y},v=d.getOffsetInBlock().clone();return Js().then(()=>{if(!a.isDeadOrDying()){r.disable$$module$build$src$core$events$utils();try{a?.positionNearConnection(d,p,v),a?.getSvgRoot().setAttribute("visibility","visible")}finally{r.enable$$module$build$src$core$events$utils()}}}),d}serializeBlockToInsertionMarker(e){const n=as(e,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!n)throw Error(`Failed to serialize source block. ${e.toDevString()}`);return n}createInsertionMarker(e){e=this.serializeBlockToInsertionMarker(e),e=no(e,this.workspace);for(const n of e.getDescendants(!1))n.setInsertionMarker(!0);return e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden"),e}getMatchingConnection(e,n,o){if(e=e.getConnections_(!0),n=n.getConnections_(!0),e.length!==n.length)return null;for(let a=0;a<e.length;a++)if(e[a]===o)return n[a];return null}hidePreview(){r.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{r.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(e){const n=e.getSourceBlock(),o=n.outputConnection;let a;if((a=n.previousConnection)!=null&&a.targetConnection||o!=null&&o.targetConnection)n.unplug(!0);else{let d;(d=e.targetBlock())==null||d.unplug(!1)}n.dispose()}dispose(){this.hidePreview()}};i(Le.CONNECTION_PREVIEWER,Hn,CA);var Eo={};Eo.Align=r.Align$$module$build$src$core$inputs$align,Eo.DummyInput=ni,Eo.EndRowInput=Di,Eo.Input=Na,Eo.StatementInput=Yn,Eo.ValueInput=r.ValueInput$$module$build$src$core$inputs$value_input,Eo.inputTypes=r.inputTypes$$module$build$src$core$inputs$input_types;var vA=!1,NA;r.CodeGenerator$$module$build$src$core$generator=class{constructor(e){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=e,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(e){e||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),e=m());var n=[];this.init(e),e=e.getTopBlocks(!0);for(let o=0,a;a=e[o];o++){let d=this.blockToCode(a);Array.isArray(d)&&(d=d[0]),d&&(a.outputConnection&&(d=this.scrubNakedValue(d),this.STATEMENT_PREFIX&&!a.suppressPrefixSuffix&&(d=this.injectId(this.STATEMENT_PREFIX,a)+d),this.STATEMENT_SUFFIX&&!a.suppressPrefixSuffix&&(d+=this.injectId(this.STATEMENT_SUFFIX,a))),n.push(d))}return n=n.join(`
`),n=this.finish(n),n=n.replace(/^\s+\n/,""),n=n.replace(/\n\s+$/,`
`),n=n.replace(/[ \t]+\n/g,`
`)}prefixLines(e,n){return n+e.replace(/(?!\n$)\n/g,`
`+n)}allNestedComments(e){const n=[];e=e.getDescendants(!0);for(let o=0;o<e.length;o++){const a=e[o].getCommentText();a&&n.push(a)}return n.length&&n.push(""),n.join(`
`)}blockToCode(e,n){if(this.isInitialized===!1&&console.warn("CodeGenerator init was not called before blockToCode was called."),!e)return"";if(!e.isEnabled())return n?"":this.blockToCode(e.getNextBlock());if(e.isInsertionMarker())return n?"":this.blockToCode(e.getChildren(!1)[0]);var o=this.forBlock[e.type];if(typeof o!="function")throw Error(`${this.name_} generator does not know how to generate code for block type "${e.type}".`);if(o=o.call(e,e,this),Array.isArray(o)){if(!e.outputConnection)throw TypeError("Expecting string from statement block: "+e.type);return[this.scrub_(e,o[0],n),o[1]]}if(typeof o=="string")return this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,e)+o),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,e)),this.scrub_(e,o,n);if(o===null)return"";throw SyntaxError("Invalid code generated: "+o)}valueToCode(e,n,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+e.type);var a=e.getInputTargetBlock(n);if(!a&&!e.getInput(n))throw ReferenceError(`Input "${n}" doesn't exist on "${e.type}"`);if(!a||(n=this.blockToCode(a),n===""))return"";if(!Array.isArray(n))throw TypeError(`Expecting tuple from value block: ${a.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(e=n[0],n=n[1],isNaN(n))throw TypeError("Expecting valid order from value block: "+a.type);if(!e)return"";a=!1;var d=Math.floor(o);const p=Math.floor(n);if(d<=p&&(d!==p||d!==0&&d!==99)){for(a=!0,d=0;d<this.ORDER_OVERRIDES.length;d++)if(this.ORDER_OVERRIDES[d][0]===o&&this.ORDER_OVERRIDES[d][1]===n){a=!1;break}}return a&&(e="("+e+")"),e}statementToCode(e,n){const o=e.getInputTargetBlock(n);if(!o&&!e.getInput(n))throw ReferenceError(`Input "${n}" doesn't exist on "${e.type}"`);if(e=this.blockToCode(o),typeof e!="string")throw TypeError("Expecting code from statement block: "+(o&&o.type));return e&&(e=this.prefixLines(e,this.INDENT)),e}addLoopTrap(e,n){return this.INFINITE_LOOP_TRAP&&(e=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,n),this.INDENT)+e),this.STATEMENT_SUFFIX&&!n.suppressPrefixSuffix&&(e=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,n),this.INDENT)+e),this.STATEMENT_PREFIX&&!n.suppressPrefixSuffix&&(e+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,n),this.INDENT)),e}injectId(e,n){return n=n.id.replace(/\$/g,"$$$$"),e.replace(/%1/g,"'"+n+"'")}addReservedWords(e){this.RESERVED_WORDS_+=e+","}provideFunction_(e,n){if(!this.definitions_[e]){const o=this.nameDB_.getDistinctName(e,r.NameType$$module$build$src$core$names.PROCEDURE);this.functionNames_[e]=o,Array.isArray(n)&&(n=n.join(`
`)),n=n.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);let a;for(;a!==n;)a=n,n=n.replace(/^(( {2})*) {2}/gm,"$1\0");n=n.replace(/\0/g,this.INDENT),this.definitions_[e]=n}return this.functionNames_[e]}getVariableName(e){return this.getName(e,r.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(e){return this.getName(e,r.NameType$$module$build$src$core$names.PROCEDURE)}getName(e,n){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(e,n)}init(e){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(e,n,o){return n}finish(e){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),e}scrubNakedValue(e){return e}},NA={},NA.CodeGenerator=r.CodeGenerator$$module$build$src$core$generator;var zg=class extends O_{constructor(e){super(e)}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),a=n.getViewMetrics();n=n.getAbsoluteMetrics(),typeof e.y=="number"&&(this.workspace_.scrollY=-(o.top+(o.height-a.height)*e.y)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),o=e.getViewMetrics();return e=e.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===at.LEFT?e.width:o.width-this.getWidth():this.toolboxPosition_===at.LEFT?0:o.width:this.toolboxPosition_===at.LEFT?0:o.width+n.left-this.getWidth()}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=e.height;var n=this.getWidth()-this.CORNER_RADIUS;this.setBackgroundPath(n,e.height-2*this.CORNER_RADIUS),e=this.getX(),n=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,n)}}setBackgroundPath(e,n){const o=this.toolboxPosition_===at.RIGHT;var a=e+this.CORNER_RADIUS;a=["M "+(o?a:0)+",0"],a.push("h",o?-e:e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",Math.max(0,n)),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",o?e:-e),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setY(0)}wheel_(e){var n=U(e);if(n.y){const o=this.workspace_.getMetricsManager(),a=o.getScrollMetrics();n=o.getViewMetrics().top-a.top+n.y;let d;(d=this.workspace_.scrollbar)==null||d.setY(n),Hc(this.workspace_),qs()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;var n=this.MARGIN;const o=this.RTL?n:n+this.tabWidth_;for(const a of e)a.getElement().moveBy(o,n),n+=a.getElement().getBoundingRectangle().getHeight()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<n&&e>-n||e<-180+n||e>180-n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.left;return this.toolboxPosition_===at.LEFT?new it(-1e9,1e9,-1e9,n+e.width):new it(-1e9,1e9,n,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((n,o)=>Math.max(n,o.getElement().getBoundingRectangle().getWidth()),0);if(e+=this.MARGIN*1.5+this.tabWidth_,e*=this.workspace_.scale,e+=sr.scrollbarThickness,this.getWidth()!==e){if(this.RTL)for(const n of this.getContents()){const o=n.getElement().getBoundingRectangle().left,a=e/this.workspace_.scale-n.getElement().getBoundingRectangle().getWidth()-this.MARGIN-this.tabWidth_;n.getElement().moveBy(a-o,0)}this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==at.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+e,this.targetWorkspace.scrollY),this.width_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};zg.registryName="verticalFlyout",i(Le.FLYOUTS_VERTICAL_TOOLBOX,Hn,zg);var xA=class extends O_{constructor(e){super(e),this.horizontalLayout=!0}setMetrics_(e){if(this.isVisible()){var n=this.workspace_.getMetricsManager(),o=n.getScrollMetrics(),a=n.getViewMetrics();n=n.getAbsoluteMetrics(),typeof e.x=="number"&&(this.workspace_.scrollX=-(o.left+(o.width-a.width)*e.x)),this.workspace_.translate(this.workspace_.scrollX+n.left,this.workspace_.scrollY+n.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var e=this.targetWorkspace.getMetricsManager();const n=e.getAbsoluteMetrics(),o=e.getViewMetrics();e=e.getToolboxMetrics();const a=this.toolboxPosition_===at.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?a?e.height:o.height-this.getHeight():a?0:o.height:a?0:o.height+n.top-this.getHeight()}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var e=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=e.width,e=e.width-2*this.CORNER_RADIUS;var n=this.getHeight()-this.CORNER_RADIUS;this.setBackgroundPath(e,n),e=this.getX(),n=this.getY(),this.positionAt_(this.getWidth(),this.getHeight(),e,n)}}setBackgroundPath(e,n){const o=this.toolboxPosition_===at.TOP,a=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(a.push("h",e+2*this.CORNER_RADIUS),a.push("v",n),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("h",-e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),a.push("h",e),a.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),a.push("v",n),a.push("h",-e-2*this.CORNER_RADIUS)),a.push("z"),this.svgBackground_.setAttribute("d",a.join(" "))}scrollToStart(){let e;(e=this.workspace_.scrollbar)==null||e.setX(this.RTL?1/0:0)}wheel_(e){var n=U(e);if(n=n.x||n.y){const o=this.workspace_.getMetricsManager(),a=o.getScrollMetrics();n=o.getViewMetrics().left-a.left+n;let d;(d=this.workspace_.scrollbar)==null||d.setX(n),Hc(this.workspace_),qs()}e.preventDefault(),e.stopPropagation()}layout_(e){this.workspace_.scale=this.targetWorkspace.scale;const n=this.MARGIN;let o=n+this.tabWidth_;this.RTL&&(e=e.reverse());for(const a of e)e=a.getElement().getBoundingRectangle(),e=this.RTL?o+e.getWidth():o,a.getElement().moveBy(e,n),o+=a.getElement().getBoundingRectangle().getWidth()}isDragTowardWorkspace(e){e=Math.atan2(e.y,e.x)/Math.PI*180;const n=this.dragAngleRange_;return e<90+n&&e>90-n||e>-90-n&&e<-90+n}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const e=this.svgGroup_.getBoundingClientRect(),n=e.top;return this.toolboxPosition_===at.TOP?new it(-1e9,n+e.height,-1e9,1e9):new it(n,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let e=this.getContents().reduce((n,o)=>Math.max(n,o.getElement().getBoundingRectangle().getHeight()),0);e+=this.MARGIN*1.5,e*=this.workspace_.scale,e+=sr.scrollbarThickness,this.getHeight()!==e&&(this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==at.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+e),this.height_=e,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets())}};i(Le.FLYOUTS_HORIZONTAL_TOOLBOX,Hn,xA);var Ou=class extends Kr{constructor(e,n,o,a,d){super(Lt.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=Ou.dropdownCreate,this.defaultVariableName=typeof e=="string"?e:"",this.size_=new lt(0,0),e!==Lt.SKIP_SETUP&&(d?this.configure_(d):this.setTypes(o,a),n&&this.setValidator(n))}configure_(e){super.configure_(e),this.setTypes(e.variableTypes,e.defaultType)}initModel(){var e=this.getSourceBlock();if(!e)throw new lr;this.variable||(e=r.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(e.getId()))}initView(){super.initView(),_e(this.fieldGroup_,"blocklyVariableField")}shouldAddBorderRect_(){const e=this.getSourceBlock();if(!e)throw new lr;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||e.type!=="variables_get")}fromXml(e){var n=this.getSourceBlock();if(!n)throw new lr;const o=e.getAttribute("id"),a=e.textContent,d=e.getAttribute("variabletype")||e.getAttribute("variableType")||"";if(n=r.getOrCreateVariablePackage$$module$build$src$core$variables(n.workspace,o,a,d),d!==null&&d!==n.getType())throw Error("Serialized variable type with id '"+n.getId()+"' had type "+n.getType()+", and does not match variable field that references it: "+Zs(e)+".");this.setValue(n.getId())}toXml(e){return this.initModel(),e.id=this.variable.getId(),e.textContent=this.variable.getName(),this.variable.getType()&&e.setAttribute("variabletype",this.variable.getType()),e}saveState(e){var n=this.saveLegacyState(Ou);return n!==null||(this.initModel(),n={id:this.variable.getId()},e&&(n.name=this.variable.getName(),n.type=this.variable.getType())),n}loadState(e){const n=this.getSourceBlock();if(!n)throw new lr;this.loadLegacyState(Ou,e)||(e=r.getOrCreateVariablePackage$$module$build$src$core$variables(n.workspace,e.id||null,e.name,e.type||""),this.setValue(e.getId()))}setSourceBlock(e){if(e.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(e)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.getName():""}getVariable(){return this.variable}getDefaultType(){return this.defaultType}getValidator(){return this.variable?this.validator_:null}doClassValidation_(e){if(e===null)return null;var n=this.getSourceBlock();if(!n)throw new lr;return n=r.getVariable$$module$build$src$core$variables(n.workspace,e),n?(n=n.getType(),this.typeIsAllowed(n)?e:(console.warn("Variable type doesn't match this field!  Type was "+n),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+e),null)}doValueUpdate_(e){const n=this.getSourceBlock();if(!n)throw new lr;this.variable=r.getVariable$$module$build$src$core$variables(n.workspace,e),super.doValueUpdate_(e)}typeIsAllowed(e){const n=this.getVariableTypes();if(!n)return!0;for(let o=0;o<n.length;o++)if(e===n[o])return!0;return!1}getVariableTypes(){if(this.variableTypes)return this.variableTypes;if(!this.sourceBlock_||this.sourceBlock_.isDeadOrDying())return[""];let e=this.sourceBlock_.workspace.getVariableMap().getTypes();if(this.sourceBlock_.isInFlyout){const n=this.sourceBlock_.workspace.getPotentialVariableMap();if(!n)return e;e=Array.from(new Set([...e,...n.getTypes()]))}return e}setTypes(e=null,n=""){var o=this.getText();if(Array.isArray(e)){if(e.length===0)throw Error(`'variableTypes' of field variable ${o} was an empty list. If you want to include all variable types, pass 'null' instead.`);o=!1;for(let a=0;a<e.length;a++)e[a]===n&&(o=!0);if(!o)throw Error("Invalid default type '"+n+"' in the definition of a FieldVariable")}else if(e!==null)throw Error(`'variableTypes' was not an array or null in the definition of FieldVariable ${o}`);this.defaultType=n,this.variableTypes=e}refreshVariableName(){this.forceRerender()}onItemSelected_(e,n){if(e=n.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(e===gg&&this.variable){r.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);return}if(e===mg&&this.variable){e=this.variable.getWorkspace(),r.deleteVariable$$module$build$src$core$variables(e,this.variable,this.sourceBlock_);return}}this.setValue(e)}referencesVariables(){return!0}static fromJson(e){return new this(rr(e.variable),void 0,void 0,void 0,e)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const e=this.getText();let n=[];var o=this.getSourceBlock();if(o&&!o.isDeadOrDying()){o=o.workspace;const p=this.getVariableTypes();for(let v=0;v<p.length;v++){const X=p[v],Ie=o.getVariableMap().getVariablesOfType(X);if(n=n.concat(Ie),o.isFlyout){var a=void 0,d=void 0;n=n.concat((d=(a=o.getPotentialVariableMap())==null?void 0:a.getVariablesOfType(X))!=null?d:[])}}}for(n.sort(ra),a=[],d=0;d<n.length;d++)a[d]=[n[d].getName(),n[d].getId()];return a.push([r.Msg$$module$build$src$core$msg.RENAME_VARIABLE,gg]),r.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&a.push([r.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",e),mg]),a}};Qs("field_variable",Ou);var Yg=class extends Pa{constructor(e,n,o,a,d,p){super(Lt.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,e!==Lt.SKIP_SETUP&&(p?this.configure_(p):this.setConstraints(n,o,a),this.setValue(e),d&&this.setValidator(d))}configure_(e){super.configure_(e),this.setMinInternal(e.min),this.setMaxInternal(e.max),this.setPrecisionInternal(e.precision)}setConstraints(e,n,o){this.setMinInternal(e),this.setMaxInternal(n),this.setPrecisionInternal(o),this.setValue(this.getValue())}setMin(e){this.setMinInternal(e),this.setValue(this.getValue())}setMinInternal(e){e==null?this.min_=-1/0:(e=Number(e),isNaN(e)||(this.min_=e))}getMin(){return this.min_}setMax(e){this.setMaxInternal(e),this.setValue(this.getValue())}setMaxInternal(e){e==null?this.max_=1/0:(e=Number(e),isNaN(e)||(this.max_=e))}getMax(){return this.max_}setPrecision(e){this.setPrecisionInternal(e),this.setValue(this.getValue())}setPrecisionInternal(e){this.precision_=Number(e)||0;let n=String(this.precision_);n.includes("e")&&(n=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const o=n.indexOf(".");this.decimalPlaces=o===-1?e?0:null:n.length-o-1}getPrecision(){return this.precision_}doClassValidation_(e){return e===null||(e=`${e}`.replace(/O/gi,"0"),e=e.replace(/,/g,""),e=e.replace(/infinity/i,"Infinity"),e=Number(e||0),isNaN(e))?null:(e=Math.min(Math.max(e,this.min_),this.max_),this.precision_&&isFinite(e)&&(e=Math.round(e/this.precision_)*this.precision_),this.decimalPlaces!==null&&(e=Number(e.toFixed(this.decimalPlaces))),e)}widgetCreate_(){const e=super.widgetCreate_();return this.min_>-1/0&&(e.min=`${this.min_}`,_r(e,ir.VALUEMIN,this.min_)),this.max_<1/0&&(e.max=`${this.max_}`,_r(e,ir.VALUEMAX,this.max_)),e}initView(){super.initView(),this.fieldGroup_&&_e(this.fieldGroup_,"blocklyNumberField")}static fromJson(e){return new this(e.value,void 0,void 0,void 0,void 0,e)}};Qs("field_number",Yg),Yg.prototype.DEFAULT_VALUE=0;var bA=class extends pl{constructor(e,n,o){super(String(e??""),n,o),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(e){return new this(rr(e.text),void 0,e)}};Qs("field_label_serializable",bA);var $l=class extends Lt{constructor(e,n,o){super(Lt.SKIP_SETUP),this.SERIALIZABLE=!0,this.value_=this.value_,this.checkChar=$l.CHECK_CHAR,e!==Lt.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(e),n&&this.setValidator(n))}configure_(e){super.configure_(e),e.checkCharacter&&(this.checkChar=e.checkCharacter)}saveState(){const e=this.saveLegacyState($l);return e!==null?e:this.getValueBoolean()}initView(){super.initView();const e=this.getTextElement();_e(this.fieldGroup_,"blocklyCheckboxField"),e.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(e){this.checkChar=e||$l.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(e){return e===!0||e==="TRUE"?"TRUE":e===!1||e==="FALSE"?"FALSE":null}doValueUpdate_(e){this.value_=this.convertValueToBool(e),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool(this.value_))}convertValueToBool(e){return typeof e=="string"?e==="TRUE":!!e}static fromJson(e){return new this(e.checked,void 0,e)}};$l.CHECK_CHAR="",Qs("field_checkbox",$l),$l.prototype.DEFAULT_VALUE=!1;var yA=class{constructor(e,n){this.draggable=e,this.workspace=n,this.dragTarget=null,this.startLoc=e.getRelativeToSurfaceXY()}onDragStart(e){r.getGroup$$module$build$src$core$events$utils()||r.setGroup$$module$build$src$core$events$utils(!0),this.draggable.startDrag(e)}onDrag(e,n){this.moveDraggable(e,n),n=this.getRoot(this.draggable),cs(n)&&n.setDeleteStyle(this.wouldDeleteDraggable(e,n)),this.updateDragTarget(e)}updateDragTarget(e){e=this.workspace.getDragTarget(e);const n=this.getRoot(this.draggable);if(this.dragTarget!==e){let o;(o=this.dragTarget)==null||o.onDragExit(n),e?.onDragEnter(n)}e?.onDragOver(n),this.dragTarget=e}moveDraggable(e,n){n=this.pixelsToWorkspaceUnits(n),n=xe.sum(this.startLoc,n),this.draggable.drag(n,e)}wouldDeleteDraggable(e,n){return(e=this.workspace.getDragTarget(e))&&this.workspace.getComponentManager().hasCapability(e.id,Ht.Capability.DELETE_AREA)?e.wouldDelete(n):!1}onDragEnd(e){const n=r.getGroup$$module$build$src$core$events$utils();var o=this.workspace.getDragTarget(e);const a=this.getRoot(this.draggable);if(o){let d;(d=this.dragTarget)==null||d.onDrop(a)}this.shouldReturnToStart(e,a)&&this.draggable.revertDrag(),(o=cs(a)&&this.wouldDeleteDraggable(e,a))&&this.draggable instanceof bt&&Rd(this.draggable.getRootBlock()),this.draggable.endDrag(e),o&&cs(a)&&(r.setGroup$$module$build$src$core$events$utils(n),a.dispose()),r.setGroup$$module$build$src$core$events$utils(!1),!o&&dr(this.draggable)&&r.getFocusManager$$module$build$src$core$focus_manager().focusNode(this.draggable)}getRoot(e){return e instanceof bt?e.getRootBlock():e}shouldReturnToStart(e,n){return(e=this.workspace.getDragTarget(e))?e.shouldPreventMove(n):!1}pixelsToWorkspaceUnits(e){return e=new xe(e.x/this.workspace.scale,e.y/this.workspace.scale),this.workspace.isMutator&&e.scale(1/this.workspace.options.parentWorkspace.scale),e}};i(Le.BLOCK_DRAGGER,Hn,yA);var Su={};Su.BlockDragStrategy=PL,Su.BubbleDragStrategy=bL,Su.CommentDragStrategy=RL,Su.Dragger=yA;var Kg=class extends ti{constructor(e,n,o){super(e?e.workspace.id:void 0),this.type=de.BLOCK_DRAG,e&&(this.blockId=e.id,this.isStart=n,this.blocks=o)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.blockId===void 0)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return e.isStart=this.isStart,e.blockId=this.blockId,e.blocks=this.blocks,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new Kg),n.isStart=e.isStart,n.blockId=e.blockId,n.blocks=e.blocks,n}};i(Le.EVENT,de.BLOCK_DRAG,Kg);var jg=class extends cl{constructor(e,n,o,a){super(e),this.type=de.BLOCK_FIELD_INTERMEDIATE_CHANGE,this.recordUndo=!1,e&&(this.name=n,this.oldValue=o,this.newValue=a)}toJson(){const e=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return e.name=this.name,e.oldValue=this.oldValue,e.newValue=this.newValue,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new jg),n.name=e.name,n.oldValue=e.oldValue,n.newValue=e.newValue,n}isNull(){return this.oldValue===this.newValue}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(n=n.getBlockById(this.blockId),!n)throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");e=e?this.newValue:this.oldValue,(n=n.getField(this.name))?n.setValue(e):console.warn("Can't set non-existent field: "+this.name)}};i(Le.EVENT,de.BLOCK_FIELD_INTERMEDIATE_CHANGE,jg);var Jg=class extends cl{constructor(e){super(e),this.type=de.BLOCK_MOVE,e&&(e.isShadow()&&(this.recordUndo=!1),e=this.currentLocation(),this.oldParentId=e.parentId,this.oldInputName=e.inputName,this.oldCoordinate=e.coordinate)}toJson(){const e=super.toJson();return e.oldParentId=this.oldParentId,e.oldInputName=this.oldInputName,this.oldCoordinate&&(e.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),e.newParentId=this.newParentId,e.newInputName=this.newInputName,this.newCoordinate&&(e.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(e.reason=this.reason),this.recordUndo||(e.recordUndo=this.recordUndo),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new Jg),n.oldParentId=e.oldParentId,n.oldInputName=e.oldInputName,e.oldCoordinate&&(o=e.oldCoordinate.split(","),n.oldCoordinate=new xe(Number(o[0]),Number(o[1]))),n.newParentId=e.newParentId,n.newInputName=e.newInputName,e.newCoordinate&&(o=e.newCoordinate.split(","),n.newCoordinate=new xe(Number(o[0]),Number(o[1]))),e.reason!==void 0&&(n.reason=e.reason),e.recordUndo!==void 0&&(n.recordUndo=e.recordUndo),n}recordNew(){const e=this.currentLocation();this.newParentId=e.parentId,this.newInputName=e.inputName,this.newCoordinate=e.coordinate}setReason(e){this.reason=e}currentLocation(){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var n=e.getBlockById(this.blockId);if(!n)throw Error("The block associated with the block move event could not be found");e={};const o=n.getParent();return o?(e.parentId=o.id,(n=o.getInputWithBlock(n))&&(e.inputName=n.name)):e.coordinate=n.getRelativeToSurfaceXY(),e}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&xe.equals(this.oldCoordinate,this.newCoordinate)}run(e){var n=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var o=n.getBlockById(this.blockId);if(o){var a=e?this.newParentId:this.oldParentId,d=e?this.newInputName:this.oldInputName;if(e=e?this.newCoordinate:this.oldCoordinate,a){var p=n.getBlockById(a);if(!p){console.warn("Can't connect to non-existent block: "+a);return}}if(o.getParent()&&o.unplug(),e)d=o.getRelativeToSurfaceXY(),o.moveBy(e.x-d.x,e.y-d.y,this.reason);else{n=o.outputConnection,(!n||o.previousConnection&&o.previousConnection.isConnected())&&(n=o.previousConnection);let v,X;o=(X=n)==null?void 0:X.type,d?(o=p.getInput(d))&&(v=o.connection):o===Ye.PREVIOUS_STATEMENT&&(v=p.nextConnection),v&&n?n.connect(v):console.warn("Can't connect to non-existent input: "+d)}}else console.warn("Can't move non-existent block: "+this.blockId)}};i(Le.EVENT,de.BLOCK_MOVE,Jg);var qg=class extends ti{constructor(e,n,o){super(e?e.workspace.id:void 0),this.type=de.BUBBLE_OPEN,e&&(this.blockId=e.id,this.isOpen=n,this.bubbleType=o)}toJson(){const e=super.toJson();if(this.isOpen===void 0)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return e.isOpen=this.isOpen,e.bubbleType=this.bubbleType,e.blockId=this.blockId||"",e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new qg),n.isOpen=e.isOpen,n.bubbleType=e.bubbleType,n.blockId=e.blockId,n}},Zg;(function(e){e.MUTATOR="mutator",e.COMMENT="comment",e.WARNING="warning"})(Zg||(Zg={})),i(Le.EVENT,de.BUBBLE_OPEN,qg);var ai=class extends Ea{constructor(e){super(),this.isBlank=!e,e&&(this.commentId=e.id,this.workspaceId=e.workspace.id,this.group=r.getGroup$$module$build$src$core$events$utils(),this.recordUndo=j())}toJson(){const e=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.commentId=this.commentId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new ai),n.commentId=e.commentId,n}static CommentCreateDeleteHelper(e,n){const o=e.getEventWorkspace_();if(n){if(!e.json)throw Error("Encountered a comment event without proper json");kc(e.json,o)}else{if(!e.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=o.getCommentById(e.commentId))?n.dispose():console.warn("Can't delete non-existent comment: "+e.commentId)}}},Qg=class extends ai{constructor(e,n,o){super(e),this.type=de.COMMENT_CHANGE,e&&(this.oldContents_=typeof n>"u"?"":n,this.newContents_=typeof o>"u"?"":o)}toJson(){const e=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return e.oldContents=this.oldContents_,e.newContents=this.newContents_,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new Qg),n.oldContents_=e.oldContents,n.newContents_=e.newContents,n}isNull(){return this.oldContents_===this.newContents_}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){var o=e?this.newContents_:this.oldContents_;if(o===void 0)throw Error(e?"The new contents is undefined. Either pass a value to the constructor, or call fromJson":"The old contents is undefined. Either pass a value to the constructor, or call fromJson");n.setText(o)}else console.warn("Can't change non-existent comment: "+this.commentId)}};i(Le.EVENT,de.COMMENT_CHANGE,Qg);var e0=class extends ai{constructor(e,n){super(e),this.newCollapsed=n,this.type=de.COMMENT_COLLAPSE}toJson(){const e=super.toJson();if(this.newCollapsed===void 0)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return e.newCollapsed=this.newCollapsed,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new e0),n.newCollapsed=e.newCollapsed,n}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(n=n.getCommentById(this.commentId))?n.setCollapsed(e?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};i(Le.EVENT,de.COMMENT_COLLAPSE,e0);var t0=class extends ai{constructor(e){super(e),this.type=de.COMMENT_CREATE,e&&(this.xml=Vc(e),this.json=ea(e,{addCoordinates:!0}))}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Zs(this.xml),e.json=this.json,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new t0),n.xml=r.textToDom$$module$build$src$core$utils$xml(e.xml),n.json=e.json,n}run(e){ai.CommentCreateDeleteHelper(this,e)}};i(Le.EVENT,de.COMMENT_CREATE,t0);var r0=class extends ai{constructor(e){super(e),this.type=de.COMMENT_DELETE,e&&(this.xml=Vc(e),this.json=ea(e,{addCoordinates:!0}))}run(e){ai.CommentCreateDeleteHelper(this,!e)}toJson(){const e=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return e.xml=Zs(this.xml),e.json=this.json,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new r0),n.xml=r.textToDom$$module$build$src$core$utils$xml(e.xml),n.json=e.json,n}};i(Le.EVENT,de.COMMENT_DELETE,r0);var n0=class extends ti{constructor(e,n){super(e?e.workspace.id:void 0),this.type=de.COMMENT_DRAG,e&&(this.commentId=e.id,this.isStart=n)}toJson(){const e=super.toJson();if(this.isStart===void 0)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(this.commentId===void 0)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return e.isStart=this.isStart,e.commentId=this.commentId,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new n0),n.isStart=e.isStart,n.commentId=e.commentId,n}};i(Le.EVENT,de.COMMENT_DRAG,n0);var s0=class extends ai{constructor(e){super(e),this.type=de.COMMENT_MOVE,e&&(this.comment_=e,this.oldCoordinate_=e.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(e){this.reason=e}setOldCoordinate(e){this.oldCoordinate_=e}toJson(){const e=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return e.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,e.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new s0),o=e.oldCoordinate.split(","),n.oldCoordinate_=new xe(Number(o[0]),Number(o[1])),o=e.newCoordinate.split(","),n.newCoordinate_=new xe(Number(o[0]),Number(o[1])),n}isNull(){return xe.equals(this.oldCoordinate_,this.newCoordinate_)}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){if(e=e?this.newCoordinate_:this.oldCoordinate_,!e)throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");n.moveTo(e)}else console.warn("Can't move non-existent comment: "+this.commentId)}};i(Le.EVENT,de.COMMENT_MOVE,s0);var i0=class extends ai{constructor(e){super(e),this.type=de.COMMENT_RESIZE,e&&(this.oldSize=e.getSize())}recordCurrentSizeAsNewSize(){if(this.newSize)throw Error("Tried to record the new size of a comment on the same event twice.");var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId),!e)throw Error("The comment associated with the comment resize event could not be found");this.newSize=e.getSize()}toJson(){const e=super.toJson();if(!this.oldSize)throw Error("The old comment size is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newSize)throw Error("The new comment size is undefined. Either call recordCurrentSizeAsNewSize, or call fromJson");return e.oldWidth=Math.round(this.oldSize.width),e.oldHeight=Math.round(this.oldSize.height),e.newWidth=Math.round(this.newSize.width),e.newHeight=Math.round(this.newSize.height),e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new i0),n.oldSize=new lt(e.oldWidth,e.oldHeight),n.newSize=new lt(e.newWidth,e.newHeight),n}isNull(){return lt.equals(this.oldSize,this.newSize)}run(e){var n=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(n=n.getCommentById(this.commentId)){if(e=e?this.newSize:this.oldSize,!e)throw Error("Either oldSize or newSize is undefined. Either pass a comment to the constructor and call recordCurrentSizeAsNewSize, or call fromJson");n.setSize(e)}else console.warn("Can't resize non-existent comment: "+this.commentId)}};i(Le.EVENT,de.COMMENT_RESIZE,i0);var o0=class extends ti{constructor(e,n,o){super(o),this.type=de.TOOLBOX_ITEM_SELECT,this.oldItem=e??void 0,this.newItem=n??void 0}toJson(){const e=super.toJson();return e.oldItem=this.oldItem,e.newItem=this.newItem,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new o0),n.oldItem=e.oldItem,n.newItem=e.newItem,n}};i(Le.EVENT,de.TOOLBOX_ITEM_SELECT,o0);var l0=class extends wa{constructor(e,n,o){super(e),this.oldType=n,this.newType=o,this.type=de.VAR_TYPE_CHANGE}toJson(){const e=super.toJson();if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");return e.oldType=this.oldType,e.newType=this.newType,e}static fromJson(e,n,o){return n=super.fromJson(e,n,o??new l0),n.oldType=e.oldType,n.newType=e.newType,n}run(e){const n=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldType||!this.newType)throw Error("The variable's types are undefined. Either pass them to the constructor, or call fromJson");const o=n.getVariableMap().getVariableById(this.varId);o&&(e?n.getVariableMap().changeVariableType(o,this.newType):n.getVariableMap().changeVariableType(o,this.oldType))}};i(Le.EVENT,de.VAR_TYPE_CHANGE,l0);var kA=class extends Ea{constructor(e){super(),this.isBlank=!0,this.recordUndo=!1,this.type=de.FINISHED_LOADING,this.isBlank=!!e,e&&(this.workspaceId=e.id)}};i(Le.EVENT,de.FINISHED_LOADING,kA);var wA,MA,DA,PA,FA,BA,UA,HA,GA,VA,WA,XA,zA,YA,KA,jA,JA,qA,ZA,QA,eC,tC,rC,nC,Ve;r.BLOCK_CHANGE$$module$build$src$core$events$events=de.BLOCK_CHANGE,r.BLOCK_CREATE$$module$build$src$core$events$events=de.BLOCK_CREATE,r.BLOCK_DELETE$$module$build$src$core$events$events=de.BLOCK_DELETE,wA=de.BLOCK_DRAG,r.BLOCK_MOVE$$module$build$src$core$events$events=de.BLOCK_MOVE,MA=de.BLOCK_FIELD_INTERMEDIATE_CHANGE,DA=de.BUBBLE_OPEN,PA=de.BLOCK_CHANGE,FA=de.CLICK,BA=de.COMMENT_CHANGE,UA=de.COMMENT_CREATE,HA=de.COMMENT_DELETE,GA=de.COMMENT_MOVE,VA=de.COMMENT_RESIZE,WA=de.COMMENT_DRAG,XA=de.BLOCK_CREATE,zA=de.BLOCK_DELETE,YA=de.FINISHED_LOADING,KA=de.BLOCK_MOVE,jA=de.SELECTED,JA=de.THEME_CHANGE,qA=de.TOOLBOX_ITEM_SELECT,ZA=de.TRASHCAN_OPEN,QA=de.UI,eC=de.VAR_CREATE,tC=de.VAR_DELETE,rC=de.VAR_RENAME,nC=de.VIEWPORT_CHANGE,Ve={},Ve.Abstract=Ea,Ve.BLOCK_CHANGE=r.BLOCK_CHANGE$$module$build$src$core$events$events,Ve.BLOCK_CREATE=r.BLOCK_CREATE$$module$build$src$core$events$events,Ve.BLOCK_DELETE=r.BLOCK_DELETE$$module$build$src$core$events$events,Ve.BLOCK_DRAG=wA,Ve.BLOCK_FIELD_INTERMEDIATE_CHANGE=MA,Ve.BLOCK_MOVE=r.BLOCK_MOVE$$module$build$src$core$events$events,Ve.BUBBLE_OPEN=DA,Ve.BUMP_EVENTS=SR,Ve.BlockBase=cl,Ve.BlockChange=ul,Ve.BlockCreate=_g,Ve.BlockDelete=Eg,Ve.BlockDrag=Kg,Ve.BlockFieldIntermediateChange=jg,Ve.BlockMove=Jg,Ve.BubbleOpen=qg,Ve.BubbleType=Zg,Ve.CHANGE=PA,Ve.CLICK=FA,Ve.COMMENT_CHANGE=BA,Ve.COMMENT_CREATE=UA,Ve.COMMENT_DELETE=HA,Ve.COMMENT_DRAG=WA,Ve.COMMENT_MOVE=GA,Ve.COMMENT_RESIZE=VA,Ve.CREATE=XA,Ve.Click=PE,Ve.ClickTarget=FE,Ve.CommentBase=ai,Ve.CommentChange=Qg,Ve.CommentCollapse=e0,Ve.CommentCreate=t0,Ve.CommentDelete=r0,Ve.CommentDrag=n0,Ve.CommentMove=s0,Ve.CommentResize=i0,Ve.DELETE=zA,Ve.FINISHED_LOADING=YA,Ve.FinishedLoading=kA,Ve.MOVE=KA,Ve.SELECTED=jA,Ve.Selected=pg,Ve.THEME_CHANGE=JA,Ve.TOOLBOX_ITEM_SELECT=qA,Ve.TRASHCAN_OPEN=ZA,Ve.ThemeChange=fg,Ve.ToolboxItemSelect=o0,Ve.TrashcanOpen=Ug,Ve.UI=QA,Ve.UiBase=ti,Ve.VAR_CREATE=eC,Ve.VAR_DELETE=tC,Ve.VAR_RENAME=rC,Ve.VIEWPORT_CHANGE=nC,Ve.VarBase=wa,Ve.VarCreate=Pg,Ve.VarDelete=Fg,Ve.VarRename=Bg,Ve.VarTypeChange=l0,Ve.ViewportChange=Tg,Ve.clearPendingUndo=q,Ve.disable=r.disable$$module$build$src$core$events$utils,Ve.disableOrphans=tt,Ve.enable=r.enable$$module$build$src$core$events$utils,Ve.filter=J,Ve.fire=Y,Ve.fromJson=be,Ve.get=ce,Ve.getDescendantIds=Pe,Ve.getGroup=r.getGroup$$module$build$src$core$events$utils,Ve.getRecordUndo=j,Ve.isEnabled=he,Ve.setGroup=r.setGroup$$module$build$src$core$events$utils,Ve.setRecordUndo=r.setRecordUndo$$module$build$src$core$events$utils;var ci={};ci.BottomRow=OA,ci.ConstantProvider=$A,ci.Drawer=IA,ci.PathObject=AA,ci.RenderInfo=LA,ci.Renderer=Xg,ci.RightConnectionShape=SA,ci.StatementInput=P_,ci.TopRow=RA,vE();var Ar={};Ar.registerCleanup=dE,Ar.registerCollapse=fE,Ar.registerCollapseExpandBlock=IE,Ar.registerComment=mE,Ar.registerCommentCreate=CE,Ar.registerCommentDelete=LE,Ar.registerCommentDuplicate=AE,Ar.registerCommentOptions=iR,Ar.registerDefaultOptions=vE,Ar.registerDelete=SE,Ar.registerDeleteAll=EE,Ar.registerDisable=OE,Ar.registerDuplicate=gE,Ar.registerExpand=TE,Ar.registerHelp=RE,Ar.registerInline=$E,Ar.registerRedo=hE,Ar.registerUndo=uE;var a0="button",sC=class{load(e,n){return e=new In(n.getWorkspace(),n.targetWorkspace,e,!1),e.show(),new ba(e,a0)}gapForItem(e,n){return n}disposeItem(e){e=e.getElement(),e instanceof In&&e.dispose()}getType(){return a0}};i(Le.FLYOUT_INFLATER,a0,sC);var Ru={};Ru.Bubble=St,Ru.MiniWorkspaceBubble=wi,Ru.TextBubble=FL,Ru.TextInputBubble=E_;var Lw="WORKSPACE_AT_BLOCK_CAPACITY",c0="block",iC=class{constructor(){this.permanentlyDisabledBlocks=new Set,this.listeners=new Map,this.capacityWrapper=this.filterFlyoutBasedOnCapacity.bind(this)}load(e,n){return this.setFlyout(n),e=this.createBlock(e,n.getWorkspace()),e.isEnabled()?this.updateStateBasedOnCapacity(e):this.permanentlyDisabledBlocks.add(e),e.getDescendants(!1).forEach(o=>o.isInFlyout=!0),this.addBlockListeners(e),new ba(e,c0)}createBlock(e,n){return e.blockxml?(e=typeof e.blockxml=="string"?r.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,n=tl(e,n)):(e.enabled===void 0&&(e.enabled=e.disabled!=="true"&&e.disabled!==!0),e.disabledReasons===void 0&&e.enabled===!1&&(e.disabledReasons=[us]),"x"in e&&delete e.x,"y"in e&&delete e.y,n=sa(e,n)),n}gapForItem(e,n){let o;return e.gap?o=parseInt(String(e.gap)):e.blockxml&&(e=typeof e.blockxml=="string"?r.textToDom$$module$build$src$core$utils$xml(e.blockxml):e.blockxml,o=parseInt(e.getAttribute("gap"))),!o||isNaN(o)?n:o}disposeItem(e){e=e.getElement(),e instanceof bt&&(this.removeListeners(e.id),e.dispose(!1,!1))}removeListeners(e){let n;((n=this.listeners.get(e))!=null?n:[]).forEach(o=>k(o)),this.listeners.delete(e)}setFlyout(e){if(this.flyout!==e){if(this.flyout){let o;(o=this.flyout.targetWorkspace)==null||o.removeChangeListener(this.capacityWrapper)}this.flyout=e;var n;(n=this.flyout.targetWorkspace)==null||n.addChangeListener(this.capacityWrapper)}}updateStateBasedOnCapacity(e){let n,o;const a=(n=this.flyout)==null||(o=n.targetWorkspace)==null?void 0:o.isCapacityAvailable(Un(e));for(;e;)e.setDisabledReason(!a,Lw),e=e.getNextBlock()}addBlockListeners(e){const n=[];n.push(A(e.getSvgRoot(),"pointerdown",e,o=>{let a,d;const p=(a=this.flyout)==null||(d=a.targetWorkspace)==null?void 0:d.getGesture(o);p&&this.flyout&&(p.setStartBlock(e),p.handleFlyoutStart(o,this.flyout))})),n.push(I(e.getSvgRoot(),"pointermove",null,()=>{let o,a;!((o=this.flyout)==null||(a=o.targetWorkspace)==null)&&a.isDragging()||e.addSelect()})),n.push(I(e.getSvgRoot(),"pointerleave",null,()=>{let o,a;!((o=this.flyout)==null||(a=o.targetWorkspace)==null)&&a.isDragging()||e.removeSelect()})),this.listeners.set(e.id,n)}filterFlyoutBasedOnCapacity(e){!this.flyout||e&&e.type!==de.BLOCK_CREATE&&e.type!==de.BLOCK_DELETE||this.flyout.getWorkspace().getTopBlocks(!1).forEach(n=>{this.permanentlyDisabledBlocks.has(n)||this.updateStateBasedOnCapacity(n)})}getType(){return c0}};i(Le.FLYOUT_INFLATER,c0,iC);var oC=class extends v_{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(e){return super.getCSS_(e).concat([`${e} .blocklyInsertionMarker>.blocklyPathLight,`,`${e} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},lC=class{constructor(e){this.inlineSteps_=this.steps_="",this.info_=e,this.RTL_=this.info_.RTL,e=e.getRenderer(),this.constants_=e.getConstants(),this.highlightConstants_=e.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+`
`+this.inlineSteps_}drawTopCorner(e){this.steps_+=Jt(e.xPos,this.info_.startY);for(let n=0,o;o=e.elements[n];n++)ne.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:ne.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):ne.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:ne.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):ne.isSpacer(o)&&o.width!==0&&(this.steps_+=qe("H",o.xPos+o.width-this.highlightOffset));this.steps_+=qe("H",e.xPos+e.width-this.highlightOffset)}drawJaggedEdge_(e){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+qe("v",e.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(e){const n=e.getLastInput();if(this.RTL_){const o=e.height-n.connectionHeight;this.steps_+=Dr(n.xPos+n.width-this.highlightOffset,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+qe("v",o)}else this.steps_+=Dr(n.xPos+n.width,e.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(e){const n=e.getLastInput();if(n)if(this.RTL_){const o=e.height-2*this.insideCornerPaths_.height;this.steps_+=Dr(n.xPos,e.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+qe("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+ei(e.width-n.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Dr(n.xPos,e.yPos+e.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+ei(e.width-n.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(e){const n=e.xPos+e.width-this.highlightOffset;e instanceof wg&&e.followsStatement&&(this.steps_+=qe("H",n)),this.RTL_&&(this.steps_+=qe("H",n),e.height>this.highlightOffset&&(this.steps_+=qe("V",e.yPos+e.height-this.highlightOffset)))}drawBottomRow(e){if(this.RTL_)this.steps_+=qe("V",e.baseline-this.highlightOffset);else{const n=this.info_.bottomRow.elements[0];ne.isLeftSquareCorner(n)?this.steps_+=Dr(e.xPos+this.highlightOffset,e.baseline-this.highlightOffset):ne.isLeftRoundedCorner(n)&&(this.steps_+=Dr(e.xPos,e.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var e=this.info_.outputConnection;e&&(e=e.connectionOffsetY+e.height,this.RTL_?this.steps_+=Dr(this.info_.startX,e):(this.steps_+=Dr(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=qe("V",e)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(e=this.info_.topRow,ne.isLeftRoundedCorner(e.elements[0])?this.steps_+=qe("V",this.outsideCornerPaths_.height):this.steps_+=qe("V",e.capline+this.highlightOffset))}drawInlineInput(e){const n=this.highlightOffset,o=e.xPos+e.connectionWidth;var a=e.centerline-e.height/2;const d=e.width-e.connectionWidth,p=a+n;this.RTL_?(a=e.connectionOffsetY-n,e=e.height-(e.connectionOffsetY+e.connectionHeight)+n,this.inlineSteps_+=Dr(o-n,p)+qe("v",a)+this.puzzleTabPaths_.pathDown(this.RTL_)+qe("v",e)+qe("h",d)):this.inlineSteps_+=Dr(e.xPos+e.width+n,p)+qe("v",e.height)+qe("h",-d)+Dr(o,a+e.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},aC=class extends N_{constructor(e,n){super(e,n),this.highlighter_=new lC(n)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const e=this.block_.pathObject;e.setPath(this.outlinePath_+`
`+this.inlinePath_),e.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&e.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(e){this.highlighter_.drawJaggedEdge_(e),super.drawJaggedEdge_(e)}drawValueInput_(e){this.highlighter_.drawValueInput(e),super.drawValueInput_(e)}drawStatementInput_(e){this.highlighter_.drawStatementInput(e),super.drawStatementInput_(e)}drawRightSideRow_(e){this.highlighter_.drawRightSideRow(e),this.outlinePath_+=qe("H",e.xPos+e.width)+qe("V",e.yPos+e.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(e){this.highlighter_.drawInlineInput(e),super.drawInlineInput_(e)}positionInlineInputConnection_(e){const n=e.centerline-e.height/2;if(e.connectionModel){let o=e.xPos+e.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,n+e.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(e){const n=e.getLastInput();if(n!=null&&n.connectionModel){let o=e.xPos+e.statementEdge+n.notchOffset;o=this.info_.RTL?o*-1:o+this.constants_.DARK_PATH_OFFSET,n.connectionModel.setOffsetInBlock(o,e.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(e){const n=e.getLastInput();if(n&&n.connectionModel){let o=e.xPos+e.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),n.connectionModel.setOffsetInBlock(o,e.yPos)}}positionNextConnection_(){const e=this.info_.bottomRow;if(e.connection){const n=e.connection,o=n.xPos;n.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,e.baseline+this.constants_.DARK_PATH_OFFSET)}}},cC=class{constructor(e){this.OFFSET=.5,this.constantProvider=e,this.START_POINT=Jt(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e+n)-n,a=Jt(o,o)+nr("a","0 0,0",e,Je(-o-n,e-o)),d=nr("a","0 0,0",e+n,Je(e+n,e+n)),p=Jt(o,-o)+nr("a","0 0,0",e+n,Je(e-o,o+n));return{width:e+n,height:e,pathTop(v){return v?a:""},pathBottom(v){return v?d:p}}}makeOutsideCorner(){const e=this.constantProvider.CORNER_RADIUS,n=this.OFFSET,o=(1-Math.SQRT1_2)*(e-n)+n,a=Jt(o,o)+nr("a","0 0,1",e-n,Je(e-o,-o+n)),d=Jt(n,e)+nr("a","0 0,1",e-n,Je(e,-e+n)),p=-o,v=Jt(o,p)+nr("a","0 0,1",e-n,Je(-o+n,-p-e));return{height:e,topLeft(X){return X?a:d},bottomLeft(){return v}}}makePuzzleTab(){const e=this.constantProvider.TAB_WIDTH,n=this.constantProvider.TAB_HEIGHT,o=Jt(-2,-n+2.5+.9)+ei(e*-.45,-2.1),a=qe("v",2.5)+Jt(-e*.97,2.5)+bn("q",[Je(-e*.05,10),Je(e*.3,9.5)])+Jt(e*.67,-1.9)+qe("v",2.5),d=qe("v",-1.5)+Jt(e*-.92,-.5)+bn("q",[Je(e*-.19,-5.5),Je(0,-11)])+Jt(e*.92,1),p=Jt(-5,n-.7)+ei(e*.46,-2.1);return{width:e,height:n,pathUp(v){return v?o:d},pathDown(v){return v?a:p}}}makeNotch(){return{pathLeft:qe("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:ei(5.1,2.6)+Jt(-10.2,6.8)+ei(5.1,2.6),height:12,width:10.2}}makeStartHat(){const e=this.constantProvider.START_HAT.height,n=Jt(25,-8.7)+bn("c",[Je(29.7,-6.2),Je(57.2,-.5),Je(75,8.7)]),o=bn("c",[Je(17.8,-9.2),Je(45.3,-14.9),Je(75,-8.7)])+Dr(100.5,e+.5);return{path(a){return a?n:o}}}},uC=class extends yg{constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},hC=class extends C_{constructor(e,n){super(e,n),this.constants_=e,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},dC=class extends mu{constructor(e,n){super(e,n),this.renderer_=e}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Yn||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(e,n){this.isInline&&e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new uC(this.constants_,e)),n.hasInlineInput=!0):e instanceof Yn?(n.elements.push(new hC(this.constants_,e)),n.hasStatement=!0):e instanceof r.ValueInput$$module$build$src$core$inputs$value_input?(n.elements.push(new xg(this.constants_,e)),n.hasExternalInput=!0):(e instanceof ni||e instanceof Di)&&(n.minHeight=Math.max(n.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),n.hasDummyInput=!0),this.isInline||n.align!==null||(n.align=e.align)}addElemSpacing_(){let e=!1;for(let o=0,a;a=this.rows[o];o++)a.hasExternalInput&&(e=!0);for(let o=0,a;a=this.rows[o];o++){var n=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new Kn(this.constants_,this.getInRowSpacing_(null,n[0]))),n.length){for(let d=0;d<n.length-1;d++){a.elements.push(n[d]);const p=this.getInRowSpacing_(n[d],n[d+1]);a.elements.push(new Kn(this.constants_,p))}a.elements.push(n[n.length-1]),a.endsWithElemSpacer()&&(n=this.getInRowSpacing_(n[n.length-1],null),e&&a.hasDummyInput&&(n+=this.constants_.TAB_WIDTH),a.elements.push(new Kn(this.constants_,n)))}}}getInRowSpacing_(e,n){if(!e)return n&&ne.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&ne.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&ne.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ne.isInput(e)&&(!n||ne.isStatementInput(n)))return ne.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:ne.isIcon(e)?this.constants_.LARGE_PADDING*2+1:ne.isHat(e)?this.constants_.NO_PADDING:ne.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:ne.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:ne.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ne.isInput(e)&&!n){if(ne.isExternalInput(e))return this.constants_.NO_PADDING;if(ne.isInlineInput(e))return this.constants_.LARGE_PADDING;if(ne.isStatementInput(e))return this.constants_.NO_PADDING}if(!ne.isInput(e)&&n&&ne.isInput(n)){if(ne.isField(e)&&e.isEditable){if(ne.isInlineInput(n)||ne.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(ne.isInlineInput(n)||ne.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(ne.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ne.isIcon(e)&&n&&!ne.isInput(n))return this.constants_.LARGE_PADDING;if(ne.isInlineInput(e)&&n&&ne.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ne.isLeftSquareCorner(e)&&n){if(ne.isHat(n))return this.constants_.NO_PADDING;if(ne.isPreviousConnection(n))return n.notchOffset;if(ne.isNextConnection(n))return n.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(ne.isLeftRoundedCorner(e)&&n){if(ne.isPreviousConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS;if(ne.isNextConnection(n))return n.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return ne.isField(e)&&n&&ne.isField(n)&&e.isEditable===n.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:n&&ne.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return ne.isTopRow(e)&&ne.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ne.isTopRow(e)||ne.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||!e.hasStatement&&n.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(ne.isSpacer(n))return e.yPos+n.height/2;if(ne.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,ne.isNextConnection(n)?e+n.height/2:e-n.height/2;if(ne.isTopRow(e))return ne.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let o=e.yPos;return ne.isField(n)||ne.isIcon(n)?(o+=n.height/2,(e.hasInlineInput||e.hasStatement)&&n.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=e.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=ne.isInlineInput(n)?o+n.height/2:o+e.height/2,o}alignRowElements_(){if(this.isInline){var e=0,n=new WeakMap,o=null;for(let a=this.rows.length-1,d;d=this.rows[a];a--)n.set(d,e),ne.isInputRow(d)&&(d.hasStatement&&this.alignStatementRow_(d),o&&o.hasStatement&&d.width<o.width?n.set(d,o.width):e=d.hasStatement?d.width:Math.max(e,d.width),o=d);e=0;for(let a=0,d;d=this.rows[a];a++)d.hasStatement?e=this.getDesiredRowWidth_(d):ne.isSpacer(d)?d.width=Math.max(e,n.get(d)):(o=d.width,e=Math.max(e,n.get(d))-o,e>0&&this.addAlignmentPadding_(d,e),e=d.width)}else super.alignRowElements_()}getDesiredRowWidth_(e){return this.isInline&&e.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(e)}finalize_(){let e=0,n=0;for(let a=0,d;d=this.rows[a];a++){d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var o=n-this.topRow.ascenderHeight;d===this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,n+=o),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,o.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=n+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},_C=class extends x_{constructor(e,n,o){super(e,n,o),this.constants=o,this.colourDark="#000000",this.svgPathDark=b(ue.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=b(ue.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(e){this.svgPath.setAttribute("d",e),this.svgPathDark.setAttribute("d",e)}setHighlightPath(e){this.svgPathLight.setAttribute("d",e)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(e){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(e),this.svgPath.setAttribute("stroke","none")}setStyle(e){this.style=e,this.colourDark=Qo("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(e){super.updateHighlighted(e),this.svgPathLight.style.display=e?"none":"inline"}updateShadow_(e){if(e){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(e){super.updateDisabled_(e),e&&this.svgPath.setAttribute("stroke","none")}},fC=class extends b_{constructor(e){super(e),this.highlightConstants=null}init(e,n){super.init(e,n),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(e,n,o){super.refreshDom(e,n,o),this.getHighlightConstants().init()}makeConstants_(){return new oC}makeRenderInfo_(e){return new dC(this,e)}makeDrawer_(e,n){return new aC(e,n)}makePathObject(e,n){return new _C(e,n,this.getConstants())}makeHighlightConstants_(){return new cC(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};zc("geras",fC);var ui={};ui.ConstantProvider=oC,ui.Drawer=aC,ui.HighlightConstantProvider=cC,ui.Highlighter=lC,ui.InlineInput=uC,ui.PathObject=_C,ui.RenderInfo=dC,ui.Renderer=fC,ui.StatementInput=hC;var TC=class extends mu{constructor(e,n){super(e,n)}getRenderer(){return this.renderer_}addElemSpacing_(){let e=!1;for(var n=0;n<this.rows.length;n++)if(this.rows[n].hasExternalInput){e=!0;break}for(n=0;n<this.rows.length;n++){const a=this.rows[n];var o=a.elements;if(a.elements=[],a.startsWithElemSpacer()&&a.elements.push(new Kn(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(let d=0;d<o.length-1;d++){a.elements.push(o[d]);const p=this.getInRowSpacing_(o[d],o[d+1]);a.elements.push(new Kn(this.constants_,p))}a.elements.push(o[o.length-1]),a.endsWithElemSpacer()&&(o=this.getInRowSpacing_(o[o.length-1],null),e&&a.hasDummyInput&&(o+=this.constants_.TAB_WIDTH),a.elements.push(new Kn(this.constants_,o)))}}}getInRowSpacing_(e,n){if(!e)return n&&ne.isField(n)&&n.isEditable?this.constants_.MEDIUM_PADDING:n&&ne.isInlineInput(n)?this.constants_.MEDIUM_LARGE_PADDING:n&&ne.isStatementInput(n)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ne.isInput(e)&&!n)return ne.isField(e)&&e.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:ne.isIcon(e)?this.constants_.LARGE_PADDING*2+1:ne.isHat(e)?this.constants_.NO_PADDING:ne.isPreviousOrNextConnection(e)?this.constants_.LARGE_PADDING:ne.isLeftRoundedCorner(e)?this.constants_.MIN_BLOCK_WIDTH:ne.isJaggedEdge(e)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ne.isInput(e)&&!n){if(ne.isExternalInput(e))return this.constants_.NO_PADDING;if(ne.isInlineInput(e))return this.constants_.LARGE_PADDING;if(ne.isStatementInput(e))return this.constants_.NO_PADDING}if(!ne.isInput(e)&&n&&ne.isInput(n)){if(ne.isField(e)&&e.isEditable){if(ne.isInlineInput(n)||ne.isExternalInput(n))return this.constants_.SMALL_PADDING}else{if(ne.isInlineInput(n)||ne.isExternalInput(n))return this.constants_.MEDIUM_LARGE_PADDING;if(ne.isStatementInput(n))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ne.isIcon(e)&&n&&!ne.isInput(n))return this.constants_.LARGE_PADDING;if(ne.isInlineInput(e)&&n&&ne.isField(n))return n.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ne.isLeftSquareCorner(e)&&n){if(ne.isHat(n))return this.constants_.NO_PADDING;if(ne.isPreviousConnection(n)||ne.isNextConnection(n))return n.notchOffset}return ne.isLeftRoundedCorner(e)&&n?n.notchOffset-this.constants_.CORNER_RADIUS:ne.isField(e)&&n&&ne.isField(n)&&e.isEditable===n.isEditable?e.width===0?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING:n&&ne.isJaggedEdge(n)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(e,n){return ne.isTopRow(e)&&ne.isBottomRow(n)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ne.isTopRow(e)||ne.isBottomRow(n)?this.constants_.NO_PADDING:e.hasExternalInput&&n.hasExternalInput?this.constants_.LARGE_PADDING:!e.hasStatement&&n.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:e.hasStatement&&n.hasStatement||e.hasDummyInput||n.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(e,n){if(ne.isSpacer(n))return e.yPos+n.height/2;if(ne.isBottomRow(e))return e=e.yPos+e.height-e.descenderHeight,ne.isNextConnection(n)?e+n.height/2:e-n.height/2;if(ne.isTopRow(e))return ne.isHat(n)?e.capline-n.height/2:e.capline+n.height/2;let o=e.yPos;return o=ne.isField(n)&&e.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+n.height/2):o+e.height/2}finalize_(){let e=0,n=0;for(var o=0;o<this.rows.length;o++){const d=this.rows[o];d.yPos=n,d.xPos=this.startX,n+=d.height,e=Math.max(e,d.widthWithConnectedBlocks);var a=n-this.topRow.ascenderHeight;d===this.bottomRow&&a<this.constants_.MIN_BLOCK_HEIGHT&&(a=this.constants_.MIN_BLOCK_HEIGHT-a,this.bottomRow.height+=a,n+=a),this.recordElemPositions_(d)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(o=this.block_.nextConnection.targetBlock())&&(e=Math.max(e,o.getHeightWidth().width)),this.bottomRow.baseline=n-this.bottomRow.descenderHeight,this.widthWithChildren=e+this.startX,this.height=n,this.startY=this.topRow.capline}},pC=class extends b_{constructor(e){super(e)}makeRenderInfo_(e){return new TC(this,e)}};zc("thrasos",pC);var u0={};u0.RenderInfo=TC,u0.Renderer=pC;var Aw={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},Cw={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}},vw=new Tl("zelos",Aw,Cw),Nw={Classic:f_,Zelos:vw},h0=class{constructor(e,n,o){this.id_=e.toolboxitemid||B(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=e,this.parentToolbox_=n,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(e){}getFocusableElement(){const e=this.getDiv();if(!e)throw Error("Trying to access toolbox item before DOM is initialized.");if(!(e instanceof HTMLElement))throw Error("Toolbox item div is unexpectedly not an HTML element.");return e}getFocusableTree(){return this.parentToolbox_}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}},bs=class extends h0{constructor(e,n,o){super(e,n,o),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategoryContainer",row:"blocklyToolboxCategory",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyToolboxCategoryIcon",label:"blocklyToolboxCategoryLabel",contents:"blocklyToolboxCategoryGroup",selected:"blocklyToolboxSelected",openicon:"blocklyToolboxCategoryIconOpen",closedicon:"blocklyToolboxCategoryIconClosed"}}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else if(e=e.contents)for(let n=0;n<e.length;n++){const o=e[n];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(o)}}parseCategoryDef_(e){this.name_="name"in e?rr(e.name):"",this.colour_=this.getColour_(e),Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),js(this.htmlDiv_,Vn.TREEITEM),_r(this.htmlDiv_,ir.SELECTED,!1),_r(this.htmlDiv_,ir.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),js(this.iconDom_,Vn.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const e=this.labelDom_.getAttribute("id");return e&&_r(this.htmlDiv_,ir.LABELLEDBY,e),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const n=this.cssConfig_.container;return n&&_e(e,n),e}createRowContainer_(){const e=document.createElement("div");var n=this.cssConfig_.row;return n&&_e(e,n),n=`${bs.nestedPadding*this.getLevel()}px`,this.workspace_.RTL?e.style.paddingRight=n:e.style.paddingLeft=n,e}createRowContentsContainer_(){const e=document.createElement("div"),n=this.cssConfig_.rowcontentcontainer;return n&&_e(e,n),e}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&_e(e,n)}return e.style.display="inline-block",e}createLabelDom_(e){const n=document.createElement("span");return n.setAttribute("id",this.getId()+".label"),n.textContent=e,(e=this.cssConfig_.label)&&_e(n,e),n}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(e){e&&(e=bs.borderWidth+"px solid "+(e||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=e:this.rowDiv_.style.borderLeft=e)}getColour_(e){const n=e.categorystyle||e.categoryStyle;if((e=e.colour)&&n)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(n)return this.getColourfromStyle(n);if(e)return this.parseColour(e)}return""}getColourfromStyle(e){var n=this.workspace_.getTheme();if(e&&n){if((n=n.categoryStyles[e])&&n.colour)return this.parseColour(n.colour);console.warn('Style "'+e+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour(e){if(e=rr(e),e==null||e==="")return"";var n=Number(e);return isNaN(n)?(n=Zo(e))?n:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+e),""):Tp(n)}openIcon_(e){if(e){var n=this.cssConfig_.closedicon;n&&He(e,n),(n=this.cssConfig_.openicon)&&_e(e,n)}}closeIcon_(e){if(e){var n=this.cssConfig_.openicon;n&&He(e,n),(n=this.cssConfig_.closedicon)&&_e(e,n)}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none",this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let e=this;for(;e.getParent();)if(e=e.getParent(),!e.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(e){}setSelected(e){if(this.rowDiv_){var n=this.cssConfig_.selected;if(e){const o=this.parseColour(bs.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||o,n&&_e(this.rowDiv_,n)}else this.rowDiv_.style.backgroundColor="",n&&ke(this.rowDiv_,n);_r(this.htmlDiv_,ir.SELECTED,e)}}setDisabled(e){this.isDisabled_=e,this.getDiv().setAttribute("disabled",`${e}`),e?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(e){this.flyoutItems_=[],this.toolboxItemDef_=typeof e=="string"?{kind:this.toolboxItemDef_.kind,custom:e,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:ze(e),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){ve(this.htmlDiv_)}};bs.registrationName="category",bs.nestedPadding=19,bs.borderWidth=8,bs.defaultBackgroundColour="#57e",Xe(`
.blocklyToolboxCategory:not(.blocklyToolboxSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolbox[layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 5px 1px 0;
}

.blocklyToolbox[dir="RTL"][layout="h"] .blocklyToolboxCategoryContainer {
  margin: 1px 0 1px 5px;
}

.blocklyToolboxCategory {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategory {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyToolboxCategoryIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyToolboxCategoryIconClosed {
  background-position: -32px -1px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxCategoryIconClosed {
  background-position: 0 -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: -32px -17px;
}

.blocklyToolbox[dir="RTL"] .blocklyToolboxSelected>.blocklyToolboxCategoryIconClosed {
  background-position: 0 -17px;
}

.blocklyToolboxCategoryIconOpen {
  background-position: -16px -1px;
}

.blocklyToolboxSelected>.blocklyToolboxCategoryIconOpen {
  background-position: -16px -17px;
}

.blocklyToolboxCategoryLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyToolboxCategoryLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxSelected .blocklyToolboxCategoryLabel {
  color: #fff;
}
`),i(Le.TOOLBOX_ITEM,bs.registrationName,bs);var Lu=class extends h0{constructor(e,n){super(e,n),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv=null,Object.assign(this.cssConfig_,e.cssconfig||e.cssConfig)}init(){this.createDom_()}createDom_(){const e=document.createElement("div");e.tabIndex=-1,e.id=this.getId();const n=this.cssConfig_.container;return n&&_e(e,n),this.htmlDiv=e}getDiv(){return this.htmlDiv}dispose(){ve(this.htmlDiv)}};Lu.registrationName="sep",Xe(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolbox[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),i(Le.TOOLBOX_ITEM,Lu.registrationName,Lu);var Fa=class extends bs{constructor(e,n,o){super(e,n,o),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const e=super.makeDefaultCssConfig_();return e.contents="blocklyToolboxCategoryGroup",e}parseContents_(e){if("custom"in e)this.flyoutItems_=e.custom;else{const n=e.contents;if(n){this.flyoutItems_=[],e=!0;for(let o=0;o<n.length;o++){const a=n[o];!h(Le.TOOLBOX_ITEM,a.kind)||a.kind.toLowerCase()===Lu.registrationName&&e?(this.flyoutItems_.push(a),e=!0):(this.createToolboxItem(a),e=!1)}}}}createToolboxItem(e){let n=e.kind;n.toUpperCase()==="CATEGORY"&&nt(e)&&(n=Fa.registrationName),e=new(_(Le.TOOLBOX_ITEM,n))(e,this.parentToolbox_,this),this.toolboxItems_.push(e)}init(){super.init(),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded===!0)}createDom_(){super.createDom_();const e=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(e),js(this.subcategoriesDiv_,Vn.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),_r(this.htmlDiv_,ir.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const e=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const n=this.cssConfig_.icon;n&&_e(e,n),e.style.visibility="visible"}return e.style.display="inline-block",e}createSubCategoriesDom_(e){const n=document.createElement("div");n.style.display="none";var o=this.cssConfig_.contents;for(o&&_e(n,o),o=0;o<e.length;o++){const a=e[o];a.init();const d=a.getDiv();if(n.appendChild(d),a.getClickTarget){let p;(p=a.getClickTarget())==null||p.setAttribute("id",a.getId())}}return n}setExpanded(e){if(this.expanded_!==e){if(this.expanded_=e)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let n;(n=this.parentToolbox_.getFlyout())==null||n.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}_r(this.htmlDiv_,ir.EXPANDED,e),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(e){this.htmlDiv_.style.display=e?"block":"none";const n=this.getChildToolboxItems();for(let o=0;o<n.length;o++)n[o].setVisible_(e);this.isHidden_=!e,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(e){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};Fa.registrationName="collapsibleCategory",i(Le.TOOLBOX_ITEM,Fa.registrationName,Fa);var EC=class extends $_{constructor(e){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.height_=this.width_=0,this.flyout=null,this.contents=new Map,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[],this.workspace_=e,this.toolboxDef_=e.options.languageTree||{contents:[]},this.horizontalLayout=e.options.horizontalLayout,this.RTL=e.options.RTL,this.toolboxPosition=e.options.toolboxPosition}onShortcut(e){return!1}init(){var e=this.workspace_;const n=e.getParentSvg();this.flyout=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_);const o=this.flyout.createDom("svg");_e(o,"blocklyToolboxFlyout"),ut(o,n),this.setVisible(!0),this.flyout.init(e),this.render(this.toolboxDef_),e=e.getThemeManager(),e.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),e.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:Ht.ComponentWeight.TOOLBOX_WEIGHT,capabilities:[Ht.Capability.AUTOHIDEABLE,Ht.Capability.DELETE_AREA,Ht.Capability.DRAG_TARGET]}),r.getFocusManager$$module$build$src$core$focus_manager().registerTree(this,!0)}createDom_(e){e=e.getParentSvg();const n=this.createContainer_();return n.id=B(),this.contentsDiv_=this.createContentsContainer_(),js(this.contentsDiv_,Vn.TREE),n.appendChild(this.contentsDiv_),e.parentNode.insertBefore(n,e),this.attachEvents_(n,this.contentsDiv_),n}createContainer_(){const e=document.createElement("div");return e.setAttribute("layout",this.isHorizontal()?"h":"v"),_e(e,"blocklyToolbox"),e.setAttribute("dir",this.RTL?"RTL":"LTR"),e}createContentsContainer_(){const e=document.createElement("div");return _e(e,"blocklyToolboxCategoryGroup"),this.isHorizontal()&&(e.style.flexDirection="row"),e}attachEvents_(e,n){e=A(e,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(e),n=A(n,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(n)}onClick_(e){if(G(e)||e.target===this.HtmlDiv)m().hideChaff(!1);else{var n=e.target.getAttribute("id");n&&(n=this.getToolboxItemById(n),n.isSelectable()&&(this.setSelectedItem(n),n.onClick(e))),m().hideChaff(!0)}R()}onKeyDown_(e){let n=!1;switch(e.key){case"ArrowDown":n=this.selectNext();break;case"ArrowUp":n=this.selectPrevious();break;case"ArrowLeft":n=this.selectParent();break;case"ArrowRight":n=this.selectChild();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),n=!0);break;default:n=!1}!n&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(n=this.selectedItem_.onKeyDown(e)),n&&e.preventDefault()}createFlyout_(){const e=this.workspace_,n=e.copyOptionsForFlyout();return n.toolboxPosition=e.options.toolboxPosition,new(e.horizontalLayout?E(Le.FLYOUTS_HORIZONTAL_TOOLBOX,e.options,!0):E(Le.FLYOUTS_VERTICAL_TOOLBOX,e.options,!0))(n)}render(e){this.toolboxDef_=e,this.contents.forEach(n=>n.dispose()),this.contents.clear(),this.renderContents_(e.contents),this.position(),this.handleToolboxItemResize()}renderContents_(e){const n=document.createDocumentFragment();for(let o=0;o<e.length;o++)this.createToolboxItem(e[o],n);this.contentsDiv_.appendChild(n)}createToolboxItem(e,n){var o=e.kind;o.toUpperCase()==="CATEGORY"&&nt(e)&&(o=Fa.registrationName),(o=_(Le.TOOLBOX_ITEM,o.toLowerCase()))&&(e=new o(e,this),e.init(),this.addToolboxItem_(e),(o=e.getDiv())&&n.appendChild(o),e.getClickTarget()&&e.getClickTarget().setAttribute("id",e.getId()))}addToolboxItem_(e){if(this.contents.set(e.getId(),e),e.isCollapsible()){e=e.getChildToolboxItems();for(let n=0;n<e.length;n++)this.addToolboxItem_(e[n])}}getToolboxItems(){return[...this.contents.values()]}addStyle(e){e&&this.HtmlDiv&&_e(this.HtmlDiv,e)}removeStyle(e){e&&this.HtmlDiv&&ke(this.HtmlDiv,e)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var e=this.HtmlDiv.getBoundingClientRect();const n=e.top,o=n+e.height,a=e.left;return e=a+e.width,this.toolboxPosition===at.TOP?new it(-1e7,o,-1e7,1e7):this.toolboxPosition===at.BOTTOM?new it(n,1e7,-1e7,1e7):this.toolboxPosition===at.LEFT?new it(-1e7,1e7,-1e7,e):new it(-1e7,1e7,a,1e7)}wouldDelete(e){return e instanceof bt?this.updateWouldDelete_(!e.getParent()&&e.isDeletable()):this.updateWouldDelete_(cs(e)&&e.isDeletable()),this.wouldDelete_}onDragEnter(e){this.updateCursorDeleteStyle_(!0)}onDragExit(e){this.updateCursorDeleteStyle_(!1)}onDrop(e){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(e){e!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=e,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(e){const n=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";e?this.addStyle(n):this.removeStyle(n)}getToolboxItemById(e){return this.contents.get(e)||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout}position(){const e=this.workspace_.getMetrics(),n=this.HtmlDiv;n&&(this.horizontalLayout?(n.style.left="0",n.style.height="auto",n.style.width="100%",this.height_=n.offsetHeight,this.width_=e.viewWidth,this.toolboxPosition===at.TOP?n.style.top="0":n.style.bottom="0"):(this.toolboxPosition===at.RIGHT?n.style.right="0":n.style.left="0",n.style.height="100%",this.width_=n.offsetWidth,this.height_=e.viewHeight),this.flyout.position())}handleToolboxItemResize(){const e=this.workspace_;var n=this.HtmlDiv.getBoundingClientRect();const o=this.getFlyout(),a=this.toolboxPosition===at.LEFT?e.scrollX+n.width+(o!=null&&o.isVisible()?o.getWidth():0):e.scrollX;n=this.toolboxPosition===at.TOP?e.scrollY+n.height+(o!=null&&o.isVisible()?o.getHeight():0):e.scrollY,e.translate(a,n),Bn(e)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){this.contents.forEach(e=>{e.refreshTheme&&e.refreshTheme()})}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout.show(this.selectedItem_.getContents())}setVisible(e){this.isVisible_!==e&&(this.HtmlDiv.style.display=e?"block":"none",this.isVisible_=e,this.workspace_.recordDragTargets())}autoHide(e){!e&&this.flyout&&this.flyout.autoClose&&this.clearSelection()}setSelectedItem(e){const n=this.selectedItem_;!e&&!n||e&&!aR(e)||(this.shouldDeselectItem_(n,e)&&n!==null&&this.deselectItem_(n),this.shouldSelectItem_(n,e)&&e!==null&&this.selectItem_(n,e),this.updateFlyout_(n,e),this.fireSelectEvent(n,e))}shouldDeselectItem_(e,n){return e!==null&&(!e.isCollapsible()||e!==n)}shouldSelectItem_(e,n){return n!==null&&n!==e}deselectItem_(e){this.selectedItem_=null,this.previouslySelectedItem_=e,e.setSelected(!1),_r(this.contentsDiv_,ir.ACTIVEDESCENDANT,"")}selectItem_(e,n){this.selectedItem_=n,this.previouslySelectedItem_=e,n.setSelected(!0),_r(this.contentsDiv_,ir.ACTIVEDESCENDANT,n.getId())}selectItemByPosition(e){(e=this.getToolboxItems()[e])&&this.setSelectedItem(e)}updateFlyout_(e,n){n&&(e!==n||n.isCollapsible())&&n.getContents().length?(this.flyout.show(n.getContents()),this.flyout.scrollToStart()):this.flyout.hide()}fireSelectEvent(e,n){const o=e&&e.getName();let a=n&&n.getName();e===n&&(a=null),e=new(ce(de.TOOLBOX_ITEM_SELECT))(o,a,this.workspace_.id),Y(e)}selectParent(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1}selectChild(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const e=this.selectedItem_;return e.isExpanded()?this.selectNext():e.toggleExpanded(),!0}selectNext(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let n=e.indexOf(this.selectedItem_)+1;if(n>-1&&n<e.length){let o=e[n];for(;o&&!o.isSelectable();)o=e[++n];if(o&&o.isSelectable())return this.setSelectedItem(o),!0}return!1}selectPrevious(){if(!this.selectedItem_)return!1;const e=[...this.contents.values()];let n=e.indexOf(this.selectedItem_)-1;if(n>-1&&n<e.length){let o=e[n];for(;o&&!o.isSelectable();)o=e[--n];if(o&&o.isSelectable())return this.setSelectedItem(o),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout.dispose(),this.contents.forEach(e=>e.dispose());for(let e=0;e<this.boundEvents_.length;e++)k(this.boundEvents_[e]);this.boundEvents_=[],this.contents.clear(),this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),ve(this.HtmlDiv)),r.getFocusManager$$module$build$src$core$focus_manager().unregisterTree(this)}getFocusableElement(){if(!this.HtmlDiv)throw Error("Toolbox DOM has not yet been created.");return this.HtmlDiv}getFocusableTree(){return this}onNodeFocus(){}onNodeBlur(){}canBeFocused(){return!0}getRootFocusableNode(){return this}getRestoredFocusableNode(e){if(!e||e===this){let n;return(n=this.getToolboxItems().find(o=>o.isSelectable()))!=null?n:null}return null}getNestedTrees(){return[]}lookUpFocusableNode(e){return this.getToolboxItemById(e)}onTreeFocus(e,n){e!==this?this.getSelectedItem()!==e&&this.setSelectedItem(e):this.clearSelection()}onTreeBlur(e){let n;e&&e===((n=this.flyout)==null?void 0:n.getWorkspace())||this.autoHide(!1)}};Xe(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolbox {
  box-sizing: border-box;
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxCategoryGroup {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxCategoryGroup:focus {
  outline: none;
}
`),i(Le.TOOLBOX,Hn,EC);var xw="12.3.1",bw=Ye.INPUT_VALUE,yw=Ye.OUTPUT_VALUE,kw=Ye.NEXT_STATEMENT,ww=Ye.PREVIOUS_STATEMENT,Mw=at.TOP,Dw=at.BOTTOM,Pw=at.LEFT,Fw=at.RIGHT;ka.prototype.newBlock=function(e,n){return new xa(this,e,n)},ln.prototype.newBlock=function(e,n){return new bt(this,e,n)},ka.prototype.newComment=function(e){return new d_(this,e)},ln.prototype.newComment=function(e){return new ki(this,e)},ln.newTrashcan=function(e){return new _A(e)},wi.prototype.newWorkspaceSvg=function(e){return new ln(e)},r.Names$$module$build$src$core$names.prototype.populateProcedures=function(e){e=Xc(e),e=e[0].concat(e[1]);for(let n=0;n<e.length;n++)this.getName(e[n][0],r.Names$$module$build$src$core$names.NameType.PROCEDURE)};var fe={};return fe.Block=xa,fe.BlockFlyoutInflater=iC,fe.BlockNavigationPolicy=WL,fe.BlockSvg=bt,fe.Blocks=Ut,fe.ButtonFlyoutInflater=sC,fe.COLLAPSED_FIELD_NAME=jd,fe.COLLAPSED_INPUT_NAME=nu,fe.COLLAPSE_CHARS=wL,fe.CodeGenerator=r.CodeGenerator$$module$build$src$core$generator,fe.CollapsibleToolboxCategory=Fa,fe.ComponentManager=Ht,fe.Connection=Tt,fe.ConnectionChecker=cA,fe.ConnectionDB=va,fe.ConnectionNavigationPolicy=XL,fe.ConnectionType=Ye,fe.ContextMenu=fl,fe.ContextMenuItems=Ar,fe.ContextMenuRegistry=ht,fe.Css=HE,fe.DELETE_VARIABLE_ID=mg,fe.DeleteArea=$_,fe.DragTarget=BL,fe.DropDownDiv=nn,fe.Events=Ve,fe.Extensions=vs,fe.Field=Lt,fe.FieldCheckbox=$l,fe.FieldDropdown=Kr,fe.FieldImage=ml,fe.FieldLabel=pl,fe.FieldLabelSerializable=bA,fe.FieldNavigationPolicy=zL,fe.FieldNumber=Yg,fe.FieldTextInput=r.FieldTextInput$$module$build$src$core$field_textinput,fe.FieldVariable=Ou,fe.Flyout=O_,fe.FlyoutButton=In,fe.FlyoutButtonNavigationPolicy=HL,fe.FlyoutItem=ba,fe.FlyoutMetricsManager=UL,fe.FlyoutNavigationPolicy=GL,fe.FlyoutNavigator=JL,fe.FlyoutSeparator=I_,fe.FlyoutSeparatorNavigationPolicy=VL,fe.FocusManager=Yr,fe.FocusableTreeTraverser=Fr,fe.Generator=r.CodeGenerator$$module$build$src$core$generator,fe.Gesture=R_,fe.Grid=Ag,fe.HorizontalFlyout=xA,fe.INPUT_VALUE=bw,fe.Input=Na,fe.InsertionMarkerPreviewer=CA,fe.KeyboardNavigationController=ZL,fe.LabelFlyoutInflater=mA,fe.LineCursor=Cg,fe.Marker=eA,fe.MarkerManager=vg,fe.Menu=YE,fe.MenuItem=Kd,fe.MetricsManager=Ig,fe.Msg=r.Msg$$module$build$src$core$msg,fe.NEXT_STATEMENT=kw,fe.Names=r.Names$$module$build$src$core$names,fe.Navigator=Rg,fe.OPPOSITE_TYPE=El,fe.OUTPUT_VALUE=yw,fe.Options=ri,fe.PREVIOUS_STATEMENT=ww,fe.PROCEDURE_CATEGORY_NAME=L_,fe.Procedures=on,fe.RENAME_VARIABLE_ID=gg,fe.RenderedConnection=Br,fe.Scrollbar=sr,fe.ScrollbarPair=Lg,fe.SeparatorFlyoutInflater=qL,fe.ShortcutItems=li,fe.ShortcutRegistry=xt,fe.TOOLBOX_AT_BOTTOM=Dw,fe.TOOLBOX_AT_LEFT=Pw,fe.TOOLBOX_AT_RIGHT=Fw,fe.TOOLBOX_AT_TOP=Mw,fe.Theme=Tl,fe.ThemeManager=aA,fe.Themes=Nw,fe.Toast=ll,fe.Toolbox=EC,fe.ToolboxCategory=bs,fe.ToolboxItem=h0,fe.ToolboxSeparator=Lu,fe.Tooltip=Wn,fe.Touch=nl,fe.Trashcan=_A,fe.UnattachedFieldError=lr,fe.VARIABLE_CATEGORY_NAME=ZE,fe.VARIABLE_DYNAMIC_CATEGORY_NAME=Dg,fe.VERSION=xw,fe.VariableMap=dA,fe.VariableModel=hA,fe.Variables=or,fe.VariablesDynamic=To,fe.VerticalFlyout=zg,fe.WidgetDiv=Cs,fe.Workspace=ka,fe.WorkspaceAudio=uA,fe.WorkspaceDragger=QL,fe.WorkspaceNavigationPolicy=jL,fe.WorkspaceSvg=ln,fe.Xml=sn,fe.ZoomControls=BR,fe.blockAnimations=fu,fe.blockRendering=Rt,fe.browserEvents=Ci,fe.bubbles=Ru,fe.bumpObjects=m_,fe.clipboard=xs,fe.comments=po,fe.common=Lr,fe.config=r.config$$module$build$src$core$config,fe.constants=tw,fe.defineBlocksWithJsonArray=w,fe.dialog=yi,fe.dragging=Su,fe.fieldRegistry=__,fe.geras=ui,fe.getFocusManager=r.getFocusManager$$module$build$src$core$focus_manager,fe.getMainWorkspace=m,fe.getSelected=ie,fe.hasBubble=qo,fe.hideChaff=cR,fe.icons=fo,fe.inject=JS,fe.inputs=Eo,fe.isCopyable=Yc,fe.isDeletable=cs,fe.isDraggable=pa,fe.isIcon=wp,fe.isObservable=Ad,fe.isPaster=oR,fe.isRenderedElement=lR,fe.isSelectable=mn,fe.isSerializable=wc,fe.isVariableBackedParameterModel=MT,fe.keyboardNavigationController=S_,fe.layers=rw,fe.navigateBlock=Ls,fe.navigateStacks=Ta,fe.procedures=on,fe.registry=Ai,fe.renderManagement=qd,fe.serialization=Rw,fe.setLocale=qE,fe.setParentContainer=xn,fe.svgResize=Bn,fe.thrasos=u0,fe.uiPosition=ol,fe.utils=Xt,fe.zelos=ci,fe.__namespace__=r,fe})}(B0)),B0.exports}var U0={exports:{}},kv;function P1(){return kv||(kv=1,function(t,s){(function(r,i){t.exports=i()})(bo,function(){var r=r||{Msg:Object.create(null)};return r.Msg.ADD_COMMENT="Add Comment",r.Msg.ALT_KEY="Alt",r.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",r.Msg.CHANGE_VALUE_TITLE="Change value:",r.Msg.CHROME_OS="ChromeOS",r.Msg.CLEAN_UP="Clean up Blocks",r.Msg.CLOSE="Close",r.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",r.Msg.COLLAPSE_ALL="Collapse Blocks",r.Msg.COLLAPSE_BLOCK="Collapse Block",r.Msg.COLOUR_BLEND_COLOUR1="colour 1",r.Msg.COLOUR_BLEND_COLOUR2="colour 2",r.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",r.Msg.COLOUR_BLEND_RATIO="ratio",r.Msg.COLOUR_BLEND_TITLE="blend",r.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",r.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",r.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",r.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",r.Msg.COLOUR_RANDOM_TITLE="random colour",r.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",r.Msg.COLOUR_RGB_BLUE="blue",r.Msg.COLOUR_RGB_GREEN="green",r.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",r.Msg.COLOUR_RGB_RED="red",r.Msg.COLOUR_RGB_TITLE="colour with",r.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",r.Msg.COMMAND_KEY=" Command",r.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",r.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",r.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",r.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",r.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",r.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",r.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",r.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",r.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",r.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",r.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",r.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",r.Msg.CONTROLS_IF_MSG_ELSE="else",r.Msg.CONTROLS_IF_MSG_ELSEIF="else if",r.Msg.CONTROLS_IF_MSG_IF="if",r.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",r.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",r.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",r.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",r.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",r.Msg.CONTROLS_REPEAT_INPUT_DO="do",r.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",r.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",r.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",r.Msg.CONTROL_KEY="Ctrl",r.Msg.COPY_SHORTCUT="Copy",r.Msg.CUT_SHORTCUT="Cut",r.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",r.Msg.DELETE_BLOCK="Delete Block",r.Msg.DELETE_VARIABLE="Delete the '%1' variable",r.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",r.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",r.Msg.DIALOG_CANCEL="Cancel",r.Msg.DIALOG_OK="OK",r.Msg.DISABLE_BLOCK="Disable Block",r.Msg.DUPLICATE_BLOCK="Duplicate",r.Msg.DUPLICATE_COMMENT="Duplicate Comment",r.Msg.EDIT_BLOCK_CONTENTS="Edit Block contents",r.Msg.ENABLE_BLOCK="Enable Block",r.Msg.EXPAND_ALL="Expand Blocks",r.Msg.EXPAND_BLOCK="Expand Block",r.Msg.EXTERNAL_INPUTS="External Inputs",r.Msg.HELP="Help",r.Msg.HELP_PROMPT="Press %1 for help on keyboard controls",r.Msg.INLINE_INPUTS="Inline Inputs",r.Msg.KEYBOARD_NAV_CONSTRAINED_MOVE_HINT="Use the arrow keys to move, then %1 to accept the position",r.Msg.KEYBOARD_NAV_COPIED_HINT="Copied. Press %1 to paste.",r.Msg.KEYBOARD_NAV_CUT_HINT="Cut. Press %1 to paste.",r.Msg.KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT="Hold %1 and use arrow keys to move freely, then %2 to accept the position",r.Msg.LINUX="Linux",r.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",r.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",r.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",r.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",r.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",r.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",r.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",r.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",r.Msg.LISTS_GET_INDEX_FIRST="first",r.Msg.LISTS_GET_INDEX_FROM_END="# from end",r.Msg.LISTS_GET_INDEX_FROM_START="#",r.Msg.LISTS_GET_INDEX_GET="get",r.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",r.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",r.Msg.LISTS_GET_INDEX_LAST="last",r.Msg.LISTS_GET_INDEX_RANDOM="random",r.Msg.LISTS_GET_INDEX_REMOVE="remove",r.Msg.LISTS_GET_INDEX_TAIL="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",r.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",r.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",r.Msg.LISTS_GET_SUBLIST_END_LAST="to last",r.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",r.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",r.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",r.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",r.Msg.LISTS_GET_SUBLIST_TAIL="",r.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",r.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",r.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",r.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",r.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",r.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",r.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",r.Msg.LISTS_INLIST="in list",r.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",r.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",r.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",r.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",r.Msg.LISTS_LENGTH_TITLE="length of %1",r.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",r.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",r.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",r.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",r.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",r.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",r.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",r.Msg.LISTS_SET_INDEX_INPUT_TO="as",r.Msg.LISTS_SET_INDEX_INSERT="insert at",r.Msg.LISTS_SET_INDEX_SET="set",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",r.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",r.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",r.Msg.LISTS_SORT_ORDER_DESCENDING="descending",r.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",r.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",r.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",r.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",r.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",r.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",r.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",r.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",r.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",r.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",r.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",r.Msg.LOGIC_BOOLEAN_FALSE="false",r.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",r.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",r.Msg.LOGIC_BOOLEAN_TRUE="true",r.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",r.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",r.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",r.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",r.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",r.Msg.LOGIC_NEGATE_TITLE="not %1",r.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",r.Msg.LOGIC_NULL="null",r.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",r.Msg.LOGIC_NULL_TOOLTIP="Returns null.",r.Msg.LOGIC_OPERATION_AND="and",r.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",r.Msg.LOGIC_OPERATION_OR="or",r.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",r.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",r.Msg.LOGIC_TERNARY_CONDITION="test",r.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",r.Msg.LOGIC_TERNARY_IF_FALSE="if false",r.Msg.LOGIC_TERNARY_IF_TRUE="if true",r.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",r.Msg.MAC_OS="macOS",r.Msg.MATH_ADDITION_SYMBOL="+",r.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",r.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",r.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",r.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",r.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",r.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",r.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",r.Msg.MATH_CHANGE_TITLE="change %1 by %2",r.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",r.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",r.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants:  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  (infinity).",r.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",r.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",r.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",r.Msg.MATH_DIVISION_SYMBOL="",r.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",r.Msg.MATH_IS_EVEN="is even",r.Msg.MATH_IS_NEGATIVE="is negative",r.Msg.MATH_IS_ODD="is odd",r.Msg.MATH_IS_POSITIVE="is positive",r.Msg.MATH_IS_PRIME="is prime",r.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",r.Msg.MATH_IS_WHOLE="is whole",r.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",r.Msg.MATH_MODULO_TITLE="remainder of %1  %2",r.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",r.Msg.MATH_MULTIPLICATION_SYMBOL="",r.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",r.Msg.MATH_NUMBER_TOOLTIP="A number.",r.Msg.MATH_ONLIST_HELPURL="",r.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",r.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",r.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",r.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",r.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",r.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",r.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",r.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",r.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",r.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",r.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",r.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",r.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",r.Msg.MATH_POWER_SYMBOL="^",r.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",r.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",r.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",r.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",r.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",r.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",r.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",r.Msg.MATH_ROUND_OPERATOR_ROUND="round",r.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",r.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",r.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",r.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",r.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",r.Msg.MATH_SINGLE_OP_ROOT="square root",r.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",r.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",r.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",r.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",r.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",r.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",r.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",r.Msg.MATH_SUBTRACTION_SYMBOL="-",r.Msg.MATH_TRIG_ACOS="acos",r.Msg.MATH_TRIG_ASIN="asin",r.Msg.MATH_TRIG_ATAN="atan",r.Msg.MATH_TRIG_COS="cos",r.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",r.Msg.MATH_TRIG_SIN="sin",r.Msg.MATH_TRIG_TAN="tan",r.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",r.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",r.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",r.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",r.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",r.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",r.Msg.MOVE_BLOCK="Move Block",r.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",r.Msg.NEW_NUMBER_VARIABLE="Create number variable...",r.Msg.NEW_STRING_VARIABLE="Create string variable...",r.Msg.NEW_VARIABLE="Create variable...",r.Msg.NEW_VARIABLE_TITLE="New variable name:",r.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",r.Msg.OPTION_KEY=" Option",r.Msg.ORDINAL_NUMBER_SUFFIX="",r.Msg.PASTE_SHORTCUT="Paste",r.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",r.Msg.PROCEDURES_BEFORE_PARAMS="with:",r.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",r.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",r.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",r.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",r.Msg.PROCEDURES_CREATE_DO="Create '%1'",r.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",r.Msg.PROCEDURES_DEFNORETURN_DO="",r.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",r.Msg.PROCEDURES_DEFNORETURN_TITLE="to",r.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",r.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFRETURN_RETURN="return",r.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",r.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",r.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",r.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",r.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",r.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",r.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",r.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",r.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",r.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",r.Msg.REDO="Redo",r.Msg.REMOVE_COMMENT="Remove Comment",r.Msg.RENAME_VARIABLE="Rename variable...",r.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",r.Msg.SHORTCUTS_CODE_NAVIGATION="Code navigation",r.Msg.SHORTCUTS_EDITING="Editing",r.Msg.SHORTCUTS_GENERAL="General",r.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_APPEND_TITLE="to %1 append text %2",r.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",r.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",r.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",r.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",r.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",r.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",r.Msg.TEXT_CHARAT_FIRST="get first letter",r.Msg.TEXT_CHARAT_FROM_END="get letter # from end",r.Msg.TEXT_CHARAT_FROM_START="get letter #",r.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",r.Msg.TEXT_CHARAT_LAST="get last letter",r.Msg.TEXT_CHARAT_RANDOM="get random letter",r.Msg.TEXT_CHARAT_TAIL="",r.Msg.TEXT_CHARAT_TITLE="in text %1 %2",r.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",r.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",r.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",r.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",r.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",r.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",r.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",r.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",r.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",r.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",r.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",r.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",r.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",r.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",r.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",r.Msg.TEXT_GET_SUBSTRING_TAIL="",r.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",r.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",r.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",r.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",r.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",r.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",r.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",r.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",r.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",r.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",r.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",r.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",r.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_LENGTH_TITLE="length of %1",r.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",r.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",r.Msg.TEXT_PRINT_TITLE="print %1",r.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",r.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",r.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",r.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",r.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",r.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",r.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",r.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",r.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",r.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",r.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",r.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",r.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",r.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",r.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",r.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",r.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",r.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",r.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",r.Msg.TODAY="Today",r.Msg.UNDO="Undo",r.Msg.UNKNOWN="Unknown",r.Msg.UNNAMED_KEY="unnamed",r.Msg.VARIABLES_DEFAULT_NAME="item",r.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",r.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",r.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",r.Msg.VARIABLES_SET="set %1 to %2",r.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",r.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",r.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",r.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",r.Msg.WINDOWS="Windows",r.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",r.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",r.Msg.CONTROLS_FOREACH_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_FOR_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=r.Msg.CONTROLS_IF_MSG_ELSEIF,r.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=r.Msg.CONTROLS_IF_MSG_ELSE,r.Msg.CONTROLS_IF_IF_TITLE_IF=r.Msg.CONTROLS_IF_MSG_IF,r.Msg.CONTROLS_IF_MSG_THEN=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.LISTS_CREATE_WITH_ITEM_TITLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.MATH_CHANGE_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.PROCEDURES_DEFRETURN_COMMENT=r.Msg.PROCEDURES_DEFNORETURN_COMMENT,r.Msg.PROCEDURES_DEFRETURN_DO=r.Msg.PROCEDURES_DEFNORETURN_DO,r.Msg.PROCEDURES_DEFRETURN_PROCEDURE=r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,r.Msg.PROCEDURES_DEFRETURN_TITLE=r.Msg.PROCEDURES_DEFNORETURN_TITLE,r.Msg.TEXT_APPEND_VARIABLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.COLOUR_HUE="20",r.Msg.LISTS_HUE="260",r.Msg.LOGIC_HUE="210",r.Msg.LOOPS_HUE="120",r.Msg.MATH_HUE="230",r.Msg.PROCEDURES_HUE="290",r.Msg.TEXTS_HUE="160",r.Msg.VARIABLES_DYNAMIC_HUE="310",r.Msg.VARIABLES_HUE="330",r.Msg})}(U0)),U0.exports}var H0={exports:{}},wv;function F1(){return wv||(wv=1,function(t,s){(function(r,i){t.exports=i(TI())})(bo,function(r){var i=r.__namespace__,l=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),c={customContextMenu:function(m){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(ie={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:u(this)},le=this.getField("VAR").getText(),le={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",le),enabled:!0,callback:h(this)},m.unshift(ie),m.unshift(le));else{if(this.type==="variables_get_dynamic")var D="variables_set_dynamic",ie=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else D="variables_get_dynamic",ie=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var le=this.getField("VAR");D={type:D,fields:{VAR:le.saveState(!0)}},m.push({enabled:this.workspace.remainingCapacity()>0,text:ie.replace("%1",le.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,D)})}},onchange:function(m){m=this.getFieldValue("VAR"),m=i.getVariable$$module$build$src$core$variables(this.workspace,m),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(m.getType()):this.getInput("VALUE").connection.setCheck(m.getType())}},u=function(m){return function(){const D=m.workspace,ie=m.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(D,ie)}},h=function(m){return function(){const D=m.getField("VAR").getVariable();D&&i.deleteVariable$$module$build$src$core$variables(D.getWorkspace(),D,m)}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",c),i.defineBlocks$$module$build$src$core$common(l);var _={blocks:l},f=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),T={customContextMenu:function(m){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(ie={text:i.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:E(this)},le=this.getField("VAR").getText(),le={text:i.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",le),enabled:!0,callback:g(this)},m.unshift(ie),m.unshift(le));else{if(this.type==="variables_get")var D="variables_set",ie=i.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else D="variables_get",ie=i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var le=this.getField("VAR");D={type:D,fields:{VAR:le.saveState(!0)}},m.push({enabled:this.workspace.remainingCapacity()>0,text:ie.replace("%1",le.getText()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,D)})}}},E=function(m){return function(){const D=m.workspace,ie=m.getField("VAR").getVariable();i.renameVariable$$module$build$src$core$variables(D,ie)}},g=function(m){return function(){const D=m.getField("VAR").getVariable();D&&i.deleteVariable$$module$build$src$core$variables(D.getWorkspace(),D,m)}};i.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",T),i.defineBlocks$$module$build$src$core$common(f);var S={blocks:f},R=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),L={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);const m=D=>{const ie=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+D]});return ie.setValidator(function(le){const Be=this.getValue();le=le==="FROM_START"||le==="FROM_END",le!==(Be==="FROM_START"||Be==="FROM_END")&&this.getSourceBlock().updateAt_(D,le)}),ie};this.appendDummyInput("WHERE1_INPUT").appendField(m(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(m(2),"WHERE2"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");var D=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return m.setAttribute("at1",`${D}`),D=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,m.setAttribute("at2",`${D}`),m},domToMutation:function(m){const D=m.getAttribute("at1")==="true";m=m.getAttribute("at2")==="true",this.updateAt_(1,D),this.updateAt_(2,m)},updateAt_:function(m,D){this.removeInput("AT"+m),this.removeInput("ORDINAL"+m,!0),D?(this.appendValueInput("AT"+m).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+m).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+m),m===2&&i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),m===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}};R.text_getSubstring=L,R.text_changeCase={init:function(){const m=[[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:m}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},R.text_trim={init:function(){const m=[[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[i.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:m}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(i.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},R.text_print={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var N={updateType_:function(m){this.outputConnection.setCheck(m==="NUMBER"?"Number":"String")},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");return m.setAttribute("type",this.getFieldValue("TYPE")),m},domToMutation:function(m){this.updateType_(m.getAttribute("type"))}};R.text_prompt_ext=Object.assign({},N,{init:function(){var m=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),m=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:m}),m.setValidator(D=>{this.updateType_(D)}),this.appendValueInput("TEXT").appendField(m,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),R.text_prompt=Object.assign({},N,{init:function(){this.mixin(C);var m=[[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(i.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),m=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:m}),m.setValidator(D=>{this.updateType_(D)}),this.appendDummyInput().appendField(m,"TYPE").appendField(this.newQuote_(!0)).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>this.getFieldValue("TYPE")==="TEXT"?i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:i.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),R.text_count={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},R.text_replace={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},R.text_reverse={init:function(){this.jsonInit({message0:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:i.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var C={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(m){for(let D=0,ie;ie=this.inputList[D];D++)for(let le=0,Be;Be=ie.fieldRow[le];le++)if(m===Be.name){ie.insertFieldAt(le,this.newQuote_(!0)),ie.insertFieldAt(le+2,this.newQuote_(!1));return}console.warn('field named "'+m+'" not found in '+this.toDevString())},newQuote_:function(m){return m=this.RTL?!m:m,i.fromJson$$module$build$src$core$field_registry({type:"field_image",src:m?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:m?"":""})}},A=function(){this.mixin(C),this.quoteField_("TEXT")},I={itemCount_:0,mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");return m.setAttribute("items",`${this.itemCount_}`),m},domToMutation:function(m){this.itemCount_=parseInt(m.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(m){this.itemCount_=m.itemCount,this.updateShape_()},decompose:function(m){const D=m.newBlock("text_create_join_container");D.initSvg();let ie=D.getInput("STACK").connection;for(let le=0;le<this.itemCount_;le++){const Be=m.newBlock("text_create_join_item");Be.initSvg(),ie.connect(Be.previousConnection),ie=Be.nextConnection}return D},compose:function(m){var D=m.getInputTargetBlock("STACK");for(m=[];D;)D.isInsertionMarker()||m.push(D.valueConnection_),D=D.getNextBlock();for(D=0;D<this.itemCount_;D++){const ie=this.getInput("ADD"+D).connection.targetConnection;ie&&!m.includes(ie)&&ie.disconnect()}for(this.itemCount_=m.length,this.updateShape_(),D=0;D<this.itemCount_;D++){let ie;(ie=m[D])==null||ie.reconnect(this,"ADD"+D)}},saveConnections:function(m){m=m.getInputTargetBlock("STACK");let D=0;for(;m;){if(m.isInsertionMarker()){m=m.getNextBlock();continue}const ie=this.getInput("ADD"+D);m.valueConnection_=ie&&ie.connection.targetConnection,m=m.getNextBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var m=0;m<this.itemCount_;m++)if(!this.getInput("ADD"+m)){const D=this.appendValueInput("ADD"+m).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);m===0&&D.appendField(i.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(m=this.itemCount_;this.getInput("ADD"+m);m++)this.removeInput("ADD"+m)}},k=function(){this.mixin(C),this.itemCount_=2,this.updateShape_(),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))};i.register$$module$build$src$core$extensions("text_append_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var H=function(){this.setTooltip(()=>i.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))},G={isAt_:!1,mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");return m.setAttribute("at",`${this.isAt_}`),m},domToMutation:function(m){m=m.getAttribute("at")!=="false",this.updateAt_(m)},updateAt_:function(m){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),m&&(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=m}},x=function(){this.getField("WHERE").setValidator(function(m){m=m==="FROM_START"||m==="FROM_END";const D=this.getSourceBlock();m!==D.isAt_&&D.updateAt_(m)}),this.updateAt_(!0),this.setTooltip(()=>{var m=this.getFieldValue("WHERE");let D=i.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return(m==="FROM_START"||m==="FROM_END")&&(m=m==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(D+="  "+m.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),D})};i.register$$module$build$src$core$extensions("text_indexOf_tooltip",H),i.register$$module$build$src$core$extensions("text_quotes",A),i.registerMixin$$module$build$src$core$extensions("quote_image_mixin",C),i.registerMutator$$module$build$src$core$extensions("text_join_mutator",I,k),i.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",G,x),i.defineBlocks$$module$build$src$core$common(R);var U={blocks:R},B={},re={setStatements_:function(m){this.hasStatements_!==m&&(m?(this.appendStatementInput("STACK").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=m)},updateParams_:function(){let m="";this.arguments_.length&&(m=i.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),i.disable$$module$build$src$core$events$utils();try{this.setFieldValue(m,"PARAMS")}finally{i.enable$$module$build$src$core$events$utils()}},mutationToDom:function(m){const D=i.createElement$$module$build$src$core$utils$xml("mutation");m&&D.setAttribute("name",this.getFieldValue("NAME"));for(let ie=0;ie<this.argumentVarModels_.length;ie++){const le=i.createElement$$module$build$src$core$utils$xml("arg"),Be=this.argumentVarModels_[ie];le.setAttribute("name",Be.getName()),le.setAttribute("varid",Be.getId()),m&&this.paramIds_&&le.setAttribute("paramId",this.paramIds_[ie]),D.appendChild(le)}return this.hasStatements_||D.setAttribute("statements","false"),D},domToMutation:function(m){this.arguments_=[],this.argumentVarModels_=[];for(let ie=0,le;le=m.childNodes[ie];ie++)if(le.nodeName.toLowerCase()==="arg"){var D=le;const Be=D.getAttribute("name");D=D.getAttribute("varid")||D.getAttribute("varId"),this.arguments_.push(Be),D=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,D,Be,""),D!==null?this.argumentVarModels_.push(D):console.log(`Failed to create a variable named "${Be}", ignoring.`)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(m.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const m=Object.create(null);if(this.argumentVarModels_.length){m.params=[];for(let D=0;D<this.argumentVarModels_.length;D++)m.params.push({name:this.argumentVarModels_[D].getName(),id:this.argumentVarModels_[D].getId()})}return this.hasStatements_||(m.hasStatements=!1),m},loadExtraState:function(m){if(this.arguments_=[],this.argumentVarModels_=[],m.params)for(let ie=0;ie<m.params.length;ie++){var D=m.params[ie];D=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,D.id,D.name,""),this.arguments_.push(D.getName()),this.argumentVarModels_.push(D)}this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(m.hasStatements!==!1)},decompose:function(m){const D=i.createElement$$module$build$src$core$utils$xml("block");D.setAttribute("type","procedures_mutatorcontainer");var ie=i.createElement$$module$build$src$core$utils$xml("statement");ie.setAttribute("name","STACK"),D.appendChild(ie);for(let Be=0;Be<this.arguments_.length;Be++){const gt=i.createElement$$module$build$src$core$utils$xml("block");gt.setAttribute("type","procedures_mutatorarg");var le=i.createElement$$module$build$src$core$utils$xml("field");le.setAttribute("name","NAME");const xn=i.createTextNode$$module$build$src$core$utils$xml(this.arguments_[Be]);le.appendChild(xn),gt.appendChild(le),le=i.createElement$$module$build$src$core$utils$xml("next"),gt.appendChild(le),ie.appendChild(gt),ie=le}return m=i.domToBlock$$module$build$src$core$xml(D,m),this.type==="procedures_defreturn"?m.setFieldValue(this.hasStatements_,"STATEMENTS"):m.removeInput("STATEMENT_INPUT"),i.mutateCallers$$module$build$src$core$procedures(this),m},compose:function(m){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let D=m.getInputTargetBlock("STACK");for(;D&&!D.isInsertionMarker();){var ie=D.getFieldValue("NAME");this.arguments_.push(ie),ie=this.workspace.getVariable(ie,""),this.argumentVarModels_.push(ie),this.paramIds_.push(D.id),D=D.nextConnection&&D.nextConnection.targetBlock()}if(this.updateParams_(),i.mutateCallers$$module$build$src$core$procedures(this),m=m.getFieldValue("STATEMENTS"),m!==null&&(m=m==="TRUE",this.hasStatements_!==m))if(m){this.setStatements_(!0);var le;(le=this.statementConnection_)==null||le.reconnect(this,"STACK"),this.statementConnection_=null}else le=this.getInput("STACK").connection,(this.statementConnection_=le.targetConnection)&&(le=le.targetBlock(),le.unplug(),le.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(m,D){var ie=this.workspace.getVariableById(m);if(ie.getType()===""){ie=ie.getName(),D=this.workspace.getVariableById(D);var le=!1;for(let Be=0;Be<this.argumentVarModels_.length;Be++)this.argumentVarModels_[Be].getId()===m&&(this.arguments_[Be]=D.getName(),this.argumentVarModels_[Be]=D,le=!0);le&&(this.displayRenamedVar_(ie,D.getName()),i.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(m){const D=m.getName();let ie=!1,le;for(let Be=0;Be<this.argumentVarModels_.length;Be++)this.argumentVarModels_[Be].getId()===m.getId()&&(le=this.arguments_[Be],this.arguments_[Be]=D,ie=!0);ie&&(this.displayRenamedVar_(le,D),i.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(m,D){this.updateParams_();var ie=this.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(ie&&ie.bubbleIsVisible()){ie=ie.getWorkspace().getAllBlocks(!1);for(let le=0,Be;Be=ie[le];le++)Be.type==="procedures_mutatorarg"&&i.Names$$module$build$src$core$names.equals(m,Be.getFieldValue("NAME"))&&Be.setFieldValue(D,"NAME")}},customContextMenu:function(m){if(!this.isInFlyout){var D=this.getFieldValue("NAME"),ie={type:this.callType_,extraState:{name:D,params:this.arguments_}};if(m.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",D),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,ie)}),!this.isCollapsed())for(D=0;D<this.argumentVarModels_.length;D++){ie=this.argumentVarModels_[D];const le={type:"variables_get",fields:{VAR:{name:ie.getName(),id:ie.getId(),type:ie.getType()}}};m.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ie.getName()),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,le)})}}}};B.procedures_defnoreturn=Object.assign({},re,{init:function(){var m=i.findLegalName$$module$build$src$core$procedures("",this);m=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:m}),m.setValidator(i.rename$$module$build$src$core$procedures),m.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(m,"NAME").appendField("","PARAMS"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),B.procedures_defreturn=Object.assign({},re,{init:function(){var m=i.findLegalName$$module$build$src$core$procedures("",this);m=i.fromJson$$module$build$src$core$field_registry({type:"field_input",text:m}),m.setValidator(i.rename$$module$build$src$core$procedures),m.setSpellcheck(!1),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(m,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT).appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var Z={init:function(){this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(i.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};B.procedures_mutatorcontainer=Z;var se=class extends i.FieldTextInput$$module$build$src$core$field_textinput{constructor(){super(...arguments),this.editingInteractively=!1}showEditor_(m){super.showEditor_(m),this.editingInteractively=!0,this.editingVariable=void 0}onFinishEditing_(m){super.onFinishEditing_(m),this.editingInteractively=!1}},pe={init:function(){const m=new se(i.DEFAULT_ARG$$module$build$src$core$procedures,this.validator_);this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(m,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1},validator_:function(m){var D=this.getSourceBlock();const ie=D.workspace.getRootWorkspace();if(m=m.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!m)return null;const le=(D.workspace.targetWorkspace||D.workspace).getAllBlocks(!1),Be=m.toLowerCase();for(let gt=0;gt<le.length;gt++){if(le[gt].id===this.getSourceBlock().id)continue;const xn=le[gt].getFieldValue("NAME");if(xn&&xn.toLowerCase()===Be)return null}return D.isInFlyout||((D=ie.getVariable(m,""))&&D.getName()!==m&&ie.renameVariableById(D.getId(),m),D||(this.editingInteractively?this.editingVariable?ie.renameVariableById(this.editingVariable.getId(),m):this.editingVariable=ie.createVariable(m,""):ie.createVariable(m,""))),m}};B.procedures_mutatorarg=pe;var Me="DISABLED_PROCEDURE_DEFINITION",Oe={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(m,D){i.Names$$module$build$src$core$names.equals(m,this.getProcedureCall())&&(this.setFieldValue(D,"NAME"),this.setTooltip((this.outputConnection?i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",D)))},setProcedureParameters_:function(m,D){var ie=i.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((ie=(ie=ie&&ie.getIcon(i.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&ie.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),m.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=D;else{if(D.length!==m.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let Be=0;Be<this.arguments_.length;Be++){var le=this.getInput("ARG"+Be);le&&(le=le.connection.targetConnection,this.quarkConnections_[this.quarkIds_[Be]]=le,ie&&le&&!D.includes(this.quarkIds_[Be])&&(le.disconnect(),le.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(m),this.argumentVarModels_=[],m=0;m<this.arguments_.length;m++)ie=i.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[m],""),this.argumentVarModels_.push(ie);if(this.updateShape_(),this.quarkIds_=D){for(D=0;D<this.arguments_.length;D++)if(m=this.quarkIds_[D],m in this.quarkConnections_){let Be;(Be=this.quarkConnections_[m])!=null&&Be.reconnect(this,"ARG"+D)||delete this.quarkConnections_[m]}}}},updateShape_:function(){for(var m=0;m<this.arguments_.length;m++){var D=this.getField("ARGNAME"+m);if(D){i.disable$$module$build$src$core$events$utils();try{D.setValue(this.arguments_[m])}finally{i.enable$$module$build$src$core$events$utils()}}else D=i.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[m]}),this.appendValueInput("ARG"+m).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT).appendField(D,"ARGNAME"+m)}for(m=this.arguments_.length;this.getInput("ARG"+m);m++)this.removeInput("ARG"+m);(m=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||m.appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&m.removeField("WITH"))},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");m.setAttribute("name",this.getProcedureCall());for(let D=0;D<this.arguments_.length;D++){const ie=i.createElement$$module$build$src$core$utils$xml("arg");ie.setAttribute("name",this.arguments_[D]),m.appendChild(ie)}return m},domToMutation:function(m){var D=m.getAttribute("name");this.renameProcedure(this.getProcedureCall(),D),D=[];const ie=[];for(let le=0,Be;Be=m.childNodes[le];le++)Be.nodeName.toLowerCase()==="arg"&&(D.push(Be.getAttribute("name")),ie.push(Be.getAttribute("paramId")));this.setProcedureParameters_(D,ie)},saveExtraState:function(){const m=Object.create(null);return m.name=this.getProcedureCall(),this.arguments_.length&&(m.params=this.arguments_),m},loadExtraState:function(m){if(this.renameProcedure(this.getProcedureCall(),m.name),m=m.params){const D=[];D.length=m.length,D.fill(null),this.setProcedureParameters_(m,D)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(m){if(this.workspace&&!this.workspace.isFlyout&&m.recordUndo)if(m.type===i.BLOCK_CREATE$$module$build$src$core$events$events&&m.ids.includes(this.id)){var D=this.getProcedureCall(),ie=i.getDefinition$$module$build$src$core$procedures(D,this.workspace);if(!ie||ie.type===this.defType_&&JSON.stringify(ie.getVars())===JSON.stringify(this.arguments_)||(ie=null),ie)ie.isEnabled()||(this.setDisabledReason(!0,Me),this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",D)));else{i.setGroup$$module$build$src$core$events$utils(m.group),m=i.createElement$$module$build$src$core$utils$xml("xml"),D=i.createElement$$module$build$src$core$utils$xml("block"),D.setAttribute("type",this.defType_),ie=this.getRelativeToSurfaceXY();var le=ie.y+i.config$$module$build$src$core$config.snapRadius*2;D.setAttribute("x",`${ie.x+i.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),D.setAttribute("y",`${le}`),ie=this.mutationToDom(),D.appendChild(ie),ie=i.createElement$$module$build$src$core$utils$xml("field"),ie.setAttribute("name","NAME"),le=this.getProcedureCall();const Be=i.findLegalName$$module$build$src$core$procedures(le,this);le!==Be&&this.renameProcedure(le,Be),ie.appendChild(i.createTextNode$$module$build$src$core$utils$xml(le)),D.appendChild(ie),m.appendChild(D),i.domToWorkspace$$module$build$src$core$xml(m,this.workspace),i.setGroup$$module$build$src$core$events$utils(!1)}}else m.type===i.BLOCK_DELETE$$module$build$src$core$events$events?(D=this.getProcedureCall(),i.getDefinition$$module$build$src$core$procedures(D,this.workspace)||(i.setGroup$$module$build$src$core$events$utils(m.group),this.dispose(!0),i.setGroup$$module$build$src$core$events$utils(!1))):m.type===i.BLOCK_CHANGE$$module$build$src$core$events$events&&m.element==="disabled"&&(D=this.getProcedureCall(),(le=i.getDefinition$$module$build$src$core$procedures(D,this.workspace))&&le.id===m.blockId&&((ie=i.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),i.setGroup$$module$build$src$core$events$utils(m.group),m=le.isEnabled(),this.setDisabledReason(!m,Me),this.setWarningText(m?null:i.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",D)),i.setGroup$$module$build$src$core$events$utils(ie)))},customContextMenu:function(m){if(this.workspace.isMovable()){var D=this.getProcedureCall(),ie=this.workspace;m.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const le=i.getDefinition$$module$build$src$core$procedures(D,ie);le&&(ie.centerOnBlock(le.id),i.getFocusManager$$module$build$src$core$focus_manager().focusNode(le))}})}}};B.procedures_callnoreturn=Object.assign({},Oe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),B.procedures_callreturn=Object.assign({},Oe,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var we="UNPARENTED_IFRETURN",ye={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");return m.setAttribute("value",String(Number(this.hasReturnValue_))),m},domToMutation:function(m){this.hasReturnValue_=m.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(m){if(!(this.workspace.isDragging&&this.workspace.isDragging()||m.type!==i.BLOCK_MOVE$$module$build$src$core$events$events&&m.type!==i.BLOCK_CREATE$$module$build$src$core$events$events)){m=!1;var D=this;do{if(this.FUNCTION_TYPES.includes(D.type)){m=!0;break}D=D.getSurroundParent()}while(D);if(m?(D.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):D.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(i.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(i.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{i.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!m,we)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};B.procedures_ifreturn=ye,i.defineBlocks$$module$build$src$core$common(B);var Re={blocks:B},j=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["","PI"],["e","E"],["","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt()","SQRT1_2"],["","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]),Y={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};i.register$$module$build$src$core$extensions("math_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",Y));var oe={mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation"),D=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return m.setAttribute("divisor_input",String(D)),m},domToMutation:function(m){m=m.getAttribute("divisor_input")==="true",this.updateShape_(m)},updateShape_:function(m){const D=this.getInput("DIVISOR");m?D||this.appendValueInput("DIVISOR").setCheck("Number"):D&&this.removeInput("DIVISOR")}},M=function(){this.getField("PROPERTY").setValidator(function(m){m=m==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(m)})};i.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",oe,M),i.register$$module$build$src$core$extensions("math_change_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var Q={updateType_:function(m){m==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");return m.setAttribute("op",this.getFieldValue("OP")),m},domToMutation:function(m){if(m=m.getAttribute("op"),m===null)throw new TypeError("xmlElement had no op attribute");this.updateType_(m)}},J=function(){this.getField("OP").setValidator(function(m){this.updateType_(m)}.bind(this))};i.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",Q,J),i.defineBlocks$$module$build$src$core$common(j);var q={blocks:j},he=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]),Ne={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};i.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",Ne));var Pe={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};i.register$$module$build$src$core$extensions("controls_flow_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",Pe));var be={customContextMenu:function(m){if(!this.isInFlyout){var D=this.getField("VAR"),ie=D.getVariable().getName();this.isCollapsed()||ie===null||(D={type:"variables_get",fields:{VAR:D.saveState(!0)}},m.push({enabled:!0,text:i.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",ie),callback:i.callbackFactory$$module$build$src$core$contextmenu(this,D)}))}}};i.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",be),i.register$$module$build$src$core$extensions("controls_for_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),i.register$$module$build$src$core$extensions("controls_forEach_tooltip",i.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var ce=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),tt="CONTROL_FLOW_NOT_IN_LOOP",b={getSurroundLoop:function(){let m=this;do{if(ce.has(m.type))return m;m=m.getSurroundParent()}while(m);return null},onchange:function(m){const D=this.workspace;if(D.isDragging&&!D.isDragging()&&(m.type===i.BLOCK_MOVE$$module$build$src$core$events$events||m.type===i.BLOCK_CREATE$$module$build$src$core$events$events)&&(m=!!this.getSurroundLoop(),this.setWarningText(m?null:i.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{i.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!m,tt)}finally{i.setRecordUndo$$module$build$src$core$events$utils(!0)}}};i.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",b),i.defineBlocks$$module$build$src$core$common(he);var _e={blocks:he,loopTypes:ce},He=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["","NEQ"],["<","LT"],["","LTE"],[">","GT"],["","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]),ke={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};i.register$$module$build$src$core$extensions("logic_op_tooltip",i.buildTooltipForDropdown$$module$build$src$core$extensions("OP",ke));var Ze={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const m=i.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&m.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&m.setAttribute("else","1"),m},domToMutation:function(m){this.elseifCount_=parseInt(m.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(m.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const m=Object.create(null);return this.elseifCount_&&(m.elseIfCount=this.elseifCount_),this.elseCount_&&(m.hasElse=!0),m},loadExtraState:function(m){this.elseifCount_=m.elseIfCount||0,this.elseCount_=m.hasElse?1:0,this.updateShape_()},decompose:function(m){const D=m.newBlock("controls_if_if");D.initSvg();let ie=D.nextConnection;for(let le=1;le<=this.elseifCount_;le++){const Be=m.newBlock("controls_if_elseif");Be.initSvg(),ie.connect(Be.previousConnection),ie=Be.nextConnection}return this.elseCount_&&(m=m.newBlock("controls_if_else"),m.initSvg(),ie.connect(m.previousConnection)),D},compose:function(m){m=m.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const D=[null],ie=[null];let le=null;for(;m;){if(!m.isInsertionMarker())switch(m.type){case"controls_if_elseif":this.elseifCount_++,D.push(m.valueConnection_),ie.push(m.statementConnection_);break;case"controls_if_else":this.elseCount_++,le=m.statementConnection_;break;default:throw TypeError("Unknown block type: "+m.type)}m=m.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(D,ie,le)},saveConnections:function(m){m=m.nextConnection.targetBlock();let D=1;for(;m;){if(!m.isInsertionMarker())switch(m.type){case"controls_if_elseif":var ie=this.getInput("IF"+D);const le=this.getInput("DO"+D);m.valueConnection_=ie&&ie.connection.targetConnection,m.statementConnection_=le&&le.connection.targetConnection,D++;break;case"controls_if_else":ie=this.getInput("ELSE"),m.statementConnection_=ie&&ie.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+m.type)}m=m.getNextBlock()}},rebuildShape_:function(){const m=[null],D=[null];let ie=null;this.getInput("ELSE")&&(ie=this.getInput("ELSE").connection.targetConnection);for(let le=1;this.getInput("IF"+le);le++){const Be=this.getInput("IF"+le),gt=this.getInput("DO"+le);m.push(Be.connection.targetConnection),D.push(gt.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(m,D,ie)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var m=1;this.getInput("IF"+m);m++)this.removeInput("IF"+m),this.removeInput("DO"+m);for(m=1;m<=this.elseifCount_;m++)this.appendValueInput("IF"+m).setCheck("Boolean").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+m).appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(i.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(m,D,ie){for(let le=1;le<=this.elseifCount_;le++){let Be;(Be=m[le])==null||Be.reconnect(this,"IF"+le);let gt;(gt=D[le])==null||gt.reconnect(this,"DO"+le)}ie?.reconnect(this,"ELSE")}};i.registerMutator$$module$build$src$core$extensions("controls_if_mutator",Ze,null,["controls_if_elseif","controls_if_else"]);var ve=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4}else return i.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};i.register$$module$build$src$core$extensions("controls_if_tooltip",ve);var ut={onchange:function(m){this.prevBlocks_||(this.prevBlocks_=[null,null]);var D=this.getInputTargetBlock("A");const ie=this.getInputTargetBlock("B");D&&ie&&!this.workspace.connectionChecker.doTypeChecks(D.outputConnection,ie.outputConnection)&&(i.setGroup$$module$build$src$core$events$utils(m.group),m=this.prevBlocks_[0],m!==D&&(D.unplug(),!m||m.isDisposed()||m.isShadow()||this.getInput("A").connection.connect(m.outputConnection)),D=this.prevBlocks_[1],D!==ie&&(ie.unplug(),!D||D.isDisposed()||D.isShadow()||this.getInput("B").connection.connect(D.outputConnection)),this.bumpNeighbours(),i.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},Bt=function(){this.mixin(ut)};i.register$$module$build$src$core$extensions("logic_compare",Bt);var tr={prevParentConnection_:null,onchange:function(m){const D=this.getInputTargetBlock("THEN"),ie=this.getInputTargetBlock("ELSE"),le=this.outputConnection.targetConnection;if((D||ie)&&le)for(let Be=0;Be<2;Be++){const gt=Be===1?D:ie;gt&&!gt.workspace.connectionChecker.doTypeChecks(gt.outputConnection,le)&&(i.setGroup$$module$build$src$core$events$utils(m.group),le===this.prevParentConnection_?(this.unplug(),le.getSourceBlock().bumpNeighbours()):(gt.unplug(),gt.bumpNeighbours()),i.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=le}};i.registerMixin$$module$build$src$core$extensions("logic_ternary",tr),i.defineBlocks$$module$build$src$core$common(He);var hr={blocks:He},wt=i.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),rn={init:function(){this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new i.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");return m.setAttribute("items",String(this.itemCount_)),m},domToMutation:function(m){if(m=m.getAttribute("items"),!m)throw new TypeError("element did not have items");this.itemCount_=parseInt(m,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(m){this.itemCount_=m.itemCount,this.updateShape_()},decompose:function(m){const D=m.newBlock("lists_create_with_container");D.initSvg();let ie=D.getInput("STACK").connection;for(let le=0;le<this.itemCount_;le++){const Be=m.newBlock("lists_create_with_item");if(Be.initSvg(),!Be.previousConnection)throw Error("itemBlock has no previousConnection");ie.connect(Be.previousConnection),ie=Be.nextConnection}return D},compose:function(m){var D=m.getInputTargetBlock("STACK");for(m=[];D;)D.isInsertionMarker()||m.push(D.valueConnection_),D=D.getNextBlock();for(D=0;D<this.itemCount_;D++){const ie=this.getInput("ADD"+D).connection.targetConnection;ie&&!m.includes(ie)&&ie.disconnect()}for(this.itemCount_=m.length,this.updateShape_(),D=0;D<this.itemCount_;D++){let ie;(ie=m[D])==null||ie.reconnect(this,"ADD"+D)}},saveConnections:function(m){m=m.getInputTargetBlock("STACK");let D=0;for(;m;){if(m.isInsertionMarker()){m=m.getNextBlock();continue}const ie=this.getInput("ADD"+D);let le;m.valueConnection_=(le=ie)==null?void 0:le.connection.targetConnection,m=m.getNextBlock(),D++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var m=0;m<this.itemCount_;m++)if(!this.getInput("ADD"+m)){const D=this.appendValueInput("ADD"+m).setAlign(i.Align$$module$build$src$core$inputs$align.RIGHT);m===0&&D.appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(m=this.itemCount_;this.getInput("ADD"+m);m++)this.removeInput("ADD"+m)}};wt.lists_create_with=rn;var Wt={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};wt.lists_create_with_container=Wt;var te={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};wt.lists_create_with_item=te;var dr={init:function(){var m=[[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),m=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:m}),!m)throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(m,"END"),this.setInputsInline(!0),this.setTooltip(()=>i.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}};wt.lists_indexOf=dr;var mn={init:function(){var m=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),m=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:m}),m.setValidator(function(D){D=D==="REMOVE",this.getSourceBlock().updateStatement_(D)}),this.appendValueInput("VALUE").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(m,"MODE").appendField("","SPACE"),m=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),m.setValidator(function(D){const ie=this.getValue();D=D==="FROM_START"||D==="FROM_END",D!==(ie==="FROM_START"||ie==="FROM_END")&&this.getSourceBlock().updateAt_(D)}),this.appendDummyInput().appendField(m,"WHERE"),this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{const D=this.getFieldValue("MODE"),ie=this.getFieldValue("WHERE");let le="";switch(D+" "+ie){case"GET FROM_START":case"GET FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(ie==="FROM_START"||ie==="FROM_END")&&(le+="  "+(ie==="FROM_START"?i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),le})},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");m.setAttribute("statement",String(!this.outputConnection));const D=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return m.setAttribute("at",String(D)),m},domToMutation:function(m){const D=m.getAttribute("statement")==="true";this.updateStatement_(D),m=m.getAttribute("at")!=="false",this.updateAt_(m)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(m){m.isStatement?this.updateStatement_(!0):typeof m=="string"&&this.domToMutation(i.textToDom$$module$build$src$core$utils$xml(m))},updateStatement_:function(m){m!==!this.outputConnection&&(this.unplug(!0,!0),m?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(m){this.removeInput("AT"),this.removeInput("ORDINAL",!0),m?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};wt.lists_getIndex=mn;var ct={init:function(){var m=[[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[i.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),m=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:m}),this.appendDummyInput().appendField(m,"MODE").appendField("","SPACE"),m=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS}),m.setValidator(function(D){const ie=this.getValue();D=D==="FROM_START"||D==="FROM_END",D!==(ie==="FROM_START"||ie==="FROM_END")&&this.getSourceBlock().updateAt_(D)}),this.appendDummyInput().appendField(m,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{const D=this.getFieldValue("MODE"),ie=this.getFieldValue("WHERE");let le="";switch(D+" "+ie){case"SET FROM_START":case"SET FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":le=i.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(ie==="FROM_START"||ie==="FROM_END")&&(le+="  "+i.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),le})},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation"),D=this.getInput("AT")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return m.setAttribute("at",String(D)),m},domToMutation:function(m){m=m.getAttribute("at")!=="false",this.updateAt_(m)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(m){this.removeInput("AT"),this.removeInput("ORDINAL",!0),m?(this.appendValueInput("AT").setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}};wt.lists_setIndex=ct;var Ot={init:function(){this.WHERE_OPTIONS_1=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);const m=D=>{const ie=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+D]});return ie.setValidator(function(le){const Be=this.getValue();le=le==="FROM_START"||le==="FROM_END",le!==(Be==="FROM_START"||Be==="FROM_END")&&this.getSourceBlock().updateAt_(D,le)}),ie};this.appendDummyInput("WHERE1_INPUT").appendField(m(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(m(2),"WHERE2"),this.appendDummyInput("AT2"),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");var D=this.getInput("AT1")instanceof i.ValueInput$$module$build$src$core$inputs$value_input;return m.setAttribute("at1",String(D)),D=this.getInput("AT2")instanceof i.ValueInput$$module$build$src$core$inputs$value_input,m.setAttribute("at2",String(D)),m},domToMutation:function(m){const D=m.getAttribute("at1")==="true";m=m.getAttribute("at2")==="true",this.updateAt_(1,D),this.updateAt_(2,m)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(m,D){this.removeInput("AT"+m),this.removeInput("ORDINAL"+m,!0),D?(this.appendValueInput("AT"+m).setCheck("Number"),i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+m).appendField(i.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+m),m===1&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),i.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};wt.lists_getSublist=Ot,wt.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},wt.lists_split={init:function(){const m=i.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!m)throw Error("field_dropdown not found");m.setValidator(D=>{this.updateType_(D)}),this.setHelpUrl(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(m,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(i.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{const D=this.getFieldValue("MODE");if(D==="SPLIT")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(D==="JOIN")return i.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+D)})},updateType_:function(m){if(this.getFieldValue("MODE")!==m){const D=this.getInput("INPUT").connection;D.setShadowDom(null);const ie=D.targetBlock();ie&&(D.disconnect(),ie.isShadow()?ie.dispose(!1):this.bumpNeighbours())}m==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const m=i.createElement$$module$build$src$core$utils$xml("mutation");return m.setAttribute("mode",this.getFieldValue("MODE")),m},domToMutation:function(m){this.updateType_(m.getAttribute("mode"))},saveExtraState:function(){return{mode:this.getFieldValue("MODE")}},loadExtraState:function(m){this.updateType_(m.mode)}},i.defineBlocks$$module$build$src$core$common(wt);var et={blocks:wt},ot=Object.assign({},wt,He,he,j,B,R,f,l),Mt={blocks:ot,lists:et,logic:hr,loops:_e,math:q,procedures:Re,texts:U,variables:S,variablesDynamic:_};return Mt.__namespace__=i,Mt})}(H0)),H0.exports}(function(t,s){(function(r,i){t.exports=i(TI(),P1(),F1())})(bo,function(r,i,l){return r.setLocale(i),r})})(D1);var LP=D1.exports;const AP=Ph(LP),{Block:Qne,BlockFlyoutInflater:ese,BlockNavigationPolicy:tse,BlockSvg:B1,Blocks:Yt,ButtonFlyoutInflater:rse,COLLAPSED_FIELD_NAME:nse,COLLAPSED_INPUT_NAME:sse,COLLAPSE_CHARS:ise,CodeGenerator:ose,CollapsibleToolboxCategory:lse,ComponentManager:ase,Connection:cse,ConnectionChecker:use,ConnectionDB:hse,ConnectionNavigationPolicy:dse,ConnectionType:_se,ContextMenu:fse,ContextMenuItems:Tse,ContextMenuRegistry:pse,Css:Ese,DELETE_VARIABLE_ID:gse,DeleteArea:mse,DragTarget:$se,DropDownDiv:Ise,Events:kt,Extensions:Ur,Field:Ose,FieldCheckbox:Sse,FieldDropdown:G0,FieldImage:Rse,FieldLabel:CP,FieldLabelSerializable:Bl,FieldNavigationPolicy:Lse,FieldNumber:Ase,FieldTextInput:Bi,FieldVariable:Cse,Flyout:vse,FlyoutButton:Nse,FlyoutButtonNavigationPolicy:xse,FlyoutItem:bse,FlyoutMetricsManager:yse,FlyoutNavigationPolicy:kse,FlyoutNavigator:wse,FlyoutSeparator:Mse,FlyoutSeparatorNavigationPolicy:Dse,FocusManager:Pse,FocusableTreeTraverser:Fse,Generator:Bse,Gesture:Use,Grid:Hse,HorizontalFlyout:Gse,INPUT_VALUE:Vse,Input:Wse,InsertionMarkerPreviewer:Xse,KeyboardNavigationController:zse,LabelFlyoutInflater:Yse,LineCursor:Kse,Marker:jse,MarkerManager:Jse,Menu:qse,MenuItem:Zse,MetricsManager:Qse,Msg:yn,NEXT_STATEMENT:eie,Names:tie,Navigator:rie,OPPOSITE_TYPE:nie,OUTPUT_VALUE:sie,Options:iie,PREVIOUS_STATEMENT:oie,PROCEDURE_CATEGORY_NAME:lie,Procedures:aie,RENAME_VARIABLE_ID:cie,RenderedConnection:uie,Scrollbar:hie,ScrollbarPair:die,SeparatorFlyoutInflater:_ie,ShortcutItems:fie,ShortcutRegistry:Tie,TOOLBOX_AT_BOTTOM:pie,TOOLBOX_AT_LEFT:Eie,TOOLBOX_AT_RIGHT:gie,TOOLBOX_AT_TOP:mie,Theme:vP,ThemeManager:$ie,Themes:NP,Toast:Iie,Toolbox:Oie,ToolboxCategory:Sie,ToolboxItem:Rie,ToolboxSeparator:Lie,Tooltip:Aie,Touch:Cie,Trashcan:vie,UnattachedFieldError:Nie,VARIABLE_CATEGORY_NAME:xie,VARIABLE_DYNAMIC_CATEGORY_NAME:bie,VERSION:yie,VariableMap:kie,VariableModel:wie,Variables:Mie,VariablesDynamic:Die,VerticalFlyout:Pie,WidgetDiv:Fie,Workspace:Bie,WorkspaceAudio:Uie,WorkspaceDragger:Hie,WorkspaceNavigationPolicy:Gie,WorkspaceSvg:Vie,Xml:Mv,ZoomControls:Wie,blockAnimations:Xie,blockRendering:zie,browserEvents:Yie,bubbles:Kie,bumpObjects:jie,clipboard:Jie,comments:qie,common:Zie,config:Qie,constants:eoe,defineBlocksWithJsonArray:e$,dialog:toe,dragging:roe,fieldRegistry:noe,geras:soe,getFocusManager:ioe,getMainWorkspace:ooe,getSelected:loe,hasBubble:aoe,hideChaff:Dv,icons:coe,inject:xP,inputs:t$,isCopyable:uoe,isDeletable:hoe,isDraggable:doe,isIcon:_oe,isObservable:foe,isPaster:Toe,isRenderedElement:poe,isSelectable:Eoe,isSerializable:goe,isVariableBackedParameterModel:moe,keyboardNavigationController:$oe,layers:Ioe,navigateBlock:Ooe,navigateStacks:Soe,procedures:Roe,registry:Loe,renderManagement:Aoe,serialization:Coe,setLocale:Pv,setParentContainer:voe,svgResize:Noe,thrasos:xoe,uiPosition:boe,utils:tc,zelos:yoe}=AP,bP=new Set(["LET","LAMBDA"]);function U1(t){const s=t.filter(r=>!bP.has(r.name.toUpperCase())).map(r=>({type:`frockly_${r.name.toUpperCase()}`,message0:"",args0:[],output:null,colour:200,mutator:"frockly_fn_dynargs",extensions:["frockly_fn_ui"]}));e$(s)}var H1={exports:{}};(function(t,s){(function(r,i){t.exports=i(TI())})(bo,function(r){var i=r.__namespace__,l=function(O,w){return["[]",te.ATOMIC]},c=function(O,w){const ee=Array(O.itemCount_);for(let ae=0;ae<O.itemCount_;ae++)ee[ae]=w.valueToCode(O,"ADD"+ae,te.NONE)||"null";return["["+ee.join(", ")+"]",te.ATOMIC]},u=function(O,w){const ee=w.provideFunction_("listsRepeat",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),ae=w.valueToCode(O,"ITEM",te.NONE)||"null";return O=w.valueToCode(O,"NUM",te.NONE)||"0",[ee+"("+ae+", "+O+")",te.FUNCTION_CALL]},h=function(O,w){return[(w.valueToCode(O,"VALUE",te.MEMBER)||"[]")+".length",te.MEMBER]},_=function(O,w){return["!"+(w.valueToCode(O,"VALUE",te.MEMBER)||"[]")+".length",te.LOGICAL_NOT]},f=function(O,w){const ee=O.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ae=w.valueToCode(O,"FIND",te.NONE)||"''";return w=(w.valueToCode(O,"VALUE",te.MEMBER)||"[]")+"."+ee+"("+ae+")",O.workspace.options.oneBasedIndex?[w+" + 1",te.ADDITION]:[w,te.FUNCTION_CALL]},T=function(O,w){const ee=O.getFieldValue("MODE")||"GET",ae=O.getFieldValue("WHERE")||"FROM_START";var Ae=w.valueToCode(O,"VALUE",ae==="RANDOM"?te.NONE:te.MEMBER)||"[]";switch(ae){case"FIRST":if(ee==="GET")return[Ae+"[0]",te.MEMBER];if(ee==="GET_REMOVE")return[Ae+".shift()",te.MEMBER];if(ee==="REMOVE")return Ae+`.shift();
`;break;case"LAST":if(ee==="GET")return[Ae+".slice(-1)[0]",te.MEMBER];if(ee==="GET_REMOVE")return[Ae+".pop()",te.MEMBER];if(ee==="REMOVE")return Ae+`.pop();
`;break;case"FROM_START":if(O=w.getAdjusted(O,"AT"),ee==="GET")return[Ae+"["+O+"]",te.MEMBER];if(ee==="GET_REMOVE")return[Ae+".splice("+O+", 1)[0]",te.FUNCTION_CALL];if(ee==="REMOVE")return Ae+".splice("+O+`, 1);
`;break;case"FROM_END":if(O=w.getAdjusted(O,"AT",1,!0),ee==="GET")return[Ae+".slice("+O+")[0]",te.FUNCTION_CALL];if(ee==="GET_REMOVE")return[Ae+".splice("+O+", 1)[0]",te.FUNCTION_CALL];if(ee==="REMOVE")return Ae+".splice("+O+", 1);";break;case"RANDOM":if(Ae=w.provideFunction_("listsGetRandomItem",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+Ae+", "+(ee!=="GET")+")",ee==="GET"||ee==="GET_REMOVE")return[Ae,te.FUNCTION_CALL];if(ee==="REMOVE")return Ae+`;
`}throw Error("Unhandled combination (lists_getIndex).")},E=function(O,w){function ee(){if(ae.match(/^\w+$/))return"";const wr=w.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),Oi="var "+wr+" = "+ae+`;
`;return ae=wr,Oi}let ae=w.valueToCode(O,"LIST",te.MEMBER)||"[]";const Ae=O.getFieldValue("MODE")||"GET";var Xe=O.getFieldValue("WHERE")||"FROM_START";const rt=w.valueToCode(O,"TO",te.ASSIGNMENT)||"null";switch(Xe){case"FIRST":if(Ae==="SET")return ae+"[0] = "+rt+`;
`;if(Ae==="INSERT")return ae+".unshift("+rt+`);
`;break;case"LAST":if(Ae==="SET")return ee()+(ae+"["+ae+".length - 1] = "+rt+`;
`);if(Ae==="INSERT")return ae+".push("+rt+`);
`;break;case"FROM_START":if(O=w.getAdjusted(O,"AT"),Ae==="SET")return ae+"["+O+"] = "+rt+`;
`;if(Ae==="INSERT")return ae+".splice("+O+", 0, "+rt+`);
`;break;case"FROM_END":if(O=w.getAdjusted(O,"AT",1,!1,te.SUBTRACTION),Xe=ee(),Ae==="SET")return Xe+(ae+"["+ae+".length - "+O+"] = "+rt+`;
`);if(Ae==="INSERT")return Xe+(ae+".splice("+ae+".length - "+O+", 0, "+rt+`);
`);break;case"RANDOM":if(O=ee(),Xe=w.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+Xe+" = Math.floor(Math.random() * "+ae+`.length);
`,Ae==="SET")return O+(ae+"["+Xe+"] = "+rt+`;
`);if(Ae==="INSERT")return O+(ae+".splice("+Xe+", 0, "+rt+`);
`)}throw Error("Unhandled combination (lists_setIndex).")},g=function(O,w){var ee={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},ae=w.valueToCode(O,"LIST",te.MEMBER)||"[]";const Ae=O.getFieldValue("WHERE1"),Xe=O.getFieldValue("WHERE2");if(Ae==="FIRST"&&Xe==="LAST")ae+=".slice(0)";else if(ae.match(/^\w+$/)||Ae!=="FROM_END"&&Xe==="FROM_START"){switch(Ae){case"FROM_START":ee=w.getAdjusted(O,"AT1");break;case"FROM_END":ee=w.getAdjusted(O,"AT1",1,!1,te.SUBTRACTION),ee=ae+".length - "+ee;break;case"FIRST":ee="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(Xe){case"FROM_START":w=w.getAdjusted(O,"AT2",1);break;case"FROM_END":w=w.getAdjusted(O,"AT2",0,!1,te.SUBTRACTION),w=ae+".length - "+w;break;case"LAST":w=ae+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}ae=ae+".slice("+ee+", "+w+")"}else{const rt=w.getAdjusted(O,"AT1");O=w.getAdjusted(O,"AT2"),ae=w.provideFunction_("subsequence"+ee[Ae]+ee[Xe],`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(sequence${Ae==="FROM_END"||Ae==="FROM_START"?", at1":""}${Xe==="FROM_END"||Xe==="FROM_START"?", at2":""}) {
  var start = ${mn("sequence",Ae,"at1")};
  var end = ${mn("sequence",Xe,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+ae+(Ae==="FROM_END"||Ae==="FROM_START"?", "+rt:"")+(Xe==="FROM_END"||Xe==="FROM_START"?", "+O:"")+")"}return[ae,te.FUNCTION_CALL]},S=function(O,w){const ee=w.valueToCode(O,"LIST",te.FUNCTION_CALL)||"[]",ae=O.getFieldValue("DIRECTION")==="1"?1:-1;return O=O.getFieldValue("TYPE"),w=w.provideFunction_("listsGetSortCompare",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `),[ee+".slice().sort("+w+'("'+O+'", '+ae+"))",te.FUNCTION_CALL]},R=function(O,w){let ee=w.valueToCode(O,"INPUT",te.MEMBER);if(w=w.valueToCode(O,"DELIM",te.NONE)||"''",O=O.getFieldValue("MODE"),O==="SPLIT")ee||(ee="''"),O="split";else if(O==="JOIN")ee||(ee="[]"),O="join";else throw Error("Unknown mode: "+O);return[ee+"."+O+"("+w+")",te.FUNCTION_CALL]},L=function(O,w){return[(w.valueToCode(O,"LIST",te.FUNCTION_CALL)||"[]")+".slice().reverse()",te.FUNCTION_CALL]},N=function(O,w){var ee=0;let ae="";w.STATEMENT_PREFIX&&(ae+=w.injectId(w.STATEMENT_PREFIX,O));do{const Ae=w.valueToCode(O,"IF"+ee,te.NONE)||"false";let Xe=w.statementToCode(O,"DO"+ee);w.STATEMENT_SUFFIX&&(Xe=w.prefixLines(w.injectId(w.STATEMENT_SUFFIX,O),w.INDENT)+Xe),ae+=(ee>0?" else ":"")+"if ("+Ae+`) {
`+Xe+"}",ee++}while(O.getInput("IF"+ee));return(O.getInput("ELSE")||w.STATEMENT_SUFFIX)&&(ee=O.getInput("ELSE")?w.statementToCode(O,"ELSE"):"",w.STATEMENT_SUFFIX&&(ee=w.prefixLines(w.injectId(w.STATEMENT_SUFFIX,O),w.INDENT)+ee),ae+=` else {
`+ee+"}"),ae+`
`},C=function(O,w){const ee={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[O.getFieldValue("OP")],ae=ee==="=="||ee==="!="?te.EQUALITY:te.RELATIONAL,Ae=w.valueToCode(O,"A",ae)||"0";return O=w.valueToCode(O,"B",ae)||"0",[Ae+" "+ee+" "+O,ae]},A=function(O,w){const ee=O.getFieldValue("OP")==="AND"?"&&":"||",ae=ee==="&&"?te.LOGICAL_AND:te.LOGICAL_OR;let Ae=w.valueToCode(O,"A",ae);return O=w.valueToCode(O,"B",ae),Ae||O?(w=ee==="&&"?"true":"false",Ae||(Ae=w),O||(O=w)):O=Ae="false",[Ae+" "+ee+" "+O,ae]},I=function(O,w){const ee=te.LOGICAL_NOT;return["!"+(w.valueToCode(O,"BOOL",ee)||"true"),ee]},k=function(O,w){return[O.getFieldValue("BOOL")==="TRUE"?"true":"false",te.ATOMIC]},H=function(O,w){return["null",te.ATOMIC]},G=function(O,w){const ee=w.valueToCode(O,"IF",te.CONDITIONAL)||"false",ae=w.valueToCode(O,"THEN",te.CONDITIONAL)||"null";return O=w.valueToCode(O,"ELSE",te.CONDITIONAL)||"null",[ee+" ? "+ae+" : "+O,te.CONDITIONAL]},x=function(O,w){let ee;ee=O.getField("TIMES")?String(Number(O.getFieldValue("TIMES"))):w.valueToCode(O,"TIMES",te.ASSIGNMENT)||"0";let ae=w.statementToCode(O,"DO");ae=w.addLoopTrap(ae,O),O="";const Ae=w.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE);let Xe=ee;return ee.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(ee)||(Xe=w.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+Xe+" = "+ee+`;
`),O+("for (var "+Ae+" = 0; "+Ae+" < "+Xe+"; "+Ae+`++) {
`+ae+`}
`)},U=function(O,w){const ee=O.getFieldValue("MODE")==="UNTIL";let ae=w.valueToCode(O,"BOOL",ee?te.LOGICAL_NOT:te.NONE)||"false",Ae=w.statementToCode(O,"DO");return Ae=w.addLoopTrap(Ae,O),ee&&(ae="!"+ae),"while ("+ae+`) {
`+Ae+`}
`},B=function(O,w){var ee=w.getVariableName(O.getFieldValue("VAR")),ae=w.valueToCode(O,"FROM",te.ASSIGNMENT)||"0",Ae=w.valueToCode(O,"TO",te.ASSIGNMENT)||"0";const Xe=w.valueToCode(O,"BY",te.ASSIGNMENT)||"1";let rt=w.statementToCode(O,"DO");if(rt=w.addLoopTrap(rt,O),i.isNumber$$module$build$src$core$utils$string(ae)&&i.isNumber$$module$build$src$core$utils$string(Ae)&&i.isNumber$$module$build$src$core$utils$string(Xe))w=Number(ae)<=Number(Ae),O="for ("+ee+" = "+ae+"; "+ee+(w?" <= ":" >= ")+Ae+"; "+ee,ee=Math.abs(Number(Xe)),O=ee===1?O+(w?"++":"--"):O+((w?" += ":" -= ")+ee),O+=`) {
`+rt+`}
`;else{O="";let wr=ae;ae.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(ae)||(wr=w.nameDB_.getDistinctName(ee+"_start",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+wr+" = "+ae+`;
`),ae=Ae,Ae.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(Ae)||(ae=w.nameDB_.getDistinctName(ee+"_end",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+ae+" = "+Ae+`;
`),Ae=w.nameDB_.getDistinctName(ee+"_inc",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+Ae+" = ",O=i.isNumber$$module$build$src$core$utils$string(Xe)?O+(Math.abs(Number(Xe))+`;
`):O+("Math.abs("+Xe+`);
`),O+="if ("+wr+" > "+ae+`) {
`,O+=w.INDENT+Ae+" = -"+Ae+`;
`,O=O+`}
for (`+(ee+" = "+wr+"; "+Ae+" >= 0 ? "+ee+" <= "+ae+" : "+ee+" >= "+ae+"; "+ee+" += "+Ae+`) {
`+rt+`}
`)}return O},re=function(O,w){const ee=w.getVariableName(O.getFieldValue("VAR"));var ae=w.valueToCode(O,"LIST",te.ASSIGNMENT)||"[]";let Ae=w.statementToCode(O,"DO");Ae=w.addLoopTrap(Ae,O),O="";let Xe=ae;return ae.match(/^\w+$/)||(Xe=w.nameDB_.getDistinctName(ee+"_list",i.NameType$$module$build$src$core$names.VARIABLE),O+="var "+Xe+" = "+ae+`;
`),ae=w.nameDB_.getDistinctName(ee+"_index",i.NameType$$module$build$src$core$names.VARIABLE),Ae=w.INDENT+ee+" = "+Xe+"["+ae+`];
`+Ae,O+("for (var "+ae+" in "+Xe+`) {
`+Ae+`}
`)},Z=function(O,w){let ee="";if(w.STATEMENT_PREFIX&&(ee+=w.injectId(w.STATEMENT_PREFIX,O)),w.STATEMENT_SUFFIX&&(ee+=w.injectId(w.STATEMENT_SUFFIX,O)),w.STATEMENT_PREFIX){const ae=O.getSurroundLoop();ae&&!ae.suppressPrefixSuffix&&(ee+=w.injectId(w.STATEMENT_PREFIX,ae))}switch(O.getFieldValue("FLOW")){case"BREAK":return ee+`break;
`;case"CONTINUE":return ee+`continue;
`}throw Error("Unknown flow statement.")},se=function(O,w){return O=Number(O.getFieldValue("NUM")),[String(O),O>=0?te.ATOMIC:te.UNARY_NEGATION]},pe=function(O,w){var ee={ADD:[" + ",te.ADDITION],MINUS:[" - ",te.SUBTRACTION],MULTIPLY:[" * ",te.MULTIPLICATION],DIVIDE:[" / ",te.DIVISION],POWER:[null,te.NONE]}[O.getFieldValue("OP")];const ae=ee[0];ee=ee[1];const Ae=w.valueToCode(O,"A",ee)||"0";return O=w.valueToCode(O,"B",ee)||"0",ae?[Ae+ae+O,ee]:["Math.pow("+Ae+", "+O+")",te.FUNCTION_CALL]},Me=function(O,w){const ee=O.getFieldValue("OP");let ae;if(ee==="NEG")return O=w.valueToCode(O,"NUM",te.UNARY_NEGATION)||"0",O[0]==="-"&&(O=" "+O),["-"+O,te.UNARY_NEGATION];switch(O=ee==="SIN"||ee==="COS"||ee==="TAN"?w.valueToCode(O,"NUM",te.DIVISION)||"0":w.valueToCode(O,"NUM",te.NONE)||"0",ee){case"ABS":ae="Math.abs("+O+")";break;case"ROOT":ae="Math.sqrt("+O+")";break;case"LN":ae="Math.log("+O+")";break;case"EXP":ae="Math.exp("+O+")";break;case"POW10":ae="Math.pow(10,"+O+")";break;case"ROUND":ae="Math.round("+O+")";break;case"ROUNDUP":ae="Math.ceil("+O+")";break;case"ROUNDDOWN":ae="Math.floor("+O+")";break;case"SIN":ae="Math.sin("+O+" / 180 * Math.PI)";break;case"COS":ae="Math.cos("+O+" / 180 * Math.PI)";break;case"TAN":ae="Math.tan("+O+" / 180 * Math.PI)"}if(ae)return[ae,te.FUNCTION_CALL];switch(ee){case"LOG10":ae="Math.log("+O+") / Math.log(10)";break;case"ASIN":ae="Math.asin("+O+") / Math.PI * 180";break;case"ACOS":ae="Math.acos("+O+") / Math.PI * 180";break;case"ATAN":ae="Math.atan("+O+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+ee)}return[ae,te.DIVISION]},Oe=function(O,w){return{PI:["Math.PI",te.MEMBER],E:["Math.E",te.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",te.DIVISION],SQRT2:["Math.SQRT2",te.MEMBER],SQRT1_2:["Math.SQRT1_2",te.MEMBER],INFINITY:["Infinity",te.ATOMIC]}[O.getFieldValue("CONSTANT")]},we=function(O,w){var ee={EVEN:[" % 2 === 0",te.MODULUS,te.EQUALITY],ODD:[" % 2 === 1",te.MODULUS,te.EQUALITY],WHOLE:[" % 1 === 0",te.MODULUS,te.EQUALITY],POSITIVE:[" > 0",te.RELATIONAL,te.RELATIONAL],NEGATIVE:[" < 0",te.RELATIONAL,te.RELATIONAL],DIVISIBLE_BY:[null,te.MODULUS,te.EQUALITY],PRIME:[null,te.NONE,te.FUNCTION_CALL]};const ae=O.getFieldValue("PROPERTY"),[Ae,Xe,rt]=ee[ae];return ee=w.valueToCode(O,"NUMBER_TO_CHECK",Xe)||"0",ae==="PRIME"?O=w.provideFunction_("mathIsPrime",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+ee+")":ae==="DIVISIBLE_BY"?(O=w.valueToCode(O,"DIVISOR",te.MODULUS)||"0",O=ee+" % "+O+" === 0"):O=ee+Ae,[O,rt]},ye=function(O,w){const ee=w.valueToCode(O,"DELTA",te.ADDITION)||"0";return O=w.getVariableName(O.getFieldValue("VAR")),O+" = (typeof "+O+" === 'number' ? "+O+" : 0) + "+ee+`;
`},Re=function(O,w){var ee=O.getFieldValue("OP");switch(ee){case"SUM":O=w.valueToCode(O,"LIST",te.MEMBER)||"[]",O+=".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":O=w.valueToCode(O,"LIST",te.NONE)||"[]",O="Math.min.apply(null, "+O+")";break;case"MAX":O=w.valueToCode(O,"LIST",te.NONE)||"[]",O="Math.max.apply(null, "+O+")";break;case"AVERAGE":ee=w.provideFunction_("mathMean",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=ee+"("+O+")";break;case"MEDIAN":ee=w.provideFunction_("mathMedian",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=ee+"("+O+")";break;case"MODE":ee=w.provideFunction_("mathModes",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=ee+"("+O+")";break;case"STD_DEV":ee=w.provideFunction_("mathStandardDeviation",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=ee+"("+O+")";break;case"RANDOM":ee=w.provideFunction_("mathRandomList",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),O=w.valueToCode(O,"LIST",te.NONE)||"[]",O=ee+"("+O+")";break;default:throw Error("Unknown operator: "+ee)}return[O,te.FUNCTION_CALL]},j=function(O,w){const ee=w.valueToCode(O,"DIVIDEND",te.MODULUS)||"0";return O=w.valueToCode(O,"DIVISOR",te.MODULUS)||"0",[ee+" % "+O,te.MODULUS]},Y=function(O,w){const ee=w.valueToCode(O,"VALUE",te.NONE)||"0",ae=w.valueToCode(O,"LOW",te.NONE)||"0";return O=w.valueToCode(O,"HIGH",te.NONE)||"Infinity",["Math.min(Math.max("+ee+", "+ae+"), "+O+")",te.FUNCTION_CALL]},oe=function(O,w){const ee=w.valueToCode(O,"FROM",te.NONE)||"0";return O=w.valueToCode(O,"TO",te.NONE)||"0",[w.provideFunction_("mathRandomInt",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+ee+", "+O+")",te.FUNCTION_CALL]},M=function(O,w){return["Math.random()",te.FUNCTION_CALL]},Q=function(O,w){const ee=w.valueToCode(O,"X",te.NONE)||"0";return["Math.atan2("+(w.valueToCode(O,"Y",te.NONE)||"0")+", "+ee+") / Math.PI * 180",te.DIVISION]},J=function(O,w){const ee=w.getProcedureName(O.getFieldValue("NAME"));var ae="";w.STATEMENT_PREFIX&&(ae+=w.injectId(w.STATEMENT_PREFIX,O)),w.STATEMENT_SUFFIX&&(ae+=w.injectId(w.STATEMENT_SUFFIX,O)),ae&&(ae=w.prefixLines(ae,w.INDENT));let Ae="";w.INFINITE_LOOP_TRAP&&(Ae=w.prefixLines(w.injectId(w.INFINITE_LOOP_TRAP,O),w.INDENT));let Xe="";O.getInput("STACK")&&(Xe=w.statementToCode(O,"STACK"));let rt="";O.getInput("RETURN")&&(rt=w.valueToCode(O,"RETURN",te.NONE)||"");let wr="";Xe&&rt&&(wr=ae),rt&&(rt=w.INDENT+"return "+rt+`;
`);const Oi=[],to=O.getVars();for(let Rr=0;Rr<to.length;Rr++)Oi[Rr]=w.getVariableName(to[Rr]);return ae="function "+ee+"("+Oi.join(", ")+`) {
`+ae+Ae+Xe+wr+rt+"}",ae=w.scrub_(O,ae),w.definitions_["%"+ee]=ae,null},q=function(O,w){const ee=w.getProcedureName(O.getFieldValue("NAME")),ae=[],Ae=O.getVars();for(let Xe=0;Xe<Ae.length;Xe++)ae[Xe]=w.valueToCode(O,"ARG"+Xe,te.NONE)||"null";return[ee+"("+ae.join(", ")+")",te.FUNCTION_CALL]},he=function(O,w){return w.forBlock.procedures_callreturn(O,w)[0]+`;
`},Ne=function(O,w){let ee="if ("+(w.valueToCode(O,"CONDITION",te.NONE)||"false")+`) {
`;return w.STATEMENT_SUFFIX&&(ee+=w.prefixLines(w.injectId(w.STATEMENT_SUFFIX,O),w.INDENT)),O.hasReturnValue_?(O=w.valueToCode(O,"VALUE",te.NONE)||"null",ee+=w.INDENT+"return "+O+`;
`):ee+=w.INDENT+`return;
`,ee+`}
`},Pe=function(O,w){return[w.quote_(O.getFieldValue("TEXT")),te.ATOMIC]},be=function(O,w){switch(O.itemCount_){case 0:return["''",te.ATOMIC];case 1:return O=w.valueToCode(O,"ADD0",te.NONE)||"''",D(O);case 2:var ee=w.valueToCode(O,"ADD0",te.NONE)||"''";return O=w.valueToCode(O,"ADD1",te.NONE)||"''",[D(ee)[0]+" + "+D(O)[0],te.ADDITION];default:ee=Array(O.itemCount_);for(let ae=0;ae<O.itemCount_;ae++)ee[ae]=w.valueToCode(O,"ADD"+ae,te.NONE)||"''";return["["+ee.join(",")+"].join('')",te.FUNCTION_CALL]}},ce=function(O,w){const ee=w.getVariableName(O.getFieldValue("VAR"));return O=w.valueToCode(O,"TEXT",te.NONE)||"''",ee+" += "+D(O)[0]+`;
`},tt=function(O,w){return[(w.valueToCode(O,"VALUE",te.MEMBER)||"''")+".length",te.MEMBER]},b=function(O,w){return["!"+(w.valueToCode(O,"VALUE",te.MEMBER)||"''")+".length",te.LOGICAL_NOT]},_e=function(O,w){const ee=O.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",ae=w.valueToCode(O,"FIND",te.NONE)||"''";return w=(w.valueToCode(O,"VALUE",te.MEMBER)||"''")+"."+ee+"("+ae+")",O.workspace.options.oneBasedIndex?[w+" + 1",te.ADDITION]:[w,te.FUNCTION_CALL]},He=function(O,w){const ee=O.getFieldValue("WHERE")||"FROM_START",ae=w.valueToCode(O,"VALUE",ee==="RANDOM"?te.NONE:te.MEMBER)||"''";switch(ee){case"FIRST":return[ae+".charAt(0)",te.FUNCTION_CALL];case"LAST":return[ae+".slice(-1)",te.FUNCTION_CALL];case"FROM_START":return O=w.getAdjusted(O,"AT"),[ae+".charAt("+O+")",te.FUNCTION_CALL];case"FROM_END":return O=w.getAdjusted(O,"AT",1,!0),[ae+".slice("+O+").charAt(0)",te.FUNCTION_CALL];case"RANDOM":return[w.provideFunction_("textRandomLetter",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+ae+")",te.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},ke=function(O,w){var ee={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};const ae=O.getFieldValue("WHERE1"),Ae=O.getFieldValue("WHERE2");var Xe=ae!=="FROM_END"&&ae!=="LAST"&&Ae!=="FROM_END"&&Ae!=="LAST",rt=w.valueToCode(O,"STRING",Xe?te.MEMBER:te.NONE)||"''";if(ae==="FIRST"&&Ae==="LAST")return[rt,te.NONE];if(rt.match(/^'?\w+'?$/)||Xe){switch(ae){case"FROM_START":ee=w.getAdjusted(O,"AT1");break;case"FROM_END":ee=w.getAdjusted(O,"AT1",1,!1,te.SUBTRACTION),ee=rt+".length - "+ee;break;case"FIRST":ee="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(Ae){case"FROM_START":w=w.getAdjusted(O,"AT2",1);break;case"FROM_END":w=w.getAdjusted(O,"AT2",0,!1,te.SUBTRACTION),w=rt+".length - "+w;break;case"LAST":w=rt+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}rt=rt+".slice("+ee+", "+w+")"}else Xe=w.getAdjusted(O,"AT1"),O=w.getAdjusted(O,"AT2"),rt=w.provideFunction_("subsequence"+ee[ae]+ee[Ae],`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(sequence${ae==="FROM_END"||ae==="FROM_START"?", at1":""}${Ae==="FROM_END"||Ae==="FROM_START"?", at2":""}) {
  var start = ${ie("sequence",ae,"at1")};
  var end = ${ie("sequence",Ae,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+rt+(ae==="FROM_END"||ae==="FROM_START"?", "+Xe:"")+(Ae==="FROM_END"||Ae==="FROM_START"?", "+O:"")+")";return[rt,te.FUNCTION_CALL]},Ze=function(O,w){const ee={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[O.getFieldValue("CASE")];return O=w.valueToCode(O,"TEXT",ee?te.MEMBER:te.NONE)||"''",[ee?O+ee:w.provideFunction_("textToTitleCase",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+O+")",te.FUNCTION_CALL]},ve=function(O,w){const ee={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[O.getFieldValue("MODE")];return[(w.valueToCode(O,"TEXT",te.MEMBER)||"''")+ee,te.FUNCTION_CALL]},ut=function(O,w){return"window.alert("+(w.valueToCode(O,"TEXT",te.NONE)||"''")+`);
`},Bt=function(O,w){return w="window.prompt("+(O.getField("TEXT")?w.quote_(O.getFieldValue("TEXT")):w.valueToCode(O,"TEXT",te.NONE)||"''")+")",O.getFieldValue("TYPE")==="NUMBER"&&(w="Number("+w+")"),[w,te.FUNCTION_CALL]},tr=function(O,w){const ee=w.valueToCode(O,"TEXT",te.NONE)||"''";return O=w.valueToCode(O,"SUB",te.NONE)||"''",[w.provideFunction_("textCount",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+ee+", "+O+")",te.FUNCTION_CALL]},hr=function(O,w){const ee=w.valueToCode(O,"TEXT",te.NONE)||"''",ae=w.valueToCode(O,"FROM",te.NONE)||"''";return O=w.valueToCode(O,"TO",te.NONE)||"''",[w.provideFunction_("textReplace",`
function ${w.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+ee+", "+ae+", "+O+")",te.FUNCTION_CALL]},wt=function(O,w){return[(w.valueToCode(O,"TEXT",te.MEMBER)||"''")+".split('').reverse().join('')",te.FUNCTION_CALL]},rn=function(O,w){return[w.getVariableName(O.getFieldValue("VAR")),te.ATOMIC]},Wt=function(O,w){const ee=w.valueToCode(O,"VALUE",te.ASSIGNMENT)||"0";return w.getVariableName(O.getFieldValue("VAR"))+" = "+ee+`;
`},te;(function(O){O[O.ATOMIC=0]="ATOMIC",O[O.NEW=1.1]="NEW",O[O.MEMBER=1.2]="MEMBER",O[O.FUNCTION_CALL=2]="FUNCTION_CALL",O[O.INCREMENT=3]="INCREMENT",O[O.DECREMENT=3]="DECREMENT",O[O.BITWISE_NOT=4.1]="BITWISE_NOT",O[O.UNARY_PLUS=4.2]="UNARY_PLUS",O[O.UNARY_NEGATION=4.3]="UNARY_NEGATION",O[O.LOGICAL_NOT=4.4]="LOGICAL_NOT",O[O.TYPEOF=4.5]="TYPEOF",O[O.VOID=4.6]="VOID",O[O.DELETE=4.7]="DELETE",O[O.AWAIT=4.8]="AWAIT",O[O.EXPONENTIATION=5]="EXPONENTIATION",O[O.MULTIPLICATION=5.1]="MULTIPLICATION",O[O.DIVISION=5.2]="DIVISION",O[O.MODULUS=5.3]="MODULUS",O[O.SUBTRACTION=6.1]="SUBTRACTION",O[O.ADDITION=6.2]="ADDITION",O[O.BITWISE_SHIFT=7]="BITWISE_SHIFT",O[O.RELATIONAL=8]="RELATIONAL",O[O.IN=8]="IN",O[O.INSTANCEOF=8]="INSTANCEOF",O[O.EQUALITY=9]="EQUALITY",O[O.BITWISE_AND=10]="BITWISE_AND",O[O.BITWISE_XOR=11]="BITWISE_XOR",O[O.BITWISE_OR=12]="BITWISE_OR",O[O.LOGICAL_AND=13]="LOGICAL_AND",O[O.LOGICAL_OR=14]="LOGICAL_OR",O[O.CONDITIONAL=15]="CONDITIONAL",O[O.ASSIGNMENT=16]="ASSIGNMENT",O[O.YIELD=17]="YIELD",O[O.COMMA=18]="COMMA",O[O.NONE=99]="NONE"})(te||(te={}));var dr=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(O="JavaScript"){super(O),this.ORDER_OVERRIDES=[[te.FUNCTION_CALL,te.MEMBER],[te.FUNCTION_CALL,te.FUNCTION_CALL],[te.MEMBER,te.MEMBER],[te.MEMBER,te.FUNCTION_CALL],[te.LOGICAL_NOT,te.LOGICAL_NOT],[te.MULTIPLICATION,te.MULTIPLICATION],[te.ADDITION,te.ADDITION],[te.LOGICAL_AND,te.LOGICAL_AND],[te.LOGICAL_OR,te.LOGICAL_OR]],this.isInitialized=!1;for(const w in te)O=te[w],typeof O!="string"&&(this["ORDER_"+w]=O);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(O){super.init(O),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(O.getVariableMap()),this.nameDB_.populateVariables(O),this.nameDB_.populateProcedures(O);const w=[];var ee=i.allDeveloperVariables$$module$build$src$core$variables(O);for(let ae=0;ae<ee.length;ae++)w.push(this.nameDB_.getName(ee[ae],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(O=i.allUsedVarModels$$module$build$src$core$variables(O),ee=0;ee<O.length;ee++)w.push(this.nameDB_.getName(O[ee].getId(),i.NameType$$module$build$src$core$names.VARIABLE));w.length&&(this.definitions_.variables="var "+w.join(", ")+";"),this.isInitialized=!0}finish(O){const w=Object.values(this.definitions_);return super.finish(O),this.isInitialized=!1,this.nameDB_.reset(),w.join(`

`)+`


`+O}scrubNakedValue(O){return O+`;
`}quote_(O){return O=O.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+O+"'"}multiline_quote_(O){return O.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)}scrub_(O,w,ee=!1){let ae="";if(!O.outputConnection||!O.outputConnection.targetConnection){var Ae=O.getCommentText();Ae&&(Ae=i.wrap$$module$build$src$core$utils$string(Ae,this.COMMENT_WRAP-3),ae+=this.prefixLines(Ae+`
`,"// "));for(let Xe=0;Xe<O.inputList.length;Xe++)O.inputList[Xe].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(Ae=O.inputList[Xe].connection.targetBlock())&&(Ae=this.allNestedComments(Ae))&&(ae+=this.prefixLines(Ae,"// "))}return O=O.nextConnection&&O.nextConnection.targetBlock(),ee=ee?"":this.blockToCode(O),ae+w+ee}getAdjusted(O,w,ee=0,ae=!1,Ae=te.NONE){O.workspace.options.oneBasedIndex&&ee--;const Xe=O.workspace.options.oneBasedIndex?"1":"0";let rt=Ae;return ee>0?rt=te.ADDITION:ee<0?rt=te.SUBTRACTION:ae&&(rt=te.UNARY_NEGATION),O=this.valueToCode(O,w,rt)||Xe,ee===0&&!ae?O:i.isNumber$$module$build$src$core$utils$string(O)?(O=String(Number(O)+ee),ae&&(O=String(-Number(O))),O):(ee>0?O=`${O} + ${ee}`:ee<0&&(O=`${O} - ${-ee}`),ae&&(O=ee?`-(${O})`:`-${O}`),Math.floor(Ae)>=Math.floor(rt)&&(O=`(${O})`),O)}},mn=function(O,w,ee){return w==="FIRST"?"0":w==="FROM_END"?O+".length - 1 - "+ee:w==="LAST"?O+".length - 1":ee},ct={};ct.lists_create_empty=l,ct.lists_create_with=c,ct.lists_getIndex=T,ct.lists_getSublist=g,ct.lists_indexOf=f,ct.lists_isEmpty=_,ct.lists_length=h,ct.lists_repeat=u,ct.lists_reverse=L,ct.lists_setIndex=E,ct.lists_sort=S,ct.lists_split=R;var Ot={};Ot.controls_if=N,Ot.controls_ifelse=N,Ot.logic_boolean=k,Ot.logic_compare=C,Ot.logic_negate=I,Ot.logic_null=H,Ot.logic_operation=A,Ot.logic_ternary=G;var et={};et.controls_flow_statements=Z,et.controls_for=B,et.controls_forEach=re,et.controls_repeat=x,et.controls_repeat_ext=x,et.controls_whileUntil=U;var ot={};ot.math_arithmetic=pe,ot.math_atan2=Q,ot.math_change=ye,ot.math_constant=Oe,ot.math_constrain=Y,ot.math_modulo=j,ot.math_number=se,ot.math_number_property=we,ot.math_on_list=Re,ot.math_random_float=M,ot.math_random_int=oe,ot.math_round=Me,ot.math_single=Me,ot.math_trig=Me;var Mt={};Mt.procedures_callnoreturn=he,Mt.procedures_callreturn=q,Mt.procedures_defnoreturn=J,Mt.procedures_defreturn=J,Mt.procedures_ifreturn=Ne;var m=/^\s*'([^']|\\')*'\s*$/,D=function(O){return m.test(O)?[O,te.ATOMIC]:["String("+O+")",te.FUNCTION_CALL]},ie=function(O,w,ee){return w==="FIRST"?"0":w==="FROM_END"?O+".length - 1 - "+ee:w==="LAST"?O+".length - 1":ee},le={};le.text=Pe,le.text_append=ce,le.text_changeCase=Ze,le.text_charAt=He,le.text_count=tr,le.text_getSubstring=ke,le.text_indexOf=_e,le.text_isEmpty=b,le.text_join=be,le.text_length=tt,le.text_print=ut,le.text_prompt=Bt,le.text_prompt_ext=Bt,le.text_replace=hr,le.text_reverse=wt,le.text_trim=ve;var Be={};Be.variables_get=rn,Be.variables_set=Wt;var gt={};gt.variables_get_dynamic=rn,gt.variables_set_dynamic=Wt;var xn=new dr,Bn=Object.assign({},ct,Ot,et,ot,Mt,le,Be,gt);for(const O in Bn)xn.forBlock[O]=Bn[O];var Un={};return Un.JavascriptGenerator=dr,Un.Order=te,Un.javascriptGenerator=xn,Un.__namespace__=i,Un})})(H1);var yP=H1.exports;const kP=Ph(yP),{JavascriptGenerator:koe,Order:It,javascriptGenerator:Zu}=kP;function wP(t){return t===" "||t==="	"||t===`
`||t==="\r"}const MP=/^\$?[A-Za-z]{1,3}\$?\d{1,7}$/,DP=/^\$?[A-Za-z]{1,3}:\$?[A-Za-z]{1,3}$/,PP=/^\$?\d{1,7}:\$?\d{1,7}$/,FP=/^\$?[A-Za-z]{1,3}\$?\d{1,7}:\$?[A-Za-z]{1,3}\$?\d{1,7}$/;function BP(t,s){let r=s;for(;r<t.length;){const l=t[r];if(/[A-Za-z0-9:$]/.test(l))r++;else break}const i=t.slice(s,r);for(let l=i.length;l>=1;l--){const u=i.slice(0,l).toUpperCase();if(FP.test(u)||DP.test(u)||PP.test(u)||MP.test(u))return{kind:"REF",text:u,i0:s,i1:s+l}}return null}function pI(t){const s=t.startsWith("=")?t.slice(1):t,r=[];let i=0;for(;i<s.length;){const l=s[i];if(wP(l)){i++;continue}if(l==='"'){let h=i+1;for(;h<s.length;){if(s[h]==='"'){if(s[h+1]==='"'){h+=2;continue}h++;break}h++}const _=s.slice(i,h);r.push({kind:"STRING",text:_,i0:i,i1:h}),i=h;continue}if(l==="("){r.push({kind:"LPAREN",text:l,i0:i,i1:i+1}),i++;continue}if(l===")"){r.push({kind:"RPAREN",text:l,i0:i,i1:i+1}),i++;continue}if(l===","){r.push({kind:"COMMA",text:l,i0:i,i1:i+1}),i++;continue}const c=s.slice(i,i+2);if(c==="<="||c===">="||c==="<>"){r.push({kind:"CMP",text:c,i0:i,i1:i+2}),i+=2;continue}if(l==="<"||l===">"||l==="="){r.push({kind:"CMP",text:l,i0:i,i1:i+1}),i++;continue}if(l==="+"||l==="-"||l==="*"||l==="/"||l==="^"||l==="&"){r.push({kind:"OP",text:l,i0:i,i1:i+1}),i++;continue}const u=BP(s,i);if(u){r.push(u),i=u.i1;continue}if(/\d/.test(l)||l==="."&&/\d/.test(s[i+1]??"")){let h=i;for(;h<s.length&&/[\d.]/.test(s[h]);)h++;const _=s.slice(i,h);r.push({kind:"NUMBER",text:_,i0:i,i1:h}),i=h;continue}if(/[A-Za-z_]/.test(l)){let h=i+1;for(;h<s.length&&/[A-Za-z0-9_.]/.test(s[h]);)h++;const _=s.slice(i,h).toUpperCase();r.push({kind:"NAME",text:_,i0:i,i1:h}),i=h;continue}r.push({kind:"OP",text:l,i0:i,i1:i+1}),i++}return r.push({kind:"EOF",text:"",i0:s.length,i1:s.length}),{src:s,toks:r}}let Vh="en";function UP(t){Vh=t}function HP(){return Vh}function EI(t=Vh){return t==="en"||t==="ja"?",":";"}function GP(t,s=Vh){const r=EI(s),{src:i,toks:l}=pI(t);let c="",u=0;for(const h of l){if(c+=i.slice(u,h.i0),h.kind==="NAME"){const _=zl(h.text);c+=_?.localizedName??h.text}else h.kind==="COMMA"?c+=r:h.kind==="EOF"||(c+=h.text);u=h.i1}return c}function VP(t,s=Vh){const r=EI(s);let i=t;r!==","&&(i=WP(t,r,","));const{src:l,toks:c}=pI(i);let u="",h=0;for(const _ of c){if(u+=l.slice(h,_.i0),_.kind==="NAME"){const f=zP(_.text);u+=f?.name??_.text}else u+=_.text;h=_.i1}return u}function WP(t,s,r){if(s===r)return t;let i="",l=0;for(;l<t.length;){const c=t[l];if(c==='"'){let u=l+1;for(;u<t.length;){if(t[u]==='"'){if(t[u+1]==='"'){u+=2;continue}u++;break}u++}i+=t.slice(l,u),l=u}else c===s?(i+=r,l++):(i+=c,l++)}return i}function r$(t,s){Zu.forBlock[t]||(Zu.forBlock[t]=function(r){const i=[];for(let h=0;h<50&&r.getInput(`ARG${h}`);h++)i.push(Zu.valueToCode(r,`ARG${h}`,It.NONE)||"");for(;i.length&&i[i.length-1]==="";)i.pop();const l=EI();let c=s;if(HP()!=="en"){const h=zl(s);h?.localizedName&&(c=h.localizedName)}return[`${c}(${i.join(l)})`,It.FUNCTION_CALL]})}function XP(t){const s=t.toUpperCase();if(s==="LET"||s==="LAMBDA")return!0;const r=`frockly_${s}`;if(Yt[r])return r$(r,s),!0;const i=zl(s);return i?(U1([i]),r$(r,s),!0):!1}const n$=new Map,s$=new Map;function gI(t){n$.clear(),s$.clear();for(const s of t)n$.set(s.name,s),s.localizedName&&s$.set(s.localizedName.toUpperCase(),s)}function zl(t){return n$.get(t.toUpperCase())}function zP(t){return s$.get(t.toUpperCase())}const br={STR_COMMON:{FUNCTIONS:"Functions",SEARCH:"Search",NUMBER:"Number",TEXT:"Text",CELL:"Cell",CELL_REF:"Cell reference",RANGE:"Range",ARITH:"Arithmetic",CMP:"Compare",PAREN:"Parentheses",NAME:"var",CANCEL:"Cancel"},STR_STATUS:{LOADING_FUNCS:"Loading function list",LOAD_FAILED:"Failed to load function list",NO_BLOCKS_FOUND:"No blocks found",GENERATED_FORMULA:"Generated Formula",COPY_DONE:"Copied",BASIC:"Basic",HISTORY:"History",NO_HISTORY:"No history",FORMULA_PLACEHOLDER:"=SUM(A1,B1*2)",STATUS_READY:"Ready",STATUS_WORKING:"Working",STATUS_SAVED:"Saved",STATUS_LOADED:"Loaded",NO_SEARCH_RESULTS:"No results found"},STR_TOOLTIP:{TOOLTIP_START:"Start of Excel formula (prepend =)",TOOLTIP_NUMBER:"Number literal",TOOLTIP_STRING:'String literal (output as "...")',TOOLTIP_CELL:"Cell reference (e.g., A1, $B$2, Sheet1!C3)",TOOLTIP_RANGE:"Range reference (e.g., A1:B2, Sheet1!A:A)",TOOLTIP_ARITH:"Arithmetic operations",TOOLTIP_CMP:"Comparison operators",TOOLTIP_PAREN:"Grouping with parentheses",TOOLTIP_BOOL:"TRUE / FALSE"},STR_ACTION:{COPY:"Copy",PASTE:"Paste",BLOCKIFY:"Blockify",IMPORT_FROM_FORMULA:"From formula",PASTE_FORMULA:"Paste a formula"},STR_DIALOG:{SELECT_BLOCK_PROMPT:"Select a block to see the formula here",IMPORT_API_NOT_READY:"Workspace is not ready yet.",IMPORT_FAILED:"Failed to import formula. Check console."},STR_MENU:{COPY_REF:"Copy reference",COPY_VALUE:"Copy value",COPY_TSV:"Copy range (TSV)",PASTE:"Paste",ADD_REF_BLOCK:"Add reference block",CLEAR_VALUE:"Clear value",CLEAR_STYLE:"Clear formatting",CLEAR_ALL:"Clear all"},STR_BLOCKLY_ACTION:{UNDO:"Undo",REDO:"Redo",UNDO_LONG:"Undo",REDO_LONG:"Redo",DUPLICATE:"Duplicate",DELETE:"Delete",SELECT_ALL:"Select all",ADD_COMMENT:"Add comment",REMOVE_COMMENT:"Remove comment",COLLAPSE_BLOCK:"Collapse block",EXPAND_BLOCK:"Expand block"},STR_COLLAPSE:{EXPAND_ALL:"Expand all",COLLAPSE_ALL:"Collapse all",COLLAPSE_LEVEL:"Collapse this level",EXPAND_LEVEL:"Expand this level",COLLAPSE_DEEPEST:"Collapse deepest level",EXPAND_DEEPEST:"Expand deepest level",COLLAPSE_UPPER:"Collapse upper level",EXPAND_UPPER:"Expand upper level",COLLAPSE_SELECTED:"Collapse selected",EXPAND_SELECTED:"Expand selected",COLLAPSE_EXCEPT_SELECTED:"Collapse except selected",EXPAND_EXCEPT_SELECTED:"Expand except selected",COLLAPSE_BY_DEPTH:"Collapse by depth",EXPAND_BY_DEPTH:"Expand by depth",COLLAPSE_TO_LEVEL:"Collapse to level",EXPAND_TO_LEVEL:"Expand to level",COLLAPSE_TEMP:"Collapse temporarily",EXPAND_TEMP:"Expand temporarily"},STR_RIBBON:{TAB_FILE:"File",TAB_FUNCTIONS:"Functions",TAB_NAMED_FUNCTIONS:"Named functions",TAB_CHECK:"Check",TOOLTIP_FILE:"File actions",TOOLTIP_FUNCTIONS:"Function actions",TOOLTIP_NAMED_FUNCTIONS:"Named function actions",TOOLTIP_CHECK:"Check actions",HOVER_DESC_HINT:"Hover a function to see a short description."},STR_FILETAB:{IMPORT:"Import",EXPORT:"Export",SAVE:"Save",LOAD:"Load",CONFIRM_OVERWRITE:"Overwrite?",CONFIRM_IMPORT:"Import?",ALERT_NO_FILE:"No file selected",ALERT_IMPORT_FAILED:"Import failed",ALERT_EXPORT_FAILED:"Export failed"},STR_NAMED_FN:{CREATE_NEW:"Create new",RENAME:"Rename",SAVE:"Save",OPEN:"Open",WORKSPACE_ACTIVE_TOOLTIP:"Workspace active tooltip",INSERT_TO_MAIN:"Insert to main",INSERT:"Insert",INSERT_FUNCTION:"Insert function",INSERT_CURRENT_PARAM:"Insert current param",NAMED_MANAGE:"Manage",NAMED_ADD_PARAM:"+param",NAMED_TOOLTIP_INSERT_PARAM_BLOCK:"Insert param block into current workspace",NAMED_TOOLTIP_INSERT_TO_CURRENT_WS:"Insert into current workspace"},STR_WORKSPACE_MODAL:{WORKSPACE_MANAGER:"Workspace manager",CLOSE:"Close",WORKSPACE_MAIN:"Main",WORKSPACE_FUNCTION:"Function",WORKSPACE_LIST:"Workspaces",TOOLTIP_CREATE_NAMED_FN:"Create a new named function",MAIN_WORKSPACE:"Main workspace",ERROR_MAIN_WORKSPACE_NOT_FOUND:"Main workspace not found (unexpected)",NO_NAMED_FUNCTIONS:"No named functions yet",CONFIRM_DELETE_NAMED_FN:`Delete "{name}"?
Call blocks will become undefined.`,EDIT:"Edit",UNSAVED:"Unsaved",MAIN_WORKSPACE_HELP:'Main is not edited here. Switch workspace with "Open" to edit.',LABEL_FUNCTION_NAME:"Function name",PLACEHOLDER_FUNCTION_NAME:"Function name",LABEL_DESCRIPTION:"Description",PLACEHOLDER_DESCRIPTION:"Description (shown in search/hover)",SAVE:"Save",WARN_ON_UPDATE_META_MISSING_TITLE:"onUpdateFnMeta is not connected",WARN_ON_UPDATE_META_MISSING_NOTE:"onUpdateFnMeta is not connected, so saving is currently unavailable.",HOW_TO_EDIT_TITLE:"How to edit",HOW_TO_EDIT_BODY:'Select a function on the left and press "Edit" to show the form here.'},STR_WORKSPACE_UI:{CONFIRM_DISCARD_CHANGES:"Discard changes?",CONFIRM_OK:"Yes",CONFIRM_CANCEL:"No",ALERT_NO_SELECTION:"Nothing selected",ALERT_INVALID_OPERATION:"Invalid operation",STATUS_READY:"Ready",STATUS_WORKING:"Working",STATUS_SAVED:"Saved",STATUS_LOADED:"Loaded",STATUS_IMPORTED:"Imported",STATUS_EXPORTED:"Exported",ERROR_WS_API_NOT_READY:"Workspace API not ready",ERROR_INIT_FAILED:"Initialization failed",ERROR_CODEGEN_FAILED:"Code generation failed"},STR_XLSX_IMPORT:{ERROR_UNSUPPORTED_FORMAT:"Unsupported format",ERROR_SHEET_NOT_FOUND:"Sheet not found",ERROR_EMPTY_BOOK:"Workbook is empty",ERROR_INVALID_CELL:"Invalid cell",ERROR_INVALID_RANGE:"Invalid range",ERROR_PARSE_FAILED:"Failed to parse",ERROR_TOO_LARGE:"Too large",ERROR_UNSUPPORTED_CELL:"Unsupported cell"},STR_PROJECT_OPS:{ERROR_WORKSPACE_NOT_FOUND:"Workspace not found",ERROR_INVALID_WORKSPACE_KIND:"Invalid workspace kind",ERROR_UNSUPPORTED_SCHEMA_VERSION:"Unsupported schemaVersion",ALERT_SAVE_FAILED:"Save failed",ALERT_LOAD_FAILED:"Load failed",STATUS_UPDATED:"Updated"},STR_MISC:{BLOCK_COUNT_SUFFIX:"blocks",TEMP_DISPLAY:"Temporary",ALL:"All",NONE:"None",UNKNOWN:"Unknown"},STR_VIEW:{VIEW:"View",EXPAND:"Expand",COLLAPSE:"Collapse",FOCUS:"Focus",PATH:"Path",ON:"ON",OFF:"OFF"},STR_MOBILE:{MOBILE_TAB_WORKSPACE:"Workspace",MOBILE_TAB_CELLS:"Cells",MOBILE_TAB_FORMULA:"Formula"},STR_FILETAB_UI:{IMPORT_XLSX:"Import .xlsx",IMPORT_NAMED_FNS:"Import named functions",EXPORT_NAMED_FNS:"Export named functions",SHEET_SWITCH:"Sheet",TOOLTIP_IMPORT_XLSX:"Import Excel (.xlsx)",TOOLTIP_SHEET_SWITCH:"Switch sheet",TOOLTIP_IMPORT_NAMED_FNS:"Import named functions JSON",TOOLTIP_EXPORT_NAMED_FNS:"Export named functions JSON"}},yr={STR_COMMON:{FUNCTIONS:"",SEARCH:"",NUMBER:"",TEXT:"",CELL:"",CELL_REF:"",RANGE:"",ARITH:"",CMP:"",PAREN:"",NAME:"",CANCEL:""},STR_STATUS:{LOADING_FUNCS:"",LOAD_FAILED:"",NO_BLOCKS_FOUND:"",GENERATED_FORMULA:"",COPY_DONE:"",BASIC:"",HISTORY:"",NO_HISTORY:"",FORMULA_PLACEHOLDER:"=SUM(A1,B1*2)",STATUS_READY:"",STATUS_WORKING:"",STATUS_SAVED:"",STATUS_LOADED:"",NO_SEARCH_RESULTS:""},STR_TOOLTIP:{TOOLTIP_START:"Excel = ",TOOLTIP_NUMBER:"",TOOLTIP_STRING:'"..." ',TOOLTIP_CELL:": A1, $B$2, Sheet1!C3",TOOLTIP_RANGE:": A1:B2, Sheet1!A:A",TOOLTIP_ARITH:"",TOOLTIP_CMP:"",TOOLTIP_PAREN:"",TOOLTIP_BOOL:"TRUE / FALSE"},STR_ACTION:{COPY:"",PASTE:"",BLOCKIFY:"",IMPORT_FROM_FORMULA:"",PASTE_FORMULA:""},STR_DIALOG:{SELECT_BLOCK_PROMPT:"",IMPORT_API_NOT_READY:"",IMPORT_FAILED:"console"},STR_MENU:{COPY_REF:"",COPY_VALUE:"",COPY_TSV:"TSV",PASTE:"",ADD_REF_BLOCK:"",CLEAR_VALUE:"",CLEAR_STYLE:"",CLEAR_ALL:""},STR_BLOCKLY_ACTION:{UNDO:"",REDO:"",UNDO_LONG:"",REDO_LONG:"",DUPLICATE:"",DELETE:"",SELECT_ALL:"",ADD_COMMENT:"",REMOVE_COMMENT:"",COLLAPSE_BLOCK:"",EXPAND_BLOCK:""},STR_COLLAPSE:{EXPAND_ALL:"",COLLAPSE_ALL:"",COLLAPSE_LEVEL:"",EXPAND_LEVEL:"",COLLAPSE_DEEPEST:"",EXPAND_DEEPEST:"",COLLAPSE_UPPER:"",EXPAND_UPPER:"",COLLAPSE_SELECTED:"",EXPAND_SELECTED:"",COLLAPSE_EXCEPT_SELECTED:"",EXPAND_EXCEPT_SELECTED:"",COLLAPSE_BY_DEPTH:"",EXPAND_BY_DEPTH:"",COLLAPSE_TO_LEVEL:"",EXPAND_TO_LEVEL:"",COLLAPSE_TEMP:"",EXPAND_TEMP:""},STR_RIBBON:{TAB_FILE:"",TAB_FUNCTIONS:"",TAB_NAMED_FUNCTIONS:"",TAB_CHECK:"",TOOLTIP_FILE:"",TOOLTIP_FUNCTIONS:"",TOOLTIP_NAMED_FUNCTIONS:"",TOOLTIP_CHECK:"",HOVER_DESC_HINT:""},STR_FILETAB:{IMPORT:"",EXPORT:"",SAVE:"",LOAD:"",CONFIRM_OVERWRITE:"",CONFIRM_IMPORT:"",ALERT_NO_FILE:"",ALERT_IMPORT_FAILED:"",ALERT_EXPORT_FAILED:""},STR_NAMED_FN:{CREATE_NEW:"",RENAME:"",SAVE:"",OPEN:"",WORKSPACE_ACTIVE_TOOLTIP:"",INSERT_TO_MAIN:"",INSERT:"",INSERT_FUNCTION:"",INSERT_CURRENT_PARAM:"",NAMED_MANAGE:"",NAMED_ADD_PARAM:"param",NAMED_TOOLTIP_INSERT_PARAM_BLOCK:"param WS",NAMED_TOOLTIP_INSERT_TO_CURRENT_WS:"WS"},STR_WORKSPACE_MODAL:{WORKSPACE_MANAGER:"",CLOSE:"",WORKSPACE_MAIN:"",WORKSPACE_FUNCTION:"",WORKSPACE_LIST:"",TOOLTIP_CREATE_NAMED_FN:"",MAIN_WORKSPACE:"",ERROR_MAIN_WORKSPACE_NOT_FOUND:"",NO_NAMED_FUNCTIONS:"",CONFIRM_DELETE_NAMED_FN:`{name}
`,EDIT:"",UNSAVED:"",MAIN_WORKSPACE_HELP:"",LABEL_FUNCTION_NAME:"",PLACEHOLDER_FUNCTION_NAME:"",LABEL_DESCRIPTION:"",PLACEHOLDER_DESCRIPTION:"",SAVE:"",WARN_ON_UPDATE_META_MISSING_TITLE:"onUpdateFnMeta ",WARN_ON_UPDATE_META_MISSING_NOTE:" onUpdateFnMeta ",HOW_TO_EDIT_TITLE:"",HOW_TO_EDIT_BODY:""},STR_WORKSPACE_UI:{CONFIRM_DISCARD_CHANGES:"",CONFIRM_OK:"",CONFIRM_CANCEL:"",ALERT_NO_SELECTION:"",ALERT_INVALID_OPERATION:"",STATUS_READY:"",STATUS_WORKING:"",STATUS_SAVED:"",STATUS_LOADED:"",STATUS_IMPORTED:"",STATUS_EXPORTED:"",ERROR_WS_API_NOT_READY:" API ",ERROR_INIT_FAILED:"",ERROR_CODEGEN_FAILED:""},STR_XLSX_IMPORT:{ERROR_UNSUPPORTED_FORMAT:"",ERROR_SHEET_NOT_FOUND:"",ERROR_EMPTY_BOOK:"",ERROR_INVALID_CELL:"",ERROR_INVALID_RANGE:"",ERROR_PARSE_FAILED:"",ERROR_TOO_LARGE:"",ERROR_UNSUPPORTED_CELL:""},STR_PROJECT_OPS:{ERROR_WORKSPACE_NOT_FOUND:"",ERROR_INVALID_WORKSPACE_KIND:"",ERROR_UNSUPPORTED_SCHEMA_VERSION:" schemaVersion ",ALERT_SAVE_FAILED:"",ALERT_LOAD_FAILED:"",STATUS_UPDATED:""},STR_MISC:{BLOCK_COUNT_SUFFIX:"",TEMP_DISPLAY:"",ALL:"",NONE:"",UNKNOWN:""},STR_VIEW:{VIEW:"",EXPAND:"",COLLAPSE:"",FOCUS:"",PATH:"",ON:"ON",OFF:"OFF"},STR_MOBILE:{MOBILE_TAB_WORKSPACE:"",MOBILE_TAB_CELLS:"",MOBILE_TAB_FORMULA:""},STR_FILETAB_UI:{IMPORT_XLSX:"xlsx",IMPORT_NAMED_FNS:" ",EXPORT_NAMED_FNS:" ",SHEET_SWITCH:"",TOOLTIP_IMPORT_XLSX:"Excel (.xlsx) ",TOOLTIP_SHEET_SWITCH:"",TOOLTIP_IMPORT_NAMED_FNS:" JSON ",TOOLTIP_EXPORT_NAMED_FNS:" JSON "}},kr={STR_COMMON:{FUNCTIONS:"Fonctions",SEARCH:"Recherche",NUMBER:"Nombre",TEXT:"Texte",CELL:"Cellule",CELL_REF:"Rfrence",RANGE:"Plage",ARITH:"Arithmtique",CMP:"Comparer",PAREN:"Parenthses",NAME:"var",CANCEL:"Annuler"},STR_STATUS:{LOADING_FUNCS:"Chargement des fonctions",LOAD_FAILED:"chec du chargement",NO_BLOCKS_FOUND:"Aucun bloc trouv",GENERATED_FORMULA:"Formule gnre",COPY_DONE:"Copi",BASIC:"Basique",HISTORY:"Historique",NO_HISTORY:"Aucun historique",FORMULA_PLACEHOLDER:"=SOMME(A1;B1*2)",STATUS_READY:"Prt",STATUS_WORKING:"Traitement",STATUS_SAVED:"Enregistr",STATUS_LOADED:"Charg",NO_SEARCH_RESULTS:"Aucun rsultat"},STR_TOOLTIP:{TOOLTIP_START:"Dbut de formule (ajouter =)",TOOLTIP_NUMBER:"Nombre littral",TOOLTIP_STRING:'Chane littrale (sortie comme "...")',TOOLTIP_CELL:"Rfrence de cellule (ex. A1, $B$2)",TOOLTIP_RANGE:"Rfrence de plage (ex. A1:B2)",TOOLTIP_ARITH:"Oprations arithmtiques",TOOLTIP_CMP:"Oprateurs de comparaison",TOOLTIP_PAREN:"Grouper avec parenthses",TOOLTIP_BOOL:"VRAI / FAUX"},STR_ACTION:{COPY:"Copier",PASTE:"Coller",BLOCKIFY:"Blocifier",IMPORT_FROM_FORMULA:"Depuis formule",PASTE_FORMULA:"Coller une formule"},STR_DIALOG:{SELECT_BLOCK_PROMPT:"Slectionnez un bloc pour voir la formule",IMPORT_API_NOT_READY:"L'espace de travail n'est pas prt.",IMPORT_FAILED:"chec de l'importation."},STR_MENU:{COPY_REF:"Copier rfrence",COPY_VALUE:"Copier valeur",COPY_TSV:"Copier plage (TSV)",PASTE:"Coller",ADD_REF_BLOCK:"Ajouter bloc rfrence",CLEAR_VALUE:"Effacer valeur",CLEAR_STYLE:"Effacer format",CLEAR_ALL:"Tout effacer"},STR_BLOCKLY_ACTION:{UNDO:"Annuler",REDO:"Rtablir",UNDO_LONG:"Annuler",REDO_LONG:"Rtablir",DUPLICATE:"Dupliquer",DELETE:"Supprimer",SELECT_ALL:"Tout slectionner",ADD_COMMENT:"Ajouter commentaire",REMOVE_COMMENT:"Supprimer commentaire",COLLAPSE_BLOCK:"Rduire le bloc",EXPAND_BLOCK:"tendre le bloc"},STR_COLLAPSE:{EXPAND_ALL:"Tout tendre",COLLAPSE_ALL:"Tout rduire",COLLAPSE_LEVEL:"Rduire ce niveau",EXPAND_LEVEL:"tendre ce niveau",COLLAPSE_DEEPEST:"Rduire le plus profond",EXPAND_DEEPEST:"tendre le plus profond",COLLAPSE_UPPER:"Rduire niveau sup.",EXPAND_UPPER:"tendre niveau sup.",COLLAPSE_SELECTED:"Rduire la slection",EXPAND_SELECTED:"tendre la slection",COLLAPSE_EXCEPT_SELECTED:"Rduire sauf slection",EXPAND_EXCEPT_SELECTED:"tendre sauf slection",COLLAPSE_BY_DEPTH:"Rduire par prof.",EXPAND_BY_DEPTH:"tendre par prof.",COLLAPSE_TO_LEVEL:"Rduire au niveau",EXPAND_TO_LEVEL:"tendre au niveau",COLLAPSE_TEMP:"Rduire temporairement",EXPAND_TEMP:"tendre temporairement"},STR_RIBBON:{TAB_FILE:"Fichier",TAB_FUNCTIONS:"Fonctions",TAB_NAMED_FUNCTIONS:"Fonctions nommes",TAB_CHECK:"Vrifier",TOOLTIP_FILE:"Fichier",TOOLTIP_FUNCTIONS:"Fonctions",TOOLTIP_NAMED_FUNCTIONS:"Fonctions nommes",TOOLTIP_CHECK:"Vrifier",HOVER_DESC_HINT:"Survolez une fonction pour voir une brve description."},STR_FILETAB:{IMPORT:"Importer",EXPORT:"Exporter",SAVE:"Enregistrer",LOAD:"Charger",CONFIRM_OVERWRITE:"craser ?",CONFIRM_IMPORT:"Importer ?",ALERT_NO_FILE:"Aucun fichier slectionn",ALERT_IMPORT_FAILED:"chec import",ALERT_EXPORT_FAILED:"chec export"},STR_NAMED_FN:{CREATE_NEW:"Crer nouveau",RENAME:"Renommer",SAVE:"Sauver",OPEN:"Ouvrir",WORKSPACE_ACTIVE_TOOLTIP:"Info-bulle active",INSERT_TO_MAIN:"Insrer au principal",INSERT:"Insrer",INSERT_FUNCTION:"Insrer fonction",INSERT_CURRENT_PARAM:"Insrer paramtre",NAMED_MANAGE:"Grer",NAMED_ADD_PARAM:"+param",NAMED_TOOLTIP_INSERT_PARAM_BLOCK:"Insrer bloc paramtre",NAMED_TOOLTIP_INSERT_TO_CURRENT_WS:"Insrer dans espace actuel"},STR_WORKSPACE_MODAL:{WORKSPACE_MANAGER:"Gestionnaire",CLOSE:"Fermer",WORKSPACE_MAIN:"Principal",WORKSPACE_FUNCTION:"Fonction",WORKSPACE_LIST:"Espaces",TOOLTIP_CREATE_NAMED_FN:"Crer fonction nomme",MAIN_WORKSPACE:"Espace principal",ERROR_MAIN_WORKSPACE_NOT_FOUND:"Principal non trouv",NO_NAMED_FUNCTIONS:"Aucune fonction",CONFIRM_DELETE_NAMED_FN:'Supprimer "{name}" ?',EDIT:"diter",UNSAVED:"Non sauvegard",MAIN_WORKSPACE_HELP:"Non ditable ici. Ouvrez pour diter.",LABEL_FUNCTION_NAME:"Nom fonction",PLACEHOLDER_FUNCTION_NAME:"Nom",LABEL_DESCRIPTION:"Description",PLACEHOLDER_DESCRIPTION:"Description",SAVE:"Sauver",WARN_ON_UPDATE_META_MISSING_TITLE:"onUpdateFnMeta manquant",WARN_ON_UPDATE_META_MISSING_NOTE:"Sauvegarde indisponible.",HOW_TO_EDIT_TITLE:"Comment diter",HOW_TO_EDIT_BODY:"Slectionnez et cliquez sur diter."},STR_WORKSPACE_UI:{CONFIRM_DISCARD_CHANGES:"Annuler les changements ?",CONFIRM_OK:"Oui",CONFIRM_CANCEL:"Non",ALERT_NO_SELECTION:"Rien slectionn",ALERT_INVALID_OPERATION:"Opration invalide",STATUS_READY:"Prt",STATUS_WORKING:"...",STATUS_SAVED:"Sauv",STATUS_LOADED:"Charg",STATUS_IMPORTED:"Import",STATUS_EXPORTED:"Export",ERROR_WS_API_NOT_READY:"API non prte",ERROR_INIT_FAILED:"chec init",ERROR_CODEGEN_FAILED:"chec gnration"},STR_XLSX_IMPORT:{ERROR_UNSUPPORTED_FORMAT:"Format non support",ERROR_SHEET_NOT_FOUND:"Feuille non trouve",ERROR_EMPTY_BOOK:"Classeur vide",ERROR_INVALID_CELL:"Cellule invalide",ERROR_INVALID_RANGE:"Plage invalide",ERROR_PARSE_FAILED:"chec analyse",ERROR_TOO_LARGE:"Trop grand",ERROR_UNSUPPORTED_CELL:"Cellule non supporte"},STR_PROJECT_OPS:{ERROR_WORKSPACE_NOT_FOUND:"Espace non trouv",ERROR_INVALID_WORKSPACE_KIND:"Type invalide",ERROR_UNSUPPORTED_SCHEMA_VERSION:"Version non supporte",ALERT_SAVE_FAILED:"chec sauvegarde",ALERT_LOAD_FAILED:"chec chargement",STATUS_UPDATED:"Mis  jour"},STR_MISC:{BLOCK_COUNT_SUFFIX:"blocs",TEMP_DISPLAY:"Temporaire",ALL:"Tout",NONE:"Aucun",UNKNOWN:"Inconnu"},STR_VIEW:{VIEW:"Vue",EXPAND:"tendre",COLLAPSE:"Rduire",FOCUS:"Focus",PATH:"Chemin",ON:"ON",OFF:"OFF"},STR_MOBILE:{MOBILE_TAB_WORKSPACE:"Espace",MOBILE_TAB_CELLS:"Cellules",MOBILE_TAB_FORMULA:"Formule"},STR_FILETAB_UI:{IMPORT_XLSX:"Import .xlsx",IMPORT_NAMED_FNS:"Import fns nommes",EXPORT_NAMED_FNS:"Export fns nommes",SHEET_SWITCH:"Feuille",TOOLTIP_IMPORT_XLSX:"Importer Excel (.xlsx)",TOOLTIP_SHEET_SWITCH:"Changer feuille",TOOLTIP_IMPORT_NAMED_FNS:"Importer JSON",TOOLTIP_EXPORT_NAMED_FNS:"Exporter JSON"}};function Sr(t,s,r){const i={};for(const l of Object.keys(t)){const c=t[l];typeof c=="string"?i[l]={en:c,ja:s[l]??c,fr:r[l]??c}:typeof c=="object"&&c!==null&&(i[l]=Sr(c,s[l]??{},r[l]??{}))}return i}const YP=Sr(br.STR_COMMON,yr.STR_COMMON,kr.STR_COMMON),KP=Sr(br.STR_STATUS,yr.STR_STATUS,kr.STR_STATUS),jP=Sr(br.STR_TOOLTIP,yr.STR_TOOLTIP,kr.STR_TOOLTIP),JP=Sr(br.STR_ACTION,yr.STR_ACTION,kr.STR_ACTION),qP=Sr(br.STR_DIALOG,yr.STR_DIALOG,kr.STR_DIALOG),ZP=Sr(br.STR_MENU,yr.STR_MENU,kr.STR_MENU),QP=Sr(br.STR_BLOCKLY_ACTION,yr.STR_BLOCKLY_ACTION,kr.STR_BLOCKLY_ACTION),eF=Sr(br.STR_COLLAPSE,yr.STR_COLLAPSE,kr.STR_COLLAPSE),tF=Sr(br.STR_RIBBON,yr.STR_RIBBON,kr.STR_RIBBON),rF=Sr(br.STR_FILETAB,yr.STR_FILETAB,kr.STR_FILETAB),nF=Sr(br.STR_NAMED_FN,yr.STR_NAMED_FN,kr.STR_NAMED_FN),sF=Sr(br.STR_WORKSPACE_MODAL,yr.STR_WORKSPACE_MODAL,kr.STR_WORKSPACE_MODAL),iF=Sr(br.STR_WORKSPACE_UI,yr.STR_WORKSPACE_UI,kr.STR_WORKSPACE_UI),oF=Sr(br.STR_XLSX_IMPORT,yr.STR_XLSX_IMPORT,kr.STR_XLSX_IMPORT),lF=Sr(br.STR_PROJECT_OPS,yr.STR_PROJECT_OPS,kr.STR_PROJECT_OPS),aF=Sr(br.STR_MISC,yr.STR_MISC,kr.STR_MISC),cF=Sr(br.STR_VIEW,yr.STR_VIEW,kr.STR_VIEW),uF=Sr(br.STR_MOBILE,yr.STR_MOBILE,kr.STR_MOBILE),hF=Sr(br.STR_FILETAB_UI,yr.STR_FILETAB_UI,kr.STR_FILETAB_UI),Qe={...YP,...KP,...jP,...JP,...qP,...ZP,...QP,...eF,...tF,...rF,...nF,...sF,...iF,...oF,...lF,...aF,...cF,...uF,...hF};function Xr(t){return s=>typeof s=="string"?Qe[s][t]:s[t]}async function dF(t){const s=await fetch(t);if(!s.ok){const r=await s.text();throw new Error(`[HTTP ${s.status}] ${t}
${r.slice(0,200)}`)}return await s.json()}async function _F(t){const s=await fetch(t);if(!s.ok){const r=await s.text();throw new Error(`[HTTP ${s.status}] ${t}
${r.slice(0,200)}`)}return await s.arrayBuffer()}async function fF(t){const r=`${"/Frockly/".replace(/\/?$/,"/")}embed/ml`,i=`${r}/fn_embed.meta.json`,l=`${r}/fn_embed.f32`,c=await dF(i),u=await _F(l),h=new Float32Array(u);if(h.length!==c.count*c.dim)throw new Error(`embed size mismatch: vecs=${h.length}, expected=${c.count*c.dim}`);return{meta:c,vecs:h}}const TF="modulepreload",pF=function(t){return"/Frockly/"+t},Fv={},EF=function(s,r,i){let l=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),h=u?.nonce||u?.getAttribute("nonce");l=Promise.allSettled(r.map(_=>{if(_=pF(_),_ in Fv)return;Fv[_]=!0;const f=_.endsWith(".css"),T=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${_}"]${T}`))return;const E=document.createElement("link");if(E.rel=f?"stylesheet":TF,f||(E.as="script"),E.crossOrigin="",E.href=_,h&&E.setAttribute("nonce",h),document.head.appendChild(E),f)return new Promise((g,S)=>{E.addEventListener("load",g),E.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${_}`)))})}))}function c(u){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=u,window.dispatchEvent(h),!h.defaultPrevented)throw u}return l.then(u=>{for(const h of u||[])h.status==="rejected"&&c(h.reason);return s().catch(c)})},Bv=globalThis.fetch?.bind(globalThis);Bv&&(globalThis.fetch=async(t,s)=>await Bv(t,s));const Uv=globalThis.XMLHttpRequest;if(Uv){class t extends Uv{open(r,i,l,c,u){return this.__url=i,super.open(r,i,l??!0,c??null,u??null)}send(r){return this.addEventListener("loadend",()=>{}),super.send(r??null)}}globalThis.XMLHttpRequest=t}let V0=null;async function gF(t){return V0||(V0=(async()=>{const i=await EF(()=>import("./transformers-CRzypen-.js"),[]),{pipeline:l,env:c}=i;return c.allowLocalModels=!1,c.allowRemoteModels=!0,c.remoteHost="https://huggingface.co/",c.remotePathTemplate="{model}/resolve/{revision}/",c.useBrowserCache=!0,l("feature-extraction","Xenova/paraphrase-multilingual-MiniLM-L12-v2")})()),(await(await V0)(t,{pooling:"mean"})).data}function mF(t,s,r){let i=0;for(let l=0;l<r.length;l++)i+=t[s+l]*r[l];return i}function $F(t,s,r,i=7){const{dim:l,count:c,fns:u}=t,h=new Array(c);for(let _=0;_<c;_++){const f=mF(s,_*l,r);h[_]={fn:u[_],score:f}}return h.sort((_,f)=>f.score-_.score),h.slice(0,i)}const IF=fF();async function OF(t,s=7){const{meta:r,vecs:i}=await IF,l=await gF(t);if(l.length!==r.dim)throw new Error(`dim mismatch: query=${l.length}, index=${r.dim}`);return $F(r,i,l,s)}const SF="/Frockly/assets/fn_list-DNOQxSfy.txt";let W0=null;async function mI(t){W0||(W0=await(await fetch(SF)).text());const s=RF(W0);if(t&&t!=="en")try{const i=`/Frockly/meta/${t}/fn_names.json?t=${Date.now()}`,l=await fetch(i);if(l.ok){const c=await l.json();for(const u of s)c[u.name]&&(u.localizedName=c[u.name])}}catch(r){console.warn("Failed to load localized function names for",t,r)}return s}function RF(t){const s=[];for(const r of t.split(/\r?\n/)){let i=r.trim();if(!i||(i=i.replace(/^\uFEFF/,""),!i.startsWith("(")||!i.endsWith(")")))continue;const c=i.slice(1,-1).split(",").map(E=>E.trim());if(c.length<3)continue;const u=c[0].toUpperCase(),h=Number(c[1]),_=c[2]==="1";if(!Number.isFinite(h))continue;if(!_){s.push({name:u,min:h,variadic:!1});continue}const f=Number(c[3]??"1"),T=Number(c[4]??"0");s.push({name:u,min:h,variadic:!0,step:Number.isFinite(f)?f:1,max:Number.isFinite(T)?T:0})}return s}function Hr({className:t="",children:s,...r}){return V.jsx("button",{type:"button",...r,className:["border px-3 py-1 text-xs leading-none whitespace-nowrap","border-emerald-300 bg-emerald-50 text-emerald-800","hover:bg-emerald-100","disabled:opacity-40 disabled:cursor-not-allowed",t].join(" "),children:s})}function Ah(){return V.jsx("div",{className:"mx-3 self-stretch w-px bg-emerald-400"})}const LF=["SUM","AVERAGE","MIN","MAX","IF","AND","OR","COUNT","COUNTIF","COUNTIFS","SUMIF","SUMIFS","VLOOKUP","XLOOKUP"],Il=7,AF=10,CF=.35,vF=.75;function NF(t){return`frockly_${t.toUpperCase()}`}function G1({search:t="",uiLang:s,onBlockClick:r,onHoverFn:i,onSelectFn:l}){const c=Ce.useMemo(()=>Xr(s),[s]);Ce.useEffect(()=>{},[s]);const u=Ce.useMemo(()=>[{type:"basic_start",label:"=",haystack:"= start"},{type:"basic_number",label:c(Qe.NUMBER),haystack:"number "},{type:"basic_string",label:c(Qe.TEXT),haystack:"text "},{type:"basic_cell",label:c(Qe.CELL_REF),haystack:"cell ref "},{type:"basic_range",label:c(Qe.RANGE),haystack:"range "},{type:"basic_arith",label:c(Qe.ARITH),haystack:"arith  + - * /"},{type:"basic_cmp",label:c(Qe.CMP),haystack:"compare  = <> < <= > >="},{type:"basic_paren",label:c(Qe.PAREN),haystack:"paren  ()"},{type:"basic_name",label:c(Qe.NAME),haystack:"name "}],[c]),h=t.trim().toLowerCase(),[_,f]=Ce.useState([]),[T,E]=Ce.useState(!1),[g,S]=Ce.useState(""),[R,L]=Ce.useState(null),[,N]=Ce.useState(""),[,C]=Ce.useState(!1);Ce.useEffect(()=>{let x=!1;if(L(null),N(""),C(!1),!T||g||!h||h.length<2)return;C(!0);const U=window.setTimeout(()=>{(async()=>{try{const B=await OF(h,Il);x||L(B)}catch(B){x||(L(null),N(String(B?.message??B??"semantic search error")))}finally{x||C(!1)}})()},200);return()=>{x=!0,window.clearTimeout(U)}},[h,T,g]),Ce.useEffect(()=>{let x=!1;return E(!1),(async()=>{try{S("");const U=await mI(s);if(x)return;f(U),gI(U),E(!0)}catch(U){if(x)return;S(String(U?.message??U??"load error")),E(!0)}})(),()=>{x=!0}},[s]);const A=Ce.useMemo(()=>_.map(x=>{const U=x.name.toUpperCase(),B=x.localizedName?x.localizedName:U,re=x.variadic?"variadic":"fixed",Z=x.variadic?`min=${x.min} step=${x.step??1} max=${x.max??0} ${re}`:`args=${x.min} ${re}`;return{type:NF(U),label:B,haystack:`${U} ${B} ${Z}`.toLowerCase()}}),[_]),I=Ce.useMemo(()=>{const x=new Map;for(const U of A)x.set(U.label.toUpperCase(),U);return x},[A]),k=Ce.useMemo(()=>{if(!R)return[];const x=R[0]?.score??0,U=[];for(const B of R){if(B.score<CF||x>0&&B.score<x*vF)continue;const re=I.get(B.fn.toUpperCase());if(re&&U.push(re),U.length>=Il)break}return U},[R,I]),H=Ce.useMemo(()=>{const x=new Map(A.map(re=>[re.label,re])),U=[];for(const re of LF){const Z=x.get(re.toUpperCase());Z&&U.push(Z)}const B=new Set;return U.filter(re=>B.has(re.type)?!1:(B.add(re.type),!0)).slice(0,AF)},[A]),G=Ce.useMemo(()=>{if(!T||g)return[];if(h.length===0)return H;const x=h.toUpperCase(),U=new Set,B=[],re=A.find(Z=>Z.label===x);re&&(B.push(re),U.add(re.type));for(const Z of A)if(Z.label.startsWith(x)&&!U.has(Z.type)&&(B.push(Z),U.add(Z.type)),B.length>=Il)break;for(const Z of k)if(U.has(Z.type)||(B.push(Z),U.add(Z.type)),B.length>=Il)break;for(const Z of A)if(B.length<Il&&!U.has(Z.type)&&(Z.label.toLowerCase().includes(h)||Z.haystack?.includes(h))&&(B.push(Z),U.add(Z.type)),B.length>=Il)break;return B.slice(0,Il)},[h,T,g,A,H,k]);return V.jsxs("div",{className:"py-1",children:[!T&&V.jsx("div",{className:"text-xs text-gray-500 py-1",children:c(Qe.LOADING_FUNCS)}),T&&g&&V.jsxs("div",{className:"text-xs text-red-600 py-1",children:[c(Qe.LOAD_FAILED),": ",g]}),V.jsxs("div",{className:"h-[36px] flex items-stretch px-2 overflow-hidden",children:[V.jsx("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:u.map(x=>V.jsx(Hr,{title:x.label,onClick:()=>r?.(x.type),children:x.label},x.type))}),G.length>0&&V.jsx(Ah,{}),G.length>0&&V.jsx("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:G.map(x=>V.jsx(Hr,{title:x.label,onClick:()=>{r?.(x.type),l?.(x.label.toUpperCase())},onMouseEnter:()=>i?.(`excel:${x.label.toUpperCase()}`),onMouseLeave:()=>i?.(null),children:x.label},x.type))})]}),T&&!g&&h.length>0&&G.length===0&&V.jsx("div",{className:"text-xs text-gray-500 py-1",children:c(Qe.NO_BLOCKS_FOUND)})]})}function xF(t){const s={};for(const r of t.split(/\r?\n/)){const i=r.trim();if(!i)continue;const l=i.match(/^\(\s*([A-Za-z0-9_.]+)\s*,\s*"[^"]*"\s*,\s*"([^"]*)"\s*\)\s*$/);if(!l)continue;const c=l[1].toUpperCase(),u=l[2].trim();c&&u&&(s[c]=u)}return s}async function bF(t){const s="/Frockly/",r=t==="en"?`${s}meta/en/fn_text_en.txt`:t==="ja"?`${s}meta/jp/fn_text_jp.txt`:`${s}meta/fr/fn_text_fr.txt`,i=await fetch(r);if(!i.ok)throw new Error(`fn_text fetch failed: ${i.status} ${r}`);const l=await i.text();return xF(l)}function Hv(t,s=80){const r=(t??"").replace(/\s+/g," ").trim();return r?r.length>s?r.slice(0,s-1)+"ELLIPSIS":r:""}function Gv(t){return!t||t.length===0?"()":`(${t.join(", ")})`}function Vv(t){const s=Xr(t.uiLang),r=t.selected?"border-slate-500":"border-slate-200",i=t.selected?"bg-slate-50":"bg-white",l=t.active?"":" ";return V.jsxs("div",{className:`flex items-center gap-2 border ${r} ${i} px-2 py-2`,onClick:t.onClick,children:[V.jsx("div",{className:"w-[12px] text-[10px] text-slate-500",title:s("WORKSPACE_ACTIVE_TOOLTIP"),children:l}),V.jsxs("div",{className:"min-w-0 flex-1",children:[V.jsx("div",{className:"truncate text-sm font-semibold text-slate-800",children:t.title}),t.subtitle?V.jsx("div",{className:"truncate text-[11px] text-slate-500",children:t.subtitle}):null]}),V.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[V.jsx(wu,{disabled:!t.onOpen,onClick:t.onOpen,title:s("OPEN"),children:s("OPEN")}),V.jsx(wu,{disabled:!t.onInsert,onClick:t.onInsert,title:s("INSERT_TO_MAIN"),children:s("INSERT")}),V.jsx(wu,{disabled:!t.onEdit,onClick:t.onEdit,title:s("EDIT"),children:s("EDIT")}),V.jsx(wu,{disabled:!t.onDuplicate,onClick:t.onDuplicate,title:s("DUPLICATE"),children:s("DUPLICATE")}),V.jsx(wu,{disabled:!t.onDelete,onClick:t.onDelete,title:s("DELETE"),children:s("DELETE")})]})]})}function wu(t){return V.jsx("button",{className:"h-[24px] border border-slate-300 bg-white px-2 text-[11px] hover:bg-slate-100 active:bg-slate-200 disabled:opacity-40",disabled:t.disabled||!t.onClick,title:t.title,onClick:s=>{s.preventDefault(),s.stopPropagation(),t.onClick?.()},children:t.children})}function yF(t){const{main:s,fnWorkspaces:r}=t,i=Xr(t.uiLang??"en"),[l,c]=Ce.useState(t.activeWorkspaceId),[u,h]=Ce.useState(null),[_,f]=Ce.useState(null),[T,E]=Ce.useState(!1);Ce.useEffect(()=>{const I=k=>{k.key==="Escape"&&t.onClose()};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[t]);const g=Ce.useMemo(()=>{const I=r.find(k=>k.id===l);if(I)return t.fnByWsId.get(I.id)},[r,t.fnByWsId,l]),S=l===(s?.id??""),R=I=>{I&&(h(I.id),f({fnId:I.id,name:I.name??"",description:I.description??"",params:(I.params??[]).join(", ")}),E(!1))},L=()=>{h(null),f(null),E(!1)},N=()=>{if(!_)return;const I=_.name.trim(),k=_.description.trim(),H=_.params.split(",").map(G=>G.trim()).filter(Boolean);I&&(t.onUpdateFnMeta?.(_.fnId,{name:I,description:k||void 0,params:H.length?H:[]}),t.onRenameFn?.(_.fnId,I),E(!1),console.log("[NAMED] save meta",_.fnId,{name:I,description:k,params:H}))},C=()=>{const I=t.onCreateFn();c(I.wsId),h(I.fnId),f({fnId:I.fnId,name:"",description:"",params:""}),E(!1)},A=!!_?.name.trim()&&!!t.onUpdateFnMeta;return V.jsx("div",{className:"fixed inset-0 z-[10000] flex items-center justify-center bg-black/20 p-4",onMouseDown:I=>{I.target===I.currentTarget&&t.onClose()},children:V.jsxs("div",{className:"w-full max-w-5xl border border-slate-300 bg-white",onMouseDown:I=>I.stopPropagation(),children:[V.jsxs("div",{className:"flex h-[40px] items-center border-b border-emerald-700 bg-emerald-600 px-3",children:[V.jsx("div",{className:"text-sm font-semibold text-white",children:i("WORKSPACE_MANAGER")}),V.jsx("div",{className:"ml-auto flex items-center gap-2",children:V.jsx("button",{className:"h-[28px] border border-emerald-200 bg-emerald-50 px-3 text-xs text-emerald-900 hover:bg-white active:bg-emerald-100",onClick:t.onClose,children:i("CLOSE")})})]}),V.jsxs("div",{className:"grid grid-cols-12 gap-0",children:[V.jsxs("div",{className:"col-span-7 border-r border-slate-200",children:[V.jsxs("div",{className:"flex items-center gap-2 px-3 py-2",children:[V.jsx("div",{className:"text-xs font-semibold text-slate-600",children:i("WORKSPACE_LIST")}),V.jsx("div",{className:"ml-auto flex items-center gap-2",children:V.jsxs("button",{className:"h-[28px] border border-slate-300 bg-white px-3 text-xs hover:bg-slate-100 active:bg-slate-200",onClick:I=>{I.preventDefault(),I.stopPropagation(),C()},title:i("TOOLTIP_CREATE_NAMED_FN"),children:[" ",i("CREATE_NEW")]})})]}),V.jsxs("div",{className:"max-h-[70vh] overflow-y-auto px-2 pb-2",children:[V.jsxs("div",{className:"mb-2",children:[V.jsx("div",{className:"px-1 py-1 text-[11px] font-semibold text-slate-500",children:i("WORKSPACE_MAIN")}),s?V.jsx(Vv,{uiLang:t.uiLang,selected:l===s.id,active:t.activeWorkspaceId===s.id,title:s.title??i("MAIN_WORKSPACE"),subtitle:"",onClick:()=>c(s.id),onOpen:()=>t.onSwitchWorkspace(s.id),onInsert:null,onEdit:null,onDuplicate:null,onDelete:null}):V.jsx("div",{className:"px-2 py-2 text-xs text-slate-500",children:i("ERROR_MAIN_WORKSPACE_NOT_FOUND")})]}),V.jsxs("div",{children:[V.jsx("div",{className:"px-1 py-1 text-[11px] font-semibold text-slate-500",children:i("TAB_NAMED_FUNCTIONS")}),r.length===0&&V.jsx("div",{className:"px-2 py-2 text-xs text-slate-500",children:i("NO_NAMED_FUNCTIONS")}),V.jsx("div",{className:"flex flex-col gap-1",children:r.map(I=>{const k=t.fnByWsId.get(I.id),H=k?.id??I.fnId??"",G=!!H,x=Gv(k?.params),U=Hv(k?.description??"",80),B=U?`${x}  ${U}`:x;return V.jsx(Vv,{uiLang:t.uiLang,selected:l===I.id,active:t.activeWorkspaceId===I.id,title:k?.name??I.title??"???",subtitle:B,onClick:()=>c(I.id),onOpen:()=>t.onSwitchWorkspace(I.id),onInsert:G?()=>t.onInsertToMain(H):null,onEdit:G?()=>R(k):null,onDuplicate:G?()=>t.onDuplicateFn(H):null,onDelete:G?()=>{window.confirm(i("CONFIRM_DELETE_NAMED_FN").replace("{name}",k?.name??I.title??"???"))&&(t.onDeleteFn(H),u===H&&L())}:null},I.id)})})]})]})]}),V.jsxs("div",{className:"col-span-5",children:[V.jsxs("div",{className:"flex items-center border-b border-slate-200 bg-white px-3 py-2",children:[V.jsx("div",{className:"text-xs font-semibold text-slate-600",children:i("EDIT")}),V.jsx("div",{className:"ml-auto",children:T&&V.jsx("div",{className:"text-[11px] text-slate-500",children:i("UNSAVED")})})]}),V.jsx("div",{className:"max-h-[70vh] overflow-y-auto p-3",children:S?V.jsxs("div",{className:"text-sm text-slate-700",children:[V.jsx("div",{className:"mb-2 font-semibold",children:i("MAIN_WORKSPACE")}),V.jsx("div",{className:"text-xs text-slate-500",children:i("MAIN_WORKSPACE_HELP")})]}):u&&_?V.jsxs(V.Fragment,{children:[V.jsxs("div",{className:"mb-3",children:[V.jsx("div",{className:"mb-1 text-[11px] font-semibold text-slate-600",children:i("LABEL_FUNCTION_NAME")}),V.jsx("input",{autoFocus:!0,className:"w-full border border-slate-300 bg-white px-2 py-1 text-sm outline-none focus:border-slate-500",value:_.name,onChange:I=>{f(k=>k&&{...k,name:I.target.value}),E(!0)},placeholder:i("PLACEHOLDER_FUNCTION_NAME")})]}),V.jsxs("div",{className:"mb-3",children:[V.jsx("div",{className:"mb-1 text-[11px] font-semibold text-slate-600",children:i("LABEL_DESCRIPTION")}),V.jsx("textarea",{className:"w-full border border-slate-300 bg-white px-2 py-1 text-sm outline-none focus:border-slate-500",rows:5,value:_.description,onChange:I=>{f(k=>k&&{...k,description:I.target.value}),E(!0)},placeholder:i("PLACEHOLDER_DESCRIPTION")})]}),V.jsxs("div",{className:"flex gap-2",children:[V.jsx("button",{className:"h-[30px] border border-slate-300 bg-white px-3 text-xs hover:bg-slate-100 active:bg-slate-200",onClick:L,children:i("CANCEL")}),V.jsx("button",{className:"h-[30px] border border-slate-300 bg-white px-3 text-xs hover:bg-slate-100 active:bg-slate-200 disabled:opacity-40",disabled:!A,onClick:N,title:t.onUpdateFnMeta?"":i("WARN_ON_UPDATE_META_MISSING_TITLE"),children:i("SAVE")})]}),!t.onUpdateFnMeta&&V.jsx("div",{className:"mt-2 text-xs text-slate-500",children:i("WARN_ON_UPDATE_META_MISSING_NOTE")})]}):V.jsxs("div",{className:"text-sm text-slate-700",children:[V.jsx("div",{className:"mb-2 font-semibold",children:i("HOW_TO_EDIT_TITLE")}),V.jsx("div",{className:"text-xs text-slate-500",children:i("HOW_TO_EDIT_BODY")}),g&&V.jsxs("div",{className:"mt-4 border border-slate-200 bg-slate-50 p-2 text-xs text-slate-600",children:[V.jsx("div",{className:"font-semibold",children:g.name}),V.jsx("div",{className:"mt-1",children:Gv(g.params)}),g.description&&V.jsx("div",{className:"mt-1",children:Hv(g.description,200)})]})]})})]})]})]})})}function kF(t,s){const r=(t.name??"").toLowerCase(),i=(t.description??"").toLowerCase();return r===s?400:r.startsWith(s)?300:r.includes(s)?200:i.includes(s)?100:0}function V1(t){const s=Xr(t.uiLang),r=(t.search??"").trim().toLowerCase(),i=Ce.useMemo(()=>r?t.fns.map(h=>({fn:h,s:kF(h,r)})).filter(h=>h.s>0).sort((h,_)=>_.s-h.s||h.fn.name.localeCompare(_.fn.name)).map(h=>h.fn):t.fns,[t.fns,r]),[l,c]=Ce.useState(!1),u=h=>`${h.name}(${h.params.join(", ")})`;return V.jsxs("div",{className:"py-1",children:[V.jsxs("div",{className:"h-[36px] flex items-stretch px-2 overflow-hidden",children:[V.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:[i.map(h=>V.jsx(Hr,{title:[s("NAMED_TOOLTIP_INSERT_TO_CURRENT_WS").replace("{sig}",u(h)),h.description?`
${h.description}`:""].join(""),onClick:()=>t.onInsertCurrent(h.id),className:"shrink-0",onMouseEnter:()=>t.onHoverNamed?.(`named:${h.id}`),onMouseLeave:()=>t.onHoverNamed?.(null),onFocus:()=>t.onHoverNamed?.(`named:${h.id}`),onBlur:()=>t.onHoverNamed?.(null),children:V.jsx("span",{className:"max-w-[160px] truncate inline-block align-bottom",children:h.name})},h.id)),i.length===0&&V.jsx("div",{className:"text-xs opacity-60 py-1",children:s("NO_SEARCH_RESULTS")})]}),V.jsx(Ah,{}),V.jsxs("div",{className:"flex items-center gap-2",children:[t.onInsertCurrentParam&&V.jsx(Hr,{title:s("NAMED_TOOLTIP_INSERT_PARAM_BLOCK"),onClick:()=>t.onInsertCurrentParam?.(),children:"param"}),V.jsx(Hr,{onClick:()=>c(!0),children:s("NAMED_MANAGE")})]})]}),l&&V.jsx(wF,{uiLang:t.uiLang,workspaces:t.workspaces,activeWorkspaceId:t.activeWorkspaceId,fns:t.fns,onClose:()=>c(!1),onSwitchWorkspace:h=>{t.onSwitchWorkspace(h)},onCreateFn:()=>t.onCreateFn(),onDuplicateFn:t.onDuplicateFn,onDeleteFn:t.onDeleteFn,onRenameFn:t.onRenameFn,onInsertToMain:h=>{t.onInsertToMain(h),c(!1)},onUpdateFnMeta:t.onUpdateFnMeta})]})}function wF(t){const s=t.workspaces.find(c=>c.kind==="main"),r=t.workspaces.filter(c=>c.kind==="fn");Ce.useEffect(()=>{const c=u=>{u.key==="Escape"&&t.onClose()};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[t.onClose]);const i=Ce.useMemo(()=>{const c=new Map;for(const u of t.fns)c.set(u.workspaceId,u);return c},[t.fns]),l=Ce.useRef(null);return Ce.useEffect(()=>{const c=l.current;if(!c)return;const u=r.find(h=>h.fnId===c);u&&(t.onSwitchWorkspace(u.id),l.current=null)},[r,t.activeWorkspaceId,t.onSwitchWorkspace]),V.jsx(yF,{uiLang:t.uiLang,onClose:t.onClose,main:s?{id:s.id,title:s.title,fnId:s.fnId}:null,fnWorkspaces:r.map(c=>({id:c.id,title:c.title,fnId:c.fnId})),activeWorkspaceId:t.activeWorkspaceId,fnByWsId:i,onSwitchWorkspace:t.onSwitchWorkspace,onInsertToMain:t.onInsertToMain,onDuplicateFn:t.onDuplicateFn,onDeleteFn:t.onDeleteFn,onCreateFn:t.onCreateFn,onUpdateFnMeta:t.onUpdateFnMeta,onRenameFn:t.onRenameFn})}let Jf=null;const i$=new Set;function Sc(){if(!Jf)throw new Error("[projectStore] state is not initialized yet");return Jf}function W1(t){Jf=t;for(const s of i$)s()}function Qi(t){const s=Sc();W1(t(s))}function MF(t){return i$.add(t),()=>i$.delete(t)}function X1(){return Ce.useSyncExternalStore(MF,Sc,Sc)}function DF(t){Jf||W1(t)}const $I=(t,s)=>`
<xml xmlns="https://developers.google.com/blockly/xml">
  <block type="fn_root" x="40" y="40">
    <field name="FN_ID">${t}</field>
    <field name="FN_NAME">${z1(s)}</field>
  </block>
</xml>
`.trim();function Wv(t){Qi(s=>({...s,activeWorkspaceId:t}))}function Xv(t,s){Qi(r=>{const i=Wh(r,t);if(!i)return r;const l=s.name??i.name,c=s.description!==void 0?s.description:i.description;return{...r,functions:r.functions.map(u=>u.id===t?{...u,name:l,description:c}:u),workspaces:s.name!==void 0?r.workspaces.map(u=>u.id===i.workspaceId?{...u,title:l,xml:Y1(u.xml,l)}:u):r.workspaces}})}function z1(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function Y1(t,s){if(!t)return t;const r=z1(s);return t.replace(/<field name="FN_NAME">[\s\S]*?<\/field>/,`<field name="FN_NAME">${r}</field>`)}function PF(t,s){Qi(r=>({...r,workspaces:r.workspaces.map(i=>i.id===t?{...i,xml:s}:i)}))}function FF(t){const s=Sc();PF(s.activeWorkspaceId,t)}function Rc(t){return`${t}_${Math.random().toString(16).slice(2)}_${Date.now().toString(16)}`}function BF(){try{Sc();return}catch{}const t="ws_main";DF({version:1,activeWorkspaceId:t,workspaces:[{id:t,kind:"main",title:"main",xml:""}],functions:[]})}function UF(t){const s=t.workspaces.find(r=>r.kind==="main");if(!s)throw new Error("main workspace missing");return s.id}function HF(t,s){return t.workspaces.find(r=>r.id===s)}function Wh(t,s){return t.functions.find(r=>r.id===s)}function o$(t="A",s=[]){const r=Rc("fn"),i=Rc("ws_fn");return Qi(l=>{const c={id:r,name:t,params:s,workspaceId:i,description:""},u={id:i,kind:"fn",title:t,fnId:r,xml:$I(r,t)};return{...l,functions:[...l.functions,c],workspaces:[...l.workspaces,u],activeWorkspaceId:i}}),{fnId:r,wsId:i}}function zv(t,s){Qi(r=>{const i=Wh(r,t);return i?{...r,functions:r.functions.map(l=>l.id===t?{...l,name:s}:l),workspaces:r.workspaces.map(l=>l.id===i.workspaceId?{...l,title:s,xml:Y1(l.xml,s)}:l)}:r})}function Yv(t){Qi(s=>{const r=Wh(s,t);if(!r)return s;const i=Rc("fn"),l=Rc("ws_fn"),c=`${r.name} (copy)`,u={...r,id:i,name:c,workspaceId:l,description:r.description??""},h={id:l,kind:"fn",title:c,fnId:i,xml:$I(i,c)};return{...s,functions:[...s.functions,u],workspaces:[...s.workspaces,h],activeWorkspaceId:l}})}function Kv(t){Qi(s=>{const r=Wh(s,t);if(!r)return s;const i=s.functions.filter(u=>u.id!==t),l=s.workspaces.filter(u=>u.id!==r.workspaceId);let c=s.activeWorkspaceId;return c===r.workspaceId&&(c=UF(s)),{...s,functions:i,workspaces:l,activeWorkspaceId:c}})}function GF(t,s){Qi(r=>{const i=Wh(r,t);return!i||i.params.length===s.length&&i.params.every((c,u)=>c===s[u])?r:{...r,functions:r.functions.map(c=>c.id===t?{...c,params:s}:c)}})}function VF(t,s){Qi(r=>{if(!t.length)return r;const i=new Set(r.functions.map(h=>h.name)),l=[...r.functions],c=[...r.workspaces];let u=null;for(const h of t){const _=Rc("fn"),f=Rc("ws_fn");let T=h.name||"Unnamed";if(i.has(T)){let R=2;for(;i.has(`${T} (${R})`);)R++;T=`${T} (${R})`}i.add(T);const E={id:_,name:T,params:h.params??[],workspaceId:f,description:h.description??""},g=(h.workspaceXml??"").trim()||$I(_,T),S={id:f,kind:"fn",title:T,fnId:_,xml:g};l.push(E),c.push(S),u||(u=f)}return{...r,functions:l,workspaces:c,activeWorkspaceId:u??r.activeWorkspaceId}})}function K1({uiLang:t="en",onImportXlsx:s,sheets:r,activeSheet:i,onChangeSheet:l,onImportNamedFns:c,onExportNamedFns:u}){const h=Ce.useMemo(()=>Xr(t),[t]),_=Ce.useRef(null),f=Ce.useRef(null);return V.jsx("div",{className:"py-1",children:V.jsxs("div",{className:"h-[36px] flex items-stretch px-2 overflow-hidden",children:[V.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:[V.jsx("input",{ref:_,type:"file",accept:".xlsx",onChange:T=>{const E=T.target.files?.[0];E&&(s?.(E),T.currentTarget.value="")},className:"hidden"}),V.jsx(Hr,{onClick:()=>_.current?.click(),title:h("TOOLTIP_IMPORT_XLSX"),className:"shrink-0",children:h("IMPORT_XLSX")}),r&&r.length>0&&V.jsx("select",{value:i??0,onChange:T=>l?.(Number(T.target.value)),className:"h-[28px] px-2 text-sm rounded border bg-white shrink-0",title:h("TOOLTIP_SHEET_SWITCH"),children:r.map((T,E)=>V.jsx("option",{value:E,children:T},T+E))})]}),V.jsx(Ah,{}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("input",{ref:f,type:"file",accept:".json,application/json",className:"hidden",onChange:T=>{const E=T.target.files?.[0];E&&(c?.(E),T.currentTarget.value="")}}),V.jsx(Hr,{onClick:()=>f.current?.click(),disabled:!c,title:h("TOOLTIP_IMPORT_NAMED_FNS"),children:h("IMPORT_NAMED_FNS")}),V.jsx(Hr,{onClick:u,disabled:!u,title:h("TOOLTIP_EXPORT_NAMED_FNS"),children:h("EXPORT_NAMED_FNS")})]})]})})}function j1(t){const s=t.size??28;return V.jsxs("svg",{width:s,height:s,viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t.className,children:[V.jsx("rect",{x:"6",y:"12",width:"20",height:"14",rx:"2",fill:"#4ade80",stroke:"#16a34a",strokeWidth:"1.5"}),V.jsx("rect",{x:"8",y:"6",width:"16",height:"10",rx:"2",fill:"#4ade80",stroke:"#16a34a",strokeWidth:"1.5"}),V.jsx("circle",{cx:"13",cy:"10",r:"2.5",fill:"white",stroke:"#16a34a",strokeWidth:"1"}),V.jsx("circle",{cx:"19",cy:"10",r:"2.5",fill:"white",stroke:"#16a34a",strokeWidth:"1"}),V.jsx("circle",{cx:"13",cy:"10",r:"1",fill:"#16a34a"}),V.jsx("circle",{cx:"19",cy:"10",r:"1",fill:"#16a34a"}),V.jsx("path",{d:"M 14 14 Q 16 15 18 14",stroke:"#16a34a",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),V.jsx("rect",{x:"8",y:"24",width:"5",height:"4",rx:"1",fill:"#4ade80",stroke:"#16a34a",strokeWidth:"1"}),V.jsx("rect",{x:"19",y:"24",width:"5",height:"4",rx:"1",fill:"#4ade80",stroke:"#16a34a",strokeWidth:"1"})]})}function J1(t){const s=Xr(t.uiLang);return t.open?V.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-[9999]",children:V.jsxs("div",{className:"bg-white rounded-xl w-[640px] max-w-[90vw] p-4",children:[V.jsx("div",{className:"text-lg font-semibold mb-2",children:s(Qe.PASTE_FORMULA)}),V.jsx("textarea",{className:"w-full h-32 border rounded p-2 font-mono",value:t.text,onChange:r=>t.setText(r.target.value),placeholder:s(Qe.FORMULA_PLACEHOLDER)}),V.jsxs("div",{className:"flex gap-2 justify-end mt-3",children:[V.jsx("button",{className:"px-3 py-1 rounded border",onClick:t.onClose,children:s(Qe.CANCEL)}),V.jsx("button",{className:"px-3 py-1 rounded bg-emerald-600 text-white",onClick:()=>{const r=t.text.trim();r&&t.onSubmit(r)},children:s(Qe.BLOCKIFY)})]})]})}):null}function WF({selectedTab:t,onTabChange:s,onBlockClick:r,uiLang:i,onUiLangChange:l,onWorkspaceApi:c,focusOn:u,pathOn:h,onToggleFocus:_,onTogglePath:f,namedFns:T=[],workspaces:E=[],activeWorkspaceId:g="ws_main",onCreateNamedFn:S,onDuplicateNamedFn:R,onDeleteNamedFn:L,onRenameNamedFn:N,onUpdateNamedFnMeta:C,onImportXlsx:A,sheets:I,activeSheet:k,onChangeSheet:H,onImportNamedFns:G,onExportNamedFns:x}){Ce.useEffect(()=>{UP(i)},[i]);const U=c?.current,B=()=>c&&typeof c=="object"&&"current"in c?c.current:c,[re,Z]=Ce.useState(""),se=Ce.useRef(null),pe=Xr(i),Me=Ce.useMemo(()=>{const _e=[{id:"file",label:pe("TAB_FILE"),icon:y1},{id:"functions",label:pe(Qe.FUNCTIONS),icon:M1},{id:"named",label:i==="ja"?pe("TAB_NAMED_FUNCTIONS"):"Named",icon:w1},{id:"view",label:pe("VIEW"),icon:b1}];return(T?.length??0)>0||!!S||!!B()?.insertFnCall?_e:_e.filter(ke=>ke.id!=="named")},[i,T,S]),[Oe,we]=Ce.useState(!1),[ye,Re]=Ce.useState(""),j=Ce.useRef(!1);Ce.useState(null);const[,Y]=Ce.useState(null),[oe,M]=Ce.useState({}),[Q,J]=Ce.useState("");Ce.useEffect(()=>{let _e=!1;return J(""),(async()=>{try{const He=await bF(i);_e||M(He)}catch(He){_e||M({}),_e||J(String(He?.message??He??"fn_text load error"))}})(),()=>{_e=!0}},[i]),Ce.useEffect(()=>{const _e=()=>{j.current=!0},He=()=>{j.current=!1};return window.addEventListener("compositionstart",_e,!0),window.addEventListener("compositionend",He,!0),()=>{window.removeEventListener("compositionstart",_e,!0),window.removeEventListener("compositionend",He,!0)}},[]),Ce.useEffect(()=>{const _e=ke=>{const Ze=se.current;Ze&&(ke?.clear&&Z(""),Ze.focus(),ke?.selectAll&&requestAnimationFrame(()=>Ze.select()))},He=ke=>{if((ke.ctrlKey||ke.metaKey)&&!ke.altKey){const Bt=ke.key.toLowerCase();if(Bt==="k"){ke.preventDefault(),_e({clear:!0,selectAll:!0});return}if(Bt==="f"){ke.preventDefault(),_e({clear:!1,selectAll:!0});return}}const Ze=ke.target,ve=Ze?.tagName?.toLowerCase();if(!(ve==="input"||ve==="textarea"||ve==="select"||Ze?.isContentEditable)){if(ke.key==="Escape"){Z("");return}if(!ke.ctrlKey&&!ke.metaKey&&!ke.altKey&&ke.key.length===1){se.current?.focus(),ke.preventDefault();return}if(ke.key==="/"){se.current?.focus(),ke.preventDefault();return}}};return window.addEventListener("keydown",He,{capture:!0}),()=>window.removeEventListener("keydown",He,{capture:!0})},[]);const[q,he]=Ce.useState(null),Ne=Ce.useMemo(()=>{const _e=new Map;for(const He of T)_e.set(He.id,He.description??"");return _e},[T]),Pe=Ce.useMemo(()=>{if(!q)return null;const[_e,He]=q.split(":");if(_e==="excel"){const ke=He.toUpperCase();return oe[ke]??(i==="ja"?"":"(description coming soon)")}return _e==="named"?(Ne.get(He)??"")||(i==="ja"?"":"(no description)"):null},[q,oe,i,Ne]);Ce.useEffect(()=>{const _e=He=>{if(He.ctrlKey||He.metaKey||He.altKey)return;const ke=He.target,Ze=ke?.tagName?.toLowerCase();if(!(Ze==="input"||Ze==="textarea"||Ze==="select"||ke?.isContentEditable)){if(He.key==="Escape"){Z("");return}if(He.key.length===1){se.current?.focus(),He.preventDefault();return}}};return window.addEventListener("keydown",_e,{capture:!0}),()=>window.removeEventListener("keydown",_e,{capture:!0})},[]);const be="rounded border text-sm font-medium transition select-none",ce=`${be} px-3 py-1
   bg-emerald-50 text-emerald-700 border-emerald-200
   hover:bg-emerald-100`,tt=`${be} px-2 py-1
   bg-emerald-50 text-emerald-700 border-emerald-200
   hover:bg-emerald-100`,b=_e=>[be,"px-3 py-1",_e?"bg-emerald-500 text-white border-emerald-600 hover:bg-emerald-600":"bg-emerald-50 text-emerald-700 border-emerald-200 hover:bg-emerald-100"].join(" ");return V.jsxs("div",{className:"bg-gradient-to-b from-emerald-600 to-emerald-700 border-b shadow-md",children:[V.jsxs("div",{className:"px-4 py-3 border-b border-emerald-800 flex items-center gap-3",children:[V.jsx(j1,{}),V.jsxs("div",{children:[V.jsx("h1",{className:"text-white text-xl",children:"Frockly"}),V.jsx("p",{className:"text-emerald-100 text-xs",children:"Formula Renderer with Blockly"})]}),V.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[V.jsxs("select",{className:`\r
              text-xs\r
              border border-emerald-300/40\r
              bg-emerald-700\r
              text-white\r
              rounded\r
              px-2 py-1\r
              focus:text-emerald-900\r
              focus:bg-white\r
            `,value:i,onChange:_e=>l(_e.target.value),children:[V.jsx("option",{value:"ja",children:"JP"}),V.jsx("option",{value:"en",children:"EN"}),V.jsx("option",{value:"fr",children:"FR"})]}),V.jsxs("div",{className:"flex items-center gap-1 bg-white rounded px-2 py-1 shadow-sm",children:[V.jsx(k1,{className:"w-4 h-4 text-gray-500"}),V.jsx("input",{ref:se,type:"text",value:re,onChange:_e=>Z(_e.target.value),onKeyDown:_e=>{_e.key==="Enter"&&_e.preventDefault()},placeholder:pe(Qe.SEARCH),className:"text-xs outline-none w-64"})]})]})]}),V.jsx("div",{className:"flex gap-1 px-2 py-2",children:Me.map(_e=>{const He=_e.icon,ke=t===_e.id;return V.jsxs("button",{onClick:()=>s(_e.id),className:`flex items-center gap-2 px-4 py-2 rounded-t transition-colors
                ${ke?"bg-white text-emerald-700 shadow-md":"bg-emerald-500 text-white hover:bg-emerald-400"}`,children:[V.jsx(He,{className:"w-4 h-4"}),_e.label]},_e.id)})}),V.jsxs("div",{className:"px-4 pb-2 flex items-center gap-3",children:[V.jsx("button",{className:`\r
            flex items-center gap-2\r
            px-4 py-1.5\r
            rounded-lg\r
            bg-emerald-100\r
            border-2 border-emerald-400\r
            text-emerald-800\r
            shadow-sm\r
            hover:bg-emerald-200\r
            transition\r
          `,onClick:()=>{Re(""),we(!0)},children:pe(Qe.IMPORT_FROM_FORMULA)}),V.jsx("div",{className:`\r
            flex-1 min-w-0\r
            rounded-lg\r
            border border-emerald-200\r
            bg-emerald-50\r
            px-3 py-1.5\r
            text-xs text-emerald-900\r
            overflow-hidden whitespace-nowrap text-ellipsis\r
          `,children:Q?"fn_text load failed":Pe||pe(Qe.HOVER_DESC_HINT)})]}),V.jsx(J1,{open:Oe,uiLang:i,text:ye,setText:Re,onClose:()=>we(!1),onSubmit:_e=>{const He=B()?.insertFromFormula;if(!He){alert(pe(Qe.IMPORT_API_NOT_READY));return}try{const ke=VP(_e,i);He(ke),we(!1)}catch(ke){console.error("[IMPORT] insertFromFormula crashed",ke),alert(pe(Qe.IMPORT_FAILED))}}}),V.jsx("div",{className:"bg-white px-4 py-2 border-b border-gray-200",children:V.jsx("div",{className:"mt-2",children:t==="file"?V.jsx(K1,{onImportXlsx:A,onImportNamedFns:G,onExportNamedFns:x,sheets:I,activeSheet:k,onChangeSheet:H}):t==="functions"?V.jsx(G1,{search:re,uiLang:i,onBlockClick:r,onHoverFn:he,onSelectFn:_e=>Y(_e)}):t==="named"?V.jsx(V1,{uiLang:i,search:re,onUpdateFnMeta:C,onHoverNamed:he,onInsertCurrentParam:()=>U?.insertBlock?.("fn_param"),fns:T,workspaces:E,activeWorkspaceId:g,onCreateFn:()=>{const{fnId:_e,wsId:He}=o$("A",[]);return{fnId:_e,wsId:He}},onDuplicateFn:_e=>R?.(_e),onDeleteFn:_e=>L?.(_e),onRenameFn:(_e,He)=>N?.(_e,He),onSwitchWorkspace:_e=>{const He=B()?.switchWorkspace;if(!He){alert("switchWorkspace API not ready");return}He(_e)},onInsertCurrent:_e=>{const He=B()?.insertFnCall;if(!He){alert("insertFnCall API not ready");return}He(_e)},onInsertToMain:_e=>{const He=B()?.insertFnToMain;if(!He){alert("insertFnToMain API not ready");return}He(_e)}}):V.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[V.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[V.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:pe("EXPAND")}),V.jsx("button",{className:ce,onClick:()=>U?.view?.collapseAll?.(),children:pe("COLLAPSE")}),V.jsx("button",{className:ce,onClick:()=>U?.view?.expandAll?.(),children:i==="ja"?"":pe("EXPAND")}),V.jsx("button",{className:tt,onClick:()=>U?.view?.expandStep?.(-1),children:""}),V.jsx("button",{className:tt,onClick:()=>U?.view?.expandStep?.(1),children:""})]}),V.jsxs("div",{className:"flex items-center gap-2 mr-4",children:[V.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:pe("FOCUS")}),V.jsx("button",{className:b(u),onClick:_,children:pe(u?"ON":"OFF")}),V.jsx("button",{className:ce,onClick:()=>U?.view?.focusStep?.(-1),children:""}),V.jsx("button",{className:ce,onClick:()=>U?.view?.focusStep?.(1),children:""})]}),V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx("span",{className:"text-xs text-emerald-700 font-medium",children:pe("PATH")}),V.jsx("button",{className:b(h),onClick:f,children:pe(h?"ON":"OFF")}),V.jsx("button",{className:ce,onClick:()=>U?.view?.pathStep?.(-1),children:""}),V.jsx("button",{className:ce,onClick:()=>U?.view?.pathStep?.(1),children:""})]})]})})})]})}/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var q1=1252,XF=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],II={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},OI=function(t){XF.indexOf(t)!=-1&&(q1=II[0]=t)};function zF(){OI(1252)}var Us=function(t){OI(t)};function Z1(){Us(1200),zF()}function jv(t){for(var s=[],r=0,i=t.length;r<i;++r)s[r]=t.charCodeAt(r);return s}function YF(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r)+(t.charCodeAt(2*r+1)<<8));return s.join("")}function Q1(t){for(var s=[],r=0;r<t.length>>1;++r)s[r]=String.fromCharCode(t.charCodeAt(2*r+1)+(t.charCodeAt(2*r)<<8));return s.join("")}var Bu=function(t){var s=t.charCodeAt(0),r=t.charCodeAt(1);return s==255&&r==254?YF(t.slice(2)):s==254&&r==255?Q1(t.slice(2)):s==65279?t.slice(1):t},tf=function(s){return String.fromCharCode(s)},Jv=function(s){return String.fromCharCode(s)},Ch,No="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function qv(t){for(var s="",r=0,i=0,l=0,c=0,u=0,h=0,_=0,f=0;f<t.length;)r=t.charCodeAt(f++),c=r>>2,i=t.charCodeAt(f++),u=(r&3)<<4|i>>4,l=t.charCodeAt(f++),h=(i&15)<<2|l>>6,_=l&63,isNaN(i)?h=_=64:isNaN(l)&&(_=64),s+=No.charAt(c)+No.charAt(u)+No.charAt(h)+No.charAt(_);return s}function rs(t){var s="",r=0,i=0,l=0,c=0,u=0,h=0,_=0;t=t.replace(/[^\w\+\/\=]/g,"");for(var f=0;f<t.length;)c=No.indexOf(t.charAt(f++)),u=No.indexOf(t.charAt(f++)),r=c<<2|u>>4,s+=String.fromCharCode(r),h=No.indexOf(t.charAt(f++)),i=(u&15)<<4|h>>2,h!==64&&(s+=String.fromCharCode(i)),_=No.indexOf(t.charAt(f++)),l=(h&3)<<6|_,_!==64&&(s+=String.fromCharCode(l));return s}var pt=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Yl=function(){if(typeof Buffer<"u"){var t=!Buffer.from;if(!t)try{Buffer.from("foo","utf8")}catch{t=!0}return t?function(s,r){return r?new Buffer(s,r):new Buffer(s)}:Buffer.from.bind(Buffer)}return function(){}}();function Vo(t){return pt?Buffer.alloc?Buffer.alloc(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}function Zv(t){return pt?Buffer.allocUnsafe?Buffer.allocUnsafe(t):new Buffer(t):typeof Uint8Array<"u"?new Uint8Array(t):new Array(t)}var Fs=function(s){return pt?Yl(s,"binary"):s.split("").map(function(r){return r.charCodeAt(0)&255})};function Kl(t){if(Array.isArray(t))return t.map(function(i){return String.fromCharCode(i)}).join("");for(var s=[],r=0;r<t.length;++r)s[r]=String.fromCharCode(t[r]);return s.join("")}function SI(t){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(t instanceof ArrayBuffer)return SI(new Uint8Array(t));for(var s=new Array(t.length),r=0;r<t.length;++r)s[r]=t[r];return s}var Ao=pt?function(t){return Buffer.concat(t.map(function(s){return Buffer.isBuffer(s)?s:Yl(s)}))}:function(t){if(typeof Uint8Array<"u"){var s=0,r=0;for(s=0;s<t.length;++s)r+=t[s].length;var i=new Uint8Array(r),l=0;for(s=0,r=0;s<t.length;r+=l,++s)if(l=t[s].length,t[s]instanceof Uint8Array)i.set(t[s],r);else{if(typeof t[s]=="string")throw"wtf";i.set(new Uint8Array(t[s]),r)}return i}return[].concat.apply([],t.map(function(c){return Array.isArray(c)?c:[].slice.call(c)}))};function KF(t){for(var s=[],r=0,i=t.length+250,l=Vo(t.length+255),c=0;c<t.length;++c){var u=t.charCodeAt(c);if(u<128)l[r++]=u;else if(u<2048)l[r++]=192|u>>6&31,l[r++]=128|u&63;else if(u>=55296&&u<57344){u=(u&1023)+64;var h=t.charCodeAt(++c)&1023;l[r++]=240|u>>8&7,l[r++]=128|u>>2&63,l[r++]=128|h>>6&15|(u&3)<<4,l[r++]=128|h&63}else l[r++]=224|u>>12&15,l[r++]=128|u>>6&63,l[r++]=128|u&63;r>i&&(s.push(l.slice(0,r)),r=0,l=Vo(65535),i=65530)}return s.push(l.slice(0,r)),Ao(s)}var Cn=/\u0000/g,Uu=/[\u0001-\u0006]/g;function uc(t){for(var s="",r=t.length-1;r>=0;)s+=t.charAt(r--);return s}function Hs(t,s){var r=""+t;return r.length>=s?r:ur("0",s-r.length)+r}function RI(t,s){var r=""+t;return r.length>=s?r:ur(" ",s-r.length)+r}function qf(t,s){var r=""+t;return r.length>=s?r:r+ur(" ",s-r.length)}function jF(t,s){var r=""+Math.round(t);return r.length>=s?r:ur("0",s-r.length)+r}function JF(t,s){var r=""+t;return r.length>=s?r:ur("0",s-r.length)+r}var Qv=Math.pow(2,32);function Ua(t,s){if(t>Qv||t<-Qv)return jF(t,s);var r=Math.round(t);return JF(r,s)}function Zf(t,s){return s=s||0,t.length>=7+s&&(t.charCodeAt(s)|32)===103&&(t.charCodeAt(s+1)|32)===101&&(t.charCodeAt(s+2)|32)===110&&(t.charCodeAt(s+3)|32)===101&&(t.charCodeAt(s+4)|32)===114&&(t.charCodeAt(s+5)|32)===97&&(t.charCodeAt(s+6)|32)===108}var eN=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],X0=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function qF(t){return t||(t={}),t[0]="General",t[1]="0",t[2]="0.00",t[3]="#,##0",t[4]="#,##0.00",t[9]="0%",t[10]="0.00%",t[11]="0.00E+00",t[12]="# ?/?",t[13]="# ??/??",t[14]="m/d/yy",t[15]="d-mmm-yy",t[16]="d-mmm",t[17]="mmm-yy",t[18]="h:mm AM/PM",t[19]="h:mm:ss AM/PM",t[20]="h:mm",t[21]="h:mm:ss",t[22]="m/d/yy h:mm",t[37]="#,##0 ;(#,##0)",t[38]="#,##0 ;[Red](#,##0)",t[39]="#,##0.00;(#,##0.00)",t[40]="#,##0.00;[Red](#,##0.00)",t[45]="mm:ss",t[46]="[h]:mm:ss",t[47]="mmss.0",t[48]="##0.0E+0",t[49]="@",t[56]='"/ "hh""mm""ss" "',t}var dt={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},tN={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},ZF={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function Qf(t,s,r){for(var i=t<0?-1:1,l=t*i,c=0,u=1,h=0,_=1,f=0,T=0,E=Math.floor(l);f<s&&(E=Math.floor(l),h=E*u+c,T=E*f+_,!(l-E<5e-8));)l=1/(l-E),c=u,u=h,_=f,f=T;if(T>s&&(f>s?(T=_,h=c):(T=f,h=u)),!r)return[0,i*h,T];var g=Math.floor(i*h/T);return[g,i*h-g*T,T]}function vl(t,s,r){if(t>2958465||t<0)return null;var i=t|0,l=Math.floor(86400*(t-i)),c=0,u=[],h={D:i,T:l,u:86400*(t-i)-l,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(h.u)<1e-6&&(h.u=0),s&&s.date1904&&(i+=1462),h.u>.9999&&(h.u=0,++l==86400&&(h.T=l=0,++i,++h.D)),i===60)u=r?[1317,10,29]:[1900,2,29],c=3;else if(i===0)u=r?[1317,8,29]:[1900,1,0],c=6;else{i>60&&--i;var _=new Date(1900,0,1);_.setDate(_.getDate()+i-1),u=[_.getFullYear(),_.getMonth()+1,_.getDate()],c=_.getDay(),i<60&&(c=(c+6)%7),r&&(c=sB(_,u))}return h.y=u[0],h.m=u[1],h.d=u[2],h.S=l%60,l=Math.floor(l/60),h.M=l%60,l=Math.floor(l/60),h.H=l,h.q=c,h}var ey=new Date(1899,11,31,0,0,0),QF=ey.getTime(),eB=new Date(1900,2,1,0,0,0);function ty(t,s){var r=t.getTime();return s?r-=1461*24*60*60*1e3:t>=eB&&(r+=24*60*60*1e3),(r-(QF+(t.getTimezoneOffset()-ey.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function LI(t){return t.indexOf(".")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function tB(t){return t.indexOf("E")==-1?t:t.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function rB(t){var s=t<0?12:11,r=LI(t.toFixed(12));return r.length<=s||(r=t.toPrecision(10),r.length<=s)?r:t.toExponential(5)}function nB(t){var s=LI(t.toFixed(11));return s.length>(t<0?12:11)||s==="0"||s==="-0"?t.toPrecision(6):s}function vh(t){var s=Math.floor(Math.log(Math.abs(t))*Math.LOG10E),r;return s>=-4&&s<=-1?r=t.toPrecision(10+s):Math.abs(s)<=9?r=rB(t):s===10?r=t.toFixed(10).substr(0,12):r=nB(t),LI(tB(r.toUpperCase()))}function Ul(t,s){switch(typeof t){case"string":return t;case"boolean":return t?"TRUE":"FALSE";case"number":return(t|0)===t?t.toString(10):vh(t);case"undefined":return"";case"object":if(t==null)return"";if(t instanceof Date)return Ss(14,ty(t,s&&s.date1904),s)}throw new Error("unsupported value in General format: "+t)}function sB(t,s){s[0]-=581;var r=t.getDay();return t<60&&(r=(r+6)%7),r}function iB(t,s,r,i){var l="",c=0,u=0,h=r.y,_,f=0;switch(t){case 98:h=r.y+543;case 121:switch(s.length){case 1:case 2:_=h%100,f=2;break;default:_=h%1e4,f=4;break}break;case 109:switch(s.length){case 1:case 2:_=r.m,f=s.length;break;case 3:return X0[r.m-1][1];case 5:return X0[r.m-1][0];default:return X0[r.m-1][2]}break;case 100:switch(s.length){case 1:case 2:_=r.d,f=s.length;break;case 3:return eN[r.q][0];default:return eN[r.q][1]}break;case 104:switch(s.length){case 1:case 2:_=1+(r.H+11)%12,f=s.length;break;default:throw"bad hour format: "+s}break;case 72:switch(s.length){case 1:case 2:_=r.H,f=s.length;break;default:throw"bad hour format: "+s}break;case 77:switch(s.length){case 1:case 2:_=r.M,f=s.length;break;default:throw"bad minute format: "+s}break;case 115:if(s!="s"&&s!="ss"&&s!=".0"&&s!=".00"&&s!=".000")throw"bad second format: "+s;return r.u===0&&(s=="s"||s=="ss")?Hs(r.S,s.length):(i>=2?u=i===3?1e3:100:u=i===1?10:1,c=Math.round(u*(r.S+r.u)),c>=60*u&&(c=0),s==="s"?c===0?"0":""+c/u:(l=Hs(c,2+i),s==="ss"?l.substr(0,2):"."+l.substr(2,s.length-1)));case 90:switch(s){case"[h]":case"[hh]":_=r.D*24+r.H;break;case"[m]":case"[mm]":_=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":_=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+s}f=s.length===3?1:2;break;case 101:_=h,f=1;break}var T=f>0?Hs(_,f):"";return T}function xo(t){var s=3;if(t.length<=s)return t;for(var r=t.length%s,i=t.substr(0,r);r!=t.length;r+=s)i+=(i.length>0?",":"")+t.substr(r,s);return i}var ry=/%/g;function oB(t,s,r){var i=s.replace(ry,""),l=s.length-i.length;return Xi(t,i,r*Math.pow(10,2*l))+ur("%",l)}function lB(t,s,r){for(var i=s.length-1;s.charCodeAt(i-1)===44;)--i;return Xi(t,s.substr(0,i),r/Math.pow(10,3*(s.length-i)))}function ny(t,s){var r,i=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+ny(t,-s);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var c=Math.floor(Math.log(s)*Math.LOG10E)%l;if(c<0&&(c+=l),r=(s/Math.pow(10,c)).toPrecision(i+1+(l+c)%l),r.indexOf("e")===-1){var u=Math.floor(Math.log(s)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(u-r.length+c):r+="E+"+(u-c);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,l)+"."+r.substr(2+l),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,_,f,T){return _+f+T.substr(0,(l+c)%l)+"."+T.substr(c)+"E"})}else r=s.toExponential(i);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var sy=/# (\?+)( ?)\/( ?)(\d+)/;function aB(t,s,r){var i=parseInt(t[4],10),l=Math.round(s*i),c=Math.floor(l/i),u=l-c*i,h=i;return r+(c===0?"":""+c)+" "+(u===0?ur(" ",t[1].length+1+t[4].length):RI(u,t[1].length)+t[2]+"/"+t[3]+Hs(h,t[4].length))}function cB(t,s,r){return r+(s===0?"":""+s)+ur(" ",t[1].length+2+t[4].length)}var iy=/^#*0*\.([0#]+)/,oy=/\).*[0#]/,ly=/\(###\) ###\\?-####/;function Sn(t){for(var s="",r,i=0;i!=t.length;++i)switch(r=t.charCodeAt(i)){case 35:break;case 63:s+=" ";break;case 48:s+="0";break;default:s+=String.fromCharCode(r)}return s}function rN(t,s){var r=Math.pow(10,s);return""+Math.round(t*r)/r}function nN(t,s){var r=t-Math.floor(t),i=Math.pow(10,s);return s<(""+Math.round(r*i)).length?0:Math.round(r*i)}function uB(t,s){return s<(""+Math.round((t-Math.floor(t))*Math.pow(10,s))).length?1:0}function hB(t){return t<2147483647&&t>-2147483648?""+(t>=0?t|0:t-1|0):""+Math.floor(t)}function fs(t,s,r){if(t.charCodeAt(0)===40&&!s.match(oy)){var i=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?fs("n",i,r):"("+fs("n",i,-r)+")"}if(s.charCodeAt(s.length-1)===44)return lB(t,s,r);if(s.indexOf("%")!==-1)return oB(t,s,r);if(s.indexOf("E")!==-1)return ny(s,r);if(s.charCodeAt(0)===36)return"$"+fs(t,s.substr(s.charAt(1)==" "?2:1),r);var l,c,u,h,_=Math.abs(r),f=r<0?"-":"";if(s.match(/^00+$/))return f+Ua(_,s.length);if(s.match(/^[#?]+$/))return l=Ua(r,0),l==="0"&&(l=""),l.length>s.length?l:Sn(s.substr(0,s.length-l.length))+l;if(c=s.match(sy))return aB(c,_,f);if(s.match(/^#+0+$/))return f+Ua(_,s.length-s.indexOf("0"));if(c=s.match(iy))return l=rN(r,c[1].length).replace(/^([^\.]+)$/,"$1."+Sn(c[1])).replace(/\.$/,"."+Sn(c[1])).replace(/\.(\d*)$/,function(R,L){return"."+L+ur("0",Sn(c[1]).length-L.length)}),s.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),c=s.match(/^(0*)\.(#*)$/))return f+rN(_,c[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=s.match(/^#{1,3},##0(\.?)$/))return f+xo(Ua(_,0));if(c=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+fs(t,s,-r):xo(""+(Math.floor(r)+uB(r,c[1].length)))+"."+Hs(nN(r,c[1].length),c[1].length);if(c=s.match(/^#,#*,#0/))return fs(t,s.replace(/^#,#*,/,""),r);if(c=s.match(/^([0#]+)(\\?-([0#]+))+$/))return l=uc(fs(t,s.replace(/[\\-]/g,""),r)),u=0,uc(uc(s.replace(/\\/g,"")).replace(/[0#]/g,function(R){return u<l.length?l.charAt(u++):R==="0"?"0":""}));if(s.match(ly))return l=fs(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var T="";if(c=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(c[4].length,7),h=Qf(_,Math.pow(10,u)-1,!1),l=""+f,T=Xi("n",c[1],h[1]),T.charAt(T.length-1)==" "&&(T=T.substr(0,T.length-1)+"0"),l+=T+c[2]+"/"+c[3],T=qf(h[2],u),T.length<c[4].length&&(T=Sn(c[4].substr(c[4].length-T.length))+T),l+=T,l;if(c=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(c[1].length,c[4].length),7),h=Qf(_,Math.pow(10,u)-1,!0),f+(h[0]||(h[1]?"":"0"))+" "+(h[1]?RI(h[1],u)+c[2]+"/"+c[3]+qf(h[2],u):ur(" ",2*u+1+c[2].length+c[3].length));if(c=s.match(/^[#0?]+$/))return l=Ua(r,0),s.length<=l.length?l:Sn(s.substr(0,s.length-l.length))+l;if(c=s.match(/^([#0?]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),u=l.indexOf(".");var E=s.indexOf(".")-u,g=s.length-l.length-E;return Sn(s.substr(0,E)+l+s.substr(s.length-g))}if(c=s.match(/^00,000\.([#0]*0)$/))return u=nN(r,c[1].length),r<0?"-"+fs(t,s,-r):xo(hB(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?Hs(0,3-R.length):"")+R})+"."+Hs(u,c[1].length);switch(s){case"###,##0.00":return fs(t,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var S=xo(Ua(_,0));return S!=="0"?f+S:"";case"###,###.00":return fs(t,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return fs(t,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+s+"|")}function dB(t,s,r){for(var i=s.length-1;s.charCodeAt(i-1)===44;)--i;return Xi(t,s.substr(0,i),r/Math.pow(10,3*(s.length-i)))}function _B(t,s,r){var i=s.replace(ry,""),l=s.length-i.length;return Xi(t,i,r*Math.pow(10,2*l))+ur("%",l)}function ay(t,s){var r,i=t.indexOf("E")-t.indexOf(".")-1;if(t.match(/^#+0.0E\+0$/)){if(s==0)return"0.0E+0";if(s<0)return"-"+ay(t,-s);var l=t.indexOf(".");l===-1&&(l=t.indexOf("E"));var c=Math.floor(Math.log(s)*Math.LOG10E)%l;if(c<0&&(c+=l),r=(s/Math.pow(10,c)).toPrecision(i+1+(l+c)%l),!r.match(/[Ee]/)){var u=Math.floor(Math.log(s)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(u-r.length+c):r+="E+"+(u-c),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(h,_,f,T){return _+f+T.substr(0,(l+c)%l)+"."+T.substr(c)+"E"})}else r=s.toExponential(i);return t.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),t.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Ti(t,s,r){if(t.charCodeAt(0)===40&&!s.match(oy)){var i=s.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Ti("n",i,r):"("+Ti("n",i,-r)+")"}if(s.charCodeAt(s.length-1)===44)return dB(t,s,r);if(s.indexOf("%")!==-1)return _B(t,s,r);if(s.indexOf("E")!==-1)return ay(s,r);if(s.charCodeAt(0)===36)return"$"+Ti(t,s.substr(s.charAt(1)==" "?2:1),r);var l,c,u,h,_=Math.abs(r),f=r<0?"-":"";if(s.match(/^00+$/))return f+Hs(_,s.length);if(s.match(/^[#?]+$/))return l=""+r,r===0&&(l=""),l.length>s.length?l:Sn(s.substr(0,s.length-l.length))+l;if(c=s.match(sy))return cB(c,_,f);if(s.match(/^#+0+$/))return f+Hs(_,s.length-s.indexOf("0"));if(c=s.match(iy))return l=(""+r).replace(/^([^\.]+)$/,"$1."+Sn(c[1])).replace(/\.$/,"."+Sn(c[1])),l=l.replace(/\.(\d*)$/,function(R,L){return"."+L+ur("0",Sn(c[1]).length-L.length)}),s.indexOf("0.")!==-1?l:l.replace(/^0\./,".");if(s=s.replace(/^#+([0.])/,"$1"),c=s.match(/^(0*)\.(#*)$/))return f+(""+_).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,c[1].length?"0.":".");if(c=s.match(/^#{1,3},##0(\.?)$/))return f+xo(""+_);if(c=s.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Ti(t,s,-r):xo(""+r)+"."+ur("0",c[1].length);if(c=s.match(/^#,#*,#0/))return Ti(t,s.replace(/^#,#*,/,""),r);if(c=s.match(/^([0#]+)(\\?-([0#]+))+$/))return l=uc(Ti(t,s.replace(/[\\-]/g,""),r)),u=0,uc(uc(s.replace(/\\/g,"")).replace(/[0#]/g,function(R){return u<l.length?l.charAt(u++):R==="0"?"0":""}));if(s.match(ly))return l=Ti(t,"##########",r),"("+l.substr(0,3)+") "+l.substr(3,3)+"-"+l.substr(6);var T="";if(c=s.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(c[4].length,7),h=Qf(_,Math.pow(10,u)-1,!1),l=""+f,T=Xi("n",c[1],h[1]),T.charAt(T.length-1)==" "&&(T=T.substr(0,T.length-1)+"0"),l+=T+c[2]+"/"+c[3],T=qf(h[2],u),T.length<c[4].length&&(T=Sn(c[4].substr(c[4].length-T.length))+T),l+=T,l;if(c=s.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return u=Math.min(Math.max(c[1].length,c[4].length),7),h=Qf(_,Math.pow(10,u)-1,!0),f+(h[0]||(h[1]?"":"0"))+" "+(h[1]?RI(h[1],u)+c[2]+"/"+c[3]+qf(h[2],u):ur(" ",2*u+1+c[2].length+c[3].length));if(c=s.match(/^[#0?]+$/))return l=""+r,s.length<=l.length?l:Sn(s.substr(0,s.length-l.length))+l;if(c=s.match(/^([#0]+)\.([#0]+)$/)){l=""+r.toFixed(Math.min(c[2].length,10)).replace(/([^0])0+$/,"$1"),u=l.indexOf(".");var E=s.indexOf(".")-u,g=s.length-l.length-E;return Sn(s.substr(0,E)+l+s.substr(s.length-g))}if(c=s.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Ti(t,s,-r):xo(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(R){return"00,"+(R.length<3?Hs(0,3-R.length):"")+R})+"."+Hs(0,c[1].length);switch(s){case"###,###":case"##,###":case"#,###":var S=xo(""+_);return S!=="0"?f+S:"";default:if(s.match(/\.[0#?]*$/))return Ti(t,s.slice(0,s.lastIndexOf(".")),r)+Sn(s.slice(s.lastIndexOf(".")))}throw new Error("unsupported format |"+s+"|")}function Xi(t,s,r){return(r|0)===r?Ti(t,s,r):fs(t,s,r)}function fB(t){for(var s=[],r=!1,i=0,l=0;i<t.length;++i)switch(t.charCodeAt(i)){case 34:r=!r;break;case 95:case 42:case 92:++i;break;case 59:s[s.length]=t.substr(l,i-l),l=i+1}if(s[s.length]=t.substr(l),r===!0)throw new Error("Format |"+t+"| unterminated string ");return s}var cy=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function xc(t){for(var s=0,r="",i="";s<t.length;)switch(r=t.charAt(s)){case"G":Zf(t,s)&&(s+=6),s++;break;case'"':for(;t.charCodeAt(++s)!==34&&s<t.length;);++s;break;case"\\":s+=2;break;case"_":s+=2;break;case"@":++s;break;case"B":case"b":if(t.charAt(s+1)==="1"||t.charAt(s+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(t.substr(s,3).toUpperCase()==="A/P"||t.substr(s,5).toUpperCase()==="AM/PM"||t.substr(s,5).toUpperCase()==="/")return!0;++s;break;case"[":for(i=r;t.charAt(s++)!=="]"&&s<t.length;)i+=t.charAt(s);if(i.match(cy))return!0;break;case".":case"0":case"#":for(;s<t.length&&("0#?.,E+-%".indexOf(r=t.charAt(++s))>-1||r=="\\"&&t.charAt(s+1)=="-"&&"0#".indexOf(t.charAt(s+2))>-1););break;case"?":for(;t.charAt(++s)===r;);break;case"*":++s,(t.charAt(s)==" "||t.charAt(s)=="*")&&++s;break;case"(":case")":++s;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;s<t.length&&"0123456789".indexOf(t.charAt(++s))>-1;);break;case" ":++s;break;default:++s;break}return!1}function TB(t,s,r,i){for(var l=[],c="",u=0,h="",_="t",f,T,E,g="H";u<t.length;)switch(h=t.charAt(u)){case"G":if(!Zf(t,u))throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"G",v:"General"},u+=7;break;case'"':for(c="";(E=t.charCodeAt(++u))!==34&&u<t.length;)c+=String.fromCharCode(E);l[l.length]={t:"t",v:c},++u;break;case"\\":var S=t.charAt(++u),R=S==="("||S===")"?S:"t";l[l.length]={t:R,v:S},++u;break;case"_":l[l.length]={t:"t",v:" "},u+=2;break;case"@":l[l.length]={t:"T",v:s},++u;break;case"B":case"b":if(t.charAt(u+1)==="1"||t.charAt(u+1)==="2"){if(f==null&&(f=vl(s,r,t.charAt(u+1)==="2"),f==null))return"";l[l.length]={t:"X",v:t.substr(u,2)},_=h,u+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":h=h.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(s<0||f==null&&(f=vl(s,r),f==null))return"";for(c=h;++u<t.length&&t.charAt(u).toLowerCase()===h;)c+=h;h==="m"&&_.toLowerCase()==="h"&&(h="M"),h==="h"&&(h=g),l[l.length]={t:h,v:c},_=h;break;case"A":case"a":case"":var L={t:h,v:h};if(f==null&&(f=vl(s,r)),t.substr(u,3).toUpperCase()==="A/P"?(f!=null&&(L.v=f.H>=12?"P":"A"),L.t="T",g="h",u+=3):t.substr(u,5).toUpperCase()==="AM/PM"?(f!=null&&(L.v=f.H>=12?"PM":"AM"),L.t="T",u+=5,g="h"):t.substr(u,5).toUpperCase()==="/"?(f!=null&&(L.v=f.H>=12?"":""),L.t="T",u+=5,g="h"):(L.t="t",++u),f==null&&L.t==="T")return"";l[l.length]=L,_=h;break;case"[":for(c=h;t.charAt(u++)!=="]"&&u<t.length;)c+=t.charAt(u);if(c.slice(-1)!=="]")throw'unterminated "[" block: |'+c+"|";if(c.match(cy)){if(f==null&&(f=vl(s,r),f==null))return"";l[l.length]={t:"Z",v:c.toLowerCase()},_=c.charAt(1)}else c.indexOf("$")>-1&&(c=(c.match(/\$([^-\[\]]*)/)||[])[1]||"$",xc(t)||(l[l.length]={t:"t",v:c}));break;case".":if(f!=null){for(c=h;++u<t.length&&(h=t.charAt(u))==="0";)c+=h;l[l.length]={t:"s",v:c};break}case"0":case"#":for(c=h;++u<t.length&&"0#?.,E+-%".indexOf(h=t.charAt(u))>-1;)c+=h;l[l.length]={t:"n",v:c};break;case"?":for(c=h;t.charAt(++u)===h;)c+=h;l[l.length]={t:h,v:c},_=h;break;case"*":++u,(t.charAt(u)==" "||t.charAt(u)=="*")&&++u;break;case"(":case")":l[l.length]={t:i===1?"t":h,v:h},++u;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(c=h;u<t.length&&"0123456789".indexOf(t.charAt(++u))>-1;)c+=t.charAt(u);l[l.length]={t:"D",v:c};break;case" ":l[l.length]={t:h,v:h},++u;break;case"$":l[l.length]={t:"t",v:"$"},++u;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(h)===-1)throw new Error("unrecognized character "+h+" in "+t);l[l.length]={t:"t",v:h},++u;break}var N=0,C=0,A;for(u=l.length-1,_="t";u>=0;--u)switch(l[u].t){case"h":case"H":l[u].t=g,_="h",N<1&&(N=1);break;case"s":(A=l[u].v.match(/\.0+$/))&&(C=Math.max(C,A[0].length-1)),N<3&&(N=3);case"d":case"y":case"M":case"e":_=l[u].t;break;case"m":_==="s"&&(l[u].t="M",N<2&&(N=2));break;case"X":break;case"Z":N<1&&l[u].v.match(/[Hh]/)&&(N=1),N<2&&l[u].v.match(/[Mm]/)&&(N=2),N<3&&l[u].v.match(/[Ss]/)&&(N=3)}switch(N){case 0:break;case 1:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M),f.M>=60&&(f.M=0,++f.H);break;case 2:f.u>=.5&&(f.u=0,++f.S),f.S>=60&&(f.S=0,++f.M);break}var I="",k;for(u=0;u<l.length;++u)switch(l[u].t){case"t":case"T":case" ":case"D":break;case"X":l[u].v="",l[u].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":l[u].v=iB(l[u].t.charCodeAt(0),l[u].v,f,C),l[u].t="t";break;case"n":case"?":for(k=u+1;l[k]!=null&&((h=l[k].t)==="?"||h==="D"||(h===" "||h==="t")&&l[k+1]!=null&&(l[k+1].t==="?"||l[k+1].t==="t"&&l[k+1].v==="/")||l[u].t==="("&&(h===" "||h==="n"||h===")")||h==="t"&&(l[k].v==="/"||l[k].v===" "&&l[k+1]!=null&&l[k+1].t=="?"));)l[u].v+=l[k].v,l[k]={v:"",t:";"},++k;I+=l[u].v,u=k-1;break;case"G":l[u].t="t",l[u].v=Ul(s,r);break}var H="",G,x;if(I.length>0){I.charCodeAt(0)==40?(G=s<0&&I.charCodeAt(0)===45?-s:s,x=Xi("n",I,G)):(G=s<0&&i>1?-s:s,x=Xi("n",I,G),G<0&&l[0]&&l[0].t=="t"&&(x=x.substr(1),l[0].v="-"+l[0].v)),k=x.length-1;var U=l.length;for(u=0;u<l.length;++u)if(l[u]!=null&&l[u].t!="t"&&l[u].v.indexOf(".")>-1){U=u;break}var B=l.length;if(U===l.length&&x.indexOf("E")===-1){for(u=l.length-1;u>=0;--u)l[u]==null||"n?".indexOf(l[u].t)===-1||(k>=l[u].v.length-1?(k-=l[u].v.length,l[u].v=x.substr(k+1,l[u].v.length)):k<0?l[u].v="":(l[u].v=x.substr(0,k+1),k=-1),l[u].t="t",B=u);k>=0&&B<l.length&&(l[B].v=x.substr(0,k+1)+l[B].v)}else if(U!==l.length&&x.indexOf("E")===-1){for(k=x.indexOf(".")-1,u=U;u>=0;--u)if(!(l[u]==null||"n?".indexOf(l[u].t)===-1)){for(T=l[u].v.indexOf(".")>-1&&u===U?l[u].v.indexOf(".")-1:l[u].v.length-1,H=l[u].v.substr(T+1);T>=0;--T)k>=0&&(l[u].v.charAt(T)==="0"||l[u].v.charAt(T)==="#")&&(H=x.charAt(k--)+H);l[u].v=H,l[u].t="t",B=u}for(k>=0&&B<l.length&&(l[B].v=x.substr(0,k+1)+l[B].v),k=x.indexOf(".")+1,u=U;u<l.length;++u)if(!(l[u]==null||"n?(".indexOf(l[u].t)===-1&&u!==U)){for(T=l[u].v.indexOf(".")>-1&&u===U?l[u].v.indexOf(".")+1:0,H=l[u].v.substr(0,T);T<l[u].v.length;++T)k<x.length&&(H+=x.charAt(k++));l[u].v=H,l[u].t="t",B=u}}}for(u=0;u<l.length;++u)l[u]!=null&&"n?".indexOf(l[u].t)>-1&&(G=i>1&&s<0&&u>0&&l[u-1].v==="-"?-s:s,l[u].v=Xi(l[u].t,l[u].v,G),l[u].t="t");var re="";for(u=0;u!==l.length;++u)l[u]!=null&&(re+=l[u].v);return re}var sN=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function iN(t,s){if(s==null)return!1;var r=parseFloat(s[2]);switch(s[1]){case"=":if(t==r)return!0;break;case">":if(t>r)return!0;break;case"<":if(t<r)return!0;break;case"<>":if(t!=r)return!0;break;case">=":if(t>=r)return!0;break;case"<=":if(t<=r)return!0;break}return!1}function pB(t,s){var r=fB(t),i=r.length,l=r[i-1].indexOf("@");if(i<4&&l>-1&&--i,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof s!="number")return[4,r.length===4||l>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=l>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=l>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=l>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var c=s>0?r[0]:s<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[i,c];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var u=r[0].match(sN),h=r[1].match(sN);return iN(s,u)?[i,r[0]]:iN(s,h)?[i,r[1]]:[i,r[u!=null&&h!=null?2:1]]}return[i,c]}function Ss(t,s,r){r==null&&(r={});var i="";switch(typeof t){case"string":t=="m/d/yy"&&r.dateNF?i=r.dateNF:i=t;break;case"number":t==14&&r.dateNF?i=r.dateNF:i=(r.table!=null?r.table:dt)[t],i==null&&(i=r.table&&r.table[tN[t]]||dt[tN[t]]),i==null&&(i=ZF[t]||"General");break}if(Zf(i,0))return Ul(s,r);s instanceof Date&&(s=ty(s,r.date1904));var l=pB(i,s);if(Zf(l[1]))return Ul(s,r);if(s===!0)s="TRUE";else if(s===!1)s="FALSE";else if(s===""||s==null)return"";return TB(l[1],s,r,l[0])}function yl(t,s){if(typeof s!="number"){s=+s||-1;for(var r=0;r<392;++r){if(dt[r]==null){s<0&&(s=r);continue}if(dt[r]==t){s=r;break}}s<0&&(s=391)}return dt[s]=t,s}function uy(){dt=qF()}var EB={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},hy=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function gB(t){var s=typeof t=="number"?dt[t]:t;return s=s.replace(hy,"(\\d+)"),new RegExp("^"+s+"$")}function mB(t,s,r){var i=-1,l=-1,c=-1,u=-1,h=-1,_=-1;(s.match(hy)||[]).forEach(function(E,g){var S=parseInt(r[g+1],10);switch(E.toLowerCase().charAt(0)){case"y":i=S;break;case"d":c=S;break;case"h":u=S;break;case"s":_=S;break;case"m":u>=0?h=S:l=S;break}}),_>=0&&h==-1&&l>=0&&(h=l,l=-1);var f=(""+(i>=0?i:new Date().getFullYear())).slice(-4)+"-"+("00"+(l>=1?l:1)).slice(-2)+"-"+("00"+(c>=1?c:1)).slice(-2);f.length==7&&(f="0"+f),f.length==8&&(f="20"+f);var T=("00"+(u>=0?u:0)).slice(-2)+":"+("00"+(h>=0?h:0)).slice(-2)+":"+("00"+(_>=0?_:0)).slice(-2);return u==-1&&h==-1&&_==-1?f:i==-1&&l==-1&&c==-1?T:f+"T"+T}var $B=function(){var t={};t.version="1.2.0";function s(){for(var x=0,U=new Array(256),B=0;B!=256;++B)x=B,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,x=x&1?-306674912^x>>>1:x>>>1,U[B]=x;return typeof Int32Array<"u"?new Int32Array(U):U}var r=s();function i(x){var U=0,B=0,re=0,Z=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(re=0;re!=256;++re)Z[re]=x[re];for(re=0;re!=256;++re)for(B=x[re],U=256+re;U<4096;U+=256)B=Z[U]=B>>>8^x[B&255];var se=[];for(re=1;re!=16;++re)se[re-1]=typeof Int32Array<"u"?Z.subarray(re*256,re*256+256):Z.slice(re*256,re*256+256);return se}var l=i(r),c=l[0],u=l[1],h=l[2],_=l[3],f=l[4],T=l[5],E=l[6],g=l[7],S=l[8],R=l[9],L=l[10],N=l[11],C=l[12],A=l[13],I=l[14];function k(x,U){for(var B=U^-1,re=0,Z=x.length;re<Z;)B=B>>>8^r[(B^x.charCodeAt(re++))&255];return~B}function H(x,U){for(var B=U^-1,re=x.length-15,Z=0;Z<re;)B=I[x[Z++]^B&255]^A[x[Z++]^B>>8&255]^C[x[Z++]^B>>16&255]^N[x[Z++]^B>>>24]^L[x[Z++]]^R[x[Z++]]^S[x[Z++]]^g[x[Z++]]^E[x[Z++]]^T[x[Z++]]^f[x[Z++]]^_[x[Z++]]^h[x[Z++]]^u[x[Z++]]^c[x[Z++]]^r[x[Z++]];for(re+=15;Z<re;)B=B>>>8^r[(B^x[Z++])&255];return~B}function G(x,U){for(var B=U^-1,re=0,Z=x.length,se=0,pe=0;re<Z;)se=x.charCodeAt(re++),se<128?B=B>>>8^r[(B^se)&255]:se<2048?(B=B>>>8^r[(B^(192|se>>6&31))&255],B=B>>>8^r[(B^(128|se&63))&255]):se>=55296&&se<57344?(se=(se&1023)+64,pe=x.charCodeAt(re++)&1023,B=B>>>8^r[(B^(240|se>>8&7))&255],B=B>>>8^r[(B^(128|se>>2&63))&255],B=B>>>8^r[(B^(128|pe>>6&15|(se&3)<<4))&255],B=B>>>8^r[(B^(128|pe&63))&255]):(B=B>>>8^r[(B^(224|se>>12&15))&255],B=B>>>8^r[(B^(128|se>>6&63))&255],B=B>>>8^r[(B^(128|se&63))&255]);return~B}return t.table=r,t.bstr=k,t.buf=H,t.str=G,t}(),Et=function(){var s={};s.version="1.2.1";function r(y,W){for(var P=y.split("/"),F=W.split("/"),z=0,K=0,Te=Math.min(P.length,F.length);z<Te;++z){if(K=P[z].length-F[z].length)return K;if(P[z]!=F[z])return P[z]<F[z]?-1:1}return P.length-F.length}function i(y){if(y.charAt(y.length-1)=="/")return y.slice(0,-1).indexOf("/")===-1?y:i(y.slice(0,-1));var W=y.lastIndexOf("/");return W===-1?y:y.slice(0,W+1)}function l(y){if(y.charAt(y.length-1)=="/")return l(y.slice(0,-1));var W=y.lastIndexOf("/");return W===-1?y:y.slice(W+1)}function c(y,W){typeof W=="string"&&(W=new Date(W));var P=W.getHours();P=P<<6|W.getMinutes(),P=P<<5|W.getSeconds()>>>1,y.write_shift(2,P);var F=W.getFullYear()-1980;F=F<<4|W.getMonth()+1,F=F<<5|W.getDate(),y.write_shift(2,F)}function u(y){var W=y.read_shift(2)&65535,P=y.read_shift(2)&65535,F=new Date,z=P&31;P>>>=5;var K=P&15;P>>>=4,F.setMilliseconds(0),F.setFullYear(P+1980),F.setMonth(K-1),F.setDate(z);var Te=W&31;W>>>=5;var Se=W&63;return W>>>=6,F.setHours(W),F.setMinutes(Se),F.setSeconds(Te<<1),F}function h(y){qr(y,0);for(var W={},P=0;y.l<=y.length-4;){var F=y.read_shift(2),z=y.read_shift(2),K=y.l+z,Te={};switch(F){case 21589:P=y.read_shift(1),P&1&&(Te.mtime=y.read_shift(4)),z>5&&(P&2&&(Te.atime=y.read_shift(4)),P&4&&(Te.ctime=y.read_shift(4))),Te.mtime&&(Te.mt=new Date(Te.mtime*1e3));break}y.l=K,W[F]=Te}return W}var _;function f(){return _||(_={})}function T(y,W){if(y[0]==80&&y[1]==75)return Bn(y,W);if((y[0]|32)==109&&(y[1]|32)==105)return wr(y,W);if(y.length<512)throw new Error("CFB file size "+y.length+" < 512");var P=3,F=512,z=0,K=0,Te=0,Se=0,Ee=0,ge=[],$e=y.slice(0,512);qr($e,0);var De=E($e);switch(P=De[0],P){case 3:F=512;break;case 4:F=4096;break;case 0:if(De[1]==0)return Bn(y,W);default:throw new Error("Major Version: Expected 3 or 4 saw "+P)}F!==512&&($e=y.slice(0,F),qr($e,28));var Ge=y.slice(0,F);g($e,P);var ze=$e.read_shift(4,"i");if(P===3&&ze!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ze);$e.l+=4,Te=$e.read_shift(4,"i"),$e.l+=4,$e.chk("00100000","Mini Stream Cutoff Size: "),Se=$e.read_shift(4,"i"),z=$e.read_shift(4,"i"),Ee=$e.read_shift(4,"i"),K=$e.read_shift(4,"i");for(var Ue=-1,We=0;We<109&&(Ue=$e.read_shift(4,"i"),!(Ue<0));++We)ge[We]=Ue;var nt=S(y,F);N(Ee,K,nt,F,ge);var Dt=A(nt,Te,ge,F);Dt[Te].name="!Directory",z>0&&Se!==pe&&(Dt[Se].name="!MiniFAT"),Dt[ge[0]].name="!FAT",Dt.fat_addrs=ge,Dt.ssz=F;var Nt={},pr=[],Si=[],Ys=[];I(Te,Dt,nt,pr,z,Nt,Si,Se),R(Si,Ys,pr),pr.shift();var Ks={FileIndex:Si,FullPaths:Ys};return W&&W.raw&&(Ks.raw={header:Ge,sectors:nt}),Ks}function E(y){if(y[y.l]==80&&y[y.l+1]==75)return[0,0];y.chk(Me,"Header Signature: "),y.l+=16;var W=y.read_shift(2,"u");return[y.read_shift(2,"u"),W]}function g(y,W){var P=9;switch(y.l+=2,P=y.read_shift(2)){case 9:if(W!=3)throw new Error("Sector Shift: Expected 9 saw "+P);break;case 12:if(W!=4)throw new Error("Sector Shift: Expected 12 saw "+P);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+P)}y.chk("0600","Mini Sector Shift: "),y.chk("000000000000","Reserved: ")}function S(y,W){for(var P=Math.ceil(y.length/W)-1,F=[],z=1;z<P;++z)F[z-1]=y.slice(z*W,(z+1)*W);return F[P-1]=y.slice(P*W),F}function R(y,W,P){for(var F=0,z=0,K=0,Te=0,Se=0,Ee=P.length,ge=[],$e=[];F<Ee;++F)ge[F]=$e[F]=F,W[F]=P[F];for(;Se<$e.length;++Se)F=$e[Se],z=y[F].L,K=y[F].R,Te=y[F].C,ge[F]===F&&(z!==-1&&ge[z]!==z&&(ge[F]=ge[z]),K!==-1&&ge[K]!==K&&(ge[F]=ge[K])),Te!==-1&&(ge[Te]=F),z!==-1&&F!=ge[F]&&(ge[z]=ge[F],$e.lastIndexOf(z)<Se&&$e.push(z)),K!==-1&&F!=ge[F]&&(ge[K]=ge[F],$e.lastIndexOf(K)<Se&&$e.push(K));for(F=1;F<Ee;++F)ge[F]===F&&(K!==-1&&ge[K]!==K?ge[F]=ge[K]:z!==-1&&ge[z]!==z&&(ge[F]=ge[z]));for(F=1;F<Ee;++F)if(y[F].type!==0){if(Se=F,Se!=ge[Se])do Se=ge[Se],W[F]=W[Se]+"/"+W[F];while(Se!==0&&ge[Se]!==-1&&Se!=ge[Se]);ge[F]=-1}for(W[0]+="/",F=1;F<Ee;++F)y[F].type!==2&&(W[F]+="/")}function L(y,W,P){for(var F=y.start,z=y.size,K=[],Te=F;P&&z>0&&Te>=0;)K.push(W.slice(Te*se,Te*se+se)),z-=se,Te=Rl(P,Te*4);return K.length===0?Cr(0):Ao(K).slice(0,y.size)}function N(y,W,P,F,z){var K=pe;if(y===pe){if(W!==0)throw new Error("DIFAT chain shorter than expected")}else if(y!==-1){var Te=P[y],Se=(F>>>2)-1;if(!Te)return;for(var Ee=0;Ee<Se&&(K=Rl(Te,Ee*4))!==pe;++Ee)z.push(K);N(Rl(Te,F-4),W-1,P,F,z)}}function C(y,W,P,F,z){var K=[],Te=[];z||(z=[]);var Se=F-1,Ee=0,ge=0;for(Ee=W;Ee>=0;){z[Ee]=!0,K[K.length]=Ee,Te.push(y[Ee]);var $e=P[Math.floor(Ee*4/F)];if(ge=Ee*4&Se,F<4+ge)throw new Error("FAT boundary crossed: "+Ee+" 4 "+F);if(!y[$e])break;Ee=Rl(y[$e],ge)}return{nodes:K,data:TN([Te])}}function A(y,W,P,F){var z=y.length,K=[],Te=[],Se=[],Ee=[],ge=F-1,$e=0,De=0,Ge=0,ze=0;for($e=0;$e<z;++$e)if(Se=[],Ge=$e+W,Ge>=z&&(Ge-=z),!Te[Ge]){Ee=[];var Ue=[];for(De=Ge;De>=0;){Ue[De]=!0,Te[De]=!0,Se[Se.length]=De,Ee.push(y[De]);var We=P[Math.floor(De*4/F)];if(ze=De*4&ge,F<4+ze)throw new Error("FAT boundary crossed: "+De+" 4 "+F);if(!y[We]||(De=Rl(y[We],ze),Ue[De]))break}K[Ge]={nodes:Se,data:TN([Ee])}}return K}function I(y,W,P,F,z,K,Te,Se){for(var Ee=0,ge=F.length?2:0,$e=W[y].data,De=0,Ge=0,ze;De<$e.length;De+=128){var Ue=$e.slice(De,De+128);qr(Ue,64),Ge=Ue.read_shift(2),ze=NI(Ue,0,Ge-ge),F.push(ze);var We={name:ze,type:Ue.read_shift(1),color:Ue.read_shift(1),L:Ue.read_shift(4,"i"),R:Ue.read_shift(4,"i"),C:Ue.read_shift(4,"i"),clsid:Ue.read_shift(16),state:Ue.read_shift(4,"i"),start:0,size:0},nt=Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2);nt!==0&&(We.ct=k(Ue,Ue.l-8));var Dt=Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2)+Ue.read_shift(2);Dt!==0&&(We.mt=k(Ue,Ue.l-8)),We.start=Ue.read_shift(4,"i"),We.size=Ue.read_shift(4,"i"),We.size<0&&We.start<0&&(We.size=We.type=0,We.start=pe,We.name=""),We.type===5?(Ee=We.start,z>0&&Ee!==pe&&(W[Ee].name="!StreamData")):We.size>=4096?(We.storage="fat",W[We.start]===void 0&&(W[We.start]=C(P,We.start,W.fat_addrs,W.ssz)),W[We.start].name=We.name,We.content=W[We.start].data.slice(0,We.size)):(We.storage="minifat",We.size<0?We.size=0:Ee!==pe&&We.start!==pe&&W[Ee]&&(We.content=L(We,W[Ee].data,(W[Se]||{}).data))),We.content&&qr(We.content,0),K[ze]=We,Te.push(We)}}function k(y,W){return new Date((Jn(y,W+4)/1e7*Math.pow(2,32)+Jn(y,W)/1e7-11644473600)*1e3)}function H(y,W){return f(),T(_.readFileSync(y),W)}function G(y,W){var P=W&&W.type;switch(P||pt&&Buffer.isBuffer(y)&&(P="buffer"),P||"base64"){case"file":return H(y,W);case"base64":return T(Fs(rs(y)),W);case"binary":return T(Fs(y),W)}return T(y,W)}function x(y,W){var P=W||{},F=P.root||"Root Entry";if(y.FullPaths||(y.FullPaths=[]),y.FileIndex||(y.FileIndex=[]),y.FullPaths.length!==y.FileIndex.length)throw new Error("inconsistent CFB structure");y.FullPaths.length===0&&(y.FullPaths[0]=F+"/",y.FileIndex[0]={name:F,type:5}),P.CLSID&&(y.FileIndex[0].clsid=P.CLSID),U(y)}function U(y){var W="Sh33tJ5";if(!Et.find(y,"/"+W)){var P=Cr(4);P[0]=55,P[1]=P[3]=50,P[2]=54,y.FileIndex.push({name:W,type:2,content:P,size:4,L:69,R:69,C:69}),y.FullPaths.push(y.FullPaths[0]+W),B(y)}}function B(y,W){x(y);for(var P=!1,F=!1,z=y.FullPaths.length-1;z>=0;--z){var K=y.FileIndex[z];switch(K.type){case 0:F?P=!0:(y.FileIndex.pop(),y.FullPaths.pop());break;case 1:case 2:case 5:F=!0,isNaN(K.R*K.L*K.C)&&(P=!0),K.R>-1&&K.L>-1&&K.R==K.L&&(P=!0);break;default:P=!0;break}}if(!(!P&&!W)){var Te=new Date(1987,1,19),Se=0,Ee=Object.create?Object.create(null):{},ge=[];for(z=0;z<y.FullPaths.length;++z)Ee[y.FullPaths[z]]=!0,y.FileIndex[z].type!==0&&ge.push([y.FullPaths[z],y.FileIndex[z]]);for(z=0;z<ge.length;++z){var $e=i(ge[z][0]);F=Ee[$e],F||(ge.push([$e,{name:l($e).replace("/",""),type:1,clsid:we,ct:Te,mt:Te,content:null}]),Ee[$e]=!0)}for(ge.sort(function(ze,Ue){return r(ze[0],Ue[0])}),y.FullPaths=[],y.FileIndex=[],z=0;z<ge.length;++z)y.FullPaths[z]=ge[z][0],y.FileIndex[z]=ge[z][1];for(z=0;z<ge.length;++z){var De=y.FileIndex[z],Ge=y.FullPaths[z];if(De.name=l(Ge).replace("/",""),De.L=De.R=De.C=-(De.color=1),De.size=De.content?De.content.length:0,De.start=0,De.clsid=De.clsid||we,z===0)De.C=ge.length>1?1:-1,De.size=0,De.type=5;else if(Ge.slice(-1)=="/"){for(Se=z+1;Se<ge.length&&i(y.FullPaths[Se])!=Ge;++Se);for(De.C=Se>=ge.length?-1:Se,Se=z+1;Se<ge.length&&i(y.FullPaths[Se])!=i(Ge);++Se);De.R=Se>=ge.length?-1:Se,De.type=1}else i(y.FullPaths[z+1]||"")==i(Ge)&&(De.R=z+1),De.type=2}}}function re(y,W){var P=W||{};if(P.fileType=="mad")return Oi(y,P);switch(B(y),P.fileType){case"zip":return O(y,P)}var F=function(ze){for(var Ue=0,We=0,nt=0;nt<ze.FileIndex.length;++nt){var Dt=ze.FileIndex[nt];if(Dt.content){var Nt=Dt.content.length;Nt>0&&(Nt<4096?Ue+=Nt+63>>6:We+=Nt+511>>9)}}for(var pr=ze.FullPaths.length+3>>2,Si=Ue+7>>3,Ys=Ue+127>>7,Ks=Si+We+pr+Ys,os=Ks+127>>7,Ri=os<=109?0:Math.ceil((os-109)/127);Ks+os+Ri+127>>7>os;)Ri=++os<=109?0:Math.ceil((os-109)/127);var ls=[1,Ri,os,Ys,pr,We,Ue,0];return ze.FileIndex[0].size=Ue<<6,ls[7]=(ze.FileIndex[0].start=ls[0]+ls[1]+ls[2]+ls[3]+ls[4]+ls[5])+(ls[6]+7>>3),ls}(y),z=Cr(F[7]<<9),K=0,Te=0;{for(K=0;K<8;++K)z.write_shift(1,Oe[K]);for(K=0;K<8;++K)z.write_shift(2,0);for(z.write_shift(2,62),z.write_shift(2,3),z.write_shift(2,65534),z.write_shift(2,9),z.write_shift(2,6),K=0;K<3;++K)z.write_shift(2,0);for(z.write_shift(4,0),z.write_shift(4,F[2]),z.write_shift(4,F[0]+F[1]+F[2]+F[3]-1),z.write_shift(4,0),z.write_shift(4,4096),z.write_shift(4,F[3]?F[0]+F[1]+F[2]-1:pe),z.write_shift(4,F[3]),z.write_shift(-4,F[1]?F[0]-1:pe),z.write_shift(4,F[1]),K=0;K<109;++K)z.write_shift(-4,K<F[2]?F[1]+K:-1)}if(F[1])for(Te=0;Te<F[1];++Te){for(;K<236+Te*127;++K)z.write_shift(-4,K<F[2]?F[1]+K:-1);z.write_shift(-4,Te===F[1]-1?pe:Te+1)}var Se=function(ze){for(Te+=ze;K<Te-1;++K)z.write_shift(-4,K+1);ze&&(++K,z.write_shift(-4,pe))};for(Te=K=0,Te+=F[1];K<Te;++K)z.write_shift(-4,ye.DIFSECT);for(Te+=F[2];K<Te;++K)z.write_shift(-4,ye.FATSECT);Se(F[3]),Se(F[4]);for(var Ee=0,ge=0,$e=y.FileIndex[0];Ee<y.FileIndex.length;++Ee)$e=y.FileIndex[Ee],$e.content&&(ge=$e.content.length,!(ge<4096)&&($e.start=Te,Se(ge+511>>9)));for(Se(F[6]+7>>3);z.l&511;)z.write_shift(-4,ye.ENDOFCHAIN);for(Te=K=0,Ee=0;Ee<y.FileIndex.length;++Ee)$e=y.FileIndex[Ee],$e.content&&(ge=$e.content.length,!(!ge||ge>=4096)&&($e.start=Te,Se(ge+63>>6)));for(;z.l&511;)z.write_shift(-4,ye.ENDOFCHAIN);for(K=0;K<F[4]<<2;++K){var De=y.FullPaths[K];if(!De||De.length===0){for(Ee=0;Ee<17;++Ee)z.write_shift(4,0);for(Ee=0;Ee<3;++Ee)z.write_shift(4,-1);for(Ee=0;Ee<12;++Ee)z.write_shift(4,0);continue}$e=y.FileIndex[K],K===0&&($e.start=$e.size?$e.start-1:pe);var Ge=K===0&&P.root||$e.name;if(ge=2*(Ge.length+1),z.write_shift(64,Ge,"utf16le"),z.write_shift(2,ge),z.write_shift(1,$e.type),z.write_shift(1,$e.color),z.write_shift(-4,$e.L),z.write_shift(-4,$e.R),z.write_shift(-4,$e.C),$e.clsid)z.write_shift(16,$e.clsid,"hex");else for(Ee=0;Ee<4;++Ee)z.write_shift(4,0);z.write_shift(4,$e.state||0),z.write_shift(4,0),z.write_shift(4,0),z.write_shift(4,0),z.write_shift(4,0),z.write_shift(4,$e.start),z.write_shift(4,$e.size),z.write_shift(4,0)}for(K=1;K<y.FileIndex.length;++K)if($e=y.FileIndex[K],$e.size>=4096)if(z.l=$e.start+1<<9,pt&&Buffer.isBuffer($e.content))$e.content.copy(z,z.l,0,$e.size),z.l+=$e.size+511&-512;else{for(Ee=0;Ee<$e.size;++Ee)z.write_shift(1,$e.content[Ee]);for(;Ee&511;++Ee)z.write_shift(1,0)}for(K=1;K<y.FileIndex.length;++K)if($e=y.FileIndex[K],$e.size>0&&$e.size<4096)if(pt&&Buffer.isBuffer($e.content))$e.content.copy(z,z.l,0,$e.size),z.l+=$e.size+63&-64;else{for(Ee=0;Ee<$e.size;++Ee)z.write_shift(1,$e.content[Ee]);for(;Ee&63;++Ee)z.write_shift(1,0)}if(pt)z.l=z.length;else for(;z.l<z.length;)z.write_shift(1,0);return z}function Z(y,W){var P=y.FullPaths.map(function(Ee){return Ee.toUpperCase()}),F=P.map(function(Ee){var ge=Ee.split("/");return ge[ge.length-(Ee.slice(-1)=="/"?2:1)]}),z=!1;W.charCodeAt(0)===47?(z=!0,W=P[0].slice(0,-1)+W):z=W.indexOf("/")!==-1;var K=W.toUpperCase(),Te=z===!0?P.indexOf(K):F.indexOf(K);if(Te!==-1)return y.FileIndex[Te];var Se=!K.match(Uu);for(K=K.replace(Cn,""),Se&&(K=K.replace(Uu,"!")),Te=0;Te<P.length;++Te)if((Se?P[Te].replace(Uu,"!"):P[Te]).replace(Cn,"")==K||(Se?F[Te].replace(Uu,"!"):F[Te]).replace(Cn,"")==K)return y.FileIndex[Te];return null}var se=64,pe=-2,Me="d0cf11e0a1b11ae1",Oe=[208,207,17,224,161,177,26,225],we="00000000000000000000000000000000",ye={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:pe,FREESECT:-1,HEADER_SIGNATURE:Me,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:we,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function Re(y,W,P){f();var F=re(y,P);_.writeFileSync(W,F)}function j(y){for(var W=new Array(y.length),P=0;P<y.length;++P)W[P]=String.fromCharCode(y[P]);return W.join("")}function Y(y,W){var P=re(y,W);switch(W&&W.type||"buffer"){case"file":return f(),_.writeFileSync(W.filename,P),P;case"binary":return typeof P=="string"?P:j(P);case"base64":return qv(typeof P=="string"?P:j(P));case"buffer":if(pt)return Buffer.isBuffer(P)?P:Yl(P);case"array":return typeof P=="string"?Fs(P):P}return P}var oe;function M(y){try{var W=y.InflateRaw,P=new W;if(P._processChunk(new Uint8Array([3,0]),P._finishFlushFlag),P.bytesRead)oe=y;else throw new Error("zlib does not expose bytesRead")}catch(F){console.error("cannot use native zlib: "+(F.message||F))}}function Q(y,W){if(!oe)return gt(y,W);var P=oe.InflateRaw,F=new P,z=F._processChunk(y.slice(y.l),F._finishFlushFlag);return y.l+=F.bytesRead,z}function J(y){return oe?oe.deflateRawSync(y):et(y)}var q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],he=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],Ne=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function Pe(y){var W=(y<<1|y<<11)&139536|(y<<5|y<<15)&558144;return(W>>16|W>>8|W)&255}for(var be=typeof Uint8Array<"u",ce=be?new Uint8Array(256):[],tt=0;tt<256;++tt)ce[tt]=Pe(tt);function b(y,W){var P=ce[y&255];return W<=8?P>>>8-W:(P=P<<8|ce[y>>8&255],W<=16?P>>>16-W:(P=P<<8|ce[y>>16&255],P>>>24-W))}function _e(y,W){var P=W&7,F=W>>>3;return(y[F]|(P<=6?0:y[F+1]<<8))>>>P&3}function He(y,W){var P=W&7,F=W>>>3;return(y[F]|(P<=5?0:y[F+1]<<8))>>>P&7}function ke(y,W){var P=W&7,F=W>>>3;return(y[F]|(P<=4?0:y[F+1]<<8))>>>P&15}function Ze(y,W){var P=W&7,F=W>>>3;return(y[F]|(P<=3?0:y[F+1]<<8))>>>P&31}function ve(y,W){var P=W&7,F=W>>>3;return(y[F]|(P<=1?0:y[F+1]<<8))>>>P&127}function ut(y,W,P){var F=W&7,z=W>>>3,K=(1<<P)-1,Te=y[z]>>>F;return P<8-F||(Te|=y[z+1]<<8-F,P<16-F)||(Te|=y[z+2]<<16-F,P<24-F)||(Te|=y[z+3]<<24-F),Te&K}function Bt(y,W,P){var F=W&7,z=W>>>3;return F<=5?y[z]|=(P&7)<<F:(y[z]|=P<<F&255,y[z+1]=(P&7)>>8-F),W+3}function tr(y,W,P){var F=W&7,z=W>>>3;return P=(P&1)<<F,y[z]|=P,W+1}function hr(y,W,P){var F=W&7,z=W>>>3;return P<<=F,y[z]|=P&255,P>>>=8,y[z+1]=P,W+8}function wt(y,W,P){var F=W&7,z=W>>>3;return P<<=F,y[z]|=P&255,P>>>=8,y[z+1]=P&255,y[z+2]=P>>>8,W+16}function rn(y,W){var P=y.length,F=2*P>W?2*P:W+5,z=0;if(P>=W)return y;if(pt){var K=Zv(F);if(y.copy)y.copy(K);else for(;z<y.length;++z)K[z]=y[z];return K}else if(be){var Te=new Uint8Array(F);if(Te.set)Te.set(y);else for(;z<P;++z)Te[z]=y[z];return Te}return y.length=F,y}function Wt(y){for(var W=new Array(y),P=0;P<y;++P)W[P]=0;return W}function te(y,W,P){var F=1,z=0,K=0,Te=0,Se=0,Ee=y.length,ge=be?new Uint16Array(32):Wt(32);for(K=0;K<32;++K)ge[K]=0;for(K=Ee;K<P;++K)y[K]=0;Ee=y.length;var $e=be?new Uint16Array(Ee):Wt(Ee);for(K=0;K<Ee;++K)ge[z=y[K]]++,F<z&&(F=z),$e[K]=0;for(ge[0]=0,K=1;K<=F;++K)ge[K+16]=Se=Se+ge[K-1]<<1;for(K=0;K<Ee;++K)Se=y[K],Se!=0&&($e[K]=ge[Se+16]++);var De=0;for(K=0;K<Ee;++K)if(De=y[K],De!=0)for(Se=b($e[K],F)>>F-De,Te=(1<<F+4-De)-1;Te>=0;--Te)W[Se|Te<<De]=De&15|K<<4;return F}var dr=be?new Uint16Array(512):Wt(512),mn=be?new Uint16Array(32):Wt(32);if(!be){for(var ct=0;ct<512;++ct)dr[ct]=0;for(ct=0;ct<32;++ct)mn[ct]=0}(function(){for(var y=[],W=0;W<32;W++)y.push(5);te(y,mn,32);var P=[];for(W=0;W<=143;W++)P.push(8);for(;W<=255;W++)P.push(9);for(;W<=279;W++)P.push(7);for(;W<=287;W++)P.push(8);te(P,dr,288)})();var Ot=function(){for(var W=be?new Uint8Array(32768):[],P=0,F=0;P<Ne.length-1;++P)for(;F<Ne[P+1];++F)W[F]=P;for(;F<32768;++F)W[F]=29;var z=be?new Uint8Array(259):[];for(P=0,F=0;P<he.length-1;++P)for(;F<he[P+1];++F)z[F]=P;function K(Se,Ee){for(var ge=0;ge<Se.length;){var $e=Math.min(65535,Se.length-ge),De=ge+$e==Se.length;for(Ee.write_shift(1,+De),Ee.write_shift(2,$e),Ee.write_shift(2,~$e&65535);$e-- >0;)Ee[Ee.l++]=Se[ge++]}return Ee.l}function Te(Se,Ee){for(var ge=0,$e=0,De=be?new Uint16Array(32768):[];$e<Se.length;){var Ge=Math.min(65535,Se.length-$e);if(Ge<10){for(ge=Bt(Ee,ge,+($e+Ge==Se.length)),ge&7&&(ge+=8-(ge&7)),Ee.l=ge/8|0,Ee.write_shift(2,Ge),Ee.write_shift(2,~Ge&65535);Ge-- >0;)Ee[Ee.l++]=Se[$e++];ge=Ee.l*8;continue}ge=Bt(Ee,ge,+($e+Ge==Se.length)+2);for(var ze=0;Ge-- >0;){var Ue=Se[$e];ze=(ze<<5^Ue)&32767;var We=-1,nt=0;if((We=De[ze])&&(We|=$e&-32768,We>$e&&(We-=32768),We<$e))for(;Se[We+nt]==Se[$e+nt]&&nt<250;)++nt;if(nt>2){Ue=z[nt],Ue<=22?ge=hr(Ee,ge,ce[Ue+1]>>1)-1:(hr(Ee,ge,3),ge+=5,hr(Ee,ge,ce[Ue-23]>>5),ge+=3);var Dt=Ue<8?0:Ue-4>>2;Dt>0&&(wt(Ee,ge,nt-he[Ue]),ge+=Dt),Ue=W[$e-We],ge=hr(Ee,ge,ce[Ue]>>3),ge-=3;var Nt=Ue<4?0:Ue-2>>1;Nt>0&&(wt(Ee,ge,$e-We-Ne[Ue]),ge+=Nt);for(var pr=0;pr<nt;++pr)De[ze]=$e&32767,ze=(ze<<5^Se[$e])&32767,++$e;Ge-=nt-1}else Ue<=143?Ue=Ue+48:ge=tr(Ee,ge,1),ge=hr(Ee,ge,ce[Ue]),De[ze]=$e&32767,++$e}ge=hr(Ee,ge,0)-1}return Ee.l=(ge+7)/8|0,Ee.l}return function(Ee,ge){return Ee.length<8?K(Ee,ge):Te(Ee,ge)}}();function et(y){var W=Cr(50+Math.floor(y.length*1.1)),P=Ot(y,W);return W.slice(0,P)}var ot=be?new Uint16Array(32768):Wt(32768),Mt=be?new Uint16Array(32768):Wt(32768),m=be?new Uint16Array(128):Wt(128),D=1,ie=1;function le(y,W){var P=Ze(y,W)+257;W+=5;var F=Ze(y,W)+1;W+=5;var z=ke(y,W)+4;W+=4;for(var K=0,Te=be?new Uint8Array(19):Wt(19),Se=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ee=1,ge=be?new Uint8Array(8):Wt(8),$e=be?new Uint8Array(8):Wt(8),De=Te.length,Ge=0;Ge<z;++Ge)Te[q[Ge]]=K=He(y,W),Ee<K&&(Ee=K),ge[K]++,W+=3;var ze=0;for(ge[0]=0,Ge=1;Ge<=Ee;++Ge)$e[Ge]=ze=ze+ge[Ge-1]<<1;for(Ge=0;Ge<De;++Ge)(ze=Te[Ge])!=0&&(Se[Ge]=$e[ze]++);var Ue=0;for(Ge=0;Ge<De;++Ge)if(Ue=Te[Ge],Ue!=0){ze=ce[Se[Ge]]>>8-Ue;for(var We=(1<<7-Ue)-1;We>=0;--We)m[ze|We<<Ue]=Ue&7|Ge<<3}var nt=[];for(Ee=1;nt.length<P+F;)switch(ze=m[ve(y,W)],W+=ze&7,ze>>>=3){case 16:for(K=3+_e(y,W),W+=2,ze=nt[nt.length-1];K-- >0;)nt.push(ze);break;case 17:for(K=3+He(y,W),W+=3;K-- >0;)nt.push(0);break;case 18:for(K=11+ve(y,W),W+=7;K-- >0;)nt.push(0);break;default:nt.push(ze),Ee<ze&&(Ee=ze);break}var Dt=nt.slice(0,P),Nt=nt.slice(P);for(Ge=P;Ge<286;++Ge)Dt[Ge]=0;for(Ge=F;Ge<30;++Ge)Nt[Ge]=0;return D=te(Dt,ot,286),ie=te(Nt,Mt,30),W}function Be(y,W){if(y[0]==3&&!(y[1]&3))return[Vo(W),2];for(var P=0,F=0,z=Zv(W||1<<18),K=0,Te=z.length>>>0,Se=0,Ee=0;!(F&1);){if(F=He(y,P),P+=3,F>>>1)F>>1==1?(Se=9,Ee=5):(P=le(y,P),Se=D,Ee=ie);else{P&7&&(P+=8-(P&7));var ge=y[P>>>3]|y[(P>>>3)+1]<<8;if(P+=32,ge>0)for(!W&&Te<K+ge&&(z=rn(z,K+ge),Te=z.length);ge-- >0;)z[K++]=y[P>>>3],P+=8;continue}for(;;){!W&&Te<K+32767&&(z=rn(z,K+32767),Te=z.length);var $e=ut(y,P,Se),De=F>>>1==1?dr[$e]:ot[$e];if(P+=De&15,De>>>=4,!(De>>>8&255))z[K++]=De;else{if(De==256)break;De-=257;var Ge=De<8?0:De-4>>2;Ge>5&&(Ge=0);var ze=K+he[De];Ge>0&&(ze+=ut(y,P,Ge),P+=Ge),$e=ut(y,P,Ee),De=F>>>1==1?mn[$e]:Mt[$e],P+=De&15,De>>>=4;var Ue=De<4?0:De-2>>1,We=Ne[De];for(Ue>0&&(We+=ut(y,P,Ue),P+=Ue),!W&&Te<ze&&(z=rn(z,ze+100),Te=z.length);K<ze;)z[K]=z[K-We],++K}}}return W?[z,P+7>>>3]:[z.slice(0,K),P+7>>>3]}function gt(y,W){var P=y.slice(y.l||0),F=Be(P,W);return y.l+=F[1],F[0]}function xn(y,W){if(y)typeof console<"u"&&console.error(W);else throw new Error(W)}function Bn(y,W){var P=y;qr(P,0);var F=[],z=[],K={FileIndex:F,FullPaths:z};x(K,{root:W.root});for(var Te=P.length-4;(P[Te]!=80||P[Te+1]!=75||P[Te+2]!=5||P[Te+3]!=6)&&Te>=0;)--Te;P.l=Te+4,P.l+=4;var Se=P.read_shift(2);P.l+=6;var Ee=P.read_shift(4);for(P.l=Ee,Te=0;Te<Se;++Te){P.l+=20;var ge=P.read_shift(4),$e=P.read_shift(4),De=P.read_shift(2),Ge=P.read_shift(2),ze=P.read_shift(2);P.l+=8;var Ue=P.read_shift(4),We=h(P.slice(P.l+De,P.l+De+Ge));P.l+=De+Ge+ze;var nt=P.l;P.l=Ue+4,Un(P,ge,$e,K,We),P.l=nt}return K}function Un(y,W,P,F,z){y.l+=2;var K=y.read_shift(2),Te=y.read_shift(2),Se=u(y);if(K&8257)throw new Error("Unsupported ZIP encryption");for(var Ee=y.read_shift(4),ge=y.read_shift(4),$e=y.read_shift(4),De=y.read_shift(2),Ge=y.read_shift(2),ze="",Ue=0;Ue<De;++Ue)ze+=String.fromCharCode(y[y.l++]);if(Ge){var We=h(y.slice(y.l,y.l+Ge));(We[21589]||{}).mt&&(Se=We[21589].mt),((z||{})[21589]||{}).mt&&(Se=z[21589].mt)}y.l+=Ge;var nt=y.slice(y.l,y.l+ge);switch(Te){case 8:nt=Q(y,$e);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Te)}var Dt=!1;K&8&&(Ee=y.read_shift(4),Ee==134695760&&(Ee=y.read_shift(4),Dt=!0),ge=y.read_shift(4),$e=y.read_shift(4)),ge!=W&&xn(Dt,"Bad compressed size: "+W+" != "+ge),$e!=P&&xn(Dt,"Bad uncompressed size: "+P+" != "+$e),Rr(F,ze,nt,{unsafe:!0,mt:Se})}function O(y,W){var P=W||{},F=[],z=[],K=Cr(1),Te=P.compression?8:0,Se=0,Ee=0,ge=0,$e=0,De=0,Ge=y.FullPaths[0],ze=Ge,Ue=y.FileIndex[0],We=[],nt=0;for(Ee=1;Ee<y.FullPaths.length;++Ee)if(ze=y.FullPaths[Ee].slice(Ge.length),Ue=y.FileIndex[Ee],!(!Ue.size||!Ue.content||ze=="Sh33tJ5")){var Dt=$e,Nt=Cr(ze.length);for(ge=0;ge<ze.length;++ge)Nt.write_shift(1,ze.charCodeAt(ge)&127);Nt=Nt.slice(0,Nt.l),We[De]=$B.buf(Ue.content,0);var pr=Ue.content;Te==8&&(pr=J(pr)),K=Cr(30),K.write_shift(4,67324752),K.write_shift(2,20),K.write_shift(2,Se),K.write_shift(2,Te),Ue.mt?c(K,Ue.mt):K.write_shift(4,0),K.write_shift(-4,We[De]),K.write_shift(4,pr.length),K.write_shift(4,Ue.content.length),K.write_shift(2,Nt.length),K.write_shift(2,0),$e+=K.length,F.push(K),$e+=Nt.length,F.push(Nt),$e+=pr.length,F.push(pr),K=Cr(46),K.write_shift(4,33639248),K.write_shift(2,0),K.write_shift(2,20),K.write_shift(2,Se),K.write_shift(2,Te),K.write_shift(4,0),K.write_shift(-4,We[De]),K.write_shift(4,pr.length),K.write_shift(4,Ue.content.length),K.write_shift(2,Nt.length),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(4,0),K.write_shift(4,Dt),nt+=K.l,z.push(K),nt+=Nt.length,z.push(Nt),++De}return K=Cr(22),K.write_shift(4,101010256),K.write_shift(2,0),K.write_shift(2,0),K.write_shift(2,De),K.write_shift(2,De),K.write_shift(4,nt),K.write_shift(4,$e),K.write_shift(2,0),Ao([Ao(F),Ao(z),K])}var w={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function ee(y,W){if(y.ctype)return y.ctype;var P=y.name||"",F=P.match(/\.([^\.]+)$/);return F&&w[F[1]]||W&&(F=(P=W).match(/[\.\\]([^\.\\])+$/),F&&w[F[1]])?w[F[1]]:"application/octet-stream"}function ae(y){for(var W=qv(y),P=[],F=0;F<W.length;F+=76)P.push(W.slice(F,F+76));return P.join(`\r
`)+`\r
`}function Ae(y){var W=y.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(ge){var $e=ge.charCodeAt(0).toString(16).toUpperCase();return"="+($e.length==1?"0"+$e:$e)});W=W.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),W.charAt(0)==`
`&&(W="=0D"+W.slice(1)),W=W.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var P=[],F=W.split(`\r
`),z=0;z<F.length;++z){var K=F[z];if(K.length==0){P.push("");continue}for(var Te=0;Te<K.length;){var Se=76,Ee=K.slice(Te,Te+Se);Ee.charAt(Se-1)=="="?Se--:Ee.charAt(Se-2)=="="?Se-=2:Ee.charAt(Se-3)=="="&&(Se-=3),Ee=K.slice(Te,Te+Se),Te+=Se,Te<K.length&&(Ee+="="),P.push(Ee)}}return P.join(`\r
`)}function Xe(y){for(var W=[],P=0;P<y.length;++P){for(var F=y[P];P<=y.length&&F.charAt(F.length-1)=="=";)F=F.slice(0,F.length-1)+y[++P];W.push(F)}for(var z=0;z<W.length;++z)W[z]=W[z].replace(/[=][0-9A-Fa-f]{2}/g,function(K){return String.fromCharCode(parseInt(K.slice(1),16))});return Fs(W.join(`\r
`))}function rt(y,W,P){for(var F="",z="",K="",Te,Se=0;Se<10;++Se){var Ee=W[Se];if(!Ee||Ee.match(/^\s*$/))break;var ge=Ee.match(/^(.*?):\s*([^\s].*)$/);if(ge)switch(ge[1].toLowerCase()){case"content-location":F=ge[2].trim();break;case"content-type":K=ge[2].trim();break;case"content-transfer-encoding":z=ge[2].trim();break}}switch(++Se,z.toLowerCase()){case"base64":Te=Fs(rs(W.slice(Se).join("")));break;case"quoted-printable":Te=Xe(W.slice(Se));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+z)}var $e=Rr(y,F.slice(P.length),Te,{unsafe:!0});K&&($e.ctype=K)}function wr(y,W){if(j(y.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var P=W&&W.root||"",F=(pt&&Buffer.isBuffer(y)?y.toString("binary"):j(y)).split(`\r
`),z=0,K="";for(z=0;z<F.length;++z)if(K=F[z],!!/^Content-Location:/i.test(K)&&(K=K.slice(K.indexOf("file")),P||(P=K.slice(0,K.lastIndexOf("/")+1)),K.slice(0,P.length)!=P))for(;P.length>0&&(P=P.slice(0,P.length-1),P=P.slice(0,P.lastIndexOf("/")+1),K.slice(0,P.length)!=P););var Te=(F[1]||"").match(/boundary="(.*?)"/);if(!Te)throw new Error("MAD cannot find boundary");var Se="--"+(Te[1]||""),Ee=[],ge=[],$e={FileIndex:Ee,FullPaths:ge};x($e);var De,Ge=0;for(z=0;z<F.length;++z){var ze=F[z];ze!==Se&&ze!==Se+"--"||(Ge++&&rt($e,F.slice(De,z),P),De=z)}return $e}function Oi(y,W){var P=W||{},F=P.boundary||"SheetJS";F="------="+F;for(var z=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+F.slice(2)+'"',"","",""],K=y.FullPaths[0],Te=K,Se=y.FileIndex[0],Ee=1;Ee<y.FullPaths.length;++Ee)if(Te=y.FullPaths[Ee].slice(K.length),Se=y.FileIndex[Ee],!(!Se.size||!Se.content||Te=="Sh33tJ5")){Te=Te.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(nt){return"_x"+nt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(nt){return"_u"+nt.charCodeAt(0).toString(16)+"_"});for(var ge=Se.content,$e=pt&&Buffer.isBuffer(ge)?ge.toString("binary"):j(ge),De=0,Ge=Math.min(1024,$e.length),ze=0,Ue=0;Ue<=Ge;++Ue)(ze=$e.charCodeAt(Ue))>=32&&ze<128&&++De;var We=De>=Ge*4/5;z.push(F),z.push("Content-Location: "+(P.root||"file:///C:/SheetJS/")+Te),z.push("Content-Transfer-Encoding: "+(We?"quoted-printable":"base64")),z.push("Content-Type: "+ee(Se,Te)),z.push(""),z.push(We?Ae($e):ae($e))}return z.push(F+`--\r
`),z.join(`\r
`)}function to(y){var W={};return x(W,y),W}function Rr(y,W,P,F){var z=F&&F.unsafe;z||x(y);var K=!z&&Et.find(y,W);if(!K){var Te=y.FullPaths[0];W.slice(0,Te.length)==Te?Te=W:(Te.slice(-1)!="/"&&(Te+="/"),Te=(Te+W).replace("//","/")),K={name:l(W),type:2},y.FileIndex.push(K),y.FullPaths.push(Te),z||Et.utils.cfb_gc(y)}return K.content=P,K.size=P?P.length:0,F&&(F.CLSID&&(K.clsid=F.CLSID),F.mt&&(K.mt=F.mt),F.ct&&(K.ct=F.ct)),K}function zs(y,W){x(y);var P=Et.find(y,W);if(P){for(var F=0;F<y.FileIndex.length;++F)if(y.FileIndex[F]==P)return y.FileIndex.splice(F,1),y.FullPaths.splice(F,1),!0}return!1}function bc(y,W,P){x(y);var F=Et.find(y,W);if(F){for(var z=0;z<y.FileIndex.length;++z)if(y.FileIndex[z]==F)return y.FileIndex[z].name=l(P),y.FullPaths[z]=P,!0}return!1}function yc(y){B(y,!0)}return s.find=Z,s.read=G,s.parse=T,s.write=Y,s.writeFile=Re,s.utils={cfb_new:to,cfb_add:Rr,cfb_del:zs,cfb_mov:bc,cfb_gc:yc,ReadShift:Qu,CheckField:ky,prep_blob:qr,bconcat:Ao,use_zlib:M,_deflateRaw:et,_inflateRaw:gt,consts:ye},s}();function IB(t){if(typeof Deno<"u")return Deno.readFileSync(t);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var s=File(t);s.open("r"),s.encoding="binary";var r=s.read();return s.close(),r}catch(i){if(!i.message||!i.message.match(/onstruct/))throw i}throw new Error("Cannot access file "+t)}function Wo(t){for(var s=Object.keys(t),r=[],i=0;i<s.length;++i)Object.prototype.hasOwnProperty.call(t,s[i])&&r.push(s[i]);return r}function AI(t){for(var s=[],r=Wo(t),i=0;i!==r.length;++i)s[t[r[i]]]=r[i];return s}var eT=new Date(1899,11,30,0,0,0);function ns(t,s){var r=t.getTime(),i=eT.getTime()+(t.getTimezoneOffset()-eT.getTimezoneOffset())*6e4;return(r-i)/(24*60*60*1e3)}var dy=new Date,OB=eT.getTime()+(dy.getTimezoneOffset()-eT.getTimezoneOffset())*6e4,oN=dy.getTimezoneOffset();function LT(t){var s=new Date;return s.setTime(t*24*60*60*1e3+OB),s.getTimezoneOffset()!==oN&&s.setTime(s.getTime()+(s.getTimezoneOffset()-oN)*6e4),s}function SB(t){var s=0,r=0,i=!1,l=t.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!l)throw new Error("|"+t+"| is not an ISO8601 Duration");for(var c=1;c!=l.length;++c)if(l[c]){switch(r=1,c>3&&(i=!0),l[c].slice(l[c].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+l[c].slice(l[c].length-1));case"D":r*=24;case"H":r*=60;case"M":if(i)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}s+=r*parseInt(l[c],10)}return s}var lN=new Date("2017-02-19T19:06:09.000Z"),_y=isNaN(lN.getFullYear())?new Date("2/19/17"):lN,RB=_y.getFullYear()==2017;function Qr(t,s){var r=new Date(t);if(RB)return s>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):s<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(t instanceof Date)return t;if(_y.getFullYear()==1917&&!isNaN(r.getFullYear())){var i=r.getFullYear();return t.indexOf(""+i)>-1||r.setFullYear(r.getFullYear()+100),r}var l=t.match(/\d+/g)||["2017","2","19","0","0","0"],c=new Date(+l[0],+l[1]-1,+l[2],+l[3]||0,+l[4]||0,+l[5]||0);return t.indexOf("Z")>-1&&(c=new Date(c.getTime()-c.getTimezoneOffset()*60*1e3)),c}function Hl(t,s){if(pt&&Buffer.isBuffer(t)){if(s){if(t[0]==255&&t[1]==254)return Gu(t.slice(2).toString("utf16le"));if(t[1]==254&&t[2]==255)return Gu(Q1(t.slice(2).toString("binary")))}return t.toString("binary")}if(typeof TextDecoder<"u")try{if(s){if(t[0]==255&&t[1]==254)return Gu(new TextDecoder("utf-16le").decode(t.slice(2)));if(t[0]==254&&t[1]==255)return Gu(new TextDecoder("utf-16be").decode(t.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(t)&&(t=new Uint8Array(t)),new TextDecoder("latin1").decode(t).replace(/[]/g,function(c){return r[c]||c})}catch{}for(var i=[],l=0;l!=t.length;++l)i.push(String.fromCharCode(t[l]));return i.join("")}function en(t){if(typeof JSON<"u"&&!Array.isArray(t))return JSON.parse(JSON.stringify(t));if(typeof t!="object"||t==null)return t;if(t instanceof Date)return new Date(t.getTime());var s={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=en(t[r]));return s}function ur(t,s){for(var r="";r.length<s;)r+=t;return r}function zi(t){var s=Number(t);if(!isNaN(s))return isFinite(s)?s:NaN;if(!/\d/.test(t))return s;var r=1,i=t.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(s=Number(i))||(i=i.replace(/[(](.*)[)]/,function(l,c){return r=-r,c}),!isNaN(s=Number(i)))?s/r:s}var LB=["january","february","march","april","may","june","july","august","september","october","november","december"];function Nh(t){var s=new Date(t),r=new Date(NaN),i=s.getYear(),l=s.getMonth(),c=s.getDate();if(isNaN(c))return r;var u=t.toLowerCase();if(u.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(u=u.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),u.length>3&&LB.indexOf(u)==-1)return r}else if(u.match(/[a-z]/))return r;return i<0||i>8099?r:(l>0||c>1)&&i!=101?s:t.match(/[^-0-9:,\/\\]/)?r:s}var AB=function(){var t="abacaba".split(/(:?b)/i).length==5;return function(r,i,l){if(t||typeof i=="string")return r.split(i);for(var c=r.split(i),u=[c[0]],h=1;h<c.length;++h)u.push(l),u.push(c[h]);return u}}();function fy(t){return t?t.content&&t.type?Hl(t.content,!0):t.data?Bu(t.data):t.asNodeBuffer&&pt?Bu(t.asNodeBuffer().toString("binary")):t.asBinary?Bu(t.asBinary()):t._data&&t._data.getContent?Bu(Hl(Array.prototype.slice.call(t._data.getContent(),0))):null:null}function Ty(t){if(!t)return null;if(t.data)return jv(t.data);if(t.asNodeBuffer&&pt)return t.asNodeBuffer();if(t._data&&t._data.getContent){var s=t._data.getContent();return typeof s=="string"?jv(s):Array.prototype.slice.call(s)}return t.content&&t.type?t.content:null}function CB(t){return t&&t.name.slice(-4)===".bin"?Ty(t):fy(t)}function Ts(t,s){for(var r=t.FullPaths||Wo(t.files),i=s.toLowerCase().replace(/[\/]/g,"\\"),l=i.replace(/\\/g,"/"),c=0;c<r.length;++c){var u=r[c].replace(/^Root Entry[\/]/,"").toLowerCase();if(i==u||l==u)return t.files?t.files[r[c]]:t.FileIndex[c]}return null}function CI(t,s){var r=Ts(t,s);if(r==null)throw new Error("Cannot find file "+s+" in zip");return r}function $r(t,s,r){if(!r)return CB(CI(t,s));if(!s)return null;try{return $r(t,s)}catch{return null}}function qn(t,s,r){if(!r)return fy(CI(t,s));if(!s)return null;try{return qn(t,s)}catch{return null}}function vB(t,s,r){return Ty(CI(t,s))}function aN(t){for(var s=t.FullPaths||Wo(t.files),r=[],i=0;i<s.length;++i)s[i].slice(-1)!="/"&&r.push(s[i].replace(/^Root Entry[\/]/,""));return r.sort()}function NB(t,s,r){if(t.FullPaths){if(typeof r=="string"){var i;return pt?i=Yl(r):i=KF(r),Et.utils.cfb_add(t,s,i)}Et.utils.cfb_add(t,s,r)}else t.file(s,r)}function py(t,s){switch(s.type){case"base64":return Et.read(t,{type:"base64"});case"binary":return Et.read(t,{type:"binary"});case"buffer":case"array":return Et.read(t,{type:"buffer"})}throw new Error("Unrecognized type "+s.type)}function Hu(t,s){if(t.charAt(0)=="/")return t.slice(1);var r=s.split("/");s.slice(-1)!="/"&&r.pop();for(var i=t.split("/");i.length!==0;){var l=i.shift();l===".."?r.pop():l!=="."&&r.push(l)}return r.join("/")}var Ey=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,xB=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,cN=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,bB=/<[^>]*>/g,gn=Ey.match(cN)?cN:bB,yB=/<\w*:/,kB=/<(\/?)\w+:/;function st(t,s,r){for(var i={},l=0,c=0;l!==t.length&&!((c=t.charCodeAt(l))===32||c===10||c===13);++l);if(s||(i[0]=t.slice(0,l)),l===t.length)return i;var u=t.match(xB),h=0,_="",f=0,T="",E="",g=1;if(u)for(f=0;f!=u.length;++f){for(E=u[f],c=0;c!=E.length&&E.charCodeAt(c)!==61;++c);for(T=E.slice(0,c).trim();E.charCodeAt(c+1)==32;)++c;for(g=(l=E.charCodeAt(c+1))==34||l==39?1:0,_=E.slice(c+1+g,E.length-g),h=0;h!=T.length&&T.charCodeAt(h)!==58;++h);if(h===T.length)T.indexOf("_")>0&&(T=T.slice(0,T.indexOf("_"))),i[T]=_,i[T.toLowerCase()]=_;else{var S=(h===5&&T.slice(0,5)==="xmlns"?"xmlns":"")+T.slice(h+1);if(i[S]&&T.slice(h-3,h)=="ext")continue;i[S]=_,i[S.toLowerCase()]=_}}return i}function $i(t){return t.replace(kB,"<$1")}var gy={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},wB=AI(gy),$t=function(){var t=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,s=/_x([\da-fA-F]{4})_/ig;return function r(i){var l=i+"",c=l.indexOf("<![CDATA[");if(c==-1)return l.replace(t,function(h,_){return gy[h]||String.fromCharCode(parseInt(_,h.indexOf("x")>-1?16:10))||h}).replace(s,function(h,_){return String.fromCharCode(parseInt(_,16))});var u=l.indexOf("]]>");return r(l.slice(0,c))+l.slice(c+9,u)+r(l.slice(u+3))}}(),MB=/[&<>'"]/g,DB=/[\u0000-\u001f]/g;function my(t){var s=t+"";return s.replace(MB,function(r){return wB[r]}).replace(/\n/g,"<br/>").replace(DB,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}var uN=function(){var t=/&#(\d+);/g;function s(r,i){return String.fromCharCode(parseInt(i,10))}return function(i){return i.replace(t,s)}}();function Kt(t){switch(t){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function z0(t){for(var s="",r=0,i=0,l=0,c=0,u=0,h=0;r<t.length;){if(i=t.charCodeAt(r++),i<128){s+=String.fromCharCode(i);continue}if(l=t.charCodeAt(r++),i>191&&i<224){u=(i&31)<<6,u|=l&63,s+=String.fromCharCode(u);continue}if(c=t.charCodeAt(r++),i<240){s+=String.fromCharCode((i&15)<<12|(l&63)<<6|c&63);continue}u=t.charCodeAt(r++),h=((i&7)<<18|(l&63)<<12|(c&63)<<6|u&63)-65536,s+=String.fromCharCode(55296+(h>>>10&1023)),s+=String.fromCharCode(56320+(h&1023))}return s}function hN(t){var s=Vo(2*t.length),r,i,l=1,c=0,u=0,h;for(i=0;i<t.length;i+=l)l=1,(h=t.charCodeAt(i))<128?r=h:h<224?(r=(h&31)*64+(t.charCodeAt(i+1)&63),l=2):h<240?(r=(h&15)*4096+(t.charCodeAt(i+1)&63)*64+(t.charCodeAt(i+2)&63),l=3):(l=4,r=(h&7)*262144+(t.charCodeAt(i+1)&63)*4096+(t.charCodeAt(i+2)&63)*64+(t.charCodeAt(i+3)&63),r-=65536,u=55296+(r>>>10&1023),r=56320+(r&1023)),u!==0&&(s[c++]=u&255,s[c++]=u>>>8,u=0),s[c++]=r%256,s[c++]=r>>>8;return s.slice(0,c).toString("ucs2")}function dN(t){return Yl(t,"binary").toString("utf8")}var rf="foo bar baz",Ft=pt&&(dN(rf)==z0(rf)&&dN||hN(rf)==z0(rf)&&hN)||z0,Gu=pt?function(t){return Yl(t,"utf8").toString("binary")}:function(t){for(var s=[],r=0,i=0,l=0;r<t.length;)switch(i=t.charCodeAt(r++),!0){case i<128:s.push(String.fromCharCode(i));break;case i<2048:s.push(String.fromCharCode(192+(i>>6))),s.push(String.fromCharCode(128+(i&63)));break;case(i>=55296&&i<57344):i-=55296,l=t.charCodeAt(r++)-56320+(i<<10),s.push(String.fromCharCode(240+(l>>18&7))),s.push(String.fromCharCode(144+(l>>12&63))),s.push(String.fromCharCode(128+(l>>6&63))),s.push(String.fromCharCode(128+(l&63)));break;default:s.push(String.fromCharCode(224+(i>>12))),s.push(String.fromCharCode(128+(i>>6&63))),s.push(String.fromCharCode(128+(i&63)))}return s.join("")},xh=function(){var t={};return function(r,i){var l=r+"|"+(i||"");return t[l]?t[l]:t[l]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",i||"")}}(),PB=function(){var t=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(s){return[new RegExp("&"+s[0]+";","ig"),s[1]]});return function(r){for(var i=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),l=0;l<t.length;++l)i=i.replace(t[l][0],t[l][1]);return i}}(),FB=function(){var t={};return function(r){return t[r]!==void 0?t[r]:t[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),BB=/<\/?(?:vt:)?variant>/g,UB=/<(?:vt:)([^>]*)>([\s\S]*)</;function _N(t,s){var r=st(t),i=t.match(FB(r.baseType))||[],l=[];if(i.length!=r.size){if(s.WTF)throw new Error("unexpected vector length "+i.length+" != "+r.size);return l}return i.forEach(function(c){var u=c.replace(BB,"").match(UB);u&&l.push({v:Ft(u[2]),t:u[1]})}),l}function vI(t){if(pt&&Buffer.isBuffer(t))return t.toString("utf8");if(typeof t=="string")return t;if(typeof Uint8Array<"u"&&t instanceof Uint8Array)return Ft(Kl(SI(t)));throw new Error("Bad input format: expected Buffer or string")}var bh=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,HB={CT:"http://schemas.openxmlformats.org/package/2006/content-types"},GB=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"];function VB(t,s){for(var r=1-2*(t[s+7]>>>7),i=((t[s+7]&127)<<4)+(t[s+6]>>>4&15),l=t[s+6]&15,c=5;c>=0;--c)l=l*256+t[s+c];return i==2047?l==0?r*(1/0):NaN:(i==0?i=-1022:(i-=1023,l+=Math.pow(2,52)),r*Math.pow(2,i-52)*l)}function WB(t,s,r){var i=(s<0||1/s==-1/0?1:0)<<7,l=0,c=0,u=i?-s:s;isFinite(u)?u==0?l=c=0:(l=Math.floor(Math.log(u)/Math.LN2),c=u*Math.pow(2,52-l),l<=-1023&&(!isFinite(c)||c<Math.pow(2,52))?l=-1022:(c-=Math.pow(2,52),l+=1023)):(l=2047,c=isNaN(s)?26985:0);for(var h=0;h<=5;++h,c/=256)t[r+h]=c&255;t[r+6]=(l&15)<<4|c&15,t[r+7]=l>>4|i}var fN=function(t){for(var s=[],r=10240,i=0;i<t[0].length;++i)if(t[0][i])for(var l=0,c=t[0][i].length;l<c;l+=r)s.push.apply(s,t[0][i].slice(l,l+r));return s},TN=pt?function(t){return t[0].length>0&&Buffer.isBuffer(t[0][0])?Buffer.concat(t[0].map(function(s){return Buffer.isBuffer(s)?s:Yl(s)})):fN(t)}:fN,pN=function(t,s,r){for(var i=[],l=s;l<r;l+=2)i.push(String.fromCharCode(Vi(t,l)));return i.join("").replace(Cn,"")},NI=pt?function(t,s,r){return Buffer.isBuffer(t)?t.toString("utf16le",s,r).replace(Cn,""):pN(t,s,r)}:pN,EN=function(t,s,r){for(var i=[],l=s;l<s+r;++l)i.push(("0"+t[l].toString(16)).slice(-2));return i.join("")},$y=pt?function(t,s,r){return Buffer.isBuffer(t)?t.toString("hex",s,s+r):EN(t,s,r)}:EN,gN=function(t,s,r){for(var i=[],l=s;l<r;l++)i.push(String.fromCharCode(Ga(t,l)));return i.join("")},Xh=pt?function(s,r,i){return Buffer.isBuffer(s)?s.toString("utf8",r,i):gN(s,r,i)}:gN,Iy=function(t,s){var r=Jn(t,s);return r>0?Xh(t,s+4,s+4+r-1):""},Oy=Iy,Sy=function(t,s){var r=Jn(t,s);return r>0?Xh(t,s+4,s+4+r-1):""},Ry=Sy,Ly=function(t,s){var r=2*Jn(t,s);return r>0?Xh(t,s+4,s+4+r-1):""},Ay=Ly,Cy=function(s,r){var i=Jn(s,r);return i>0?NI(s,r+4,r+4+i):""},vy=Cy,Ny=function(t,s){var r=Jn(t,s);return r>0?Xh(t,s+4,s+4+r):""},xy=Ny,by=function(t,s){return VB(t,s)},tT=by,yy=function(s){return Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array};pt&&(Oy=function(s,r){if(!Buffer.isBuffer(s))return Iy(s,r);var i=s.readUInt32LE(r);return i>0?s.toString("utf8",r+4,r+4+i-1):""},Ry=function(s,r){if(!Buffer.isBuffer(s))return Sy(s,r);var i=s.readUInt32LE(r);return i>0?s.toString("utf8",r+4,r+4+i-1):""},Ay=function(s,r){if(!Buffer.isBuffer(s))return Ly(s,r);var i=2*s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+i-1)},vy=function(s,r){if(!Buffer.isBuffer(s))return Cy(s,r);var i=s.readUInt32LE(r);return s.toString("utf16le",r+4,r+4+i)},xy=function(s,r){if(!Buffer.isBuffer(s))return Ny(s,r);var i=s.readUInt32LE(r);return s.toString("utf8",r+4,r+4+i)},tT=function(s,r){return Buffer.isBuffer(s)?s.readDoubleLE(r):by(s,r)},yy=function(s){return Buffer.isBuffer(s)||Array.isArray(s)||typeof Uint8Array<"u"&&s instanceof Uint8Array});var Ga=function(t,s){return t[s]},Vi=function(t,s){return t[s+1]*256+t[s]},XB=function(t,s){var r=t[s+1]*256+t[s];return r<32768?r:(65535-r+1)*-1},Jn=function(t,s){return t[s+3]*(1<<24)+(t[s+2]<<16)+(t[s+1]<<8)+t[s]},Rl=function(t,s){return t[s+3]<<24|t[s+2]<<16|t[s+1]<<8|t[s]},zB=function(t,s){return t[s]<<24|t[s+1]<<16|t[s+2]<<8|t[s+3]};function Qu(t,s){var r="",i,l,c=[],u,h,_,f;switch(s){case"dbcs":if(f=this.l,pt&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*t).toString("utf16le");else for(_=0;_<t;++_)r+=String.fromCharCode(Vi(this,f)),f+=2;t*=2;break;case"utf8":r=Xh(this,this.l,this.l+t);break;case"utf16le":t*=2,r=NI(this,this.l,this.l+t);break;case"wstr":return Qu.call(this,t,"dbcs");case"lpstr-ansi":r=Oy(this,this.l),t=4+Jn(this,this.l);break;case"lpstr-cp":r=Ry(this,this.l),t=4+Jn(this,this.l);break;case"lpwstr":r=Ay(this,this.l),t=4+2*Jn(this,this.l);break;case"lpp4":t=4+Jn(this,this.l),r=vy(this,this.l),t&2&&(t+=2);break;case"8lpp4":t=4+Jn(this,this.l),r=xy(this,this.l),t&3&&(t+=4-(t&3));break;case"cstr":for(t=0,r="";(u=Ga(this,this.l+t++))!==0;)c.push(tf(u));r=c.join("");break;case"_wstr":for(t=0,r="";(u=Vi(this,this.l+t))!==0;)c.push(tf(u)),t+=2;t+=2,r=c.join("");break;case"dbcs-cont":for(r="",f=this.l,_=0;_<t;++_){if(this.lens&&this.lens.indexOf(f)!==-1)return u=Ga(this,f),this.l=f+1,h=Qu.call(this,t-_,u?"dbcs-cont":"sbcs-cont"),c.join("")+h;c.push(tf(Vi(this,f))),f+=2}r=c.join(""),t*=2;break;case"cpstr":case"sbcs-cont":for(r="",f=this.l,_=0;_!=t;++_){if(this.lens&&this.lens.indexOf(f)!==-1)return u=Ga(this,f),this.l=f+1,h=Qu.call(this,t-_,u?"dbcs-cont":"sbcs-cont"),c.join("")+h;c.push(tf(Ga(this,f))),f+=1}r=c.join("");break;default:switch(t){case 1:return i=Ga(this,this.l),this.l++,i;case 2:return i=(s==="i"?XB:Vi)(this,this.l),this.l+=2,i;case 4:case-4:return s==="i"||!(this[this.l+3]&128)?(i=(t>0?Rl:zB)(this,this.l),this.l+=4,i):(l=Jn(this,this.l),this.l+=4,l);case 8:case-8:if(s==="f")return t==8?l=tT(this,this.l):l=tT([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,l;t=8;case 16:r=$y(this,this.l,t);break}}return this.l+=t,r}var YB=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255,t[r+2]=s>>>16&255,t[r+3]=s>>>24&255},KB=function(t,s,r){t[r]=s&255,t[r+1]=s>>8&255,t[r+2]=s>>16&255,t[r+3]=s>>24&255},jB=function(t,s,r){t[r]=s&255,t[r+1]=s>>>8&255};function JB(t,s,r){var i=0,l=0;if(r==="dbcs"){for(l=0;l!=s.length;++l)jB(this,s.charCodeAt(l),this.l+2*l);i=2*s.length}else if(r==="sbcs"){for(s=s.replace(/[^\x00-\x7F]/g,"_"),l=0;l!=s.length;++l)this[this.l+l]=s.charCodeAt(l)&255;i=s.length}else if(r==="hex"){for(;l<t;++l)this[this.l++]=parseInt(s.slice(2*l,2*l+2),16)||0;return this}else if(r==="utf16le"){var c=Math.min(this.l+t,this.length);for(l=0;l<Math.min(s.length,t);++l){var u=s.charCodeAt(l);this[this.l++]=u&255,this[this.l++]=u>>8}for(;this.l<c;)this[this.l++]=0;return this}else switch(t){case 1:i=1,this[this.l]=s&255;break;case 2:i=2,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255;break;case 3:i=3,this[this.l]=s&255,s>>>=8,this[this.l+1]=s&255,s>>>=8,this[this.l+2]=s&255;break;case 4:i=4,YB(this,s,this.l);break;case 8:if(i=8,r==="f"){WB(this,s,this.l);break}case 16:break;case-4:i=4,KB(this,s,this.l);break}return this.l+=i,this}function ky(t,s){var r=$y(this,this.l,t.length>>1);if(r!==t)throw new Error(s+"Expected "+t+" saw "+r);this.l+=t.length>>1}function qr(t,s){t.l=s,t.read_shift=Qu,t.chk=ky,t.write_shift=JB}function En(t,s){t.l+=s}function Cr(t){var s=Vo(t);return qr(s,0),s}function eo(t,s,r){if(t){var i,l,c;qr(t,t.l||0);for(var u=t.length,h=0,_=0;t.l<u;){h=t.read_shift(1),h&128&&(h=(h&127)+((t.read_shift(1)&127)<<7));var f=lT[h]||lT[65535];for(i=t.read_shift(1),c=i&127,l=1;l<4&&i&128;++l)c+=((i=t.read_shift(1))&127)<<7*l;_=t.l+c;var T=f.f&&f.f(t,c,r);if(t.l=_,s(T,f,h))return}}}function l$(){var t=[],s=pt?256:2048,r=function(f){var T=Cr(f);return qr(T,0),T},i=r(s),l=function(){i&&(i.length>i.l&&(i=i.slice(0,i.l),i.l=i.length),i.length>0&&t.push(i),i=null)},c=function(f){return i&&f<i.length-i.l?i:(l(),i=r(Math.max(f+1,s)))},u=function(){return l(),Ao(t)},h=function(f){l(),i=f,i.l==null&&(i.l=i.length),c(s)};return{next:c,push:h,end:u,_bufs:t}}function eh(t,s,r){var i=en(t);if(s.s?(i.cRel&&(i.c+=s.s.c),i.rRel&&(i.r+=s.s.r)):(i.cRel&&(i.c+=s.c),i.rRel&&(i.r+=s.r)),!r||r.biff<12){for(;i.c>=256;)i.c-=256;for(;i.r>=65536;)i.r-=65536}return i}function mN(t,s,r){var i=en(t);return i.s=eh(i.s,s.s,r),i.e=eh(i.e,s.s,r),i}function th(t,s){if(t.cRel&&t.c<0)for(t=en(t);t.c<0;)t.c+=s>8?16384:256;if(t.rRel&&t.r<0)for(t=en(t);t.r<0;)t.r+=s>8?1048576:s>5?65536:16384;var r=_t(t);return!t.cRel&&t.cRel!=null&&(r=QB(r)),!t.rRel&&t.rRel!=null&&(r=qB(r)),r}function Y0(t,s){return t.s.r==0&&!t.s.rRel&&t.e.r==(s.biff>=12?1048575:s.biff>=8?65536:16384)&&!t.e.rRel?(t.s.cRel?"":"$")+Ln(t.s.c)+":"+(t.e.cRel?"":"$")+Ln(t.e.c):t.s.c==0&&!t.s.cRel&&t.e.c==(s.biff>=12?16383:255)&&!t.e.cRel?(t.s.rRel?"":"$")+es(t.s.r)+":"+(t.e.rRel?"":"$")+es(t.e.r):th(t.s,s.biff)+":"+th(t.e,s.biff)}function wy(t){return parseInt(ZB(t),10)-1}function es(t){return""+(t+1)}function qB(t){return t.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function ZB(t){return t.replace(/\$(\d+)$/,"$1")}function My(t){for(var s=e2(t),r=0,i=0;i!==s.length;++i)r=26*r+s.charCodeAt(i)-64;return r-1}function Ln(t){if(t<0)throw new Error("invalid column "+t);var s="";for(++t;t;t=Math.floor((t-1)/26))s=String.fromCharCode((t-1)%26+65)+s;return s}function QB(t){return t.replace(/^([A-Z])/,"$$$1")}function e2(t){return t.replace(/^\$([A-Z])/,"$1")}function Gs(t){for(var s=0,r=0,i=0;i<t.length;++i){var l=t.charCodeAt(i);l>=48&&l<=57?s=10*s+(l-48):l>=65&&l<=90&&(r=26*r+(l-64))}return{c:r-1,r:s-1}}function _t(t){for(var s=t.c+1,r="";s;s=(s-1)/26|0)r=String.fromCharCode((s-1)%26+65)+r;return r+(t.r+1)}function xI(t){var s=t.indexOf(":");return s==-1?{s:Gs(t),e:Gs(t)}:{s:Gs(t.slice(0,s)),e:Gs(t.slice(s+1))}}function Ct(t,s){return typeof s>"u"||typeof s=="number"?Ct(t.s,t.e):(typeof t!="string"&&(t=_t(t)),typeof s!="string"&&(s=_t(s)),t==s?t:t+":"+s)}function zr(t){var s={s:{c:0,r:0},e:{c:0,r:0}},r=0,i=0,l=0,c=t.length;for(r=0;i<c&&!((l=t.charCodeAt(i)-64)<1||l>26);++i)r=26*r+l;for(s.s.c=--r,r=0;i<c&&!((l=t.charCodeAt(i)-48)<0||l>9);++i)r=10*r+l;if(s.s.r=--r,i===c||l!=10)return s.e.c=s.s.c,s.e.r=s.s.r,s;for(++i,r=0;i!=c&&!((l=t.charCodeAt(i)-64)<1||l>26);++i)r=26*r+l;for(s.e.c=--r,r=0;i!=c&&!((l=t.charCodeAt(i)-48)<0||l>9);++i)r=10*r+l;return s.e.r=--r,s}function $N(t,s){var r=t.t=="d"&&s instanceof Date;if(t.z!=null)try{return t.w=Ss(t.z,r?ns(s):s)}catch{}try{return t.w=Ss((t.XF||{}).numFmtId||(r?14:0),r?ns(s):s)}catch{return""+s}}function Lc(t,s,r){return t==null||t.t==null||t.t=="z"?"":t.w!==void 0?t.w:(t.t=="d"&&!t.z&&r&&r.dateNF&&(t.z=r.dateNF),t.t=="e"?Zl[t.v]||t.v:s==null?$N(t,t.v):$N(t,s))}function jl(t,s){var r=s&&s.sheet?s.sheet:"Sheet1",i={};return i[r]=t,{SheetNames:[r],Sheets:i}}function t2(t,s,r){var i=r||{},l=t?Array.isArray(t):i.dense,c=t||(l?[]:{}),u=0,h=0;if(c&&i.origin!=null){if(typeof i.origin=="number")u=i.origin;else{var _=typeof i.origin=="string"?Gs(i.origin):i.origin;u=_.r,h=_.c}c["!ref"]||(c["!ref"]="A1:A1")}var f={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(c["!ref"]){var T=zr(c["!ref"]);f.s.c=T.s.c,f.s.r=T.s.r,f.e.c=Math.max(f.e.c,T.e.c),f.e.r=Math.max(f.e.r,T.e.r),u==-1&&(f.e.r=u=T.e.r+1)}for(var E=0;E!=s.length;++E)if(s[E]){if(!Array.isArray(s[E]))throw new Error("aoa_to_sheet expects an array of arrays");for(var g=0;g!=s[E].length;++g)if(!(typeof s[E][g]>"u")){var S={v:s[E][g]},R=u+E,L=h+g;if(f.s.r>R&&(f.s.r=R),f.s.c>L&&(f.s.c=L),f.e.r<R&&(f.e.r=R),f.e.c<L&&(f.e.c=L),s[E][g]&&typeof s[E][g]=="object"&&!Array.isArray(s[E][g])&&!(s[E][g]instanceof Date))S=s[E][g];else if(Array.isArray(S.v)&&(S.f=s[E][g][1],S.v=S.v[0]),S.v===null)if(S.f)S.t="n";else if(i.nullError)S.t="e",S.v=0;else if(i.sheetStubs)S.t="z";else continue;else typeof S.v=="number"?S.t="n":typeof S.v=="boolean"?S.t="b":S.v instanceof Date?(S.z=i.dateNF||dt[14],i.cellDates?(S.t="d",S.w=Ss(S.z,ns(S.v))):(S.t="n",S.v=ns(S.v),S.w=Ss(S.z,S.v))):S.t="s";if(l)c[R]||(c[R]=[]),c[R][L]&&c[R][L].z&&(S.z=c[R][L].z),c[R][L]=S;else{var N=_t({c:L,r:R});c[N]&&c[N].z&&(S.z=c[N].z),c[N]=S}}}return f.s.c<1e7&&(c["!ref"]=Ct(f)),c}function zh(t,s){return t2(null,t,s)}function r2(t){return t.read_shift(4,"i")}function Tn(t){var s=t.read_shift(4);return s===0?"":t.read_shift(s,"dbcs")}function n2(t){return{ich:t.read_shift(2),ifnt:t.read_shift(2)}}function bI(t,s){var r=t.l,i=t.read_shift(1),l=Tn(t),c=[],u={t:l,h:l};if(i&1){for(var h=t.read_shift(4),_=0;_!=h;++_)c.push(n2(t));u.r=c}else u.r=[{ich:0,ifnt:0}];return t.l=r+s,u}var s2=bI;function Rs(t){var s=t.read_shift(4),r=t.read_shift(2);return r+=t.read_shift(1)<<16,t.l++,{c:s,iStyleRef:r}}function Jl(t){var s=t.read_shift(2);return s+=t.read_shift(1)<<16,t.l++,{c:-1,iStyleRef:s}}var i2=Tn;function yI(t){var s=t.read_shift(4);return s===0||s===4294967295?"":t.read_shift(s,"dbcs")}var o2=Tn,a$=yI;function kI(t){var s=t.slice(t.l,t.l+4),r=s[0]&1,i=s[0]&2;t.l+=4;var l=i===0?tT([0,0,0,0,s[0]&252,s[1],s[2],s[3]],0):Rl(s,0)>>2;return r?l/100:l}function Dy(t){var s={s:{},e:{}};return s.s.r=t.read_shift(4),s.e.r=t.read_shift(4),s.s.c=t.read_shift(4),s.e.c=t.read_shift(4),s}var ql=Dy;function _n(t){if(t.length-t.l<8)throw"XLS Xnum Buffer underflow";return t.read_shift(8,"f")}function l2(t){var s={},r=t.read_shift(1),i=r>>>1,l=t.read_shift(1),c=t.read_shift(2,"i"),u=t.read_shift(1),h=t.read_shift(1),_=t.read_shift(1);switch(t.l++,i){case 0:s.auto=1;break;case 1:s.index=l;var f=kl[l];f&&(s.rgb=kh(f));break;case 2:s.rgb=kh([u,h,_]);break;case 3:s.theme=l;break}return c!=0&&(s.tint=c>0?c/32767:c/32768),s}function a2(t){var s=t.read_shift(1);t.l++;var r={fBold:s&1,fItalic:s&2,fUnderline:s&4,fStrikeout:s&8,fOutline:s&16,fShadow:s&32,fCondense:s&64,fExtend:s&128};return r}function Py(t,s){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},i=t.read_shift(4);switch(i){case 0:return"";case 4294967295:case 4294967294:return r[t.read_shift(4)]||""}if(i>400)throw new Error("Unsupported Clipboard: "+i.toString(16));return t.l-=4,t.read_shift(0,s==1?"lpstr":"lpwstr")}function c2(t){return Py(t,1)}function u2(t){return Py(t,2)}var wI=2,kn=3,nf=11,IN=12,rT=19,sf=64,h2=65,d2=71,_2=4108,f2=4126,Gr=80,Fy=81,T2=[Gr,Fy],p2={1:{n:"CodePage",t:wI},2:{n:"Category",t:Gr},3:{n:"PresentationFormat",t:Gr},4:{n:"ByteCount",t:kn},5:{n:"LineCount",t:kn},6:{n:"ParagraphCount",t:kn},7:{n:"SlideCount",t:kn},8:{n:"NoteCount",t:kn},9:{n:"HiddenCount",t:kn},10:{n:"MultimediaClipCount",t:kn},11:{n:"ScaleCrop",t:nf},12:{n:"HeadingPairs",t:_2},13:{n:"TitlesOfParts",t:f2},14:{n:"Manager",t:Gr},15:{n:"Company",t:Gr},16:{n:"LinksUpToDate",t:nf},17:{n:"CharacterCount",t:kn},19:{n:"SharedDoc",t:nf},22:{n:"HyperlinksChanged",t:nf},23:{n:"AppVersion",t:kn,p:"version"},24:{n:"DigSig",t:h2},26:{n:"ContentType",t:Gr},27:{n:"ContentStatus",t:Gr},28:{n:"Language",t:Gr},29:{n:"Version",t:Gr},255:{},2147483648:{n:"Locale",t:rT},2147483651:{n:"Behavior",t:rT},1919054434:{}},E2={1:{n:"CodePage",t:wI},2:{n:"Title",t:Gr},3:{n:"Subject",t:Gr},4:{n:"Author",t:Gr},5:{n:"Keywords",t:Gr},6:{n:"Comments",t:Gr},7:{n:"Template",t:Gr},8:{n:"LastAuthor",t:Gr},9:{n:"RevNumber",t:Gr},10:{n:"EditTime",t:sf},11:{n:"LastPrinted",t:sf},12:{n:"CreatedDate",t:sf},13:{n:"ModifiedDate",t:sf},14:{n:"PageCount",t:kn},15:{n:"WordCount",t:kn},16:{n:"CharCount",t:kn},17:{n:"Thumbnail",t:d2},18:{n:"Application",t:Gr},19:{n:"DocSecurity",t:kn},255:{},2147483648:{n:"Locale",t:rT},2147483651:{n:"Behavior",t:rT},1919054434:{}},ON={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},g2=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function m2(t){return t.map(function(s){return[s>>16&255,s>>8&255,s&255]})}var $2=m2([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),kl=en($2),Zl={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},By={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},SN={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"};function I2(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function O2(t){var s=I2();if(!t||!t.match)return s;var r={};if((t.match(gn)||[]).forEach(function(i){var l=st(i);switch(l[0].replace(yB,"<")){case"<?xml":break;case"<Types":s.xmlns=l["xmlns"+(l[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[l.Extension]=l.ContentType;break;case"<Override":s[SN[l.ContentType]]!==void 0&&s[SN[l.ContentType]].push(l.PartName);break}}),s.xmlns!==HB.CT)throw new Error("Unknown Namespace: "+s.xmlns);return s.calcchain=s.calcchains.length>0?s.calcchains[0]:"",s.sst=s.strs.length>0?s.strs[0]:"",s.style=s.styles.length>0?s.styles[0]:"",s.defaults=r,delete s.calcchains,s}var rc={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function c$(t){var s=t.lastIndexOf("/");return t.slice(0,s+1)+"_rels/"+t.slice(s+1)+".rels"}function rh(t,s){var r={"!id":{}};if(!t)return r;s.charAt(0)!=="/"&&(s="/"+s);var i={};return(t.match(gn)||[]).forEach(function(l){var c=st(l);if(c[0]==="<Relationship"){var u={};u.Type=c.Type,u.Target=c.Target,u.Id=c.Id,c.TargetMode&&(u.TargetMode=c.TargetMode);var h=c.TargetMode==="External"?c.Target:Hu(c.Target,s);r[h]=u,i[c.Id]=u}}),r["!id"]=i,r}var S2="application/vnd.oasis.opendocument.spreadsheet";function R2(t,s){for(var r=vI(t),i,l;i=bh.exec(r);)switch(i[3]){case"manifest":break;case"file-entry":if(l=st(i[0],!1),l.path=="/"&&l.type!==S2)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(s&&s.WTF)throw i}}var nh=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],L2=function(){for(var t=new Array(nh.length),s=0;s<nh.length;++s){var r=nh[s],i="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);t[s]=new RegExp("<"+i+"[^>]*>([\\s\\S]*?)</"+i+">")}return t}();function Uy(t){var s={};t=Ft(t);for(var r=0;r<nh.length;++r){var i=nh[r],l=t.match(L2[r]);l!=null&&l.length>0&&(s[i[1]]=$t(l[1])),i[2]==="date"&&s[i[1]]&&(s[i[1]]=Qr(s[i[1]]))}return s}var A2=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]];function Hy(t,s,r,i){var l=[];if(typeof t=="string")l=_N(t,i);else for(var c=0;c<t.length;++c)l=l.concat(t[c].map(function(T){return{v:T}}));var u=typeof s=="string"?_N(s,i).map(function(T){return T.v}):s,h=0,_=0;if(u.length>0)for(var f=0;f!==l.length;f+=2){switch(_=+l[f+1].v,l[f].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=_,r.SheetNames=u.slice(h,h+_);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=_,r.DefinedNames=u.slice(h,h+_);break;case"Charts":case"Diagramme":r.Chartsheets=_,r.ChartNames=u.slice(h,h+_);break}h+=_}}function C2(t,s,r){var i={};return s||(s={}),t=Ft(t),A2.forEach(function(l){var c=(t.match(xh(l[0]))||[])[1];switch(l[2]){case"string":c&&(s[l[1]]=$t(c));break;case"bool":s[l[1]]=c==="true";break;case"raw":var u=t.match(new RegExp("<"+l[0]+"[^>]*>([\\s\\S]*?)</"+l[0]+">"));u&&u.length>0&&(i[l[1]]=u[1]);break}}),i.HeadingPairs&&i.TitlesOfParts&&Hy(i.HeadingPairs,i.TitlesOfParts,s,r),s}var v2=/<[^>]+>[^<]*/g;function N2(t,s){var r={},i="",l=t.match(v2);if(l)for(var c=0;c!=l.length;++c){var u=l[c],h=st(u);switch(h[0]){case"<?xml":break;case"<Properties":break;case"<property":i=$t(h.name);break;case"</property>":i=null;break;default:if(u.indexOf("<vt:")===0){var _=u.split(">"),f=_[0].slice(4),T=_[1];switch(f){case"lpstr":case"bstr":case"lpwstr":r[i]=$t(T);break;case"bool":r[i]=Kt(T);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[i]=parseInt(T,10);break;case"r4":case"r8":case"decimal":r[i]=parseFloat(T);break;case"filetime":case"date":r[i]=Qr(T);break;case"cy":case"error":r[i]=$t(T);break;default:if(f.slice(-1)=="/")break;s.WTF&&typeof console<"u"&&console.warn("Unexpected",u,f,_)}}else if(u.slice(0,2)!=="</"){if(s.WTF)throw new Error(u)}}}return r}var x2={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},K0;function b2(t,s,r){K0||(K0=AI(x2)),s=K0[s]||s,t[s]=r}function MI(t){var s=t.read_shift(4),r=t.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+s/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function Gy(t,s,r){var i=t.l,l=t.read_shift(0,"lpstr-cp");if(r)for(;t.l-i&3;)++t.l;return l}function Vy(t,s,r){var i=t.read_shift(0,"lpwstr");return i}function Wy(t,s,r){return s===31?Vy(t):Gy(t,s,r)}function u$(t,s,r){return Wy(t,s,r===!1?0:4)}function y2(t,s){if(!s)throw new Error("VtUnalignedString must have positive length");return Wy(t,s,0)}function k2(t){for(var s=t.read_shift(4),r=[],i=0;i!=s;++i){var l=t.l;r[i]=t.read_shift(0,"lpwstr").replace(Cn,""),t.l-l&2&&(t.l+=2)}return r}function w2(t){for(var s=t.read_shift(4),r=[],i=0;i!=s;++i)r[i]=t.read_shift(0,"lpstr-cp").replace(Cn,"");return r}function M2(t){var s=t.l,r=nT(t,Fy);t[t.l]==0&&t[t.l+1]==0&&t.l-s&2&&(t.l+=2);var i=nT(t,kn);return[r,i]}function D2(t){for(var s=t.read_shift(4),r=[],i=0;i<s/2;++i)r.push(M2(t));return r}function RN(t,s){for(var r=t.read_shift(4),i={},l=0;l!=r;++l){var c=t.read_shift(4),u=t.read_shift(4);i[c]=t.read_shift(u,s===1200?"utf16le":"utf8").replace(Cn,"").replace(Uu,"!"),s===1200&&u%2&&(t.l+=2)}return t.l&3&&(t.l=t.l>>3<<2),i}function Xy(t){var s=t.read_shift(4),r=t.slice(t.l,t.l+s);return t.l+=s,(s&3)>0&&(t.l+=4-(s&3)&3),r}function P2(t){var s={};return s.Size=t.read_shift(4),t.l+=s.Size+3-(s.Size-1)%4,s}function nT(t,s,r){var i=t.read_shift(2),l,c=r||{};if(t.l+=2,s!==IN&&i!==s&&T2.indexOf(s)===-1&&!((s&65534)==4126&&(i&65534)==4126))throw new Error("Expected type "+s+" saw "+i);switch(s===IN?i:s){case 2:return l=t.read_shift(2,"i"),c.raw||(t.l+=2),l;case 3:return l=t.read_shift(4,"i"),l;case 11:return t.read_shift(4)!==0;case 19:return l=t.read_shift(4),l;case 30:return Gy(t,i,4).replace(Cn,"");case 31:return Vy(t);case 64:return MI(t);case 65:return Xy(t);case 71:return P2(t);case 80:return u$(t,i,!c.raw).replace(Cn,"");case 81:return y2(t,i).replace(Cn,"");case 4108:return D2(t);case 4126:case 4127:return i==4127?k2(t):w2(t);default:throw new Error("TypedPropertyValue unrecognized type "+s+" "+i)}}function LN(t,s){var r=t.l,i=t.read_shift(4),l=t.read_shift(4),c=[],u=0,h=0,_=-1,f={};for(u=0;u!=l;++u){var T=t.read_shift(4),E=t.read_shift(4);c[u]=[T,E+r]}c.sort(function(A,I){return A[1]-I[1]});var g={};for(u=0;u!=l;++u){if(t.l!==c[u][1]){var S=!0;if(u>0&&s)switch(s[c[u-1][0]].t){case 2:t.l+2===c[u][1]&&(t.l+=2,S=!1);break;case 80:t.l<=c[u][1]&&(t.l=c[u][1],S=!1);break;case 4108:t.l<=c[u][1]&&(t.l=c[u][1],S=!1);break}if((!s||u==0)&&t.l<=c[u][1]&&(S=!1,t.l=c[u][1]),S)throw new Error("Read Error: Expected address "+c[u][1]+" at "+t.l+" :"+u)}if(s){var R=s[c[u][0]];if(g[R.n]=nT(t,R.t,{raw:!0}),R.p==="version"&&(g[R.n]=String(g[R.n]>>16)+"."+("0000"+String(g[R.n]&65535)).slice(-4)),R.n=="CodePage")switch(g[R.n]){case 0:g[R.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Us(h=g[R.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+g[R.n])}}else if(c[u][0]===1){if(h=g.CodePage=nT(t,wI),Us(h),_!==-1){var L=t.l;t.l=c[_][1],f=RN(t,h),t.l=L}}else if(c[u][0]===0){if(h===0){_=u,t.l=c[u+1][1];continue}f=RN(t,h)}else{var N=f[c[u][0]],C;switch(t[t.l]){case 65:t.l+=4,C=Xy(t);break;case 30:t.l+=4,C=u$(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 31:t.l+=4,C=u$(t,t[t.l-4]).replace(/\u0000+$/,"");break;case 3:t.l+=4,C=t.read_shift(4,"i");break;case 19:t.l+=4,C=t.read_shift(4);break;case 5:t.l+=4,C=t.read_shift(8,"f");break;case 11:t.l+=4,C=fr(t,4);break;case 64:t.l+=4,C=Qr(MI(t));break;default:throw new Error("unparsed value: "+t[t.l])}g[N]=C}}return t.l=r+i,g}function AN(t,s,r){var i=t.content;if(!i)return{};qr(i,0);var l,c,u,h,_=0;i.chk("feff","Byte Order: "),i.read_shift(2);var f=i.read_shift(4),T=i.read_shift(16);if(T!==Et.utils.consts.HEADER_CLSID&&T!==r)throw new Error("Bad PropertySet CLSID "+T);if(l=i.read_shift(4),l!==1&&l!==2)throw new Error("Unrecognized #Sets: "+l);if(c=i.read_shift(16),h=i.read_shift(4),l===1&&h!==i.l)throw new Error("Length mismatch: "+h+" !== "+i.l);l===2&&(u=i.read_shift(16),_=i.read_shift(4));var E=LN(i,s),g={SystemIdentifier:f};for(var S in E)g[S]=E[S];if(g.FMTID=c,l===1)return g;if(_-i.l==2&&(i.l+=2),i.l!==_)throw new Error("Length mismatch 2: "+i.l+" !== "+_);var R;try{R=LN(i,null)}catch{}for(S in R)g[S]=R[S];return g.FMTID=[c,u],g}function mo(t,s){return t.read_shift(s),null}function F2(t,s,r){for(var i=[],l=t.l+s;t.l<l;)i.push(r(t,l-t.l));if(l!==t.l)throw new Error("Slurp error");return i}function fr(t,s){return t.read_shift(s)===1}function Ir(t){return t.read_shift(2,"u")}function zy(t,s){return F2(t,s,Ir)}function B2(t){var s=t.read_shift(1),r=t.read_shift(1);return r===1?s:s===1}function Yh(t,s,r){var i=t.read_shift(r&&r.biff>=12?2:1),l="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var c=t.read_shift(1);c&&(l="dbcs-cont")}else r.biff==12&&(l="wstr");r.biff>=2&&r.biff<=5&&(l="cpstr");var u=i?t.read_shift(i,l):"";return u}function U2(t){var s=t.read_shift(2),r=t.read_shift(1),i=r&4,l=r&8,c=1+(r&1),u=0,h,_={};l&&(u=t.read_shift(2)),i&&(h=t.read_shift(4));var f=c==2?"dbcs-cont":"sbcs-cont",T=s===0?"":t.read_shift(s,f);return l&&(t.l+=4*u),i&&(t.l+=h),_.t=T,l||(_.raw="<t>"+_.t+"</t>",_.r=_.t),_}function Gl(t,s,r){var i;if(r){if(r.biff>=2&&r.biff<=5)return t.read_shift(s,"cpstr");if(r.biff>=12)return t.read_shift(s,"dbcs-cont")}var l=t.read_shift(1);return l===0?i=t.read_shift(s,"sbcs-cont"):i=t.read_shift(s,"dbcs-cont"),i}function Kh(t,s,r){var i=t.read_shift(r&&r.biff==2?1:2);return i===0?(t.l++,""):Gl(t,i,r)}function Ql(t,s,r){if(r.biff>5)return Kh(t,s,r);var i=t.read_shift(1);return i===0?(t.l++,""):t.read_shift(i,r.biff<=4||!t.lens?"cpstr":"sbcs-cont")}function H2(t){var s=t.read_shift(1);t.l++;var r=t.read_shift(2);return t.l+=2,[s,r]}function G2(t){var s=t.read_shift(4),r=t.l,i=!1;s>24&&(t.l+=s-24,t.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(i=!0),t.l=r);var l=t.read_shift((i?s-24:s)>>1,"utf16le").replace(Cn,"");return i&&(t.l+=24),l}function V2(t){for(var s=t.read_shift(2),r="";s-- >0;)r+="../";var i=t.read_shift(0,"lpstr-ansi");if(t.l+=2,t.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var l=t.read_shift(4);if(l===0)return r+i.replace(/\\/g,"/");var c=t.read_shift(4);if(t.read_shift(2)!=3)throw new Error("Bad FileMoniker");var u=t.read_shift(c>>1,"utf16le").replace(Cn,"");return r+u}function W2(t,s){var r=t.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return G2(t);case"0303000000000000c000000000000046":return V2(t);default:throw new Error("Unsupported Moniker "+r)}}function of(t){var s=t.read_shift(4),r=s>0?t.read_shift(s,"utf16le").replace(Cn,""):"";return r}function X2(t,s){var r=t.l+s,i=t.read_shift(4);if(i!==2)throw new Error("Unrecognized streamVersion: "+i);var l=t.read_shift(2);t.l+=2;var c,u,h,_,f="",T,E;l&16&&(c=of(t,r-t.l)),l&128&&(u=of(t,r-t.l)),(l&257)===257&&(h=of(t,r-t.l)),(l&257)===1&&(_=W2(t,r-t.l)),l&8&&(f=of(t,r-t.l)),l&32&&(T=t.read_shift(16)),l&64&&(E=MI(t)),t.l=r;var g=u||h||_||"";g&&f&&(g+="#"+f),g||(g="#"+f),l&2&&g.charAt(0)=="/"&&g.charAt(1)!="/"&&(g="file://"+g);var S={Target:g};return T&&(S.guid=T),E&&(S.time=E),c&&(S.Tooltip=c),S}function Yy(t){var s=t.read_shift(1),r=t.read_shift(1),i=t.read_shift(1),l=t.read_shift(1);return[s,r,i,l]}function Ky(t,s){var r=Yy(t);return r[3]=0,r}function Ii(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return{r:s,c:r,ixfe:i}}function z2(t){var s=t.read_shift(2),r=t.read_shift(2);return t.l+=8,{type:s,flags:r}}function Y2(t,s,r){return s===0?"":Ql(t,s,r)}function K2(t,s,r){var i=r.biff>8?4:2,l=t.read_shift(i),c=t.read_shift(i,"i"),u=t.read_shift(i,"i");return[l,c,u]}function jy(t){var s=t.read_shift(2),r=kI(t);return[s,r]}function j2(t,s,r){t.l+=4,s-=4;var i=t.l+s,l=Yh(t,s,r),c=t.read_shift(2);if(i-=t.l,c!==i)throw new Error("Malformed AddinUdf: padding = "+i+" != "+c);return t.l+=c,l}function AT(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2);return{s:{c:i,r:s},e:{c:l,r}}}function Jy(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(1),l=t.read_shift(1);return{s:{c:i,r:s},e:{c:l,r}}}var J2=Jy;function qy(t){t.l+=4;var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2);return t.l+=12,[r,s,i]}function q2(t){var s={};return t.l+=4,t.l+=16,s.fSharedNote=t.read_shift(2),t.l+=4,s}function Z2(t){var s={};return t.l+=4,t.cf=t.read_shift(2),s}function un(t){t.l+=2,t.l+=t.read_shift(2)}var Q2={0:un,4:un,5:un,6:un,7:Z2,8:un,9:un,10:un,11:un,12:un,13:q2,14:un,15:un,16:un,17:un,18:un,19:un,20:un,21:qy};function eU(t,s){for(var r=t.l+s,i=[];t.l<r;){var l=t.read_shift(2);t.l-=2;try{i.push(Q2[l](t,r-t.l))}catch{return t.l=r,i}}return t.l!=r&&(t.l=r),i}function lf(t,s){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=t.read_shift(2),s-=2,s>=2&&(r.dt=t.read_shift(2),t.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(s>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return t.read_shift(s),r}function tU(t,s){return s===0||t.read_shift(2),1200}function rU(t,s,r){if(r.enc)return t.l+=s,"";var i=t.l,l=Ql(t,0,r);return t.read_shift(s+i-t.l),l}function nU(t,s,r){var i=r&&r.biff==8||s==2?t.read_shift(2):(t.l+=s,0);return{fDialog:i&16,fBelow:i&64,fRight:i&128}}function sU(t,s,r){var i=t.read_shift(4),l=t.read_shift(1)&3,c=t.read_shift(1);switch(c){case 0:c="Worksheet";break;case 1:c="Macrosheet";break;case 2:c="Chartsheet";break;case 6:c="VBAModule";break}var u=Yh(t,0,r);return u.length===0&&(u="Sheet1"),{pos:i,hs:l,dt:c,name:u}}function iU(t,s){for(var r=t.l+s,i=t.read_shift(4),l=t.read_shift(4),c=[],u=0;u!=l&&t.l<r;++u)c.push(U2(t));return c.Count=i,c.Unique=l,c}function oU(t,s){var r={};return r.dsst=t.read_shift(2),t.l+=s-2,r}function lU(t){var s={};s.r=t.read_shift(2),s.c=t.read_shift(2),s.cnt=t.read_shift(2)-s.c;var r=t.read_shift(2);t.l+=4;var i=t.read_shift(1);return t.l+=3,i&7&&(s.level=i&7),i&32&&(s.hidden=!0),i&64&&(s.hpt=r/20),s}function aU(t){var s=z2(t);if(s.type!=2211)throw new Error("Invalid Future Record "+s.type);var r=t.read_shift(4);return r!==0}function cU(t){return t.read_shift(2),t.read_shift(4)}function CN(t,s,r){var i=0;r&&r.biff==2||(i=t.read_shift(2));var l=t.read_shift(2);r&&r.biff==2&&(i=1-(l>>15),l&=32767);var c={Unsynced:i&1,DyZero:(i&2)>>1,ExAsc:(i&4)>>2,ExDsc:(i&8)>>3};return[c,l]}function uU(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2),h=t.read_shift(2),_=t.read_shift(2),f=t.read_shift(2);return{Pos:[s,r],Dim:[i,l],Flags:c,CurTab:u,FirstTab:h,Selected:_,TabRatio:f}}function hU(t,s,r){if(r&&r.biff>=2&&r.biff<5)return{};var i=t.read_shift(2);return{RTL:i&64}}function dU(){}function _U(t,s,r){var i={dyHeight:t.read_shift(2),fl:t.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:t.l+=2;break;default:t.l+=10;break}return i.name=Yh(t,0,r),i}function fU(t){var s=Ii(t);return s.isst=t.read_shift(4),s}function TU(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=t.l+s,l=Ii(t);r.biff==2&&t.l++;var c=Kh(t,i-t.l,r);return l.val=c,l}function pU(t,s,r){var i=t.read_shift(2),l=Ql(t,0,r);return[i,l]}var EU=Ql;function vN(t,s,r){var i=t.l+s,l=r.biff==8||!r.biff?4:2,c=t.read_shift(l),u=t.read_shift(l),h=t.read_shift(2),_=t.read_shift(2);return t.l=i,{s:{r:c,c:h},e:{r:u,c:_}}}function gU(t){var s=t.read_shift(2),r=t.read_shift(2),i=jy(t);return{r:s,c:r,ixfe:i[0],rknum:i[1]}}function mU(t,s){for(var r=t.l+s-2,i=t.read_shift(2),l=t.read_shift(2),c=[];t.l<r;)c.push(jy(t));if(t.l!==r)throw new Error("MulRK read error");var u=t.read_shift(2);if(c.length!=u-l+1)throw new Error("MulRK length mismatch");return{r:i,c:l,C:u,rkrec:c}}function $U(t,s){for(var r=t.l+s-2,i=t.read_shift(2),l=t.read_shift(2),c=[];t.l<r;)c.push(t.read_shift(2));if(t.l!==r)throw new Error("MulBlank read error");var u=t.read_shift(2);if(c.length!=u-l+1)throw new Error("MulBlank length mismatch");return{r:i,c:l,C:u,ixfe:c}}function IU(t,s,r,i){var l={},c=t.read_shift(4),u=t.read_shift(4),h=t.read_shift(4),_=t.read_shift(2);return l.patternType=g2[h>>26],i.cellStyles&&(l.alc=c&7,l.fWrap=c>>3&1,l.alcV=c>>4&7,l.fJustLast=c>>7&1,l.trot=c>>8&255,l.cIndent=c>>16&15,l.fShrinkToFit=c>>20&1,l.iReadOrder=c>>22&2,l.fAtrNum=c>>26&1,l.fAtrFnt=c>>27&1,l.fAtrAlc=c>>28&1,l.fAtrBdr=c>>29&1,l.fAtrPat=c>>30&1,l.fAtrProt=c>>31&1,l.dgLeft=u&15,l.dgRight=u>>4&15,l.dgTop=u>>8&15,l.dgBottom=u>>12&15,l.icvLeft=u>>16&127,l.icvRight=u>>23&127,l.grbitDiag=u>>30&3,l.icvTop=h&127,l.icvBottom=h>>7&127,l.icvDiag=h>>14&127,l.dgDiag=h>>21&15,l.icvFore=_&127,l.icvBack=_>>7&127,l.fsxButton=_>>14&1),l}function OU(t,s,r){var i={};return i.ifnt=t.read_shift(2),i.numFmtId=t.read_shift(2),i.flags=t.read_shift(2),i.fStyle=i.flags>>2&1,s-=6,i.data=IU(t,s,i.fStyle,r),i}function SU(t){t.l+=4;var s=[t.read_shift(2),t.read_shift(2)];if(s[0]!==0&&s[0]--,s[1]!==0&&s[1]--,s[0]>7||s[1]>7)throw new Error("Bad Gutters: "+s.join("|"));return s}function NN(t,s,r){var i=Ii(t);(r.biff==2||s==9)&&++t.l;var l=B2(t);return i.val=l,i.t=l===!0||l===!1?"b":"e",i}function RU(t,s,r){r.biffguess&&r.biff==2&&(r.biff=5);var i=Ii(t),l=_n(t);return i.val=l,i}var xN=Y2;function LU(t,s,r){var i=t.l+s,l=t.read_shift(2),c=t.read_shift(2);if(r.sbcch=c,c==1025||c==14849)return[c,l];if(c<1||c>255)throw new Error("Unexpected SupBook type: "+c);for(var u=Gl(t,c),h=[];i>t.l;)h.push(Kh(t));return[c,l,u,h]}function bN(t,s,r){var i=t.read_shift(2),l,c={fBuiltIn:i&1,fWantAdvise:i>>>1&1,fWantPict:i>>>2&1,fOle:i>>>3&1,fOleLink:i>>>4&1,cf:i>>>5&1023,fIcon:i>>>15&1};return r.sbcch===14849&&(l=j2(t,s-2,r)),c.body=l||t.read_shift(s-2),typeof l=="string"&&(c.Name=l),c}var AU=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function yN(t,s,r){var i=t.l+s,l=t.read_shift(2),c=t.read_shift(1),u=t.read_shift(1),h=t.read_shift(r&&r.biff==2?1:2),_=0;(!r||r.biff>=5)&&(r.biff!=5&&(t.l+=2),_=t.read_shift(2),r.biff==5&&(t.l+=2),t.l+=4);var f=Gl(t,u,r);l&32&&(f=AU[f.charCodeAt(0)]);var T=i-t.l;r&&r.biff==2&&--T;var E=i==t.l||h===0||!(T>0)?[]:lV(t,T,r,h);return{chKey:c,Name:f,itab:_,rgce:E}}function Zy(t,s,r){if(r.biff<8)return CU(t,s,r);for(var i=[],l=t.l+s,c=t.read_shift(r.biff>8?4:2);c--!==0;)i.push(K2(t,r.biff>8?12:6,r));if(t.l!=l)throw new Error("Bad ExternSheet: "+t.l+" != "+l);return i}function CU(t,s,r){t[t.l+1]==3&&t[t.l]++;var i=Yh(t,s,r);return i.charCodeAt(0)==3?i.slice(1):i}function vU(t,s,r){if(r.biff<8){t.l+=s;return}var i=t.read_shift(2),l=t.read_shift(2),c=Gl(t,i,r),u=Gl(t,l,r);return[c,u]}function NU(t,s,r){var i=Jy(t);t.l++;var l=t.read_shift(1);return s-=8,[aV(t,s,r),l,i]}function kN(t,s,r){var i=J2(t);switch(r.biff){case 2:t.l++,s-=7;break;case 3:case 4:t.l+=2,s-=8;break;default:t.l+=6,s-=12}return[i,iV(t,s,r)]}function xU(t){var s=t.read_shift(4)!==0,r=t.read_shift(4)!==0,i=t.read_shift(4);return[s,r,i]}function bU(t,s,r){if(!(r.biff<8)){var i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2),u=t.read_shift(2),h=Ql(t,0,r);return r.biff<8&&t.read_shift(1),[{r:i,c:l},h,u,c]}}function yU(t,s,r){return bU(t,s,r)}function kU(t,s){for(var r=[],i=t.read_shift(2);i--;)r.push(AT(t));return r}function wU(t,s,r){if(r&&r.biff<8)return DU(t,s,r);var i=qy(t),l=eU(t,s-22,i[1]);return{cmo:i,ft:l}}var MU={8:function(t,s){var r=t.l+s;t.l+=10;var i=t.read_shift(2);t.l+=4,t.l+=2,t.l+=2,t.l+=2,t.l+=4;var l=t.read_shift(1);return t.l+=l,t.l=r,{fmt:i}}};function DU(t,s,r){t.l+=4;var i=t.read_shift(2),l=t.read_shift(2),c=t.read_shift(2);t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=2,t.l+=6,s-=36;var u=[];return u.push((MU[i]||En)(t,s,r)),{cmo:[l,i,c],ft:u}}function PU(t,s,r){var i=t.l,l="";try{t.l+=4;var c=(r.lastobj||{cmo:[0,0]}).cmo[1],u;[0,5,7,11,12,14].indexOf(c)==-1?t.l+=6:u=H2(t,6,r);var h=t.read_shift(2);t.read_shift(2),Ir(t,2);var _=t.read_shift(2);t.l+=_;for(var f=1;f<t.lens.length-1;++f){if(t.l-i!=t.lens[f])throw new Error("TxO: bad continue record");var T=t[t.l],E=Gl(t,t.lens[f+1]-t.lens[f]-1);if(l+=E,l.length>=(T?h:2*h))break}if(l.length!==h&&l.length!==h*2)throw new Error("cchText: "+h+" != "+l.length);return t.l=i+s,{t:l}}catch{return t.l=i+s,{t:l}}}function FU(t,s){var r=AT(t);t.l+=16;var i=X2(t,s-24);return[r,i]}function BU(t,s){t.read_shift(2);var r=AT(t),i=t.read_shift((s-10)/2,"dbcs-cont");return i=i.replace(Cn,""),[r,i]}function UU(t){var s=[0,0],r;return r=t.read_shift(2),s[0]=ON[r]||r,r=t.read_shift(2),s[1]=ON[r]||r,s}function HU(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(Ky(t));return r}function GU(t){for(var s=t.read_shift(2),r=[];s-- >0;)r.push(Ky(t));return r}function VU(t){t.l+=2;var s={cxfs:0,crc:0};return s.cxfs=t.read_shift(2),s.crc=t.read_shift(4),s}function Qy(t,s,r){if(!r.cellStyles)return En(t,s);var i=r&&r.biff>=12?4:2,l=t.read_shift(i),c=t.read_shift(i),u=t.read_shift(i),h=t.read_shift(i),_=t.read_shift(2);i==2&&(t.l+=2);var f={s:l,e:c,w:u,ixfe:h,flags:_};return(r.biff>=5||!r.biff)&&(f.level=_>>8&7),f}function WU(t,s){var r={};return s<32||(t.l+=16,r.header=_n(t),r.footer=_n(t),t.l+=2),r}function XU(t,s,r){var i={area:!1};if(r.biff!=5)return t.l+=s,i;var l=t.read_shift(1);return t.l+=3,l&16&&(i.area=!0),i}var zU=Ii,YU=zy,KU=Kh;function jU(t){var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(4),l={fmt:s,env:r,len:i,data:t.slice(t.l,t.l+i)};return t.l+=i,l}function JU(t,s,r){r.biffguess&&r.biff==5&&(r.biff=2);var i=Ii(t);++t.l;var l=Ql(t,s-7,r);return i.t="str",i.val=l,i}function qU(t){var s=Ii(t);++t.l;var r=_n(t);return s.t="n",s.val=r,s}function ZU(t){var s=Ii(t);++t.l;var r=t.read_shift(2);return s.t="n",s.val=r,s}function QU(t){var s=t.read_shift(1);return s===0?(t.l++,""):t.read_shift(s,"sbcs-cont")}function eH(t,s){t.l+=6,t.l+=2,t.l+=1,t.l+=3,t.l+=1,t.l+=s-13}function tH(t,s,r){var i=t.l+s,l=Ii(t),c=t.read_shift(2),u=Gl(t,c,r);return t.l=i,l.t="str",l.val=u,l}var rH=[2,3,48,49,131,139,140,245],wN=function(){var t={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},s=AI({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(h,_){var f=[],T=Vo(1);switch(_.type){case"base64":T=Fs(rs(h));break;case"binary":T=Fs(h);break;case"buffer":case"array":T=h;break}qr(T,0);var E=T.read_shift(1),g=!!(E&136),S=!1,R=!1;switch(E){case 2:break;case 3:break;case 48:S=!0,g=!0;break;case 49:S=!0,g=!0;break;case 131:break;case 139:break;case 140:R=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+E.toString(16))}var L=0,N=521;E==2&&(L=T.read_shift(2)),T.l+=3,E!=2&&(L=T.read_shift(4)),L>1048576&&(L=1e6),E!=2&&(N=T.read_shift(2));var C=T.read_shift(2),A=_.codepage||1252;E!=2&&(T.l+=16,T.read_shift(1),T[T.l]!==0&&(A=t[T[T.l]]),T.l+=1,T.l+=2),R&&(T.l+=36);for(var I=[],k={},H=Math.min(T.length,E==2?521:N-10-(S?264:0)),G=R?32:11;T.l<H&&T[T.l]!=13;)switch(k={},k.name=Ch.utils.decode(A,T.slice(T.l,T.l+G)).replace(/[\u0000\r\n].*$/g,""),T.l+=G,k.type=String.fromCharCode(T.read_shift(1)),E!=2&&!R&&(k.offset=T.read_shift(4)),k.len=T.read_shift(1),E==2&&(k.offset=T.read_shift(2)),k.dec=T.read_shift(1),k.name.length&&I.push(k),E!=2&&(T.l+=R?13:14),k.type){case"B":(!S||k.len!=8)&&_.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"G":case"P":_.WTF&&console.log("Skipping "+k.name+":"+k.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+k.type)}if(T[T.l]!==13&&(T.l=N-1),T.read_shift(1)!==13)throw new Error("DBF Terminator not found "+T.l+" "+T[T.l]);T.l=N;var x=0,U=0;for(f[0]=[],U=0;U!=I.length;++U)f[0][U]=I[U].name;for(;L-- >0;){if(T[T.l]===42){T.l+=C;continue}for(++T.l,f[++x]=[],U=0,U=0;U!=I.length;++U){var B=T.slice(T.l,T.l+I[U].len);T.l+=I[U].len,qr(B,0);var re=Ch.utils.decode(A,B);switch(I[U].type){case"C":re.trim().length&&(f[x][U]=re.replace(/\s+$/,""));break;case"D":re.length===8?f[x][U]=new Date(+re.slice(0,4),+re.slice(4,6)-1,+re.slice(6,8)):f[x][U]=re;break;case"F":f[x][U]=parseFloat(re.trim());break;case"+":case"I":f[x][U]=R?B.read_shift(-4,"i")^2147483648:B.read_shift(4,"i");break;case"L":switch(re.trim().toUpperCase()){case"Y":case"T":f[x][U]=!0;break;case"N":case"F":f[x][U]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+re+"|")}break;case"M":if(!g)throw new Error("DBF Unexpected MEMO for type "+E.toString(16));f[x][U]="##MEMO##"+(R?parseInt(re.trim(),10):B.read_shift(4));break;case"N":re=re.replace(/\u0000/g,"").trim(),re&&re!="."&&(f[x][U]=+re||0);break;case"@":f[x][U]=new Date(B.read_shift(-8,"f")-621356832e5);break;case"T":f[x][U]=new Date((B.read_shift(4)-2440588)*864e5+B.read_shift(4));break;case"Y":f[x][U]=B.read_shift(4,"i")/1e4+B.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":f[x][U]=-B.read_shift(-8,"f");break;case"B":if(S&&I[U].len==8){f[x][U]=B.read_shift(8,"f");break}case"G":case"P":B.l+=I[U].len;break;case"0":if(I[U].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+I[U].type)}}}if(E!=2&&T.l<T.length&&T[T.l++]!=26)throw new Error("DBF EOF Marker missing "+(T.l-1)+" of "+T.length+" "+T[T.l-1].toString(16));return _&&_.sheetRows&&(f=f.slice(0,_.sheetRows)),_.DBF=I,f}function i(h,_){var f=_||{};f.dateNF||(f.dateNF="yyyymmdd");var T=zh(r(h,f),f);return T["!cols"]=f.DBF.map(function(E){return{wch:E.len,DBF:E}}),delete f.DBF,T}function l(h,_){try{return jl(i(h,_),_)}catch(f){if(_&&_.WTF)throw f}return{SheetNames:[],Sheets:{}}}var c={B:8,C:250,L:1,D:8,"?":0,"":0};function u(h,_){var f=_||{};if(+f.codepage>=0&&Us(+f.codepage),f.type=="string")throw new Error("Cannot write DBF to JS string");var T=l$(),E=CW(h,{header:1,raw:!0,cellDates:!0}),g=E[0],S=E.slice(1),R=h["!cols"]||[],L=0,N=0,C=0,A=1;for(L=0;L<g.length;++L){if(((R[L]||{}).DBF||{}).name){g[L]=R[L].DBF.name,++C;continue}if(g[L]!=null){if(++C,typeof g[L]=="number"&&(g[L]=g[L].toString(10)),typeof g[L]!="string")throw new Error("DBF Invalid column name "+g[L]+" |"+typeof g[L]+"|");if(g.indexOf(g[L])!==L){for(N=0;N<1024;++N)if(g.indexOf(g[L]+"_"+N)==-1){g[L]+="_"+N;break}}}}var I=zr(h["!ref"]),k=[],H=[],G=[];for(L=0;L<=I.e.c-I.s.c;++L){var x="",U="",B=0,re=[];for(N=0;N<S.length;++N)S[N][L]!=null&&re.push(S[N][L]);if(re.length==0||g[L]==null){k[L]="?";continue}for(N=0;N<re.length;++N){switch(typeof re[N]){case"number":U="B";break;case"string":U="C";break;case"boolean":U="L";break;case"object":U=re[N]instanceof Date?"D":"C";break;default:U="C"}B=Math.max(B,String(re[N]).length),x=x&&x!=U?"C":U}B>250&&(B=250),U=((R[L]||{}).DBF||{}).type,U=="C"&&R[L].DBF.len>B&&(B=R[L].DBF.len),x=="B"&&U=="N"&&(x="N",G[L]=R[L].DBF.dec,B=R[L].DBF.len),H[L]=x=="C"||U=="N"?B:c[x]||0,A+=H[L],k[L]=x}var Z=T.next(32);for(Z.write_shift(4,318902576),Z.write_shift(4,S.length),Z.write_shift(2,296+32*C),Z.write_shift(2,A),L=0;L<4;++L)Z.write_shift(4,0);for(Z.write_shift(4,0|(+s[q1]||3)<<8),L=0,N=0;L<g.length;++L)if(g[L]!=null){var se=T.next(32),pe=(g[L].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);se.write_shift(1,pe,"sbcs"),se.write_shift(1,k[L]=="?"?"C":k[L],"sbcs"),se.write_shift(4,N),se.write_shift(1,H[L]||c[k[L]]||0),se.write_shift(1,G[L]||0),se.write_shift(1,2),se.write_shift(4,0),se.write_shift(1,0),se.write_shift(4,0),se.write_shift(4,0),N+=H[L]||c[k[L]]||0}var Me=T.next(264);for(Me.write_shift(4,13),L=0;L<65;++L)Me.write_shift(4,0);for(L=0;L<S.length;++L){var Oe=T.next(A);for(Oe.write_shift(1,0),N=0;N<g.length;++N)if(g[N]!=null)switch(k[N]){case"L":Oe.write_shift(1,S[L][N]==null?63:S[L][N]?84:70);break;case"B":Oe.write_shift(8,S[L][N]||0,"f");break;case"N":var we="0";for(typeof S[L][N]=="number"&&(we=S[L][N].toFixed(G[N]||0)),C=0;C<H[N]-we.length;++C)Oe.write_shift(1,32);Oe.write_shift(1,we,"sbcs");break;case"D":S[L][N]?(Oe.write_shift(4,("0000"+S[L][N].getFullYear()).slice(-4),"sbcs"),Oe.write_shift(2,("00"+(S[L][N].getMonth()+1)).slice(-2),"sbcs"),Oe.write_shift(2,("00"+S[L][N].getDate()).slice(-2),"sbcs")):Oe.write_shift(8,"00000000","sbcs");break;case"C":var ye=String(S[L][N]!=null?S[L][N]:"").slice(0,H[N]);for(Oe.write_shift(1,ye,"sbcs"),C=0;C<H[N]-ye.length;++C)Oe.write_shift(1,32);break}}return T.next(1).write_shift(1,26),T.end()}return{to_workbook:l,to_sheet:i,from_sheet:u}}(),nH=function(){var t={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},s=new RegExp("\x1BN("+Wo(t).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(g,S){var R=t[S];return typeof R=="number"?Jv(R):R},i=function(g,S,R){var L=S.charCodeAt(0)-32<<4|R.charCodeAt(0)-48;return L==59?g:Jv(L)};t["|"]=254;function l(g,S){switch(S.type){case"base64":return c(rs(g),S);case"binary":return c(g,S);case"buffer":return c(pt&&Buffer.isBuffer(g)?g.toString("binary"):Kl(g),S);case"array":return c(Hl(g),S)}throw new Error("Unrecognized type "+S.type)}function c(g,S){var R=g.split(/[\n\r]+/),L=-1,N=-1,C=0,A=0,I=[],k=[],H=null,G={},x=[],U=[],B=[],re=0,Z;for(+S.codepage>=0&&Us(+S.codepage);C!==R.length;++C){re=0;var se=R[C].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,i).replace(s,r),pe=se.replace(/;;/g,"\0").split(";").map(function(q){return q.replace(/\u0000/g,";")}),Me=pe[0],Oe;if(se.length>0)switch(Me){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":pe[1].charAt(0)=="P"&&k.push(se.slice(3).replace(/;;/g,";"));break;case"C":var we=!1,ye=!1,Re=!1,j=!1,Y=-1,oe=-1;for(A=1;A<pe.length;++A)switch(pe[A].charAt(0)){case"A":break;case"X":N=parseInt(pe[A].slice(1))-1,ye=!0;break;case"Y":for(L=parseInt(pe[A].slice(1))-1,ye||(N=0),Z=I.length;Z<=L;++Z)I[Z]=[];break;case"K":Oe=pe[A].slice(1),Oe.charAt(0)==='"'?Oe=Oe.slice(1,Oe.length-1):Oe==="TRUE"?Oe=!0:Oe==="FALSE"?Oe=!1:isNaN(zi(Oe))?isNaN(Nh(Oe).getDate())||(Oe=Qr(Oe)):(Oe=zi(Oe),H!==null&&xc(H)&&(Oe=LT(Oe))),we=!0;break;case"E":j=!0;var M=hc(pe[A].slice(1),{r:L,c:N});I[L][N]=[I[L][N],M];break;case"S":Re=!0,I[L][N]=[I[L][N],"S5S"];break;case"G":break;case"R":Y=parseInt(pe[A].slice(1))-1;break;case"C":oe=parseInt(pe[A].slice(1))-1;break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+se)}if(we&&(I[L][N]&&I[L][N].length==2?I[L][N][0]=Oe:I[L][N]=Oe,H=null),Re){if(j)throw new Error("SYLK shared formula cannot have own formula");var Q=Y>-1&&I[Y][oe];if(!Q||!Q[1])throw new Error("SYLK shared formula cannot find base");I[L][N][1]=ck(Q[1],{r:L-Y,c:N-oe})}break;case"F":var J=0;for(A=1;A<pe.length;++A)switch(pe[A].charAt(0)){case"X":N=parseInt(pe[A].slice(1))-1,++J;break;case"Y":for(L=parseInt(pe[A].slice(1))-1,Z=I.length;Z<=L;++Z)I[Z]=[];break;case"M":re=parseInt(pe[A].slice(1))/20;break;case"F":break;case"G":break;case"P":H=k[parseInt(pe[A].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(B=pe[A].slice(1).split(" "),Z=parseInt(B[0],10);Z<=parseInt(B[1],10);++Z)re=parseInt(B[2],10),U[Z-1]=re===0?{hidden:!0}:{wch:re},Ac(U[Z-1]);break;case"C":N=parseInt(pe[A].slice(1))-1,U[N]||(U[N]={});break;case"R":L=parseInt(pe[A].slice(1))-1,x[L]||(x[L]={}),re>0?(x[L].hpt=re,x[L].hpx=wh(re)):re===0&&(x[L].hidden=!0);break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+se)}J<1&&(H=null);break;default:if(S&&S.WTF)throw new Error("SYLK bad record "+se)}}return x.length>0&&(G["!rows"]=x),U.length>0&&(G["!cols"]=U),S&&S.sheetRows&&(I=I.slice(0,S.sheetRows)),[I,G]}function u(g,S){var R=l(g,S),L=R[0],N=R[1],C=zh(L,S);return Wo(N).forEach(function(A){C[A]=N[A]}),C}function h(g,S){return jl(u(g,S),S)}function _(g,S,R,L){var N="C;Y"+(R+1)+";X"+(L+1)+";K";switch(g.t){case"n":N+=g.v||0,g.f&&!g.F&&(N+=";E"+VG(g.f,{r:R,c:L}));break;case"b":N+=g.v?"TRUE":"FALSE";break;case"e":N+=g.w||g.v;break;case"d":N+='"'+(g.w||g.v)+'"';break;case"s":N+='"'+g.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return N}function f(g,S){S.forEach(function(R,L){var N="F;W"+(L+1)+" "+(L+1)+" ";R.hidden?N+="0":(typeof R.width=="number"&&!R.wpx&&(R.wpx=iT(R.width)),typeof R.wpx=="number"&&!R.wch&&(R.wch=oT(R.wpx)),typeof R.wch=="number"&&(N+=Math.round(R.wch))),N.charAt(N.length-1)!=" "&&g.push(N)})}function T(g,S){S.forEach(function(R,L){var N="F;";R.hidden?N+="M0;":R.hpt?N+="M"+20*R.hpt+";":R.hpx&&(N+="M"+20*ok(R.hpx)+";"),N.length>2&&g.push(N+"R"+(L+1))})}function E(g,S){var R=["ID;PWXL;N;E"],L=[],N=zr(g["!ref"]),C,A=Array.isArray(g),I=`\r
`;R.push("P;PGeneral"),R.push("F;P0;DG0G8;M255"),g["!cols"]&&f(R,g["!cols"]),g["!rows"]&&T(R,g["!rows"]),R.push("B;Y"+(N.e.r-N.s.r+1)+";X"+(N.e.c-N.s.c+1)+";D"+[N.s.c,N.s.r,N.e.c,N.e.r].join(" "));for(var k=N.s.r;k<=N.e.r;++k)for(var H=N.s.c;H<=N.e.c;++H){var G=_t({r:k,c:H});C=A?(g[k]||[])[H]:g[G],!(!C||C.v==null&&(!C.f||C.F))&&L.push(_(C,g,k,H))}return R.join(I)+I+L.join(I)+I+"E"+I}return{to_workbook:h,to_sheet:u,from_sheet:E}}(),sH=function(){function t(c,u){switch(u.type){case"base64":return s(rs(c),u);case"binary":return s(c,u);case"buffer":return s(pt&&Buffer.isBuffer(c)?c.toString("binary"):Kl(c),u);case"array":return s(Hl(c),u)}throw new Error("Unrecognized type "+u.type)}function s(c,u){for(var h=c.split(`
`),_=-1,f=-1,T=0,E=[];T!==h.length;++T){if(h[T].trim()==="BOT"){E[++_]=[],f=0;continue}if(!(_<0)){var g=h[T].trim().split(","),S=g[0],R=g[1];++T;for(var L=h[T]||"";(L.match(/["]/g)||[]).length&1&&T<h.length-1;)L+=`
`+h[++T];switch(L=L.trim(),+S){case-1:if(L==="BOT"){E[++_]=[],f=0;continue}else if(L!=="EOD")throw new Error("Unrecognized DIF special command "+L);break;case 0:L==="TRUE"?E[_][f]=!0:L==="FALSE"?E[_][f]=!1:isNaN(zi(R))?isNaN(Nh(R).getDate())?E[_][f]=R:E[_][f]=Qr(R):E[_][f]=zi(R),++f;break;case 1:L=L.slice(1,L.length-1),L=L.replace(/""/g,'"'),L&&L.match(/^=".*"$/)&&(L=L.slice(2,-1)),E[_][f++]=L!==""?L:null;break}if(L==="EOD")break}}return u&&u.sheetRows&&(E=E.slice(0,u.sheetRows)),E}function r(c,u){return zh(t(c,u),u)}function i(c,u){return jl(r(c,u),u)}var l=function(){var c=function(_,f,T,E,g){_.push(f),_.push(T+","+E),_.push('"'+g.replace(/"/g,'""')+'"')},u=function(_,f,T,E){_.push(f+","+T),_.push(f==1?'"'+E.replace(/"/g,'""')+'"':E)};return function(_){var f=[],T=zr(_["!ref"]),E,g=Array.isArray(_);c(f,"TABLE",0,1,"sheetjs"),c(f,"VECTORS",0,T.e.r-T.s.r+1,""),c(f,"TUPLES",0,T.e.c-T.s.c+1,""),c(f,"DATA",0,0,"");for(var S=T.s.r;S<=T.e.r;++S){u(f,-1,0,"BOT");for(var R=T.s.c;R<=T.e.c;++R){var L=_t({r:S,c:R});if(E=g?(_[S]||[])[R]:_[L],!E){u(f,1,0,"");continue}switch(E.t){case"n":var N=E.w;!N&&E.v!=null&&(N=E.v),N==null?E.f&&!E.F?u(f,1,0,"="+E.f):u(f,1,0,""):u(f,0,N,"V");break;case"b":u(f,0,E.v?1:0,E.v?"TRUE":"FALSE");break;case"s":u(f,1,0,isNaN(E.v)?E.v:'="'+E.v+'"');break;case"d":E.w||(E.w=Ss(E.z||dt[14],ns(Qr(E.v)))),u(f,0,E.w,"V");break;default:u(f,1,0,"")}}}u(f,-1,0,"EOD");var C=`\r
`,A=f.join(C);return A}}();return{to_workbook:i,to_sheet:r,from_sheet:l}}(),iH=function(){function t(E){return E.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function s(E){return E.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(E,g){for(var S=E.split(`
`),R=-1,L=-1,N=0,C=[];N!==S.length;++N){var A=S[N].trim().split(":");if(A[0]==="cell"){var I=Gs(A[1]);if(C.length<=I.r)for(R=C.length;R<=I.r;++R)C[R]||(C[R]=[]);switch(R=I.r,L=I.c,A[2]){case"t":C[R][L]=t(A[3]);break;case"v":C[R][L]=+A[3];break;case"vtf":var k=A[A.length-1];case"vtc":switch(A[3]){case"nl":C[R][L]=!!+A[4];break;default:C[R][L]=+A[4];break}A[2]=="vtf"&&(C[R][L]=[C[R][L],k])}}}return g&&g.sheetRows&&(C=C.slice(0,g.sheetRows)),C}function i(E,g){return zh(r(E,g),g)}function l(E,g){return jl(i(E,g),g)}var c=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),u=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,h=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),_="--SocialCalcSpreadsheetControlSave--";function f(E){if(!E||!E["!ref"])return"";for(var g=[],S=[],R,L="",N=xI(E["!ref"]),C=Array.isArray(E),A=N.s.r;A<=N.e.r;++A)for(var I=N.s.c;I<=N.e.c;++I)if(L=_t({r:A,c:I}),R=C?(E[A]||[])[I]:E[L],!(!R||R.v==null||R.t==="z")){switch(S=["cell",L,"t"],R.t){case"s":case"str":S.push(s(R.v));break;case"n":R.f?(S[2]="vtf",S[3]="n",S[4]=R.v,S[5]=s(R.f)):(S[2]="v",S[3]=R.v);break;case"b":S[2]="vt"+(R.f?"f":"c"),S[3]="nl",S[4]=R.v?"1":"0",S[5]=s(R.f||(R.v?"TRUE":"FALSE"));break;case"d":var k=ns(Qr(R.v));S[2]="vtc",S[3]="nd",S[4]=""+k,S[5]=R.w||Ss(R.z||dt[14],k);break;case"e":continue}g.push(S.join(":"))}return g.push("sheet:c:"+(N.e.c-N.s.c+1)+":r:"+(N.e.r-N.s.r+1)+":tvf:1"),g.push("valueformat:1:text-wiki"),g.join(`
`)}function T(E){return[c,u,h,u,f(E),_].join(`
`)}return{to_workbook:l,to_sheet:i,from_sheet:T}}(),yh=function(){function t(T,E,g,S,R){R.raw?E[g][S]=T:T===""||(T==="TRUE"?E[g][S]=!0:T==="FALSE"?E[g][S]=!1:isNaN(zi(T))?isNaN(Nh(T).getDate())?E[g][S]=T:E[g][S]=Qr(T):E[g][S]=zi(T))}function s(T,E){var g=E||{},S=[];if(!T||T.length===0)return S;for(var R=T.split(/[\r\n]/),L=R.length-1;L>=0&&R[L].length===0;)--L;for(var N=10,C=0,A=0;A<=L;++A)C=R[A].indexOf(" "),C==-1?C=R[A].length:C++,N=Math.max(N,C);for(A=0;A<=L;++A){S[A]=[];var I=0;for(t(R[A].slice(0,N).trim(),S,A,I,g),I=1;I<=(R[A].length-N)/10+1;++I)t(R[A].slice(N+(I-1)*10,N+I*10).trim(),S,A,I,g)}return g.sheetRows&&(S=S.slice(0,g.sheetRows)),S}var r={44:",",9:"	",59:";",124:"|"},i={44:3,9:2,59:1,124:0};function l(T){for(var E={},g=!1,S=0,R=0;S<T.length;++S)(R=T.charCodeAt(S))==34?g=!g:!g&&R in r&&(E[R]=(E[R]||0)+1);R=[];for(S in E)Object.prototype.hasOwnProperty.call(E,S)&&R.push([E[S],S]);if(!R.length){E=i;for(S in E)Object.prototype.hasOwnProperty.call(E,S)&&R.push([E[S],S])}return R.sort(function(L,N){return L[0]-N[0]||i[L[1]]-i[N[1]]}),r[R.pop()[1]]||44}function c(T,E){var g=E||{},S="",R=g.dense?[]:{},L={s:{c:0,r:0},e:{c:0,r:0}};T.slice(0,4)=="sep="?T.charCodeAt(5)==13&&T.charCodeAt(6)==10?(S=T.charAt(4),T=T.slice(7)):T.charCodeAt(5)==13||T.charCodeAt(5)==10?(S=T.charAt(4),T=T.slice(6)):S=l(T.slice(0,1024)):g&&g.FS?S=g.FS:S=l(T.slice(0,1024));var N=0,C=0,A=0,I=0,k=0,H=S.charCodeAt(0),G=!1,x=0,U=T.charCodeAt(0);T=T.replace(/\r\n/mg,`
`);var B=g.dateNF!=null?gB(g.dateNF):null;function re(){var Z=T.slice(I,k),se={};if(Z.charAt(0)=='"'&&Z.charAt(Z.length-1)=='"'&&(Z=Z.slice(1,-1).replace(/""/g,'"')),Z.length===0)se.t="z";else if(g.raw)se.t="s",se.v=Z;else if(Z.trim().length===0)se.t="s",se.v=Z;else if(Z.charCodeAt(0)==61)Z.charCodeAt(1)==34&&Z.charCodeAt(Z.length-1)==34?(se.t="s",se.v=Z.slice(2,-1).replace(/""/g,'"')):XG(Z)?(se.t="n",se.f=Z.slice(1)):(se.t="s",se.v=Z);else if(Z=="TRUE")se.t="b",se.v=!0;else if(Z=="FALSE")se.t="b",se.v=!1;else if(!isNaN(A=zi(Z)))se.t="n",g.cellText!==!1&&(se.w=Z),se.v=A;else if(!isNaN(Nh(Z).getDate())||B&&Z.match(B)){se.z=g.dateNF||dt[14];var pe=0;B&&Z.match(B)&&(Z=mB(Z,g.dateNF,Z.match(B)||[]),pe=1),g.cellDates?(se.t="d",se.v=Qr(Z,pe)):(se.t="n",se.v=ns(Qr(Z,pe))),g.cellText!==!1&&(se.w=Ss(se.z,se.v instanceof Date?ns(se.v):se.v)),g.cellNF||delete se.z}else se.t="s",se.v=Z;if(se.t=="z"||(g.dense?(R[N]||(R[N]=[]),R[N][C]=se):R[_t({c:C,r:N})]=se),I=k+1,U=T.charCodeAt(I),L.e.c<C&&(L.e.c=C),L.e.r<N&&(L.e.r=N),x==H)++C;else if(C=0,++N,g.sheetRows&&g.sheetRows<=N)return!0}e:for(;k<T.length;++k)switch(x=T.charCodeAt(k)){case 34:U===34&&(G=!G);break;case H:case 10:case 13:if(!G&&re())break e;break}return k-I>0&&re(),R["!ref"]=Ct(L),R}function u(T,E){return!(E&&E.PRN)||E.FS||T.slice(0,4)=="sep="||T.indexOf("	")>=0||T.indexOf(",")>=0||T.indexOf(";")>=0?c(T,E):zh(s(T,E),E)}function h(T,E){var g="",S=E.type=="string"?[0,0,0,0]:VI(T,E);switch(E.type){case"base64":g=rs(T);break;case"binary":g=T;break;case"buffer":E.codepage==65001?g=T.toString("utf8"):E.codepage&&typeof Ch<"u"||(g=pt&&Buffer.isBuffer(T)?T.toString("binary"):Kl(T));break;case"array":g=Hl(T);break;case"string":g=T;break;default:throw new Error("Unrecognized type "+E.type)}return S[0]==239&&S[1]==187&&S[2]==191?g=Ft(g.slice(3)):E.type!="string"&&E.type!="buffer"&&E.codepage==65001?g=Ft(g):E.type=="binary"&&typeof Ch<"u",g.slice(0,19)=="socialcalc:version:"?iH.to_sheet(E.type=="string"?g:Ft(g),E):u(g,E)}function _(T,E){return jl(h(T,E),E)}function f(T){for(var E=[],g=zr(T["!ref"]),S,R=Array.isArray(T),L=g.s.r;L<=g.e.r;++L){for(var N=[],C=g.s.c;C<=g.e.c;++C){var A=_t({r:L,c:C});if(S=R?(T[L]||[])[C]:T[A],!S||S.v==null){N.push("          ");continue}for(var I=(S.w||(Lc(S),S.w)||"").slice(0,10);I.length<10;)I+=" ";N.push(I+(C===0?" ":""))}E.push(N.join(""))}return E.join(`
`)}return{to_workbook:_,to_sheet:h,from_sheet:f}}();function oH(t,s){var r=s||{},i=!!r.WTF;r.WTF=!0;try{var l=nH.to_workbook(t,r);return r.WTF=i,l}catch(c){if(r.WTF=i,!c.message.match(/SYLK bad record ID/)&&i)throw c;return yh.to_workbook(t,s)}}var sh=function(){function t(M,Q,J){if(M){qr(M,M.l||0);for(var q=J.Enum||Y;M.l<M.length;){var he=M.read_shift(2),Ne=q[he]||q[65535],Pe=M.read_shift(2),be=M.l+Pe,ce=Ne.f&&Ne.f(M,Pe,J);if(M.l=be,Q(ce,Ne,he))return}}}function s(M,Q){switch(Q.type){case"base64":return r(Fs(rs(M)),Q);case"binary":return r(Fs(M),Q);case"buffer":case"array":return r(M,Q)}throw"Unsupported type "+Q.type}function r(M,Q){if(!M)return M;var J=Q||{},q=J.dense?[]:{},he="Sheet1",Ne="",Pe=0,be={},ce=[],tt=[],b={s:{r:0,c:0},e:{r:0,c:0}},_e=J.sheetRows||0;if(M[2]==0&&(M[3]==8||M[3]==9)&&M.length>=16&&M[14]==5&&M[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(M[2]==2)J.Enum=Y,t(M,function(ve,ut,Bt){switch(Bt){case 0:J.vers=ve,ve>=4096&&(J.qpro=!0);break;case 6:b=ve;break;case 204:ve&&(Ne=ve);break;case 222:Ne=ve;break;case 15:case 51:J.qpro||(ve[1].v=ve[1].v.slice(1));case 13:case 14:case 16:Bt==14&&(ve[2]&112)==112&&(ve[2]&15)>1&&(ve[2]&15)<15&&(ve[1].z=J.dateNF||dt[14],J.cellDates&&(ve[1].t="d",ve[1].v=LT(ve[1].v))),J.qpro&&ve[3]>Pe&&(q["!ref"]=Ct(b),be[he]=q,ce.push(he),q=J.dense?[]:{},b={s:{r:0,c:0},e:{r:0,c:0}},Pe=ve[3],he=Ne||"Sheet"+(Pe+1),Ne="");var tr=J.dense?(q[ve[0].r]||[])[ve[0].c]:q[_t(ve[0])];if(tr){tr.t=ve[1].t,tr.v=ve[1].v,ve[1].z!=null&&(tr.z=ve[1].z),ve[1].f!=null&&(tr.f=ve[1].f);break}J.dense?(q[ve[0].r]||(q[ve[0].r]=[]),q[ve[0].r][ve[0].c]=ve[1]):q[_t(ve[0])]=ve[1];break}},J);else if(M[2]==26||M[2]==14)J.Enum=oe,M[2]==14&&(J.qpro=!0,M.l=0),t(M,function(ve,ut,Bt){switch(Bt){case 204:he=ve;break;case 22:ve[1].v=ve[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(ve[3]>Pe&&(q["!ref"]=Ct(b),be[he]=q,ce.push(he),q=J.dense?[]:{},b={s:{r:0,c:0},e:{r:0,c:0}},Pe=ve[3],he="Sheet"+(Pe+1)),_e>0&&ve[0].r>=_e)break;J.dense?(q[ve[0].r]||(q[ve[0].r]=[]),q[ve[0].r][ve[0].c]=ve[1]):q[_t(ve[0])]=ve[1],b.e.c<ve[0].c&&(b.e.c=ve[0].c),b.e.r<ve[0].r&&(b.e.r=ve[0].r);break;case 27:ve[14e3]&&(tt[ve[14e3][0]]=ve[14e3][1]);break;case 1537:tt[ve[0]]=ve[1],ve[0]==Pe&&(he=ve[1]);break}},J);else throw new Error("Unrecognized LOTUS BOF "+M[2]);if(q["!ref"]=Ct(b),be[Ne||he]=q,ce.push(Ne||he),!tt.length)return{SheetNames:ce,Sheets:be};for(var He={},ke=[],Ze=0;Ze<tt.length;++Ze)be[ce[Ze]]?(ke.push(tt[Ze]||ce[Ze]),He[tt[Ze]]=be[tt[Ze]]||be[ce[Ze]]):(ke.push(tt[Ze]),He[tt[Ze]]={"!ref":"A1"});return{SheetNames:ke,Sheets:He}}function i(M,Q){var J=Q||{};if(+J.codepage>=0&&Us(+J.codepage),J.type=="string")throw new Error("Cannot write WK1 to JS string");var q=l$(),he=zr(M["!ref"]),Ne=Array.isArray(M),Pe=[];ws(q,0,c(1030)),ws(q,6,_(he));for(var be=Math.min(he.e.r,8191),ce=he.s.r;ce<=be;++ce)for(var tt=es(ce),b=he.s.c;b<=he.e.c;++b){ce===he.s.r&&(Pe[b]=Ln(b));var _e=Pe[b]+tt,He=Ne?(M[ce]||[])[b]:M[_e];if(!(!He||He.t=="z"))if(He.t=="n")(He.v|0)==He.v&&He.v>=-32768&&He.v<=32767?ws(q,13,S(ce,b,He.v)):ws(q,14,L(ce,b,He.v));else{var ke=Lc(He);ws(q,15,E(ce,b,ke.slice(0,239)))}}return ws(q,1),q.end()}function l(M,Q){var J=Q||{};if(+J.codepage>=0&&Us(+J.codepage),J.type=="string")throw new Error("Cannot write WK3 to JS string");var q=l$();ws(q,0,u(M));for(var he=0,Ne=0;he<M.SheetNames.length;++he)(M.Sheets[M.SheetNames[he]]||{})["!ref"]&&ws(q,27,j(M.SheetNames[he],Ne++));var Pe=0;for(he=0;he<M.SheetNames.length;++he){var be=M.Sheets[M.SheetNames[he]];if(!(!be||!be["!ref"])){for(var ce=zr(be["!ref"]),tt=Array.isArray(be),b=[],_e=Math.min(ce.e.r,8191),He=ce.s.r;He<=_e;++He)for(var ke=es(He),Ze=ce.s.c;Ze<=ce.e.c;++Ze){He===ce.s.r&&(b[Ze]=Ln(Ze));var ve=b[Ze]+ke,ut=tt?(be[He]||[])[Ze]:be[ve];if(!(!ut||ut.t=="z"))if(ut.t=="n")ws(q,23,re(He,Ze,Pe,ut.v));else{var Bt=Lc(ut);ws(q,22,x(He,Ze,Pe,Bt.slice(0,239)))}}++Pe}}return ws(q,1),q.end()}function c(M){var Q=Cr(2);return Q.write_shift(2,M),Q}function u(M){var Q=Cr(26);Q.write_shift(2,4096),Q.write_shift(2,4),Q.write_shift(4,0);for(var J=0,q=0,he=0,Ne=0;Ne<M.SheetNames.length;++Ne){var Pe=M.SheetNames[Ne],be=M.Sheets[Pe];if(!(!be||!be["!ref"])){++he;var ce=xI(be["!ref"]);J<ce.e.r&&(J=ce.e.r),q<ce.e.c&&(q=ce.e.c)}}return J>8191&&(J=8191),Q.write_shift(2,J),Q.write_shift(1,he),Q.write_shift(1,q),Q.write_shift(2,0),Q.write_shift(2,0),Q.write_shift(1,1),Q.write_shift(1,2),Q.write_shift(4,0),Q.write_shift(4,0),Q}function h(M,Q,J){var q={s:{c:0,r:0},e:{c:0,r:0}};return Q==8&&J.qpro?(q.s.c=M.read_shift(1),M.l++,q.s.r=M.read_shift(2),q.e.c=M.read_shift(1),M.l++,q.e.r=M.read_shift(2),q):(q.s.c=M.read_shift(2),q.s.r=M.read_shift(2),Q==12&&J.qpro&&(M.l+=2),q.e.c=M.read_shift(2),q.e.r=M.read_shift(2),Q==12&&J.qpro&&(M.l+=2),q.s.c==65535&&(q.s.c=q.e.c=q.s.r=q.e.r=0),q)}function _(M){var Q=Cr(8);return Q.write_shift(2,M.s.c),Q.write_shift(2,M.s.r),Q.write_shift(2,M.e.c),Q.write_shift(2,M.e.r),Q}function f(M,Q,J){var q=[{c:0,r:0},{t:"n",v:0},0,0];return J.qpro&&J.vers!=20768?(q[0].c=M.read_shift(1),q[3]=M.read_shift(1),q[0].r=M.read_shift(2),M.l+=2):(q[2]=M.read_shift(1),q[0].c=M.read_shift(2),q[0].r=M.read_shift(2)),q}function T(M,Q,J){var q=M.l+Q,he=f(M,Q,J);if(he[1].t="s",J.vers==20768){M.l++;var Ne=M.read_shift(1);return he[1].v=M.read_shift(Ne,"utf8"),he}return J.qpro&&M.l++,he[1].v=M.read_shift(q-M.l,"cstr"),he}function E(M,Q,J){var q=Cr(7+J.length);q.write_shift(1,255),q.write_shift(2,Q),q.write_shift(2,M),q.write_shift(1,39);for(var he=0;he<q.length;++he){var Ne=J.charCodeAt(he);q.write_shift(1,Ne>=128?95:Ne)}return q.write_shift(1,0),q}function g(M,Q,J){var q=f(M,Q,J);return q[1].v=M.read_shift(2,"i"),q}function S(M,Q,J){var q=Cr(7);return q.write_shift(1,255),q.write_shift(2,Q),q.write_shift(2,M),q.write_shift(2,J,"i"),q}function R(M,Q,J){var q=f(M,Q,J);return q[1].v=M.read_shift(8,"f"),q}function L(M,Q,J){var q=Cr(13);return q.write_shift(1,255),q.write_shift(2,Q),q.write_shift(2,M),q.write_shift(8,J,"f"),q}function N(M,Q,J){var q=M.l+Q,he=f(M,Q,J);if(he[1].v=M.read_shift(8,"f"),J.qpro)M.l=q;else{var Ne=M.read_shift(2);k(M.slice(M.l,M.l+Ne),he),M.l+=Ne}return he}function C(M,Q,J){var q=Q&32768;return Q&=-32769,Q=(q?M:0)+(Q>=8192?Q-16384:Q),(q?"":"$")+(J?Ln(Q):es(Q))}var A={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},I=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function k(M,Q){qr(M,0);for(var J=[],q=0,he="",Ne="",Pe="",be="";M.l<M.length;){var ce=M[M.l++];switch(ce){case 0:J.push(M.read_shift(8,"f"));break;case 1:Ne=C(Q[0].c,M.read_shift(2),!0),he=C(Q[0].r,M.read_shift(2),!1),J.push(Ne+he);break;case 2:{var tt=C(Q[0].c,M.read_shift(2),!0),b=C(Q[0].r,M.read_shift(2),!1);Ne=C(Q[0].c,M.read_shift(2),!0),he=C(Q[0].r,M.read_shift(2),!1),J.push(tt+b+":"+Ne+he)}break;case 3:if(M.l<M.length){console.error("WK1 premature formula end");return}break;case 4:J.push("("+J.pop()+")");break;case 5:J.push(M.read_shift(2));break;case 6:{for(var _e="";ce=M[M.l++];)_e+=String.fromCharCode(ce);J.push('"'+_e.replace(/"/g,'""')+'"')}break;case 8:J.push("-"+J.pop());break;case 23:J.push("+"+J.pop());break;case 22:J.push("NOT("+J.pop()+")");break;case 20:case 21:be=J.pop(),Pe=J.pop(),J.push(["AND","OR"][ce-20]+"("+Pe+","+be+")");break;default:if(ce<32&&I[ce])be=J.pop(),Pe=J.pop(),J.push(Pe+I[ce]+be);else if(A[ce]){if(q=A[ce][1],q==69&&(q=M[M.l++]),q>J.length){console.error("WK1 bad formula parse 0x"+ce.toString(16)+":|"+J.join("|")+"|");return}var He=J.slice(-q);J.length-=q,J.push(A[ce][0]+"("+He.join(",")+")")}else return ce<=7?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=24?console.error("WK1 unsupported op "+ce.toString(16)):ce<=30?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=115?console.error("WK1 unsupported function opcode "+ce.toString(16)):console.error("WK1 unrecognized opcode "+ce.toString(16))}}J.length==1?Q[1].f=""+J[0]:console.error("WK1 bad formula parse |"+J.join("|")+"|")}function H(M){var Q=[{c:0,r:0},{t:"n",v:0},0];return Q[0].r=M.read_shift(2),Q[3]=M[M.l++],Q[0].c=M[M.l++],Q}function G(M,Q){var J=H(M);return J[1].t="s",J[1].v=M.read_shift(Q-4,"cstr"),J}function x(M,Q,J,q){var he=Cr(6+q.length);he.write_shift(2,M),he.write_shift(1,J),he.write_shift(1,Q),he.write_shift(1,39);for(var Ne=0;Ne<q.length;++Ne){var Pe=q.charCodeAt(Ne);he.write_shift(1,Pe>=128?95:Pe)}return he.write_shift(1,0),he}function U(M,Q){var J=H(M);J[1].v=M.read_shift(2);var q=J[1].v>>1;if(J[1].v&1)switch(q&7){case 0:q=(q>>3)*5e3;break;case 1:q=(q>>3)*500;break;case 2:q=(q>>3)/20;break;case 3:q=(q>>3)/200;break;case 4:q=(q>>3)/2e3;break;case 5:q=(q>>3)/2e4;break;case 6:q=(q>>3)/16;break;case 7:q=(q>>3)/64;break}return J[1].v=q,J}function B(M,Q){var J=H(M),q=M.read_shift(4),he=M.read_shift(4),Ne=M.read_shift(2);if(Ne==65535)return q===0&&he===3221225472?(J[1].t="e",J[1].v=15):q===0&&he===3489660928?(J[1].t="e",J[1].v=42):J[1].v=0,J;var Pe=Ne&32768;return Ne=(Ne&32767)-16446,J[1].v=(1-Pe*2)*(he*Math.pow(2,Ne+32)+q*Math.pow(2,Ne)),J}function re(M,Q,J,q){var he=Cr(14);if(he.write_shift(2,M),he.write_shift(1,J),he.write_shift(1,Q),q==0)return he.write_shift(4,0),he.write_shift(4,0),he.write_shift(2,65535),he;var Ne=0,Pe=0,be=0,ce=0;return q<0&&(Ne=1,q=-q),Pe=Math.log2(q)|0,q/=Math.pow(2,Pe-31),ce=q>>>0,ce&2147483648||(q/=2,++Pe,ce=q>>>0),q-=ce,ce|=2147483648,ce>>>=0,q*=Math.pow(2,32),be=q>>>0,he.write_shift(4,be),he.write_shift(4,ce),Pe+=16383+(Ne?32768:0),he.write_shift(2,Pe),he}function Z(M,Q){var J=B(M);return M.l+=Q-14,J}function se(M,Q){var J=H(M),q=M.read_shift(4);return J[1].v=q>>6,J}function pe(M,Q){var J=H(M),q=M.read_shift(8,"f");return J[1].v=q,J}function Me(M,Q){var J=pe(M);return M.l+=Q-10,J}function Oe(M,Q){return M[M.l+Q-1]==0?M.read_shift(Q,"cstr"):""}function we(M,Q){var J=M[M.l++];J>Q-1&&(J=Q-1);for(var q="";q.length<J;)q+=String.fromCharCode(M[M.l++]);return q}function ye(M,Q,J){if(!(!J.qpro||Q<21)){var q=M.read_shift(1);M.l+=17,M.l+=1,M.l+=2;var he=M.read_shift(Q-21,"cstr");return[q,he]}}function Re(M,Q){for(var J={},q=M.l+Q;M.l<q;){var he=M.read_shift(2);if(he==14e3){for(J[he]=[0,""],J[he][0]=M.read_shift(2);M[M.l];)J[he][1]+=String.fromCharCode(M[M.l]),M.l++;M.l++}}return J}function j(M,Q){var J=Cr(5+M.length);J.write_shift(2,14e3),J.write_shift(2,Q);for(var q=0;q<M.length;++q){var he=M.charCodeAt(q);J[J.l++]=he>127?95:he}return J[J.l++]=0,J}var Y={0:{n:"BOF",f:Ir},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:h},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:g},14:{n:"NUMBER",f:R},15:{n:"LABEL",f:T},16:{n:"FORMULA",f:N},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:T},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:Oe},222:{n:"SHEETNAMELP",f:we},65535:{n:""}},oe={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:G},23:{n:"NUMBER17",f:B},24:{n:"NUMBER18",f:U},25:{n:"FORMULA19",f:Z},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:Re},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:se},38:{n:"??"},39:{n:"NUMBER27",f:pe},40:{n:"FORMULA28",f:Me},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:Oe},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:ye},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:i,book_to_wk3:l,to_workbook:s}}();function lH(t){var s={},r=t.match(gn),i=0,l=!1;if(r)for(;i!=r.length;++i){var c=st(r[i]);switch(c[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!c.val)break;case"<shadow>":case"<shadow/>":s.shadow=1;break;case"</shadow>":break;case"<charset":if(c.val=="1")break;s.cp=II[parseInt(c.val,10)];break;case"<outline":if(!c.val)break;case"<outline>":case"<outline/>":s.outline=1;break;case"</outline>":break;case"<rFont":s.name=c.val;break;case"<sz":s.sz=c.val;break;case"<strike":if(!c.val)break;case"<strike>":case"<strike/>":s.strike=1;break;case"</strike>":break;case"<u":if(!c.val)break;switch(c.val){case"double":s.uval="double";break;case"singleAccounting":s.uval="single-accounting";break;case"doubleAccounting":s.uval="double-accounting";break}case"<u>":case"<u/>":s.u=1;break;case"</u>":break;case"<b":if(c.val=="0")break;case"<b>":case"<b/>":s.b=1;break;case"</b>":break;case"<i":if(c.val=="0")break;case"<i>":case"<i/>":s.i=1;break;case"</i>":break;case"<color":c.rgb&&(s.color=c.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":s.family=c.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":s.valign=c.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(c[0].charCodeAt(1)!==47&&!l)throw new Error("Unrecognized rich format "+c[0])}}return s}var aH=function(){var t=xh("t"),s=xh("rPr");function r(c){var u=c.match(t);if(!u)return{t:"s",v:""};var h={t:"s",v:$t(u[1])},_=c.match(s);return _&&(h.s=lH(_[1])),h}var i=/<(?:\w+:)?r>/g,l=/<\/(?:\w+:)?r>/;return function(u){return u.replace(i,"").split(l).map(r).filter(function(h){return h.v})}}(),cH=function(){var s=/(\r\n|\n)/g;function r(l,c,u){var h=[];l.u&&h.push("text-decoration: underline;"),l.uval&&h.push("text-underline-style:"+l.uval+";"),l.sz&&h.push("font-size:"+l.sz+"pt;"),l.outline&&h.push("text-effect: outline;"),l.shadow&&h.push("text-shadow: auto;"),c.push('<span style="'+h.join("")+'">'),l.b&&(c.push("<b>"),u.push("</b>")),l.i&&(c.push("<i>"),u.push("</i>")),l.strike&&(c.push("<s>"),u.push("</s>"));var _=l.valign||"";return _=="superscript"||_=="super"?_="sup":_=="subscript"&&(_="sub"),_!=""&&(c.push("<"+_+">"),u.push("</"+_+">")),u.push("</span>"),l}function i(l){var c=[[],l.v,[]];return l.v?(l.s&&r(l.s,c[0],c[2]),c[0].join("")+c[1].replace(s,"<br/>")+c[2].join("")):""}return function(c){return c.map(i).join("")}}(),uH=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,hH=/<(?:\w+:)?r>/,dH=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function DI(t,s){var r=s?s.cellHTML:!0,i={};return t?(t.match(/^\s*<(?:\w+:)?t[^>]*>/)?(i.t=$t(Ft(t.slice(t.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),i.r=Ft(t),r&&(i.h=my(i.t))):t.match(hH)&&(i.r=Ft(t),i.t=$t(Ft((t.replace(dH,"").match(uH)||[]).join("").replace(gn,""))),r&&(i.h=cH(aH(i.r)))),i):{t:""}}var _H=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,fH=/<(?:\w+:)?(?:si|sstItem)>/g,TH=/<\/(?:\w+:)?(?:si|sstItem)>/;function pH(t,s){var r=[],i="";if(!t)return r;var l=t.match(_H);if(l){i=l[2].replace(fH,"").split(TH);for(var c=0;c!=i.length;++c){var u=DI(i[c].trim(),s);u!=null&&(r[r.length]=u)}l=st(l[1]),r.Count=l.count,r.Unique=l.uniqueCount}return r}function EH(t){return[t.read_shift(4),t.read_shift(4)]}function gH(t,s){var r=[],i=!1;return eo(t,function(c,u,h){switch(h){case 159:r.Count=c[0],r.Unique=c[1];break;case 19:r.push(c);break;case 160:return!0;case 35:i=!0;break;case 36:i=!1;break;default:if(u.T,!i||s.WTF)throw new Error("Unexpected record 0x"+h.toString(16))}}),r}function ek(t){for(var s=[],r=t.split(""),i=0;i<r.length;++i)s[i]=r[i].charCodeAt(0);return s}function Yi(t,s){var r={};return r.Major=t.read_shift(2),r.Minor=t.read_shift(2),s>=4&&(t.l+=s-4),r}function mH(t){var s={};return s.id=t.read_shift(0,"lpp4"),s.R=Yi(t,4),s.U=Yi(t,4),s.W=Yi(t,4),s}function $H(t){for(var s=t.read_shift(4),r=t.l+s-4,i={},l=t.read_shift(4),c=[];l-- >0;)c.push({t:t.read_shift(4),v:t.read_shift(0,"lpp4")});if(i.name=t.read_shift(0,"lpp4"),i.comps=c,t.l!=r)throw new Error("Bad DataSpaceMapEntry: "+t.l+" != "+r);return i}function IH(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push($H(t));return s}function OH(t){var s=[];t.l+=4;for(var r=t.read_shift(4);r-- >0;)s.push(t.read_shift(0,"lpp4"));return s}function SH(t){var s={};return t.read_shift(4),t.l+=4,s.id=t.read_shift(0,"lpp4"),s.name=t.read_shift(0,"lpp4"),s.R=Yi(t,4),s.U=Yi(t,4),s.W=Yi(t,4),s}function RH(t){var s=SH(t);if(s.ename=t.read_shift(0,"8lpp4"),s.blksz=t.read_shift(4),s.cmode=t.read_shift(4),t.read_shift(4)!=4)throw new Error("Bad !Primary record");return s}function tk(t,s){var r=t.l+s,i={};i.Flags=t.read_shift(4)&63,t.l+=4,i.AlgID=t.read_shift(4);var l=!1;switch(i.AlgID){case 26126:case 26127:case 26128:l=i.Flags==36;break;case 26625:l=i.Flags==4;break;case 0:l=i.Flags==16||i.Flags==4||i.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+i.AlgID}if(!l)throw new Error("Encryption Flags/AlgID mismatch");return i.AlgIDHash=t.read_shift(4),i.KeySize=t.read_shift(4),i.ProviderType=t.read_shift(4),t.l+=8,i.CSPName=t.read_shift(r-t.l>>1,"utf16le"),t.l=r,i}function rk(t,s){var r={},i=t.l+s;return t.l+=4,r.Salt=t.slice(t.l,t.l+16),t.l+=16,r.Verifier=t.slice(t.l,t.l+16),t.l+=16,t.read_shift(4),r.VerifierHash=t.slice(t.l,i),t.l=i,r}function LH(t){var s=Yi(t);switch(s.Minor){case 2:return[s.Minor,AH(t)];case 3:return[s.Minor,CH()];case 4:return[s.Minor,vH(t)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+s.Minor)}function AH(t){var s=t.read_shift(4);if((s&63)!=36)throw new Error("EncryptionInfo mismatch");var r=t.read_shift(4),i=tk(t,r),l=rk(t,t.length-t.l);return{t:"Std",h:i,v:l}}function CH(){throw new Error("File is password-protected: ECMA-376 Extensible")}function vH(t){var s=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];t.l+=4;var r=t.read_shift(t.length-t.l,"utf8"),i={};return r.replace(gn,function(c){var u=st(c);switch($i(u[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":s.forEach(function(h){i[h]=u[h]});break;case"<dataIntegrity":i.encryptedHmacKey=u.encryptedHmacKey,i.encryptedHmacValue=u.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":i.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":i.uri=u.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":i.encs.push(u);break;default:throw u[0]}}),i}function NH(t,s){var r={},i=r.EncryptionVersionInfo=Yi(t,4);if(s-=4,i.Minor!=2)throw new Error("unrecognized minor version code: "+i.Minor);if(i.Major>4||i.Major<2)throw new Error("unrecognized major version code: "+i.Major);r.Flags=t.read_shift(4),s-=4;var l=t.read_shift(4);return s-=4,r.EncryptionHeader=tk(t,l),s-=l,r.EncryptionVerifier=rk(t,s),r}function xH(t){var s={},r=s.EncryptionVersionInfo=Yi(t,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return s.Salt=t.read_shift(16),s.EncryptedVerifier=t.read_shift(16),s.EncryptedVerifierHash=t.read_shift(16),s}function bH(t){var s=0,r,i=ek(t),l=i.length+1,c,u,h,_,f;for(r=Vo(l),r[0]=i.length,c=1;c!=l;++c)r[c]=i[c-1];for(c=l-1;c>=0;--c)u=r[c],h=s&16384?1:0,_=s<<1&32767,f=h|_,s=f^u;return s^52811}var nk=function(){var t=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],s=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],i=function(u){return(u/2|u*128)&255},l=function(u,h){return i(u^h)},c=function(u){for(var h=s[u.length-1],_=104,f=u.length-1;f>=0;--f)for(var T=u[f],E=0;E!=7;++E)T&64&&(h^=r[_]),T*=2,--_;return h};return function(u){for(var h=ek(u),_=c(h),f=h.length,T=Vo(16),E=0;E!=16;++E)T[E]=0;var g,S,R;for((f&1)===1&&(g=_>>8,T[f]=l(t[0],g),--f,g=_&255,S=h[h.length-1],T[f]=l(S,g));f>0;)--f,g=_>>8,T[f]=l(h[f],g),--f,g=_&255,T[f]=l(h[f],g);for(f=15,R=15-h.length;R>0;)g=_>>8,T[f]=l(t[R],g),--f,--R,g=_&255,T[f]=l(h[f],g),--f,--R;return T}}(),yH=function(t,s,r,i,l){l||(l=s),i||(i=nk(t));var c,u;for(c=0;c!=s.length;++c)u=s[c],u^=i[r],u=(u>>5|u<<3)&255,l[c]=u,++r;return[l,r,i]},kH=function(t){var s=0,r=nk(t);return function(i){var l=yH("",i,s,r);return s=l[1],l[0]}};function wH(t,s,r,i){var l={key:Ir(t),verificationBytes:Ir(t)};return r.password&&(l.verifier=bH(r.password)),i.valid=l.verificationBytes===l.verifier,i.valid&&(i.insitu=kH(r.password)),l}function MH(t,s,r){var i=r||{};return i.Info=t.read_shift(2),t.l-=2,i.Info===1?i.Data=xH(t):i.Data=NH(t,s),i}function DH(t,s,r){var i={Type:r.biff>=8?t.read_shift(2):0};return i.Type?MH(t,s-2,i):wH(t,r.biff>=8?s:s-2,r,i),i}var PH=function(){function t(l,c){switch(c.type){case"base64":return s(rs(l),c);case"binary":return s(l,c);case"buffer":return s(pt&&Buffer.isBuffer(l)?l.toString("binary"):Kl(l),c);case"array":return s(Hl(l),c)}throw new Error("Unrecognized type "+c.type)}function s(l,c){var u=c||{},h=u.dense?[]:{},_=l.match(/\\trowd.*?\\row\b/g);if(!_.length)throw new Error("RTF missing table");var f={s:{c:0,r:0},e:{c:0,r:_.length-1}};return _.forEach(function(T,E){Array.isArray(h)&&(h[E]=[]);for(var g=/\\\w+\b/g,S=0,R,L=-1;R=g.exec(T);){switch(R[0]){case"\\cell":var N=T.slice(S,g.lastIndex-R[0].length);if(N[0]==" "&&(N=N.slice(1)),++L,N.length){var C={v:N,t:"s"};Array.isArray(h)?h[E][L]=C:h[_t({r:E,c:L})]=C}break}S=g.lastIndex}L>f.e.c&&(f.e.c=L)}),h["!ref"]=Ct(f),h}function r(l,c){return jl(t(l,c),c)}function i(l){for(var c=["{\\rtf1\\ansi"],u=zr(l["!ref"]),h,_=Array.isArray(l),f=u.s.r;f<=u.e.r;++f){c.push("\\trowd\\trautofit1");for(var T=u.s.c;T<=u.e.c;++T)c.push("\\cellx"+(T+1));for(c.push("\\pard\\intbl"),T=u.s.c;T<=u.e.c;++T){var E=_t({r:f,c:T});h=_?(l[f]||[])[T]:l[E],!(!h||h.v==null&&(!h.f||h.F))&&(c.push(" "+(h.w||(Lc(h),h.w))),c.push("\\cell"))}c.push("\\pard\\intbl\\row")}return c.join("")+"}"}return{to_workbook:r,to_sheet:t,from_sheet:i}}();function FH(t){var s=t.slice(t[0]==="#"?1:0).slice(0,6);return[parseInt(s.slice(0,2),16),parseInt(s.slice(2,4),16),parseInt(s.slice(4,6),16)]}function kh(t){for(var s=0,r=1;s!=3;++s)r=r*256+(t[s]>255?255:t[s]<0?0:t[s]);return r.toString(16).toUpperCase().slice(1)}function BH(t){var s=t[0]/255,r=t[1]/255,i=t[2]/255,l=Math.max(s,r,i),c=Math.min(s,r,i),u=l-c;if(u===0)return[0,0,s];var h=0,_=0,f=l+c;switch(_=u/(f>1?2-f:f),l){case s:h=((r-i)/u+6)%6;break;case r:h=(i-s)/u+2;break;case i:h=(s-r)/u+4;break}return[h/6,_,f/2]}function UH(t){var s=t[0],r=t[1],i=t[2],l=r*2*(i<.5?i:1-i),c=i-l/2,u=[c,c,c],h=6*s,_;if(r!==0)switch(h|0){case 0:case 6:_=l*h,u[0]+=l,u[1]+=_;break;case 1:_=l*(2-h),u[0]+=_,u[1]+=l;break;case 2:_=l*(h-2),u[1]+=l,u[2]+=_;break;case 3:_=l*(4-h),u[1]+=_,u[2]+=l;break;case 4:_=l*(h-4),u[2]+=l,u[0]+=_;break;case 5:_=l*(6-h),u[2]+=_,u[0]+=l;break}for(var f=0;f!=3;++f)u[f]=Math.round(u[f]*255);return u}function sT(t,s){if(s===0)return t;var r=BH(FH(t));return s<0?r[2]=r[2]*(1+s):r[2]=1-(1-r[2])*(1-s),kh(UH(r))}var sk=6,HH=15,GH=1,Rn=sk;function iT(t){return Math.floor((t+Math.round(128/Rn)/256)*Rn)}function oT(t){return Math.floor((t-5)/Rn*100+.5)/100}function h$(t){return Math.round((t*Rn+5)/Rn*256)/256}function j0(t){return h$(oT(iT(t)))}function PI(t){var s=Math.abs(t-j0(t)),r=Rn;if(s>.005)for(Rn=GH;Rn<HH;++Rn)Math.abs(t-j0(t))<=s&&(s=Math.abs(t-j0(t)),r=Rn);Rn=r}function Ac(t){t.width?(t.wpx=iT(t.width),t.wch=oT(t.wpx),t.MDW=Rn):t.wpx?(t.wch=oT(t.wpx),t.width=h$(t.wch),t.MDW=Rn):typeof t.wch=="number"&&(t.width=h$(t.wch),t.wpx=iT(t.width),t.MDW=Rn),t.customWidth&&delete t.customWidth}var VH=96,ik=VH;function ok(t){return t*96/ik}function wh(t){return t*ik/96}var WH={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function XH(t,s,r,i){s.Borders=[];var l={},c=!1;(t[0].match(gn)||[]).forEach(function(u){var h=st(u);switch($i(h[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":l={},h.diagonalUp&&(l.diagonalUp=Kt(h.diagonalUp)),h.diagonalDown&&(l.diagonalDown=Kt(h.diagonalDown)),s.Borders.push(l);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":c=!0;break;case"</ext>":c=!1;break;default:if(i&&i.WTF&&!c)throw new Error("unrecognized "+h[0]+" in borders")}})}function zH(t,s,r,i){s.Fills=[];var l={},c=!1;(t[0].match(gn)||[]).forEach(function(u){var h=st(u);switch($i(h[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":l={},s.Fills.push(l);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":s.Fills.push(l),l={};break;case"<patternFill":case"<patternFill>":h.patternType&&(l.patternType=h.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":l.bgColor||(l.bgColor={}),h.indexed&&(l.bgColor.indexed=parseInt(h.indexed,10)),h.theme&&(l.bgColor.theme=parseInt(h.theme,10)),h.tint&&(l.bgColor.tint=parseFloat(h.tint)),h.rgb&&(l.bgColor.rgb=h.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":l.fgColor||(l.fgColor={}),h.theme&&(l.fgColor.theme=parseInt(h.theme,10)),h.tint&&(l.fgColor.tint=parseFloat(h.tint)),h.rgb!=null&&(l.fgColor.rgb=h.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":c=!0;break;case"</ext>":c=!1;break;default:if(i&&i.WTF&&!c)throw new Error("unrecognized "+h[0]+" in fills")}})}function YH(t,s,r,i){s.Fonts=[];var l={},c=!1;(t[0].match(gn)||[]).forEach(function(u){var h=st(u);switch($i(h[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":s.Fonts.push(l),l={};break;case"<name":h.val&&(l.name=Ft(h.val));break;case"<name/>":case"</name>":break;case"<b":l.bold=h.val?Kt(h.val):1;break;case"<b/>":l.bold=1;break;case"<i":l.italic=h.val?Kt(h.val):1;break;case"<i/>":l.italic=1;break;case"<u":switch(h.val){case"none":l.underline=0;break;case"single":l.underline=1;break;case"double":l.underline=2;break;case"singleAccounting":l.underline=33;break;case"doubleAccounting":l.underline=34;break}break;case"<u/>":l.underline=1;break;case"<strike":l.strike=h.val?Kt(h.val):1;break;case"<strike/>":l.strike=1;break;case"<outline":l.outline=h.val?Kt(h.val):1;break;case"<outline/>":l.outline=1;break;case"<shadow":l.shadow=h.val?Kt(h.val):1;break;case"<shadow/>":l.shadow=1;break;case"<condense":l.condense=h.val?Kt(h.val):1;break;case"<condense/>":l.condense=1;break;case"<extend":l.extend=h.val?Kt(h.val):1;break;case"<extend/>":l.extend=1;break;case"<sz":h.val&&(l.sz=+h.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":h.val&&(l.vertAlign=h.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":h.val&&(l.family=parseInt(h.val,10));break;case"<family/>":case"</family>":break;case"<scheme":h.val&&(l.scheme=h.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(h.val=="1")break;h.codepage=II[parseInt(h.val,10)];break;case"<color":if(l.color||(l.color={}),h.auto&&(l.color.auto=Kt(h.auto)),h.rgb)l.color.rgb=h.rgb.slice(-6);else if(h.indexed){l.color.index=parseInt(h.indexed,10);var _=kl[l.color.index];l.color.index==81&&(_=kl[1]),_||(_=kl[1]),l.color.rgb=_[0].toString(16)+_[1].toString(16)+_[2].toString(16)}else h.theme&&(l.color.theme=parseInt(h.theme,10),h.tint&&(l.color.tint=parseFloat(h.tint)),h.theme&&r.themeElements&&r.themeElements.clrScheme&&(l.color.rgb=sT(r.themeElements.clrScheme[l.color.theme].rgb,l.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":c=!0;break;case"</AlternateContent>":c=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":c=!0;break;case"</ext>":c=!1;break;default:if(i&&i.WTF&&!c)throw new Error("unrecognized "+h[0]+" in fonts")}})}function KH(t,s,r){s.NumberFmt=[];for(var i=Wo(dt),l=0;l<i.length;++l)s.NumberFmt[i[l]]=dt[i[l]];var c=t[0].match(gn);if(c)for(l=0;l<c.length;++l){var u=st(c[l]);switch($i(u[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var h=$t(Ft(u.formatCode)),_=parseInt(u.numFmtId,10);if(s.NumberFmt[_]=h,_>0){if(_>392){for(_=392;_>60&&s.NumberFmt[_]!=null;--_);s.NumberFmt[_]=h}yl(h,_)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+u[0]+" in numFmts")}}}var af=["numFmtId","fillId","fontId","borderId","xfId"],cf=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function jH(t,s,r){s.CellXf=[];var i,l=!1;(t[0].match(gn)||[]).forEach(function(c){var u=st(c),h=0;switch($i(u[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(i=u,delete i[0],h=0;h<af.length;++h)i[af[h]]&&(i[af[h]]=parseInt(i[af[h]],10));for(h=0;h<cf.length;++h)i[cf[h]]&&(i[cf[h]]=Kt(i[cf[h]]));if(s.NumberFmt&&i.numFmtId>392){for(h=392;h>60;--h)if(s.NumberFmt[i.numFmtId]==s.NumberFmt[h]){i.numFmtId=h;break}}s.CellXf.push(i);break;case"</xf>":break;case"<alignment":case"<alignment/>":var _={};u.vertical&&(_.vertical=u.vertical),u.horizontal&&(_.horizontal=u.horizontal),u.textRotation!=null&&(_.textRotation=u.textRotation),u.indent&&(_.indent=u.indent),u.wrapText&&(_.wrapText=Kt(u.wrapText)),i.alignment=_;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":l=!0;break;case"</AlternateContent>":l=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;default:if(r&&r.WTF&&!l)throw new Error("unrecognized "+u[0]+" in cellXfs")}})}var JH=function(){var s=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,i=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,l=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,c=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(h,_,f){var T={};if(!h)return T;h=h.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var E;return(E=h.match(s))&&KH(E,T,f),(E=h.match(l))&&YH(E,T,_,f),(E=h.match(i))&&zH(E,T,_,f),(E=h.match(c))&&XH(E,T,_,f),(E=h.match(r))&&jH(E,T,f),T}}();function qH(t,s){var r=t.read_shift(2),i=Tn(t);return[r,i]}function ZH(t,s,r){var i={};i.sz=t.read_shift(2)/20;var l=a2(t);l.fItalic&&(i.italic=1),l.fCondense&&(i.condense=1),l.fExtend&&(i.extend=1),l.fShadow&&(i.shadow=1),l.fOutline&&(i.outline=1),l.fStrikeout&&(i.strike=1);var c=t.read_shift(2);switch(c===700&&(i.bold=1),t.read_shift(2)){case 1:i.vertAlign="superscript";break;case 2:i.vertAlign="subscript";break}var u=t.read_shift(1);u!=0&&(i.underline=u);var h=t.read_shift(1);h>0&&(i.family=h);var _=t.read_shift(1);switch(_>0&&(i.charset=_),t.l++,i.color=l2(t),t.read_shift(1)){case 1:i.scheme="major";break;case 2:i.scheme="minor";break}return i.name=Tn(t),i}var QH=En;function eG(t,s){var r=t.l+s,i=t.read_shift(2),l=t.read_shift(2);return t.l=r,{ixfe:i,numFmtId:l}}var tG=En;function rG(t,s,r){var i={};i.NumberFmt=[];for(var l in dt)i.NumberFmt[l]=dt[l];i.CellXf=[],i.Fonts=[];var c=[],u=!1;return eo(t,function(_,f,T){switch(T){case 44:i.NumberFmt[_[0]]=_[1],yl(_[1],_[0]);break;case 43:i.Fonts.push(_),_.color.theme!=null&&s&&s.themeElements&&s.themeElements.clrScheme&&(_.color.rgb=sT(s.themeElements.clrScheme[_.color.theme].rgb,_.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:c[c.length-1]==617&&i.CellXf.push(_);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:u=!0;break;case 36:u=!1;break;case 37:c.push(T),u=!0;break;case 38:c.pop(),u=!1;break;default:if(f.T>0)c.push(T);else if(f.T<0)c.pop();else if(!u||r.WTF&&c[c.length-1]!=37)throw new Error("Unexpected record 0x"+T.toString(16))}}),i}var nG=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function sG(t,s,r){s.themeElements.clrScheme=[];var i={};(t[0].match(gn)||[]).forEach(function(l){var c=st(l);switch(c[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":i.rgb=c.val;break;case"<a:sysClr":i.rgb=c.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":c[0].charAt(1)==="/"?(s.themeElements.clrScheme[nG.indexOf(c[0])]=i,i={}):i.name=c[0].slice(3,c[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+c[0]+" in clrScheme")}})}function iG(){}function oG(){}var lG=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,aG=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,cG=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function uG(t,s,r){s.themeElements={};var i;[["clrScheme",lG,sG],["fontScheme",aG,iG],["fmtScheme",cG,oG]].forEach(function(l){if(!(i=t.match(l[1])))throw new Error(l[0]+" not found in themeElements");l[2](i,s,r)})}var hG=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function lk(t,s){(!t||t.length===0)&&(t=dG());var r,i={};if(!(r=t.match(hG)))throw new Error("themeElements not found in theme");return uG(r[0],i,s),i.raw=t,i}function dG(t,s){var r=[Ey];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function _G(t,s,r){var i=t.l+s,l=t.read_shift(4);if(l!==124226){if(!r.cellStyles){t.l=i;return}var c=t.slice(t.l);t.l=i;var u;try{u=py(c,{type:"array"})}catch{return}var h=qn(u,"theme/theme/theme1.xml",!0);if(h)return lk(h,r)}}function fG(t){return t.read_shift(4)}function TG(t){var s={};switch(s.xclrType=t.read_shift(2),s.nTintShade=t.read_shift(2),s.xclrType){case 0:t.l+=4;break;case 1:s.xclrValue=pG(t,4);break;case 2:s.xclrValue=Yy(t);break;case 3:s.xclrValue=fG(t);break;case 4:t.l+=4;break}return t.l+=8,s}function pG(t,s){return En(t,s)}function EG(t,s){return En(t,s)}function gG(t){var s=t.read_shift(2),r=t.read_shift(2)-4,i=[s];switch(s){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:i[1]=TG(t);break;case 6:i[1]=EG(t,r);break;case 14:case 15:i[1]=t.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+s+" "+r)}return i}function mG(t,s){var r=t.l+s;t.l+=2;var i=t.read_shift(2);t.l+=2;for(var l=t.read_shift(2),c=[];l-- >0;)c.push(gG(t,r-t.l));return{ixfe:i,ext:c}}function $G(t,s){s.forEach(function(r){switch(r[0]){}})}function IG(t,s){return{flags:t.read_shift(4),version:t.read_shift(4),name:Tn(t)}}function OG(t){for(var s=[],r=t.read_shift(4);r-- >0;)s.push([t.read_shift(4),t.read_shift(4)]);return s}function SG(t){return t.l+=4,t.read_shift(4)!=0}function RG(t,s,r){var i={Types:[],Cell:[],Value:[]},l=r||{},c=[],u=!1,h=2;return eo(t,function(_,f,T){switch(T){case 335:i.Types.push({name:_.name});break;case 51:_.forEach(function(E){h==1?i.Cell.push({type:i.Types[E[0]-1].name,index:E[1]}):h==0&&i.Value.push({type:i.Types[E[0]-1].name,index:E[1]})});break;case 337:h=_?1:0;break;case 338:h=2;break;case 35:c.push(T),u=!0;break;case 36:c.pop(),u=!1;break;default:if(!f.T){if(!u||l.WTF&&c[c.length-1]!=35)throw new Error("Unexpected record 0x"+T.toString(16))}}}),i}function LG(t,s,r){var i={Types:[],Cell:[],Value:[]};if(!t)return i;var l=!1,c=2,u;return t.replace(gn,function(h){var _=st(h);switch($i(_[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":i.Types.push({name:_.name});break;case"</metadataType>":break;case"<futureMetadata":for(var f=0;f<i.Types.length;++f)i.Types[f].name==_.name&&(u=i.Types[f]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":c==1?i.Cell.push({type:i.Types[_.t-1].name,index:+_.v}):c==0&&i.Value.push({type:i.Types[_.t-1].name,index:+_.v});break;case"</rc>":break;case"<cellMetadata":c=1;break;case"</cellMetadata>":c=2;break;case"<valueMetadata":c=0;break;case"</valueMetadata>":c=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":l=!0;break;case"</ext>":l=!1;break;case"<rvb":if(!u)break;u.offsets||(u.offsets=[]),u.offsets.push(+_.i);break;default:if(!l&&r.WTF)throw new Error("unrecognized "+_[0]+" in metadata")}return h}),i}function AG(t){var s=[];if(!t)return s;var r=1;return(t.match(gn)||[]).forEach(function(i){var l=st(i);switch(l[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete l[0],l.i?r=l.i:l.i=r,s.push(l);break}}),s}function CG(t){var s={};s.i=t.read_shift(4);var r={};r.r=t.read_shift(4),r.c=t.read_shift(4),s.r=_t(r);var i=t.read_shift(1);return i&2&&(s.l="1"),i&8&&(s.a="1"),s}function vG(t,s,r){var i=[];return eo(t,function(c,u,h){switch(h){case 63:i.push(c);break;default:if(!u.T)throw new Error("Unexpected record 0x"+h.toString(16))}}),i}function NG(t,s,r,i){if(!t)return t;var l=i||{},c=!1;eo(t,function(h,_,f){switch(f){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:c=!0;break;case 36:c=!1;break;default:if(!_.T){if(!c||l.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}},l)}function xG(t,s){if(!t)return"??";var r=(t.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return s["!id"][r].Target}function MN(t,s,r,i){var l=Array.isArray(t),c;s.forEach(function(u){var h=Gs(u.ref);if(l?(t[h.r]||(t[h.r]=[]),c=t[h.r][h.c]):c=t[u.ref],!c){c={t:"z"},l?t[h.r][h.c]=c:t[u.ref]=c;var _=zr(t["!ref"]||"BDWGO1000001:A1");_.s.r>h.r&&(_.s.r=h.r),_.e.r<h.r&&(_.e.r=h.r),_.s.c>h.c&&(_.s.c=h.c),_.e.c<h.c&&(_.e.c=h.c);var f=Ct(_);f!==t["!ref"]&&(t["!ref"]=f)}c.c||(c.c=[]);var T={a:u.author,t:u.t,r:u.r,T:r};u.h&&(T.h=u.h);for(var E=c.c.length-1;E>=0;--E){if(!r&&c.c[E].T)return;r&&!c.c[E].T&&c.c.splice(E,1)}if(r&&i){for(E=0;E<i.length;++E)if(T.a==i[E].id){T.a=i[E].name||T.a;break}}c.c.push(T)})}function bG(t,s){if(t.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],i=[],l=t.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);l&&l[1]&&l[1].split(/<\/\w*:?author>/).forEach(function(u){if(!(u===""||u.trim()==="")){var h=u.match(/<(?:\w+:)?author[^>]*>(.*)/);h&&r.push(h[1])}});var c=t.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return c&&c[1]&&c[1].split(/<\/\w*:?comment>/).forEach(function(u){if(!(u===""||u.trim()==="")){var h=u.match(/<(?:\w+:)?comment[^>]*>/);if(h){var _=st(h[0]),f={author:_.authorId&&r[_.authorId]||"sheetjsghost",ref:_.ref,guid:_.guid},T=Gs(_.ref);if(!(s.sheetRows&&s.sheetRows<=T.r)){var E=u.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),g=!!E&&!!E[1]&&DI(E[1])||{r:"",t:"",h:""};f.r=g.r,g.r=="<t></t>"&&(g.t=g.h=""),f.t=(g.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),s.cellHTML&&(f.h=g.h),i.push(f)}}}}),i}function yG(t,s){var r=[],i=!1,l={},c=0;return t.replace(gn,function(h,_){var f=st(h);switch($i(f[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":l={author:f.personId,guid:f.id,ref:f.ref,T:1};break;case"</threadedComment>":l.t!=null&&r.push(l);break;case"<text>":case"<text":c=_+h.length;break;case"</text>":l.t=t.slice(c,_).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":i=!0;break;case"</mentions>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&s.WTF)throw new Error("unrecognized "+f[0]+" in threaded comments")}return h}),r}function kG(t,s){var r=[],i=!1;return t.replace(gn,function(c){var u=st(c);switch($i(u[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:u.displayname,id:u.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(!i&&s.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return c}),r}function wG(t){var s={};s.iauthor=t.read_shift(4);var r=ql(t);return s.rfx=r.s,s.ref=_t(r.s),t.l+=16,s}var MG=Tn;function DG(t,s){var r=[],i=[],l={},c=!1;return eo(t,function(h,_,f){switch(f){case 632:i.push(h);break;case 635:l=h;break;case 637:l.t=h.t,l.h=h.h,l.r=h.r;break;case 636:if(l.author=i[l.iauthor],delete l.iauthor,s.sheetRows&&l.rfx&&s.sheetRows<=l.rfx.r)break;l.t||(l.t=""),delete l.rfx,r.push(l);break;case 3072:break;case 35:c=!0;break;case 36:c=!1;break;case 37:break;case 38:break;default:if(!_.T){if(!c||s.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}),r}var PG="application/vnd.ms-office.vbaProject";function FG(t){var s=Et.utils.cfb_new({root:"R"});return t.FullPaths.forEach(function(r,i){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var l=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Et.utils.cfb_add(s,l,t.FileIndex[i].content)}}),Et.write(s)}function BG(){return{"!type":"dialog"}}function UG(){return{"!type":"dialog"}}function HG(){return{"!type":"macro"}}function GG(){return{"!type":"macro"}}var hc=function(){var t=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,s={r:0,c:0};function r(i,l,c,u){var h=!1,_=!1;c.length==0?_=!0:c.charAt(0)=="["&&(_=!0,c=c.slice(1,-1)),u.length==0?h=!0:u.charAt(0)=="["&&(h=!0,u=u.slice(1,-1));var f=c.length>0?parseInt(c,10)|0:0,T=u.length>0?parseInt(u,10)|0:0;return h?T+=s.c:--T,_?f+=s.r:--f,l+(h?"":"$")+Ln(T)+(_?"":"$")+es(f)}return function(l,c){return s=c,l.replace(t,r)}}(),ak=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,VG=function(){return function(s,r){return s.replace(ak,function(i,l,c,u,h,_){var f=My(u)-(c?0:r.c),T=wy(_)-(h?0:r.r),E=T==0?"":h?T+1:"["+T+"]",g=f==0?"":c?f+1:"["+f+"]";return l+"R"+E+"C"+g})}}();function ck(t,s){return t.replace(ak,function(r,i,l,c,u,h){return i+(l=="$"?l+c:Ln(My(c)+s.c))+(u=="$"?u+h:es(wy(h)+s.r))})}function WG(t,s,r){var i=xI(s),l=i.s,c=Gs(r),u={r:c.r-l.r,c:c.c-l.c};return ck(t,u)}function XG(t){return t.length!=1}function DN(t){return t.replace(/_xlfn\./g,"")}function mr(t){t.l+=1}function Xo(t,s){var r=t.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function uk(t,s,r){var i=2;if(r){if(r.biff>=2&&r.biff<=5)return hk(t);r.biff==12&&(i=4)}var l=t.read_shift(i),c=t.read_shift(i),u=Xo(t),h=Xo(t);return{s:{r:l,c:u[0],cRel:u[1],rRel:u[2]},e:{r:c,c:h[0],cRel:h[1],rRel:h[2]}}}function hk(t){var s=Xo(t),r=Xo(t),i=t.read_shift(1),l=t.read_shift(1);return{s:{r:s[0],c:i,cRel:s[1],rRel:s[2]},e:{r:r[0],c:l,cRel:r[1],rRel:r[2]}}}function zG(t,s,r){if(r.biff<8)return hk(t);var i=t.read_shift(r.biff==12?4:2),l=t.read_shift(r.biff==12?4:2),c=Xo(t),u=Xo(t);return{s:{r:i,c:c[0],cRel:c[1],rRel:c[2]},e:{r:l,c:u[0],cRel:u[1],rRel:u[2]}}}function dk(t,s,r){if(r&&r.biff>=2&&r.biff<=5)return YG(t);var i=t.read_shift(r&&r.biff==12?4:2),l=Xo(t);return{r:i,c:l[0],cRel:l[1],rRel:l[2]}}function YG(t){var s=Xo(t),r=t.read_shift(1);return{r:s[0],c:r,cRel:s[1],rRel:s[2]}}function KG(t){var s=t.read_shift(2),r=t.read_shift(2);return{r:s,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function jG(t,s,r){var i=r&&r.biff?r.biff:8;if(i>=2&&i<=5)return JG(t);var l=t.read_shift(i>=12?4:2),c=t.read_shift(2),u=(c&16384)>>14,h=(c&32768)>>15;if(c&=16383,h==1)for(;l>524287;)l-=1048576;if(u==1)for(;c>8191;)c=c-16384;return{r:l,c,cRel:u,rRel:h}}function JG(t){var s=t.read_shift(2),r=t.read_shift(1),i=(s&32768)>>15,l=(s&16384)>>14;return s&=16383,i==1&&s>=8192&&(s=s-16384),l==1&&r>=128&&(r=r-256),{r:s,c:r,cRel:l,rRel:i}}function qG(t,s,r){var i=(t[t.l++]&96)>>5,l=uk(t,r.biff>=2&&r.biff<=5?6:8,r);return[i,l]}function ZG(t,s,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2,"i"),c=8;if(r)switch(r.biff){case 5:t.l+=12,c=6;break;case 12:c=12;break}var u=uk(t,c,r);return[i,l,u]}function QG(t,s,r){var i=(t[t.l++]&96)>>5;return t.l+=r&&r.biff>8?12:r.biff<8?6:8,[i]}function e4(t,s,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2),c=8;if(r)switch(r.biff){case 5:t.l+=12,c=6;break;case 12:c=12;break}return t.l+=c,[i,l]}function t4(t,s,r){var i=(t[t.l++]&96)>>5,l=zG(t,s-1,r);return[i,l]}function r4(t,s,r){var i=(t[t.l++]&96)>>5;return t.l+=r.biff==2?6:r.biff==12?14:7,[i]}function PN(t){var s=t[t.l+1]&1,r=1;return t.l+=4,[s,r]}function n4(t,s,r){t.l+=2;for(var i=t.read_shift(r&&r.biff==2?1:2),l=[],c=0;c<=i;++c)l.push(t.read_shift(r&&r.biff==2?1:2));return l}function s4(t,s,r){var i=t[t.l+1]&255?1:0;return t.l+=2,[i,t.read_shift(r&&r.biff==2?1:2)]}function i4(t,s,r){var i=t[t.l+1]&255?1:0;return t.l+=2,[i,t.read_shift(r&&r.biff==2?1:2)]}function o4(t){var s=t[t.l+1]&255?1:0;return t.l+=2,[s,t.read_shift(2)]}function l4(t,s,r){var i=t[t.l+1]&255?1:0;return t.l+=r&&r.biff==2?3:4,[i]}function _k(t){var s=t.read_shift(1),r=t.read_shift(1);return[s,r]}function a4(t){return t.read_shift(2),_k(t)}function c4(t){return t.read_shift(2),_k(t)}function u4(t,s,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=dk(t,0,r);return[i,l]}function h4(t,s,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=jG(t,0,r);return[i,l]}function d4(t,s,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(2);r&&r.biff==5&&(t.l+=12);var c=dk(t,0,r);return[i,l,c]}function _4(t,s,r){var i=(t[t.l]&96)>>5;t.l+=1;var l=t.read_shift(r&&r.biff<=3?1:2);return[fV[l],pk[l],i]}function f4(t,s,r){var i=t[t.l++],l=t.read_shift(1),c=r&&r.biff<=3?[i==88?-1:0,t.read_shift(1)]:T4(t);return[l,(c[0]===0?pk:_V)[c[1]]]}function T4(t){return[t[t.l+1]>>7,t.read_shift(2)&32767]}function p4(t,s,r){t.l+=r&&r.biff==2?3:4}function E4(t,s,r){if(t.l++,r&&r.biff==12)return[t.read_shift(4,"i"),0];var i=t.read_shift(2),l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function g4(t){return t.l++,Zl[t.read_shift(1)]}function m4(t){return t.l++,t.read_shift(2)}function $4(t){return t.l++,t.read_shift(1)!==0}function I4(t){return t.l++,_n(t)}function O4(t,s,r){return t.l++,Yh(t,s-1,r)}function S4(t,s){var r=[t.read_shift(1)];if(s==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=fr(t,1)?"TRUE":"FALSE",s!=12&&(t.l+=7);break;case 37:case 16:r[1]=Zl[t[t.l]],t.l+=s==12?4:8;break;case 0:t.l+=8;break;case 1:r[1]=_n(t);break;case 2:r[1]=Ql(t,0,{biff:s>0&&s<8?2:s});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function R4(t,s,r){for(var i=t.read_shift(r.biff==12?4:2),l=[],c=0;c!=i;++c)l.push((r.biff==12?ql:AT)(t));return l}function L4(t,s,r){var i=0,l=0;r.biff==12?(i=t.read_shift(4),l=t.read_shift(4)):(l=1+t.read_shift(1),i=1+t.read_shift(2)),r.biff>=2&&r.biff<8&&(--i,--l==0&&(l=256));for(var c=0,u=[];c!=i&&(u[c]=[]);++c)for(var h=0;h!=l;++h)u[c][h]=S4(t,r.biff);return u}function A4(t,s,r){var i=t.read_shift(1)>>>5&3,l=!r||r.biff>=8?4:2,c=t.read_shift(l);switch(r.biff){case 2:t.l+=5;break;case 3:case 4:t.l+=8;break;case 5:t.l+=12;break}return[i,0,c]}function C4(t,s,r){if(r.biff==5)return v4(t);var i=t.read_shift(1)>>>5&3,l=t.read_shift(2),c=t.read_shift(4);return[i,l,c]}function v4(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2,"i");t.l+=8;var i=t.read_shift(2);return t.l+=12,[s,r,i]}function N4(t,s,r){var i=t.read_shift(1)>>>5&3;t.l+=r&&r.biff==2?3:4;var l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function x4(t,s,r){var i=t.read_shift(1)>>>5&3,l=t.read_shift(r&&r.biff==2?1:2);return[i,l]}function b4(t,s,r){var i=t.read_shift(1)>>>5&3;return t.l+=4,r.biff<8&&t.l--,r.biff==12&&(t.l+=2),[i]}function y4(t,s,r){var i=(t[t.l++]&96)>>5,l=t.read_shift(2),c=4;if(r)switch(r.biff){case 5:c=15;break;case 12:c=6;break}return t.l+=c,[i,l]}var k4=En,w4=En,M4=En;function jh(t,s,r){return t.l+=2,[KG(t)]}function FI(t){return t.l+=6,[]}var D4=jh,P4=FI,F4=FI,B4=jh;function fk(t){return t.l+=2,[Ir(t),t.read_shift(2)&1]}var U4=jh,H4=fk,G4=FI,V4=jh,W4=jh,X4=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function z4(t){t.l+=2;var s=t.read_shift(2),r=t.read_shift(2),i=t.read_shift(4),l=t.read_shift(2),c=t.read_shift(2),u=X4[r>>2&31];return{ixti:s,coltype:r&3,rt:u,idx:i,c:l,C:c}}function Y4(t){return t.l+=2,[t.read_shift(4)]}function K4(t,s,r){return t.l+=5,t.l+=2,t.l+=r.biff==2?1:4,["PTGSHEET"]}function j4(t,s,r){return t.l+=r.biff==2?4:5,["PTGENDSHEET"]}function J4(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function q4(t){var s=t.read_shift(1)>>>5&3,r=t.read_shift(2);return[s,r]}function Z4(t){return t.l+=4,[0,0]}var FN={1:{n:"PtgExp",f:E4},2:{n:"PtgTbl",f:M4},3:{n:"PtgAdd",f:mr},4:{n:"PtgSub",f:mr},5:{n:"PtgMul",f:mr},6:{n:"PtgDiv",f:mr},7:{n:"PtgPower",f:mr},8:{n:"PtgConcat",f:mr},9:{n:"PtgLt",f:mr},10:{n:"PtgLe",f:mr},11:{n:"PtgEq",f:mr},12:{n:"PtgGe",f:mr},13:{n:"PtgGt",f:mr},14:{n:"PtgNe",f:mr},15:{n:"PtgIsect",f:mr},16:{n:"PtgUnion",f:mr},17:{n:"PtgRange",f:mr},18:{n:"PtgUplus",f:mr},19:{n:"PtgUminus",f:mr},20:{n:"PtgPercent",f:mr},21:{n:"PtgParen",f:mr},22:{n:"PtgMissArg",f:mr},23:{n:"PtgStr",f:O4},26:{n:"PtgSheet",f:K4},27:{n:"PtgEndSheet",f:j4},28:{n:"PtgErr",f:g4},29:{n:"PtgBool",f:$4},30:{n:"PtgInt",f:m4},31:{n:"PtgNum",f:I4},32:{n:"PtgArray",f:r4},33:{n:"PtgFunc",f:_4},34:{n:"PtgFuncVar",f:f4},35:{n:"PtgName",f:A4},36:{n:"PtgRef",f:u4},37:{n:"PtgArea",f:qG},38:{n:"PtgMemArea",f:N4},39:{n:"PtgMemErr",f:k4},40:{n:"PtgMemNoMem",f:w4},41:{n:"PtgMemFunc",f:x4},42:{n:"PtgRefErr",f:b4},43:{n:"PtgAreaErr",f:QG},44:{n:"PtgRefN",f:h4},45:{n:"PtgAreaN",f:t4},46:{n:"PtgMemAreaN",f:J4},47:{n:"PtgMemNoMemN",f:q4},57:{n:"PtgNameX",f:C4},58:{n:"PtgRef3d",f:d4},59:{n:"PtgArea3d",f:ZG},60:{n:"PtgRefErr3d",f:y4},61:{n:"PtgAreaErr3d",f:e4},255:{}},Q4={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},eV={1:{n:"PtgElfLel",f:fk},2:{n:"PtgElfRw",f:V4},3:{n:"PtgElfCol",f:D4},6:{n:"PtgElfRwV",f:W4},7:{n:"PtgElfColV",f:B4},10:{n:"PtgElfRadical",f:U4},11:{n:"PtgElfRadicalS",f:G4},13:{n:"PtgElfColS",f:P4},15:{n:"PtgElfColSV",f:F4},16:{n:"PtgElfRadicalLel",f:H4},25:{n:"PtgList",f:z4},29:{n:"PtgSxName",f:Y4},255:{}},tV={0:{n:"PtgAttrNoop",f:Z4},1:{n:"PtgAttrSemi",f:l4},2:{n:"PtgAttrIf",f:i4},4:{n:"PtgAttrChoose",f:n4},8:{n:"PtgAttrGoto",f:s4},16:{n:"PtgAttrSum",f:p4},32:{n:"PtgAttrBaxcel",f:PN},33:{n:"PtgAttrBaxcel",f:PN},64:{n:"PtgAttrSpace",f:a4},65:{n:"PtgAttrSpaceSemi",f:c4},128:{n:"PtgAttrIfError",f:o4},255:{}};function Jh(t,s,r,i){if(i.biff<8)return En(t,s);for(var l=t.l+s,c=[],u=0;u!==r.length;++u)switch(r[u][0]){case"PtgArray":r[u][1]=L4(t,0,i),c.push(r[u][1]);break;case"PtgMemArea":r[u][2]=R4(t,r[u][1],i),c.push(r[u][2]);break;case"PtgExp":i&&i.biff==12&&(r[u][1][1]=t.read_shift(4),c.push(r[u][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[u][0]}return s=l-t.l,s!==0&&c.push(En(t,s)),c}function qh(t,s,r){for(var i=t.l+s,l,c,u=[];i!=t.l;)s=i-t.l,c=t[t.l],l=FN[c]||FN[Q4[c]],(c===24||c===25)&&(l=(c===24?eV:tV)[t[t.l+1]]),!l||!l.f?En(t,s):u.push([l.n,l.f(t,s,r)]);return u}function rV(t){for(var s=[],r=0;r<t.length;++r){for(var i=t[r],l=[],c=0;c<i.length;++c){var u=i[c];if(u)switch(u[0]){case 2:l.push('"'+u[1].replace(/"/g,'""')+'"');break;default:l.push(u[1])}else l.push("")}s.push(l.join(","))}return s.join(";")}var nV={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function sV(t,s){if(!t&&!(s&&s.biff<=5&&s.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(t)?"'"+t+"'":t}function Tk(t,s,r){if(!t)return"SH33TJSERR0";if(r.biff>8&&(!t.XTI||!t.XTI[s]))return t.SheetNames[s];if(!t.XTI)return"SH33TJSERR6";var i=t.XTI[s];if(r.biff<8)return s>1e4&&(s-=65536),s<0&&(s=-s),s==0?"":t.XTI[s-1];if(!i)return"SH33TJSERR1";var l="";if(r.biff>8)switch(t[i[0]][0]){case 357:return l=i[1]==-1?"#REF":t.SheetNames[i[1]],i[1]==i[2]?l:l+":"+t.SheetNames[i[2]];case 358:return r.SID!=null?t.SheetNames[r.SID]:"SH33TJSSAME"+t[i[0]][0];case 355:default:return"SH33TJSSRC"+t[i[0]][0]}switch(t[i[0]][0][0]){case 1025:return l=i[1]==-1?"#REF":t.SheetNames[i[1]]||"SH33TJSERR3",i[1]==i[2]?l:l+":"+t.SheetNames[i[2]];case 14849:return t[i[0]].slice(1).map(function(c){return c.Name}).join(";;");default:return t[i[0]][0][3]?(l=i[1]==-1?"#REF":t[i[0]][0][3][i[1]]||"SH33TJSERR4",i[1]==i[2]?l:l+":"+t[i[0]][0][3][i[2]]):"SH33TJSERR2"}}function BN(t,s,r){var i=Tk(t,s,r);return i=="#REF"?i:sV(i,r)}function hn(t,s,r,i,l){var c=l&&l.biff||8,u={s:{c:0,r:0}},h=[],_,f,T,E=0,g=0,S,R="";if(!t[0]||!t[0][0])return"";for(var L=-1,N="",C=0,A=t[0].length;C<A;++C){var I=t[0][C];switch(I[0]){case"PtgUminus":h.push("-"+h.pop());break;case"PtgUplus":h.push("+"+h.pop());break;case"PtgPercent":h.push(h.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(_=h.pop(),f=h.pop(),L>=0){switch(t[0][L][1][0]){case 0:N=ur(" ",t[0][L][1][1]);break;case 1:N=ur("\r",t[0][L][1][1]);break;default:if(N="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][L][1][0])}f=f+N,L=-1}h.push(f+nV[I[0]]+_);break;case"PtgIsect":_=h.pop(),f=h.pop(),h.push(f+" "+_);break;case"PtgUnion":_=h.pop(),f=h.pop(),h.push(f+","+_);break;case"PtgRange":_=h.pop(),f=h.pop(),h.push(f+":"+_);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":T=eh(I[1][1],u,l),h.push(th(T,c));break;case"PtgRefN":T=r?eh(I[1][1],r,l):I[1][1],h.push(th(T,c));break;case"PtgRef3d":E=I[1][1],T=eh(I[1][2],u,l),R=BN(i,E,l),h.push(R+"!"+th(T,c));break;case"PtgFunc":case"PtgFuncVar":var k=I[1][0],H=I[1][1];k||(k=0),k&=127;var G=k==0?[]:h.slice(-k);h.length-=k,H==="User"&&(H=G.shift()),h.push(H+"("+G.join(",")+")");break;case"PtgBool":h.push(I[1]?"TRUE":"FALSE");break;case"PtgInt":h.push(I[1]);break;case"PtgNum":h.push(String(I[1]));break;case"PtgStr":h.push('"'+I[1].replace(/"/g,'""')+'"');break;case"PtgErr":h.push(I[1]);break;case"PtgAreaN":S=mN(I[1][1],r?{s:r}:u,l),h.push(Y0(S,l));break;case"PtgArea":S=mN(I[1][1],u,l),h.push(Y0(S,l));break;case"PtgArea3d":E=I[1][1],S=I[1][2],R=BN(i,E,l),h.push(R+"!"+Y0(S,l));break;case"PtgAttrSum":h.push("SUM("+h.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":g=I[1][2];var x=(i.names||[])[g-1]||(i[0]||[])[g],U=x?x.Name:"SH33TJSNAME"+String(g);U&&U.slice(0,6)=="_xlfn."&&!l.xlfn&&(U=U.slice(6)),h.push(U);break;case"PtgNameX":var B=I[1][1];g=I[1][2];var re;if(l.biff<=5)B<0&&(B=-B),i[B]&&(re=i[B][g]);else{var Z="";if(((i[B]||[])[0]||[])[0]==14849||(((i[B]||[])[0]||[])[0]==1025?i[B][g]&&i[B][g].itab>0&&(Z=i.SheetNames[i[B][g].itab-1]+"!"):Z=i.SheetNames[g-1]+"!"),i[B]&&i[B][g])Z+=i[B][g].Name;else if(i[0]&&i[0][g])Z+=i[0][g].Name;else{var se=(Tk(i,B,l)||"").split(";;");se[g-1]?Z=se[g-1]:Z+="SH33TJSERRX"}h.push(Z);break}re||(re={Name:"SH33TJSERRY"}),h.push(re.Name);break;case"PtgParen":var pe="(",Me=")";if(L>=0){switch(N="",t[0][L][1][0]){case 2:pe=ur(" ",t[0][L][1][1])+pe;break;case 3:pe=ur("\r",t[0][L][1][1])+pe;break;case 4:Me=ur(" ",t[0][L][1][1])+Me;break;case 5:Me=ur("\r",t[0][L][1][1])+Me;break;default:if(l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+t[0][L][1][0])}L=-1}h.push(pe+h.pop()+Me);break;case"PtgRefErr":h.push("#REF!");break;case"PtgRefErr3d":h.push("#REF!");break;case"PtgExp":T={c:I[1][1],r:I[1][0]};var Oe={c:r.c,r:r.r};if(i.sharedf[_t(T)]){var we=i.sharedf[_t(T)];h.push(hn(we,u,Oe,i,l))}else{var ye=!1;for(_=0;_!=i.arrayf.length;++_)if(f=i.arrayf[_],!(T.c<f[0].s.c||T.c>f[0].e.c)&&!(T.r<f[0].s.r||T.r>f[0].e.r)){h.push(hn(f[1],u,Oe,i,l)),ye=!0;break}ye||h.push(I[1])}break;case"PtgArray":h.push("{"+rV(I[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":L=C;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":h.push("");break;case"PtgAreaErr":h.push("#REF!");break;case"PtgAreaErr3d":h.push("#REF!");break;case"PtgList":h.push("Table"+I[1].idx+"[#"+I[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(I));default:throw new Error("Unrecognized Formula Token: "+String(I))}var Re=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(l.biff!=3&&L>=0&&Re.indexOf(t[0][C][0])==-1){I=t[0][L];var j=!0;switch(I[1][0]){case 4:j=!1;case 0:N=ur(" ",I[1][1]);break;case 5:j=!1;case 1:N=ur("\r",I[1][1]);break;default:if(N="",l.WTF)throw new Error("Unexpected PtgAttrSpaceType "+I[1][0])}h.push((j?N:"")+h.pop()+(j?"":N)),L=-1}}if(h.length>1&&l.WTF)throw new Error("bad formula stack");return h[0]}function iV(t,s,r){var i=t.l+s,l=r.biff==2?1:2,c,u=t.read_shift(l);if(u==65535)return[[],En(t,s-2)];var h=qh(t,u,r);return s!==u+l&&(c=Jh(t,s-u-l,h,r)),t.l=i,[h,c]}function oV(t,s,r){var i=t.l+s,l=r.biff==2?1:2,c,u=t.read_shift(l);if(u==65535)return[[],En(t,s-2)];var h=qh(t,u,r);return s!==u+l&&(c=Jh(t,s-u-l,h,r)),t.l=i,[h,c]}function lV(t,s,r,i){var l=t.l+s,c=qh(t,i,r),u;return l!==t.l&&(u=Jh(t,l-t.l,c,r)),[c,u]}function aV(t,s,r){var i=t.l+s,l,c=t.read_shift(2),u=qh(t,c,r);return c==65535?[[],En(t,s-2)]:(s!==c+2&&(l=Jh(t,i-c-2,u,r)),[u,l])}function cV(t){var s;if(Vi(t,t.l+6)!==65535)return[_n(t),"n"];switch(t[t.l]){case 0:return t.l+=8,["String","s"];case 1:return s=t[t.l+2]===1,t.l+=8,[s,"b"];case 2:return s=t[t.l+2],t.l+=8,[s,"e"];case 3:return t.l+=8,["","s"]}return[]}function J0(t,s,r){var i=t.l+s,l=Ii(t);r.biff==2&&++t.l;var c=cV(t),u=t.read_shift(1);r.biff!=2&&(t.read_shift(1),r.biff>=5&&t.read_shift(4));var h=oV(t,i-t.l,r);return{cell:l,val:c[0],formula:h,shared:u>>3&1,tt:c[1]}}function CT(t,s,r){var i=t.read_shift(4),l=qh(t,i,r),c=t.read_shift(4),u=c>0?Jh(t,c,l,r):null;return[l,u]}var uV=CT,vT=CT,hV=CT,dV=CT,_V={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},pk={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},fV={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function UN(t){return t.slice(0,3)=="of:"&&(t=t.slice(3)),t.charCodeAt(0)==61&&(t=t.slice(1),t.charCodeAt(0)==61&&(t=t.slice(1))),t=t.replace(/COM\.MICROSOFT\./g,""),t=t.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(s,r){return r.replace(/\./g,"")}),t=t.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),t.replace(/[;~]/g,",").replace(/\|/g,";")}function q0(t){var s=t.split(":"),r=s[0].split(".")[0];return[r,s[0].split(".")[1]+(s.length>1?":"+(s[1].split(".")[1]||s[1].split(".")[0]):"")]}var ih={},dc={};function oh(t,s){if(t){var r=[.7,.7,.75,.75,.3,.3];s=="xlml"&&(r=[1,1,1,1,.5,.5]),t.left==null&&(t.left=r[0]),t.right==null&&(t.right=r[1]),t.top==null&&(t.top=r[2]),t.bottom==null&&(t.bottom=r[3]),t.header==null&&(t.header=r[4]),t.footer==null&&(t.footer=r[5])}}function Ek(t,s,r,i,l,c){try{i.cellNF&&(t.z=dt[s])}catch(h){if(i.WTF)throw h}if(!(t.t==="z"&&!i.cellStyles)){if(t.t==="d"&&typeof t.v=="string"&&(t.v=Qr(t.v)),(!i||i.cellText!==!1)&&t.t!=="z")try{if(dt[s]==null&&yl(EB[s]||"General",s),t.t==="e")t.w=t.w||Zl[t.v];else if(s===0)if(t.t==="n")(t.v|0)===t.v?t.w=t.v.toString(10):t.w=vh(t.v);else if(t.t==="d"){var u=ns(t.v);(u|0)===u?t.w=u.toString(10):t.w=vh(u)}else{if(t.v===void 0)return"";t.w=Ul(t.v,dc)}else t.t==="d"?t.w=Ss(s,ns(t.v),dc):t.w=Ss(s,t.v,dc)}catch(h){if(i.WTF)throw h}if(i.cellStyles&&r!=null)try{t.s=c.Fills[r],t.s.fgColor&&t.s.fgColor.theme&&!t.s.fgColor.rgb&&(t.s.fgColor.rgb=sT(l.themeElements.clrScheme[t.s.fgColor.theme].rgb,t.s.fgColor.tint||0),i.WTF&&(t.s.fgColor.raw_rgb=l.themeElements.clrScheme[t.s.fgColor.theme].rgb)),t.s.bgColor&&t.s.bgColor.theme&&(t.s.bgColor.rgb=sT(l.themeElements.clrScheme[t.s.bgColor.theme].rgb,t.s.bgColor.tint||0),i.WTF&&(t.s.bgColor.raw_rgb=l.themeElements.clrScheme[t.s.bgColor.theme].rgb))}catch(h){if(i.WTF&&c.Fills)throw h}}}function TV(t,s){var r=zr(s);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(t["!ref"]=Ct(r))}var pV=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,EV=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,gV=/<(?:\w:)?hyperlink [^>]*>/mg,mV=/"(\w*:\w*)"/,$V=/<(?:\w:)?col\b[^>]*[\/]?>/g,IV=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,OV=/<(?:\w:)?pageMargins[^>]*\/>/g,gk=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,SV=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,RV=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function LV(t,s,r,i,l,c,u){if(!t)return t;i||(i={"!id":{}});var h=s.dense?[]:{},_={s:{r:2e6,c:2e6},e:{r:0,c:0}},f="",T="",E=t.match(EV);E?(f=t.slice(0,E.index),T=t.slice(E.index+E[0].length)):f=T=t;var g=f.match(gk);g?BI(g[0],h,l,r):(g=f.match(SV))&&AV(g[0],g[1]||"",h,l,r);var S=(f.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(S>0){var R=f.slice(S,S+50).match(mV);R&&TV(h,R[1])}var L=f.match(RV);L&&L[1]&&yV(L[1],l);var N=[];if(s.cellStyles){var C=f.match($V);C&&NV(N,C)}E&&kV(E[1],h,s,_,c,u);var A=T.match(IV);A&&(h["!autofilter"]=xV(A[0]));var I=[],k=T.match(pV);if(k)for(S=0;S!=k.length;++S)I[S]=zr(k[S].slice(k[S].indexOf('"')+1));var H=T.match(gV);H&&CV(h,H,i);var G=T.match(OV);if(G&&(h["!margins"]=vV(st(G[0]))),!h["!ref"]&&_.e.c>=_.s.c&&_.e.r>=_.s.r&&(h["!ref"]=Ct(_)),s.sheetRows>0&&h["!ref"]){var x=zr(h["!ref"]);s.sheetRows<=+x.e.r&&(x.e.r=s.sheetRows-1,x.e.r>_.e.r&&(x.e.r=_.e.r),x.e.r<x.s.r&&(x.s.r=x.e.r),x.e.c>_.e.c&&(x.e.c=_.e.c),x.e.c<x.s.c&&(x.s.c=x.e.c),h["!fullref"]=h["!ref"],h["!ref"]=Ct(x))}return N.length>0&&(h["!cols"]=N),I.length>0&&(h["!merges"]=I),h}function BI(t,s,r,i){var l=st(t);r.Sheets[i]||(r.Sheets[i]={}),l.codeName&&(r.Sheets[i].CodeName=$t(Ft(l.codeName)))}function AV(t,s,r,i,l){BI(t.slice(0,t.indexOf(">")),r,i,l)}function CV(t,s,r){for(var i=Array.isArray(t),l=0;l!=s.length;++l){var c=st(Ft(s[l]),!0);if(!c.ref)return;var u=((r||{})["!id"]||[])[c.id];u?(c.Target=u.Target,c.location&&(c.Target+="#"+$t(c.location))):(c.Target="#"+$t(c.location),u={Target:c.Target,TargetMode:"Internal"}),c.Rel=u,c.tooltip&&(c.Tooltip=c.tooltip,delete c.tooltip);for(var h=zr(c.ref),_=h.s.r;_<=h.e.r;++_)for(var f=h.s.c;f<=h.e.c;++f){var T=_t({c:f,r:_});i?(t[_]||(t[_]=[]),t[_][f]||(t[_][f]={t:"z",v:void 0}),t[_][f].l=c):(t[T]||(t[T]={t:"z",v:void 0}),t[T].l=c)}}}function vV(t){var s={};return["left","right","top","bottom","header","footer"].forEach(function(r){t[r]&&(s[r]=parseFloat(t[r]))}),s}function NV(t,s){for(var r=!1,i=0;i!=s.length;++i){var l=st(s[i],!0);l.hidden&&(l.hidden=Kt(l.hidden));var c=parseInt(l.min,10)-1,u=parseInt(l.max,10)-1;for(l.outlineLevel&&(l.level=+l.outlineLevel||0),delete l.min,delete l.max,l.width=+l.width,!r&&l.width&&(r=!0,PI(l.width)),Ac(l);c<=u;)t[c++]=en(l)}}function xV(t){var s={ref:(t.match(/ref="([^"]*)"/)||[])[1]};return s}var bV=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function yV(t,s){s.Views||(s.Views=[{}]),(t.match(bV)||[]).forEach(function(r,i){var l=st(r);s.Views[i]||(s.Views[i]={}),+l.zoomScale&&(s.Views[i].zoom=+l.zoomScale),Kt(l.rightToLeft)&&(s.Views[i].RTL=!0)})}var kV=function(){var t=/<(?:\w+:)?c[ \/>]/,s=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,i=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,l=/ref=["']([^"']*)["']/,c=xh("v"),u=xh("f");return function(_,f,T,E,g,S){for(var R=0,L="",N=[],C=[],A=0,I=0,k=0,H="",G,x,U=0,B=0,re,Z,se=0,pe=0,Me=Array.isArray(S.CellXf),Oe,we=[],ye=[],Re=Array.isArray(f),j=[],Y={},oe=!1,M=!!T.sheetStubs,Q=_.split(s),J=0,q=Q.length;J!=q;++J){L=Q[J].trim();var he=L.length;if(he!==0){var Ne=0;e:for(R=0;R<he;++R)switch(L[R]){case">":if(L[R-1]!="/"){++R;break e}if(T&&T.cellStyles){if(x=st(L.slice(Ne,R),!0),U=x.r!=null?parseInt(x.r,10):U+1,B=-1,T.sheetRows&&T.sheetRows<U)continue;Y={},oe=!1,x.ht&&(oe=!0,Y.hpt=parseFloat(x.ht),Y.hpx=wh(Y.hpt)),x.hidden=="1"&&(oe=!0,Y.hidden=!0),x.outlineLevel!=null&&(oe=!0,Y.level=+x.outlineLevel),oe&&(j[U-1]=Y)}break;case"<":Ne=R;break}if(Ne>=R)break;if(x=st(L.slice(Ne,R),!0),U=x.r!=null?parseInt(x.r,10):U+1,B=-1,!(T.sheetRows&&T.sheetRows<U)){E.s.r>U-1&&(E.s.r=U-1),E.e.r<U-1&&(E.e.r=U-1),T&&T.cellStyles&&(Y={},oe=!1,x.ht&&(oe=!0,Y.hpt=parseFloat(x.ht),Y.hpx=wh(Y.hpt)),x.hidden=="1"&&(oe=!0,Y.hidden=!0),x.outlineLevel!=null&&(oe=!0,Y.level=+x.outlineLevel),oe&&(j[U-1]=Y)),N=L.slice(R).split(t);for(var Pe=0;Pe!=N.length&&N[Pe].trim().charAt(0)=="<";++Pe);for(N=N.slice(Pe),R=0;R!=N.length;++R)if(L=N[R].trim(),L.length!==0){if(C=L.match(r),A=R,I=0,k=0,L="<c "+(L.slice(0,1)=="<"?">":"")+L,C!=null&&C.length===2){for(A=0,H=C[1],I=0;I!=H.length&&!((k=H.charCodeAt(I)-64)<1||k>26);++I)A=26*A+k;--A,B=A}else++B;for(I=0;I!=L.length&&L.charCodeAt(I)!==62;++I);if(++I,x=st(L.slice(0,I),!0),x.r||(x.r=_t({r:U-1,c:B})),H=L.slice(I),G={t:""},(C=H.match(c))!=null&&C[1]!==""&&(G.v=$t(C[1])),T.cellFormula){if((C=H.match(u))!=null&&C[1]!==""){if(G.f=$t(Ft(C[1])).replace(/\r\n/g,`
`),T.xlfn||(G.f=DN(G.f)),C[0].indexOf('t="array"')>-1)G.F=(H.match(l)||[])[1],G.F.indexOf(":")>-1&&we.push([zr(G.F),G.F]);else if(C[0].indexOf('t="shared"')>-1){Z=st(C[0]);var be=$t(Ft(C[1]));T.xlfn||(be=DN(be)),ye[parseInt(Z.si,10)]=[Z,be,x.r]}}else(C=H.match(/<f[^>]*\/>/))&&(Z=st(C[0]),ye[Z.si]&&(G.f=WG(ye[Z.si][1],ye[Z.si][2],x.r)));var ce=Gs(x.r);for(I=0;I<we.length;++I)ce.r>=we[I][0].s.r&&ce.r<=we[I][0].e.r&&ce.c>=we[I][0].s.c&&ce.c<=we[I][0].e.c&&(G.F=we[I][1])}if(x.t==null&&G.v===void 0)if(G.f||G.F)G.v=0,G.t="n";else if(M)G.t="z";else continue;else G.t=x.t||"n";switch(E.s.c>B&&(E.s.c=B),E.e.c<B&&(E.e.c=B),G.t){case"n":if(G.v==""||G.v==null){if(!M)continue;G.t="z"}else G.v=parseFloat(G.v);break;case"s":if(typeof G.v>"u"){if(!M)continue;G.t="z"}else re=ih[parseInt(G.v,10)],G.v=re.t,G.r=re.r,T.cellHTML&&(G.h=re.h);break;case"str":G.t="s",G.v=G.v!=null?Ft(G.v):"",T.cellHTML&&(G.h=my(G.v));break;case"inlineStr":C=H.match(i),G.t="s",C!=null&&(re=DI(C[1]))?(G.v=re.t,T.cellHTML&&(G.h=re.h)):G.v="";break;case"b":G.v=Kt(G.v);break;case"d":T.cellDates?G.v=Qr(G.v,1):(G.v=ns(Qr(G.v,1)),G.t="n");break;case"e":(!T||T.cellText!==!1)&&(G.w=G.v),G.v=By[G.v];break}if(se=pe=0,Oe=null,Me&&x.s!==void 0&&(Oe=S.CellXf[x.s],Oe!=null&&(Oe.numFmtId!=null&&(se=Oe.numFmtId),T.cellStyles&&Oe.fillId!=null&&(pe=Oe.fillId))),Ek(G,se,pe,T,g,S),T.cellDates&&Me&&G.t=="n"&&xc(dt[se])&&(G.t="d",G.v=LT(G.v)),x.cm&&T.xlmeta){var tt=(T.xlmeta.Cell||[])[+x.cm-1];tt&&tt.type=="XLDAPR"&&(G.D=!0)}if(Re){var b=Gs(x.r);f[b.r]||(f[b.r]=[]),f[b.r][b.c]=G}else f[x.r]=G}}}}j.length>0&&(f["!rows"]=j)}}();function wV(t,s){var r={},i=t.l+s;r.r=t.read_shift(4),t.l+=4;var l=t.read_shift(2);t.l+=1;var c=t.read_shift(1);return t.l=i,c&7&&(r.level=c&7),c&16&&(r.hidden=!0),c&32&&(r.hpt=l/20),r}var MV=ql;function DV(){}function PV(t,s){var r={},i=t[t.l];return++t.l,r.above=!(i&64),r.left=!(i&128),t.l+=18,r.name=i2(t),r}function FV(t){var s=Rs(t);return[s]}function BV(t){var s=Jl(t);return[s]}function UV(t){var s=Rs(t),r=t.read_shift(1);return[s,r,"b"]}function HV(t){var s=Jl(t),r=t.read_shift(1);return[s,r,"b"]}function GV(t){var s=Rs(t),r=t.read_shift(1);return[s,r,"e"]}function VV(t){var s=Jl(t),r=t.read_shift(1);return[s,r,"e"]}function WV(t){var s=Rs(t),r=t.read_shift(4);return[s,r,"s"]}function XV(t){var s=Jl(t),r=t.read_shift(4);return[s,r,"s"]}function zV(t){var s=Rs(t),r=_n(t);return[s,r,"n"]}function mk(t){var s=Jl(t),r=_n(t);return[s,r,"n"]}function YV(t){var s=Rs(t),r=kI(t);return[s,r,"n"]}function KV(t){var s=Jl(t),r=kI(t);return[s,r,"n"]}function jV(t){var s=Rs(t),r=bI(t);return[s,r,"is"]}function JV(t){var s=Rs(t),r=Tn(t);return[s,r,"str"]}function qV(t){var s=Jl(t),r=Tn(t);return[s,r,"str"]}function ZV(t,s,r){var i=t.l+s,l=Rs(t);l.r=r["!row"];var c=t.read_shift(1),u=[l,c,"b"];if(r.cellFormula){t.l+=2;var h=vT(t,i-t.l,r);u[3]=hn(h,null,l,r.supbooks,r)}else t.l=i;return u}function QV(t,s,r){var i=t.l+s,l=Rs(t);l.r=r["!row"];var c=t.read_shift(1),u=[l,c,"e"];if(r.cellFormula){t.l+=2;var h=vT(t,i-t.l,r);u[3]=hn(h,null,l,r.supbooks,r)}else t.l=i;return u}function e3(t,s,r){var i=t.l+s,l=Rs(t);l.r=r["!row"];var c=_n(t),u=[l,c,"n"];if(r.cellFormula){t.l+=2;var h=vT(t,i-t.l,r);u[3]=hn(h,null,l,r.supbooks,r)}else t.l=i;return u}function t3(t,s,r){var i=t.l+s,l=Rs(t);l.r=r["!row"];var c=Tn(t),u=[l,c,"str"];if(r.cellFormula){t.l+=2;var h=vT(t,i-t.l,r);u[3]=hn(h,null,l,r.supbooks,r)}else t.l=i;return u}var r3=ql;function n3(t,s){var r=t.l+s,i=ql(t),l=yI(t),c=Tn(t),u=Tn(t),h=Tn(t);t.l=r;var _={rfx:i,relId:l,loc:c,display:h};return u&&(_.Tooltip=u),_}function s3(){}function i3(t,s,r){var i=t.l+s,l=Dy(t),c=t.read_shift(1),u=[l];if(u[2]=c,r.cellFormula){var h=uV(t,i-t.l,r);u[1]=h}else t.l=i;return u}function o3(t,s,r){var i=t.l+s,l=ql(t),c=[l];if(r.cellFormula){var u=dV(t,i-t.l,r);c[1]=u,t.l=i}else t.l=i;return c}var l3=["left","right","top","bottom","header","footer"];function a3(t){var s={};return l3.forEach(function(r){s[r]=_n(t)}),s}function c3(t){var s=t.read_shift(2);return t.l+=28,{RTL:s&32}}function u3(){}function h3(){}function d3(t,s,r,i,l,c,u){if(!t)return t;var h=s||{};i||(i={"!id":{}});var _=h.dense?[]:{},f,T={s:{r:2e6,c:2e6},e:{r:0,c:0}},E=!1,g=!1,S,R,L,N,C,A,I,k,H,G=[];h.biff=12,h["!row"]=0;var x=0,U=!1,B=[],re={},Z=h.supbooks||l.supbooks||[[]];if(Z.sharedf=re,Z.arrayf=B,Z.SheetNames=l.SheetNames||l.Sheets.map(function(Re){return Re.name}),!h.supbooks&&(h.supbooks=Z,l.Names))for(var se=0;se<l.Names.length;++se)Z[0][se+1]=l.Names[se];var pe=[],Me=[],Oe=!1;lT[16]={n:"BrtShortReal",f:mk};var we;if(eo(t,function(j,Y,oe){if(!g)switch(oe){case 148:f=j;break;case 0:S=j,h.sheetRows&&h.sheetRows<=S.r&&(g=!0),k=es(N=S.r),h["!row"]=S.r,(j.hidden||j.hpt||j.level!=null)&&(j.hpt&&(j.hpx=wh(j.hpt)),Me[j.r]=j);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(R={t:j[2]},j[2]){case"n":R.v=j[1];break;case"s":I=ih[j[1]],R.v=I.t,R.r=I.r;break;case"b":R.v=!!j[1];break;case"e":R.v=j[1],h.cellText!==!1&&(R.w=Zl[R.v]);break;case"str":R.t="s",R.v=j[1];break;case"is":R.t="s",R.v=j[1].t;break}if((L=u.CellXf[j[0].iStyleRef])&&Ek(R,L.numFmtId,null,h,c,u),C=j[0].c==-1?C+1:j[0].c,h.dense?(_[N]||(_[N]=[]),_[N][C]=R):_[Ln(C)+k]=R,h.cellFormula){for(U=!1,x=0;x<B.length;++x){var M=B[x];S.r>=M[0].s.r&&S.r<=M[0].e.r&&C>=M[0].s.c&&C<=M[0].e.c&&(R.F=Ct(M[0]),U=!0)}!U&&j.length>3&&(R.f=j[3])}if(T.s.r>S.r&&(T.s.r=S.r),T.s.c>C&&(T.s.c=C),T.e.r<S.r&&(T.e.r=S.r),T.e.c<C&&(T.e.c=C),h.cellDates&&L&&R.t=="n"&&xc(dt[L.numFmtId])){var Q=vl(R.v);Q&&(R.t="d",R.v=new Date(Q.y,Q.m-1,Q.d,Q.H,Q.M,Q.S,Q.u))}we&&(we.type=="XLDAPR"&&(R.D=!0),we=void 0);break;case 1:case 12:if(!h.sheetStubs||E)break;R={t:"z",v:void 0},C=j[0].c==-1?C+1:j[0].c,h.dense?(_[N]||(_[N]=[]),_[N][C]=R):_[Ln(C)+k]=R,T.s.r>S.r&&(T.s.r=S.r),T.s.c>C&&(T.s.c=C),T.e.r<S.r&&(T.e.r=S.r),T.e.c<C&&(T.e.c=C),we&&(we.type=="XLDAPR"&&(R.D=!0),we=void 0);break;case 176:G.push(j);break;case 49:we=((h.xlmeta||{}).Cell||[])[j-1];break;case 494:var J=i["!id"][j.relId];for(J?(j.Target=J.Target,j.loc&&(j.Target+="#"+j.loc),j.Rel=J):j.relId==""&&(j.Target="#"+j.loc),N=j.rfx.s.r;N<=j.rfx.e.r;++N)for(C=j.rfx.s.c;C<=j.rfx.e.c;++C)h.dense?(_[N]||(_[N]=[]),_[N][C]||(_[N][C]={t:"z",v:void 0}),_[N][C].l=j):(A=_t({c:C,r:N}),_[A]||(_[A]={t:"z",v:void 0}),_[A].l=j);break;case 426:if(!h.cellFormula)break;B.push(j),H=h.dense?_[N][C]:_[Ln(C)+k],H.f=hn(j[1],T,{r:S.r,c:C},Z,h),H.F=Ct(j[0]);break;case 427:if(!h.cellFormula)break;re[_t(j[0].s)]=j[1],H=h.dense?_[N][C]:_[Ln(C)+k],H.f=hn(j[1],T,{r:S.r,c:C},Z,h);break;case 60:if(!h.cellStyles)break;for(;j.e>=j.s;)pe[j.e--]={width:j.w/256,hidden:!!(j.flags&1),level:j.level},Oe||(Oe=!0,PI(j.w/256)),Ac(pe[j.e+1]);break;case 161:_["!autofilter"]={ref:Ct(j)};break;case 476:_["!margins"]=j;break;case 147:l.Sheets[r]||(l.Sheets[r]={}),j.name&&(l.Sheets[r].CodeName=j.name),(j.above||j.left)&&(_["!outline"]={above:j.above,left:j.left});break;case 137:l.Views||(l.Views=[{}]),l.Views[0]||(l.Views[0]={}),j.RTL&&(l.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:E=!0;break;case 36:E=!1;break;case 37:E=!0;break;case 38:E=!1;break;default:if(!Y.T){if(!E||h.WTF)throw new Error("Unexpected record 0x"+oe.toString(16))}}},h),delete h.supbooks,delete h["!row"],!_["!ref"]&&(T.s.r<2e6||f&&(f.e.r>0||f.e.c>0||f.s.r>0||f.s.c>0))&&(_["!ref"]=Ct(f||T)),h.sheetRows&&_["!ref"]){var ye=zr(_["!ref"]);h.sheetRows<=+ye.e.r&&(ye.e.r=h.sheetRows-1,ye.e.r>T.e.r&&(ye.e.r=T.e.r),ye.e.r<ye.s.r&&(ye.s.r=ye.e.r),ye.e.c>T.e.c&&(ye.e.c=T.e.c),ye.e.c<ye.s.c&&(ye.s.c=ye.e.c),_["!fullref"]=_["!ref"],_["!ref"]=Ct(ye))}return G.length>0&&(_["!merges"]=G),pe.length>0&&(_["!cols"]=pe),Me.length>0&&(_["!rows"]=Me),_}function _3(t){var s=[],r=t.match(/^<c:numCache>/),i;(t.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(c){var u=c.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);u&&(s[+u[1]]=r?+u[2]:u[2])});var l=$t((t.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(t.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(c){i=c.replace(/<.*?>/g,"")}),[s,l,i]}function f3(t,s,r,i,l,c){var u=c||{"!type":"chart"};if(!t)return c;var h=0,_=0,f="A",T={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(t.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(E){var g=_3(E);T.s.r=T.s.c=0,T.e.c=h,f=Ln(h),g[0].forEach(function(S,R){u[f+es(R)]={t:"n",v:S,z:g[1]},_=R}),T.e.r<_&&(T.e.r=_),++h}),h>0&&(u["!ref"]=Ct(T)),u}function T3(t,s,r,i,l){if(!t)return t;i||(i={"!id":{}});var c={"!type":"chart","!drawel":null,"!rel":""},u,h=t.match(gk);return h&&BI(h[0],c,l,r),(u=t.match(/drawing r:id="(.*?)"/))&&(c["!rel"]=u[1]),i["!id"][c["!rel"]]&&(c["!drawel"]=i["!id"][c["!rel"]]),c}function p3(t,s){t.l+=10;var r=Tn(t);return{name:r}}function E3(t,s,r,i,l){if(!t)return t;i||(i={"!id":{}});var c={"!type":"chart","!drawel":null,"!rel":""},u=!1;return eo(t,function(_,f,T){switch(T){case 550:c["!rel"]=_;break;case 651:l.Sheets[r]||(l.Sheets[r]={}),_.name&&(l.Sheets[r].CodeName=_.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:u=!0;break;case 36:u=!1;break;case 37:break;case 38:break;default:if(!(f.T>0)){if(!(f.T<0)){if(!u||s.WTF)throw new Error("Unexpected record 0x"+T.toString(16))}}}},s),i["!id"][c["!rel"]]&&(c["!drawel"]=i["!id"][c["!rel"]]),c}var $k=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],g3=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],m3=[],$3=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function HN(t,s){for(var r=0;r!=t.length;++r)for(var i=t[r],l=0;l!=s.length;++l){var c=s[l];if(i[c[0]]==null)i[c[0]]=c[1];else switch(c[2]){case"bool":typeof i[c[0]]=="string"&&(i[c[0]]=Kt(i[c[0]]));break;case"int":typeof i[c[0]]=="string"&&(i[c[0]]=parseInt(i[c[0]],10));break}}}function GN(t,s){for(var r=0;r!=s.length;++r){var i=s[r];if(t[i[0]]==null)t[i[0]]=i[1];else switch(i[2]){case"bool":typeof t[i[0]]=="string"&&(t[i[0]]=Kt(t[i[0]]));break;case"int":typeof t[i[0]]=="string"&&(t[i[0]]=parseInt(t[i[0]],10));break}}}function Ik(t){GN(t.WBProps,$k),GN(t.CalcPr,$3),HN(t.WBView,g3),HN(t.Sheets,m3),dc.date1904=Kt(t.WBProps.date1904)}var I3="][*?/\\".split("");function O3(t,s){if(t.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return I3.forEach(function(i){if(t.indexOf(i)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}var S3=/<\w+:workbook/;function R3(t,s){if(!t)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},i=!1,l="xmlns",c={},u=0;if(t.replace(gn,function(_,f){var T=st(_);switch($i(T[0])){case"<?xml":break;case"<workbook":_.match(S3)&&(l="xmlns"+_.match(/<(\w+):/)[1]),r.xmlns=T[l];break;case"</workbook>":break;case"<fileVersion":delete T[0],r.AppVersion=T;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":$k.forEach(function(E){if(T[E[0]]!=null)switch(E[2]){case"bool":r.WBProps[E[0]]=Kt(T[E[0]]);break;case"int":r.WBProps[E[0]]=parseInt(T[E[0]],10);break;default:r.WBProps[E[0]]=T[E[0]]}}),T.codeName&&(r.WBProps.CodeName=Ft(T.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete T[0],r.WBView.push(T);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(T.state){case"hidden":T.Hidden=1;break;case"veryHidden":T.Hidden=2;break;default:T.Hidden=0}delete T.state,T.name=$t(Ft(T.name)),delete T[0],r.Sheets.push(T);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":i=!0;break;case"</definedNames>":i=!1;break;case"<definedName":c={},c.Name=Ft(T.name),T.comment&&(c.Comment=T.comment),T.localSheetId&&(c.Sheet=+T.localSheetId),Kt(T.hidden||"0")&&(c.Hidden=!0),u=f+_.length;break;case"</definedName>":c.Ref=$t(Ft(t.slice(u,f))),r.Names.push(c);break;case"<definedName/>":break;case"<calcPr":delete T[0],r.CalcPr=T;break;case"<calcPr/>":delete T[0],r.CalcPr=T;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":i=!0;break;case"</AlternateContent>":i=!1;break;case"<revisionPtr":break;default:if(!i&&s.WTF)throw new Error("unrecognized "+T[0]+" in workbook")}return _}),GB.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return Ik(r),r}function L3(t,s){var r={};return r.Hidden=t.read_shift(4),r.iTabID=t.read_shift(4),r.strRelID=a$(t),r.name=Tn(t),r}function A3(t,s){var r={},i=t.read_shift(4);r.defaultThemeVersion=t.read_shift(4);var l=s>8?Tn(t):"";return l.length>0&&(r.CodeName=l),r.autoCompressPictures=!!(i&65536),r.backupFile=!!(i&64),r.checkCompatibility=!!(i&4096),r.date1904=!!(i&1),r.filterPrivacy=!!(i&8),r.hidePivotFieldList=!!(i&1024),r.promptedSolutions=!!(i&16),r.publishItems=!!(i&2048),r.refreshAllConnections=!!(i&262144),r.saveExternalLinkValues=!!(i&128),r.showBorderUnselectedTables=!!(i&4),r.showInkAnnotation=!!(i&32),r.showObjects=["all","placeholders","none"][i>>13&3],r.showPivotChartFilter=!!(i&32768),r.updateLinks=["userSet","never","always"][i>>8&3],r}function C3(t,s){var r={};return t.read_shift(4),r.ArchID=t.read_shift(4),t.l+=s-8,r}function v3(t,s,r){var i=t.l+s;t.l+=4,t.l+=1;var l=t.read_shift(4),c=o2(t),u=hV(t,0,r),h=yI(t);t.l=i;var _={Name:c,Ptg:u};return l<268435455&&(_.Sheet=l),h&&(_.Comment=h),_}function N3(t,s){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},i=[],l=!1;s||(s={}),s.biff=12;var c=[],u=[[]];return u.SheetNames=[],u.XTI=[],lT[16]={n:"BrtFRTArchID$",f:C3},eo(t,function(_,f,T){switch(T){case 156:u.SheetNames.push(_.name),r.Sheets.push(_);break;case 153:r.WBProps=_;break;case 39:_.Sheet!=null&&(s.SID=_.Sheet),_.Ref=hn(_.Ptg,null,null,u,s),delete s.SID,delete _.Ptg,c.push(_);break;case 1036:break;case 357:case 358:case 355:case 667:u[0].length?u.push([T,_]):u[0]=[T,_],u[u.length-1].XTI=[];break;case 362:u.length===0&&(u[0]=[],u[0].XTI=[]),u[u.length-1].XTI=u[u.length-1].XTI.concat(_),u.XTI=u.XTI.concat(_);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:i.push(T),l=!0;break;case 36:i.pop(),l=!1;break;case 37:i.push(T),l=!0;break;case 38:i.pop(),l=!1;break;case 16:break;default:if(!f.T){if(!l||s.WTF&&i[i.length-1]!=37&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+T.toString(16))}}},s),Ik(r),r.Names=c,r.supbooks=u,r}function x3(t,s,r){return s.slice(-4)===".bin"?N3(t,r):R3(t,r)}function b3(t,s,r,i,l,c,u,h){return s.slice(-4)===".bin"?d3(t,i,r,l,c,u,h):LV(t,i,r,l,c,u,h)}function y3(t,s,r,i,l,c,u,h){return s.slice(-4)===".bin"?E3(t,i,r,l,c):T3(t,i,r,l,c)}function k3(t,s,r,i,l,c,u,h){return s.slice(-4)===".bin"?HG():GG()}function w3(t,s,r,i,l,c,u,h){return s.slice(-4)===".bin"?BG():UG()}function M3(t,s,r,i){return s.slice(-4)===".bin"?rG(t,r,i):JH(t,r,i)}function D3(t,s,r){return lk(t,r)}function P3(t,s,r){return s.slice(-4)===".bin"?gH(t,r):pH(t,r)}function F3(t,s,r){return s.slice(-4)===".bin"?DG(t,r):bG(t,r)}function B3(t,s,r){return s.slice(-4)===".bin"?vG(t):AG(t)}function U3(t,s,r,i){return r.slice(-4)===".bin"?NG(t,s,r,i):void 0}function H3(t,s,r){return s.slice(-4)===".bin"?RG(t,s,r):LG(t,s,r)}var Ok=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,Sk=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function ks(t,s){var r=t.split(/\s+/),i=[];if(i[0]=r[0],r.length===1)return i;var l=t.match(Ok),c,u,h,_;if(l)for(_=0;_!=l.length;++_)c=l[_].match(Sk),(u=c[1].indexOf(":"))===-1?i[c[1]]=c[2].slice(1,c[2].length-1):(c[1].slice(0,6)==="xmlns:"?h="xmlns"+c[1].slice(6):h=c[1].slice(u+1),i[h]=c[2].slice(1,c[2].length-1));return i}function G3(t){var s=t.split(/\s+/),r={};if(s.length===1)return r;var i=t.match(Ok),l,c,u,h;if(i)for(h=0;h!=i.length;++h)l=i[h].match(Sk),(c=l[1].indexOf(":"))===-1?r[l[1]]=l[2].slice(1,l[2].length-1):(l[1].slice(0,6)==="xmlns:"?u="xmlns"+l[1].slice(6):u=l[1].slice(c+1),r[u]=l[2].slice(1,l[2].length-1));return r}var lh;function V3(t,s){var r=lh[t]||$t(t);return r==="General"?Ul(s):Ss(r,s)}function W3(t,s,r,i){var l=i;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":l=Kt(i);break;case"i2":case"int":l=parseInt(i,10);break;case"r4":case"float":l=parseFloat(i);break;case"date":case"dateTime.tz":l=Qr(i);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}t[$t(s)]=l}function X3(t,s,r){if(t.t!=="z"){if(!r||r.cellText!==!1)try{t.t==="e"?t.w=t.w||Zl[t.v]:s==="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=vh(t.v):t.w=Ul(t.v):t.w=V3(s||"General",t.v)}catch(c){if(r.WTF)throw c}try{var i=lh[s]||s||"General";if(r.cellNF&&(t.z=i),r.cellDates&&t.t=="n"&&xc(i)){var l=vl(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}catch(c){if(r.WTF)throw c}}}function z3(t,s,r){if(r.cellStyles&&s.Interior){var i=s.Interior;i.Pattern&&(i.patternType=WH[i.Pattern]||i.Pattern)}t[s.ID]=s}function Y3(t,s,r,i,l,c,u,h,_,f){var T="General",E=i.StyleID,g={};f=f||{};var S=[],R=0;for(E===void 0&&h&&(E=h.StyleID),E===void 0&&u&&(E=u.StyleID);c[E]!==void 0&&(c[E].nf&&(T=c[E].nf),c[E].Interior&&S.push(c[E].Interior),!!c[E].Parent);)E=c[E].Parent;switch(r.Type){case"Boolean":i.t="b",i.v=Kt(t);break;case"String":i.t="s",i.r=uN($t(t)),i.v=t.indexOf("<")>-1?$t(s||t).replace(/<.*?>/g,""):i.r;break;case"DateTime":t.slice(-1)!="Z"&&(t+="Z"),i.v=(Qr(t)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),i.v!==i.v?i.v=$t(t):i.v<60&&(i.v=i.v-1),(!T||T=="General")&&(T="yyyy-mm-dd");case"Number":i.v===void 0&&(i.v=+t),i.t||(i.t="n");break;case"Error":i.t="e",i.v=By[t],f.cellText!==!1&&(i.w=t);break;default:t==""&&s==""?i.t="z":(i.t="s",i.v=uN(s||t));break}if(X3(i,T,f),f.cellFormula!==!1)if(i.Formula){var L=$t(i.Formula);L.charCodeAt(0)==61&&(L=L.slice(1)),i.f=hc(L,l),delete i.Formula,i.ArrayRange=="RC"?i.F=hc("RC:RC",l):i.ArrayRange&&(i.F=hc(i.ArrayRange,l),_.push([zr(i.F),i.F]))}else for(R=0;R<_.length;++R)l.r>=_[R][0].s.r&&l.r<=_[R][0].e.r&&l.c>=_[R][0].s.c&&l.c<=_[R][0].e.c&&(i.F=_[R][1]);f.cellStyles&&(S.forEach(function(N){!g.patternType&&N.patternType&&(g.patternType=N.patternType)}),i.s=g),i.StyleID!==void 0&&(i.ixfe=i.StyleID)}function K3(t){t.t=t.v||"",t.t=t.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.v=t.w=t.ixfe=void 0}function Z0(t,s){var r=s||{};uy();var i=Bu(vI(t));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(i=Ft(i));var l=i.slice(0,1024).toLowerCase(),c=!1;if(l=l.replace(/".*?"/g,""),(l.indexOf(">")&1023)>Math.min(l.indexOf(",")&1023,l.indexOf(";")&1023)){var u=en(r);return u.type="string",yh.to_workbook(i,u)}if(l.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ut){l.indexOf("<"+ut)>=0&&(c=!0)}),c)return eW(i,r);lh={"General Number":"General","General Date":dt[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":dt[15],"Short Date":dt[14],"Long Time":dt[19],"Medium Time":dt[18],"Short Time":dt[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:dt[2],Standard:dt[4],Percent:dt[10],Scientific:dt[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var h,_=[],f,T={},E=[],g=r.dense?[]:{},S="",R={},L={},N=ks('<Data ss:Type="String">'),C=0,A=0,I=0,k={s:{r:2e6,c:2e6},e:{r:0,c:0}},H={},G={},x="",U=0,B=[],re={},Z={},se=0,pe=[],Me=[],Oe={},we=[],ye,Re=!1,j=[],Y=[],oe={},M=0,Q=0,J={Sheets:[],WBProps:{date1904:!1}},q={};bh.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"");for(var he="";h=bh.exec(i);)switch(h[3]=(he=h[3]).toLowerCase()){case"data":if(he=="data"){if(h[1]==="/"){if((f=_.pop())[0]!==h[3])throw new Error("Bad state: "+f.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&_.push([h[3],!0]);break}if(_[_.length-1][1])break;h[1]==="/"?Y3(i.slice(C,h.index),x,N,_[_.length-1][0]=="comment"?Oe:R,{c:A,r:I},H,we[A],L,j,r):(x="",N=ks(h[0]),C=h.index+h[0].length);break;case"cell":if(h[1]==="/")if(Me.length>0&&(R.c=Me),(!r.sheetRows||r.sheetRows>I)&&R.v!==void 0&&(r.dense?(g[I]||(g[I]=[]),g[I][A]=R):g[Ln(A)+es(I)]=R),R.HRef&&(R.l={Target:$t(R.HRef)},R.HRefScreenTip&&(R.l.Tooltip=R.HRefScreenTip),delete R.HRef,delete R.HRefScreenTip),(R.MergeAcross||R.MergeDown)&&(M=A+(parseInt(R.MergeAcross,10)|0),Q=I+(parseInt(R.MergeDown,10)|0),B.push({s:{c:A,r:I},e:{c:M,r:Q}})),!r.sheetStubs)R.MergeAcross?A=M+1:++A;else if(R.MergeAcross||R.MergeDown){for(var Ne=A;Ne<=M;++Ne)for(var Pe=I;Pe<=Q;++Pe)(Ne>A||Pe>I)&&(r.dense?(g[Pe]||(g[Pe]=[]),g[Pe][Ne]={t:"z"}):g[Ln(Ne)+es(Pe)]={t:"z"});A=M+1}else++A;else R=G3(h[0]),R.Index&&(A=+R.Index-1),A<k.s.c&&(k.s.c=A),A>k.e.c&&(k.e.c=A),h[0].slice(-2)==="/>"&&++A,Me=[];break;case"row":h[1]==="/"||h[0].slice(-2)==="/>"?(I<k.s.r&&(k.s.r=I),I>k.e.r&&(k.e.r=I),h[0].slice(-2)==="/>"&&(L=ks(h[0]),L.Index&&(I=+L.Index-1)),A=0,++I):(L=ks(h[0]),L.Index&&(I=+L.Index-1),oe={},(L.AutoFitHeight=="0"||L.Height)&&(oe.hpx=parseInt(L.Height,10),oe.hpt=ok(oe.hpx),Y[I]=oe),L.Hidden=="1"&&(oe.hidden=!0,Y[I]=oe));break;case"worksheet":if(h[1]==="/"){if((f=_.pop())[0]!==h[3])throw new Error("Bad state: "+f.join("|"));E.push(S),k.s.r<=k.e.r&&k.s.c<=k.e.c&&(g["!ref"]=Ct(k),r.sheetRows&&r.sheetRows<=k.e.r&&(g["!fullref"]=g["!ref"],k.e.r=r.sheetRows-1,g["!ref"]=Ct(k))),B.length&&(g["!merges"]=B),we.length>0&&(g["!cols"]=we),Y.length>0&&(g["!rows"]=Y),T[S]=g}else k={s:{r:2e6,c:2e6},e:{r:0,c:0}},I=A=0,_.push([h[3],!1]),f=ks(h[0]),S=$t(f.Name),g=r.dense?[]:{},B=[],j=[],Y=[],q={name:S,Hidden:0},J.Sheets.push(q);break;case"table":if(h[1]==="/"){if((f=_.pop())[0]!==h[3])throw new Error("Bad state: "+f.join("|"))}else{if(h[0].slice(-2)=="/>")break;_.push([h[3],!1]),we=[],Re=!1}break;case"style":h[1]==="/"?z3(H,G,r):G=ks(h[0]);break;case"numberformat":G.nf=$t(ks(h[0]).Format||"General"),lh[G.nf]&&(G.nf=lh[G.nf]);for(var be=0;be!=392&&dt[be]!=G.nf;++be);if(be==392){for(be=57;be!=392;++be)if(dt[be]==null){yl(G.nf,be);break}}break;case"column":if(_[_.length-1][0]!=="table")break;if(ye=ks(h[0]),ye.Hidden&&(ye.hidden=!0,delete ye.Hidden),ye.Width&&(ye.wpx=parseInt(ye.Width,10)),!Re&&ye.wpx>10){Re=!0,Rn=sk;for(var ce=0;ce<we.length;++ce)we[ce]&&Ac(we[ce])}Re&&Ac(ye),we[ye.Index-1||we.length]=ye;for(var tt=0;tt<+ye.Span;++tt)we[we.length]=en(ye);break;case"namedrange":if(h[1]==="/")break;J.Names||(J.Names=[]);var b=st(h[0]),_e={Name:b.Name,Ref:hc(b.RefersTo.slice(1),{r:0,c:0})};J.Sheets.length>0&&(_e.Sheet=J.Sheets.length-1),J.Names.push(_e);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(h[0].slice(-2)==="/>")break;h[1]==="/"?x+=i.slice(U,h.index):U=h.index+h[0].length;break;case"interior":if(!r.cellStyles)break;G.Interior=ks(h[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(h[0].slice(-2)==="/>")break;h[1]==="/"?b2(re,he,i.slice(se,h.index)):se=h.index+h[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(h[1]==="/"){if((f=_.pop())[0]!==h[3])throw new Error("Bad state: "+f.join("|"))}else _.push([h[3],!1]);break;case"comment":if(h[1]==="/"){if((f=_.pop())[0]!==h[3])throw new Error("Bad state: "+f.join("|"));K3(Oe),Me.push(Oe)}else _.push([h[3],!1]),f=ks(h[0]),Oe={a:f.Author};break;case"autofilter":if(h[1]==="/"){if((f=_.pop())[0]!==h[3])throw new Error("Bad state: "+f.join("|"))}else if(h[0].charAt(h[0].length-2)!=="/"){var He=ks(h[0]);g["!autofilter"]={ref:hc(He.Range).replace(/\$/g,"")},_.push([h[3],!0])}break;case"name":break;case"datavalidation":if(h[1]==="/"){if((f=_.pop())[0]!==h[3])throw new Error("Bad state: "+f.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&_.push([h[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(h[1]==="/"){if((f=_.pop())[0]!==h[3])throw new Error("Bad state: "+f.join("|"))}else h[0].charAt(h[0].length-2)!=="/"&&_.push([h[3],!0]);break;case"null":break;default:if(_.length==0&&h[3]=="document"||_.length==0&&h[3]=="uof")return YN(i,r);var ke=!0;switch(_[_.length-1][0]){case"officedocumentsettings":switch(h[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ke=!1}break;case"componentoptions":switch(h[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ke=!1}break;case"excelworkbook":switch(h[3]){case"date1904":J.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ke=!1}break;case"workbookoptions":switch(h[3]){case"owcversion":break;case"height":break;case"width":break;default:ke=!1}break;case"worksheetoptions":switch(h[3]){case"visible":if(h[0].slice(-2)!=="/>")if(h[1]==="/")switch(i.slice(se,h.index)){case"SheetHidden":q.Hidden=1;break;case"SheetVeryHidden":q.Hidden=2;break}else se=h.index+h[0].length;break;case"header":g["!margins"]||oh(g["!margins"]={},"xlml"),isNaN(+st(h[0]).Margin)||(g["!margins"].header=+st(h[0]).Margin);break;case"footer":g["!margins"]||oh(g["!margins"]={},"xlml"),isNaN(+st(h[0]).Margin)||(g["!margins"].footer=+st(h[0]).Margin);break;case"pagemargins":var Ze=st(h[0]);g["!margins"]||oh(g["!margins"]={},"xlml"),isNaN(+Ze.Top)||(g["!margins"].top=+Ze.Top),isNaN(+Ze.Left)||(g["!margins"].left=+Ze.Left),isNaN(+Ze.Right)||(g["!margins"].right=+Ze.Right),isNaN(+Ze.Bottom)||(g["!margins"].bottom=+Ze.Bottom);break;case"displayrighttoleft":J.Views||(J.Views=[]),J.Views[0]||(J.Views[0]={}),J.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":g["!outline"]||(g["!outline"]={}),g["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ke=!1}break;case"pivottable":case"pivotcache":switch(h[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ke=!1}break;case"pagebreaks":switch(h[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ke=!1}break;case"autofilter":switch(h[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ke=!1}break;case"querytable":switch(h[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ke=!1}break;case"datavalidation":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ke=!1}break;case"sorting":case"conditionalformatting":switch(h[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ke=!1}break;case"mapinfo":case"schema":case"data":switch(h[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ke=!1}break;case"smarttags":break;default:ke=!1;break}if(ke||h[3].match(/!\[CDATA/))break;if(!_[_.length-1][1])throw"Unrecognized tag: "+h[3]+"|"+_.join("|");if(_[_.length-1][0]==="customdocumentproperties"){if(h[0].slice(-2)==="/>")break;h[1]==="/"?W3(Z,he,pe,i.slice(se,h.index)):(pe=h,se=h.index+h[0].length);break}if(r.WTF)throw"Unrecognized tag: "+h[3]+"|"+_.join("|")}var ve={};return!r.bookSheets&&!r.bookProps&&(ve.Sheets=T),ve.SheetNames=E,ve.Workbook=J,ve.SSF=en(dt),ve.Props=re,ve.Custprops=Z,ve}function d$(t,s){switch(GI(s=s||{}),s.type||"base64"){case"base64":return Z0(rs(t),s);case"binary":case"buffer":case"file":return Z0(t,s);case"array":return Z0(Kl(t),s)}}function j3(t){var s={},r=t.content;if(r.l=28,s.AnsiUserType=r.read_shift(0,"lpstr-ansi"),s.AnsiClipboardFormat=c2(r),r.length-r.l<=4)return s;var i=r.read_shift(4);if(i==0||i>40||(r.l-=4,s.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(i=r.read_shift(4),i!==1907505652)||(s.UnicodeClipboardFormat=u2(r),i=r.read_shift(4),i==0||i>40))return s;r.l-=4,s.Reserved2=r.read_shift(0,"lpwstr")}var J3=[60,1084,2066,2165,2175];function q3(t,s,r,i,l){var c=i,u=[],h=r.slice(r.l,r.l+c);if(l&&l.enc&&l.enc.insitu&&h.length>0)switch(t){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:l.enc.insitu(h)}u.push(h),r.l+=c;for(var _=Vi(r,r.l),f=_$[_],T=0;f!=null&&J3.indexOf(_)>-1;)c=Vi(r,r.l+2),T=r.l+4,_==2066?T+=4:(_==2165||_==2175)&&(T+=12),h=r.slice(T,r.l+4+c),u.push(h),r.l+=4+c,f=_$[_=Vi(r,r.l)];var E=Ao(u);qr(E,0);var g=0;E.lens=[];for(var S=0;S<u.length;++S)E.lens.push(g),g+=u[S].length;if(E.length<i)throw"XLS Record 0x"+t.toString(16)+" Truncated: "+E.length+" < "+i;return s.f(E,E.length,l)}function _i(t,s,r){if(t.t!=="z"&&t.XF){var i=0;try{i=t.z||t.XF.numFmtId||0,s.cellNF&&(t.z=dt[i])}catch(c){if(s.WTF)throw c}if(!s||s.cellText!==!1)try{t.t==="e"?t.w=t.w||Zl[t.v]:i===0||i=="General"?t.t==="n"?(t.v|0)===t.v?t.w=t.v.toString(10):t.w=vh(t.v):t.w=Ul(t.v):t.w=Ss(i,t.v,{date1904:!!r,dateNF:s&&s.dateNF})}catch(c){if(s.WTF)throw c}if(s.cellDates&&i&&t.t=="n"&&xc(dt[i]||String(i))){var l=vl(t.v);l&&(t.t="d",t.v=new Date(l.y,l.m-1,l.d,l.H,l.M,l.S,l.u))}}}function uf(t,s,r){return{v:t,ixfe:s,t:r}}function Z3(t,s){var r={opts:{}},i={},l=s.dense?[]:{},c={},u={},h=null,_=[],f="",T={},E,g="",S,R,L,N,C={},A=[],I,k,H=[],G=[],x={Sheets:[],WBProps:{date1904:!1},Views:[{}]},U={},B=function(et){return et<8?kl[et]:et<64&&G[et-8]||kl[et]},re=function(et,ot,Mt){var m=ot.XF.data;if(!(!m||!m.patternType||!Mt||!Mt.cellStyles)){ot.s={},ot.s.patternType=m.patternType;var D;(D=kh(B(m.icvFore)))&&(ot.s.fgColor={rgb:D}),(D=kh(B(m.icvBack)))&&(ot.s.bgColor={rgb:D})}},Z=function(et,ot,Mt){if(!(oe>1)&&!(Mt.sheetRows&&et.r>=Mt.sheetRows)){if(Mt.cellStyles&&ot.XF&&ot.XF.data&&re(et,ot,Mt),delete ot.ixfe,delete ot.XF,E=et,g=_t(et),(!u||!u.s||!u.e)&&(u={s:{r:0,c:0},e:{r:0,c:0}}),et.r<u.s.r&&(u.s.r=et.r),et.c<u.s.c&&(u.s.c=et.c),et.r+1>u.e.r&&(u.e.r=et.r+1),et.c+1>u.e.c&&(u.e.c=et.c+1),Mt.cellFormula&&ot.f){for(var m=0;m<A.length;++m)if(!(A[m][0].s.c>et.c||A[m][0].s.r>et.r)&&!(A[m][0].e.c<et.c||A[m][0].e.r<et.r)){ot.F=Ct(A[m][0]),(A[m][0].s.c!=et.c||A[m][0].s.r!=et.r)&&delete ot.f,ot.f&&(ot.f=""+hn(A[m][1],u,et,j,se));break}}Mt.dense?(l[et.r]||(l[et.r]=[]),l[et.r][et.c]=ot):l[g]=ot}},se={enc:!1,sbcch:0,snames:[],sharedf:C,arrayf:A,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!s&&!!s.cellStyles,WTF:!!s&&!!s.wtf};s.password&&(se.password=s.password);var pe,Me=[],Oe=[],we=[],ye=[],Re=!1,j=[];j.SheetNames=se.snames,j.sharedf=se.sharedf,j.arrayf=se.arrayf,j.names=[],j.XTI=[];var Y=0,oe=0,M=0,Q=[],J=[],q;se.codepage=1200,Us(1200);for(var he=!1;t.l<t.length-1;){var Ne=t.l,Pe=t.read_shift(2);if(Pe===0&&Y===10)break;var be=t.l===t.length?0:t.read_shift(2),ce=_$[Pe];if(ce&&ce.f){if(s.bookSheets&&Y===133&&Pe!==133)break;if(Y=Pe,ce.r===2||ce.r==12){var tt=t.read_shift(2);if(be-=2,!se.enc&&tt!==Pe&&((tt&255)<<8|tt>>8)!==Pe)throw new Error("rt mismatch: "+tt+"!="+Pe);ce.r==12&&(t.l+=10,be-=10)}var b={};if(Pe===10?b=ce.f(t,be,se):b=q3(Pe,ce,t,be,se),oe==0&&[9,521,1033,2057].indexOf(Y)===-1)continue;switch(Pe){case 34:r.opts.Date1904=x.WBProps.date1904=b;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(se.enc||(t.l=0),se.enc=b,!s.password)throw new Error("File is password-protected");if(b.valid==null)throw new Error("Encryption scheme unsupported");if(!b.valid)throw new Error("Password is incorrect");break;case 92:se.lastuser=b;break;case 66:var _e=Number(b);switch(_e){case 21010:_e=1200;break;case 32768:_e=1e4;break;case 32769:_e=1252;break}Us(se.codepage=_e),he=!0;break;case 317:se.rrtabid=b;break;case 25:se.winlocked=b;break;case 439:r.opts.RefreshAll=b;break;case 12:r.opts.CalcCount=b;break;case 16:r.opts.CalcDelta=b;break;case 17:r.opts.CalcIter=b;break;case 13:r.opts.CalcMode=b;break;case 14:r.opts.CalcPrecision=b;break;case 95:r.opts.CalcSaveRecalc=b;break;case 15:se.CalcRefMode=b;break;case 2211:r.opts.FullCalc=b;break;case 129:b.fDialog&&(l["!type"]="dialog"),b.fBelow||((l["!outline"]||(l["!outline"]={})).above=!0),b.fRight||((l["!outline"]||(l["!outline"]={})).left=!0);break;case 224:H.push(b);break;case 430:j.push([b]),j[j.length-1].XTI=[];break;case 35:case 547:j[j.length-1].push(b);break;case 24:case 536:q={Name:b.Name,Ref:hn(b.rgce,u,null,j,se)},b.itab>0&&(q.Sheet=b.itab-1),j.names.push(q),j[0]||(j[0]=[],j[0].XTI=[]),j[j.length-1].push(b),b.Name=="_xlnm._FilterDatabase"&&b.itab>0&&b.rgce&&b.rgce[0]&&b.rgce[0][0]&&b.rgce[0][0][0]=="PtgArea3d"&&(J[b.itab-1]={ref:Ct(b.rgce[0][0][1][2])});break;case 22:se.ExternCount=b;break;case 23:j.length==0&&(j[0]=[],j[0].XTI=[]),j[j.length-1].XTI=j[j.length-1].XTI.concat(b),j.XTI=j.XTI.concat(b);break;case 2196:if(se.biff<8)break;q!=null&&(q.Comment=b[1]);break;case 18:l["!protect"]=b;break;case 19:b!==0&&se.WTF&&console.error("Password verifier: "+b);break;case 133:c[b.pos]=b,se.snames.push(b.name);break;case 10:{if(--oe)break;if(u.e){if(u.e.r>0&&u.e.c>0){if(u.e.r--,u.e.c--,l["!ref"]=Ct(u),s.sheetRows&&s.sheetRows<=u.e.r){var He=u.e.r;u.e.r=s.sheetRows-1,l["!fullref"]=l["!ref"],l["!ref"]=Ct(u),u.e.r=He}u.e.r++,u.e.c++}Me.length>0&&(l["!merges"]=Me),Oe.length>0&&(l["!objects"]=Oe),we.length>0&&(l["!cols"]=we),ye.length>0&&(l["!rows"]=ye),x.Sheets.push(U)}f===""?T=l:i[f]=l,l=s.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(se.biff===8&&(se.biff={9:2,521:3,1033:4}[Pe]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[b.BIFFVer]||8),se.biffguess=b.BIFFVer==0,b.BIFFVer==0&&b.dt==4096&&(se.biff=5,he=!0,Us(se.codepage=28591)),se.biff==8&&b.BIFFVer==0&&b.dt==16&&(se.biff=2),oe++)break;if(l=s.dense?[]:{},se.biff<8&&!he&&(he=!0,Us(se.codepage=s.codepage||1252)),se.biff<5||b.BIFFVer==0&&b.dt==4096){f===""&&(f="Sheet1"),u={s:{r:0,c:0},e:{r:0,c:0}};var ke={pos:t.l-be,name:f};c[ke.pos]=ke,se.snames.push(f)}else f=(c[Ne]||{name:""}).name;b.dt==32&&(l["!type"]="chart"),b.dt==64&&(l["!type"]="macro"),Me=[],Oe=[],se.arrayf=A=[],we=[],ye=[],Re=!1,U={Hidden:(c[Ne]||{hs:0}).hs,name:f}}break;case 515:case 3:case 2:l["!type"]=="chart"&&(s.dense?(l[b.r]||[])[b.c]:l[_t({c:b.c,r:b.r})])&&++b.c,I={ixfe:b.ixfe,XF:H[b.ixfe]||{},v:b.val,t:"n"},M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z({c:b.c,r:b.r},I,s);break;case 5:case 517:I={ixfe:b.ixfe,XF:H[b.ixfe],v:b.val,t:b.t},M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z({c:b.c,r:b.r},I,s);break;case 638:I={ixfe:b.ixfe,XF:H[b.ixfe],v:b.rknum,t:"n"},M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z({c:b.c,r:b.r},I,s);break;case 189:for(var Ze=b.c;Ze<=b.C;++Ze){var ve=b.rkrec[Ze-b.c][0];I={ixfe:ve,XF:H[ve],v:b.rkrec[Ze-b.c][1],t:"n"},M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z({c:Ze,r:b.r},I,s)}break;case 6:case 518:case 1030:{if(b.val=="String"){h=b;break}if(I=uf(b.val,b.cell.ixfe,b.tt),I.XF=H[I.ixfe],s.cellFormula){var ut=b.formula;if(ut&&ut[0]&&ut[0][0]&&ut[0][0][0]=="PtgExp"){var Bt=ut[0][0][1][0],tr=ut[0][0][1][1],hr=_t({r:Bt,c:tr});C[hr]?I.f=""+hn(b.formula,u,b.cell,j,se):I.F=((s.dense?(l[Bt]||[])[tr]:l[hr])||{}).F}else I.f=""+hn(b.formula,u,b.cell,j,se)}M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z(b.cell,I,s),h=b}break;case 7:case 519:if(h)h.val=b,I=uf(b,h.cell.ixfe,"s"),I.XF=H[I.ixfe],s.cellFormula&&(I.f=""+hn(h.formula,u,h.cell,j,se)),M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z(h.cell,I,s),h=null;else throw new Error("String record expects Formula");break;case 33:case 545:{A.push(b);var wt=_t(b[0].s);if(S=s.dense?(l[b[0].s.r]||[])[b[0].s.c]:l[wt],s.cellFormula&&S){if(!h||!wt||!S)break;S.f=""+hn(b[1],u,b[0],j,se),S.F=Ct(b[0])}}break;case 1212:{if(!s.cellFormula)break;if(g){if(!h)break;C[_t(h.cell)]=b[0],S=s.dense?(l[h.cell.r]||[])[h.cell.c]:l[_t(h.cell)],(S||{}).f=""+hn(b[0],u,E,j,se)}}break;case 253:I=uf(_[b.isst].t,b.ixfe,"s"),_[b.isst].h&&(I.h=_[b.isst].h),I.XF=H[I.ixfe],M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z({c:b.c,r:b.r},I,s);break;case 513:s.sheetStubs&&(I={ixfe:b.ixfe,XF:H[b.ixfe],t:"z"},M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z({c:b.c,r:b.r},I,s));break;case 190:if(s.sheetStubs)for(var rn=b.c;rn<=b.C;++rn){var Wt=b.ixfe[rn-b.c];I={ixfe:Wt,XF:H[Wt],t:"z"},M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z({c:rn,r:b.r},I,s)}break;case 214:case 516:case 4:I=uf(b.val,b.ixfe,"s"),I.XF=H[I.ixfe],M>0&&(I.z=Q[I.ixfe>>8&63]),_i(I,s,r.opts.Date1904),Z({c:b.c,r:b.r},I,s);break;case 0:case 512:oe===1&&(u=b);break;case 252:_=b;break;case 1054:if(se.biff==4){Q[M++]=b[1];for(var te=0;te<M+163&&dt[te]!=b[1];++te);te>=163&&yl(b[1],M+163)}else yl(b[1],b[0]);break;case 30:{Q[M++]=b;for(var dr=0;dr<M+163&&dt[dr]!=b;++dr);dr>=163&&yl(b,M+163)}break;case 229:Me=Me.concat(b);break;case 93:Oe[b.cmo[0]]=se.lastobj=b;break;case 438:se.lastobj.TxO=b;break;case 127:se.lastobj.ImData=b;break;case 440:for(N=b[0].s.r;N<=b[0].e.r;++N)for(L=b[0].s.c;L<=b[0].e.c;++L)S=s.dense?(l[N]||[])[L]:l[_t({c:L,r:N})],S&&(S.l=b[1]);break;case 2048:for(N=b[0].s.r;N<=b[0].e.r;++N)for(L=b[0].s.c;L<=b[0].e.c;++L)S=s.dense?(l[N]||[])[L]:l[_t({c:L,r:N})],S&&S.l&&(S.l.Tooltip=b[1]);break;case 28:{if(se.biff<=5&&se.biff>=2)break;S=s.dense?(l[b[0].r]||[])[b[0].c]:l[_t(b[0])];var mn=Oe[b[2]];S||(s.dense?(l[b[0].r]||(l[b[0].r]=[]),S=l[b[0].r][b[0].c]={t:"z"}):S=l[_t(b[0])]={t:"z"},u.e.r=Math.max(u.e.r,b[0].r),u.s.r=Math.min(u.s.r,b[0].r),u.e.c=Math.max(u.e.c,b[0].c),u.s.c=Math.min(u.s.c,b[0].c)),S.c||(S.c=[]),R={a:b[1],t:mn.TxO.t},S.c.push(R)}break;case 2173:$G(H[b.ixfe],b.ext);break;case 125:{if(!se.cellStyles)break;for(;b.e>=b.s;)we[b.e--]={width:b.w/256,level:b.level||0,hidden:!!(b.flags&1)},Re||(Re=!0,PI(b.w/256)),Ac(we[b.e+1])}break;case 520:{var ct={};b.level!=null&&(ye[b.r]=ct,ct.level=b.level),b.hidden&&(ye[b.r]=ct,ct.hidden=!0),b.hpt&&(ye[b.r]=ct,ct.hpt=b.hpt,ct.hpx=wh(b.hpt))}break;case 38:case 39:case 40:case 41:l["!margins"]||oh(l["!margins"]={}),l["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[Pe]]=b;break;case 161:l["!margins"]||oh(l["!margins"]={}),l["!margins"].header=b.header,l["!margins"].footer=b.footer;break;case 574:b.RTL&&(x.Views[0].RTL=!0);break;case 146:G=b;break;case 2198:pe=b;break;case 140:k=b;break;case 442:f?U.CodeName=b||U.name:x.WBProps.CodeName=b||"ThisWorkbook";break}}else ce||console.error("Missing Info for XLS Record 0x"+Pe.toString(16)),t.l+=be}return r.SheetNames=Wo(c).sort(function(Ot,et){return Number(Ot)-Number(et)}).map(function(Ot){return c[Ot].name}),s.bookSheets||(r.Sheets=i),!r.SheetNames.length&&T["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=T)):r.Preamble=T,r.Sheets&&J.forEach(function(Ot,et){r.Sheets[r.SheetNames[et]]["!autofilter"]=Ot}),r.Strings=_,r.SSF=en(dt),se.enc&&(r.Encryption=se.enc),pe&&(r.Themes=pe),r.Metadata={},k!==void 0&&(r.Metadata.Country=k),j.names.length>0&&(x.Names=j.names),r.Workbook=x,r}var VN={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Q3(t,s,r){var i=Et.find(t,"/!DocumentSummaryInformation");if(i&&i.size>0)try{var l=AN(i,p2,VN.DSI);for(var c in l)s[c]=l[c]}catch(f){if(r.WTF)throw f}var u=Et.find(t,"/!SummaryInformation");if(u&&u.size>0)try{var h=AN(u,E2,VN.SI);for(var _ in h)s[_]==null&&(s[_]=h[_])}catch(f){if(r.WTF)throw f}s.HeadingPairs&&s.TitlesOfParts&&(Hy(s.HeadingPairs,s.TitlesOfParts,s,r),delete s.HeadingPairs,delete s.TitlesOfParts)}function Rk(t,s){s||(s={}),GI(s),Z1(),s.codepage&&OI(s.codepage);var r,i;if(t.FullPaths){if(Et.find(t,"/encryption"))throw new Error("File is password-protected");r=Et.find(t,"!CompObj"),i=Et.find(t,"/Workbook")||Et.find(t,"/Book")}else{switch(s.type){case"base64":t=Fs(rs(t));break;case"binary":t=Fs(t);break;case"buffer":break;case"array":Array.isArray(t)||(t=Array.prototype.slice.call(t));break}qr(t,0),i={content:t}}var l,c;if(r&&j3(r),s.bookProps&&!s.bookSheets)l={};else{var u=pt?"buffer":"array";if(i&&i.content)l=Z3(i.content,s);else if((c=Et.find(t,"PerfectOffice_MAIN"))&&c.content)l=sh.to_workbook(c.content,(s.type=u,s));else if((c=Et.find(t,"NativeContent_MAIN"))&&c.content)l=sh.to_workbook(c.content,(s.type=u,s));else throw(c=Et.find(t,"MN0"))&&c.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");s.bookVBA&&t.FullPaths&&Et.find(t,"/_VBA_PROJECT_CUR/VBA/dir")&&(l.vbaraw=FG(t))}var h={};return t.FullPaths&&Q3(t,h,s),l.Props=l.Custprops=h,s.bookFiles&&(l.cfb=t),l}var lT={0:{f:wV},1:{f:FV},2:{f:YV},3:{f:GV},4:{f:UV},5:{f:zV},6:{f:JV},7:{f:WV},8:{f:t3},9:{f:e3},10:{f:ZV},11:{f:QV},12:{f:BV},13:{f:KV},14:{f:VV},15:{f:HV},16:{f:mk},17:{f:qV},18:{f:XV},19:{f:bI},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:v3},40:{},42:{},43:{f:ZH},44:{f:qH},45:{f:QH},46:{f:tG},47:{f:eG},48:{},49:{f:r2},50:{},51:{f:OG},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:Qy},62:{f:jV},63:{f:CG},64:{f:u3},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:En,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:c3},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:PV},148:{f:MV,p:16},151:{f:s3},152:{},153:{f:A3},154:{},155:{},156:{f:L3},157:{},158:{},159:{T:1,f:EH},160:{T:-1},161:{T:1,f:ql},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:r3},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:IG},336:{T:-1},337:{f:SG,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:a$},357:{},358:{},359:{},360:{T:1},361:{},362:{f:Zy},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:i3},427:{f:o3},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:a3},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:DV},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:n3},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:a$},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:MG},633:{T:1},634:{T:-1},635:{T:1,f:wG},636:{T:-1},637:{f:s2},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:p3},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:h3},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},_$={6:{f:J0},10:{f:mo},12:{f:Ir},13:{f:Ir},14:{f:fr},15:{f:fr},16:{f:_n},17:{f:fr},18:{f:fr},19:{f:Ir},20:{f:xN},21:{f:xN},23:{f:Zy},24:{f:yN},25:{f:fr},26:{},27:{},28:{f:yU},29:{},34:{f:fr},35:{f:bN},38:{f:_n},39:{f:_n},40:{f:_n},41:{f:_n},42:{f:fr},43:{f:fr},47:{f:DH},49:{f:_U},51:{f:Ir},60:{},61:{f:uU},64:{f:fr},65:{f:dU},66:{f:Ir},77:{},80:{},81:{},82:{},85:{f:Ir},89:{},90:{},91:{},92:{f:rU},93:{f:wU},94:{},95:{f:fr},96:{},97:{},99:{f:fr},125:{f:Qy},128:{f:SU},129:{f:nU},130:{f:Ir},131:{f:fr},132:{f:fr},133:{f:sU},134:{},140:{f:UU},141:{f:Ir},144:{},146:{f:GU},151:{},152:{},153:{},154:{},155:{},156:{f:Ir},157:{},158:{},160:{f:YU},161:{f:WU},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:mU},190:{f:$U},193:{f:mo},197:{},198:{},199:{},200:{},201:{},202:{f:fr},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Ir},220:{},221:{f:fr},222:{},224:{f:OU},225:{f:tU},226:{f:mo},227:{},229:{f:kU},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:iU},253:{f:fU},255:{f:oU},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:zy},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:fr},353:{f:mo},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:LU},431:{f:fr},432:{},433:{},434:{},437:{},438:{f:PU},439:{f:fr},440:{f:FU},441:{},442:{f:Kh},443:{},444:{f:Ir},445:{},446:{},448:{f:mo},449:{f:cU,r:2},450:{f:mo},512:{f:vN},513:{f:zU},515:{f:RU},516:{f:TU},517:{f:NN},519:{f:KU},520:{f:lU},523:{},545:{f:kN},549:{f:CN},566:{},574:{f:hU},638:{f:gU},659:{},1048:{},1054:{f:pU},1084:{},1212:{f:NU},2048:{f:BU},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:lf},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:mo},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:VU,r:12},2173:{f:mG,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:fr,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:vU,r:12},2197:{},2198:{f:_G,r:12},2199:{},2200:{},2201:{},2202:{f:xU,r:12},2203:{f:mo},2204:{},2205:{},2206:{},2207:{},2211:{f:aU},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Ir},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:XU},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:HU},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:vN},1:{},2:{f:ZU},3:{f:qU},4:{f:JU},5:{f:NN},7:{f:QU},8:{},9:{f:lf},11:{},22:{f:Ir},30:{f:EU},31:{},32:{},33:{f:kN},36:{},37:{f:CN},50:{f:eH},62:{},52:{},67:{},68:{f:Ir},69:{},86:{},126:{},127:{f:jU},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:tH},223:{},234:{},354:{},421:{},518:{f:J0},521:{f:lf},536:{f:yN},547:{f:bN},561:{},579:{},1030:{f:J0},1033:{f:lf},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function ws(t,s,r,i){var l=s;if(!isNaN(l)){var c=(r||[]).length||0,u=t.next(4);u.write_shift(2,l),u.write_shift(2,c),c>0&&yy(r)&&t.push(r)}}function WN(t,s){var r=s||{},i=r.dense?[]:{};t=t.replace(/<!--.*?-->/g,"");var l=t.match(/<table/i);if(!l)throw new Error("Invalid HTML: could not find <table>");var c=t.match(/<\/table/i),u=l.index,h=c&&c.index||t.length,_=AB(t.slice(u,h),/(:?<tr[^>]*>)/i,"<tr>"),f=-1,T=0,E=0,g=0,S={s:{r:1e7,c:1e7},e:{r:0,c:0}},R=[];for(u=0;u<_.length;++u){var L=_[u].trim(),N=L.slice(0,3).toLowerCase();if(N=="<tr"){if(++f,r.sheetRows&&r.sheetRows<=f){--f;break}T=0;continue}if(!(N!="<td"&&N!="<th")){var C=L.split(/<\/t[dh]>/i);for(h=0;h<C.length;++h){var A=C[h].trim();if(A.match(/<t[dh]/i)){for(var I=A,k=0;I.charAt(0)=="<"&&(k=I.indexOf(">"))>-1;)I=I.slice(k+1);for(var H=0;H<R.length;++H){var G=R[H];G.s.c==T&&G.s.r<f&&f<=G.e.r&&(T=G.e.c+1,H=-1)}var x=st(A.slice(0,A.indexOf(">")));g=x.colspan?+x.colspan:1,((E=+x.rowspan)>1||g>1)&&R.push({s:{r:f,c:T},e:{r:f+(E||1)-1,c:T+g-1}});var U=x.t||x["data-t"]||"";if(!I.length){T+=g;continue}if(I=PB(I),S.s.r>f&&(S.s.r=f),S.e.r<f&&(S.e.r=f),S.s.c>T&&(S.s.c=T),S.e.c<T&&(S.e.c=T),!I.length){T+=g;continue}var B={t:"s",v:I};r.raw||!I.trim().length||U=="s"||(I==="TRUE"?B={t:"b",v:!0}:I==="FALSE"?B={t:"b",v:!1}:isNaN(zi(I))?isNaN(Nh(I).getDate())||(B={t:"d",v:Qr(I)},r.cellDates||(B={t:"n",v:ns(B.v)}),B.z=r.dateNF||dt[14]):B={t:"n",v:zi(I)}),r.dense?(i[f]||(i[f]=[]),i[f][T]=B):i[_t({r:f,c:T})]=B,T+=g}}}}return i["!ref"]=Ct(S),R.length&&(i["!merges"]=R),i}function eW(t,s){var r=t.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return jl(WN(r[0],s),s);var i=Ck();return r.forEach(function(l,c){vk(i,WN(l,s),"Sheet"+(c+1))}),i}function tW(t){var s=t.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(i,l){return Array(parseInt(l,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=$t(s.replace(/<[^>]*>/g,""));return[r]}var XN={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function Lk(t,s){var r=s||{},i=vI(t),l=[],c,u,h={name:""},_="",f=0,T,E,g={},S=[],R=r.dense?[]:{},L,N,C={value:""},A="",I=0,k=[],H=-1,G=-1,x={s:{r:1e6,c:1e7},e:{r:0,c:0}},U=0,B={},re=[],Z={},se=0,pe=0,Me=[],Oe=1,we=1,ye=[],Re={Names:[]},j={},Y=["",""],oe=[],M={},Q="",J=0,q=!1,he=!1,Ne=0;for(bh.lastIndex=0,i=i.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");L=bh.exec(i);)switch(L[3]=L[3].replace(/_.*$/,"")){case"table":case"":L[1]==="/"?(x.e.c>=x.s.c&&x.e.r>=x.s.r?R["!ref"]=Ct(x):R["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=x.e.r&&(R["!fullref"]=R["!ref"],x.e.r=r.sheetRows-1,R["!ref"]=Ct(x)),re.length&&(R["!merges"]=re),Me.length&&(R["!rows"]=Me),T.name=T.||T.name,typeof JSON<"u"&&JSON.stringify(T),S.push(T.name),g[T.name]=R,he=!1):L[0].charAt(L[0].length-2)!=="/"&&(T=st(L[0],!1),H=G=-1,x.s.r=x.s.c=1e7,x.e.r=x.e.c=0,R=r.dense?[]:{},re=[],Me=[],he=!0);break;case"table-row-group":L[1]==="/"?--U:++U;break;case"table-row":case"":if(L[1]==="/"){H+=Oe,Oe=1;break}if(E=st(L[0],!1),E.?H=E.-1:H==-1&&(H=0),Oe=+E["number-rows-repeated"]||1,Oe<10)for(Ne=0;Ne<Oe;++Ne)U>0&&(Me[H+Ne]={level:U});G=-1;break;case"covered-table-cell":L[1]!=="/"&&++G,r.sheetStubs&&(r.dense?(R[H]||(R[H]=[]),R[H][G]={t:"z"}):R[_t({r:H,c:G})]={t:"z"}),A="",k=[];break;case"table-cell":case"":if(L[0].charAt(L[0].length-2)==="/")++G,C=st(L[0],!1),we=parseInt(C["number-columns-repeated"]||"1",10),N={t:"z",v:null},C.formula&&r.cellFormula!=!1&&(N.f=UN($t(C.formula))),(C.||C["value-type"])=="string"&&(N.t="s",N.v=$t(C["string-value"]||""),r.dense?(R[H]||(R[H]=[]),R[H][G]=N):R[_t({r:H,c:G})]=N),G+=we-1;else if(L[1]!=="/"){++G,A="",I=0,k=[],we=1;var Pe=Oe?H+Oe-1:H;if(G>x.e.c&&(x.e.c=G),G<x.s.c&&(x.s.c=G),H<x.s.r&&(x.s.r=H),Pe>x.e.r&&(x.e.r=Pe),C=st(L[0],!1),oe=[],M={},N={t:C.||C["value-type"],v:null},r.cellFormula)if(C.formula&&(C.formula=$t(C.formula)),C["number-matrix-columns-spanned"]&&C["number-matrix-rows-spanned"]&&(se=parseInt(C["number-matrix-rows-spanned"],10)||0,pe=parseInt(C["number-matrix-columns-spanned"],10)||0,Z={s:{r:H,c:G},e:{r:H+se-1,c:G+pe-1}},N.F=Ct(Z),ye.push([Z,N.F])),C.formula)N.f=UN(C.formula);else for(Ne=0;Ne<ye.length;++Ne)H>=ye[Ne][0].s.r&&H<=ye[Ne][0].e.r&&G>=ye[Ne][0].s.c&&G<=ye[Ne][0].e.c&&(N.F=ye[Ne][1]);switch((C["number-columns-spanned"]||C["number-rows-spanned"])&&(se=parseInt(C["number-rows-spanned"],10)||0,pe=parseInt(C["number-columns-spanned"],10)||0,Z={s:{r:H,c:G},e:{r:H+se-1,c:G+pe-1}},re.push(Z)),C["number-columns-repeated"]&&(we=parseInt(C["number-columns-repeated"],10)),N.t){case"boolean":N.t="b",N.v=Kt(C["boolean-value"]);break;case"float":N.t="n",N.v=parseFloat(C.value);break;case"percentage":N.t="n",N.v=parseFloat(C.value);break;case"currency":N.t="n",N.v=parseFloat(C.value);break;case"date":N.t="d",N.v=Qr(C["date-value"]),r.cellDates||(N.t="n",N.v=ns(N.v)),N.z="m/d/yy";break;case"time":N.t="n",N.v=SB(C["time-value"])/86400,r.cellDates&&(N.t="d",N.v=LT(N.v)),N.z="HH:MM:SS";break;case"number":N.t="n",N.v=parseFloat(C.);break;default:if(N.t==="string"||N.t==="text"||!N.t)N.t="s",C["string-value"]!=null&&(A=$t(C["string-value"]),k=[]);else throw new Error("Unsupported value type "+N.t)}}else{if(q=!1,N.t==="s"&&(N.v=A||"",k.length&&(N.R=k),q=I==0),j.Target&&(N.l=j),oe.length>0&&(N.c=oe,oe=[]),A&&r.cellText!==!1&&(N.w=A),q&&(N.t="z",delete N.v),(!q||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=H))for(var be=0;be<Oe;++be){if(we=parseInt(C["number-columns-repeated"]||"1",10),r.dense)for(R[H+be]||(R[H+be]=[]),R[H+be][G]=be==0?N:en(N);--we>0;)R[H+be][G+we]=en(N);else for(R[_t({r:H+be,c:G})]=N;--we>0;)R[_t({r:H+be,c:G+we})]=en(N);x.e.c<=G&&(x.e.c=G)}we=parseInt(C["number-columns-repeated"]||"1",10),G+=we-1,we=0,N={},A="",k=[]}j={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(L[1]==="/"){if((c=l.pop())[0]!==L[3])throw"Bad state: "+c}else L[0].charAt(L[0].length-2)!=="/"&&l.push([L[3],!0]);break;case"annotation":if(L[1]==="/"){if((c=l.pop())[0]!==L[3])throw"Bad state: "+c;M.t=A,k.length&&(M.R=k),M.a=Q,oe.push(M)}else L[0].charAt(L[0].length-2)!=="/"&&l.push([L[3],!1]);Q="",J=0,A="",I=0,k=[];break;case"creator":L[1]==="/"?Q=i.slice(J,L.index):J=L.index+L[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(L[1]==="/"){if((c=l.pop())[0]!==L[3])throw"Bad state: "+c}else L[0].charAt(L[0].length-2)!=="/"&&l.push([L[3],!1]);A="",I=0,k=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(L[1]==="/"){if(B[h.name]=_,(c=l.pop())[0]!==L[3])throw"Bad state: "+c}else L[0].charAt(L[0].length-2)!=="/"&&(_="",h=st(L[0],!1),l.push([L[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(l[l.length-1][0]){case"time-style":case"date-style":u=st(L[0],!1),_+=XN[L[3]][u.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(l[l.length-1][0]){case"time-style":case"date-style":u=st(L[0],!1),_+=XN[L[3]][u.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(L[0].slice(-2)==="/>")break;if(L[1]==="/")switch(l[l.length-1][0]){case"number-style":case"date-style":case"time-style":_+=i.slice(f,L.index);break}else f=L.index+L[0].length;break;case"named-range":u=st(L[0],!1),Y=q0(u["cell-range-address"]);var ce={Name:u.name,Ref:Y[0]+"!"+Y[1]};he&&(ce.Sheet=S.length),Re.Names.push(ce);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(l[l.length-1][0])>-1)break;if(L[1]==="/"&&(!C||!C["string-value"])){var tt=tW(i.slice(I,L.index));A=(A.length>0?A+`
`:"")+tt[0]}else st(L[0],!1),I=L.index+L[0].length;break;case"s":break;case"database-range":if(L[1]==="/")break;try{Y=q0(st(L[0])["target-range-address"]),g[Y[0]]["!autofilter"]={ref:Y[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(L[1]!=="/"){if(j=st(L[0],!1),!j.href)break;j.Target=$t(j.href),delete j.href,j.Target.charAt(0)=="#"&&j.Target.indexOf(".")>-1?(Y=q0(j.Target.slice(1)),j.Target="#"+Y[0]+"!"+Y[1]):j.Target.match(/^\.\.[\\\/]/)&&(j.Target=j.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(L[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(L)}}var b={Sheets:g,SheetNames:S,Workbook:Re};return r.bookSheets&&delete b.Sheets,b}function zN(t,s){s=s||{},Ts(t,"META-INF/manifest.xml")&&R2($r(t,"META-INF/manifest.xml"),s);var r=qn(t,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var i=Lk(Ft(r),s);return Ts(t,"meta.xml")&&(i.Props=Uy($r(t,"meta.xml"))),i}function YN(t,s){return Lk(t,s)}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function UI(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function f$(t){return typeof TextDecoder<"u"?new TextDecoder().decode(t):Ft(Kl(t))}function T$(t){var s=t.reduce(function(l,c){return l+c.length},0),r=new Uint8Array(s),i=0;return t.forEach(function(l){r.set(l,i),i+=l.length}),r}function KN(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),(t+(t>>4)&252645135)*16843009>>>24}function rW(t,s){for(var r=(t[s+15]&127)<<7|t[s+14]>>1,i=t[s+14]&1,l=s+13;l>=s;--l)i=i*256+t[l];return(t[s+15]&128?-i:i)*Math.pow(10,r-6176)}function Mh(t,s){var r=s?s[0]:0,i=t[r]&127;e:if(t[r++]>=128&&(i|=(t[r]&127)<<7,t[r++]<128||(i|=(t[r]&127)<<14,t[r++]<128)||(i|=(t[r]&127)<<21,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,28),++r,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,35),++r,t[r++]<128)||(i+=(t[r]&127)*Math.pow(2,42),++r,t[r++]<128)))break e;return s&&(s[0]=r),i}function xr(t){var s=0,r=t[s]&127;e:if(t[s++]>=128){if(r|=(t[s]&127)<<7,t[s++]<128||(r|=(t[s]&127)<<14,t[s++]<128)||(r|=(t[s]&127)<<21,t[s++]<128))break e;r|=(t[s]&127)<<28}return r}function fn(t){for(var s=[],r=[0];r[0]<t.length;){var i=r[0],l=Mh(t,r),c=l&7;l=Math.floor(l/8);var u=0,h;if(l==0)break;switch(c){case 0:{for(var _=r[0];t[r[0]++]>=128;);h=t.slice(_,r[0])}break;case 5:u=4,h=t.slice(r[0],r[0]+u),r[0]+=u;break;case 1:u=8,h=t.slice(r[0],r[0]+u),r[0]+=u;break;case 2:u=Mh(t,r),h=t.slice(r[0],r[0]+u),r[0]+=u;break;case 3:case 4:default:throw new Error("PB Type ".concat(c," for Field ").concat(l," at offset ").concat(i))}var f={data:h,type:c};s[l]==null?s[l]=[f]:s[l].push(f)}return s}function HI(t,s){return t?.map(function(r){return s(r.data)})||[]}function nW(t){for(var s,r=[],i=[0];i[0]<t.length;){var l=Mh(t,i),c=fn(t.slice(i[0],i[0]+l));i[0]+=l;var u={id:xr(c[1][0].data),messages:[]};c[2].forEach(function(h){var _=fn(h.data),f=xr(_[3][0].data);u.messages.push({meta:_,data:t.slice(i[0],i[0]+f)}),i[0]+=f}),(s=c[3])!=null&&s[0]&&(u.merge=xr(c[3][0].data)>>>0>0),r.push(u)}return r}function sW(t,s){if(t!=0)throw new Error("Unexpected Snappy chunk type ".concat(t));for(var r=[0],i=Mh(s,r),l=[];r[0]<s.length;){var c=s[r[0]]&3;if(c==0){var u=s[r[0]++]>>2;if(u<60)++u;else{var h=u-59;u=s[r[0]],h>1&&(u|=s[r[0]+1]<<8),h>2&&(u|=s[r[0]+2]<<16),h>3&&(u|=s[r[0]+3]<<24),u>>>=0,u++,r[0]+=h}l.push(s.slice(r[0],r[0]+u)),r[0]+=u;continue}else{var _=0,f=0;if(c==1?(f=(s[r[0]]>>2&7)+4,_=(s[r[0]++]&224)<<3,_|=s[r[0]++]):(f=(s[r[0]++]>>2)+1,c==2?(_=s[r[0]]|s[r[0]+1]<<8,r[0]+=2):(_=(s[r[0]]|s[r[0]+1]<<8|s[r[0]+2]<<16|s[r[0]+3]<<24)>>>0,r[0]+=4)),l=[T$(l)],_==0)throw new Error("Invalid offset 0");if(_>l[0].length)throw new Error("Invalid offset beyond length");if(f>=_)for(l.push(l[0].slice(-_)),f-=_;f>=l[l.length-1].length;)l.push(l[l.length-1]),f-=l[l.length-1].length;l.push(l[0].slice(-_,-_+f))}}var T=T$(l);if(T.length!=i)throw new Error("Unexpected length: ".concat(T.length," != ").concat(i));return T}function iW(t){for(var s=[],r=0;r<t.length;){var i=t[r++],l=t[r]|t[r+1]<<8|t[r+2]<<16;r+=3,s.push(sW(i,t.slice(r,r+l))),r+=l}if(r!==t.length)throw new Error("data is not a valid framed stream!");return T$(s)}function oW(t,s,r,i){var l=UI(t),c=l.getUint32(4,!0),u=(i>1?12:8)+KN(c&(i>1?3470:398))*4,h=-1,_=-1,f=NaN,T=new Date(2001,0,1);c&512&&(h=l.getUint32(u,!0),u+=4),u+=KN(c&(i>1?12288:4096))*4,c&16&&(_=l.getUint32(u,!0),u+=4),c&32&&(f=l.getFloat64(u,!0),u+=8),c&64&&(T.setTime(T.getTime()+l.getFloat64(u,!0)*1e3),u+=8);var E;switch(t[2]){case 0:break;case 2:E={t:"n",v:f};break;case 3:E={t:"s",v:s[_]};break;case 5:E={t:"d",v:T};break;case 6:E={t:"b",v:f>0};break;case 7:E={t:"n",v:f/86400};break;case 8:E={t:"e",v:0};break;case 9:if(h>-1)E={t:"s",v:r[h]};else if(_>-1)E={t:"s",v:s[_]};else if(!isNaN(f))E={t:"n",v:f};else throw new Error("Unsupported cell type ".concat(t.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(t.slice(0,4)))}return E}function lW(t,s,r){var i=UI(t),l=i.getUint32(8,!0),c=12,u=-1,h=-1,_=NaN,f=NaN,T=new Date(2001,0,1);l&1&&(_=rW(t,c),c+=16),l&2&&(f=i.getFloat64(c,!0),c+=8),l&4&&(T.setTime(T.getTime()+i.getFloat64(c,!0)*1e3),c+=8),l&8&&(h=i.getUint32(c,!0),c+=4),l&16&&(u=i.getUint32(c,!0),c+=4);var E;switch(t[1]){case 0:break;case 2:E={t:"n",v:_};break;case 3:E={t:"s",v:s[h]};break;case 5:E={t:"d",v:T};break;case 6:E={t:"b",v:f>0};break;case 7:E={t:"n",v:f/86400};break;case 8:E={t:"e",v:0};break;case 9:if(u>-1)E={t:"s",v:r[u]};else throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)));break;case 10:E={t:"n",v:_};break;default:throw new Error("Unsupported cell type ".concat(t[1]," : ").concat(l&31," : ").concat(t.slice(0,4)))}return E}function aW(t,s,r){switch(t[0]){case 0:case 1:case 2:case 3:return oW(t,s,r,t[0]);case 5:return lW(t,s,r);default:throw new Error("Unsupported payload version ".concat(t[0]))}}function Uo(t){var s=fn(t);return Mh(s[1][0].data)}function jN(t,s){var r=fn(s.data),i=xr(r[1][0].data),l=r[3],c=[];return(l||[]).forEach(function(u){var h=fn(u.data),_=xr(h[1][0].data)>>>0;switch(i){case 1:c[_]=f$(h[3][0].data);break;case 8:{var f=t[Uo(h[9][0].data)][0],T=fn(f.data),E=t[Uo(T[1][0].data)][0],g=xr(E.meta[1][0].data);if(g!=2001)throw new Error("2000 unexpected reference to ".concat(g));var S=fn(E.data);c[_]=S[3].map(function(R){return f$(R.data)}).join("")}break}}),c}function cW(t,s){var r,i,l,c,u,h,_,f,T,E,g,S,R,L,N=fn(t),C=xr(N[1][0].data)>>>0,A=xr(N[2][0].data)>>>0,I=((i=(r=N[8])==null?void 0:r[0])==null?void 0:i.data)&&xr(N[8][0].data)>0||!1,k,H;if((c=(l=N[7])==null?void 0:l[0])!=null&&c.data&&s!=0)k=(h=(u=N[7])==null?void 0:u[0])==null?void 0:h.data,H=(f=(_=N[6])==null?void 0:_[0])==null?void 0:f.data;else if((E=(T=N[4])==null?void 0:T[0])!=null&&E.data&&s!=1)k=(S=(g=N[4])==null?void 0:g[0])==null?void 0:S.data,H=(L=(R=N[3])==null?void 0:R[0])==null?void 0:L.data;else throw"NUMBERS Tile missing ".concat(s," cell storage");for(var G=I?4:1,x=UI(k),U=[],B=0;B<k.length/2;++B){var re=x.getUint16(B*2,!0);re<65535&&U.push([B,re])}if(U.length!=A)throw"Expected ".concat(A," cells, found ").concat(U.length);var Z=[];for(B=0;B<U.length-1;++B)Z[U[B][0]]=H.subarray(U[B][1]*G,U[B+1][1]*G);return U.length>=1&&(Z[U[U.length-1][0]]=H.subarray(U[U.length-1][1]*G)),{R:C,cells:Z}}function uW(t,s){var r,i=fn(s.data),l=(r=i?.[7])!=null&&r[0]?xr(i[7][0].data)>>>0>0?1:0:-1,c=HI(i[5],function(u){return cW(u,l)});return{nrows:xr(i[4][0].data)>>>0,data:c.reduce(function(u,h){return u[h.R]||(u[h.R]=[]),h.cells.forEach(function(_,f){if(u[h.R][f])throw new Error("Duplicate cell r=".concat(h.R," c=").concat(f));u[h.R][f]=_}),u},[])}}function hW(t,s,r){var i,l=fn(s.data),c={s:{r:0,c:0},e:{r:0,c:0}};if(c.e.r=(xr(l[6][0].data)>>>0)-1,c.e.r<0)throw new Error("Invalid row varint ".concat(l[6][0].data));if(c.e.c=(xr(l[7][0].data)>>>0)-1,c.e.c<0)throw new Error("Invalid col varint ".concat(l[7][0].data));r["!ref"]=Ct(c);var u=fn(l[4][0].data),h=jN(t,t[Uo(u[4][0].data)][0]),_=(i=u[17])!=null&&i[0]?jN(t,t[Uo(u[17][0].data)][0]):[],f=fn(u[3][0].data),T=0;f[1].forEach(function(E){var g=fn(E.data),S=t[Uo(g[2][0].data)][0],R=xr(S.meta[1][0].data);if(R!=6002)throw new Error("6001 unexpected reference to ".concat(R));var L=uW(t,S);L.data.forEach(function(N,C){N.forEach(function(A,I){var k=_t({r:T+C,c:I}),H=aW(A,h,_);H&&(r[k]=H)})}),T+=L.nrows})}function dW(t,s){var r=fn(s.data),i={"!ref":"A1"},l=t[Uo(r[2][0].data)],c=xr(l[0].meta[1][0].data);if(c!=6001)throw new Error("6000 unexpected reference to ".concat(c));return hW(t,l[0],i),i}function _W(t,s){var r,i=fn(s.data),l={name:(r=i[1])!=null&&r[0]?f$(i[1][0].data):"",sheets:[]},c=HI(i[2],Uo);return c.forEach(function(u){t[u].forEach(function(h){var _=xr(h.meta[1][0].data);_==6e3&&l.sheets.push(dW(t,h))})}),l}function fW(t,s){var r=Ck(),i=fn(s.data),l=HI(i[1],Uo);if(l.forEach(function(c){t[c].forEach(function(u){var h=xr(u.meta[1][0].data);if(h==2){var _=_W(t,u);_.sheets.forEach(function(f,T){vk(r,f,T==0?_.name:_.name+"_"+T,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Q0(t){var s,r,i,l,c={},u=[];if(t.FullPaths.forEach(function(_){if(_.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),t.FileIndex.forEach(function(_){if(_.name.match(/\.iwa$/)){var f;try{f=iW(_.content)}catch(E){return console.log("?? "+_.content.length+" "+(E.message||E))}var T;try{T=nW(f)}catch(E){return console.log("## "+(E.message||E))}T.forEach(function(E){c[E.id]=E.messages,u.push(E.id)})}}),!u.length)throw new Error("File has no messages");var h=((l=(i=(r=(s=c?.[1])==null?void 0:s[0])==null?void 0:r.meta)==null?void 0:i[1])==null?void 0:l[0].data)&&xr(c[1][0].meta[1][0].data)==1&&c[1][0];if(h||u.forEach(function(_){c[_].forEach(function(f){var T=xr(f.meta[1][0].data)>>>0;if(T==1)if(!h)h=f;else throw new Error("Document has multiple roots")})}),!h)throw new Error("Cannot find Document root");return fW(c,h)}function TW(t){return function(r){for(var i=0;i!=t.length;++i){var l=t[i];r[l[0]]===void 0&&(r[l[0]]=l[1]),l[2]==="n"&&(r[l[0]]=Number(r[l[0]]))}}}function GI(t){TW([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(t)}function pW(t){return rc.WS.indexOf(t)>-1?"sheet":t==rc.CS?"chart":t==rc.DS?"dialog":t==rc.MS?"macro":t&&t.length?t:"sheet"}function EW(t,s){if(!t)return 0;try{t=s.map(function(i){return i.id||(i.id=i.strRelID),[i.name,t["!id"][i.id].Target,pW(t["!id"][i.id].Type)]})}catch{return null}return!t||t.length===0?null:t}function gW(t,s,r,i,l,c,u,h,_,f,T,E){try{c[i]=rh(qn(t,r,!0),s);var g=$r(t,s),S;switch(h){case"sheet":S=b3(g,s,l,_,c[i],f,T,E);break;case"chart":if(S=y3(g,s,l,_,c[i],f,T,E),!S||!S["!drawel"])break;var R=Hu(S["!drawel"].Target,s),L=c$(R),N=xG(qn(t,R,!0),rh(qn(t,L,!0),R)),C=Hu(N,R),A=c$(C);S=f3(qn(t,C,!0),C,_,rh(qn(t,A,!0),C),f,S);break;case"macro":S=k3(g,s,l,_,c[i],f,T,E);break;case"dialog":S=w3(g,s,l,_,c[i],f,T,E);break;default:throw new Error("Unrecognized sheet type "+h)}u[i]=S;var I=[];c&&c[i]&&Wo(c[i]).forEach(function(k){var H="";if(c[i][k].Type==rc.CMNT){H=Hu(c[i][k].Target,s);var G=F3($r(t,H,!0),H,_);if(!G||!G.length)return;MN(S,G,!1)}c[i][k].Type==rc.TCMNT&&(H=Hu(c[i][k].Target,s),I=I.concat(yG($r(t,H,!0),_)))}),I&&I.length&&MN(S,I,!0,_.people||[])}catch(k){if(_.WTF)throw k}}function _s(t){return t.charAt(0)=="/"?t.slice(1):t}function mW(t,s){if(uy(),s=s||{},GI(s),Ts(t,"META-INF/manifest.xml")||Ts(t,"objectdata.xml"))return zN(t,s);if(Ts(t,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Q0<"u"){if(t.FileIndex)return Q0(t);var r=Et.utils.cfb_new();return aN(t).forEach(function(Me){NB(r,Me,vB(t,Me))}),Q0(r)}throw new Error("Unsupported NUMBERS file")}if(!Ts(t,"[Content_Types].xml"))throw Ts(t,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Ts(t,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var i=aN(t),l=O2(qn(t,"[Content_Types].xml")),c=!1,u,h;if(l.workbooks.length===0&&(h="xl/workbook.xml",$r(t,h,!0)&&l.workbooks.push(h)),l.workbooks.length===0){if(h="xl/workbook.bin",!$r(t,h,!0))throw new Error("Could not find workbook");l.workbooks.push(h),c=!0}l.workbooks[0].slice(-3)=="bin"&&(c=!0);var _={},f={};if(!s.bookSheets&&!s.bookProps){if(ih=[],l.sst)try{ih=P3($r(t,_s(l.sst)),l.sst,s)}catch(Me){if(s.WTF)throw Me}s.cellStyles&&l.themes.length&&(_=D3(qn(t,l.themes[0].replace(/^\//,""),!0)||"",l.themes[0],s)),l.style&&(f=M3($r(t,_s(l.style)),l.style,_,s))}l.links.map(function(Me){try{var Oe=rh(qn(t,c$(_s(Me))),Me);return U3($r(t,_s(Me)),Oe,Me,s)}catch{}});var T=x3($r(t,_s(l.workbooks[0])),l.workbooks[0],s),E={},g="";l.coreprops.length&&(g=$r(t,_s(l.coreprops[0]),!0),g&&(E=Uy(g)),l.extprops.length!==0&&(g=$r(t,_s(l.extprops[0]),!0),g&&C2(g,E,s)));var S={};(!s.bookSheets||s.bookProps)&&l.custprops.length!==0&&(g=qn(t,_s(l.custprops[0]),!0),g&&(S=N2(g,s)));var R={};if((s.bookSheets||s.bookProps)&&(T.Sheets?u=T.Sheets.map(function(Oe){return Oe.name}):E.Worksheets&&E.SheetNames.length>0&&(u=E.SheetNames),s.bookProps&&(R.Props=E,R.Custprops=S),s.bookSheets&&typeof u<"u"&&(R.SheetNames=u),s.bookSheets?R.SheetNames:s.bookProps))return R;u={};var L={};s.bookDeps&&l.calcchain&&(L=B3($r(t,_s(l.calcchain)),l.calcchain));var N=0,C={},A,I;{var k=T.Sheets;E.Worksheets=k.length,E.SheetNames=[];for(var H=0;H!=k.length;++H)E.SheetNames[H]=k[H].name}var G=c?"bin":"xml",x=l.workbooks[0].lastIndexOf("/"),U=(l.workbooks[0].slice(0,x+1)+"_rels/"+l.workbooks[0].slice(x+1)+".rels").replace(/^\//,"");Ts(t,U)||(U="xl/_rels/workbook."+G+".rels");var B=rh(qn(t,U,!0),U.replace(/_rels.*/,"s5s"));(l.metadata||[]).length>=1&&(s.xlmeta=H3($r(t,_s(l.metadata[0])),l.metadata[0],s)),(l.people||[]).length>=1&&(s.people=kG($r(t,_s(l.people[0])),s)),B&&(B=EW(B,T.Sheets));var re=$r(t,"xl/worksheets/sheet.xml",!0)?1:0;e:for(N=0;N!=E.Worksheets;++N){var Z="sheet";if(B&&B[N]?(A="xl/"+B[N][1].replace(/[\/]?xl\//,""),Ts(t,A)||(A=B[N][1]),Ts(t,A)||(A=U.replace(/_rels\/.*$/,"")+B[N][1]),Z=B[N][2]):(A="xl/worksheets/sheet"+(N+1-re)+"."+G,A=A.replace(/sheet0\./,"sheet.")),I=A.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),s&&s.sheets!=null)switch(typeof s.sheets){case"number":if(N!=s.sheets)continue e;break;case"string":if(E.SheetNames[N].toLowerCase()!=s.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(s.sheets)){for(var se=!1,pe=0;pe!=s.sheets.length;++pe)typeof s.sheets[pe]=="number"&&s.sheets[pe]==N&&(se=1),typeof s.sheets[pe]=="string"&&s.sheets[pe].toLowerCase()==E.SheetNames[N].toLowerCase()&&(se=1);if(!se)continue e}}gW(t,A,I,E.SheetNames[N],N,C,u,Z,s,T,_,f)}return R={Directory:l,Workbook:T,Props:E,Custprops:S,Deps:L,Sheets:u,SheetNames:E.SheetNames,Strings:ih,Styles:f,Themes:_,SSF:en(dt)},s&&s.bookFiles&&(t.files?(R.keys=i,R.files=t.files):(R.keys=[],R.files={},t.FullPaths.forEach(function(Me,Oe){Me=Me.replace(/^Root Entry[\/]/,""),R.keys.push(Me),R.files[Me]=t.FileIndex[Oe]}))),s&&s.bookVBA&&(l.vba.length>0?R.vbaraw=$r(t,_s(l.vba[0]),!0):l.defaults&&l.defaults.bin===PG&&(R.vbaraw=$r(t,"xl/vbaProject.bin",!0))),R}function $W(t,s){var r=s||{},i="Workbook",l=Et.find(t,i);try{if(i="/!DataSpaces/Version",l=Et.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(mH(l.content),i="/!DataSpaces/DataSpaceMap",l=Et.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var c=IH(l.content);if(c.length!==1||c[0].comps.length!==1||c[0].comps[0].t!==0||c[0].name!=="StrongEncryptionDataSpace"||c[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",l=Et.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var u=OH(l.content);if(u.length!=1||u[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+i);if(i="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",l=Et.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);RH(l.content)}catch{}if(i="/EncryptionInfo",l=Et.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);var h=LH(l.content);if(i="/EncryptedPackage",l=Et.find(t,i),!l||!l.content)throw new Error("ECMA-376 Encrypted file missing "+i);if(h[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(h[1],l.content,r.password||"",r);if(h[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(h[1],l.content,r.password||"",r);throw new Error("File is password-protected")}function VI(t,s){var r="";switch((s||{}).type||"base64"){case"buffer":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];case"base64":r=rs(t.slice(0,12));break;case"binary":r=t;break;case"array":return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]];default:throw new Error("Unrecognized type "+(s&&s.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function IW(t,s){return Et.find(t,"EncryptedPackage")?$W(t,s):Rk(t,s)}function OW(t,s){var r,i=t,l=s||{};return l.type||(l.type=pt&&Buffer.isBuffer(t)?"buffer":"base64"),r=py(i,l),mW(r,l)}function Ak(t,s){var r=0;e:for(;r<t.length;)switch(t.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return d$(t.slice(r),s);default:break e}return yh.to_workbook(t,s)}function SW(t,s){var r="",i=VI(t,s);switch(s.type){case"base64":r=rs(t);break;case"binary":r=t;break;case"buffer":r=t.toString("binary");break;case"array":r=Hl(t);break;default:throw new Error("Unrecognized type "+s.type)}return i[0]==239&&i[1]==187&&i[2]==191&&(r=Ft(r)),s.type="binary",Ak(r,s)}function RW(t,s){var r=t;return s.type=="base64"&&(r=rs(r)),r=Ch.utils.decode(1200,r.slice(2),"str"),s.type="binary",Ak(r,s)}function LW(t){return t.match(/[^\x00-\x7F]/)?Gu(t):t}function em(t,s,r,i){return i?(r.type="string",yh.to_workbook(t,r)):yh.to_workbook(s,r)}function p$(t,s){Z1();var r=s||{};if(typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer)return p$(new Uint8Array(t),(r=en(r),r.type="array",r));typeof Uint8Array<"u"&&t instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var i=t,l=[0,0,0,0],c=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),dc={},r.dateNF&&(dc.dateNF=r.dateNF),r.type||(r.type=pt&&Buffer.isBuffer(t)?"buffer":"base64"),r.type=="file"&&(r.type=pt?"buffer":"binary",i=IB(t),typeof Uint8Array<"u"&&!pt&&(r.type="array")),r.type=="string"&&(c=!0,r.type="binary",r.codepage=65001,i=LW(t)),r.type=="array"&&typeof Uint8Array<"u"&&t instanceof Uint8Array&&typeof ArrayBuffer<"u"){var u=new ArrayBuffer(3),h=new Uint8Array(u);if(h.foo="bar",!h.foo)return r=en(r),r.type="array",p$(SI(i),r)}switch((l=VI(i,r))[0]){case 208:if(l[1]===207&&l[2]===17&&l[3]===224&&l[4]===161&&l[5]===177&&l[6]===26&&l[7]===225)return IW(Et.read(i,r),r);break;case 9:if(l[1]<=8)return Rk(i,r);break;case 60:return d$(i,r);case 73:if(l[1]===73&&l[2]===42&&l[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(l[1]===68)return oH(i,r);break;case 84:if(l[1]===65&&l[2]===66&&l[3]===76)return sH.to_workbook(i,r);break;case 80:return l[1]===75&&l[2]<9&&l[3]<9?OW(i,r):em(t,i,r,c);case 239:return l[3]===60?d$(i,r):em(t,i,r,c);case 255:if(l[1]===254)return RW(i,r);if(l[1]===0&&l[2]===2&&l[3]===0)return sh.to_workbook(i,r);break;case 0:if(l[1]===0&&(l[2]>=2&&l[3]===0||l[2]===0&&(l[3]===8||l[3]===9)))return sh.to_workbook(i,r);break;case 3:case 131:case 139:case 140:return wN.to_workbook(i,r);case 123:if(l[1]===92&&l[2]===114&&l[3]===116)return PH.to_workbook(i,r);break;case 10:case 13:case 32:return SW(i,r);case 137:if(l[1]===80&&l[2]===78&&l[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return rH.indexOf(l[0])>-1&&l[2]<=12&&l[3]<=31?wN.to_workbook(i,r):em(t,i,r,c)}function AW(t,s,r,i,l,c,u,h){var _=es(r),f=h.defval,T=h.raw||!Object.prototype.hasOwnProperty.call(h,"raw"),E=!0,g=l===1?[]:{};if(l!==1)if(Object.defineProperty)try{Object.defineProperty(g,"__rowNum__",{value:r,enumerable:!1})}catch{g.__rowNum__=r}else g.__rowNum__=r;if(!u||t[r])for(var S=s.s.c;S<=s.e.c;++S){var R=u?t[r][S]:t[i[S]+_];if(R===void 0||R.t===void 0){if(f===void 0)continue;c[S]!=null&&(g[c[S]]=f);continue}var L=R.v;switch(R.t){case"z":if(L==null)break;continue;case"e":L=L==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+R.t)}if(c[S]!=null){if(L==null)if(R.t=="e"&&L===null)g[c[S]]=null;else if(f!==void 0)g[c[S]]=f;else if(T&&L===null)g[c[S]]=null;else continue;else g[c[S]]=T&&(R.t!=="n"||R.t==="n"&&h.rawNumbers!==!1)?L:Lc(R,L,h);L!=null&&(E=!1)}}return{row:g,isempty:E}}function CW(t,s){if(t==null||t["!ref"]==null)return[];var r={t:"n",v:0},i=0,l=1,c=[],u=0,h="",_={s:{r:0,c:0},e:{r:0,c:0}},f=s||{},T=f.range!=null?f.range:t["!ref"];switch(f.header===1?i=1:f.header==="A"?i=2:Array.isArray(f.header)?i=3:f.header==null&&(i=0),typeof T){case"string":_=zr(T);break;case"number":_=zr(t["!ref"]),_.s.r=T;break;default:_=T}i>0&&(l=0);var E=es(_.s.r),g=[],S=[],R=0,L=0,N=Array.isArray(t),C=_.s.r,A=0,I={};N&&!t[C]&&(t[C]=[]);var k=f.skipHidden&&t["!cols"]||[],H=f.skipHidden&&t["!rows"]||[];for(A=_.s.c;A<=_.e.c;++A)if(!(k[A]||{}).hidden)switch(g[A]=Ln(A),r=N?t[C][A]:t[g[A]+E],i){case 1:c[A]=A-_.s.c;break;case 2:c[A]=g[A];break;case 3:c[A]=f.header[A-_.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),h=u=Lc(r,null,f),L=I[u]||0,!L)I[u]=1;else{do h=u+"_"+L++;while(I[h]);I[u]=L,I[h]=1}c[A]=h}for(C=_.s.r+l;C<=_.e.r;++C)if(!(H[C]||{}).hidden){var G=AW(t,_,C,g,i,c,N,f);(G.isempty===!1||(i===1?f.blankrows!==!1:f.blankrows))&&(S[R++]=G.row)}return S.length=R,S}function Ck(){return{SheetNames:[],Sheets:{}}}function vk(t,s,r,i){var l=1;if(!r)for(;l<=65535&&t.SheetNames.indexOf(r="Sheet"+l)!=-1;++l,r=void 0);if(!r||t.SheetNames.length>=65535)throw new Error("Too many worksheets");if(i&&t.SheetNames.indexOf(r)>=0){var c=r.match(/(^.*?)(\d+)$/);l=c&&+c[2]||0;var u=c&&c[1]||r;for(++l;l<=65535&&t.SheetNames.indexOf(r=u+l)!=-1;++l);}if(O3(r),t.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return t.SheetNames.push(r),t.Sheets[r]=s,r}function vW(t){const s=p$(t,{type:"array",cellFormula:!0,cellText:!0,cellNF:!1}),r=[];for(const i of s.SheetNames){const l=s.Sheets[i];if(!l)continue;const c={};for(const u of Object.keys(l)){if(u.startsWith("!"))continue;const h=l[u],_=h.f,f=_?_.startsWith("=")?_:`=${_}`:void 0;c[u]={displayText:h.w??String(h.v??""),rawValue:h.v,formula:f}}r.push({name:i,cells:c})}return{sheets:r}}function NW(t){return{schemaVersion:1,exportedAt:new Date().toISOString(),fns:t.functions.map(s=>{const r=t.workspaces.find(i=>i.id===s.workspaceId);return{name:s.name,params:s.params??[],description:s.description??"",workspaceXml:r?.xml??""}})}}function xW(t,s){const r=t?.schemaVersion??t?.version;if(r!==1)throw new Error(`Unsupported schemaVersion: ${r}`);const i=t?.fns??t?.functions??[];if(!Array.isArray(i))throw new Error("Invalid named function JSON: fns/functions is not array");const l=new Set,c=[];for(const u of i){let h=String(u?.name??"Unnamed");{let T=2;for(;l.has(h);)h=`${String(u?.name??"Unnamed")} (${T++})`}l.add(h);const _=crypto.randomUUID(),f=crypto.randomUUID();c.push({fn:{id:_,name:h,params:Array.isArray(u?.params)?u.params:[],description:u?.description??"",workspaceId:f},workspaceXml:String(u?.workspaceXml??"")})}return c}const bW=8,yW=20,JN=80,qN=22,kW=11;function wW(t=bW){const s=[];for(let i=0;i<t;i++)s.push(r(i));return s;function r(i){let l=i,c="";for(;l>=0;)c=String.fromCharCode(65+l%26)+c,l=Math.floor(l/26)-1;return c}}function MW(t=yW){return Array.from({length:t},(s,r)=>r+1)}function DW({selectedRefText:t,selectedCell:s,cells:r,uiLang:i="en"}){const l=r[s],c=l?.displayText??"",u=l?.formula??"",h=async()=>{if(u)try{await navigator.clipboard.writeText(u)}catch{const _=document.createElement("textarea");_.value=u,document.body.appendChild(_),_.select(),document.execCommand("copy"),document.body.removeChild(_)}};return V.jsx("div",{className:"bg-gray-100 border-b border-gray-300 px-3 py-2",children:V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("div",{className:"bg-white border border-emerald-300 px-3 py-1 text-sm text-emerald-700 shrink-0",children:t}),V.jsx("div",{className:"flex-1 min-w-[120px] bg-white border border-gray-300 px-2 py-1 text-xs text-gray-800 overflow-hidden whitespace-nowrap text-ellipsis",title:c,children:c}),V.jsx("span",{className:"text-xs text-gray-500 shrink-0",children:"fx"}),V.jsx("div",{className:"flex-[2] min-w-[200px] bg-white border border-gray-300 px-2 py-1 text-xs text-gray-700 overflow-hidden whitespace-nowrap text-ellipsis",title:u,children:u}),V.jsx("button",{className:"px-2 py-1 text-xs border border-gray-300 bg-white hover:bg-gray-50",onClick:h,disabled:!u,title:i==="ja"?"":"Copy formula",children:""})]})})}function $s(t){const s=WI(t);return s?{colIndex:NT(s.col),row:s.row}:null}function aT(t){return`${Nk(t.colIndex)}${t.row}`}function _c(t,s){const r=$s(t),i=$s(s);if(!r||!i)return null;const l=Math.min(r.colIndex,i.colIndex),c=Math.max(r.colIndex,i.colIndex),u=Math.min(r.row,i.row),h=Math.max(r.row,i.row);return{a:aT({colIndex:l,row:u}),b:aT({colIndex:c,row:h})}}function Lf(t){return t.a===t.b?t.a:`${t.a}:${t.b}`}function E$(t,s){const r=$s(t),i=$s(s.a),l=$s(s.b);if(!r||!i||!l)return!1;const c=Math.min(i.colIndex,l.colIndex),u=Math.max(i.colIndex,l.colIndex),h=Math.min(i.row,l.row),_=Math.max(i.row,l.row);return c<=r.colIndex&&r.colIndex<=u&&h<=r.row&&r.row<=_}function ZN(t,s){const r=$s(t),i=$s(s.a),l=$s(s.b);if(!r||!i||!l)return{top:!1,bottom:!1,left:!1,right:!1};const c=Math.min(i.colIndex,l.colIndex),u=Math.max(i.colIndex,l.colIndex),h=Math.min(i.row,l.row),_=Math.max(i.row,l.row);return c<=r.colIndex&&r.colIndex<=u&&h<=r.row&&r.row<=_?{top:r.row===h,bottom:r.row===_,left:r.colIndex===c,right:r.colIndex===u}:{top:!1,bottom:!1,left:!1,right:!1}}function PW(t,s){return`${t}${s}`}function NT(t){let s=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);if(i<65||i>90)throw new Error(`Invalid column: ${t}`);s=s*26+(i-64)}return s-1}function Nk(t){if(t<0)throw new Error(`Invalid col index: ${t}`);let s=t,r="";for(;s>=0;)r=String.fromCharCode(65+s%26)+r,s=Math.floor(s/26)-1;return r}function WI(t){const s=/^([A-Z]+)(\d+)$/.exec(t);if(!s)return null;const r=s[1],i=Number(s[2]);return!Number.isFinite(i)||i<=0?null:{col:r,row:i}}function XI(t,s,r){const i=WI(t);if(!i)return null;const l=NT(i.col)+s,c=i.row+r;return l<0||c<=0?null:`${Nk(l)}${c}`}function FW(t){const s=new Set;for(const[r,i]of Object.entries(t)){const l=i.merge;if(!l)continue;const c=Math.max(1,l.rowspan),u=Math.max(1,l.colspan);if(!(c===1&&u===1))for(let h=0;h<c;h++)for(let _=0;_<u;_++){if(h===0&&_===0)continue;const f=XI(r,_,h);f&&s.add(f)}}return s}function BW({columns:t,rows:s,selectedCell:r,cells:i,onCellClick:l,onScrollNearEdge:c,range:u,highlightRange:h,dragging:_,onCellMouseDown:f,onCellMouseEnter:T,onMouseUpAnywhere:E,usedRange:g,onCellContextMenu:S}){const R=Ce.useMemo(()=>FW(i),[i]),L=I=>{if(!c)return;const k=I.currentTarget,H=200,G=k.scrollTop+k.clientHeight>=k.scrollHeight-H,x=k.scrollLeft+k.clientWidth>=k.scrollWidth-H;(G||x)&&c({bottom:G,right:x})},N="2px solid rgba(16,185,129,0.8)",C="2px solid rgba(59,130,246,0.55)",A="1px solid rgba(0,0,0,0.25)";return V.jsx("div",{className:"flex-1 overflow-auto",tabIndex:0,onMouseEnter:I=>I.currentTarget.focus(),onScroll:L,onMouseUp:E,onMouseLeave:E,children:V.jsxs("table",{className:"w-full border-collapse",style:{fontSize:kW},children:[V.jsx("thead",{className:"sticky top-0 bg-gray-100 z-10",children:V.jsxs("tr",{children:[V.jsx("th",{className:"w-12 border border-gray-300 bg-gray-200 text-xs p-1"}),t.map(I=>V.jsx("th",{className:"border border-gray-300 bg-gray-200 text-xs p-1",style:{minWidth:JN},children:I},I))]})}),V.jsx("tbody",{children:s.map(I=>V.jsxs("tr",{style:{height:qN},children:[V.jsx("td",{className:"border border-gray-300 bg-gray-200 text-xs text-center p-1",children:I}),t.map(k=>{const H=PW(k,I);if(R.has(H))return null;const G=H===r,x=i[H],U=x?.displayText??"",B=x?.merge?.rowspan??1,re=x?.merge?.colspan??1,Z=x?.style?.bg,se=x?.style?.fg,pe=x?.style?.bold?"700":"400",Me=x?.style?.italic?"italic":"normal",Oe=x?.style?.underline?"underline":"none",we=x?.style?.borderTop,ye=x?.style?.borderRight,Re=x?.style?.borderBottom,j=x?.style?.borderLeft,Y=u?E$(H,u):!1,oe=u?ZN(H,u):{top:!1,bottom:!1,left:!1,right:!1},M=h?E$(H,h):!1,Q=h?ZN(H,h):{top:!1,bottom:!1,left:!1,right:!1},J=Y&&!G?"rgba(16,185,129,0.12)":void 0,q=M&&!G&&!Y?"rgba(59,130,246,0.08)":void 0,he=NT(k),Ne=g,Pe=!!Ne&&I<=Ne.maxRow&&he<=Ne.maxColIndex,be=!!Ne&&I===1&&he<=Ne.maxColIndex,ce=!!Ne&&he===0&&I<=Ne.maxRow,tt=!!Ne&&I===Ne.maxRow&&he<=Ne.maxColIndex,b=!!Ne&&he===Ne.maxColIndex&&I<=Ne.maxRow,_e=Pe&&!G&&!Y&&!M?"rgba(0,0,0,0.02)":void 0,He=G?void 0:oe.top?N:Q.top?C:we??(be?A:void 0),ke=G?void 0:oe.bottom?N:Q.bottom?C:Re??(tt?A:void 0),Ze=G?void 0:oe.left?N:Q.left?C:j??(ce?A:void 0),ve=G?void 0:oe.right?N:Q.right?C:ye??(b?A:void 0);return V.jsx("td",{onContextMenu:ut=>{ut.preventDefault(),S?.(H,ut.clientX,ut.clientY)},rowSpan:B>1?B:void 0,colSpan:re>1?re:void 0,onClick:()=>l(H),onMouseDown:ut=>{ut.preventDefault(),f?.(H)},onMouseEnter:()=>{_&&T?.(H)},className:["border border-gray-300 px-1 cursor-pointer","transition-colors",G?"bg-emerald-100 border-emerald-500 border-2":"bg-white hover:bg-gray-50"].join(" "),style:{height:qN,minWidth:JN,backgroundColor:G?void 0:J??q??_e??Z,color:se,fontWeight:pe,fontStyle:Me,textDecoration:Oe,borderTop:He,borderRight:ve,borderBottom:ke,borderLeft:Ze,verticalAlign:"middle",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:U,children:U},H)})]},I))})]})})}function QN(t,s,r="A1"){const i=UW(s);if(i.length===0)return t;const l={...t};for(let c=0;c<i.length;c++){const u=i[c];for(let h=0;h<u.length;h++){const _=XI(r,h,c);if(!_)continue;const f=u[h]??"",T=l[_],E=T?{...T,displayText:f}:{displayText:f};l[_]=E}}return l}function UW(t){const s=t.replace(/\s+$/g,"");return s?s.split(/\r?\n/).map(r=>r.split("	")):[]}function HW(t,s,r="A1"){const i=GW(s);if(!i)return t;const{table:l}=i,c={...t},u=new Set,h=(f,T)=>`${f},${T}`,_=Array.from(l.querySelectorAll("tr"));for(let f=0;f<_.length;f++){const T=_[f],E=Array.from(T.querySelectorAll("td,th"));let g=0;for(const S of E){for(;u.has(h(f,g));)g++;const R=Math.max(1,parseInt(S.getAttribute("colspan")??"1",10)||1),L=Math.max(1,parseInt(S.getAttribute("rowspan")??"1",10)||1),N=XI(r,g,f);if(N){const C=VW(S.textContent??""),A=XW(S.getAttribute("style")??""),I=c[N],k=I?{...I,displayText:C,style:WW(I.style,A),merge:L>1||R>1?{rowspan:L,colspan:R}:I.merge}:{displayText:C,style:A,merge:L>1||R>1?{rowspan:L,colspan:R}:void 0};c[N]=k}for(let C=0;C<L;C++)for(let A=0;A<R;A++)u.add(h(f+C,g+A));g+=R}}return c}function GW(t){const r=new DOMParser().parseFromString(t,"text/html"),i=r.querySelector("table");return i?{doc:r,table:i}:null}function VW(t){return t.replace(/\u00a0/g," ").trim()}function WW(t,s){return t?s?{...t,...s}:t:s}function XW(t){const s=zW(t);if(Object.keys(s).length===0)return;const r={},i=fi(s,["background-color","background"]);i&&(r.bg=i);const l=fi(s,["color"]);l&&(r.fg=l);const c=fi(s,["font-weight"]);c&&(r.bold=YW(c));const u=fi(s,["font-style"]);u&&(r.italic=u.toLowerCase().includes("italic"));const h=fi(s,["text-decoration","text-decoration-line"]);h&&(r.underline=h.toLowerCase().includes("underline"));const _=fi(s,["border"]),f=fi(s,["border-top"])??_,T=fi(s,["border-right"])??_,E=fi(s,["border-bottom"])??_,g=fi(s,["border-left"])??_;return f&&(r.borderTop=f),T&&(r.borderRight=T),E&&(r.borderBottom=E),g&&(r.borderLeft=g),Object.keys(r).length?r:void 0}function zW(t){const s={};return t.split(";").map(r=>r.trim()).filter(Boolean).forEach(r=>{const i=r.indexOf(":");if(i<0)return;const l=r.slice(0,i).trim().toLowerCase(),c=r.slice(i+1).trim();!l||!c||(s[l]=c)}),s}function fi(t,s){for(const r of s){const i=t[r];if(i)return i}}function YW(t){const s=t.trim().toLowerCase();if(s==="bold"||s==="bolder")return!0;const r=Number(s);return Number.isFinite(r)&&r>=600}function ex(t){let s=1,r=0;for(const[i,l]of Object.entries(t)){if((l?.displayText??"").trim()==="")continue;const u=WI(i);u&&(s=Math.max(s,u.row),r=Math.max(r,NT(u.col)))}return{maxRow:s,maxColIndex:r}}function KW(t){const{open:s,x:r,y:i,actions:l,onClose:c,onAction:u}=t,h=Ce.useRef(null),_=Ce.useMemo(()=>{const T=Math.min(360,l.length*34+16),E=Math.min(r,window.innerWidth-220-8),g=Math.min(i,window.innerHeight-T-8);return{left:Math.max(8,E),top:Math.max(8,g),width:220}},[r,i,l.length]);return Ce.useEffect(()=>{if(!s)return;let f=!1;const T=window.setTimeout(()=>f=!0,0),E=S=>{if(!f)return;const R=h.current;R&&R.contains(S.target)||c()},g=S=>{S.key==="Escape"&&c()};return window.addEventListener("pointerdown",E,!0),window.addEventListener("keydown",g),()=>{window.clearTimeout(T),window.removeEventListener("pointerdown",E,!0),window.removeEventListener("keydown",g)}},[s,c]),s?v1.createPortal(V.jsx("div",{ref:h,style:{position:"fixed",left:_.left,top:_.top,width:260,minHeight:120,zIndex:99999,background:"white",border:"1px solid #d1d5db",borderRadius:8,boxShadow:"0 8px 24px rgba(0,0,0,0.15)",padding:8},children:l.map(f=>{const T=f.enabled!==!1;return V.jsx("button",{disabled:!T,onClick:()=>{T&&(u(f.id),c())},className:["w-full text-left px-3 py-2 text-sm",T?"hover:bg-gray-100":"text-gray-400 cursor-not-allowed"].join(" "),children:f.label},f.id)})}),document.body):null}async function tm(t){try{await navigator.clipboard.writeText(t)}catch{jW(t)}}function jW(t){const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.left="-9999px",s.style.top="-9999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}finally{document.body.removeChild(s)}}function JW(t,s){const r=_c(s.a,s.b);if(!r)return"";const i=$s(r.a),l=$s(r.b),c=[];for(let u=i.row;u<=l.row;u++){const h=[];for(let _=i.colIndex;_<=l.colIndex;_++){const f=aT({colIndex:_,row:u}),T=t[f]?.displayText??"";h.push(T)}c.push(h.join("	"))}return c.join(`
`)}function qW(t,s){return zI(t,s,r=>({...r,displayText:""}))}function ZW(t,s){return zI(t,s,r=>({...r,style:void 0,merge:void 0}))}function QW(t,s){return zI(t,s,r=>({...r,displayText:"",style:void 0,merge:void 0,formula:void 0}))}function zI(t,s,r){const i=_c(s.a,s.b);if(!i)return t;const l=$s(i.a),c=$s(i.b),u={...t};for(let h=l.row;h<=c.row;h++)for(let _=l.colIndex;_<=c.colIndex;_++){const f=aT({colIndex:_,row:h}),T=u[f]??{displayText:""},E=r(T),g=(E.displayText??"").trim(),S=!!E.style,R=!!E.merge,L=!!E.formula;!g&&!S&&!R&&!L?delete u[f]:u[f]=E}return u}function eX(t){const s=Xr(t.uiLang??"en"),r=!!t.range&&t.inRangeContext;return[{id:"copy_ref",label:s(Qe.COPY_REF)},{id:"copy_value",label:s(Qe.COPY_VALUE),enabled:!r},{id:"copy_tsv",label:s(Qe.COPY_TSV),enabled:r},{id:"paste",label:s(Qe.PASTE)},{id:"add_ref_block",label:s(Qe.ADD_REF_BLOCK)},{id:"clear_value",label:s(Qe.CLEAR_VALUE)},{id:"clear_style",label:s(Qe.CLEAR_STYLE)},{id:"clear_all",label:s(Qe.CLEAR_ALL)}]}async function tX(t){const s=!!t.range&&t.inRangeContext,r=(()=>{if(s&&t.range){const i=_c(t.range.a,t.range.b);return i?Lf(i):t.range.a}return t.selectedCell})();switch(t.action){case"copy_ref":await tm(r);return;case"copy_value":if(s)return;await tm(t.cells[t.selectedCell]?.displayText??"");return;case"copy_tsv":if(!s||!t.range)return;await tm(JW(t.cells,t.range));return;case"paste":t.onPasteRequest?.();return;case"add_ref_block":t.onAddRefBlock?.(r);return;case"clear_value":t.setCells(i=>{const l=s&&t.range?t.range:{a:t.selectedCell,b:t.selectedCell};return qW(i,l)});return;case"clear_style":t.setCells(i=>{const l=s&&t.range?t.range:{a:t.selectedCell,b:t.selectedCell};return ZW(i,l)});return;case"clear_all":t.setCells(i=>{const l=s&&t.range?t.range:{a:t.selectedCell,b:t.selectedCell};return QW(i,l)});return}}const tx=8,rx=20,rX=10,nX=30,sX=10,iX=50,nx=200,sx=2e3;function xk({selectedCell:t,onCellSelect:s,cells:r,onCellsChange:i,onRangeSelect:l,onAddRefBlock:c,uiLang:u,highlightRange:h}){const[_,f]=Ce.useState(tx),[T,E]=Ce.useState(rx),[g,S]=Ce.useState(null),R=Ce.useRef(null),L=Ce.useMemo(()=>wW(_),[_]),N=Ce.useMemo(()=>MW(T),[T]),[C,A]=Ce.useState(!1),[I,k]=Ce.useState(null),[H,G]=Ce.useState(null),x=Ce.useMemo(()=>ex(r),[r]),U=Ce.useMemo(()=>{if(I){const Y=_c(I.a,I.b);return Y?Lf(Y):I.a}return t},[I,t]),B=Ce.useCallback((Y,oe,M)=>{const Q=!!I&&E$(Y,I);Q||(k(null),s(Y)),S({open:!0,x:oe,y:M,cell:Y,inRange:Q})},[I,s]),re=Ce.useMemo(()=>g?.open?eX({range:I,inRangeContext:g.inRange,uiLang:u}):[],[g,t,I,u]),Z=Ce.useCallback(Y=>{const oe=ex(Y),M=Math.min(nx,Math.max(tx,oe.maxColIndex+1+rX)),Q=Math.min(sx,Math.max(rx,oe.maxRow+nX));f(J=>Math.max(J,M)),E(J=>Math.max(J,Q))},[]),se=Ce.useCallback(async Y=>{await tX({action:Y,cells:r,selectedCell:t,range:I,inRangeContext:!!g?.inRange,setCells:oe=>i(M=>oe(M)),onAddRefBlock:oe=>{c?.(oe)},onPasteRequest:async()=>{try{const oe=await navigator.clipboard.readText();i(M=>{const Q=QN(M,oe,"A1");return Z(Q),Q})}catch{console.warn("clipboard.readText failed")}}})},[r,t,I,g,Z]),pe=Ce.useCallback(Y=>{const oe=Y.clipboardData.getData("text/html"),M=Y.clipboardData.getData("text/plain"),Q=!!oe&&oe.toLowerCase().includes("<table");!Q&&!M||(Y.preventDefault(),i(J=>{const q=Q?HW(J,oe,"A1"):QN(J,M,"A1");return Z(q),q}))},[Z]),Me=Ce.useCallback(Y=>{Y.bottom&&E(oe=>Math.min(sx,oe+iX)),Y.right&&f(oe=>Math.min(nx,oe+sX))},[]),Oe=Ce.useCallback(Y=>{s(Y),k({a:Y,b:Y}),l?.(Y)},[s,l]),we=Ce.useCallback(Y=>{A(!0),G(Y),k({a:Y,b:Y}),s(Y)},[s]),ye=Ce.useCallback(Y=>{k(oe=>H?{a:H,b:Y}:oe)},[H]),Re=Ce.useCallback(()=>{C&&(A(!1),G(null),k(Y=>{if(!Y)return Y;const oe=_c(Y.a,Y.b);return oe?(l?.(Lf(oe)),oe):(l?.(Y.a),Y)}))},[C,l]),j=Ce.useCallback(Y=>{if((navigator.platform.toLowerCase().includes("mac")?Y.metaKey:Y.ctrlKey)&&Y.key.toLowerCase()==="c"){const Q=(()=>{if(I){const q=_c(I.a,I.b);return q?Lf(q):I.a}return U})();Y.preventDefault(),(async()=>{try{await navigator.clipboard.writeText(Q)}catch{oX(Q)}})()}},[I,t]);return Ce.useEffect(()=>{Z(r)},[r,Z]),V.jsxs("div",{ref:R,className:"h-full flex flex-col",tabIndex:0,onClick:()=>R.current?.focus(),onPaste:pe,onKeyDown:j,children:[V.jsx(KW,{open:!!g?.open,x:g?.x??0,y:g?.y??0,actions:re,onClose:()=>S(null),onAction:se}),V.jsx(DW,{selectedRefText:U,selectedCell:t,cells:r,uiLang:u}),V.jsx(BW,{columns:L,rows:N,selectedCell:t,cells:r,onCellClick:Oe,onScrollNearEdge:Me,range:I,dragging:C,onCellMouseDown:we,onCellMouseEnter:ye,onMouseUpAnywhere:Re,usedRange:x,onCellContextMenu:B,highlightRange:h??I})]})}function oX(t){const s=document.createElement("textarea");s.value=t,s.style.position="fixed",s.style.left="-9999px",s.style.top="-9999px",document.body.appendChild(s),s.focus(),s.select();try{document.execCommand("copy")}finally{document.body.removeChild(s)}}var lX=F1();const aX=Ph(lX),{blocks:woe,lists:Moe,logic:Doe,loops:Poe,math:Foe,procedures:Boe,texts:Uoe,variables:Hoe,variablesDynamic:Goe}=aX;var bk={exports:{}};(function(t,s){(function(r,i){t.exports=i()})(bo,function(){var r=r||{Msg:Object.create(null)};return r.Msg.ADD_COMMENT="",r.Msg.ALT_KEY="Alt",r.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE=" '%1'  '%2' ",r.Msg.CHANGE_VALUE_TITLE="",r.Msg.CHROME_OS="ChromeOS",r.Msg.CLEAN_UP="",r.Msg.CLOSE="Close",r.Msg.COLLAPSED_WARNINGS_WARNING="",r.Msg.COLLAPSE_ALL="",r.Msg.COLLAPSE_BLOCK="",r.Msg.COLOUR_BLEND_COLOUR1=" 1",r.Msg.COLOUR_BLEND_COLOUR2=" 2",r.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",r.Msg.COLOUR_BLEND_RATIO="",r.Msg.COLOUR_BLEND_TITLE="",r.Msg.COLOUR_BLEND_TOOLTIP="20.01.0",r.Msg.COLOUR_PICKER_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.COLOUR_PICKER_TOOLTIP="",r.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",r.Msg.COLOUR_RANDOM_TITLE="",r.Msg.COLOUR_RANDOM_TOOLTIP="",r.Msg.COLOUR_RGB_BLUE="",r.Msg.COLOUR_RGB_GREEN="",r.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",r.Msg.COLOUR_RGB_RED="",r.Msg.COLOUR_RGB_TITLE=":",r.Msg.COLOUR_RGB_TOOLTIP=" 0  100 ",r.Msg.COMMAND_KEY=" Command",r.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="",r.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="",r.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="",r.Msg.CONTROLS_FLOW_STATEMENTS_WARNING=": ",r.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",r.Msg.CONTROLS_FOREACH_TITLE="%2%1",r.Msg.CONTROLS_FOREACH_TOOLTIP="'%1'",r.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",r.Msg.CONTROLS_FOR_TITLE="%1  %2  %3  %4 ",r.Msg.CONTROLS_FOR_TOOLTIP=" '%1' ",r.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="",r.Msg.CONTROLS_IF_ELSE_TOOLTIP="If",r.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",r.Msg.CONTROLS_IF_IF_TOOLTIP="",r.Msg.CONTROLS_IF_MSG_ELSE="",r.Msg.CONTROLS_IF_MSG_ELSEIF="",r.Msg.CONTROLS_IF_MSG_IF="",r.Msg.CONTROLS_IF_TOOLTIP_1=" true ",r.Msg.CONTROLS_IF_TOOLTIP_2=" true 2",r.Msg.CONTROLS_IF_TOOLTIP_3=" true 2 true 2",r.Msg.CONTROLS_IF_TOOLTIP_4=" true 2 true 2 true ",r.Msg.CONTROLS_REPEAT_HELPURL="https://ja.wikipedia.org/wiki/for",r.Msg.CONTROLS_REPEAT_INPUT_DO="",r.Msg.CONTROLS_REPEAT_TITLE="%1 ",r.Msg.CONTROLS_REPEAT_TOOLTIP="",r.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="",r.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="false",r.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="true",r.Msg.CONTROL_KEY="Ctrl",r.Msg.COPY_SHORTCUT="Copy",r.Msg.CUT_SHORTCUT="Cut",r.Msg.DELETE_ALL_BLOCKS="%1",r.Msg.DELETE_BLOCK="",r.Msg.DELETE_VARIABLE=" '%1' ",r.Msg.DELETE_VARIABLE_CONFIRMATION="%1 '%2' ",r.Msg.DELETE_X_BLOCKS="%1",r.Msg.DIALOG_CANCEL="",r.Msg.DIALOG_OK="OK",r.Msg.DISABLE_BLOCK="",r.Msg.DUPLICATE_BLOCK="",r.Msg.DUPLICATE_COMMENT="",r.Msg.EDIT_BLOCK_CONTENTS="Edit Block contents",r.Msg.ENABLE_BLOCK="",r.Msg.EXPAND_ALL="",r.Msg.EXPAND_BLOCK="",r.Msg.EXTERNAL_INPUTS="",r.Msg.HELP="",r.Msg.HELP_PROMPT="Press %1 for help on keyboard controls",r.Msg.INLINE_INPUTS="",r.Msg.KEYBOARD_NAV_CONSTRAINED_MOVE_HINT="Use the arrow keys to move, then %1 to accept the position",r.Msg.KEYBOARD_NAV_COPIED_HINT="Copied. Press %1 to paste.",r.Msg.KEYBOARD_NAV_CUT_HINT="Cut. Press %1 to paste.",r.Msg.KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT="Hold %1 and use arrow keys to move freely, then %2 to accept the position",r.Msg.LINUX="Linux",r.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",r.Msg.LISTS_CREATE_EMPTY_TITLE="",r.Msg.LISTS_CREATE_EMPTY_TOOLTIP="",r.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="",r.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="",r.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_CREATE_WITH_INPUT_WITH="",r.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="",r.Msg.LISTS_CREATE_WITH_TOOLTIP="",r.Msg.LISTS_GET_INDEX_FIRST="",r.Msg.LISTS_GET_INDEX_FROM_END="",r.Msg.LISTS_GET_INDEX_FROM_START="#",r.Msg.LISTS_GET_INDEX_GET="",r.Msg.LISTS_GET_INDEX_GET_REMOVE="",r.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",r.Msg.LISTS_GET_INDEX_LAST="",r.Msg.LISTS_GET_INDEX_RANDOM="",r.Msg.LISTS_GET_INDEX_REMOVE="",r.Msg.LISTS_GET_INDEX_TAIL="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="  ",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="",r.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="",r.Msg.LISTS_GET_SUBLIST_END_FROM_END="",r.Msg.LISTS_GET_SUBLIST_END_FROM_START="",r.Msg.LISTS_GET_SUBLIST_END_LAST="",r.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",r.Msg.LISTS_GET_SUBLIST_START_FIRST="",r.Msg.LISTS_GET_SUBLIST_START_FROM_END=" #",r.Msg.LISTS_GET_SUBLIST_START_FROM_START="# ",r.Msg.LISTS_GET_SUBLIST_TAIL="",r.Msg.LISTS_GET_SUBLIST_TOOLTIP="",r.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 ",r.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 ",r.Msg.LISTS_INDEX_OF_FIRST="",r.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",r.Msg.LISTS_INDEX_OF_LAST="",r.Msg.LISTS_INDEX_OF_TOOLTIP="/ %1 ",r.Msg.LISTS_INLIST="",r.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",r.Msg.LISTS_ISEMPTY_TITLE="%1",r.Msg.LISTS_ISEMPTY_TOOLTIP="true ",r.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",r.Msg.LISTS_LENGTH_TITLE="%1",r.Msg.LISTS_LENGTH_TOOLTIP="",r.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",r.Msg.LISTS_REPEAT_TITLE="%1%2",r.Msg.LISTS_REPEAT_TOOLTIP="",r.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",r.Msg.LISTS_REVERSE_MESSAGE0="%1",r.Msg.LISTS_REVERSE_TOOLTIP="",r.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",r.Msg.LISTS_SET_INDEX_INPUT_TO="",r.Msg.LISTS_SET_INDEX_INSERT="",r.Msg.LISTS_SET_INDEX_SET="",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="",r.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="",r.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="",r.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",r.Msg.LISTS_SORT_ORDER_ASCENDING="",r.Msg.LISTS_SORT_ORDER_DESCENDING="",r.Msg.LISTS_SORT_TITLE="%1 ( %2 )  %3 ",r.Msg.LISTS_SORT_TOOLTIP="",r.Msg.LISTS_SORT_TYPE_IGNORECASE="",r.Msg.LISTS_SORT_TYPE_NUMERIC="",r.Msg.LISTS_SORT_TYPE_TEXT="",r.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",r.Msg.LISTS_SPLIT_LIST_FROM_TEXT="",r.Msg.LISTS_SPLIT_TEXT_FROM_LIST="",r.Msg.LISTS_SPLIT_TOOLTIP_JOIN="",r.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="",r.Msg.LISTS_SPLIT_WITH_DELIMITER="",r.Msg.LOGIC_BOOLEAN_FALSE="false",r.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",r.Msg.LOGIC_BOOLEAN_TOOLTIP="true  false ",r.Msg.LOGIC_BOOLEAN_TRUE="true",r.Msg.LOGIC_COMPARE_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.LOGIC_COMPARE_TOOLTIP_EQ=" true ",r.Msg.LOGIC_COMPARE_TOOLTIP_GT=" 2  true ",r.Msg.LOGIC_COMPARE_TOOLTIP_GTE=" 2  true ",r.Msg.LOGIC_COMPARE_TOOLTIP_LT=" 2  true ",r.Msg.LOGIC_COMPARE_TOOLTIP_LTE=" 2  true ",r.Msg.LOGIC_COMPARE_TOOLTIP_NEQ=" true ",r.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",r.Msg.LOGIC_NEGATE_TITLE="%1",r.Msg.LOGIC_NEGATE_TOOLTIP=" false true  true  false ",r.Msg.LOGIC_NULL="null",r.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",r.Msg.LOGIC_NULL_TOOLTIP="null ",r.Msg.LOGIC_OPERATION_AND="",r.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",r.Msg.LOGIC_OPERATION_OR="",r.Msg.LOGIC_OPERATION_TOOLTIP_AND=" true  true ",r.Msg.LOGIC_OPERATION_TOOLTIP_OR=" 1  true  true ",r.Msg.LOGIC_TERNARY_CONDITION="",r.Msg.LOGIC_TERNARY_HELPURL="https://ja.wikipedia.org/wiki/%3F:",r.Msg.LOGIC_TERNARY_IF_FALSE="false ",r.Msg.LOGIC_TERNARY_IF_TRUE="true ",r.Msg.LOGIC_TERNARY_TOOLTIP="''  true 'true'  'false' ",r.Msg.MAC_OS="macOS",r.Msg.MATH_ADDITION_SYMBOL="+",r.Msg.MATH_ARITHMETIC_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="2 ",r.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="2 ",r.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="2 ",r.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="2 ",r.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="2 ",r.Msg.MATH_ATAN2_HELPURL="https://ja.wikipedia.org/wiki/Atan2",r.Msg.MATH_ATAN2_TITLE="X:%1 Y:%2atan2",r.Msg.MATH_ATAN2_TOOLTIP=" (X, Y)  -180 180",r.Msg.MATH_CHANGE_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_CHANGE_TITLE="%1  %2 ",r.Msg.MATH_CHANGE_TOOLTIP="'%1'",r.Msg.MATH_CONSTANT_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_CONSTANT_TOOLTIP=":  (3.141), e (2.718),  (1.618), sqrt(2) (1.414), sqrt() (0.707), or  ().",r.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",r.Msg.MATH_CONSTRAIN_TITLE="%1  %2  %3 ",r.Msg.MATH_CONSTRAIN_TOOLTIP="",r.Msg.MATH_DIVISION_SYMBOL="",r.Msg.MATH_IS_DIVISIBLE_BY="",r.Msg.MATH_IS_EVEN="",r.Msg.MATH_IS_NEGATIVE="",r.Msg.MATH_IS_ODD="",r.Msg.MATH_IS_POSITIVE="",r.Msg.MATH_IS_PRIME="",r.Msg.MATH_IS_TOOLTIP="true  false ",r.Msg.MATH_IS_WHOLE="",r.Msg.MATH_MODULO_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_MODULO_TITLE="%1%2",r.Msg.MATH_MODULO_TOOLTIP="2",r.Msg.MATH_MULTIPLICATION_SYMBOL="",r.Msg.MATH_NUMBER_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_NUMBER_TOOLTIP="",r.Msg.MATH_ONLIST_HELPURL="",r.Msg.MATH_ONLIST_OPERATOR_AVERAGE="",r.Msg.MATH_ONLIST_OPERATOR_MAX="",r.Msg.MATH_ONLIST_OPERATOR_MEDIAN="",r.Msg.MATH_ONLIST_OPERATOR_MIN="",r.Msg.MATH_ONLIST_OPERATOR_MODE="",r.Msg.MATH_ONLIST_OPERATOR_RANDOM="",r.Msg.MATH_ONLIST_OPERATOR_STD_DEV="",r.Msg.MATH_ONLIST_OPERATOR_SUM="",r.Msg.MATH_ONLIST_TOOLTIP_AVERAGE=" () ",r.Msg.MATH_ONLIST_TOOLTIP_MAX="",r.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="",r.Msg.MATH_ONLIST_TOOLTIP_MIN="",r.Msg.MATH_ONLIST_TOOLTIP_MODE="",r.Msg.MATH_ONLIST_TOOLTIP_RANDOM="",r.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="",r.Msg.MATH_ONLIST_TOOLTIP_SUM="",r.Msg.MATH_POWER_SYMBOL="^",r.Msg.MATH_RANDOM_FLOAT_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="1",r.Msg.MATH_RANDOM_FLOAT_TOOLTIP="0.01.0",r.Msg.MATH_RANDOM_INT_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_RANDOM_INT_TITLE="%1%2",r.Msg.MATH_RANDOM_INT_TOOLTIP="",r.Msg.MATH_ROUND_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_ROUND_OPERATOR_ROUND="",r.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="",r.Msg.MATH_ROUND_OPERATOR_ROUNDUP="",r.Msg.MATH_ROUND_TOOLTIP="",r.Msg.MATH_SINGLE_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_SINGLE_OP_ABSOLUTE="",r.Msg.MATH_SINGLE_OP_ROOT="",r.Msg.MATH_SINGLE_TOOLTIP_ABS="",r.Msg.MATH_SINGLE_TOOLTIP_EXP="e",r.Msg.MATH_SINGLE_TOOLTIP_LN="",r.Msg.MATH_SINGLE_TOOLTIP_LOG10="10",r.Msg.MATH_SINGLE_TOOLTIP_NEG="",r.Msg.MATH_SINGLE_TOOLTIP_POW10="10",r.Msg.MATH_SINGLE_TOOLTIP_ROOT="",r.Msg.MATH_SUBTRACTION_SYMBOL="-",r.Msg.MATH_TRIG_ACOS="acos",r.Msg.MATH_TRIG_ASIN="asin",r.Msg.MATH_TRIG_ATAN="atan",r.Msg.MATH_TRIG_COS="cos",r.Msg.MATH_TRIG_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.MATH_TRIG_SIN="sin",r.Msg.MATH_TRIG_TAN="tan",r.Msg.MATH_TRIG_TOOLTIP_ACOS="arccosin",r.Msg.MATH_TRIG_TOOLTIP_ASIN="arcsin",r.Msg.MATH_TRIG_TOOLTIP_ATAN="arctan",r.Msg.MATH_TRIG_TOOLTIP_COS="cosin",r.Msg.MATH_TRIG_TOOLTIP_SIN="sin",r.Msg.MATH_TRIG_TOOLTIP_TAN="tan",r.Msg.MOVE_BLOCK="Move Block",r.Msg.NEW_COLOUR_VARIABLE="...",r.Msg.NEW_NUMBER_VARIABLE="...",r.Msg.NEW_STRING_VARIABLE="...",r.Msg.NEW_VARIABLE="",r.Msg.NEW_VARIABLE_TITLE=":",r.Msg.NEW_VARIABLE_TYPE_TITLE=":",r.Msg.OPTION_KEY=" Option",r.Msg.ORDINAL_NUMBER_SUFFIX="",r.Msg.PASTE_SHORTCUT="Paste",r.Msg.PROCEDURES_ALLOW_STATEMENTS="",r.Msg.PROCEDURES_BEFORE_PARAMS="",r.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.PROCEDURES_CALLNORETURN_TOOLTIP=" '%1' ",r.Msg.PROCEDURES_CALLRETURN_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.PROCEDURES_CALLRETURN_TOOLTIP=" '%1' ",r.Msg.PROCEDURES_CALL_BEFORE_PARAMS="",r.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING=" '%1' ",r.Msg.PROCEDURES_CREATE_DO="'%1' ",r.Msg.PROCEDURES_DEFNORETURN_COMMENT="",r.Msg.PROCEDURES_DEFNORETURN_DO="",r.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="",r.Msg.PROCEDURES_DEFNORETURN_TITLE="",r.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="",r.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",r.Msg.PROCEDURES_DEFRETURN_RETURN="",r.Msg.PROCEDURES_DEFRETURN_TOOLTIP="",r.Msg.PROCEDURES_DEF_DUPLICATE_WARNING=": ",r.Msg.PROCEDURES_HIGHLIGHT_DEF="",r.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",r.Msg.PROCEDURES_IFRETURN_TOOLTIP="1 true 2",r.Msg.PROCEDURES_IFRETURN_WARNING=": ",r.Msg.PROCEDURES_MUTATORARG_TITLE=":",r.Msg.PROCEDURES_MUTATORARG_TOOLTIP="",r.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="",r.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="",r.Msg.REDO="",r.Msg.REMOVE_COMMENT="",r.Msg.RENAME_VARIABLE="",r.Msg.RENAME_VARIABLE_TITLE="%1",r.Msg.SHORTCUTS_CODE_NAVIGATION="Code navigation",r.Msg.SHORTCUTS_EDITING="Editing",r.Msg.SHORTCUTS_GENERAL="General",r.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_APPEND_TITLE=" %1  %2",r.Msg.TEXT_APPEND_TOOLTIP=" '%1' ",r.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",r.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="",r.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE=" ",r.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="",r.Msg.TEXT_CHANGECASE_TOOLTIP="",r.Msg.TEXT_CHARAT_FIRST="",r.Msg.TEXT_CHARAT_FROM_END="",r.Msg.TEXT_CHARAT_FROM_START="",r.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",r.Msg.TEXT_CHARAT_LAST="",r.Msg.TEXT_CHARAT_RANDOM="",r.Msg.TEXT_CHARAT_TAIL="",r.Msg.TEXT_CHARAT_TITLE=" %1 %2",r.Msg.TEXT_CHARAT_TOOLTIP="",r.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",r.Msg.TEXT_COUNT_MESSAGE0="%2%1",r.Msg.TEXT_COUNT_TOOLTIP="",r.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="",r.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="",r.Msg.TEXT_CREATE_JOIN_TOOLTIP="",r.Msg.TEXT_GET_SUBSTRING_END_FROM_END="",r.Msg.TEXT_GET_SUBSTRING_END_FROM_START="",r.Msg.TEXT_GET_SUBSTRING_END_LAST="",r.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",r.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="",r.Msg.TEXT_GET_SUBSTRING_START_FIRST="",r.Msg.TEXT_GET_SUBSTRING_START_FROM_END="",r.Msg.TEXT_GET_SUBSTRING_START_FROM_START="",r.Msg.TEXT_GET_SUBSTRING_TAIL="",r.Msg.TEXT_GET_SUBSTRING_TOOLTIP="",r.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",r.Msg.TEXT_INDEXOF_OPERATOR_FIRST="",r.Msg.TEXT_INDEXOF_OPERATOR_LAST="",r.Msg.TEXT_INDEXOF_TITLE=" %1 %2 %3",r.Msg.TEXT_INDEXOF_TOOLTIP="%1",r.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",r.Msg.TEXT_ISEMPTY_TITLE="%1",r.Msg.TEXT_ISEMPTY_TOOLTIP=" true ",r.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",r.Msg.TEXT_JOIN_TITLE_CREATEWITH="",r.Msg.TEXT_JOIN_TOOLTIP="",r.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",r.Msg.TEXT_LENGTH_TITLE="%1",r.Msg.TEXT_LENGTH_TOOLTIP="()",r.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",r.Msg.TEXT_PRINT_TITLE="%1 ",r.Msg.TEXT_PRINT_TOOLTIP="",r.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",r.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="",r.Msg.TEXT_PROMPT_TOOLTIP_TEXT="",r.Msg.TEXT_PROMPT_TYPE_NUMBER="",r.Msg.TEXT_PROMPT_TYPE_TEXT="",r.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",r.Msg.TEXT_REPLACE_MESSAGE0="%3%1%2",r.Msg.TEXT_REPLACE_TOOLTIP="",r.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",r.Msg.TEXT_REVERSE_MESSAGE0="%1",r.Msg.TEXT_REVERSE_TOOLTIP="",r.Msg.TEXT_TEXT_HELPURL="https://ja.wikipedia.org/wiki/",r.Msg.TEXT_TEXT_TOOLTIP="",r.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",r.Msg.TEXT_TRIM_OPERATOR_BOTH="",r.Msg.TEXT_TRIM_OPERATOR_LEFT="",r.Msg.TEXT_TRIM_OPERATOR_RIGHT="",r.Msg.TEXT_TRIM_TOOLTIP=" 1 ",r.Msg.TODAY="",r.Msg.UNDO="",r.Msg.UNKNOWN="Unknown",r.Msg.UNNAMED_KEY="",r.Msg.VARIABLES_DEFAULT_NAME="",r.Msg.VARIABLES_GET_CREATE_SET="'%1",r.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",r.Msg.VARIABLES_GET_TOOLTIP="",r.Msg.VARIABLES_SET="%1  %2 ",r.Msg.VARIABLES_SET_CREATE_GET="'%1 ' ",r.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",r.Msg.VARIABLES_SET_TOOLTIP="",r.Msg.VARIABLE_ALREADY_EXISTS=" '%1' ",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="'%2'  '%1' ",r.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="'%2'  '%1' ",r.Msg.WINDOWS="Windows",r.Msg.WORKSPACE_ARIA_LABEL="Blockly",r.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="",r.Msg.CONTROLS_FOREACH_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_FOR_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=r.Msg.CONTROLS_IF_MSG_ELSEIF,r.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=r.Msg.CONTROLS_IF_MSG_ELSE,r.Msg.CONTROLS_IF_IF_TITLE_IF=r.Msg.CONTROLS_IF_MSG_IF,r.Msg.CONTROLS_IF_MSG_THEN=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=r.Msg.CONTROLS_REPEAT_INPUT_DO,r.Msg.LISTS_CREATE_WITH_ITEM_TITLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=r.Msg.LISTS_INLIST,r.Msg.MATH_CHANGE_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.PROCEDURES_DEFRETURN_COMMENT=r.Msg.PROCEDURES_DEFNORETURN_COMMENT,r.Msg.PROCEDURES_DEFRETURN_DO=r.Msg.PROCEDURES_DEFNORETURN_DO,r.Msg.PROCEDURES_DEFRETURN_PROCEDURE=r.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,r.Msg.PROCEDURES_DEFRETURN_TITLE=r.Msg.PROCEDURES_DEFNORETURN_TITLE,r.Msg.TEXT_APPEND_VARIABLE=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=r.Msg.VARIABLES_DEFAULT_NAME,r.Msg.COLOUR_HUE="20",r.Msg.LISTS_HUE="260",r.Msg.LOGIC_HUE="210",r.Msg.LOOPS_HUE="120",r.Msg.MATH_HUE="230",r.Msg.PROCEDURES_HUE="290",r.Msg.TEXTS_HUE="160",r.Msg.VARIABLES_DYNAMIC_HUE="310",r.Msg.VARIABLES_HUE="330",r.Msg})})(bk);var cX=bk.exports;const uX=Ph(cX),{LOGIC_HUE:hX,LOOPS_HUE:dX,MATH_HUE:_X,TEXTS_HUE:fX,LISTS_HUE:TX,COLOUR_HUE:pX,VARIABLES_HUE:EX,VARIABLES_DYNAMIC_HUE:gX,PROCEDURES_HUE:mX,VARIABLES_DEFAULT_NAME:$X,UNNAMED_KEY:IX,TODAY:OX,DUPLICATE_BLOCK:SX,ADD_COMMENT:RX,REMOVE_COMMENT:LX,DUPLICATE_COMMENT:AX,EXTERNAL_INPUTS:CX,INLINE_INPUTS:vX,DELETE_BLOCK:NX,DELETE_X_BLOCKS:xX,DELETE_ALL_BLOCKS:bX,CLEAN_UP:yX,CLOSE:kX,COLLAPSE_BLOCK:wX,COLLAPSE_ALL:MX,EXPAND_BLOCK:DX,EXPAND_ALL:PX,DISABLE_BLOCK:FX,ENABLE_BLOCK:BX,HELP:UX,UNDO:HX,REDO:GX,CHANGE_VALUE_TITLE:VX,RENAME_VARIABLE:WX,RENAME_VARIABLE_TITLE:XX,NEW_VARIABLE:zX,NEW_STRING_VARIABLE:YX,NEW_NUMBER_VARIABLE:KX,NEW_COLOUR_VARIABLE:jX,NEW_VARIABLE_TYPE_TITLE:JX,NEW_VARIABLE_TITLE:qX,VARIABLE_ALREADY_EXISTS:ZX,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:QX,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:e8,DELETE_VARIABLE_CONFIRMATION:t8,CANNOT_DELETE_VARIABLE_PROCEDURE:r8,DELETE_VARIABLE:n8,COLOUR_PICKER_HELPURL:s8,COLOUR_PICKER_TOOLTIP:i8,COLOUR_RANDOM_HELPURL:o8,COLOUR_RANDOM_TITLE:l8,COLOUR_RANDOM_TOOLTIP:a8,COLOUR_RGB_HELPURL:c8,COLOUR_RGB_TITLE:u8,COLOUR_RGB_RED:h8,COLOUR_RGB_GREEN:d8,COLOUR_RGB_BLUE:_8,COLOUR_RGB_TOOLTIP:f8,COLOUR_BLEND_HELPURL:T8,COLOUR_BLEND_TITLE:p8,COLOUR_BLEND_COLOUR1:E8,COLOUR_BLEND_COLOUR2:g8,COLOUR_BLEND_RATIO:m8,COLOUR_BLEND_TOOLTIP:$8,CONTROLS_REPEAT_HELPURL:I8,CONTROLS_REPEAT_TITLE:O8,CONTROLS_REPEAT_INPUT_DO:S8,CONTROLS_REPEAT_TOOLTIP:R8,CONTROLS_WHILEUNTIL_HELPURL:L8,CONTROLS_WHILEUNTIL_INPUT_DO:A8,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:C8,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:v8,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:N8,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:x8,CONTROLS_FOR_HELPURL:b8,CONTROLS_FOR_TOOLTIP:y8,CONTROLS_FOR_TITLE:k8,CONTROLS_FOR_INPUT_DO:w8,CONTROLS_FOREACH_HELPURL:M8,CONTROLS_FOREACH_TITLE:D8,CONTROLS_FOREACH_INPUT_DO:P8,CONTROLS_FOREACH_TOOLTIP:F8,CONTROLS_FLOW_STATEMENTS_HELPURL:B8,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:U8,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:H8,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:G8,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:V8,CONTROLS_FLOW_STATEMENTS_WARNING:W8,CONTROLS_IF_HELPURL:X8,CONTROLS_IF_TOOLTIP_1:z8,CONTROLS_IF_TOOLTIP_2:Y8,CONTROLS_IF_TOOLTIP_3:K8,CONTROLS_IF_TOOLTIP_4:j8,CONTROLS_IF_MSG_IF:J8,CONTROLS_IF_MSG_ELSEIF:q8,CONTROLS_IF_MSG_ELSE:Z8,CONTROLS_IF_MSG_THEN:Q8,CONTROLS_IF_IF_TITLE_IF:e6,CONTROLS_IF_IF_TOOLTIP:t6,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:r6,CONTROLS_IF_ELSEIF_TOOLTIP:n6,CONTROLS_IF_ELSE_TITLE_ELSE:s6,CONTROLS_IF_ELSE_TOOLTIP:i6,LOGIC_COMPARE_HELPURL:o6,LOGIC_COMPARE_TOOLTIP_EQ:l6,LOGIC_COMPARE_TOOLTIP_NEQ:a6,LOGIC_COMPARE_TOOLTIP_LT:c6,LOGIC_COMPARE_TOOLTIP_LTE:u6,LOGIC_COMPARE_TOOLTIP_GT:h6,LOGIC_COMPARE_TOOLTIP_GTE:d6,LOGIC_OPERATION_HELPURL:_6,LOGIC_OPERATION_TOOLTIP_AND:f6,LOGIC_OPERATION_AND:T6,LOGIC_OPERATION_TOOLTIP_OR:p6,LOGIC_OPERATION_OR:E6,LOGIC_NEGATE_HELPURL:g6,LOGIC_NEGATE_TITLE:m6,LOGIC_NEGATE_TOOLTIP:$6,LOGIC_BOOLEAN_HELPURL:I6,LOGIC_BOOLEAN_TRUE:O6,LOGIC_BOOLEAN_FALSE:S6,LOGIC_BOOLEAN_TOOLTIP:R6,LOGIC_NULL_HELPURL:L6,LOGIC_NULL:A6,LOGIC_NULL_TOOLTIP:C6,LOGIC_TERNARY_HELPURL:v6,LOGIC_TERNARY_CONDITION:N6,LOGIC_TERNARY_IF_TRUE:x6,LOGIC_TERNARY_IF_FALSE:b6,LOGIC_TERNARY_TOOLTIP:y6,MATH_NUMBER_HELPURL:k6,MATH_NUMBER_TOOLTIP:w6,MATH_ADDITION_SYMBOL:M6,MATH_SUBTRACTION_SYMBOL:D6,MATH_DIVISION_SYMBOL:P6,MATH_MULTIPLICATION_SYMBOL:F6,MATH_POWER_SYMBOL:B6,MATH_TRIG_SIN:U6,MATH_TRIG_COS:H6,MATH_TRIG_TAN:G6,MATH_TRIG_ASIN:V6,MATH_TRIG_ACOS:W6,MATH_TRIG_ATAN:X6,MATH_ARITHMETIC_HELPURL:z6,MATH_ARITHMETIC_TOOLTIP_ADD:Y6,MATH_ARITHMETIC_TOOLTIP_MINUS:K6,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:j6,MATH_ARITHMETIC_TOOLTIP_DIVIDE:J6,MATH_ARITHMETIC_TOOLTIP_POWER:q6,MATH_SINGLE_HELPURL:Z6,MATH_SINGLE_OP_ROOT:Q6,MATH_SINGLE_TOOLTIP_ROOT:e5,MATH_SINGLE_OP_ABSOLUTE:t5,MATH_SINGLE_TOOLTIP_ABS:r5,MATH_SINGLE_TOOLTIP_NEG:n5,MATH_SINGLE_TOOLTIP_LN:s5,MATH_SINGLE_TOOLTIP_LOG10:i5,MATH_SINGLE_TOOLTIP_EXP:o5,MATH_SINGLE_TOOLTIP_POW10:l5,MATH_TRIG_HELPURL:a5,MATH_TRIG_TOOLTIP_SIN:c5,MATH_TRIG_TOOLTIP_COS:u5,MATH_TRIG_TOOLTIP_TAN:h5,MATH_TRIG_TOOLTIP_ASIN:d5,MATH_TRIG_TOOLTIP_ACOS:_5,MATH_TRIG_TOOLTIP_ATAN:f5,MATH_CONSTANT_HELPURL:T5,MATH_CONSTANT_TOOLTIP:p5,MATH_IS_EVEN:E5,MATH_IS_ODD:g5,MATH_IS_PRIME:m5,MATH_IS_WHOLE:$5,MATH_IS_POSITIVE:I5,MATH_IS_NEGATIVE:O5,MATH_IS_DIVISIBLE_BY:S5,MATH_IS_TOOLTIP:R5,MATH_CHANGE_HELPURL:L5,MATH_CHANGE_TITLE:A5,MATH_CHANGE_TITLE_ITEM:C5,MATH_CHANGE_TOOLTIP:v5,MATH_ROUND_HELPURL:N5,MATH_ROUND_TOOLTIP:x5,MATH_ROUND_OPERATOR_ROUND:b5,MATH_ROUND_OPERATOR_ROUNDUP:y5,MATH_ROUND_OPERATOR_ROUNDDOWN:k5,MATH_ONLIST_HELPURL:w5,MATH_ONLIST_OPERATOR_SUM:M5,MATH_ONLIST_TOOLTIP_SUM:D5,MATH_ONLIST_OPERATOR_MIN:P5,MATH_ONLIST_TOOLTIP_MIN:F5,MATH_ONLIST_OPERATOR_MAX:B5,MATH_ONLIST_TOOLTIP_MAX:U5,MATH_ONLIST_OPERATOR_AVERAGE:H5,MATH_ONLIST_TOOLTIP_AVERAGE:G5,MATH_ONLIST_OPERATOR_MEDIAN:V5,MATH_ONLIST_TOOLTIP_MEDIAN:W5,MATH_ONLIST_OPERATOR_MODE:X5,MATH_ONLIST_TOOLTIP_MODE:z5,MATH_ONLIST_OPERATOR_STD_DEV:Y5,MATH_ONLIST_TOOLTIP_STD_DEV:K5,MATH_ONLIST_OPERATOR_RANDOM:j5,MATH_ONLIST_TOOLTIP_RANDOM:J5,MATH_MODULO_HELPURL:q5,MATH_MODULO_TITLE:Z5,MATH_MODULO_TOOLTIP:Q5,MATH_CONSTRAIN_HELPURL:ez,MATH_CONSTRAIN_TITLE:tz,MATH_CONSTRAIN_TOOLTIP:rz,MATH_RANDOM_INT_HELPURL:nz,MATH_RANDOM_INT_TITLE:sz,MATH_RANDOM_INT_TOOLTIP:iz,MATH_RANDOM_FLOAT_HELPURL:oz,MATH_RANDOM_FLOAT_TITLE_RANDOM:lz,MATH_RANDOM_FLOAT_TOOLTIP:az,MATH_ATAN2_HELPURL:cz,MATH_ATAN2_TITLE:uz,MATH_ATAN2_TOOLTIP:hz,TEXT_TEXT_HELPURL:dz,TEXT_TEXT_TOOLTIP:_z,TEXT_JOIN_HELPURL:fz,TEXT_JOIN_TITLE_CREATEWITH:Tz,TEXT_JOIN_TOOLTIP:pz,TEXT_CREATE_JOIN_TITLE_JOIN:Ez,TEXT_CREATE_JOIN_TOOLTIP:gz,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:mz,TEXT_CREATE_JOIN_ITEM_TOOLTIP:$z,TEXT_APPEND_HELPURL:Iz,TEXT_APPEND_TITLE:Oz,TEXT_APPEND_VARIABLE:Sz,TEXT_APPEND_TOOLTIP:Rz,TEXT_LENGTH_HELPURL:Lz,TEXT_LENGTH_TITLE:Az,TEXT_LENGTH_TOOLTIP:Cz,TEXT_ISEMPTY_HELPURL:vz,TEXT_ISEMPTY_TITLE:Nz,TEXT_ISEMPTY_TOOLTIP:xz,TEXT_INDEXOF_HELPURL:bz,TEXT_INDEXOF_TOOLTIP:yz,TEXT_INDEXOF_TITLE:kz,TEXT_INDEXOF_OPERATOR_FIRST:wz,TEXT_INDEXOF_OPERATOR_LAST:Mz,TEXT_CHARAT_HELPURL:Dz,TEXT_CHARAT_TITLE:Pz,TEXT_CHARAT_FROM_START:Fz,TEXT_CHARAT_FROM_END:Bz,TEXT_CHARAT_FIRST:Uz,TEXT_CHARAT_LAST:Hz,TEXT_CHARAT_RANDOM:Gz,TEXT_CHARAT_TAIL:Vz,TEXT_CHARAT_TOOLTIP:Wz,TEXT_GET_SUBSTRING_TOOLTIP:Xz,TEXT_GET_SUBSTRING_HELPURL:zz,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:Yz,TEXT_GET_SUBSTRING_START_FROM_START:Kz,TEXT_GET_SUBSTRING_START_FROM_END:jz,TEXT_GET_SUBSTRING_START_FIRST:Jz,TEXT_GET_SUBSTRING_END_FROM_START:qz,TEXT_GET_SUBSTRING_END_FROM_END:Zz,TEXT_GET_SUBSTRING_END_LAST:Qz,TEXT_GET_SUBSTRING_TAIL:e9,TEXT_CHANGECASE_HELPURL:t9,TEXT_CHANGECASE_TOOLTIP:r9,TEXT_CHANGECASE_OPERATOR_UPPERCASE:n9,TEXT_CHANGECASE_OPERATOR_LOWERCASE:s9,TEXT_CHANGECASE_OPERATOR_TITLECASE:i9,TEXT_TRIM_HELPURL:o9,TEXT_TRIM_TOOLTIP:l9,TEXT_TRIM_OPERATOR_BOTH:a9,TEXT_TRIM_OPERATOR_LEFT:c9,TEXT_TRIM_OPERATOR_RIGHT:u9,TEXT_PRINT_HELPURL:h9,TEXT_PRINT_TITLE:d9,TEXT_PRINT_TOOLTIP:_9,TEXT_PROMPT_HELPURL:f9,TEXT_PROMPT_TYPE_TEXT:T9,TEXT_PROMPT_TYPE_NUMBER:p9,TEXT_PROMPT_TOOLTIP_NUMBER:E9,TEXT_PROMPT_TOOLTIP_TEXT:g9,TEXT_COUNT_MESSAGE0:m9,TEXT_COUNT_HELPURL:$9,TEXT_COUNT_TOOLTIP:I9,TEXT_REPLACE_MESSAGE0:O9,TEXT_REPLACE_HELPURL:S9,TEXT_REPLACE_TOOLTIP:R9,TEXT_REVERSE_MESSAGE0:L9,TEXT_REVERSE_HELPURL:A9,TEXT_REVERSE_TOOLTIP:C9,LISTS_CREATE_EMPTY_HELPURL:v9,LISTS_CREATE_EMPTY_TITLE:N9,LISTS_CREATE_EMPTY_TOOLTIP:x9,LISTS_CREATE_WITH_HELPURL:b9,LISTS_CREATE_WITH_TOOLTIP:y9,LISTS_CREATE_WITH_INPUT_WITH:k9,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:w9,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:M9,LISTS_CREATE_WITH_ITEM_TITLE:D9,LISTS_CREATE_WITH_ITEM_TOOLTIP:P9,LISTS_REPEAT_HELPURL:F9,LISTS_REPEAT_TOOLTIP:B9,LISTS_REPEAT_TITLE:U9,LISTS_LENGTH_HELPURL:H9,LISTS_LENGTH_TITLE:G9,LISTS_LENGTH_TOOLTIP:V9,LISTS_ISEMPTY_HELPURL:W9,LISTS_ISEMPTY_TITLE:X9,LISTS_ISEMPTY_TOOLTIP:z9,LISTS_INLIST:Y9,LISTS_INDEX_OF_HELPURL:K9,LISTS_INDEX_OF_INPUT_IN_LIST:j9,LISTS_INDEX_OF_FIRST:J9,LISTS_INDEX_OF_LAST:q9,LISTS_INDEX_OF_TOOLTIP:Z9,LISTS_GET_INDEX_HELPURL:Q9,LISTS_GET_INDEX_GET:e7,LISTS_GET_INDEX_GET_REMOVE:t7,LISTS_GET_INDEX_REMOVE:r7,LISTS_GET_INDEX_FROM_START:n7,LISTS_GET_INDEX_FROM_END:s7,LISTS_GET_INDEX_FIRST:i7,LISTS_GET_INDEX_LAST:o7,LISTS_GET_INDEX_RANDOM:l7,LISTS_GET_INDEX_TAIL:a7,LISTS_GET_INDEX_INPUT_IN_LIST:c7,LISTS_INDEX_FROM_START_TOOLTIP:u7,LISTS_INDEX_FROM_END_TOOLTIP:h7,LISTS_GET_INDEX_TOOLTIP_GET_FROM:d7,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:_7,LISTS_GET_INDEX_TOOLTIP_GET_LAST:f7,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:T7,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:p7,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:E7,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:g7,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:m7,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:$7,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:I7,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:O7,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:S7,LISTS_SET_INDEX_HELPURL:R7,LISTS_SET_INDEX_INPUT_IN_LIST:L7,LISTS_SET_INDEX_SET:A7,LISTS_SET_INDEX_INSERT:C7,LISTS_SET_INDEX_INPUT_TO:v7,LISTS_SET_INDEX_TOOLTIP_SET_FROM:N7,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:x7,LISTS_SET_INDEX_TOOLTIP_SET_LAST:b7,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:y7,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:k7,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:w7,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:M7,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:D7,LISTS_GET_SUBLIST_HELPURL:P7,LISTS_GET_SUBLIST_INPUT_IN_LIST:F7,LISTS_GET_SUBLIST_START_FROM_START:B7,LISTS_GET_SUBLIST_START_FROM_END:U7,LISTS_GET_SUBLIST_START_FIRST:H7,LISTS_GET_SUBLIST_END_FROM_START:G7,LISTS_GET_SUBLIST_END_FROM_END:V7,LISTS_GET_SUBLIST_END_LAST:W7,LISTS_GET_SUBLIST_TAIL:X7,LISTS_GET_SUBLIST_TOOLTIP:z7,LISTS_SORT_HELPURL:Y7,LISTS_SORT_TITLE:K7,LISTS_SORT_TOOLTIP:j7,LISTS_SORT_ORDER_ASCENDING:J7,LISTS_SORT_ORDER_DESCENDING:q7,LISTS_SORT_TYPE_NUMERIC:Z7,LISTS_SORT_TYPE_TEXT:Q7,LISTS_SORT_TYPE_IGNORECASE:eY,LISTS_SPLIT_HELPURL:tY,LISTS_SPLIT_LIST_FROM_TEXT:rY,LISTS_SPLIT_TEXT_FROM_LIST:nY,LISTS_SPLIT_WITH_DELIMITER:sY,LISTS_SPLIT_TOOLTIP_SPLIT:iY,LISTS_SPLIT_TOOLTIP_JOIN:oY,LISTS_REVERSE_HELPURL:lY,LISTS_REVERSE_MESSAGE0:aY,LISTS_REVERSE_TOOLTIP:cY,ORDINAL_NUMBER_SUFFIX:uY,VARIABLES_GET_HELPURL:hY,VARIABLES_GET_TOOLTIP:dY,VARIABLES_GET_CREATE_SET:_Y,VARIABLES_SET_HELPURL:fY,VARIABLES_SET:TY,VARIABLES_SET_TOOLTIP:pY,VARIABLES_SET_CREATE_GET:EY,PROCEDURES_DEFNORETURN_HELPURL:gY,PROCEDURES_DEFNORETURN_TITLE:mY,PROCEDURES_DEFNORETURN_PROCEDURE:$Y,PROCEDURES_BEFORE_PARAMS:IY,PROCEDURES_CALL_BEFORE_PARAMS:OY,PROCEDURES_CALL_DISABLED_DEF_WARNING:SY,PROCEDURES_DEFNORETURN_DO:RY,PROCEDURES_DEFNORETURN_TOOLTIP:LY,PROCEDURES_DEFNORETURN_COMMENT:AY,PROCEDURES_DEFRETURN_HELPURL:CY,PROCEDURES_DEFRETURN_TITLE:vY,PROCEDURES_DEFRETURN_PROCEDURE:NY,PROCEDURES_DEFRETURN_DO:xY,PROCEDURES_DEFRETURN_COMMENT:bY,PROCEDURES_DEFRETURN_RETURN:yY,PROCEDURES_DEFRETURN_TOOLTIP:kY,PROCEDURES_ALLOW_STATEMENTS:wY,PROCEDURES_DEF_DUPLICATE_WARNING:MY,PROCEDURES_CALLNORETURN_HELPURL:DY,PROCEDURES_CALLNORETURN_TOOLTIP:PY,PROCEDURES_CALLRETURN_HELPURL:FY,PROCEDURES_CALLRETURN_TOOLTIP:BY,PROCEDURES_MUTATORCONTAINER_TITLE:UY,PROCEDURES_MUTATORCONTAINER_TOOLTIP:HY,PROCEDURES_MUTATORARG_TITLE:GY,PROCEDURES_MUTATORARG_TOOLTIP:VY,PROCEDURES_HIGHLIGHT_DEF:WY,PROCEDURES_CREATE_DO:XY,PROCEDURES_IFRETURN_TOOLTIP:zY,PROCEDURES_IFRETURN_HELPURL:YY,PROCEDURES_IFRETURN_WARNING:KY,WORKSPACE_COMMENT_DEFAULT_TEXT:jY,WORKSPACE_ARIA_LABEL:JY,COLLAPSED_WARNINGS_WARNING:qY,DIALOG_OK:ZY,DIALOG_CANCEL:QY,EDIT_BLOCK_CONTENTS:eK,MOVE_BLOCK:tK,WINDOWS:rK,MAC_OS:nK,CHROME_OS:sK,LINUX:iK,UNKNOWN:oK,CONTROL_KEY:lK,COMMAND_KEY:aK,OPTION_KEY:cK,ALT_KEY:uK,CUT_SHORTCUT:hK,COPY_SHORTCUT:dK,PASTE_SHORTCUT:_K,HELP_PROMPT:fK,SHORTCUTS_GENERAL:TK,SHORTCUTS_EDITING:pK,SHORTCUTS_CODE_NAVIGATION:EK,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:gK,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:mK,KEYBOARD_NAV_COPIED_HINT:$K,KEYBOARD_NAV_CUT_HINT:IK}=uX,OK=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT:RX,ALT_KEY:uK,CANNOT_DELETE_VARIABLE_PROCEDURE:r8,CHANGE_VALUE_TITLE:VX,CHROME_OS:sK,CLEAN_UP:yX,CLOSE:kX,COLLAPSED_WARNINGS_WARNING:qY,COLLAPSE_ALL:MX,COLLAPSE_BLOCK:wX,COLOUR_BLEND_COLOUR1:E8,COLOUR_BLEND_COLOUR2:g8,COLOUR_BLEND_HELPURL:T8,COLOUR_BLEND_RATIO:m8,COLOUR_BLEND_TITLE:p8,COLOUR_BLEND_TOOLTIP:$8,COLOUR_HUE:pX,COLOUR_PICKER_HELPURL:s8,COLOUR_PICKER_TOOLTIP:i8,COLOUR_RANDOM_HELPURL:o8,COLOUR_RANDOM_TITLE:l8,COLOUR_RANDOM_TOOLTIP:a8,COLOUR_RGB_BLUE:_8,COLOUR_RGB_GREEN:d8,COLOUR_RGB_HELPURL:c8,COLOUR_RGB_RED:h8,COLOUR_RGB_TITLE:u8,COLOUR_RGB_TOOLTIP:f8,COMMAND_KEY:aK,CONTROLS_FLOW_STATEMENTS_HELPURL:B8,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:U8,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:H8,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:G8,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:V8,CONTROLS_FLOW_STATEMENTS_WARNING:W8,CONTROLS_FOREACH_HELPURL:M8,CONTROLS_FOREACH_INPUT_DO:P8,CONTROLS_FOREACH_TITLE:D8,CONTROLS_FOREACH_TOOLTIP:F8,CONTROLS_FOR_HELPURL:b8,CONTROLS_FOR_INPUT_DO:w8,CONTROLS_FOR_TITLE:k8,CONTROLS_FOR_TOOLTIP:y8,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:r6,CONTROLS_IF_ELSEIF_TOOLTIP:n6,CONTROLS_IF_ELSE_TITLE_ELSE:s6,CONTROLS_IF_ELSE_TOOLTIP:i6,CONTROLS_IF_HELPURL:X8,CONTROLS_IF_IF_TITLE_IF:e6,CONTROLS_IF_IF_TOOLTIP:t6,CONTROLS_IF_MSG_ELSE:Z8,CONTROLS_IF_MSG_ELSEIF:q8,CONTROLS_IF_MSG_IF:J8,CONTROLS_IF_MSG_THEN:Q8,CONTROLS_IF_TOOLTIP_1:z8,CONTROLS_IF_TOOLTIP_2:Y8,CONTROLS_IF_TOOLTIP_3:K8,CONTROLS_IF_TOOLTIP_4:j8,CONTROLS_REPEAT_HELPURL:I8,CONTROLS_REPEAT_INPUT_DO:S8,CONTROLS_REPEAT_TITLE:O8,CONTROLS_REPEAT_TOOLTIP:R8,CONTROLS_WHILEUNTIL_HELPURL:L8,CONTROLS_WHILEUNTIL_INPUT_DO:A8,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:v8,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:C8,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:x8,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:N8,CONTROL_KEY:lK,COPY_SHORTCUT:dK,CUT_SHORTCUT:hK,DELETE_ALL_BLOCKS:bX,DELETE_BLOCK:NX,DELETE_VARIABLE:n8,DELETE_VARIABLE_CONFIRMATION:t8,DELETE_X_BLOCKS:xX,DIALOG_CANCEL:QY,DIALOG_OK:ZY,DISABLE_BLOCK:FX,DUPLICATE_BLOCK:SX,DUPLICATE_COMMENT:AX,EDIT_BLOCK_CONTENTS:eK,ENABLE_BLOCK:BX,EXPAND_ALL:PX,EXPAND_BLOCK:DX,EXTERNAL_INPUTS:CX,HELP:UX,HELP_PROMPT:fK,INLINE_INPUTS:vX,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:mK,KEYBOARD_NAV_COPIED_HINT:$K,KEYBOARD_NAV_CUT_HINT:IK,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:gK,LINUX:iK,LISTS_CREATE_EMPTY_HELPURL:v9,LISTS_CREATE_EMPTY_TITLE:N9,LISTS_CREATE_EMPTY_TOOLTIP:x9,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:w9,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:M9,LISTS_CREATE_WITH_HELPURL:b9,LISTS_CREATE_WITH_INPUT_WITH:k9,LISTS_CREATE_WITH_ITEM_TITLE:D9,LISTS_CREATE_WITH_ITEM_TOOLTIP:P9,LISTS_CREATE_WITH_TOOLTIP:y9,LISTS_GET_INDEX_FIRST:i7,LISTS_GET_INDEX_FROM_END:s7,LISTS_GET_INDEX_FROM_START:n7,LISTS_GET_INDEX_GET:e7,LISTS_GET_INDEX_GET_REMOVE:t7,LISTS_GET_INDEX_HELPURL:Q9,LISTS_GET_INDEX_INPUT_IN_LIST:c7,LISTS_GET_INDEX_LAST:o7,LISTS_GET_INDEX_RANDOM:l7,LISTS_GET_INDEX_REMOVE:r7,LISTS_GET_INDEX_TAIL:a7,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:_7,LISTS_GET_INDEX_TOOLTIP_GET_FROM:d7,LISTS_GET_INDEX_TOOLTIP_GET_LAST:f7,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:T7,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:E7,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:p7,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:g7,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:m7,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:I7,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:$7,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:O7,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:S7,LISTS_GET_SUBLIST_END_FROM_END:V7,LISTS_GET_SUBLIST_END_FROM_START:G7,LISTS_GET_SUBLIST_END_LAST:W7,LISTS_GET_SUBLIST_HELPURL:P7,LISTS_GET_SUBLIST_INPUT_IN_LIST:F7,LISTS_GET_SUBLIST_START_FIRST:H7,LISTS_GET_SUBLIST_START_FROM_END:U7,LISTS_GET_SUBLIST_START_FROM_START:B7,LISTS_GET_SUBLIST_TAIL:X7,LISTS_GET_SUBLIST_TOOLTIP:z7,LISTS_HUE:TX,LISTS_INDEX_FROM_END_TOOLTIP:h7,LISTS_INDEX_FROM_START_TOOLTIP:u7,LISTS_INDEX_OF_FIRST:J9,LISTS_INDEX_OF_HELPURL:K9,LISTS_INDEX_OF_INPUT_IN_LIST:j9,LISTS_INDEX_OF_LAST:q9,LISTS_INDEX_OF_TOOLTIP:Z9,LISTS_INLIST:Y9,LISTS_ISEMPTY_HELPURL:W9,LISTS_ISEMPTY_TITLE:X9,LISTS_ISEMPTY_TOOLTIP:z9,LISTS_LENGTH_HELPURL:H9,LISTS_LENGTH_TITLE:G9,LISTS_LENGTH_TOOLTIP:V9,LISTS_REPEAT_HELPURL:F9,LISTS_REPEAT_TITLE:U9,LISTS_REPEAT_TOOLTIP:B9,LISTS_REVERSE_HELPURL:lY,LISTS_REVERSE_MESSAGE0:aY,LISTS_REVERSE_TOOLTIP:cY,LISTS_SET_INDEX_HELPURL:R7,LISTS_SET_INDEX_INPUT_IN_LIST:L7,LISTS_SET_INDEX_INPUT_TO:v7,LISTS_SET_INDEX_INSERT:C7,LISTS_SET_INDEX_SET:A7,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:w7,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:k7,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:M7,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:D7,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:x7,LISTS_SET_INDEX_TOOLTIP_SET_FROM:N7,LISTS_SET_INDEX_TOOLTIP_SET_LAST:b7,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:y7,LISTS_SORT_HELPURL:Y7,LISTS_SORT_ORDER_ASCENDING:J7,LISTS_SORT_ORDER_DESCENDING:q7,LISTS_SORT_TITLE:K7,LISTS_SORT_TOOLTIP:j7,LISTS_SORT_TYPE_IGNORECASE:eY,LISTS_SORT_TYPE_NUMERIC:Z7,LISTS_SORT_TYPE_TEXT:Q7,LISTS_SPLIT_HELPURL:tY,LISTS_SPLIT_LIST_FROM_TEXT:rY,LISTS_SPLIT_TEXT_FROM_LIST:nY,LISTS_SPLIT_TOOLTIP_JOIN:oY,LISTS_SPLIT_TOOLTIP_SPLIT:iY,LISTS_SPLIT_WITH_DELIMITER:sY,LOGIC_BOOLEAN_FALSE:S6,LOGIC_BOOLEAN_HELPURL:I6,LOGIC_BOOLEAN_TOOLTIP:R6,LOGIC_BOOLEAN_TRUE:O6,LOGIC_COMPARE_HELPURL:o6,LOGIC_COMPARE_TOOLTIP_EQ:l6,LOGIC_COMPARE_TOOLTIP_GT:h6,LOGIC_COMPARE_TOOLTIP_GTE:d6,LOGIC_COMPARE_TOOLTIP_LT:c6,LOGIC_COMPARE_TOOLTIP_LTE:u6,LOGIC_COMPARE_TOOLTIP_NEQ:a6,LOGIC_HUE:hX,LOGIC_NEGATE_HELPURL:g6,LOGIC_NEGATE_TITLE:m6,LOGIC_NEGATE_TOOLTIP:$6,LOGIC_NULL:A6,LOGIC_NULL_HELPURL:L6,LOGIC_NULL_TOOLTIP:C6,LOGIC_OPERATION_AND:T6,LOGIC_OPERATION_HELPURL:_6,LOGIC_OPERATION_OR:E6,LOGIC_OPERATION_TOOLTIP_AND:f6,LOGIC_OPERATION_TOOLTIP_OR:p6,LOGIC_TERNARY_CONDITION:N6,LOGIC_TERNARY_HELPURL:v6,LOGIC_TERNARY_IF_FALSE:b6,LOGIC_TERNARY_IF_TRUE:x6,LOGIC_TERNARY_TOOLTIP:y6,LOOPS_HUE:dX,MAC_OS:nK,MATH_ADDITION_SYMBOL:M6,MATH_ARITHMETIC_HELPURL:z6,MATH_ARITHMETIC_TOOLTIP_ADD:Y6,MATH_ARITHMETIC_TOOLTIP_DIVIDE:J6,MATH_ARITHMETIC_TOOLTIP_MINUS:K6,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:j6,MATH_ARITHMETIC_TOOLTIP_POWER:q6,MATH_ATAN2_HELPURL:cz,MATH_ATAN2_TITLE:uz,MATH_ATAN2_TOOLTIP:hz,MATH_CHANGE_HELPURL:L5,MATH_CHANGE_TITLE:A5,MATH_CHANGE_TITLE_ITEM:C5,MATH_CHANGE_TOOLTIP:v5,MATH_CONSTANT_HELPURL:T5,MATH_CONSTANT_TOOLTIP:p5,MATH_CONSTRAIN_HELPURL:ez,MATH_CONSTRAIN_TITLE:tz,MATH_CONSTRAIN_TOOLTIP:rz,MATH_DIVISION_SYMBOL:P6,MATH_HUE:_X,MATH_IS_DIVISIBLE_BY:S5,MATH_IS_EVEN:E5,MATH_IS_NEGATIVE:O5,MATH_IS_ODD:g5,MATH_IS_POSITIVE:I5,MATH_IS_PRIME:m5,MATH_IS_TOOLTIP:R5,MATH_IS_WHOLE:$5,MATH_MODULO_HELPURL:q5,MATH_MODULO_TITLE:Z5,MATH_MODULO_TOOLTIP:Q5,MATH_MULTIPLICATION_SYMBOL:F6,MATH_NUMBER_HELPURL:k6,MATH_NUMBER_TOOLTIP:w6,MATH_ONLIST_HELPURL:w5,MATH_ONLIST_OPERATOR_AVERAGE:H5,MATH_ONLIST_OPERATOR_MAX:B5,MATH_ONLIST_OPERATOR_MEDIAN:V5,MATH_ONLIST_OPERATOR_MIN:P5,MATH_ONLIST_OPERATOR_MODE:X5,MATH_ONLIST_OPERATOR_RANDOM:j5,MATH_ONLIST_OPERATOR_STD_DEV:Y5,MATH_ONLIST_OPERATOR_SUM:M5,MATH_ONLIST_TOOLTIP_AVERAGE:G5,MATH_ONLIST_TOOLTIP_MAX:U5,MATH_ONLIST_TOOLTIP_MEDIAN:W5,MATH_ONLIST_TOOLTIP_MIN:F5,MATH_ONLIST_TOOLTIP_MODE:z5,MATH_ONLIST_TOOLTIP_RANDOM:J5,MATH_ONLIST_TOOLTIP_STD_DEV:K5,MATH_ONLIST_TOOLTIP_SUM:D5,MATH_POWER_SYMBOL:B6,MATH_RANDOM_FLOAT_HELPURL:oz,MATH_RANDOM_FLOAT_TITLE_RANDOM:lz,MATH_RANDOM_FLOAT_TOOLTIP:az,MATH_RANDOM_INT_HELPURL:nz,MATH_RANDOM_INT_TITLE:sz,MATH_RANDOM_INT_TOOLTIP:iz,MATH_ROUND_HELPURL:N5,MATH_ROUND_OPERATOR_ROUND:b5,MATH_ROUND_OPERATOR_ROUNDDOWN:k5,MATH_ROUND_OPERATOR_ROUNDUP:y5,MATH_ROUND_TOOLTIP:x5,MATH_SINGLE_HELPURL:Z6,MATH_SINGLE_OP_ABSOLUTE:t5,MATH_SINGLE_OP_ROOT:Q6,MATH_SINGLE_TOOLTIP_ABS:r5,MATH_SINGLE_TOOLTIP_EXP:o5,MATH_SINGLE_TOOLTIP_LN:s5,MATH_SINGLE_TOOLTIP_LOG10:i5,MATH_SINGLE_TOOLTIP_NEG:n5,MATH_SINGLE_TOOLTIP_POW10:l5,MATH_SINGLE_TOOLTIP_ROOT:e5,MATH_SUBTRACTION_SYMBOL:D6,MATH_TRIG_ACOS:W6,MATH_TRIG_ASIN:V6,MATH_TRIG_ATAN:X6,MATH_TRIG_COS:H6,MATH_TRIG_HELPURL:a5,MATH_TRIG_SIN:U6,MATH_TRIG_TAN:G6,MATH_TRIG_TOOLTIP_ACOS:_5,MATH_TRIG_TOOLTIP_ASIN:d5,MATH_TRIG_TOOLTIP_ATAN:f5,MATH_TRIG_TOOLTIP_COS:u5,MATH_TRIG_TOOLTIP_SIN:c5,MATH_TRIG_TOOLTIP_TAN:h5,MOVE_BLOCK:tK,NEW_COLOUR_VARIABLE:jX,NEW_NUMBER_VARIABLE:KX,NEW_STRING_VARIABLE:YX,NEW_VARIABLE:zX,NEW_VARIABLE_TITLE:qX,NEW_VARIABLE_TYPE_TITLE:JX,OPTION_KEY:cK,ORDINAL_NUMBER_SUFFIX:uY,PASTE_SHORTCUT:_K,PROCEDURES_ALLOW_STATEMENTS:wY,PROCEDURES_BEFORE_PARAMS:IY,PROCEDURES_CALLNORETURN_HELPURL:DY,PROCEDURES_CALLNORETURN_TOOLTIP:PY,PROCEDURES_CALLRETURN_HELPURL:FY,PROCEDURES_CALLRETURN_TOOLTIP:BY,PROCEDURES_CALL_BEFORE_PARAMS:OY,PROCEDURES_CALL_DISABLED_DEF_WARNING:SY,PROCEDURES_CREATE_DO:XY,PROCEDURES_DEFNORETURN_COMMENT:AY,PROCEDURES_DEFNORETURN_DO:RY,PROCEDURES_DEFNORETURN_HELPURL:gY,PROCEDURES_DEFNORETURN_PROCEDURE:$Y,PROCEDURES_DEFNORETURN_TITLE:mY,PROCEDURES_DEFNORETURN_TOOLTIP:LY,PROCEDURES_DEFRETURN_COMMENT:bY,PROCEDURES_DEFRETURN_DO:xY,PROCEDURES_DEFRETURN_HELPURL:CY,PROCEDURES_DEFRETURN_PROCEDURE:NY,PROCEDURES_DEFRETURN_RETURN:yY,PROCEDURES_DEFRETURN_TITLE:vY,PROCEDURES_DEFRETURN_TOOLTIP:kY,PROCEDURES_DEF_DUPLICATE_WARNING:MY,PROCEDURES_HIGHLIGHT_DEF:WY,PROCEDURES_HUE:mX,PROCEDURES_IFRETURN_HELPURL:YY,PROCEDURES_IFRETURN_TOOLTIP:zY,PROCEDURES_IFRETURN_WARNING:KY,PROCEDURES_MUTATORARG_TITLE:GY,PROCEDURES_MUTATORARG_TOOLTIP:VY,PROCEDURES_MUTATORCONTAINER_TITLE:UY,PROCEDURES_MUTATORCONTAINER_TOOLTIP:HY,REDO:GX,REMOVE_COMMENT:LX,RENAME_VARIABLE:WX,RENAME_VARIABLE_TITLE:XX,SHORTCUTS_CODE_NAVIGATION:EK,SHORTCUTS_EDITING:pK,SHORTCUTS_GENERAL:TK,TEXTS_HUE:fX,TEXT_APPEND_HELPURL:Iz,TEXT_APPEND_TITLE:Oz,TEXT_APPEND_TOOLTIP:Rz,TEXT_APPEND_VARIABLE:Sz,TEXT_CHANGECASE_HELPURL:t9,TEXT_CHANGECASE_OPERATOR_LOWERCASE:s9,TEXT_CHANGECASE_OPERATOR_TITLECASE:i9,TEXT_CHANGECASE_OPERATOR_UPPERCASE:n9,TEXT_CHANGECASE_TOOLTIP:r9,TEXT_CHARAT_FIRST:Uz,TEXT_CHARAT_FROM_END:Bz,TEXT_CHARAT_FROM_START:Fz,TEXT_CHARAT_HELPURL:Dz,TEXT_CHARAT_LAST:Hz,TEXT_CHARAT_RANDOM:Gz,TEXT_CHARAT_TAIL:Vz,TEXT_CHARAT_TITLE:Pz,TEXT_CHARAT_TOOLTIP:Wz,TEXT_COUNT_HELPURL:$9,TEXT_COUNT_MESSAGE0:m9,TEXT_COUNT_TOOLTIP:I9,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:mz,TEXT_CREATE_JOIN_ITEM_TOOLTIP:$z,TEXT_CREATE_JOIN_TITLE_JOIN:Ez,TEXT_CREATE_JOIN_TOOLTIP:gz,TEXT_GET_SUBSTRING_END_FROM_END:Zz,TEXT_GET_SUBSTRING_END_FROM_START:qz,TEXT_GET_SUBSTRING_END_LAST:Qz,TEXT_GET_SUBSTRING_HELPURL:zz,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:Yz,TEXT_GET_SUBSTRING_START_FIRST:Jz,TEXT_GET_SUBSTRING_START_FROM_END:jz,TEXT_GET_SUBSTRING_START_FROM_START:Kz,TEXT_GET_SUBSTRING_TAIL:e9,TEXT_GET_SUBSTRING_TOOLTIP:Xz,TEXT_INDEXOF_HELPURL:bz,TEXT_INDEXOF_OPERATOR_FIRST:wz,TEXT_INDEXOF_OPERATOR_LAST:Mz,TEXT_INDEXOF_TITLE:kz,TEXT_INDEXOF_TOOLTIP:yz,TEXT_ISEMPTY_HELPURL:vz,TEXT_ISEMPTY_TITLE:Nz,TEXT_ISEMPTY_TOOLTIP:xz,TEXT_JOIN_HELPURL:fz,TEXT_JOIN_TITLE_CREATEWITH:Tz,TEXT_JOIN_TOOLTIP:pz,TEXT_LENGTH_HELPURL:Lz,TEXT_LENGTH_TITLE:Az,TEXT_LENGTH_TOOLTIP:Cz,TEXT_PRINT_HELPURL:h9,TEXT_PRINT_TITLE:d9,TEXT_PRINT_TOOLTIP:_9,TEXT_PROMPT_HELPURL:f9,TEXT_PROMPT_TOOLTIP_NUMBER:E9,TEXT_PROMPT_TOOLTIP_TEXT:g9,TEXT_PROMPT_TYPE_NUMBER:p9,TEXT_PROMPT_TYPE_TEXT:T9,TEXT_REPLACE_HELPURL:S9,TEXT_REPLACE_MESSAGE0:O9,TEXT_REPLACE_TOOLTIP:R9,TEXT_REVERSE_HELPURL:A9,TEXT_REVERSE_MESSAGE0:L9,TEXT_REVERSE_TOOLTIP:C9,TEXT_TEXT_HELPURL:dz,TEXT_TEXT_TOOLTIP:_z,TEXT_TRIM_HELPURL:o9,TEXT_TRIM_OPERATOR_BOTH:a9,TEXT_TRIM_OPERATOR_LEFT:c9,TEXT_TRIM_OPERATOR_RIGHT:u9,TEXT_TRIM_TOOLTIP:l9,TODAY:OX,UNDO:HX,UNKNOWN:oK,UNNAMED_KEY:IX,VARIABLES_DEFAULT_NAME:$X,VARIABLES_DYNAMIC_HUE:gX,VARIABLES_GET_CREATE_SET:_Y,VARIABLES_GET_HELPURL:hY,VARIABLES_GET_TOOLTIP:dY,VARIABLES_HUE:EX,VARIABLES_SET:TY,VARIABLES_SET_CREATE_GET:EY,VARIABLES_SET_HELPURL:fY,VARIABLES_SET_TOOLTIP:pY,VARIABLE_ALREADY_EXISTS:ZX,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:QX,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:e8,WINDOWS:rK,WORKSPACE_ARIA_LABEL:JY,WORKSPACE_COMMENT_DEFAULT_TEXT:jY},Symbol.toStringTag,{value:"Module"}));var SK=P1();const RK=Ph(SK),{LOGIC_HUE:LK,LOOPS_HUE:AK,MATH_HUE:CK,TEXTS_HUE:vK,LISTS_HUE:NK,COLOUR_HUE:xK,VARIABLES_HUE:bK,VARIABLES_DYNAMIC_HUE:yK,PROCEDURES_HUE:kK,VARIABLES_DEFAULT_NAME:wK,UNNAMED_KEY:MK,TODAY:DK,DUPLICATE_BLOCK:yk,ADD_COMMENT:PK,REMOVE_COMMENT:FK,DUPLICATE_COMMENT:BK,EXTERNAL_INPUTS:UK,INLINE_INPUTS:HK,DELETE_BLOCK:kk,DELETE_X_BLOCKS:GK,DELETE_ALL_BLOCKS:VK,CLEAN_UP:WK,CLOSE:XK,COLLAPSE_BLOCK:zK,COLLAPSE_ALL:YK,EXPAND_BLOCK:KK,EXPAND_ALL:jK,DISABLE_BLOCK:JK,ENABLE_BLOCK:qK,HELP:ZK,UNDO:wk,REDO:Mk,CHANGE_VALUE_TITLE:QK,RENAME_VARIABLE:ej,RENAME_VARIABLE_TITLE:tj,NEW_VARIABLE:rj,NEW_STRING_VARIABLE:nj,NEW_NUMBER_VARIABLE:sj,NEW_COLOUR_VARIABLE:ij,NEW_VARIABLE_TYPE_TITLE:oj,NEW_VARIABLE_TITLE:lj,VARIABLE_ALREADY_EXISTS:aj,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:cj,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:uj,DELETE_VARIABLE_CONFIRMATION:hj,CANNOT_DELETE_VARIABLE_PROCEDURE:dj,DELETE_VARIABLE:_j,COLOUR_PICKER_HELPURL:fj,COLOUR_PICKER_TOOLTIP:Tj,COLOUR_RANDOM_HELPURL:pj,COLOUR_RANDOM_TITLE:Ej,COLOUR_RANDOM_TOOLTIP:gj,COLOUR_RGB_HELPURL:mj,COLOUR_RGB_TITLE:$j,COLOUR_RGB_RED:Ij,COLOUR_RGB_GREEN:Oj,COLOUR_RGB_BLUE:Sj,COLOUR_RGB_TOOLTIP:Rj,COLOUR_BLEND_HELPURL:Lj,COLOUR_BLEND_TITLE:Aj,COLOUR_BLEND_COLOUR1:Cj,COLOUR_BLEND_COLOUR2:vj,COLOUR_BLEND_RATIO:Nj,COLOUR_BLEND_TOOLTIP:xj,CONTROLS_REPEAT_HELPURL:bj,CONTROLS_REPEAT_TITLE:yj,CONTROLS_REPEAT_INPUT_DO:kj,CONTROLS_REPEAT_TOOLTIP:wj,CONTROLS_WHILEUNTIL_HELPURL:Mj,CONTROLS_WHILEUNTIL_INPUT_DO:Dj,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:Pj,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:Fj,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:Bj,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:Uj,CONTROLS_FOR_HELPURL:Hj,CONTROLS_FOR_TOOLTIP:Gj,CONTROLS_FOR_TITLE:Vj,CONTROLS_FOR_INPUT_DO:Wj,CONTROLS_FOREACH_HELPURL:Xj,CONTROLS_FOREACH_TITLE:zj,CONTROLS_FOREACH_INPUT_DO:Yj,CONTROLS_FOREACH_TOOLTIP:Kj,CONTROLS_FLOW_STATEMENTS_HELPURL:jj,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:Jj,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:qj,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:Zj,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:Qj,CONTROLS_FLOW_STATEMENTS_WARNING:eJ,CONTROLS_IF_HELPURL:tJ,CONTROLS_IF_TOOLTIP_1:rJ,CONTROLS_IF_TOOLTIP_2:nJ,CONTROLS_IF_TOOLTIP_3:sJ,CONTROLS_IF_TOOLTIP_4:iJ,CONTROLS_IF_MSG_IF:oJ,CONTROLS_IF_MSG_ELSEIF:lJ,CONTROLS_IF_MSG_ELSE:aJ,CONTROLS_IF_MSG_THEN:cJ,CONTROLS_IF_IF_TITLE_IF:uJ,CONTROLS_IF_IF_TOOLTIP:hJ,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:dJ,CONTROLS_IF_ELSEIF_TOOLTIP:_J,CONTROLS_IF_ELSE_TITLE_ELSE:fJ,CONTROLS_IF_ELSE_TOOLTIP:TJ,LOGIC_COMPARE_HELPURL:pJ,LOGIC_COMPARE_TOOLTIP_EQ:EJ,LOGIC_COMPARE_TOOLTIP_NEQ:gJ,LOGIC_COMPARE_TOOLTIP_LT:mJ,LOGIC_COMPARE_TOOLTIP_LTE:$J,LOGIC_COMPARE_TOOLTIP_GT:IJ,LOGIC_COMPARE_TOOLTIP_GTE:OJ,LOGIC_OPERATION_HELPURL:SJ,LOGIC_OPERATION_TOOLTIP_AND:RJ,LOGIC_OPERATION_AND:LJ,LOGIC_OPERATION_TOOLTIP_OR:AJ,LOGIC_OPERATION_OR:CJ,LOGIC_NEGATE_HELPURL:vJ,LOGIC_NEGATE_TITLE:NJ,LOGIC_NEGATE_TOOLTIP:xJ,LOGIC_BOOLEAN_HELPURL:bJ,LOGIC_BOOLEAN_TRUE:yJ,LOGIC_BOOLEAN_FALSE:kJ,LOGIC_BOOLEAN_TOOLTIP:wJ,LOGIC_NULL_HELPURL:MJ,LOGIC_NULL:DJ,LOGIC_NULL_TOOLTIP:PJ,LOGIC_TERNARY_HELPURL:FJ,LOGIC_TERNARY_CONDITION:BJ,LOGIC_TERNARY_IF_TRUE:UJ,LOGIC_TERNARY_IF_FALSE:HJ,LOGIC_TERNARY_TOOLTIP:GJ,MATH_NUMBER_HELPURL:VJ,MATH_NUMBER_TOOLTIP:WJ,MATH_ADDITION_SYMBOL:XJ,MATH_SUBTRACTION_SYMBOL:zJ,MATH_DIVISION_SYMBOL:YJ,MATH_MULTIPLICATION_SYMBOL:KJ,MATH_POWER_SYMBOL:jJ,MATH_TRIG_SIN:JJ,MATH_TRIG_COS:qJ,MATH_TRIG_TAN:ZJ,MATH_TRIG_ASIN:QJ,MATH_TRIG_ACOS:eq,MATH_TRIG_ATAN:tq,MATH_ARITHMETIC_HELPURL:rq,MATH_ARITHMETIC_TOOLTIP_ADD:nq,MATH_ARITHMETIC_TOOLTIP_MINUS:sq,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:iq,MATH_ARITHMETIC_TOOLTIP_DIVIDE:oq,MATH_ARITHMETIC_TOOLTIP_POWER:lq,MATH_SINGLE_HELPURL:aq,MATH_SINGLE_OP_ROOT:cq,MATH_SINGLE_TOOLTIP_ROOT:uq,MATH_SINGLE_OP_ABSOLUTE:hq,MATH_SINGLE_TOOLTIP_ABS:dq,MATH_SINGLE_TOOLTIP_NEG:_q,MATH_SINGLE_TOOLTIP_LN:fq,MATH_SINGLE_TOOLTIP_LOG10:Tq,MATH_SINGLE_TOOLTIP_EXP:pq,MATH_SINGLE_TOOLTIP_POW10:Eq,MATH_TRIG_HELPURL:gq,MATH_TRIG_TOOLTIP_SIN:mq,MATH_TRIG_TOOLTIP_COS:$q,MATH_TRIG_TOOLTIP_TAN:Iq,MATH_TRIG_TOOLTIP_ASIN:Oq,MATH_TRIG_TOOLTIP_ACOS:Sq,MATH_TRIG_TOOLTIP_ATAN:Rq,MATH_CONSTANT_HELPURL:Lq,MATH_CONSTANT_TOOLTIP:Aq,MATH_IS_EVEN:Cq,MATH_IS_ODD:vq,MATH_IS_PRIME:Nq,MATH_IS_WHOLE:xq,MATH_IS_POSITIVE:bq,MATH_IS_NEGATIVE:yq,MATH_IS_DIVISIBLE_BY:kq,MATH_IS_TOOLTIP:wq,MATH_CHANGE_HELPURL:Mq,MATH_CHANGE_TITLE:Dq,MATH_CHANGE_TITLE_ITEM:Pq,MATH_CHANGE_TOOLTIP:Fq,MATH_ROUND_HELPURL:Bq,MATH_ROUND_TOOLTIP:Uq,MATH_ROUND_OPERATOR_ROUND:Hq,MATH_ROUND_OPERATOR_ROUNDUP:Gq,MATH_ROUND_OPERATOR_ROUNDDOWN:Vq,MATH_ONLIST_HELPURL:Wq,MATH_ONLIST_OPERATOR_SUM:Xq,MATH_ONLIST_TOOLTIP_SUM:zq,MATH_ONLIST_OPERATOR_MIN:Yq,MATH_ONLIST_TOOLTIP_MIN:Kq,MATH_ONLIST_OPERATOR_MAX:jq,MATH_ONLIST_TOOLTIP_MAX:Jq,MATH_ONLIST_OPERATOR_AVERAGE:qq,MATH_ONLIST_TOOLTIP_AVERAGE:Zq,MATH_ONLIST_OPERATOR_MEDIAN:Qq,MATH_ONLIST_TOOLTIP_MEDIAN:eZ,MATH_ONLIST_OPERATOR_MODE:tZ,MATH_ONLIST_TOOLTIP_MODE:rZ,MATH_ONLIST_OPERATOR_STD_DEV:nZ,MATH_ONLIST_TOOLTIP_STD_DEV:sZ,MATH_ONLIST_OPERATOR_RANDOM:iZ,MATH_ONLIST_TOOLTIP_RANDOM:oZ,MATH_MODULO_HELPURL:lZ,MATH_MODULO_TITLE:aZ,MATH_MODULO_TOOLTIP:cZ,MATH_CONSTRAIN_HELPURL:uZ,MATH_CONSTRAIN_TITLE:hZ,MATH_CONSTRAIN_TOOLTIP:dZ,MATH_RANDOM_INT_HELPURL:_Z,MATH_RANDOM_INT_TITLE:fZ,MATH_RANDOM_INT_TOOLTIP:TZ,MATH_RANDOM_FLOAT_HELPURL:pZ,MATH_RANDOM_FLOAT_TITLE_RANDOM:EZ,MATH_RANDOM_FLOAT_TOOLTIP:gZ,MATH_ATAN2_HELPURL:mZ,MATH_ATAN2_TITLE:$Z,MATH_ATAN2_TOOLTIP:IZ,TEXT_TEXT_HELPURL:OZ,TEXT_TEXT_TOOLTIP:SZ,TEXT_JOIN_HELPURL:RZ,TEXT_JOIN_TITLE_CREATEWITH:LZ,TEXT_JOIN_TOOLTIP:AZ,TEXT_CREATE_JOIN_TITLE_JOIN:CZ,TEXT_CREATE_JOIN_TOOLTIP:vZ,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:NZ,TEXT_CREATE_JOIN_ITEM_TOOLTIP:xZ,TEXT_APPEND_HELPURL:bZ,TEXT_APPEND_TITLE:yZ,TEXT_APPEND_VARIABLE:kZ,TEXT_APPEND_TOOLTIP:wZ,TEXT_LENGTH_HELPURL:MZ,TEXT_LENGTH_TITLE:DZ,TEXT_LENGTH_TOOLTIP:PZ,TEXT_ISEMPTY_HELPURL:FZ,TEXT_ISEMPTY_TITLE:BZ,TEXT_ISEMPTY_TOOLTIP:UZ,TEXT_INDEXOF_HELPURL:HZ,TEXT_INDEXOF_TOOLTIP:GZ,TEXT_INDEXOF_TITLE:VZ,TEXT_INDEXOF_OPERATOR_FIRST:WZ,TEXT_INDEXOF_OPERATOR_LAST:XZ,TEXT_CHARAT_HELPURL:zZ,TEXT_CHARAT_TITLE:YZ,TEXT_CHARAT_FROM_START:KZ,TEXT_CHARAT_FROM_END:jZ,TEXT_CHARAT_FIRST:JZ,TEXT_CHARAT_LAST:qZ,TEXT_CHARAT_RANDOM:ZZ,TEXT_CHARAT_TAIL:QZ,TEXT_CHARAT_TOOLTIP:eQ,TEXT_GET_SUBSTRING_TOOLTIP:tQ,TEXT_GET_SUBSTRING_HELPURL:rQ,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:nQ,TEXT_GET_SUBSTRING_START_FROM_START:sQ,TEXT_GET_SUBSTRING_START_FROM_END:iQ,TEXT_GET_SUBSTRING_START_FIRST:oQ,TEXT_GET_SUBSTRING_END_FROM_START:lQ,TEXT_GET_SUBSTRING_END_FROM_END:aQ,TEXT_GET_SUBSTRING_END_LAST:cQ,TEXT_GET_SUBSTRING_TAIL:uQ,TEXT_CHANGECASE_HELPURL:hQ,TEXT_CHANGECASE_TOOLTIP:dQ,TEXT_CHANGECASE_OPERATOR_UPPERCASE:_Q,TEXT_CHANGECASE_OPERATOR_LOWERCASE:fQ,TEXT_CHANGECASE_OPERATOR_TITLECASE:TQ,TEXT_TRIM_HELPURL:pQ,TEXT_TRIM_TOOLTIP:EQ,TEXT_TRIM_OPERATOR_BOTH:gQ,TEXT_TRIM_OPERATOR_LEFT:mQ,TEXT_TRIM_OPERATOR_RIGHT:$Q,TEXT_PRINT_HELPURL:IQ,TEXT_PRINT_TITLE:OQ,TEXT_PRINT_TOOLTIP:SQ,TEXT_PROMPT_HELPURL:RQ,TEXT_PROMPT_TYPE_TEXT:LQ,TEXT_PROMPT_TYPE_NUMBER:AQ,TEXT_PROMPT_TOOLTIP_NUMBER:CQ,TEXT_PROMPT_TOOLTIP_TEXT:vQ,TEXT_COUNT_MESSAGE0:NQ,TEXT_COUNT_HELPURL:xQ,TEXT_COUNT_TOOLTIP:bQ,TEXT_REPLACE_MESSAGE0:yQ,TEXT_REPLACE_HELPURL:kQ,TEXT_REPLACE_TOOLTIP:wQ,TEXT_REVERSE_MESSAGE0:MQ,TEXT_REVERSE_HELPURL:DQ,TEXT_REVERSE_TOOLTIP:PQ,LISTS_CREATE_EMPTY_HELPURL:FQ,LISTS_CREATE_EMPTY_TITLE:BQ,LISTS_CREATE_EMPTY_TOOLTIP:UQ,LISTS_CREATE_WITH_HELPURL:HQ,LISTS_CREATE_WITH_TOOLTIP:GQ,LISTS_CREATE_WITH_INPUT_WITH:VQ,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:WQ,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:XQ,LISTS_CREATE_WITH_ITEM_TITLE:zQ,LISTS_CREATE_WITH_ITEM_TOOLTIP:YQ,LISTS_REPEAT_HELPURL:KQ,LISTS_REPEAT_TOOLTIP:jQ,LISTS_REPEAT_TITLE:JQ,LISTS_LENGTH_HELPURL:qQ,LISTS_LENGTH_TITLE:ZQ,LISTS_LENGTH_TOOLTIP:QQ,LISTS_ISEMPTY_HELPURL:eee,LISTS_ISEMPTY_TITLE:tee,LISTS_ISEMPTY_TOOLTIP:ree,LISTS_INLIST:nee,LISTS_INDEX_OF_HELPURL:see,LISTS_INDEX_OF_INPUT_IN_LIST:iee,LISTS_INDEX_OF_FIRST:oee,LISTS_INDEX_OF_LAST:lee,LISTS_INDEX_OF_TOOLTIP:aee,LISTS_GET_INDEX_HELPURL:cee,LISTS_GET_INDEX_GET:uee,LISTS_GET_INDEX_GET_REMOVE:hee,LISTS_GET_INDEX_REMOVE:dee,LISTS_GET_INDEX_FROM_START:_ee,LISTS_GET_INDEX_FROM_END:fee,LISTS_GET_INDEX_FIRST:Tee,LISTS_GET_INDEX_LAST:pee,LISTS_GET_INDEX_RANDOM:Eee,LISTS_GET_INDEX_TAIL:gee,LISTS_GET_INDEX_INPUT_IN_LIST:mee,LISTS_INDEX_FROM_START_TOOLTIP:$ee,LISTS_INDEX_FROM_END_TOOLTIP:Iee,LISTS_GET_INDEX_TOOLTIP_GET_FROM:Oee,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:See,LISTS_GET_INDEX_TOOLTIP_GET_LAST:Ree,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:Lee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:Aee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:Cee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:vee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:Nee,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:xee,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:bee,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:yee,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:kee,LISTS_SET_INDEX_HELPURL:wee,LISTS_SET_INDEX_INPUT_IN_LIST:Mee,LISTS_SET_INDEX_SET:Dee,LISTS_SET_INDEX_INSERT:Pee,LISTS_SET_INDEX_INPUT_TO:Fee,LISTS_SET_INDEX_TOOLTIP_SET_FROM:Bee,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:Uee,LISTS_SET_INDEX_TOOLTIP_SET_LAST:Hee,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:Gee,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:Vee,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:Wee,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:Xee,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:zee,LISTS_GET_SUBLIST_HELPURL:Yee,LISTS_GET_SUBLIST_INPUT_IN_LIST:Kee,LISTS_GET_SUBLIST_START_FROM_START:jee,LISTS_GET_SUBLIST_START_FROM_END:Jee,LISTS_GET_SUBLIST_START_FIRST:qee,LISTS_GET_SUBLIST_END_FROM_START:Zee,LISTS_GET_SUBLIST_END_FROM_END:Qee,LISTS_GET_SUBLIST_END_LAST:ete,LISTS_GET_SUBLIST_TAIL:tte,LISTS_GET_SUBLIST_TOOLTIP:rte,LISTS_SORT_HELPURL:nte,LISTS_SORT_TITLE:ste,LISTS_SORT_TOOLTIP:ite,LISTS_SORT_ORDER_ASCENDING:ote,LISTS_SORT_ORDER_DESCENDING:lte,LISTS_SORT_TYPE_NUMERIC:ate,LISTS_SORT_TYPE_TEXT:cte,LISTS_SORT_TYPE_IGNORECASE:ute,LISTS_SPLIT_HELPURL:hte,LISTS_SPLIT_LIST_FROM_TEXT:dte,LISTS_SPLIT_TEXT_FROM_LIST:_te,LISTS_SPLIT_WITH_DELIMITER:fte,LISTS_SPLIT_TOOLTIP_SPLIT:Tte,LISTS_SPLIT_TOOLTIP_JOIN:pte,LISTS_REVERSE_HELPURL:Ete,LISTS_REVERSE_MESSAGE0:gte,LISTS_REVERSE_TOOLTIP:mte,ORDINAL_NUMBER_SUFFIX:$te,VARIABLES_GET_HELPURL:Ite,VARIABLES_GET_TOOLTIP:Ote,VARIABLES_GET_CREATE_SET:Ste,VARIABLES_SET_HELPURL:Rte,VARIABLES_SET:Lte,VARIABLES_SET_TOOLTIP:Ate,VARIABLES_SET_CREATE_GET:Cte,PROCEDURES_DEFNORETURN_HELPURL:vte,PROCEDURES_DEFNORETURN_TITLE:Nte,PROCEDURES_DEFNORETURN_PROCEDURE:xte,PROCEDURES_BEFORE_PARAMS:bte,PROCEDURES_CALL_BEFORE_PARAMS:yte,PROCEDURES_CALL_DISABLED_DEF_WARNING:kte,PROCEDURES_DEFNORETURN_DO:wte,PROCEDURES_DEFNORETURN_TOOLTIP:Mte,PROCEDURES_DEFNORETURN_COMMENT:Dte,PROCEDURES_DEFRETURN_HELPURL:Pte,PROCEDURES_DEFRETURN_TITLE:Fte,PROCEDURES_DEFRETURN_PROCEDURE:Bte,PROCEDURES_DEFRETURN_DO:Ute,PROCEDURES_DEFRETURN_COMMENT:Hte,PROCEDURES_DEFRETURN_RETURN:Gte,PROCEDURES_DEFRETURN_TOOLTIP:Vte,PROCEDURES_ALLOW_STATEMENTS:Wte,PROCEDURES_DEF_DUPLICATE_WARNING:Xte,PROCEDURES_CALLNORETURN_HELPURL:zte,PROCEDURES_CALLNORETURN_TOOLTIP:Yte,PROCEDURES_CALLRETURN_HELPURL:Kte,PROCEDURES_CALLRETURN_TOOLTIP:jte,PROCEDURES_MUTATORCONTAINER_TITLE:Jte,PROCEDURES_MUTATORCONTAINER_TOOLTIP:qte,PROCEDURES_MUTATORARG_TITLE:Zte,PROCEDURES_MUTATORARG_TOOLTIP:Qte,PROCEDURES_HIGHLIGHT_DEF:ere,PROCEDURES_CREATE_DO:tre,PROCEDURES_IFRETURN_TOOLTIP:rre,PROCEDURES_IFRETURN_HELPURL:nre,PROCEDURES_IFRETURN_WARNING:sre,WORKSPACE_COMMENT_DEFAULT_TEXT:ire,WORKSPACE_ARIA_LABEL:ore,COLLAPSED_WARNINGS_WARNING:lre,DIALOG_OK:are,DIALOG_CANCEL:cre,EDIT_BLOCK_CONTENTS:ure,MOVE_BLOCK:hre,WINDOWS:dre,MAC_OS:_re,CHROME_OS:fre,LINUX:Tre,UNKNOWN:pre,CONTROL_KEY:Ere,COMMAND_KEY:gre,OPTION_KEY:mre,ALT_KEY:$re,CUT_SHORTCUT:Ire,COPY_SHORTCUT:Ore,PASTE_SHORTCUT:Sre,HELP_PROMPT:Rre,SHORTCUTS_GENERAL:Lre,SHORTCUTS_EDITING:Are,SHORTCUTS_CODE_NAVIGATION:Cre,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:vre,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:Nre,KEYBOARD_NAV_COPIED_HINT:xre,KEYBOARD_NAV_CUT_HINT:bre}=RK,yre=Object.freeze(Object.defineProperty({__proto__:null,ADD_COMMENT:PK,ALT_KEY:$re,CANNOT_DELETE_VARIABLE_PROCEDURE:dj,CHANGE_VALUE_TITLE:QK,CHROME_OS:fre,CLEAN_UP:WK,CLOSE:XK,COLLAPSED_WARNINGS_WARNING:lre,COLLAPSE_ALL:YK,COLLAPSE_BLOCK:zK,COLOUR_BLEND_COLOUR1:Cj,COLOUR_BLEND_COLOUR2:vj,COLOUR_BLEND_HELPURL:Lj,COLOUR_BLEND_RATIO:Nj,COLOUR_BLEND_TITLE:Aj,COLOUR_BLEND_TOOLTIP:xj,COLOUR_HUE:xK,COLOUR_PICKER_HELPURL:fj,COLOUR_PICKER_TOOLTIP:Tj,COLOUR_RANDOM_HELPURL:pj,COLOUR_RANDOM_TITLE:Ej,COLOUR_RANDOM_TOOLTIP:gj,COLOUR_RGB_BLUE:Sj,COLOUR_RGB_GREEN:Oj,COLOUR_RGB_HELPURL:mj,COLOUR_RGB_RED:Ij,COLOUR_RGB_TITLE:$j,COLOUR_RGB_TOOLTIP:Rj,COMMAND_KEY:gre,CONTROLS_FLOW_STATEMENTS_HELPURL:jj,CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK:Jj,CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE:qj,CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK:Zj,CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE:Qj,CONTROLS_FLOW_STATEMENTS_WARNING:eJ,CONTROLS_FOREACH_HELPURL:Xj,CONTROLS_FOREACH_INPUT_DO:Yj,CONTROLS_FOREACH_TITLE:zj,CONTROLS_FOREACH_TOOLTIP:Kj,CONTROLS_FOR_HELPURL:Hj,CONTROLS_FOR_INPUT_DO:Wj,CONTROLS_FOR_TITLE:Vj,CONTROLS_FOR_TOOLTIP:Gj,CONTROLS_IF_ELSEIF_TITLE_ELSEIF:dJ,CONTROLS_IF_ELSEIF_TOOLTIP:_J,CONTROLS_IF_ELSE_TITLE_ELSE:fJ,CONTROLS_IF_ELSE_TOOLTIP:TJ,CONTROLS_IF_HELPURL:tJ,CONTROLS_IF_IF_TITLE_IF:uJ,CONTROLS_IF_IF_TOOLTIP:hJ,CONTROLS_IF_MSG_ELSE:aJ,CONTROLS_IF_MSG_ELSEIF:lJ,CONTROLS_IF_MSG_IF:oJ,CONTROLS_IF_MSG_THEN:cJ,CONTROLS_IF_TOOLTIP_1:rJ,CONTROLS_IF_TOOLTIP_2:nJ,CONTROLS_IF_TOOLTIP_3:sJ,CONTROLS_IF_TOOLTIP_4:iJ,CONTROLS_REPEAT_HELPURL:bj,CONTROLS_REPEAT_INPUT_DO:kj,CONTROLS_REPEAT_TITLE:yj,CONTROLS_REPEAT_TOOLTIP:wj,CONTROLS_WHILEUNTIL_HELPURL:Mj,CONTROLS_WHILEUNTIL_INPUT_DO:Dj,CONTROLS_WHILEUNTIL_OPERATOR_UNTIL:Fj,CONTROLS_WHILEUNTIL_OPERATOR_WHILE:Pj,CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL:Uj,CONTROLS_WHILEUNTIL_TOOLTIP_WHILE:Bj,CONTROL_KEY:Ere,COPY_SHORTCUT:Ore,CUT_SHORTCUT:Ire,DELETE_ALL_BLOCKS:VK,DELETE_BLOCK:kk,DELETE_VARIABLE:_j,DELETE_VARIABLE_CONFIRMATION:hj,DELETE_X_BLOCKS:GK,DIALOG_CANCEL:cre,DIALOG_OK:are,DISABLE_BLOCK:JK,DUPLICATE_BLOCK:yk,DUPLICATE_COMMENT:BK,EDIT_BLOCK_CONTENTS:ure,ENABLE_BLOCK:qK,EXPAND_ALL:jK,EXPAND_BLOCK:KK,EXTERNAL_INPUTS:UK,HELP:ZK,HELP_PROMPT:Rre,INLINE_INPUTS:HK,KEYBOARD_NAV_CONSTRAINED_MOVE_HINT:Nre,KEYBOARD_NAV_COPIED_HINT:xre,KEYBOARD_NAV_CUT_HINT:bre,KEYBOARD_NAV_UNCONSTRAINED_MOVE_HINT:vre,LINUX:Tre,LISTS_CREATE_EMPTY_HELPURL:FQ,LISTS_CREATE_EMPTY_TITLE:BQ,LISTS_CREATE_EMPTY_TOOLTIP:UQ,LISTS_CREATE_WITH_CONTAINER_TITLE_ADD:WQ,LISTS_CREATE_WITH_CONTAINER_TOOLTIP:XQ,LISTS_CREATE_WITH_HELPURL:HQ,LISTS_CREATE_WITH_INPUT_WITH:VQ,LISTS_CREATE_WITH_ITEM_TITLE:zQ,LISTS_CREATE_WITH_ITEM_TOOLTIP:YQ,LISTS_CREATE_WITH_TOOLTIP:GQ,LISTS_GET_INDEX_FIRST:Tee,LISTS_GET_INDEX_FROM_END:fee,LISTS_GET_INDEX_FROM_START:_ee,LISTS_GET_INDEX_GET:uee,LISTS_GET_INDEX_GET_REMOVE:hee,LISTS_GET_INDEX_HELPURL:cee,LISTS_GET_INDEX_INPUT_IN_LIST:mee,LISTS_GET_INDEX_LAST:pee,LISTS_GET_INDEX_RANDOM:Eee,LISTS_GET_INDEX_REMOVE:dee,LISTS_GET_INDEX_TAIL:gee,LISTS_GET_INDEX_TOOLTIP_GET_FIRST:See,LISTS_GET_INDEX_TOOLTIP_GET_FROM:Oee,LISTS_GET_INDEX_TOOLTIP_GET_LAST:Ree,LISTS_GET_INDEX_TOOLTIP_GET_RANDOM:Lee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST:Cee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM:Aee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST:vee,LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM:Nee,LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST:bee,LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM:xee,LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST:yee,LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM:kee,LISTS_GET_SUBLIST_END_FROM_END:Qee,LISTS_GET_SUBLIST_END_FROM_START:Zee,LISTS_GET_SUBLIST_END_LAST:ete,LISTS_GET_SUBLIST_HELPURL:Yee,LISTS_GET_SUBLIST_INPUT_IN_LIST:Kee,LISTS_GET_SUBLIST_START_FIRST:qee,LISTS_GET_SUBLIST_START_FROM_END:Jee,LISTS_GET_SUBLIST_START_FROM_START:jee,LISTS_GET_SUBLIST_TAIL:tte,LISTS_GET_SUBLIST_TOOLTIP:rte,LISTS_HUE:NK,LISTS_INDEX_FROM_END_TOOLTIP:Iee,LISTS_INDEX_FROM_START_TOOLTIP:$ee,LISTS_INDEX_OF_FIRST:oee,LISTS_INDEX_OF_HELPURL:see,LISTS_INDEX_OF_INPUT_IN_LIST:iee,LISTS_INDEX_OF_LAST:lee,LISTS_INDEX_OF_TOOLTIP:aee,LISTS_INLIST:nee,LISTS_ISEMPTY_HELPURL:eee,LISTS_ISEMPTY_TITLE:tee,LISTS_ISEMPTY_TOOLTIP:ree,LISTS_LENGTH_HELPURL:qQ,LISTS_LENGTH_TITLE:ZQ,LISTS_LENGTH_TOOLTIP:QQ,LISTS_REPEAT_HELPURL:KQ,LISTS_REPEAT_TITLE:JQ,LISTS_REPEAT_TOOLTIP:jQ,LISTS_REVERSE_HELPURL:Ete,LISTS_REVERSE_MESSAGE0:gte,LISTS_REVERSE_TOOLTIP:mte,LISTS_SET_INDEX_HELPURL:wee,LISTS_SET_INDEX_INPUT_IN_LIST:Mee,LISTS_SET_INDEX_INPUT_TO:Fee,LISTS_SET_INDEX_INSERT:Pee,LISTS_SET_INDEX_SET:Dee,LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST:Wee,LISTS_SET_INDEX_TOOLTIP_INSERT_FROM:Vee,LISTS_SET_INDEX_TOOLTIP_INSERT_LAST:Xee,LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM:zee,LISTS_SET_INDEX_TOOLTIP_SET_FIRST:Uee,LISTS_SET_INDEX_TOOLTIP_SET_FROM:Bee,LISTS_SET_INDEX_TOOLTIP_SET_LAST:Hee,LISTS_SET_INDEX_TOOLTIP_SET_RANDOM:Gee,LISTS_SORT_HELPURL:nte,LISTS_SORT_ORDER_ASCENDING:ote,LISTS_SORT_ORDER_DESCENDING:lte,LISTS_SORT_TITLE:ste,LISTS_SORT_TOOLTIP:ite,LISTS_SORT_TYPE_IGNORECASE:ute,LISTS_SORT_TYPE_NUMERIC:ate,LISTS_SORT_TYPE_TEXT:cte,LISTS_SPLIT_HELPURL:hte,LISTS_SPLIT_LIST_FROM_TEXT:dte,LISTS_SPLIT_TEXT_FROM_LIST:_te,LISTS_SPLIT_TOOLTIP_JOIN:pte,LISTS_SPLIT_TOOLTIP_SPLIT:Tte,LISTS_SPLIT_WITH_DELIMITER:fte,LOGIC_BOOLEAN_FALSE:kJ,LOGIC_BOOLEAN_HELPURL:bJ,LOGIC_BOOLEAN_TOOLTIP:wJ,LOGIC_BOOLEAN_TRUE:yJ,LOGIC_COMPARE_HELPURL:pJ,LOGIC_COMPARE_TOOLTIP_EQ:EJ,LOGIC_COMPARE_TOOLTIP_GT:IJ,LOGIC_COMPARE_TOOLTIP_GTE:OJ,LOGIC_COMPARE_TOOLTIP_LT:mJ,LOGIC_COMPARE_TOOLTIP_LTE:$J,LOGIC_COMPARE_TOOLTIP_NEQ:gJ,LOGIC_HUE:LK,LOGIC_NEGATE_HELPURL:vJ,LOGIC_NEGATE_TITLE:NJ,LOGIC_NEGATE_TOOLTIP:xJ,LOGIC_NULL:DJ,LOGIC_NULL_HELPURL:MJ,LOGIC_NULL_TOOLTIP:PJ,LOGIC_OPERATION_AND:LJ,LOGIC_OPERATION_HELPURL:SJ,LOGIC_OPERATION_OR:CJ,LOGIC_OPERATION_TOOLTIP_AND:RJ,LOGIC_OPERATION_TOOLTIP_OR:AJ,LOGIC_TERNARY_CONDITION:BJ,LOGIC_TERNARY_HELPURL:FJ,LOGIC_TERNARY_IF_FALSE:HJ,LOGIC_TERNARY_IF_TRUE:UJ,LOGIC_TERNARY_TOOLTIP:GJ,LOOPS_HUE:AK,MAC_OS:_re,MATH_ADDITION_SYMBOL:XJ,MATH_ARITHMETIC_HELPURL:rq,MATH_ARITHMETIC_TOOLTIP_ADD:nq,MATH_ARITHMETIC_TOOLTIP_DIVIDE:oq,MATH_ARITHMETIC_TOOLTIP_MINUS:sq,MATH_ARITHMETIC_TOOLTIP_MULTIPLY:iq,MATH_ARITHMETIC_TOOLTIP_POWER:lq,MATH_ATAN2_HELPURL:mZ,MATH_ATAN2_TITLE:$Z,MATH_ATAN2_TOOLTIP:IZ,MATH_CHANGE_HELPURL:Mq,MATH_CHANGE_TITLE:Dq,MATH_CHANGE_TITLE_ITEM:Pq,MATH_CHANGE_TOOLTIP:Fq,MATH_CONSTANT_HELPURL:Lq,MATH_CONSTANT_TOOLTIP:Aq,MATH_CONSTRAIN_HELPURL:uZ,MATH_CONSTRAIN_TITLE:hZ,MATH_CONSTRAIN_TOOLTIP:dZ,MATH_DIVISION_SYMBOL:YJ,MATH_HUE:CK,MATH_IS_DIVISIBLE_BY:kq,MATH_IS_EVEN:Cq,MATH_IS_NEGATIVE:yq,MATH_IS_ODD:vq,MATH_IS_POSITIVE:bq,MATH_IS_PRIME:Nq,MATH_IS_TOOLTIP:wq,MATH_IS_WHOLE:xq,MATH_MODULO_HELPURL:lZ,MATH_MODULO_TITLE:aZ,MATH_MODULO_TOOLTIP:cZ,MATH_MULTIPLICATION_SYMBOL:KJ,MATH_NUMBER_HELPURL:VJ,MATH_NUMBER_TOOLTIP:WJ,MATH_ONLIST_HELPURL:Wq,MATH_ONLIST_OPERATOR_AVERAGE:qq,MATH_ONLIST_OPERATOR_MAX:jq,MATH_ONLIST_OPERATOR_MEDIAN:Qq,MATH_ONLIST_OPERATOR_MIN:Yq,MATH_ONLIST_OPERATOR_MODE:tZ,MATH_ONLIST_OPERATOR_RANDOM:iZ,MATH_ONLIST_OPERATOR_STD_DEV:nZ,MATH_ONLIST_OPERATOR_SUM:Xq,MATH_ONLIST_TOOLTIP_AVERAGE:Zq,MATH_ONLIST_TOOLTIP_MAX:Jq,MATH_ONLIST_TOOLTIP_MEDIAN:eZ,MATH_ONLIST_TOOLTIP_MIN:Kq,MATH_ONLIST_TOOLTIP_MODE:rZ,MATH_ONLIST_TOOLTIP_RANDOM:oZ,MATH_ONLIST_TOOLTIP_STD_DEV:sZ,MATH_ONLIST_TOOLTIP_SUM:zq,MATH_POWER_SYMBOL:jJ,MATH_RANDOM_FLOAT_HELPURL:pZ,MATH_RANDOM_FLOAT_TITLE_RANDOM:EZ,MATH_RANDOM_FLOAT_TOOLTIP:gZ,MATH_RANDOM_INT_HELPURL:_Z,MATH_RANDOM_INT_TITLE:fZ,MATH_RANDOM_INT_TOOLTIP:TZ,MATH_ROUND_HELPURL:Bq,MATH_ROUND_OPERATOR_ROUND:Hq,MATH_ROUND_OPERATOR_ROUNDDOWN:Vq,MATH_ROUND_OPERATOR_ROUNDUP:Gq,MATH_ROUND_TOOLTIP:Uq,MATH_SINGLE_HELPURL:aq,MATH_SINGLE_OP_ABSOLUTE:hq,MATH_SINGLE_OP_ROOT:cq,MATH_SINGLE_TOOLTIP_ABS:dq,MATH_SINGLE_TOOLTIP_EXP:pq,MATH_SINGLE_TOOLTIP_LN:fq,MATH_SINGLE_TOOLTIP_LOG10:Tq,MATH_SINGLE_TOOLTIP_NEG:_q,MATH_SINGLE_TOOLTIP_POW10:Eq,MATH_SINGLE_TOOLTIP_ROOT:uq,MATH_SUBTRACTION_SYMBOL:zJ,MATH_TRIG_ACOS:eq,MATH_TRIG_ASIN:QJ,MATH_TRIG_ATAN:tq,MATH_TRIG_COS:qJ,MATH_TRIG_HELPURL:gq,MATH_TRIG_SIN:JJ,MATH_TRIG_TAN:ZJ,MATH_TRIG_TOOLTIP_ACOS:Sq,MATH_TRIG_TOOLTIP_ASIN:Oq,MATH_TRIG_TOOLTIP_ATAN:Rq,MATH_TRIG_TOOLTIP_COS:$q,MATH_TRIG_TOOLTIP_SIN:mq,MATH_TRIG_TOOLTIP_TAN:Iq,MOVE_BLOCK:hre,NEW_COLOUR_VARIABLE:ij,NEW_NUMBER_VARIABLE:sj,NEW_STRING_VARIABLE:nj,NEW_VARIABLE:rj,NEW_VARIABLE_TITLE:lj,NEW_VARIABLE_TYPE_TITLE:oj,OPTION_KEY:mre,ORDINAL_NUMBER_SUFFIX:$te,PASTE_SHORTCUT:Sre,PROCEDURES_ALLOW_STATEMENTS:Wte,PROCEDURES_BEFORE_PARAMS:bte,PROCEDURES_CALLNORETURN_HELPURL:zte,PROCEDURES_CALLNORETURN_TOOLTIP:Yte,PROCEDURES_CALLRETURN_HELPURL:Kte,PROCEDURES_CALLRETURN_TOOLTIP:jte,PROCEDURES_CALL_BEFORE_PARAMS:yte,PROCEDURES_CALL_DISABLED_DEF_WARNING:kte,PROCEDURES_CREATE_DO:tre,PROCEDURES_DEFNORETURN_COMMENT:Dte,PROCEDURES_DEFNORETURN_DO:wte,PROCEDURES_DEFNORETURN_HELPURL:vte,PROCEDURES_DEFNORETURN_PROCEDURE:xte,PROCEDURES_DEFNORETURN_TITLE:Nte,PROCEDURES_DEFNORETURN_TOOLTIP:Mte,PROCEDURES_DEFRETURN_COMMENT:Hte,PROCEDURES_DEFRETURN_DO:Ute,PROCEDURES_DEFRETURN_HELPURL:Pte,PROCEDURES_DEFRETURN_PROCEDURE:Bte,PROCEDURES_DEFRETURN_RETURN:Gte,PROCEDURES_DEFRETURN_TITLE:Fte,PROCEDURES_DEFRETURN_TOOLTIP:Vte,PROCEDURES_DEF_DUPLICATE_WARNING:Xte,PROCEDURES_HIGHLIGHT_DEF:ere,PROCEDURES_HUE:kK,PROCEDURES_IFRETURN_HELPURL:nre,PROCEDURES_IFRETURN_TOOLTIP:rre,PROCEDURES_IFRETURN_WARNING:sre,PROCEDURES_MUTATORARG_TITLE:Zte,PROCEDURES_MUTATORARG_TOOLTIP:Qte,PROCEDURES_MUTATORCONTAINER_TITLE:Jte,PROCEDURES_MUTATORCONTAINER_TOOLTIP:qte,REDO:Mk,REMOVE_COMMENT:FK,RENAME_VARIABLE:ej,RENAME_VARIABLE_TITLE:tj,SHORTCUTS_CODE_NAVIGATION:Cre,SHORTCUTS_EDITING:Are,SHORTCUTS_GENERAL:Lre,TEXTS_HUE:vK,TEXT_APPEND_HELPURL:bZ,TEXT_APPEND_TITLE:yZ,TEXT_APPEND_TOOLTIP:wZ,TEXT_APPEND_VARIABLE:kZ,TEXT_CHANGECASE_HELPURL:hQ,TEXT_CHANGECASE_OPERATOR_LOWERCASE:fQ,TEXT_CHANGECASE_OPERATOR_TITLECASE:TQ,TEXT_CHANGECASE_OPERATOR_UPPERCASE:_Q,TEXT_CHANGECASE_TOOLTIP:dQ,TEXT_CHARAT_FIRST:JZ,TEXT_CHARAT_FROM_END:jZ,TEXT_CHARAT_FROM_START:KZ,TEXT_CHARAT_HELPURL:zZ,TEXT_CHARAT_LAST:qZ,TEXT_CHARAT_RANDOM:ZZ,TEXT_CHARAT_TAIL:QZ,TEXT_CHARAT_TITLE:YZ,TEXT_CHARAT_TOOLTIP:eQ,TEXT_COUNT_HELPURL:xQ,TEXT_COUNT_MESSAGE0:NQ,TEXT_COUNT_TOOLTIP:bQ,TEXT_CREATE_JOIN_ITEM_TITLE_ITEM:NZ,TEXT_CREATE_JOIN_ITEM_TOOLTIP:xZ,TEXT_CREATE_JOIN_TITLE_JOIN:CZ,TEXT_CREATE_JOIN_TOOLTIP:vZ,TEXT_GET_SUBSTRING_END_FROM_END:aQ,TEXT_GET_SUBSTRING_END_FROM_START:lQ,TEXT_GET_SUBSTRING_END_LAST:cQ,TEXT_GET_SUBSTRING_HELPURL:rQ,TEXT_GET_SUBSTRING_INPUT_IN_TEXT:nQ,TEXT_GET_SUBSTRING_START_FIRST:oQ,TEXT_GET_SUBSTRING_START_FROM_END:iQ,TEXT_GET_SUBSTRING_START_FROM_START:sQ,TEXT_GET_SUBSTRING_TAIL:uQ,TEXT_GET_SUBSTRING_TOOLTIP:tQ,TEXT_INDEXOF_HELPURL:HZ,TEXT_INDEXOF_OPERATOR_FIRST:WZ,TEXT_INDEXOF_OPERATOR_LAST:XZ,TEXT_INDEXOF_TITLE:VZ,TEXT_INDEXOF_TOOLTIP:GZ,TEXT_ISEMPTY_HELPURL:FZ,TEXT_ISEMPTY_TITLE:BZ,TEXT_ISEMPTY_TOOLTIP:UZ,TEXT_JOIN_HELPURL:RZ,TEXT_JOIN_TITLE_CREATEWITH:LZ,TEXT_JOIN_TOOLTIP:AZ,TEXT_LENGTH_HELPURL:MZ,TEXT_LENGTH_TITLE:DZ,TEXT_LENGTH_TOOLTIP:PZ,TEXT_PRINT_HELPURL:IQ,TEXT_PRINT_TITLE:OQ,TEXT_PRINT_TOOLTIP:SQ,TEXT_PROMPT_HELPURL:RQ,TEXT_PROMPT_TOOLTIP_NUMBER:CQ,TEXT_PROMPT_TOOLTIP_TEXT:vQ,TEXT_PROMPT_TYPE_NUMBER:AQ,TEXT_PROMPT_TYPE_TEXT:LQ,TEXT_REPLACE_HELPURL:kQ,TEXT_REPLACE_MESSAGE0:yQ,TEXT_REPLACE_TOOLTIP:wQ,TEXT_REVERSE_HELPURL:DQ,TEXT_REVERSE_MESSAGE0:MQ,TEXT_REVERSE_TOOLTIP:PQ,TEXT_TEXT_HELPURL:OZ,TEXT_TEXT_TOOLTIP:SZ,TEXT_TRIM_HELPURL:pQ,TEXT_TRIM_OPERATOR_BOTH:gQ,TEXT_TRIM_OPERATOR_LEFT:mQ,TEXT_TRIM_OPERATOR_RIGHT:$Q,TEXT_TRIM_TOOLTIP:EQ,TODAY:DK,UNDO:wk,UNKNOWN:pre,UNNAMED_KEY:MK,VARIABLES_DEFAULT_NAME:wK,VARIABLES_DYNAMIC_HUE:yK,VARIABLES_GET_CREATE_SET:Ste,VARIABLES_GET_HELPURL:Ite,VARIABLES_GET_TOOLTIP:Ote,VARIABLES_HUE:bK,VARIABLES_SET:Lte,VARIABLES_SET_CREATE_GET:Cte,VARIABLES_SET_HELPURL:Rte,VARIABLES_SET_TOOLTIP:Ate,VARIABLE_ALREADY_EXISTS:aj,VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE:cj,VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER:uj,WINDOWS:dre,WORKSPACE_ARIA_LABEL:ore,WORKSPACE_COMMENT_DEFAULT_TEXT:ire},Symbol.toStringTag,{value:"Module"})),kre="ARG";function hf(t){return`${kre}${t}`}function YI(t,s,r){const i=Math.max(0,r.min??0);r.variadic?s=Math.max(i,s):s=i;const l=r.variadic?r.max??0:i;r.variadic&&l>0&&(s=Math.min(s,l));const c=[];for(let h=0;h<512;h++){const _=t.getInput(hf(h));if(!_)break;c[h]=_.connection?.targetConnection??null}for(let h=0;h<512;h++){const _=hf(h);if(!t.getInput(_))break;t.removeInput(_,!0)}for(let h=0;h<s;h++)t.appendValueInput(hf(h));for(let h=0;h<s;h++){const _=c[h];if(!_)continue;const T=t.getInput(hf(h))?.connection;if(T)try{T.isConnected()&&T.disconnect(),T.connect(_)}catch{}}const u=t.workspace;u?.render&&u.render()}const rm="frockly_fn_dynargs";function Ha(t,s,r){const l=t.getField(s)?.getSvgRoot?.();l&&(l.style.display=r?"":"none")}function wre(t){return t.getInput("FN_HEADER")||t.appendDummyInput("FN_HEADER"),t.getInput("FN_HEADER")}let ix=class extends Bl{onClick;constructor(s,r){super(s),this.onClick=r}onMouseDown_(s){s.preventDefault(),s.stopPropagation(),this.onClick()}};function nm(t){const s=t.type.replace(/^frockly_/,"");return zl(s)??{name:s,min:1,variadic:!1,max:0,step:1}}function Dk(t,s,r){return Math.max(s,Math.min(r,t))}function fc(t){return Math.max(0,Number(t?.min??0))}function Pk(t){const s=Number(t?.max??0);return s>0?s:50}function Mre(t){const s=Number(t?.step??1);return Number.isFinite(s)&&s>0?s:1}function Dre(t,s){t.getInput("DYNCTRL")&&t.removeInput("DYNCTRL",!0);const r=wre(t);if(!s.variadic){Ha(t,"BTN_MINUS",!1),Ha(t,"BTN_PLUS",!1),Ha(t,"ARGC_LABEL",!1);return}t.getField("BTN_MINUS")||(r.appendField(new Bl(" "),"SP_DYN"),r.appendField(new ix("",()=>ox(t,s,-1)),"BTN_MINUS"),r.appendField(new Bl(""),"ARGC_LABEL"),r.appendField(new ix("+",()=>ox(t,s,1)),"BTN_PLUS")),Ha(t,"BTN_MINUS",!0),Ha(t,"BTN_PLUS",!0),Ha(t,"ARGC_LABEL",!0)}function Fk(t,s){if(!s.variadic)return;const r=fc(s),i=t.__argc??r;t.getField("ARGC_LABEL")?.setValue(String(i))}function ox(t,s,r){const i=fc(s),l=Pk(s),c=Mre(s),u=t.__argc??i,h=Dk(u+r*c,i,l);h!==u&&(kt.setGroup(!0),t.__argc=h,YI(t,h,s),Fk(t,s),t.render?.(),kt.setGroup(!1))}function lx(t,s,r){const i=fc(s),l=Pk(s);let c=r;s.variadic?c=Dk(c,i,l):c=i,t.__argc=c,Dre(t,s),YI(t,c,s),Fk(t,s),t.render?.()}function Pre(){const t=Ur;if(!t?.mutators_?.[rm]&&!t?.extensions_?.[rm])try{Ur.registerMutator(rm,{saveExtraState(){const s=nm(this),r=fc(s);return{argc:this.__argc??r}},loadExtraState(s){const r=nm(this),i=fc(r),l=Number.isFinite(Number(s?.argc))?Number(s.argc):i;lx(this,r,l)}},function(){const s=nm(this);lx(this,s,fc(s))})}catch(s){if(String(s?.message??s).includes("already registered"))return;throw s}}const ar=Zu,Bs=ar;function Fre(t){return`"${(t??"").replace(/"/g,'""')}"`}function Bre(){if(!ar?.forBlock)throw new Error("javascriptGenerator.forBlock is missing (Blockly version/import mismatch)");ar.forBlock.basic_start=function(s){return`=${ar.valueToCode(s,"EXPR",It.NONE)||""}
`},ar.forBlock.basic_number=function(s){return[String(s.getFieldValue("NUM")??"").trim(),It.ATOMIC]},ar.forBlock.basic_string=function(s){const r=String(s.getFieldValue("STR")??"");return[Fre(r),It.ATOMIC]},ar.forBlock.basic_cell=function(s){return[String(s.getFieldValue("CELL")??"").trim(),It.ATOMIC]},ar.forBlock.basic_range=function(s){return[String(s.getFieldValue("RANGE")??"").trim(),It.ATOMIC]},ar.forBlock.basic_arith=function(s){const r=String(s.getFieldValue("OP")??"+"),i=r==="*"||r==="/"?It.MULTIPLICATION:It.ADDITION,l=ar.valueToCode(s,"A",i)||"",c=ar.valueToCode(s,"B",i)||"";return[`${l}${r}${c}`,i]},ar.forBlock.basic_cmp=function(s){const r=String(s.getFieldValue("OP")??"="),i=ar.valueToCode(s,"A",It.RELATIONAL)||"",l=ar.valueToCode(s,"B",It.RELATIONAL)||"";return[`${i}${r}${l}`,It.RELATIONAL]},ar.forBlock.basic_paren=function(s){return[`(${ar.valueToCode(s,"INNER",It.NONE)||""})`,It.ATOMIC]},ar.forBlock.basic_var=function(s){return[String(s.getFieldValue("VAR_NAME")??"").trim(),It.ATOMIC]},ar.forBlock.basic_raw=function(s){return[String(s.getFieldValue("RAW")??""),It.ATOMIC]},ar.forBlock.basic_raw_call=function(s){const r=(s.getFieldValue("FN")||"FOOBAR").trim(),i=[];for(let l=0;l<50&&s.getInput(`ARG${l}`);l++)i.push(ar.valueToCode(s,`ARG${l}`,It.NONE)||"");for(;i.length&&i[i.length-1]==="";)i.pop();return[`${r}(${i.join(",")})`,It.FUNCTION_CALL]};function t(s){const r=t$?.inputTypes?.VALUE,i=s.inputList.filter(l=>l.type===r).map(l=>l.name);for(const l of i){const c=(ar.valueToCode(s,l,It.NONE)??"").trim();if(c)return c}return""}ar.forBlock.fn_root=function(s){const r=t(s);return r?`${r}
`:""}}function Ure(t){const s=t.type.startsWith("frockly_")?t.type.slice(8):t.type;return zl(s)?.localizedName??s}function Hre(t){return(t??"").replace(/\s+/g," ").trim()}function Gre(t,s=90){const r=Hre(t);return r.length>s?r.slice(0,s-1)+"":r}function Vre(t){const s=Bs.blockToCode(t),r=Array.isArray(s)?s[0]:s;return GP(String(r??""))}function Wre(){Ur?.extensions_?.frockly_fn_ui||Ur.register("frockly_fn_ui",function(){const s=this.getInput("FN_HEADER")??this.appendDummyInput("FN_HEADER");this.getField("FN_NAME")||s.insertFieldAt(0,Ure(this),"FN_NAME");const r=()=>{let i="";try{i=Vre(this)}catch{i="(preview error)"}this.__frocklyCollapsedText="="+Gre(i)};this.setOnChange(i=>{if(!i||i.blockId!==this.id)return;if(i.type===kt.BLOCK_CHANGE&&i.element==="collapsed"){this.isCollapsed?.()??this.collapsed??!1?r():this.__frocklyCollapsedText=void 0,setTimeout(()=>this.workspace?.render?.(),0);return}if(!(this.isCollapsed?.()??this.collapsed??!1))return;(i.type===kt.BLOCK_MOVE||i.type===kt.BLOCK_CREATE||i.type===kt.BLOCK_DELETE||i.type===kt.BLOCK_CHANGE&&i.element!=="field")&&(r(),setTimeout(()=>this.workspace?.render?.(),0))})})}async function Xre(){Pre(),Wre();const t=await mI();gI(t),U1(t);const s=new Set(["LET","LAMBDA"]);for(const r of t){const i=r.name.toUpperCase();if(s.has(i))continue;const l=`frockly_${i}`;r$(l,i)}}async function zre(t){const s=await mI(t);gI(s)}const Yre=270,ax=210,cx=60,Kre=30,jre=0,Jre=180,ux=120,qre=100,Zre=40;let df=class extends Bl{onClick;constructor(s,r){super(s),this.onClick=r}onMouseDown_(s){s.preventDefault(),s.stopPropagation(),this.onClick()}};function Bk(t){const s=t.lastIndexOf("!");return s>=0?{prefix:t.slice(0,s+1),core:t.slice(s+1)}:{prefix:"",core:t}}function g$(t){const s=t.trim().match(/^(\$?)([A-Z]+)(\$?)(\d+)$/);return s?{colAbs:!!s[1],col:s[2],rowAbs:!!s[3],row:s[4]}:null}function Qre(t){return`${t.colAbs?"$":""}${t.col}${t.rowAbs?"$":""}${t.row}`}function nc(t,s){const{prefix:r,core:i}=Bk(t);if(i.includes(":")){const[c,u]=i.split(":");return`${r}${nc(c,s).replace(/^.*!/,"")}:${nc(u,s).replace(/^.*!/,"")}`}const l=g$(i);return l?(s==="col"?l.colAbs=!l.colAbs:l.rowAbs=!l.rowAbs,`${r}${Qre(l)}`):t}function ene(t){const{core:s}=Bk(t);if(s.includes(":")){const[i]=s.split(":"),l=g$(i);return{col:!!l?.colAbs,row:!!l?.rowAbs}}const r=g$(s);return{col:!!r?.colAbs,row:!!r?.rowAbs}}function $o(t,s){const r=String(t.getFieldValue(s)??""),i=ene(r),l=t.getField("ABS_COL"),c=t.getField("ABS_ROW");l?.setValue(`${i.col?"":""}`),c?.setValue(`${i.row?"":""}`)}function tne(t){const s=Xr(t);Yt.basic_start={init:function(){this.appendValueInput("EXPR").setCheck(null).appendField("="),this.setInputsInline(!0),this.setColour(Yre),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!1),typeof this.setHat=="function"&&this.setHat("cap"),this.setTooltip(s(Qe.TOOLTIP_START))}},Yt.basic_number={init:function(){this.appendDummyInput().appendField(s(Qe.NUMBER),"LABEL").appendField(new Bi("1"),"NUM"),this.setOutput(!0,null),this.setColour(cx),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip(s(Qe.TOOLTIP_NUMBER))}},Yt.basic_string={init:function(){this.appendDummyInput().appendField(s(Qe.TEXT),"LABEL").appendField(new Bi("text"),"STR"),this.setOutput(!0,null),this.setColour(cx),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip(s(Qe.TOOLTIP_STRING))}},Yt.basic_cell={init:function(){const r=new Bi("A1",i=>(queueMicrotask(()=>$o(this,"CELL")),i));this.appendDummyInput().appendField(s(Qe.CELL),"LABEL").appendField(r,"CELL"),this.appendDummyInput("ABS_CTRL").setAlign(t$.Align.RIGHT).appendField(new df("",()=>{const i=String(this.getFieldValue("CELL")??""),l=nc(i,"col");this.setFieldValue(l,"CELL"),$o(this,"CELL")}),"ABS_COL").appendField(new df("",()=>{const i=String(this.getFieldValue("CELL")??""),l=nc(i,"row");this.setFieldValue(l,"CELL"),$o(this,"CELL")}),"ABS_ROW"),this.setOutput(!0,null),this.setColour(ax),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip(s(Qe.TOOLTIP_CELL)),$o(this,"CELL")}},Yt.basic_range={init:function(){const r=new Bi("A1:B2",i=>(queueMicrotask(()=>$o(this,"RANGE")),i));this.appendDummyInput().appendField(s(Qe.RANGE),"LABEL").appendField(r,"RANGE"),this.appendDummyInput("ABS_CTRL").setAlign(t$.Align.RIGHT).appendField(new df("",()=>{const i=String(this.getFieldValue("RANGE")??""),l=nc(i,"col");this.setFieldValue(l,"RANGE"),$o(this,"RANGE")}),"ABS_COL").appendField(new df("",()=>{const i=String(this.getFieldValue("RANGE")??""),l=nc(i,"row");this.setFieldValue(l,"RANGE"),$o(this,"RANGE")}),"ABS_ROW"),this.setOutput(!0,null),this.setColour(ax),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip(s(Qe.TOOLTIP_RANGE)),$o(this,"RANGE")}},Yt.basic_arith={init:function(){this.appendValueInput("A").setCheck(null),this.appendDummyInput().appendField(new G0([["+","+"],["-","-"],["*","*"],["/","/"],["^","^"],["&","&"]]),"OP"),this.appendValueInput("B").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(Kre),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip(s(Qe.TOOLTIP_ARITH))}},Yt.basic_cmp={init:function(){this.appendValueInput("A").setCheck(null),this.appendDummyInput().appendField(new G0([["=","="],["<>","<>"],["<","<"],["<=","<="],[">",">"],[">=",">="]]),"OP"),this.appendValueInput("B").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(jre),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip(s(Qe.TOOLTIP_CMP))}},Yt.basic_paren={init:function(){this.appendValueInput("INNER").setCheck(null).appendField("("),this.appendDummyInput().appendField(")"),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(Jre),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip(s(Qe.TOOLTIP_PAREN))}},Yt.basic_raw={init:function(){this.appendDummyInput().appendField("RAW").appendField(new Bi(""),"RAW"),this.setOutput(!0,null),this.setColour(ux),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip("")}},Yt.basic_raw_call={init:function(){this.appendDummyInput().appendField("RAWFN").appendField(new Bi("FOOBAR"),"FN"),this.appendValueInput("ARG0").setCheck(null),this.setInputsInline(!0),this.setOutput(!0,null),this.setColour(ux),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip("")}},Yt.basic_bool={init:function(){this.appendDummyInput().appendField(new G0([["TRUE","TRUE"],["FALSE","FALSE"]]),"BOOL"),this.setOutput(!0,null),this.setColour(qre),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip(s("TOOLTIP_BOOL"))}},Yt.basic_var={init:function(){this.appendDummyInput().appendField(s("NAME"),"LABEL").appendField(new Bi("x"),"VAR_NAME"),this.setOutput(!0,"VAR"),this.setColour(Zre),Ur.apply("frockly_basic_ui",this,!1),this.setTooltip("LET / LAMBDA / ")}}}function rne(t,s){const r=Xr(s);switch(t){case"basic_number":return r(Qe.NUMBER);case"basic_string":return r(Qe.TEXT);case"basic_cell":return r(Qe.CELL);case"basic_range":return r(Qe.RANGE);case"basic_var":return r("NAME")}return null}function nne(){Bs.forBlock.fn_root=function(t){String(t.getFieldValue("NAME")??"").trim();const s=[];let r=t.getInputTargetBlock("PARAMS");for(;r;){if(r.type==="fn_param"){const c=String(r.getFieldValue("NAME")??"").trim();c&&s.push(c)}r=r.getNextBlock()}const i=Bs.valueToCode(t,"BODY",It.NONE)||"";return[`LAMBDA(${[...s,i].join(",")})`,It.FUNCTION_CALL]},Bs.forBlock.fn_param=function(t){return["",It.ATOMIC]},Bs.forBlock.fn_call=function(t){const s=String(t.getFieldValue("FN")??"").trim()||"A",r=[];for(let i=0;i<50&&t.getInput(`ARG${i}`);i++)r.push(Bs.valueToCode(t,`ARG${i}`,It.NONE)||"");for(;r.length&&r[r.length-1]==="";)r.pop();return[`${s}(${r.join(",")})`,It.FUNCTION_CALL]}}function sne(t){return(t??"").replace(/\s+/g," ").trim()}function ine(t,s=90){const r=sne(t);return r.length>s?r.slice(0,s-1)+"ELLIPSIS":r}function one(t){const s=Bs.blockToCode(t),r=Array.isArray(s)?s[0]:s;return String(r??"")}function lne(){try{Ur.register("frockly_basic_ui",function(){const t=()=>{let s="";try{s=one(this)}catch{s="(preview error)"}this.__frocklyCollapsedText=ine(s)};this.setOnChange(s=>{if(!s||s.blockId!==this.id)return;if(s.type===kt.BLOCK_CHANGE&&s.element==="collapsed"){this.isCollapsed?.()??this.collapsed??!1?t():this.__frocklyCollapsedText=void 0,setTimeout(()=>this.workspace?.render?.(),0);return}if(!(this.isCollapsed?.()??this.collapsed??!1))return;(s.type===kt.BLOCK_MOVE||s.type===kt.BLOCK_CREATE||s.type===kt.BLOCK_DELETE||s.type===kt.BLOCK_CHANGE&&s.element!=="field")&&(t(),setTimeout(()=>this.workspace?.render?.(),0))})})}catch(t){if(String(t?.message??t).includes("already registered"))return;throw t}}function ane(t){lne(),tne(t),nne(),Bre()}const cne=150;function une(){Yt.fn_root={init:function(){this.appendDummyInput().appendField("FUNC").appendField(new Bi("A"),"NAME"),this.appendStatementInput("PARAMS").setCheck("FN_PARAM").appendField("params"),this.appendValueInput("BODY").setCheck(null).appendField("body"),this.setColour(cne),this.setDeletable(!1),this.setMovable(!1),this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!1),typeof this.setHat=="function"&&this.setHat("cap")}}}const hne=150;function dne(){Yt.fn_param={init:function(){this.appendDummyInput().appendField("param").appendField(new Bi("x"),"NAME"),this.setPreviousStatement(!0,"FN_PARAM"),this.setNextStatement(!0,"FN_PARAM"),this.setColour(hne),this.setTooltip("Function parameter")}}}function _ne(){Yt.fn_call||(Yt.fn_call={init:function(){this.appendDummyInput("HEAD").appendField("call").appendField(new Bl("???"),"FN_NAME"),this.setInputsInline(!0),this.setOutput(!0),this.fnId_="",this.params_=[],m$(this,[]),this.setColour(210),this.setTooltip(""),this.setHelpUrl("")},mutationToDom:function(){const t=tc.xml.createElement("mutation");t.setAttribute("fnId",String(this.fnId_??""));const s=this.params_??[];return t.setAttribute("params",JSON.stringify(s)),t},domToMutation:function(t){const s=t.getAttribute("fnId")??"",r=t.getAttribute("params")??"[]";let i=[];try{const l=JSON.parse(r);Array.isArray(l)&&(i=l.map(c=>String(c)))}catch{i=[]}this.fnId_=s,this.params_=i,m$(this,i)}})}function m$(t,s){for(let r=0;r<50;r++){const i=`ARG${r}`;t.getInput(i)&&t.removeInput(i,!0)}t.getInput("TAIL")&&t.removeInput("TAIL",!0);for(let r=0;r<s.length;r++)t.appendValueInput(`ARG${r}`).appendField(r===0?"(":",").appendField(s[r]?`${s[r]}=`:"");s.length>0&&t.appendDummyInput("TAIL").appendField(")")}function sm(t,s){const r=s?.id??"",i=s?.name??"???",l=s?.params??[];t.fnId_=r,t.params_=l;const c=t.getField("FN_NAME");c&&c.setValue(i),m$(t,l)}function fne(){const t=B1?.prototype;if(!t){console.warn("[Frockly] BlockSvg prototype not found");return}if(t.__frocklyPatchedCollapsedSummary)return;t.__frocklyPatchedCollapsedSummary=!0;const r=["getCollapsedText","getCollapsedText_","getSummaryText","getSummaryText_"].filter(i=>typeof t[i]=="function");for(const i of r){const l=t[i];t[i]=function(...c){const u=this.__frocklyCollapsedText;return typeof u=="string"&&u.length?u:l.apply(this,c)}}}function Tne(){const t=CP?.prototype;if(!t||t.__frocklyPatchedTempField)return;t.__frocklyPatchedTempField=!0;const s=t.setValue;typeof s=="function"&&(t.setValue=function(r){if(this?.name==="_TEMP_COLLAPSED_FIELD"){const l=(this.sourceBlock_??this.getSourceBlock?.())?.__frocklyCollapsedText;typeof l=="string"&&l.length&&(r=l)}return s.call(this,r)})}function pne(t){return(t??"").replace(/\s+/g," ").trim()}function Ene(t,s=90){const r=pne(t);return r.length>s?r.slice(0,s-1)+"ELLIPSIS":r}function gne(t){const s=Bs.blockToCode(t),r=Array.isArray(s)?s[0]:s;return String(r??"")}function mne(){try{Ur.register("frockly_syntax_ui",function(){const t=()=>{let s="";try{s=gne(this)}catch{s="(preview error)"}this.__frocklyCollapsedText="="+Ene(s)};this.setOnChange(s=>{if(!s||s.blockId!==this.id)return;if(s.type===kt.BLOCK_CHANGE&&s.element==="collapsed"){this.isCollapsed?.()??this.collapsed??!1?t():this.__frocklyCollapsedText=void 0,setTimeout(()=>this.workspace?.render?.(),0);return}if(!(this.isCollapsed?.()??this.collapsed??!1))return;(s.type===kt.BLOCK_MOVE||s.type===kt.BLOCK_CREATE||s.type===kt.BLOCK_DELETE||s.type===kt.BLOCK_CHANGE&&s.element!=="field")&&(t(),setTimeout(()=>this.workspace?.render?.(),0))})})}catch(t){if(String(t?.message??t).includes("already registered"))return;throw t}}function $ne(){mne(),!Yt.frockly_LET&&(e$([{type:"frockly_LAMBDA",message0:"LAMBDA",args0:[],output:null,colour:200,mutator:"frockly_fn_dynargs",extensions:["frockly_syntax_ui"]}]),e$([{type:"frockly_LET",message0:"",args0:[],output:null,colour:200,mutator:"frockly_let_dynpairs",extensions:["frockly_syntax_ui"]}]))}const Nl=Zu;function Ine(){One(),Sne()}function One(){Nl.forBlock.frockly_LET=function(t){const s=[];let r=0;for(;t.getInput(`VAR${r}`);){const l=Nl.valueToCode(t,`VAR${r}`,It.NONE)||"",c=Nl.valueToCode(t,`VAL${r}`,It.NONE)||"";(l||c)&&s.push(l,c),r++}const i=Nl.valueToCode(t,"RESULT",It.NONE)||"";return[`LET(${[...s,i].join(",")})`,It.FUNCTION_CALL]}}function Sne(){Nl.forBlock.frockly_LAMBDA=function(t){const s=[];let r=0;for(;t.getInput(`ARG${r}`);){const l=(Nl.valueToCode(t,`ARG${r}`,It.NONE)||"").trim();l&&s.push(l),r++}let i="";return t.getInput("BODY")&&(i=(Nl.valueToCode(t,"BODY",It.NONE)||"").trim()),!i&&s.length>0&&(i=s.pop()),i?[`LAMBDA(${[...s,i].join(",")})`,It.FUNCTION_CALL]:["",It.ATOMIC]}}function Rne(){$ne(),Ine()}let hx=!1;function Lne(){hx||(hx=!0,Ur.registerMutator("frockly_let_dynpairs",{mutationToDom(){const t=tc.xml.createElement("mutation");return t.setAttribute("pairs",String(this.__pairs??1)),t},domToMutation(t){this.__pairs=Math.max(1,Number(t.getAttribute("pairs")||1)),$$(this)}},function(){this.__pairs=1,$$(this)}))}class dx extends Bl{onClick;constructor(s,r){super(s),this.onClick=r}onMouseDown_(s){s.preventDefault(),s.stopPropagation(),this.onClick()}}function Ane(t){return t.getInput("FN_HEADER")||t.appendDummyInput("FN_HEADER").appendField("LET"),t.getInput("FN_HEADER")}function Cne(t){const s=Ane(t);t.getField("LET_MINUS")||(s.appendField(new dx("",()=>_x(t,-1)),"LET_MINUS"),s.appendField(new Bl(String(t.__pairs??1)),"LET_COUNT"),s.appendField(new dx("+",()=>_x(t,1)),"LET_PLUS"))}function vne(t){t.getField("LET_COUNT")?.setValue(String(t.__pairs??1))}function _x(t,s){const r=t.__pairs??1,i=Math.max(1,r+s);i!==r&&(kt.setGroup(!0),t.__pairs=i,$$(t),vne(t),t.render?.(),kt.setGroup(!1))}function $$(t){Cne(t);let s=0;for(;t.getInput(`VAR${s}`);)t.removeInput(`VAR${s}`),t.removeInput(`VAL${s}`),s++;const r=t.__pairs??1;for(let i=0;i<r;i++)t.appendValueInput(`VAR${i}`).setCheck("VAR"),t.appendValueInput(`VAL${i}`);if(t.getInput("RESULT")){const i=t.getInput("RESULT").connection?.targetConnection;t.removeInput("RESULT");const l=t.appendValueInput("RESULT");i&&l.connection?.connect(i)}else t.appendValueInput("RESULT");t.render?.()}let fx=!1;async function im(t){fne(),Tne();const s=B1;s.CORNER_RADIUS=0,s.NOTCH_HEIGHT=4,s.NOTCH_WIDTH=15,s.NOTCH_OFFSET_LEFT=6,t==="ja"?(Pv(OK),yn.UNDO="",yn.REDO="",yn.COPY="",yn.PASTE="",yn.DUPLICATE_BLOCK="",yn.DELETE_BLOCK="",yn.CUT=""):(Pv(yre),yn.UNDO=wk??"Undo",yn.REDO=Mk??"Redo",yn.COPY="Copy",yn.PASTE="Paste",yn.DUPLICATE_BLOCK=yk??"Duplicate",yn.DELETE_BLOCK=kk??"Delete",yn.CUT="Cut"),fx||(fx=!0,await Xre()),await zre(t),Lne(),une(),dne(),_ne(),ane(t),Rne()}const Dh=t=>t.wsRef.current?.getAllBlocks(!1)??[],Uk=t=>{const s=t.wsRef.current;return s?s.getAllBlocks(!1).find(r=>r.type==="basic_start")??null:null};function Nne(t){if(!t.wsRef.current)return null;const r=Uk(t);return r?(r.getChildren?.(!1)??[])[0]??null:null}function xne(t){const s=t.wsRef.current;if(!s)return[];const r=Nne(t);if(!r)return[];const i=[],l=[{id:r.id,d:0}],c=new Set;for(;l.length;){const{id:u,d:h}=l.shift();if(c.has(u))continue;c.add(u);const _=s.getBlockById(u);if(!_)continue;_.type!=="basic_start"&&(i[h]||(i[h]=[]),i[h].push(u));const f=_.getChildren?.(!1)??[];for(const T of f)T&&T.type!=="basic_start"&&l.push({id:T.id,d:h+1})}return i.filter(u=>u&&u.length)}const bne=t=>{let s=[],r=0;const i=()=>{const T=t.wsRef.current;T&&(T.render(),T.resize())},l=()=>{s=xne(t),r=Math.min(r,s.length)},c=(T,E)=>{const g=t.wsRef.current;if(!g)return;const S=s[T]??[];for(const R of S){const L=g.getBlockById(R);L&&L.type!=="basic_start"&&L.setCollapsed(E)}},u=()=>{if(!t.wsRef.current||(l(),s.length===0)||r>=s.length)return;const E=s.length-1-r;c(E,!0),r+=1,i()},h=()=>{if(!t.wsRef.current||(l(),s.length===0)||r<=0)return;const E=s.length-r;c(E,!1),r-=1,i()};return{collapseAll:()=>{if(t.wsRef.current){for(const E of Dh(t))E.type!=="basic_start"&&E.setCollapsed(!0);l(),r=s.length,i()}},expandAll:()=>{if(t.wsRef.current){for(const E of Dh(t))E.setCollapsed(!1);l(),r=0,i()}},expandStep:T=>T===1?u():h()}};function KI(t,s){return t.closest("g[data-id]")===s}function yne(t){const s=t.pathObject??null;if(!s)return[];const r=[],i=l=>{l&&l instanceof SVGPathElement&&r.push(l)};return i(s.svgPath),i(s.svgPathDark),i(s.svgPathLight),r}function xT(t){return t.getSvgRoot?.()??null}function Hk(t){const s=xT(t);if(!s)return[];const r=yne(t);if(r.length)return r;let i=Array.from(s.querySelectorAll("path.blocklyPath"));return i=i.filter(l=>KI(l,s)),i}function kne(t){const s=xT(t);if(!s)return[];let r=Array.from(s.querySelectorAll("text.blocklyText"));return r=r.filter(i=>KI(i,s)),r}function wne(t){const s=xT(t);if(!s)return[];let r=Array.from(s.querySelectorAll("g.blocklyIconGroup"));return r=r.filter(i=>KI(i,s)),r}function ah(t,s){const i=t.dataset?.frocklyExtraFilter??"",l=s||"",c=(i?i+" ":"")+l;t.style.filter=c.trim()}function om(t){const s=t;t.style.filter=(s.dataset?.frocklyExtraFilter??"").trim()}function Tx(t,s){const r=Hk(t);for(const i of r){const l=i;if(s){i.style.stroke="var(--frockly-path-stroke, rgba(255,255,255,0.95))",i.style.strokeWidth="3",i.style.paintOrder="stroke fill";const c=l.dataset??(l.dataset={});c.frocklyExtraFilter="drop-shadow(0 0 1px rgba(0,0,0,0.35))",ah(i,"")}else i.style.stroke="",i.style.strokeWidth="",i.style.paintOrder="",l.dataset&&(l.dataset.frocklyExtraFilter=""),ah(i,"")}}const Tc=(t,s)=>{const r=xT(t);if(!r)return;const i=Hk(t),l=kne(t),c=wne(t),u=(_,f)=>{for(const T of i)T.style.opacity=_,ah(T,f);for(const T of l)T.style.opacity=_,ah(T,f);for(const T of c)T.style.opacity=_,ah(T,f)},h=()=>{for(const _ of i)_.style.opacity="",om(_);for(const _ of l)_.style.opacity="",om(_);for(const _ of c)_.style.opacity="",om(_);r.style.pointerEvents=""};if(s==="normal"){h();return}if(s==="dim"){u("0.38","brightness(0.75) contrast(0.95)"),r.style.pointerEvents="none";return}u("0.0","brightness(0.5) contrast(0.9)"),r.style.pointerEvents="none"},Mne=t=>{let s=!1;const r=[];let i=new Set;const l=g=>{const S=g.getChildren?.(!1)??[];if(S.length===0)return S;const R=S.map(L=>{const N=L.getRelativeToSurfaceXY?.()??{x:0,y:0};return{k:L,x:N.x??0,y:N.y??0}});return R.sort((L,N)=>L.y-N.y||L.x-N.x),R.map(L=>L.k)},c=()=>{if(!t.wsRef.current)return null;const S=Uk(t);return S?l(S)[0]??S:null},u=()=>{if(t.wsRef.current)for(const S of Dh(t))Tc(S,"normal")},h=()=>{const g=t.wsRef.current;if(g){if(u(),!s){g.render(),g.resize();return}for(const S of r)for(const R of S){const L=g.getBlockById(R);L&&Tc(L,"hide")}for(const S of i){const R=g.getBlockById(S);R&&Tc(R,"dim")}g.render(),g.resize()}},_=()=>{r.length=0,i=new Set},f=()=>{s=!s,_(),h()},T=()=>{if(!s)return;const g=t.wsRef.current;if(!g)return;if(r.length===0){const L=c();if(!L)return;const N=[L.id];r.push(N),i=new Set(N),h();return}const S=new Set;for(const L of i){const N=g.getBlockById(L);if(N)for(const C of l(N))C.type!=="basic_start"&&S.add(C.id)}if(S.size===0)return;const R=Array.from(S);r.push(R),i=S,h()},E=()=>{if(!s||r.length===0)return;r.pop();const g=r.length?r[r.length-1]:[];i=new Set(g),h()};return{toggleFocus:f,focusStep:g=>g===1?T():E(),focusDown:T,focusUp:E,isEnabled:()=>s,setEnabled:g=>{s=g,h()}}},Dne=t=>{let s=!1,r=0,i=new Set;const l=()=>Dh(t).filter(_=>_.type!=="basic_start"),c=()=>{for(const _ of Dh(t))Tc(_,"normal"),i.has(_.id)&&Tx(_,!1);i.clear()},u=()=>{if(!t.wsRef.current||(c(),!s))return;const f=l();if(f.length===0)return;const T=f.filter(R=>(R.getChildren?.(!1)??[]).length===0),E=T.length?T:f;r=(r%E.length+E.length)%E.length;const g=E[r];for(const R of f)Tc(R,"dim");let S=g;for(;S;)S.type!=="basic_start"&&(Tc(S,"normal"),Tx(S,!0),i.add(S.id)),S=S.getSurroundParent?.()??null};return{togglePath:()=>{s=!s,u()},pathStep:_=>{r+=_,u()},isEnabled:()=>s,setEnabled:_=>{s=_,u()}}},Pne=t=>{const s=bne(t),r=Mne(t),i=Dne(t);return{collapseAll:s.collapseAll,expandAll:s.expandAll,expandStep:s.expandStep,toggleFocus:()=>{const l=!r.isEnabled();l&&i.setEnabled(!1),r.setEnabled(l)},focusStep:r.focusStep,togglePath:()=>{const l=!i.isEnabled();l&&r.setEnabled(!1),i.setEnabled(l)},pathStep:i.pathStep}};function Fne(t){const s=t;return t.getParentSvg?.()??s.svgGroup_?.ownerSVGElement??null}function Bne(t){const s=t.querySelector("rect.blocklyMainBackground");if(s)return s;const r=t.querySelector(".blocklyMainBackground");if(r?.tagName?.toLowerCase()==="rect")return r;const i=Array.from(t.querySelectorAll("rect"));return i.find(l=>(l.getAttribute("width")??"").includes("100%"))??i[0]??null}function Une(t){const s=Fne(t);if(!s){console.warn("[grid] svg not found");return}const r=t;if(r.__frocklyGridDone)return;const i="http://www.w3.org/2000/svg";let l=s.querySelector("defs");if(l||(l=document.createElementNS(i,"defs"),s.insertBefore(l,s.firstChild)),!s.querySelector("#frocklyGrid")){const u=document.createElementNS(i,"pattern");u.setAttribute("id","frocklyGrid"),u.setAttribute("patternUnits","userSpaceOnUse"),u.setAttribute("width","24"),u.setAttribute("height","24");const h=document.createElementNS(i,"path");h.setAttribute("d","M 24 0 L 0 0 0 24"),h.setAttribute("fill","none"),h.setAttribute("stroke","rgba(0,0,0,0.10)"),h.setAttribute("stroke-width","1"),u.appendChild(h),l.appendChild(u)}const c=Bne(s);if(!c){console.warn("[grid] main background rect not found");return}c.setAttribute("fill","url(#frocklyGrid)"),c.style.fill="url(#frocklyGrid)",r.__frocklyGridDone=!0}function Hne(t){if(t.kind==="OP"){const s=t.text;if(s==="^")return{lbp:70,rbp:69,op:s,isCmp:!1};if(s==="*"||s==="/")return{lbp:60,rbp:60,op:s,isCmp:!1};if(s==="+"||s==="-")return{lbp:50,rbp:50,op:s,isCmp:!1};if(s==="&")return{lbp:40,rbp:40,op:s,isCmp:!1}}return t.kind==="CMP"?{lbp:30,rbp:30,op:t.text,isCmp:!0}:null}function Gne(t,s){let r=0;function i(){return s[r]}function l(){return s[r++]}function c(f){const T=i().i0;let E=T;for(;;){const S=i();if(S.kind==="EOF"||f.has(S.kind))break;E=S.i1,l()}return{kind:"Raw",text:t.slice(T,E)}}function u(){const f=i();if(f.kind==="OP"&&f.text==="-")return l(),{kind:"Unary",op:"-",expr:h(65)};if(f.kind==="NUMBER")return l(),{kind:"Num",text:f.text};if(f.kind==="STRING")return l(),{kind:"Str",text:f.text};if(f.kind==="REF")return l(),{kind:"Ref",text:f.text};if(f.kind==="LPAREN"){l();const T=i().kind==="RPAREN"?{kind:"Raw",text:""}:h(0);return i().kind==="RPAREN"&&l(),{kind:"Paren",inner:T}}if(f.kind==="NAME"){const T=f.text;if(l(),i().kind==="LPAREN"){l();const E=[];for(;i().kind!=="RPAREN"&&i().kind!=="EOF";){if(i().kind==="COMMA"){E.push({kind:"Raw",text:""}),l();continue}const g=r;let S;try{S=h(0)}catch{r=g,S=c(new Set(["COMMA","RPAREN"]))}if(E.push(S),i().kind==="COMMA")l();else break}return i().kind==="RPAREN"&&l(),{kind:"Call",name:T,args:E}}return{kind:"Raw",text:T}}return c(new Set(["COMMA","RPAREN"]))}function h(f){let T=u();for(;;){const E=i(),g=Hne(E);if(!g||g.lbp<f)break;l();const S=r;let R;try{R=h(g.rbp)}catch{r=S,R=c(new Set(["COMMA","RPAREN"]))}T={kind:"Binary",op:g.op,left:T,right:R}}return T}return h(0)}function Vne(t){return t.includes(":")}function Io(t){return t.initSvg(),t.render?.(),t}function Wne(t,s){for(let r=0;r<s;r++){const i=`ARG${r}`;t.getInput(i)||t.appendValueInput(i).setCheck(null)}}function Xne(t,s){function r(i){switch(i.kind){case"Num":{const l=Io(t.newBlock("basic_number"));return l.setFieldValue(i.text,"NUM"),{block:l,outConn:l.outputConnection}}case"Str":{const l=Io(t.newBlock("basic_string"));return l.setFieldValue(i.text.replace(/^"|"$/g,""),"STR"),{block:l,outConn:l.outputConnection}}case"Ref":{const l=Vne(i.text)?"basic_range":"basic_cell",c=l==="basic_range"?"RANGE":"CELL",u=Io(t.newBlock(l));return u.setFieldValue(i.text,c),{block:u,outConn:u.outputConnection}}case"Raw":{const l=Io(t.newBlock("basic_raw"));return l.setFieldValue(i.text,"RAW"),{block:l,outConn:l.outputConnection}}case"Paren":{const l=Io(t.newBlock("basic_paren")),c=r(i.inner),u=l.getInput("INNER")?.connection;return u&&c.outConn&&u.connect(c.outConn),{block:l,outConn:l.outputConnection}}case"Unary":return r({kind:"Binary",op:"-",left:{kind:"Num",text:"0"},right:i.expr});case"Binary":{const l=["=","<>","<","<=",">",">="].includes(i.op),c=Io(t.newBlock(l?"basic_cmp":"basic_arith"));c.setFieldValue(i.op,"OP");const u=r(i.left),h=r(i.right),_=c.getInput("A")?.connection,f=c.getInput("B")?.connection;return _&&u.outConn&&_.connect(u.outConn),f&&h.outConn&&f.connect(h.outConn),{block:c,outConn:c.outputConnection}}case"Call":{const l=i.name.toUpperCase(),c=`frockly_${l}`;if(XP(l),Yt[c]){const h=Io(t.newBlock(c)),_=zl(l);_&&YI(h,i.args.length,_);for(let f=0;f<i.args.length;f++){const T=r(i.args[f]),E=h.getInput(`ARG${f}`)?.connection;E&&T.outConn&&E.connect(T.outConn)}return{block:h,outConn:h.outputConnection}}const u=Io(t.newBlock("basic_raw_call"));u.getField("FN")&&u.setFieldValue(l,"FN"),Wne(u,i.args.length);for(let h=0;h<i.args.length;h++){const _=r(i.args[h]),f=u.getInput(`ARG${h}`)?.connection;f&&_.outConn&&f.connect(_.outConn)}return{block:u,outConn:u.outputConnection}}}}return r(s)}function zne(t,s){const{src:r,toks:i}=pI(s);let l;try{l=Gne(r,i)}catch(_){throw console.error("[blockFromFormula] parseAst failed",{formulaText:s,src:r,toks:i,err:_}),_}const c=t.newBlock("basic_start");c.initSvg(),c.render?.();let u;try{u=Xne(t,l)}catch(_){throw console.error("[blockFromFormula] astToBlockly failed",{formulaText:s,src:r,toks:i,ast:l,err:_}),_}const h=c.getInput("EXPR")?.connection;return h&&u.outConn&&h.connect(u.outConn),c.moveBy(40,40),c.select?.(),t.resize(),c}function Gk({onFormulaChange:t,selectedCell:s,onWorkspaceApi:r,uiLang:i,namedFns:l,onHighlightRange:c}){const u=Ce.useRef(null),h=Ce.useRef(l??[]);Ce.useEffect(()=>{h.current=l??[]},[l]);const _=async()=>{u.current||(u.current=im(i)),await u.current};Ce.useEffect(()=>{u.current=null},[i]);const f=X1(),T=Ce.useRef(f);Ce.useEffect(()=>{T.current=f},[f]);const E=Ce.useRef(null),g=Ce.useRef(null),S=Ce.useRef(t);Ce.useEffect(()=>{S.current=t},[t]);const R=Ce.useRef(r);Ce.useEffect(()=>{R.current=r},[r]);const L=Ce.useRef(s);Ce.useEffect(()=>{L.current=s},[s]);const N=Ce.useRef([]),C=30,A=Ce.useMemo(()=>{const U=Xr(i);return`
      <xml xmlns="https://developers.google.com/blockly/xml">
        <category name="${U(Qe.BASIC).replace(/&/g,"&amp;")}">
          <block type="basic_start"></block>

          <block type="basic_number"></block>
          <block type="basic_string"></block>

          <block type="basic_cell"></block>
          <block type="basic_range"></block>

          <block type="basic_arith"></block>
          <block type="basic_cmp"></block>

          <block type="basic_paren"></block>
          <!-- <block type="basic_bool"></block> -->
        </category>

        <category name="${U(Qe.HISTORY).replace(/&/g,"&amp;")}" custom="FROCKLY_HISTORY"></category>
      </xml>
    `},[i]),I=U=>{const B=g.current;if(!B)return;const Z=T.current.workspaces.find(pe=>pe.id===U);if(!Z||Z.kind!=="fn"||!Yt.fn_root)return;const se=B.getAllBlocks(!1).filter(pe=>pe.type==="fn_root");if(se.length===0){const pe=B.newBlock("fn_root");pe.initSvg(),pe.render?.(),pe.moveBy(40,40)}else for(let pe=1;pe<se.length;pe++)se[pe].dispose(!0)},k=U=>{const B=g.current;if(!B)return;const re=T.current,Z=re.workspaces.find(oe=>oe.id===U);if(!Z||Z.kind!=="fn")return;const se=Z.fnId;if(!se)return;const pe=re.functions.find(oe=>oe.id===se),Me=pe?.params?.length??0,Oe=B.getAllBlocks(!1).filter(oe=>oe.type==="fn_root");if(Oe.length!==1)return;const ye=Oe[0].getInput("PARAMS")?.connection;if(!ye)return;const Re=[];let j=ye.targetBlock();for(;j&&j.type==="fn_param";)Re.push(j),j=j.getNextBlock();for(;Re.length>Me;)Re.pop().dispose(!0);const Y=oe=>{Re.length===0?ye.connect(oe.previousConnection):Re[Re.length-1].nextConnection.connect(oe.previousConnection)};for(;Re.length<Me;){const oe=B.newBlock("fn_param");oe.initSvg(),oe.render?.(),Y(oe),Re.push(oe)}for(let oe=0;oe<Re.length;oe++)Re[oe].setFieldValue(pe?.params?.[oe]??`p${oe+1}`,"NAME");B.render()},H=U=>{const B=g.current;if(!B)return[];const Z=T.current.workspaces.find(ye=>ye.id===U);if(!Z||Z.kind!=="fn")return[];const se=B.getAllBlocks(!1).find(ye=>ye.type==="fn_root");if(!se)return[];const pe=se.getInput("PARAMS")?.connection;if(!pe)return[];const Me="NAME",Oe=[];let we=pe.targetBlock();for(;we&&we.type==="fn_param";){const ye=String(we.getFieldValue?.(Me)??"").trim();ye&&Oe.push(ye),we=we.getNextBlock()}return Oe},G=U=>{const Z=(U.includes("!")?U.split("!").pop():U).replace(/[$#]/g,"").trim().match(/^([A-Z]+[0-9]+)(?::([A-Z]+[0-9]+))?$/i);if(!Z)return null;const se=Z[1].toUpperCase(),pe=(Z[2]??Z[1]).toUpperCase();return{a:se,b:pe}};Ce.useEffect(()=>{const U=E.current;if(!U)return;let B=!1;const re=()=>{const Me=g.current;if(!Me)return;const Oe=Me.getToolbox?.();Oe?.clearSelection?.(),Oe?.getFlyout?.()?.hide?.(),Dv?.(!0),Me.resize()},Z=Me=>{if(!Me||!Yt[Me])return;const Oe=N.current.filter(we=>we!==Me);Oe.unshift(Me),N.current=Oe.slice(0,C),queueMicrotask(()=>g.current?.refreshToolboxSelection?.())},se=()=>{const Me=g.current;if(Me)try{const Oe=Mv.workspaceToDom(Me),we=tc.xml.domToText(Oe);FF(we)}catch(Oe){console.warn("[WS] save xml failed",Oe)}},pe=async Me=>{const Oe=g.current;if(Oe)try{await _(),Oe.clear();const Re=T.current.workspaces.find(j=>j.id===Me)?.xml??"";if(Re){const j=tc.xml.textToDom(Re);Mv.domToWorkspace(j,Oe)}I(Me),k(Me),Oe.render(),Oe.resize()}catch(we){console.error("[WS] load xml failed",we)}};return(async()=>{try{await im(i)}catch(Y){console.error("[DBG] initFrockly crashed",Y)}if(B)return;const Me=vP.defineTheme("frockly",{name:"frockly",base:NP.Classic,componentStyles:{workspaceBackgroundColour:"transparent"}}),Oe=xP(U,{toolbox:A,theme:Me,trashcan:!0,scrollbars:!0,zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2}});g.current=Oe,requestAnimationFrame(()=>{Une(Oe)}),pe(f.activeWorkspaceId),U.addEventListener("pointerdown",re,!0),Oe.registerToolboxCategoryCallback("FROCKLY_HISTORY",()=>{const Y=N.current;if(Y.length===0){const oe=tc.xml.createElement("label"),M=Xr(i);return oe.setAttribute("text",M(Qe.NO_HISTORY)),[oe]}return Y.map(oe=>{const M=tc.xml.createElement("block");return M.setAttribute("type",oe),M})});const we=Y=>{const oe=T.current,M=oe?.fns??oe?.namedFns??oe?.namedFunctions??oe?.namedFnItems??oe?.functions??[];return Array.isArray(M)?M.find(Q=>Q?.id===Y)??null:M&&typeof M=="object"?M[Y]??null:null};R.current?.({insertBlock:Y=>{const oe=g.current;if(!oe||!Yt[Y])return;const M=T.current;if(M.workspaces.find(he=>he.id===M.activeWorkspaceId)?.kind==="fn"&&Y==="fn_param"){const he=oe.getAllBlocks(!1).find(Pe=>Pe.type==="fn_root"),Ne=he?.getInput("PARAMS")?.connection;if(he&&Ne){let Pe=Ne.targetBlock();for(;Pe&&Pe.getNextBlock();)Pe=Pe.getNextBlock();const be=oe.newBlock("fn_param");be.initSvg(),be.render?.(),Pe?Pe.nextConnection.connect(be.previousConnection):Ne.connect(be.previousConnection),Z("fn_param"),re(),oe.render(),oe.resize();return}}const q=oe.newBlock(Y);q.initSvg(),q.render?.(),q.moveBy(40,40),Z(Y),re()},insertRefBlock:Y=>{const oe=g.current;if(!oe)return;const M=Y.includes(":"),Q=M?"basic_range":"basic_cell",J=M?"RANGE":"CELL";if(!Yt[Q]){console.warn("Unknown ref block:",Q);return}const q=oe.newBlock(Q);q.initSvg(),q.render?.(),q.setFieldValue(Y,J),q.moveBy(40,40),Z(Q),re()},insertFromFormula:Y=>{const oe=g.current;if(console.log("[WS] insertFromFormula",{hasWs:!!oe,formulaText:Y}),!!oe)try{const M=zne(oe,Y);console.log("[WS] blockFromFormula OK",{startId:M?.id}),oe.resize()}catch(M){console.error("[WS] blockFromFormula crashed",M),alert("blockFromFormula console")}},switchWorkspace:Y=>{se(),Wv(Y),pe(Y),queueMicrotask(()=>{I(Y),k(Y)})},insertFnCall:Y=>{const oe=g.current;if(!oe)return;const M=oe.newBlock("fn_call");M.initSvg();const Q=h.current.find(J=>J.id===Y)??null;sm(M,Q?{id:Q.id,name:Q.name,params:Q.params}:null),sm(M,Q),M.render?.(),oe.render(),oe.resize(),M.moveBy(40,40),Z("fn_call"),re()},insertFnToMain:Y=>{const oe=f.workspaces.find(J=>J.kind==="main");if(!oe)return;se(),Wv(oe.id),pe(oe.id);const M=g.current;if(!M)return;if(!Yt.fn_call){const J=M.newBlock("basic_string");J.initSvg();const q=we(Y);sm(J,q?{id:q.id,name:q.name,params:q.params}:null),J.render?.(),J.setFieldValue(Y,"TEXT"),J.moveBy(60,60),Z("basic_string"),re();return}const Q=M.newBlock("fn_call");Q.initSvg(),Q.render?.();try{Q.setFieldValue(Y,"FN")}catch{Q.data=JSON.stringify({fnId:Y})}Q.moveBy(60,60),Z("fn_call"),re()},view:Pne({wsRef:g})});const ye=Y=>{if(Y.isUiEvent||Y.type===kt.BLOCK_DRAG||Y.type===kt.SELECTED||Y.type===kt.TOOLBOX_ITEM_SELECT)return;const oe=T.current,M=oe.activeWorkspaceId,Q=oe.workspaces.find(be=>be.id===M),J=Q?.kind==="fn";if(Y.type===kt.BLOCK_CREATE){const be=Y;for(const ce of be.ids??[]){const tt=Oe.getBlockById(ce);tt&&Z(tt.type)}}const q=Oe.getAllBlocks(!1).filter(be=>J?be.type==="fn_root":be.type==="basic_start");if(q.length===0)S.current?.("");else{const be=q[0];try{Bs.init(Oe);const ce=Bs.blockToCode(be),tt=Array.isArray(ce)?String(ce[0]??""):String(ce??"");Bs.finish(tt),S.current?.(tt.trim())}catch(ce){console.error("[GEN] blockToCode failed",ce)}}if(!J||!(Y.type===kt.BLOCK_DELETE||Y.type===kt.BLOCK_CREATE||Y.type===kt.BLOCK_MOVE||Y.type===kt.BLOCK_CHANGE))return;const Ne=H(M),Pe=Q?.fnId;Pe&&GF(Pe,Ne)};Oe.addChangeListener(ye);let Re=null;const j=Y=>{if(Y.type!==kt.SELECTED)return;const M=Y.newElementId;if(Re&&Oe.getBlockById(Re)?.getSvgRoot()?.classList.remove("frockly-focused"),c?.(null),M){const Q=Oe.getBlockById(M);if(Q?.getSvgRoot()?.classList.add("frockly-focused"),Re=M,Q){let J=null;if(Q.type==="basic_cell")try{J=String(Q.getFieldValue("CELL")??"")}catch{}else if(Q.type==="basic_range")try{J=String(Q.getFieldValue("RANGE")??"")}catch{}if(J){const q=G(J);q&&c?.(q)}}}else Re=null};Oe.addChangeListener(j)})(),()=>{B=!0,U.removeEventListener("pointerdown",re,!0),g.current?.dispose(),g.current=null}},[]),Ce.useEffect(()=>{(async()=>{try{await im(i);const U=g.current;if(U)try{U.getAllBlocks(!1).forEach(re=>{if(re.type.startsWith("frockly_")){const Z=re.type.slice(8),se=zl(Z);if(se){const pe=se.localizedName??se.name;re.setFieldValue(pe,"FN_NAME")}}if(re.type.startsWith("basic_")){const Z=rne(re.type,i);Z&&re.setFieldValue(Z,"LABEL")}try{re.initSvg?.(),re.render?.()}catch{}});const B=U.getToolbox?.();B?.clearSelection?.(),B?.getFlyout?.()?.reflow?.(),Dv?.(!0),U.resize()}catch(B){console.warn("Failed to refresh workspace after locale change",B)}}catch(U){console.error("initFrockly failed",U)}})()},[i]);const x=f.workspaces.find(U=>U.id===f.activeWorkspaceId)?.title;return V.jsxs("div",{className:"relative w-full h-full",children:[V.jsx("div",{className:`\r
            absolute top-3 right-4 z-[5]\r
            px-2 py-1 text-base font-bold\r
            text-slate-500\r
            pointer-events-none\r
            select-none\r
          `,children:x}),V.jsx("div",{ref:E,className:`\r
            w-full h-full overflow-hidden\r
            bg-[linear-gradient(to_right,rgba(0,0,0,0.06)_1px,transparent_1px),\r
                linear-gradient(to_bottom,rgba(0,0,0,0.06)_1px,transparent_1px)]\r
            bg-[size:24px_24px]\r
            bg-slate-50\r
          `})]})}function Vk({formula:t,uiLang:s="en"}){const r=Xr(s),[i,l]=Ce.useState(!1),c=()=>{t&&(navigator.clipboard.writeText(t),l(!0),setTimeout(()=>l(!1),2e3))};return V.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[V.jsxs("div",{className:"bg-gray-100 border-b border-gray-300 px-4 py-2 flex items-center justify-between",children:[V.jsx("h3",{className:"text-emerald-700",children:r(Qe.GENERATED_FORMULA)}),V.jsx("button",{onClick:c,disabled:!t,className:`
            flex items-center gap-2 px-3 py-1 rounded text-sm
            ${t?"bg-emerald-600 text-white hover:bg-emerald-700 shadow-sm":"bg-gray-300 text-gray-500 cursor-not-allowed"}
            transition-colors
          `,children:i?V.jsxs(V.Fragment,{children:[V.jsx(EP,{className:"w-4 h-4"}),r(Qe.COPY_DONE)]}):V.jsxs(V.Fragment,{children:[V.jsx(mP,{className:"w-4 h-4"}),r(Qe.COPY)]})})]}),V.jsx("div",{className:"flex-1 p-4",children:V.jsx("div",{className:"h-full bg-white border-2 border-gray-300 rounded-lg p-4 shadow-inner",children:t?V.jsxs("div",{className:"flex items-center gap-3",children:[V.jsx("span",{className:"text-emerald-600",children:"fx"}),V.jsx("code",{className:"flex-1 bg-emerald-50 px-3 py-2 rounded border border-emerald-200 text-emerald-900",children:t})]}):V.jsx("div",{className:"flex items-center justify-center h-full",children:V.jsx("p",{className:"text-gray-400 text-sm",children:r(Qe.SELECT_BLOCK_PROMPT)})})})})]})}function Yne({ui:t,projectCtx:s,refs:r,grid:i,formula:l,blockCategory:c="math"}){return V.jsxs(V.Fragment,{children:[V.jsx(WF,{selectedTab:t.ribbonTab,onTabChange:t.setRibbonTab,uiLang:t.uiLang,onUiLangChange:t.setUiLang,onWorkspaceApi:r.workspaceApiRef,onBlockClick:u=>r.workspaceApiRef.current?.insertBlock(u),focusOn:t.focusOn,pathOn:t.pathOn,onToggleFocus:t.onToggleFocus,onTogglePath:t.onTogglePath,namedFns:s.namedFns,workspaces:s.workspaces,activeWorkspaceId:s.project.activeWorkspaceId,activeWorkspaceTitle:s.activeWorkspaceTitle,onCreateNamedFn:s.onCreateNamedFn,onDuplicateNamedFn:s.onDuplicateNamedFn,onDeleteNamedFn:s.onDeleteNamedFn,onRenameNamedFn:s.onRenameNamedFn,onUpdateNamedFnMeta:s.onUpdateNamedFnMeta,onExportNamedFns:s.onExportNamedFns,onImportNamedFns:s.onImportNamedFns,onImportXlsx:s.onImportXlsx,sheets:s.sheets,activeSheet:s.activeSheet,onChangeSheet:s.onChangeSheet}),V.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[V.jsx("div",{style:{width:t.leftWidth},className:"border-r border-gray-300 bg-white",children:V.jsx(xk,{selectedCell:i.selectedCell,onCellSelect:i.setSelectedCell,cells:i.cells,onCellsChange:i.onCellsChange,uiLang:t.uiLang,highlightRange:i.highlightRange})}),V.jsx("div",{onMouseDown:t.onStartSplitDrag,className:"w-2 cursor-col-resize bg-gray-200 hover:bg-gray-300"}),V.jsxs("div",{className:"flex-1 flex flex-col bg-white",children:[V.jsx("div",{className:"flex-1 border-b border-gray-300",children:V.jsx(Gk,{category:c,onFormulaChange:l.setFormula,selectedCell:i.selectedCell,onWorkspaceApi:u=>r.workspaceApiRef.current=u,uiLang:t.uiLang,namedFns:s.namedFns,onHighlightRange:i.setHighlightRange})}),V.jsx("div",{className:"h-32 border-t border-gray-300",children:V.jsx(Vk,{formula:l.formula,uiLang:t.uiLang})})]})]})]})}function Kne(t){const s=Xr(t.uiLang);return V.jsxs("div",{className:"shrink-0 bg-emerald-600 border-b border-emerald-700 px-3 pt-2 pb-2",children:[V.jsxs("div",{className:"flex items-center gap-2",children:[V.jsx(j1,{size:26}),V.jsxs("div",{className:"min-w-0 flex-1",children:[V.jsx("div",{className:"font-bold text-[13px] leading-tight text-white truncate",children:t.title??"Frockly"}),V.jsx("div",{className:"text-[11px] leading-tight text-emerald-100 truncate",children:t.subtitle??""})]}),t.onImportFromFormula&&V.jsx("button",{onClick:t.onImportFromFormula,className:`\r
      h-8 px-2\r
      text-[11px] font-medium\r
      rounded-md\r
      bg-emerald-100 text-emerald-800\r
      border border-emerald-300\r
      hover:bg-emerald-200\r
      active:bg-emerald-300\r
      whitespace-nowrap\r
    `,children:s(Qe.IMPORT_FROM_FORMULA)}),V.jsxs("select",{className:`\r
      h-8 text-[12px] rounded-md\r
      border border-emerald-300/40 bg-emerald-700 text-white px-2\r
      focus:outline-none focus:bg-white focus:text-emerald-900\r
    `,value:t.uiLang,onChange:r=>t.onChangeLang(r.target.value),children:[V.jsx("option",{value:"ja",children:"JP"}),V.jsx("option",{value:"en",children:"EN"})]})]}),V.jsxs("div",{className:"mt-2 flex items-center gap-1 bg-white rounded px-2 py-1",children:[V.jsx(k1,{className:"w-4 h-4 text-gray-500 shrink-0"}),V.jsx("input",{type:"text",value:t.search,onChange:r=>t.onChangeSearch(r.target.value),placeholder:s(t.placeholderKey??"SEARCH"),className:"text-sm outline-none w-full"})]})]})}function jne({ui:t,projectCtx:s,refs:r,grid:i,formula:l}){const c=Xr(t.uiLang),[u,h]=Ce.useState(!1),[_,f]=Ce.useState(""),[T,E]=Ce.useState("ws"),g=()=>{f(""),h(!0)},S=t.ribbonTab,R=t.setRibbonTab,[L,N]=Ce.useState(""),C=Ce.useMemo(()=>[{id:"file",labelKey:"TAB_FILE",icon:y1},{id:"functions",labelKey:"TAB_FUNCTIONS",icon:M1},{id:"named",labelKey:"TAB_NAMED_FUNCTIONS",icon:w1},{id:"view",labelKey:"VIEW",icon:b1}],[]),A=(s.namedFns?.length??0)>0||!!s.onCreateNamedFn||!!r.workspaceApiRef.current?.insertFnCall,I=Ce.useMemo(()=>A?C:C.filter(H=>H.id!=="named"),[C,A]),k=r.workspaceApiRef.current;return V.jsxs("div",{className:"h-screen flex flex-col bg-gray-50",children:[V.jsxs("div",{className:"shrink-0 border-b bg-white",children:[V.jsx(Kne,{title:"Frockly",subtitle:s.activeWorkspaceTitle,uiLang:t.uiLang,onChangeLang:t.setUiLang,search:L,onChangeSearch:N,placeholderKey:"SEARCH",onImportFromFormula:g}),V.jsx("div",{className:"px-2 pb-2 bg-emerald-600",children:V.jsx("div",{className:"flex items-center gap-1",children:I.map(H=>{const G=H.icon,x=S===H.id;return V.jsxs("button",{onClick:()=>R(H.id),className:["h-9 px-2 rounded-md border flex items-center gap-1","text-[12px] select-none",x?"bg-white text-emerald-800 border-emerald-200":"bg-emerald-500 text-white border-emerald-700"].join(" "),children:[V.jsx(G,{className:"w-4 h-4"}),V.jsx("span",{className:"leading-none",children:c(H.labelKey)})]},H.id)})})}),V.jsx("div",{className:"border-t bg-white",children:S==="file"?V.jsx(K1,{onImportXlsx:s.onImportXlsx,onImportNamedFns:s.onImportNamedFns,onExportNamedFns:s.onExportNamedFns,sheets:s.sheets,activeSheet:s.activeSheet,onChangeSheet:s.onChangeSheet}):S==="functions"?V.jsx(G1,{search:L,uiLang:t.uiLang,onBlockClick:H=>k?.insertBlock?.(H)}):S==="named"?V.jsx(V1,{uiLang:t.uiLang,search:L,fns:s.namedFns,workspaces:s.workspaces,activeWorkspaceId:s.project?.activeWorkspaceId,onUpdateFnMeta:s.onUpdateNamedFnMeta,onCreateFn:()=>s.onCreateNamedFn(),onDuplicateFn:H=>s.onDuplicateNamedFn(H),onDeleteFn:H=>s.onDeleteNamedFn(H),onRenameFn:(H,G)=>s.onRenameNamedFn(H,G),onSwitchWorkspace:H=>k?.switchWorkspace?.(H),onInsertCurrent:H=>k?.insertFnCall?.(H),onInsertToMain:H=>k?.insertFnToMain?.(H),onInsertCurrentParam:()=>k?.insertBlock?.("fn_param")}):V.jsx(Jne,{uiLang:t.uiLang,focusOn:t.focusOn,pathOn:t.pathOn,onToggleFocus:t.onToggleFocus,onTogglePath:t.onTogglePath,api:k})})]}),V.jsxs("div",{className:"flex-1 overflow-hidden",children:[T==="ws"&&V.jsx("div",{className:"h-full bg-white",children:V.jsx(Gk,{category:"math",onFormulaChange:l.setFormula,selectedCell:i.selectedCell,onWorkspaceApi:H=>r.workspaceApiRef.current=H,uiLang:t.uiLang,namedFns:s.namedFns,onHighlightRange:i.setHighlightRange})}),T==="grid"&&V.jsx("div",{className:"h-full bg-white",children:V.jsx(xk,{selectedCell:i.selectedCell,onCellSelect:i.setSelectedCell,cells:i.cells,onCellsChange:i.onCellsChange,uiLang:t.uiLang,highlightRange:i.highlightRange})}),T==="formula"&&V.jsx("div",{className:"h-full bg-white",children:V.jsx(Vk,{formula:l.formula,uiLang:t.uiLang})})]}),V.jsxs("div",{className:"h-14 shrink-0 border-t bg-white flex",children:[V.jsx(lm,{active:T==="ws",onClick:()=>E("ws"),children:c("MOBILE_TAB_WORKSPACE")}),V.jsx(lm,{active:T==="grid",onClick:()=>E("grid"),children:c("MOBILE_TAB_CELLS")}),V.jsx(lm,{active:T==="formula",onClick:()=>E("formula"),children:c("MOBILE_TAB_FORMULA")})]}),V.jsx(J1,{open:u,uiLang:t.uiLang,text:_,setText:f,onClose:()=>h(!1),onSubmit:H=>{const G=r.workspaceApiRef.current?.insertFromFormula;if(!G){alert(Xr(t.uiLang)(Qe.IMPORT_API_NOT_READY));return}try{G(H),h(!1)}catch(x){console.error("[IMPORT] insertFromFormula crashed",x),alert(Xr(t.uiLang)(Qe.IMPORT_FAILED))}}})]})}function lm(t){return V.jsx("button",{className:["flex-1 text-[13px] select-none",t.active?"font-semibold bg-gray-50":"bg-white"].join(" "),onClick:t.onClick,children:t.children})}function Jne(t){const s=Xr(t.uiLang);return V.jsx("div",{className:"py-1",children:V.jsx("div",{className:"h-[36px] flex items-stretch px-2 overflow-hidden",children:V.jsxs("div",{className:"flex min-w-0 flex-1 items-center gap-2 overflow-x-auto overflow-y-hidden py-1",children:[V.jsx(Hr,{onClick:()=>t.api?.view?.collapseAll?.(),children:s("COLLAPSE_ALL")}),V.jsx(Hr,{onClick:()=>t.api?.view?.expandAll?.(),children:s("EXPAND_ALL")}),V.jsx(Hr,{onClick:()=>t.api?.view?.expandStep?.(-1),children:""}),V.jsx(Hr,{onClick:()=>t.api?.view?.expandStep?.(1),children:""}),V.jsx(Ah,{}),V.jsxs(Hr,{className:t.focusOn?"bg-emerald-500 text-white border-emerald-600":"",onClick:t.onToggleFocus,children:[s("FOCUS"),": ",t.focusOn?s("ON"):s("OFF")]}),V.jsx(Hr,{onClick:()=>t.api?.view?.focusStep?.(-1),children:""}),V.jsx(Hr,{onClick:()=>t.api?.view?.focusStep?.(1),children:""}),V.jsx(Ah,{}),V.jsxs(Hr,{className:t.pathOn?"bg-emerald-500 text-white border-emerald-600":"",onClick:t.onTogglePath,children:[s("PATH"),": ",t.pathOn?s("ON"):s("OFF")]}),V.jsx(Hr,{onClick:()=>t.api?.view?.pathStep?.(-1),children:""}),V.jsx(Hr,{onClick:()=>t.api?.view?.pathStep?.(1),children:""})]})})})}function qne(){BF();const t=X1(),r=HF(t,t.activeWorkspaceId)?.title??"???",i=window.matchMedia("(max-width: 768px)").matches,[l,c]=Ce.useState("en"),[u,h]=Ce.useState(""),[_,f]=Ce.useState("A1"),[T,E]=Ce.useState("functions"),[g,S]=Ce.useState(!1),[R,L]=Ce.useState(!1),N=Ce.useRef(null),[C,A]=Ce.useState(700),I=j=>{const Y=j.clientX,oe=C,M=J=>{const q=J.clientX-Y,he=oe+q;he>200&&he<900&&A(he)},Q=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",Q)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",Q)},k=()=>{N.current?.view?.toggleFocus?.(),S(j=>!j),L(!1)},H=()=>{N.current?.view?.togglePath?.(),L(j=>!j),S(!1)},G=Ce.useMemo(()=>t.functions.map(j=>({id:j.id,name:j.name,params:j.params,workspaceId:j.workspaceId,description:j.description??""})),[t.functions]),x=Ce.useMemo(()=>t.workspaces.map(Y=>{if(Y.kind==="main")return{id:Y.id,title:Y.title,kind:"main"};const oe=t.functions.find(M=>M.workspaceId===Y.id);return{id:Y.id,title:Y.title,kind:"fn",fnId:oe?.id}}),[t.workspaces,t.functions]),[U,B]=Ce.useState([{name:"Sheet1",cells:{}}]),[re,Z]=Ce.useState(0),se=U[re].cells,pe=async j=>{const Y=await j.arrayBuffer(),oe=vW(Y);B(oe.sheets),Z(0)},Me=async j=>{const Y=await j.text(),oe=JSON.parse(Y),M=xW(oe);VF(M.map(Q=>({name:Q.fn.name,params:Q.fn.params,description:Q.fn.description,workspaceXml:Q.workspaceXml})))},Oe=()=>{const j=Sc(),Y=NW(j),oe=new Blob([JSON.stringify(Y,null,2)],{type:"application/json"}),M=URL.createObjectURL(oe),Q=document.createElement("a");Q.href=M,Q.download="frockly_named_functions.json",Q.click(),URL.revokeObjectURL(M)},[we,ye]=Ce.useState(null),Re=j=>{B(Y=>{const oe=[...Y];return oe[re]={...oe[re],cells:j(oe[re].cells)},oe})};return V.jsx("div",{className:"h-screen flex flex-col bg-gray-50",children:i?V.jsx(jne,{ui:{ribbonTab:T,setRibbonTab:E,uiLang:l,setUiLang:c,leftWidth:C,onStartSplitDrag:I,focusOn:g,pathOn:R,onToggleFocus:k,onTogglePath:H},projectCtx:{project:t,activeWorkspaceTitle:r,namedFns:G,workspaces:x,onCreateNamedFn:()=>o$("A",[]),onDuplicateNamedFn:Yv,onDeleteNamedFn:Kv,onRenameNamedFn:zv,onUpdateNamedFnMeta:Xv,onExportNamedFns:Oe,onImportNamedFns:Me,onImportXlsx:pe,sheets:U.map(j=>j.name),activeSheet:re,onChangeSheet:Z},refs:{workspaceApiRef:N},grid:{selectedCell:_,setSelectedCell:f,cells:se,onCellsChange:Re,highlightRange:we,setHighlightRange:ye},formula:{formula:u,setFormula:h}}):V.jsx(Yne,{ui:{ribbonTab:T,setRibbonTab:E,uiLang:l,setUiLang:c,leftWidth:C,onStartSplitDrag:I,focusOn:g,pathOn:R,onToggleFocus:k,onTogglePath:H},projectCtx:{project:t,activeWorkspaceTitle:r,namedFns:G,workspaces:x,onCreateNamedFn:()=>o$("A",[]),onDuplicateNamedFn:Yv,onDeleteNamedFn:Kv,onRenameNamedFn:zv,onUpdateNamedFnMeta:Xv,onExportNamedFns:Oe,onImportNamedFns:Me,onImportXlsx:pe,sheets:U.map(j=>j.name),activeSheet:re,onChangeSheet:Z},refs:{workspaceApiRef:N},grid:{selectedCell:_,setSelectedCell:f,cells:se,onCellsChange:Re,highlightRange:we,setHighlightRange:ye},formula:{formula:u,setFormula:h}})})}N1(document.getElementById("root")).render(V.jsx(qne,{}));export{Ph as a,Zne as g};
